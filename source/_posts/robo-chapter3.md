---
title: 正逆运动学
date: 2025-10-17 10:38:10
tags: 机器人学
mathjax: true
---

# 四个连杆参数

* 连杆本身

  * 连杆长度a：首尾两关节轴线距离（当两轴不平行时，公垂线只有一条）

  * 扭转角α：首尾两关节轴线夹角（投影到同一平面）

* 连杆连接（关节）

  * 连杆偏距d_i：关节i处，连杆i偏离i-1的距离
  * 关节角θ_i：关节i处，连杆i与i-1的夹角

对于转动关节，除**关节角**外，其他参数不变；对于移动关节，除**偏距**外其他参数不变

<u>**理解：将一个转动关节想象为圆柱，垂直于圆柱侧面的为连杆长度a，它的转角为关节角θ；沿着圆柱轴线的为偏距d；控制圆柱初始位姿的为扭转角α**</u>

# 正运动学

已知机器人各连杆参数，求末端位姿。

对于机器人的两个连杆之间的变换，由四个连杆参数决定；而连杆长度a和连杆转角α由机械系统决定，不是变量，根据关节类型的不同，对于任意机器人，**这个坐标系变换都是只有一个变量的函数**

因此对于机器人末端执行器坐标系{N}相对于坐标系{0}的变换矩阵为：
$$
^0_NT=^0_1T^1_2T^2_3T...^{N-1}_NT
$$

## DH参数法（改进）

对于每个连杆的坐标系，通常选择轴线方向为Z轴，X轴沿着连杆方向（当连杆长度为0时，X轴垂直于Z_{i-1}和Zi的平面），根据右手定律确定Y轴。在改进DH参数法中，坐标系{i}与关节i固连

因此，当我们要求解连杆i-1到连杆i的变换时（也就是{i-1}到{i}的变换），需要：

* a_{**i-1**}
* α_{**i-1**}
* d_i
* θ_i

其中a和α表示连杆信息，d和θ表示关节信息

在改进DH参数下，**每个坐标系（连杆）之间的变换矩阵又包括了一个变量矩阵和三个常量矩阵的乘积**，其通用形式可表示为：
$$
^{i-1}_iT = 
\begin{bmatrix}
\cos\theta_i & -\sin\theta_i & 0 & a_{i-1} \\
\sin\theta_i \cos\alpha_{i-1} & \cos\theta_i \cos\alpha_{i-1} & -\sin\alpha_{i-1} & -d_i \sin\alpha_{i-1} \\
\sin\theta_i \sin\alpha_{i-1} & \cos\theta_i \sin\alpha_{i-1} & \cos\alpha_{i-1} & d_i \cos\alpha_{i-1} \\
0 & 0 & 0 & 1
\end{bmatrix}
$$
注：标准DH和改进DH的变换矩阵不同

## 易混淆点

对于改进DH，坐标系{i}是**固定在连杆i**上，而不是关节i，因为坐标系用于连杆之间的坐标变换，包含了连杆本身带来的变换（a与α）与关节带来的变换（d与θ），说到底，可以直接忘记关节的概念，毕竟变换都是指连杆间的变换

## 坐标系标准命名

* 基坐标系：机器人的基座{B}
* 工作台坐标系：机器人工作台的坐标系{S}，可以是桌子、地面上某个通用坐标系，常根据基坐标系确定
* 腕部坐标系：末端连杆轴的坐标系{W}
* 工具坐标系：机器人末端坐标系{T}
* 目标坐标系：对机器人夹持的物件等的坐标系描述{G}

# 逆运动学

已知机器人末端**位姿**，求各连杆偏距or关节角。该问题可分为两步：（1）求出腕部坐标系{W}相对于基坐标{B}的变换矩阵；（2）应用逆运动学求解关节角

## 工作空间描述

在进行逆运动学求解之前，我们首先需要讨论解的存在性，即机器人是否能够达到期望位姿，而这取决于机器人的工作空间，而确定工作空间的方法就是给出{W}的坐标系表达式，一个含有n个变量的函数

当已知目标点
$$
^BP_{P_{org}}=\begin{bmatrix}x_p \\y_p\\z_p \end{bmatrix}
$$
则可通过求解{P}各轴在{B}下的坐标以得到{P}的坐标系表示：（旋转矩阵的定义）
$$
^B_PT=\begin{bmatrix}^B\hat{X}_P &^B\hat{Y}_P &^B \hat{Z}_P & ^BP_{p_{org}}\\
0 & 0 & 0 & 1\end{bmatrix}
$$
而对于轴矢量的求解，通常要结合实际情况与叉乘

因此，任何不满足该工作空间的{W}均在机器人工作空间之外

（看的不是很懂，目前感觉影响不大）

## 代数法求解逆运动学

利用正运动学方程，通过代数变换（如移项、三角恒等式等）直接求解关节变量。适用于平面、少自由度机器人逆运动学求解

对于一个三连杆平面机器人，当已知除θ外其他连杆参数时，可以根据坐标轴矢量得到{W}的正运动学函数，（假设{W}就在连杆3的关节处，目标点在{W}上），因此当给定目标点位姿时，可以得到以下方程：
$$
\begin{bmatrix}
c_{123} & -s_{123} & 0.0 & l_1c_1 + l_2c_{12} \\
s_{123} & c_{123} & 0.0 & l_1s_1 + l_2s_{12} \\
0.0 & 0.0 & 1.0 & 0.0 \\
0 & 0 & 0 & 1
\end{bmatrix}=
\begin{bmatrix}
c_{\phi} & -s_{\phi} & 0.0 & x \\
s_{\phi} & c_{\phi} & 0.0 & y \\
0.0 & 0.0 & 1.0 & 0.0 \\
0 & 0 & 0 & 1
\end{bmatrix}
$$
其中Φ，x，y，l_1，l_2为已知值。即根据四个非线性方程求解三个未知数，因此可以得到所有可能解

（将方程两边平方相加，消去θ₁，利用余弦定理直接求解θ₂，再反求θ₁，最后用arctan求Φ，减去θ₁，θ₂得到θ3）

## 几何法求解逆运动学

即通过三角函数进行几何分析求各角度，与代数法本质相同，不再详细展开

## 数值法求解逆运动学

使用迭代数值求解，这里暂时不深究，需要时再扩充



