<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ä½¿ç”¨è¯´æ˜</title>
    <url>/2022/09/08/%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/</url>
    <content><![CDATA[<h1 id="æ¬¢è¿è®¿é—®DHKçš„ä¸ªäººåšå®¢ï¼ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨è¯´æ˜ï¼š"><a href="#æ¬¢è¿è®¿é—®DHKçš„ä¸ªäººåšå®¢ï¼ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨è¯´æ˜ï¼š" class="headerlink" title="æ¬¢è¿è®¿é—®DHKçš„ä¸ªäººåšå®¢ï¼ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨è¯´æ˜ï¼š"></a>æ¬¢è¿è®¿é—®DHKçš„ä¸ªäººåšå®¢ï¼ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨è¯´æ˜ï¼š</h1><h2 id="1-å†™çš„ç›®çš„"><a href="#1-å†™çš„ç›®çš„" class="headerlink" title="1.å†™çš„ç›®çš„"></a>1.å†™çš„ç›®çš„</h2><p>ä¸»è¦æ˜¯ä¸ºäº†è®°å½•è‡ªå·±åœ¨ä¸€äº›å­¦ä¹ ä¸­çš„ç¬”è®°å’Œæ„Ÿæƒ³ï¼Œæ–¹ä¾¿æ—¥åå›å¿†ä¸æŸ¥é˜…ï¼Œä»…ä¾›å†…éƒ¨å­¦ä¹ ï¼Œæœªç»åŒæ„è¯·å‹¿è½¬è½½ï¼</p>
<p>ç”±äºå¤§éƒ¨åˆ†æ˜¯å°†è‡ªå·±çš„ç†è§£æ€»ç»“å‡ºæ¥ï¼Œæ‰€ä»¥æœ‰äº›åœ°æ–¹ä¸ä¸€å®šæ­£ç¡®ï¼Œä¹Ÿæ¬¢è¿è¯»è€…éšæ—¶ç»™äºˆæ–§æ­£ï¼Œä¸€äº›è”ç³»æ–¹å¼ä¹Ÿå·²ç»æ”¾åœ¨ä¾§è¾¹æ ã€‚</p>
<h2 id="2-å¦‚ä½•æŸ¥æ‰¾éœ€è¦å†…å®¹"><a href="#2-å¦‚ä½•æŸ¥æ‰¾éœ€è¦å†…å®¹" class="headerlink" title="2.å¦‚ä½•æŸ¥æ‰¾éœ€è¦å†…å®¹"></a>2.å¦‚ä½•æŸ¥æ‰¾éœ€è¦å†…å®¹</h2><ul>
<li>å·¦ä¾§ç›®å½•æœ‰ç›¸å…³åˆ†ç±»tagï¼Œä»¥ä¾›æŸ¥æ‰¾</li>
<li>ä¹Ÿå¯ä»¥é€šè¿‡å·¦ä¾§æœç´¢åŠŸèƒ½æœç´¢æƒ³è¦çš„å†…å®¹</li>
<li>å·¦ä¾§æˆ‘çš„GitHubä»“åº“ä¸­ä¹Ÿä¸Šä¼ è¿‡ä¹‹å‰ä½¿ç”¨è¿‡çš„ä¸€äº›ä¾‹ç¨‹æ¨¡æ¿</li>
</ul>
<h2 id="3-æ³¨æ„äº‹é¡¹"><a href="#3-æ³¨æ„äº‹é¡¹" class="headerlink" title="3.æ³¨æ„äº‹é¡¹"></a>3.æ³¨æ„äº‹é¡¹</h2><ul>
<li><u>å¦‚æœä½ æ›¾ç»æ‰“å¼€è¿‡æ­¤åšå®¢ç½‘ç«™ï¼Œ<strong>è¯·åŠ¡å¿…åœ¨é˜…è¯»ç›¸å…³åšå®¢ä¹‹å‰å…ˆCtrl+F5</strong>å¼ºåˆ¶æ¸…ç†ä¹‹å‰çš„ç¼“å­˜ï¼Œä¸ç„¶ä½ å¯èƒ½ä¼šçœ‹ä¸åˆ°æœ€æ–°æ›´æ–°çš„å†…å®¹ï¼ï¼ï¼</u><em>ï¼ˆæ„Ÿè§‰æ˜¯giteeçš„é—®é¢˜ï¼Œä¹‹å‰éƒ¨ç½²åˆ°GitHubæ—¶å¹¶æœªé‡è§æ­¤é—®é¢˜ï¼‰</em></li>
<li>å¦‚æœæƒ³å®šä½åˆ°æƒ³æŸ¥æ‰¾çš„å†…å®¹çš„å…·ä½“ä½ç½®ï¼Œå»ºè®®å…ˆç”¨åšå®¢çš„æœç´¢åŠŸèƒ½å®šä½åˆ°æ–‡ç« ï¼Œå†é€šè¿‡ctrl Fæœç´¢å…³é”®å­—å³å¯ã€‚</li>
</ul>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®è°ƒWhisper</title>
    <url>/2026/01/05/whisper/</url>
    <content><![CDATA[<p>æœ¬æ–‡çš„æ¨¡å‹å¾®è°ƒåŸºäºhugging faceç”Ÿæ€ï¼Œä½†æœªä½¿ç”¨Trainer APIï¼Œä»¥transcribeä»»åŠ¡ä¸ºä¾‹</p>
<h1 id="æ•°æ®é›†å‡†å¤‡"><a href="#æ•°æ®é›†å‡†å¤‡" class="headerlink" title="æ•°æ®é›†å‡†å¤‡"></a>æ•°æ®é›†å‡†å¤‡</h1><p>æœ¬æ–‡ä½¿ç”¨hugging faceä¸Šçš„ä¸€ä¸ªé˜¿å°”å·´å°¼äºšè¯­æ•°æ®é›†<a href="https://huggingface.co/datasets/Kushtrim/common_voice_18_sq">Kushtrim/common_voice_18_sq Â· Datasets at Hugging Face</a>ï¼Œæˆ‘æ˜¯ç›´æ¥åœ¨ç½‘ç«™ä¸Šé¢„å…ˆä¸‹è½½çš„parquetæ ¼å¼æ•°æ®é›†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä¸‹è½½</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datasets <span class="keyword">import</span> load_dataset, Audio</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> WhisperProcessor,WhisperForConditionalGeneration</span><br><span class="line"><span class="keyword">from</span> transformers.models.whisper.tokenization_whisper <span class="keyword">import</span> TO_LANGUAGE_CODE  <span class="comment">#å¯æŸ¥çœ‹whisperæ”¯æŒè¯­è¨€</span></span><br><span class="line"><span class="keyword">import</span> soundfile <span class="keyword">as</span> sf</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Any</span>, <span class="type">Dict</span>, <span class="type">List</span>, <span class="type">Union</span></span><br><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> AdamW</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> get_scheduler</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">processor = WhisperProcessor.from_pretrained(</span><br><span class="line">    <span class="string">&quot;openai/whisper-small&quot;</span>, language=<span class="string">&quot;albanian&quot;</span>, task=<span class="string">&quot;transcribe&quot;</span>)</span><br><span class="line"></span><br><span class="line">alb_dataset = load_dataset(<span class="string">&quot;parquet&quot;</span>, data_files=&#123;<span class="string">&#x27;train&#x27;</span>: <span class="string">&#x27;train.parquet&#x27;</span>, <span class="string">&#x27;test&#x27;</span>: <span class="string">&#x27;test.parquet&#x27;</span>&#125;)</span><br><span class="line">alb_dataset = alb_dataset.cast_column(<span class="string">&quot;audio&quot;</span>, Audio(decode=<span class="literal">False</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">prepare_dataset</span>(<span class="params">example</span>):</span><br><span class="line">    audio_bytes = example[<span class="string">&quot;audio&quot;</span>][<span class="string">&#x27;bytes&#x27;</span>]</span><br><span class="line">    audio, samplerate = sf.read(io.BytesIO(audio_bytes))</span><br><span class="line"></span><br><span class="line">    example = processor(audio=audio,</span><br><span class="line">                        sampling_rate=<span class="number">16000</span>,</span><br><span class="line">                        text=example[<span class="string">&quot;sentence&quot;</span>])</span><br><span class="line">    example[<span class="string">&quot;input_length&quot;</span>] = <span class="built_in">len</span>(audio) / samplerate</span><br><span class="line">    <span class="keyword">return</span> example</span><br><span class="line"><span class="comment">#æ­¤å¤„alb_dataset.column_names[&quot;train&quot;]æ˜¯è¿”å›çš„æ‰€æœ‰columnçš„åå­—ï¼ŒæŒ‡åˆ å»åŸdatasetdictæ‰€æœ‰åŒååˆ—ï¼Œä¸æ˜¯æŒ‡åˆ å»åŸè®­ç»ƒé›†</span></span><br><span class="line">dataset = alb_dataset.<span class="built_in">map</span>(prepare_dataset,remove_columns=alb_dataset.column_names[<span class="string">&quot;train&quot;</span>],</span><br><span class="line">                            num_proc=<span class="number">1</span>,</span><br><span class="line">                            batch_size=<span class="number">100</span>)</span><br><span class="line"><span class="comment"># sample = dataset[&quot;train&quot;][1] #featureå½¢çŠ¶:(1,80,3000)çš„list</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="processorè°ƒç”¨"><a href="#processorè°ƒç”¨" class="headerlink" title="processorè°ƒç”¨"></a>processorè°ƒç”¨</h2><p>æ­¤å¤„è°ƒç”¨äº†ä¸æ¨¡å‹é…å¥—çš„processorï¼Œè¿™æ˜¯ä¸€ä¸ªä¸Whisperé…å¥—çš„ç±»ä¼¼tokenizerçš„å·¥å…·ç®±å¯¹è±¡ï¼Œè´Ÿè´£ï¼š</p>
<ul>
<li>å°†éŸ³é¢‘é‡é‡‡æ ·ï¼Œè½¬ä¸ºmelé¢‘è°±ï¼Œå½’ä¸€åŒ–ï¼Œç»Ÿä¸€padè‡³30s</li>
<li>å°†æ–‡æœ¬è½¬ä¸ºIDï¼Œä¹Ÿå°±æ˜¯tokenizerçš„ä»»åŠ¡</li>
</ul>
<h2 id="ç¦ç”¨torchcodecï¼Œä½¿ç”¨bytesè¯»å–"><a href="#ç¦ç”¨torchcodecï¼Œä½¿ç”¨bytesè¯»å–" class="headerlink" title="ç¦ç”¨torchcodecï¼Œä½¿ç”¨bytesè¯»å–"></a>ç¦ç”¨torchcodecï¼Œä½¿ç”¨bytesè¯»å–</h2><p>ç”±äºæˆ‘ç›´æ¥è¯»å–å•ä¸ªæ•°æ®æ—¶ä¼šå‡ºç°torchcodecåº“çš„è§£ç æŠ¥é”™ï¼Œç”±äºæˆ‘çš„torchç‰ˆæœ¬è¾ƒä½ï¼Œå› æ­¤æ— æ³•ä¿®å¤è¯¥æŠ¥é”™ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„è§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li><p><code>alb_dataset.cast_column(&quot;audio&quot;, Audio(decode=False))</code>ç¦ç”¨torchcodecè§£ç </p>
</li>
<li><p>å¯¹äºå¯ä»¥æ­£å¸¸è§£ç çš„æƒ…å†µï¼Œå£°éŸ³æ³¢å½¢çš„è§£ç æ•°æ®å¯ä»¥ç›´æ¥ä¼ å…¥processorï¼Œè€Œæ­¤å¤„ï¼Œé€šè¿‡è¯»å–å£°éŸ³çš„åŸå§‹byteså¤åŸå£°éŸ³çš„è§£ç æ•°æ®ï¼ˆå¯¹äºæŠ±æŠ±è„¸çš„datasetç»Ÿä¸€æ•°æ®æ ¼å¼å¯æŸ¥çœ‹<a href="https://dhkkkkkk.github.io/2025/11/21/LLM/">LLMå­¦ä¹  | å°è‘£çš„BLOG</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">audio_bytes = example[<span class="string">&quot;audio&quot;</span>][<span class="string">&#x27;bytes&#x27;</span>]</span><br><span class="line">audio, samplerate = sf.read(io.BytesIO(audio_bytes))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å¦‚æœè¿™é‡Œå¯¹sampleè¿›è¡Œdebugï¼Œåˆ™å¯ä»¥è§‚å¯Ÿåˆ°å…¶æ•°æ®æ ¼å¼ï¼š</p>
<img src="/images/loading.png" data-original="/2026/01/05/whisper/1.png" class title="This is an image"> 
<p>ä¸ºä¸€ä¸ª3keyå­—å…¸ï¼Œå…¶ä¸­featureä¸ºlist1çš„åŸå› æ˜¯å…¶è¢«å°è£…ä¸ºäº†(1,80,3000)å½¢çŠ¶ï¼Œ80æ˜¯melæ»¤æ³¢å™¨æ•°é‡ï¼Œ3000æ˜¯é•¿åº¦</p>
<h2 id="æ•°æ®å¤„ç†ä¸dataloaderåŠ è½½"><a href="#æ•°æ®å¤„ç†ä¸dataloaderåŠ è½½" class="headerlink" title="æ•°æ®å¤„ç†ä¸dataloaderåŠ è½½"></a>æ•°æ®å¤„ç†ä¸dataloaderåŠ è½½</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27; </span></span><br><span class="line"><span class="string">@dataclassç­‰åŒäº</span></span><br><span class="line"><span class="string">def __init__(self, processor):</span></span><br><span class="line"><span class="string">self.processor = processor</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DataCollatorSpeechSeq2SeqWithPadding</span>:</span><br><span class="line">    processor: <span class="type">Any</span>  <span class="comment">#ä¸å¼ºåˆ¶çº¦æŸç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#ä»¤å¯¹è±¡å¯åƒå‡½æ•°ä¸€æ ·ç›´æ¥è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params"></span></span><br><span class="line"><span class="params">            self, features: <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Union</span>[<span class="type">List</span>[<span class="built_in">int</span>], torch.Tensor]]] <span class="comment">#è¾“å…¥ä¸ºä¸€ä¸ªlistï¼Œå†…å®¹ä¸ºä¸€ä¸ªå­—å…¸ï¼Œé”®ä¸ºstrï¼Œå€¼ä¸ºlistæˆ–tensorä¹‹ä¸€</span></span></span><br><span class="line"><span class="params">    </span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, torch.Tensor]: <span class="comment">#è¿”å›å€¼ä¸ºä¸€ä¸ªå­—å…¸ï¼Œç±»ä¼¼Cè¯­è¨€çš„å‡½æ•°å®šä¹‰</span></span><br><span class="line"></span><br><span class="line">        input_features = [</span><br><span class="line">            &#123;<span class="string">&quot;input_features&quot;</span>: feature[<span class="string">&quot;input_features&quot;</span>][<span class="number">0</span>]&#125; <span class="keyword">for</span> feature <span class="keyword">in</span> features <span class="comment">#feature[&quot;input_features&quot;]å½¢çŠ¶ä¸º(1,80,3000),å› æ­¤è¦å–[0]</span></span><br><span class="line">        ]</span><br><span class="line">        batch = self.processor.feature_extractor.pad(input_features, return_tensors=<span class="string">&quot;pt&quot;</span>) <span class="comment">#processorå·²ç»å¡«å……è¿‡ï¼Œæ­¤å¤„ä»…ä¸ºè½¬tensor</span></span><br><span class="line">        <span class="comment">#feature_extractor.padæ¥å£åè®®æ˜¯List[&#123;&quot;input_features&quot;: (feature_dim, time)&#125;]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#labelåŒç†ï¼Œä½†æ˜¯labelæ˜¯æ²¡æœ‰æå‰å¡«å……çš„</span></span><br><span class="line">        label_features = [&#123;<span class="string">&quot;input_ids&quot;</span>: feature[<span class="string">&quot;labels&quot;</span>]&#125; <span class="keyword">for</span> feature <span class="keyword">in</span> features]</span><br><span class="line">        labels_batch = self.processor.tokenizer.pad(label_features, return_tensors=<span class="string">&quot;pt&quot;</span>)</span><br><span class="line">        <span class="comment">#è¿”å›&#123;&quot;input_ids&quot;: Tensor(batch, max_len),&quot;attention_mask&quot;: Tensor(batch, max_len)&#125;</span></span><br><span class="line">        labels = labels_batch[<span class="string">&quot;input_ids&quot;</span>].masked_fill(</span><br><span class="line">            labels_batch.attention_mask.ne(<span class="number">1</span>), -<span class="number">100</span>     <span class="comment">#pytorch äº¤å‰ç†µé»˜è®¤-100ä¸å‚ä¸lossè®¡ç®—</span></span><br><span class="line">        )<span class="comment">#ç”¨-100ä»£æ›¿å¡«å……è¯å…ƒï¼Œlabels_batch.attention_mask.ne(1)å¯ä»¥æ ¹æ®attention_maskç”Ÿæˆä¸€ä¸ªbool maskï¼Œpad tokenä¸ºTrue</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœåœ¨ä¹‹å‰åˆ†è¯æ—¶æ·»åŠ äº† bos è¯å…ƒï¼Œé‚£å°±å‰ªåˆ‡æ‰ï¼Œå› ä¸ºä¹‹åè¿˜ä¼šåŠ ä¸Šçš„</span></span><br><span class="line">        <span class="keyword">if</span> (labels[:, <span class="number">0</span>] == self.processor.tokenizer.bos_token_id).<span class="built_in">all</span>().cpu().item():</span><br><span class="line">            labels = labels[:, <span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line">        batch[<span class="string">&quot;labels&quot;</span>] = labels</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> batch</span><br><span class="line"></span><br><span class="line">data_collator = DataCollatorSpeechSeq2SeqWithPadding(processor=processor)</span><br><span class="line"><span class="comment"># å®šä¹‰ DataLoader</span></span><br><span class="line">train_dataloader = DataLoader(</span><br><span class="line">    dataset[<span class="string">&quot;train&quot;</span>],</span><br><span class="line">    batch_size=<span class="number">2</span>,</span><br><span class="line">    shuffle=<span class="literal">True</span>,</span><br><span class="line">    collate_fn=data_collator</span><br><span class="line">)</span><br><span class="line">eval_dataloader = DataLoader(</span><br><span class="line">    dataset[<span class="string">&quot;test&quot;</span>],</span><br><span class="line">    batch_size=<span class="number">2</span>,</span><br><span class="line">    collate_fn=data_collator</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><code>DataCollatorSpeechSeq2SeqWithPadding</code>åœ¨è¿™é‡Œçš„ä¸»è¦ä½œç”¨æ˜¯</p>
<ul>
<li>å°†ç‰¹å¾è½¬ä¸ºtensor</li>
<li>å¡«å……labelï¼ˆtoken IDï¼‰ï¼Œå¹¶è½¬ä¸ºtensor</li>
<li>å°†padding tokenè½¬åŒ–ä¸º-100</li>
</ul>
<p>å…¶ä»–éœ€è¦æ³¨æ„çš„å°±æ˜¯<code>@dataclass</code>ã€<code>__call__</code>å’Œåˆ—è¡¨æ¨å¯¼å¼çš„è¯­æ³•æŠ€å·§ï¼Œéƒ½å·²ç”¨æ³¨é‡Šæ ‡å‡ºã€‚æœ€åï¼Œç”±äºåç»­è®­ç»ƒè°ƒç”¨Seq2SeqTrainer APIæ—¶æ€»æ˜¯ä¼šå‡ºç°æ¢¯åº¦è®¡ç®—å›¾çš„é‡å¤è®¡ç®—æŠ¥é”™ï¼Œè€Œhugging faceå°è£…çš„å¯†ä¸é€é£çš„å¯¹è±¡æˆ‘å®åœ¨æ˜¯åšä¸åˆ°debugï¼Œå¹²è„†å°±ç´¢æ€§ç›´æ¥è°ƒç”¨DataLoaderï¼Œè‡ªå·±å†™è®­ç»ƒè¿‡ç¨‹äº†ã€‚</p>
<p><strong><u>DataLoaderå¤©ç„¶æ”¯æŒhugging faceé£æ ¼çš„datasetå’Œdata_collatorï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„ç›´æ¥ä½¿ç”¨</u></strong></p>
<h1 id="ç®€é™‹å¾®è°ƒä¸€ä¸‹"><a href="#ç®€é™‹å¾®è°ƒä¸€ä¸‹" class="headerlink" title="ç®€é™‹å¾®è°ƒä¸€ä¸‹"></a>ç®€é™‹å¾®è°ƒä¸€ä¸‹</h1><p>å› ä¸ºç›´æ¥è°ƒAPIæœ‰bugï¼Œå°±è‡ªå·±ç®€å•å®ç°äº†ä¸€ä¸‹è®­ç»ƒï¼Œä»¥ä¸‹ä»£ç åªå®ç°äº†åŸºæœ¬è®­ç»ƒåŠŸèƒ½ï¼Œäº²æµ‹å¯ä»¥è·‘é€š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">device = torch.device(<span class="string">&quot;cuda&quot;</span>)</span><br><span class="line">model = WhisperForConditionalGeneration.from_pretrained(<span class="string">&quot;openai/whisper-small&quot;</span>)</span><br><span class="line">model.to(device)</span><br><span class="line"></span><br><span class="line">optimizer = AdamW(model.parameters(), lr=<span class="number">5e-5</span>)</span><br><span class="line">num_epochs = <span class="number">3</span></span><br><span class="line">num_training_steps = num_epochs * <span class="built_in">len</span>(train_dataloader)</span><br><span class="line">lr_scheduler = get_scheduler(</span><br><span class="line">    <span class="string">&quot;linear&quot;</span>,</span><br><span class="line">    optimizer=optimizer,</span><br><span class="line">    num_warmup_steps=<span class="number">0</span>,</span><br><span class="line">    num_training_steps=num_training_steps</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    model.train()</span><br><span class="line">    train_loop = tqdm(<span class="built_in">enumerate</span>(train_dataloader), total=<span class="built_in">len</span>(train_dataloader),</span><br><span class="line">                 desc=<span class="string">f&#x27;Train_Epoch <span class="subst">&#123;epoch + <span class="number">1</span>&#125;</span>/<span class="subst">&#123;num_epochs&#125;</span>&#x27;</span>, unit=<span class="string">&#x27;batch&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> idx, batch <span class="keyword">in</span> train_loop:</span><br><span class="line">        batch = &#123;k: v.to(device) <span class="keyword">for</span> k, v <span class="keyword">in</span> batch.items()&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        outputs = model(**batch)</span><br><span class="line">        loss = outputs.loss</span><br><span class="line"></span><br><span class="line">        loss.backward()</span><br><span class="line"></span><br><span class="line">        optimizer.step()</span><br><span class="line">        lr_scheduler.step()</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        train_loop.set_postfix(&#123;<span class="string">&#x27;loss&#x27;</span>: <span class="string">&#x27;&#123;0:1.5f&#125;&#x27;</span>.<span class="built_in">format</span>(loss.item())&#125;)</span><br><span class="line"></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line">    total_loss = <span class="number">0</span></span><br><span class="line">    eval_loop = tqdm(<span class="built_in">enumerate</span>(eval_dataloader), total=<span class="built_in">len</span>(eval_dataloader),</span><br><span class="line">                 desc=<span class="string">f&#x27;Eval_Epoch <span class="subst">&#123;epoch + <span class="number">1</span>&#125;</span>/<span class="subst">&#123;num_epochs&#125;</span>&#x27;</span>, unit=<span class="string">&#x27;batch&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> idx, batch <span class="keyword">in</span> eval_loop:</span><br><span class="line">        batch = &#123;k: v.to(device) <span class="keyword">for</span> k, v <span class="keyword">in</span> batch.items()&#125;</span><br><span class="line">        <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">            outputs = model(**batch)</span><br><span class="line"></span><br><span class="line">        total_loss += outputs.loss.item()</span><br><span class="line"></span><br><span class="line">    avg_loss = total_loss / <span class="built_in">len</span>(eval_dataloader)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Evaluation Loss: <span class="subst">&#123;avg_loss&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è®­ç»ƒç›¸å…³ä»£ç å¥½åƒæ²¡å•¥å¥½è¯´çš„äº†ï¼Œéƒ½æ˜¯ä¸€äº›ç»å…¸æ“ä½œï¼Œå…¶ä¸­dataloaderè¿”å›çš„batchæ ¼å¼å¦‚ä¸‹ï¼Œå…¶æ˜¯ä¸€ä¸ªç±»ä¼¼å­—å…¸çš„ç»“æ„ï¼Œéœ€è¦æ³¨æ„æ•°æ®çš„è¯»å–æ–¹å¼</p>
<img src="/images/loading.png" data-original="/2026/01/05/whisper/2.png" class title="This is an image"> 
<h1 id="æ–‡æœ¬ä»»åŠ¡çš„è¯„ä¼°æŒ‡æ ‡"><a href="#æ–‡æœ¬ä»»åŠ¡çš„è¯„ä¼°æŒ‡æ ‡" class="headerlink" title="æ–‡æœ¬ä»»åŠ¡çš„è¯„ä¼°æŒ‡æ ‡"></a>æ–‡æœ¬ä»»åŠ¡çš„è¯„ä¼°æŒ‡æ ‡</h1><p><strong>WER</strong> çš„å…¨ç§°æ˜¯ <strong>Word Error Rate</strong>ï¼ˆè¯é”™è¯¯ç‡ï¼‰ã€‚å®ƒæ˜¯è¡¡é‡è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰æˆ–æœºå™¨ç¿»è¯‘ç³»ç»Ÿå‡†ç¡®æ€§æœ€æ ‡å‡†ã€æœ€é€šç”¨çš„æŒ‡æ ‡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers.models.whisper.english_normalizer <span class="keyword">import</span> BasicTextNormalizer</span><br><span class="line"></span><br><span class="line">normalizer = BasicTextNormalizer()<span class="comment">#æ–‡æœ¬æ ‡å‡†åŒ–ï¼Œé‡è¦</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_metrics</span>(<span class="params">pred</span>):</span><br><span class="line">    pred_ids = pred.predictions</span><br><span class="line">    label_ids = pred.label_ids</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”¨ pad_token_id æ›¿æ¢ -100</span></span><br><span class="line">    label_ids[label_ids == -<span class="number">100</span>] = processor.tokenizer.pad_token_id</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æˆ‘ä»¬å¸Œæœ›åœ¨è®¡ç®—æŒ‡æ ‡æ—¶ä¸è¦ç»„åˆèµ·è¯å…ƒï¼ˆè§£ç ç»“æœä¸ºè¯å…ƒ(subword)ï¼Œè€Œä¸æ˜¯å®Œæ•´å•è¯ï¼‰</span></span><br><span class="line">    pred_str = processor.batch_decode(pred_ids, skip_special_tokens=<span class="literal">True</span>)</span><br><span class="line">    label_str = processor.batch_decode(label_ids, skip_special_tokens=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æ™®é€šçš„ WER</span></span><br><span class="line">    wer_ortho = <span class="number">100</span> * metric.compute(predictions=pred_str, references=label_str)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æ ‡å‡†åŒ–çš„ WER</span></span><br><span class="line">    pred_str_norm = [normalizer(pred) <span class="keyword">for</span> pred <span class="keyword">in</span> pred_str]</span><br><span class="line">    label_str_norm = [normalizer(label) <span class="keyword">for</span> label <span class="keyword">in</span> label_str]</span><br><span class="line">    <span class="comment"># è¿‡æ»¤ï¼Œä»è€Œåœ¨è¯„ä¼°æ—¶åªè®¡ç®— reference éç©ºçš„æ ·æœ¬</span></span><br><span class="line">    pred_str_norm = [</span><br><span class="line">        pred_str_norm[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(pred_str_norm)) <span class="keyword">if</span> <span class="built_in">len</span>(label_str_norm[i]) &gt; <span class="number">0</span></span><br><span class="line">    ]</span><br><span class="line">    label_str_norm = [</span><br><span class="line">        label_str_norm[i]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(label_str_norm))</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(label_str_norm[i]) &gt; <span class="number">0</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    wer = <span class="number">100</span> * metric.compute(predictions=pred_str_norm, references=label_str_norm)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;wer_ortho&quot;</span>: wer_ortho, <span class="string">&quot;wer&quot;</span>: wer&#125;</span><br></pre></td></tr></table></figure>
<p><code>BasicTextNormalizer</code> æ˜¯ Whisper å®˜æ–¹æä¾›çš„ä¸€ä¸ªæ–‡æœ¬â€œæ¸…æ´—â€å·¥å…·ã€‚</p>
<ul>
<li><strong>ä¸ºä»€ä¹ˆè¦æ ‡å‡†åŒ–ï¼Ÿ</strong> åœ¨é˜¿å°”å·´å°¼äºšè¯­æˆ–è‹±è¯­ä¸­ï¼ŒåŒä¸€ä¸ªæ„æ€å¯èƒ½æœ‰ä¸åŒå†™æ³•ï¼ˆæ¯”å¦‚å¤§å°å†™ã€å¤šä½™ç©ºæ ¼ã€æ ‡ç‚¹ç¬¦å·ï¼‰ã€‚</li>
<li><strong>å®ƒåšäº†ä»€ä¹ˆï¼Ÿ</strong><ul>
<li>å°†æ–‡æœ¬å…¨éƒ¨è½¬ä¸º<strong>å°å†™</strong>ã€‚</li>
<li>ç§»é™¤æ‰€æœ‰çš„<strong>æ ‡ç‚¹ç¬¦å·</strong>ã€‚</li>
<li>ç§»é™¤<strong>å¤šä½™çš„ç©ºæ ¼</strong>ï¼ˆè¿ç»­ç©ºæ ¼åˆå¹¶ä¸ºä¸€ä¸ªï¼‰ã€‚</li>
<li>ç§»é™¤ Unicode æ ‡è®°ã€‚</li>
</ul>
</li>
<li><strong>ç»“æœ</strong>ï¼šå®ƒè®©æ¨¡å‹åªå…³æ³¨â€œè¯æ˜¯å¦é€‰å¯¹äº†â€ï¼Œè€Œä¸å…³æ³¨â€œæ ‡ç‚¹ç¬¦å·æ˜¯å¦ç‚¹å¯¹äº†â€ï¼Œè¿™èƒ½æä¾›ä¸€ä¸ªæ›´å®¢è§‚çš„è¯­è¨€ç†è§£æŒ‡æ ‡ã€‚</li>
</ul>
<h2 id="WERåŸç†"><a href="#WERåŸç†" class="headerlink" title="WERåŸç†"></a>WERåŸç†</h2><p>WER çš„è®¡ç®—åŸºäº<strong>ç¼–è¾‘è·ç¦»</strong>çš„æ¦‚å¿µã€‚æƒ³è±¡ä½ æœ‰ä¸€è¡Œ<u>æ¨¡å‹è¾“å‡º</u>çš„æ–‡å­—ï¼ˆHypothesisï¼‰ï¼Œé€šè¿‡ä»¥ä¸‹ä¸‰ç§æ“ä½œå°†å…¶<u>ä¿®æ”¹ä¸ºå‚è€ƒæ–‡æœ¬</u>ï¼ˆReferenceï¼‰ï¼š</p>
<ol>
<li><strong>æ›¿æ¢ (Substitution, S)</strong>ï¼šæŠŠé”™è¯¯çš„è¯æ¢æˆæ­£ç¡®çš„è¯ã€‚</li>
<li><strong>æ’å…¥ (Insertion, I)</strong>ï¼šåœ¨æ¼æ‰çš„åœ°æ–¹è¡¥ä¸Šç¼ºå¤±çš„è¯ã€‚</li>
<li><strong>åˆ é™¤ (Deletion, D)</strong>ï¼šåˆ æ‰æ¨¡å‹å¤šå‡ºçš„å†—ä½™è¯ã€‚</li>
</ol>
<h3 id="2-è®¡ç®—å…¬å¼"><a href="#2-è®¡ç®—å…¬å¼" class="headerlink" title="2. è®¡ç®—å…¬å¼"></a>2. è®¡ç®—å…¬å¼</h3><p>WER çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
WER = \frac{S + D + I}{N}</script><p>å…¶ä¸­ï¼š</p>
<ul>
<li><strong>S</strong>ï¼šæ›¿æ¢çš„æ¬¡æ•°</li>
<li><strong>D</strong>ï¼šåˆ é™¤çš„æ¬¡æ•°</li>
<li><strong>I</strong>ï¼šæ’å…¥çš„æ¬¡æ•°</li>
<li><strong>N</strong>ï¼šå‚è€ƒæ–‡æœ¬ï¼ˆæ ‡å‡†ç­”æ¡ˆï¼‰çš„æ€»è¯æ•°</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> WER çš„<strong>å€¼è¶Šä½è¶Šå¥½ï¼ˆ0 è¡¨ç¤ºå®Œç¾åŒ¹é…ï¼‰ã€‚</strong>ç”±äºå­˜åœ¨â€œæ’å…¥â€æ“ä½œï¼ŒWER çš„å€¼<strong>æœ‰å¯èƒ½è¶…è¿‡ 100%</strong>ã€‚</p>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>LLMå­¦ä¹ </title>
    <url>/2025/11/21/LLM/</url>
    <content><![CDATA[<p>æœ¬ç« æ˜¯åœ¨æœ‰ä¸€å®šæ·±åº¦å­¦ä¹ åŸºç¡€ï¼Œç†Ÿæ‚‰attentionå’Œtransformerç»“æ„çš„åŸºç¡€ä¸Šå†™çš„</p>
<h1 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h1><h2 id="é€šç”¨æ¶æ„"><a href="#é€šç”¨æ¶æ„" class="headerlink" title="é€šç”¨æ¶æ„"></a>é€šç”¨æ¶æ„</h2><ul>
<li><p>encoderç”¨äºæ¥æ”¶æºè¾“å…¥å¹¶æå–ç‰¹å¾ï¼ˆä¾‹å¦‚ç¿»è¯‘ä»»åŠ¡ä¸­çš„å¾…ç¿»è¯‘åŸæ–‡ï¼‰</p>
</li>
<li><p>decoderé€šè¿‡encoderè¾“å‡ºçš„ç‰¹å¾å’Œä¹‹å‰çš„è¾“å‡ºå†…å®¹ï¼Œç”Ÿæˆä¸‹ä¸€ä¸ªè¾“å‡º</p>
<p>ä¾‹å¦‚ï¼Œå½“è¦å°†â€I love youâ€ç¿»è¯‘ä¸ºä¸­æ–‡æ—¶ï¼Œencoderæ¥æ”¶çš„ä¾¿æ˜¯â€I love youâ€å…¨æ–‡ï¼Œdecoderåˆ™æ˜¯æŒ‰é¡ºåºä¾æ¬¡ç”Ÿæˆâ€œæˆ‘â€ï¼Œâ€œçˆ±â€ï¼Œâ€œä½ â€ï¼Œè€Œå½“ç”Ÿæˆâ€œçˆ±â€æ—¶ï¼Œdecoderä¼šå°†â€æˆ‘â€ä¸å¯¹â€I love youâ€œçš„ç‰¹å¾è¿›è¡Œattentionè®¡ç®—ï¼Œåœ¨è®­ç»ƒä¼˜å¼‚çš„æƒ…å†µä¸‹ï¼Œâ€loveâ€œè¿™ä¸ªè°“è¯­ä¼šè¢«é‡ç‚¹å…³æ³¨ï¼ˆè¢«è®¤ä¸ºæ˜¯ä¸‹ä¸€ä¸ªè¢«ç¿»è¯‘çš„å¯¹è±¡ï¼‰ï¼Œdecoderä¼šç”Ÿæˆä¸€ä¸ªåŸºäºâ€Iâ€œå’Œâ€youâ€œçš„â€loveâ€œæ·±å±‚è¯­ä¹‰è¡¨è¾¾ï¼Œåœ¨decoderçš„æœ€åï¼Œè¯¥è¯­ä¹‰è¡¨è¾¾ä¼šä¸ä¸­æ–‡â€çˆ±â€œçš„åŒ¹é…åº¦æœ€é«˜</p>
</li>
</ul>
<h2 id="attentionçš„æŠ½è±¡ç†è§£"><a href="#attentionçš„æŠ½è±¡ç†è§£" class="headerlink" title="attentionçš„æŠ½è±¡ç†è§£"></a>attentionçš„æŠ½è±¡ç†è§£</h2><p>è¿˜æ˜¯ä»¥â€I love youâ€œåˆ°â€æˆ‘çˆ±ä½ â€œçš„ç¿»è¯‘ä»»åŠ¡ä¸¾ä¾‹ï¼š</p>
<ul>
<li>encoderçš„è‡ªæ³¨æ„åŠ›ï¼šåœ¨æ¨¡å‹é€å­—ç¿»è¯‘ä¸­æ–‡çš„è¿‡ç¨‹ä¸­ï¼Œencoderåªè®¡ç®—ä¸€æ¬¡ã€‚encoderä¸»è¦æ˜¯ä¸ºäº†å¾—åˆ°è‹±æ–‡ä¸­â€œI love youâ€çš„è¯­ä¹‰å…³ç³»ï¼Œä¾‹å¦‚ä¸»è°“å®¾ç»“æ„ï¼Œæˆ–è€…â€œè¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾æƒ…æ„Ÿçš„è¯­å¥â€œç­‰</li>
<li>decoderçš„è‡ªæ³¨æ„åŠ›ï¼šå½“å·²å®Œæˆâ€æˆ‘â€œçš„ç¿»è¯‘æ—¶ï¼Œç°åœ¨decoderçš„è¾“å…¥åˆ™æ˜¯â€æˆ‘â€œï¼Œåœ¨è‡ªæ³¨æ„åŠ›è®¡ç®—ä¸­ï¼Œdecoderåˆ™ä¼šç”Ÿæˆä¸­æ–‡â€æˆ‘â€œçš„è¯­ä¹‰</li>
<li>decoderçš„äº¤å‰æ³¨æ„åŠ›ï¼šç”±äºâ€æˆ‘â€œè¿™ä¸ªä¸­æ–‡è¯­ä¹‰ä¸­ç¼ºå¤±è°“è¯­ï¼Œå› æ­¤<u>åœ¨Qä¸Kçš„è®¡ç®—ä¸­</u>ï¼Œâ€loveâ€œè¿™ä¸ªè¡¨ç¤ºè°“è¯­çš„è¯è¯­ä¼šå¾—åˆ°æ›´é«˜çš„å…³æ³¨åº¦ï¼ˆåªæ˜¯ä¸¾ä¾‹ï¼Œå®é™…ä¸Šä¸åªæœ‰è¿™ä¸€ä¸ªåŸå› ï¼Œä½†å…·ä½“è®­ç»ƒè¿‡ç¨‹å…¶å®æˆ‘ä»¬äººç±»æ˜¯éš¾ä»¥ç†è§£çš„ï¼‰ï¼›å°†å…³æ³¨åº¦è¿›è¡Œsoftmaxå<u>ä¸Vç›¸ä¹˜</u>ï¼Œæœ€ç»ˆä¼šè¾“å‡ºä¸€ä¸ª<strong>ä¸â€loveâ€å¼ºç›¸å…³çš„â€I love youâ€çš„æ·±å±‚è¯­ä¹‰è¡¨è¾¾</strong>ï¼ˆå¯ä»¥ç†è§£ä¸ºï¼šdecoderå½“å‰éœ€è¦ç¿»è¯‘â€œloveâ€ï¼Œå¹¶ä¸”è€ƒè™‘äº†â€œIâ€å’Œâ€œyouâ€åœ¨å…¨æ–‡ä¸­çš„å«ä¹‰ï¼‰ã€‚</li>
<li>decoderå°¾éƒ¨ï¼šçº¿æ€§å±‚å’Œsoftmaxæœ€åä¼šåŸºäºä¹‹å‰çš„è¯­ä¹‰è¡¨è¾¾ï¼Œè¾“å‡ºä¸€ä¸ªä¸ä¸­æ–‡â€œçˆ±â€ç›¸ä¼¼åº¦æœ€é«˜çš„embedding</li>
</ul>
<h2 id="è¯­è¨€æ¨¡å‹ç±»å‹"><a href="#è¯­è¨€æ¨¡å‹ç±»å‹" class="headerlink" title="è¯­è¨€æ¨¡å‹ç±»å‹"></a>è¯­è¨€æ¨¡å‹ç±»å‹</h2><p>è¯­è¨€æ¨¡å‹é€šå¸¸åˆ†ä¸ºä¸‰ç§æ¶æ„ç±»åˆ«ï¼š</p>
<ul>
<li><strong>ä»…ç¼–ç å™¨æ¨¡å‹</strong>ï¼ˆå¦‚ BERTï¼‰ï¼šè¿™äº›æ¨¡å‹ä½¿ç”¨åŒå‘æ–¹æ³•æ¥ç†è§£æ¥è‡ªä¸¤ä¸ªæ–¹å‘çš„ä¸Šä¸‹æ–‡ã€‚å®ƒä»¬æœ€é€‚åˆéœ€è¦æ·±å…¥ç†è§£æ–‡æœ¬çš„ä»»åŠ¡ï¼Œå¦‚<strong>åˆ†ç±»ã€å‘½åå®ä½“è¯†åˆ«å’Œé—®ç­”</strong>ã€‚</li>
<li><strong>ä»…è§£ç å™¨æ¨¡å‹</strong>ï¼ˆå¦‚ GPTã€Llamaï¼‰ï¼šè¿™äº›æ¨¡å‹ä»å·¦åˆ°å³å¤„ç†æ–‡æœ¬ï¼Œç‰¹åˆ«æ“…é•¿<strong>æ–‡æœ¬ç”Ÿæˆ</strong>ä»»åŠ¡ã€‚å®ƒä»¬å¯ä»¥æ ¹æ®æç¤ºå®Œæˆå¥å­ã€å†™æ–‡ç« ï¼Œç”šè‡³ç”Ÿæˆä»£ç ã€‚</li>
<li><strong>ç¼–ç å™¨-è§£ç å™¨æ¨¡å‹</strong>ï¼ˆå¦‚ T5ã€BARTï¼‰ï¼šè¿™äº›æ¨¡å‹ç»“åˆäº†ä¸¤ç§æ–¹æ³•ï¼Œä½¿ç”¨ç¼–ç å™¨ç†è§£è¾“å…¥ï¼Œä½¿ç”¨è§£ç å™¨ç”Ÿæˆè¾“å‡ºã€‚å®ƒä»¬åœ¨åºåˆ—åˆ°åºåˆ—ä»»åŠ¡ä¸­è¡¨ç°å‡ºè‰²ï¼Œå¦‚<strong>ç¿»è¯‘ã€æ‘˜è¦å’Œé—®ç­”</strong>ã€‚</li>
</ul>
<p>è€Œè¿™äº›æ¨¡å‹é€šå¸¸æœ‰ä¸¤ç§è®­ç»ƒæ–¹æ³•ï¼š</p>
<ol>
<li><strong>æ©ç è¯­è¨€å»ºæ¨¡ï¼ˆMLMï¼‰</strong>ï¼šç”±åƒ BERT è¿™æ ·çš„ç¼–ç å™¨æ¨¡å‹ä½¿ç”¨ï¼Œè¿™ç§æ–¹æ³•éšæœºæ©ç›–è¾“å…¥ä¸­çš„ä¸€äº›è¯å…ƒï¼Œå¹¶è®­ç»ƒæ¨¡å‹æ ¹æ®å‘¨å›´çš„ä¸Šä¸‹æ–‡é¢„æµ‹åŸå§‹è¯å…ƒã€‚è¿™ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ åŒå‘ä¸Šä¸‹æ–‡ï¼ˆåŒæ—¶å…³æ³¨è¢«æ©ç›–è¯è¯­ä¹‹å‰å’Œä¹‹åçš„è¯è¯­ï¼‰ã€‚</li>
<li><strong>å› æœè¯­è¨€å»ºæ¨¡ï¼ˆCLMï¼‰</strong>ï¼šç”±åƒ GPT è¿™æ ·çš„è§£ç å™¨æ¨¡å‹ä½¿ç”¨ï¼Œè¿™ç§æ–¹æ³•æ ¹æ®åºåˆ—ä¸­æ‰€æœ‰ä¹‹å‰çš„è¯å…ƒæ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¯å…ƒã€‚æ¨¡å‹åªèƒ½ä½¿ç”¨å·¦ä¾§ï¼ˆä¹‹å‰çš„è¯å…ƒï¼‰çš„ä¸Šä¸‹æ–‡æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¯å…ƒã€‚</li>
</ol>
<h2 id="éŸ³é¢‘Transformer"><a href="#éŸ³é¢‘Transformer" class="headerlink" title="éŸ³é¢‘Transformer"></a>éŸ³é¢‘Transformer</h2><h3 id="æ¨¡å‹è¾“å…¥æ ¼å¼"><a href="#æ¨¡å‹è¾“å…¥æ ¼å¼" class="headerlink" title="æ¨¡å‹è¾“å…¥æ ¼å¼"></a>æ¨¡å‹è¾“å…¥æ ¼å¼</h3><ul>
<li>æ–‡æœ¬è¾“å…¥ï¼šé€šå¸¸å‡ºç°åœ¨æ–‡æœ¬åˆ°è¯­éŸ³çš„ä»»åŠ¡ä¸­ï¼ˆTTSï¼‰ï¼Œä¸åŸå§‹Transformeræˆ–ä»»ä½•å…¶ä»–NLPæ¨¡å‹çš„å·¥ä½œæ–¹å¼ç›¸åŒï¼š<strong>é¦–å…ˆå¯¹æ–‡æœ¬è¿›è¡Œæ ‡è®°åŒ–</strong>ï¼ˆtokenizationï¼‰ï¼Œå¾—åˆ°ä¸€ç³»åˆ—æ–‡æœ¬æ ‡è®°ã€‚ç„¶åå°†æ­¤åºåˆ—<strong>é€šè¿‡è¾“å…¥åµŒå…¥å±‚</strong>ï¼Œå°†æ ‡è®°è½¬æ¢ä¸º512ç»´å‘é‡ã€‚ç„¶åå°†è¿™äº›åµŒå…¥å‘é‡ä¼ é€’åˆ°Transformerç¼–ç å™¨ä¸­ã€‚</li>
<li>æ³¢å½¢è¾“å…¥ï¼š<strong>Wav2Vec2</strong>å’Œ<strong>HuBERT</strong>ä¸€ç±»çš„æ¨¡å‹ç›´æ¥ä½¿ç”¨éŸ³é¢‘æ³¢å½¢ä½œä¸ºæ¨¡å‹çš„è¾“å…¥ã€‚æˆ‘ä»¬é¦–å…ˆå°†åŸå§‹æ³¢å½¢<strong>æ ‡å‡†åŒ–ä¸ºé›¶å‡å€¼å’Œå•ä½æ–¹å·®çš„åºåˆ—</strong>ï¼Œè¿™æœ‰åŠ©äºæ ‡å‡†åŒ–ä¸åŒéŸ³é‡ï¼ˆæŒ¯å¹…ï¼‰çš„éŸ³é¢‘æ ·æœ¬ã€‚å¯¹äºè¿™ç±»æ¨¡å‹ï¼Œencoderå‰ä¸€èˆ¬ä¼šç”¨ä¸€ä¸ªå°å‹CNNè¿›è¡Œä¸‹é‡‡æ ·å’Œæå–å±€éƒ¨ç‰¹å¾ï¼Œå‡å°‘åºåˆ—é•¿åº¦</li>
<li>æ—¶é¢‘è°±è¾“å…¥ï¼šè€æœ‹å‹äº†ï¼Œé€šè¿‡æ—¶é¢‘åŸŸè½¬åŒ–å¯ä»¥å¤§å¹…ç¼©å‡æ ·æœ¬å°ºå¯¸ã€‚è¯¥ç±»æ¨¡å‹é€šå¸¸ä¹Ÿä¼šä½¿ç”¨ä¸€ä¸ªå°å‹CNNæå–å±€éƒ¨ç‰¹å¾å’Œä¿®æ”¹å°ºå¯¸</li>
</ul>
<h3 id="æ¨¡å‹è¾“å‡ºæ ¼å¼"><a href="#æ¨¡å‹è¾“å‡ºæ ¼å¼" class="headerlink" title="æ¨¡å‹è¾“å‡ºæ ¼å¼"></a>æ¨¡å‹è¾“å‡ºæ ¼å¼</h3><ul>
<li>æ–‡æœ¬è¾“å‡ºï¼šå’Œè¯­è¨€æ¨¡å‹ç›¸åŒï¼Œå°†decoderè¾“å‡ºçš„è¾“å‡ºåµŒå…¥å‘é‡é€šè¿‡ä¸€ä¸ªçº¿æ€§å¤´å’Œsofrmaxè½¬æ¢ä¸ºè¯æ±‡è¡¨ä¸­æ–‡æœ¬idçš„æ¦‚ç‡ï¼ˆä¹Ÿå°±æ˜¯<strong>æœ€ç»ˆè¾“å‡ºç»´åº¦=è¯æ±‡è¡¨å¤§å°</strong>ï¼‰</li>
<li>ç›´æ¥æ³¢å½¢è¾“å‡ºï¼šæœ‰äº›æ¨¡å‹å¯ä»¥ç›´æ¥è¾“å‡ºæ³¢å½¢ï¼Œä½†è¾ƒå°‘</li>
<li>æ—¶é¢‘è°±è¾“å‡ºï¼šå¯¹äºè¯¥ç±»æ¨¡å‹ï¼Œç”±äºæˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯éœ€è¦è¾“å‡ºä¸€ä¸ªæ³¢å½¢ï¼Œå› æ­¤é€šå¸¸æœ‰ä¸¤ç§åšæ³•ï¼š<ul>
<li>åŸºäºistftï¼šå¦‚æœæˆ‘ä»¬è¾“å…¥æ¨¡å‹çš„æ—¶é¢‘è°±æ˜¯stftå¾—åˆ°çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡istftè¿˜åŸã€‚ä½†æ­¤æ—¶æˆ‘ä»¬éœ€è¦çŸ¥é“<strong>å¹…å€¼å’Œç›¸ä½</strong>ä¸¤éƒ¨åˆ†çš„ä¿¡æ¯ï¼Œè€Œä¸€èˆ¬éŸ³é¢‘æ¨¡å‹è¾“å…¥ä»…ä½¿ç”¨åŸºäºå¹…å€¼ä¿¡æ¯çš„åŠŸç‡è°±ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªé¢å¤–çš„ç½‘ç»œä¼°è®¡å…¶ç›¸ä½ä¿¡æ¯ï¼ˆä¹Ÿæœ‰å…¶ä»–æ–¹æ³•ï¼Œè·Ÿæ¨¡å‹è¾“å…¥æœ‰å…³ï¼‰</li>
<li>åŸºäºç¥ç»ç½‘ç»œï¼šç›´æ¥å†ä½¿ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œå°†decoderè¾“å‡ºåµŒå…¥è½¬æ¢ä¸ºæ³¢å½¢ï¼ˆVocoderå£°ç å™¨ï¼‰</li>
</ul>
</li>
</ul>
<h2 id="ä¸¤ç§ç»“æ„"><a href="#ä¸¤ç§ç»“æ„" class="headerlink" title="ä¸¤ç§ç»“æ„"></a>ä¸¤ç§ç»“æ„</h2><h3 id="CTCç»“æ„"><a href="#CTCç»“æ„" class="headerlink" title="CTCç»“æ„"></a>CTCç»“æ„</h3><p>CTCç»“æ„ï¼ˆConnectionist Temporal Classificationï¼‰æ˜¯ä¸€ç§<strong>ä»…</strong>ä½¿ç”¨Transformerç¼–ç å™¨ï¼ˆencoderï¼‰ç»“æ„çš„<strong>è¯­éŸ³è¯†åˆ«</strong>ï¼ˆASRï¼‰æ¨¡å‹ã€‚ä½¿ç”¨è¯¥æ¶æ„çš„æ¨¡å‹åŒ…æ‹¬Wav2Vec2ã€HuBERTã€M-CTC-Tç­‰ç­‰ã€‚</p>
<p>åœ¨CTCç»“æ„æ¨¡å‹ä¸­ï¼Œæ‰€ä½¿ç”¨çš„è¯æ±‡è¡¨é€šå¸¸æ˜¯å°è¯æ±‡è¡¨ï¼ˆå­—ç¬¦ã€éŸ³ç´ ç­‰ï¼‰ã€‚è¯¥ç±»æ¨¡å‹é€šå¸¸å°†è‹¥å¹²msçš„æ ·æœ¬åˆ‡ç‰‡è¾“å‡ºä¸ºä¸€ä¸ªtokenï¼Œç”±äºä¸€ä¸ªå­—æ¯å‘éŸ³å¯èƒ½åŒ…å«å¤šä¸ªåˆ‡ç‰‡ï¼Œ<strong>æ¨¡å‹ä¾¿ä¼šè¾“å‡ºå¤šä¸ªé‡å¤å­—æ¯</strong>ï¼Œå› ä¸ºæ¯ä¸ªtokenå¿…é¡»å¯¹åº”ä¸€ä¸ªç»“æœã€‚è€ŒCTCç®—æ³•å°±æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šæ ‡è®°ï¼ˆblank tokenï¼‰ï¼Œå‹ç¼©æ¨¡å‹è¾“å‡ºçš„é‡å¤æˆ–ç©ºç™½å†…å®¹</p>
<p>å¯¹äºç©ºç™½æ ‡è®°ï¼Œå…¶æ˜¯é€šè¿‡<strong>ç‰¹æ®Šçš„æŸå¤±å‡½æ•°</strong>è®©æ¨¡å‹å­¦ä¹ ä½•æ—¶è¯¥è¾“å‡ºç©ºç™½æ ‡è®°çš„ï¼Œå› æ­¤CTCæ¨¡å‹ä½¿ç”¨çš„lossä¸æ˜¯æ ‡å‡†çš„äº¤å‰ç†µã€‚<strong>é™¤äº†è¯æ±‡è¡¨ä¸­æ·»åŠ ç©ºç™½æ ‡è®°ã€ä»…ä½¿ç”¨encoderå’Œä½¿ç”¨ç‰¹æ®Šçš„è®­ç»ƒç­–ç•¥ä¹‹å¤–</strong>ï¼Œè¯¥ç±»æ¨¡å‹å°±æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„ç‚¹äº†ã€‚</p>
<p>å¯¹äºåªè€ƒè™‘å•å­—ç¬¦çš„CTCæ¨¡å‹ï¼Œå¯èƒ½ä¼šè¾“å‡ºå¬èµ·æ¥æ­£ç¡®ä½†æ‹¼å†™ä¸æ­£ç¡®çš„å•è¯ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨<strong>é¢å¤–çš„è¯­è¨€æ¨¡å‹</strong>æ¥æé«˜éŸ³é¢‘çš„è½¬å½•è´¨é‡ã€‚è¿™ä¸ªè¯­è¨€æ¨¡å‹å®é™…ä¸Šæ˜¯ä½œä¸ºäº†CTCè¾“å‡ºçš„<strong>æ‹¼å†™æ£€æŸ¥å™¨</strong>ã€‚</p>
<h3 id="Seq2seqç»“æ„"><a href="#Seq2seqç»“æ„" class="headerlink" title="Seq2seqç»“æ„"></a>Seq2seqç»“æ„</h3><p>æ¯”CTCç»“æ„çš„æ¨¡å‹èƒ½åŠ›æ›´å¼ºï¼Œä½¿ç”¨æ ‡å‡†çš„transformerç»“æ„ï¼Œä¸è¯­è¨€æ¨¡å‹åŸºæœ¬ä¸€è‡´ã€‚å› æ­¤å…¶æœ€ç»ˆçš„è¾“å‡ºå’Œè¯­è¨€æ¨¡å‹ä¸€æ ·ï¼Œéƒ½æ˜¯subwordï¼Œå¯¹äºwhisperï¼Œå…¶ä½¿ç”¨çš„å°±æ˜¯GPT2çš„åˆ†è¯å™¨ã€‚åœ¨ASRä»»åŠ¡ä¸­ï¼Œå…¶ä½¿ç”¨äº¤å‰ç†µä½œä¸ºæŸå¤±å‡½æ•°ã€‚</p>
<h1 id="ğŸ¤—Transformersåº“åŸºç¡€ğŸ¤—"><a href="#ğŸ¤—Transformersåº“åŸºç¡€ğŸ¤—" class="headerlink" title="ğŸ¤—Transformersåº“åŸºç¡€ğŸ¤—"></a>ğŸ¤—Transformersåº“åŸºç¡€ğŸ¤—</h1><h2 id="pipeline"><a href="#pipeline" class="headerlink" title="pipeline"></a>pipeline</h2><p>transformeråº“ç›´æ¥è°ƒç”¨å·²ç¡®å®šå…·ä½“åŠŸèƒ½çš„æ¨¡å‹çš„å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> pipeline</span><br><span class="line"></span><br><span class="line">classifier = pipeline(<span class="string">&quot;sentiment-analysis&quot;</span>)</span><br><span class="line">classifier(</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&quot;I&#x27;ve been waiting for a HuggingFace course my whole life.&quot;</span>,</span><br><span class="line">        <span class="string">&quot;I hate this so much!&quot;</span>,</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;[&#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;POSITIVE&#x27;</span>, <span class="string">&#x27;score&#x27;</span>: <span class="number">0.9598047137260437</span>&#125;,</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;NEGATIVE&#x27;</span>, <span class="string">&#x27;score&#x27;</span>: <span class="number">0.9994558095932007</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>å¯¹äºä¸€ä¸ªè¯­è¨€æ¨¡å‹ï¼Œå…¶å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå³tokenizerå’Œmodel</p>
<h2 id="tokenizer"><a href="#tokenizer" class="headerlink" title="tokenizer"></a>tokenizer</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>tokenizerçš„ä½œç”¨å°±æ˜¯å°†è¾“å…¥çš„æ–‡æœ¬è½¬åŒ–ä¸ºæ¨¡å‹å¯å¤„ç†çš„tensorï¼ˆ<strong>å³ç¼–ç encode</strong>ï¼‰ï¼ŒåŒæ—¶ç”Ÿæˆæ¯å¥è¯æ‰€å¯¹åº”çš„ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œå¦‚token_type_idså’Œattention_maskç­‰</p>
<p>åŸºæœ¬çš„tokenizerå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>word-basedï¼šç›´æ¥ä»¥ç©ºæ ¼åˆ†éš”å•è¯ï¼Œå°†æ¯ä¸ªå•è¯ï¼ˆwordï¼‰å¯¹åº”ä¸€ä¸ªå”¯ä¸€IDã€‚ç¼ºç‚¹å³æ˜¯éœ€è¦å¤§é‡çš„tokenåº“ï¼Œä»¥å­˜å‚¨æ‰€æœ‰å•è¯</li>
<li>Character-basedï¼šç›´æ¥æ‹†ä¸ºå•ä¸ªå­—ç¬¦ï¼Œå°†æ¯ä¸ªå­—ç¬¦å¯¹åº”å”¯ä¸€IDã€‚ç¼ºç‚¹æ˜¯å¯¹äºä¸€ä¸ªå¥å­ï¼Œæ¨¡å‹éœ€è¦å¤„ç†å¤§é‡tokenï¼Œå¹¶ä¸”æ¯ä¸ªå­—ç¬¦æœ¬èº«æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼ˆå¯¹äºè‹±æ–‡æ¥è¯´ï¼‰</li>
<li>subwordï¼š<strong>å‡ ä¹æ‰€æœ‰å¤§æ¨¡å‹éƒ½åœ¨ä½¿ç”¨çš„åˆ†è¯ç­–ç•¥</strong>ï¼ŒåŸåˆ™ï¼šå¸¸ç”¨è¯ä¸åº”è¢«åˆ†è§£ä¸ºæ›´å°çš„å­è¯ï¼Œä½†ç½•è§è¯åº”è¢«åˆ†è§£ä¸ºæœ‰æ„ä¹‰çš„å­è¯ã€‚ä¾‹å¦‚ï¼Œå¯¹äºâ€tokenizationâ€ï¼Œåˆ™å¯ä»¥è¢«åˆ†ä¸ºâ€tokenâ€å’Œâ€izationâ€ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªsubwordå‡ºç°æ›´ä¸ºé¢‘ç¹ï¼Œå¹¶ä¸”è¿™æ ·åˆ†è¯ä¹Ÿå¯ä»¥ä¿ç•™å…¶æ„ä¹‰</li>
</ul>
<p>æ¯ä¸ªæ¨¡å‹éƒ½æœ‰è‡ªå·±çš„å…·ä½“tokenizerä»¥å®ç°subwordç­–ç•¥</p>
<p>transformersä¾‹ç¨‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer, AutoModelForSequenceClassification</span><br><span class="line"></span><br><span class="line">checkpoint = <span class="string">&quot;distilbert-base-uncased-finetuned-sst-2-english&quot;</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(checkpoint)</span><br><span class="line">model = AutoModelForSequenceClassification.from_pretrained(checkpoint)</span><br><span class="line">sequences = [<span class="string">&quot;I&#x27;ve been waiting for a HuggingFace course my whole life.&quot;</span>, <span class="string">&quot;So have I!&quot;</span>]</span><br><span class="line"></span><br><span class="line">tokens = tokenizer(sequences, padding=<span class="literal">True</span>, truncation=<span class="literal">True</span>, return_tensors=<span class="string">&quot;pt&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>tokenæ­¤æ—¶ä¸ºä¸€ä¸ªå­—å…¸ï¼ŒåŒ…æ‹¬äº†ç¼–ç å’Œæ³¨æ„åŠ›æ©ç ï¼ˆæŒ‡padding maskï¼‰</p>
<h3 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h3><p>ç¼–ç åˆ†ä¸ºä¸¤æ­¥ï¼Œå³åˆ†è¯+è½¬åŒ–ä¸ºID</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä»…åˆ†è¯</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(<span class="string">&quot;bert-base-cased&quot;</span>)</span><br><span class="line">sequence = <span class="string">&quot;Using a Transformer network is simple&quot;</span></span><br><span class="line">tokens = tokenizer.tokenize(sequence)</span><br><span class="line">&gt;&gt;&gt;[<span class="string">&#x27;Using&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;transform&#x27;</span>, <span class="string">&#x27;##er&#x27;</span>, <span class="string">&#x27;network&#x27;</span>, <span class="string">&#x27;is&#x27;</span>, <span class="string">&#x27;simple&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†åˆ†è¯è½¬ä¸ºID</span></span><br><span class="line">ids = tokenizer.convert_tokens_to_ids(tokens)</span><br><span class="line"><span class="built_in">print</span>(ids)</span><br><span class="line">&gt;&gt;&gt;[<span class="number">7993</span>, <span class="number">170</span>, <span class="number">11303</span>, <span class="number">1200</span>, <span class="number">2443</span>, <span class="number">1110</span>, <span class="number">3014</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#è§£ç </span></span><br><span class="line">decoded_string = tokenizer.decode([<span class="number">7993</span>, <span class="number">170</span>, <span class="number">11303</span>, <span class="number">1200</span>, <span class="number">2443</span>, <span class="number">1110</span>, <span class="number">3014</span>])</span><br><span class="line"><span class="built_in">print</span>(decoded_string)</span><br><span class="line">&gt;&gt;&gt;<span class="string">&#x27;Using a Transformer network is simple&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºä¸åŒçš„æ¨¡å‹ï¼Œå…¶è¿˜è¦æ±‚äº†å…¶ä»–çš„é¢å¤–è¾“å…¥ï¼Œå› æ­¤å…¶tokenizerä¹Ÿå…·æœ‰é™¤ç¼–ç å¤–çš„å…¶ä»–åŠŸèƒ½ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°†å¥å­åºåˆ—å¡«å……åˆ°æœ€é•¿å¥å­çš„é•¿åº¦</span></span><br><span class="line">model_inputs = tokenizer(sequences, padding=<span class="string">&quot;longest&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å¥å­åºåˆ—å¡«å……åˆ°æ¨¡å‹çš„æœ€å¤§é•¿åº¦</span></span><br><span class="line"><span class="comment"># (512 for BERT or DistilBERT)</span></span><br><span class="line">model_inputs = tokenizer(sequences, padding=<span class="string">&quot;max_length&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å¥å­åºåˆ—å¡«å……åˆ°æŒ‡å®šçš„æœ€å¤§é•¿åº¦</span></span><br><span class="line">model_inputs = tokenizer(sequences, padding=<span class="string">&quot;max_length&quot;</span>, max_length=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æˆªæ–­æ¯”æ¨¡å‹æœ€å¤§é•¿åº¦é•¿çš„å¥å­åºåˆ—</span></span><br><span class="line"><span class="comment"># (512 for BERT or DistilBERT)</span></span><br><span class="line">model_inputs = tokenizer(sequences, truncation=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æˆªæ–­é•¿äºæŒ‡å®šæœ€å¤§é•¿åº¦çš„å¥å­åºåˆ—</span></span><br><span class="line">model_inputs = tokenizer(sequences, max_length=<span class="number">8</span>, truncation=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å› PyTorch tensors</span></span><br><span class="line">model_inputs = tokenizer(sequences, padding=<span class="literal">True</span>, return_tensors=<span class="string">&quot;pt&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å› TensorFlow tensors</span></span><br><span class="line">model_inputs = tokenizer(sequences, padding=<span class="literal">True</span>, return_tensors=<span class="string">&quot;tf&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å› NumPy arrays</span></span><br><span class="line">model_inputs = tokenizer(sequences, padding=<span class="literal">True</span>, return_tensors=<span class="string">&quot;np&quot;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="model"><a href="#model" class="headerlink" title="model"></a>model</h2><h3 id="åˆ›å»ºæ¨¡å‹"><a href="#åˆ›å»ºæ¨¡å‹" class="headerlink" title="åˆ›å»ºæ¨¡å‹"></a>åˆ›å»ºæ¨¡å‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> BertConfig, BertModel</span><br><span class="line"></span><br><span class="line">config = BertConfig()</span><br><span class="line">model = BertModel(config)</span><br></pre></td></tr></table></figure>
<h3 id="åŠ è½½é¢„è®­ç»ƒæƒé‡"><a href="#åŠ è½½é¢„è®­ç»ƒæƒé‡" class="headerlink" title="åŠ è½½é¢„è®­ç»ƒæƒé‡"></a>åŠ è½½é¢„è®­ç»ƒæƒé‡</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = BertModel.from_pretrained(<span class="string">&quot;bert-base-cased&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆ–æ˜¯ç›´æ¥é€šè¿‡AutoModelç±»</span></span><br><span class="line">checkpoint = <span class="string">&quot;bert-base-cased&quot;</span></span><br><span class="line">model = AutoModel.from_pretrained(checkpoint)</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤å¤„çš„æ¨¡å‹è¾“å…¥éœ€å‚è€ƒå„æ¨¡å‹å…·ä½“è¦æ±‚ï¼Œä¸€èˆ¬ä¸ºä¸€ä¸ªå­—å…¸ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#x27;input_ids&#x27;: tensor([[  101,  1045,  1005,  2310,  2042,  3403,  2005,  1037, 17662, 			12172,     2607,  2026,  2878,  2166,  1012,   102],</span><br><span class="line">        [  101,  2061,  2031,  1045,   999,   102,     0,     0,     0,     0,</span><br><span class="line">             0,     0,     0,     0,     0,     0]]), </span><br><span class="line"> &#x27;attention_mask&#x27;: tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],</span><br><span class="line">        [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]])&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™äº›å¯ä»¥è¢«æ¨¡å‹å¯¹åº”çš„tokenizerç›´æ¥ç”Ÿæˆï¼Œä»…éœ€ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model(**tokens) </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">pythonçš„å­—å…¸è§£åŒ…æœºåˆ¶ï¼Œç­‰åŒäºmodel(</span></span><br><span class="line"><span class="string">    input_ids=tensor(...),</span></span><br><span class="line"><span class="string">    attention_mask=tensor(...)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="dataset"><a href="#dataset" class="headerlink" title="dataset"></a>dataset</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datasets <span class="keyword">import</span> load_dataset</span><br><span class="line"></span><br><span class="line">raw_datasets = load_dataset(<span class="string">&quot;glue&quot;</span>, <span class="string">&quot;mrpc&quot;</span>)</span><br><span class="line">raw_train_dataset = raw_datasets[<span class="string">&quot;train&quot;</span>]</span><br><span class="line">sentence1 = raw_train_dataset[<span class="string">&#x27;sentence1&#x27;</span>]</span><br><span class="line">sample = raw_train_dataset[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h3 id="Datadict"><a href="#Datadict" class="headerlink" title="Datadict"></a>Datadict</h3><p>è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª<u>DatasetDict</u>æ•°æ®ç»“æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼å­—å…¸çš„ç»“æ„</p>
<img src="/images/loading.png" data-original="/2025/11/21/LLM/1.png" class title="This is an image"> 
<p>å¯¹å…¶è¿›è¡Œç´¢å¼•å¯ä»¥å¾—åˆ°å•ä¸ªæ•°æ®é›†ç»“æ„<u>Dataset</u></p>
<h3 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h3><p>å¯¹äºDatasetç»“æ„ï¼Œä¹Ÿå°±æ˜¯<code>raw_train_dataset</code>ï¼Œå…¶å­˜å‚¨æ–¹å¼æ˜¯åˆ—å¼å­˜å‚¨ï¼Œå¯¹äºæœ¬ä»£ç ï¼Œå…¶æ¯ä¸€åˆ—ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27;sentence1&#x27;, &#x27;sentence2&#x27;, &#x27;label&#x27;, &#x27;idx&#x27;</span><br></pre></td></tr></table></figure>
<p>å¯¹è¿™äº›é”®åè¿›è¡Œç´¢å¼•å³å¯è¿”å›å•ä¸ª<u>Column</u>ç»“æ„</p>
<p>ä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œ<strong>è¡Œç´¢å¼•</strong>ï¼Œåˆ™ä¼šè¿”å›å•ä¸ªæ ·æœ¬çš„æ¯åˆ—ä¿¡æ¯ï¼ˆ<strong>ä¸€ä¸ªæ ‡å‡†å­—å…¸</strong>ï¼‰ï¼š</p>
<img src="/images/loading.png" data-original="/2025/11/21/LLM/2.png" class title="This is an image"> 
<p>å…¶ä¸­ï¼Œå¯¹äºæœ¬ä»£ç æ¥è¯´ï¼Œlabelåˆ™æ˜¯ä»£è¡¨sentence1å’Œsentence2<strong>æ˜¯å¦</strong>åŒä¹‰</p>
<h3 id="è¿”å›tokençš„dataset"><a href="#è¿”å›tokençš„dataset" class="headerlink" title="è¿”å›tokençš„dataset"></a>è¿”å›tokençš„dataset</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">tokenize_function</span>(<span class="params">examples</span>):</span><br><span class="line">    <span class="keyword">return</span> tokenizer(</span><br><span class="line">        examples[<span class="string">&quot;sentence1&quot;</span>],</span><br><span class="line">        examples[<span class="string">&quot;sentence2&quot;</span>],</span><br><span class="line">        truncation=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line">tokenized_datasets = raw_datasets.<span class="built_in">map</span>(tokenize_function, batched=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>.mapæ–¹æ³•å¯ä»¥å°†æ¯ä¸ªæ–‡æœ¬ç»è¿‡tokenizationåçš„ç»“æœæ·»åŠ åˆ°åŸæœ¬çš„Datadictä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DatasetDict(&#123;</span><br><span class="line">    train: Dataset(&#123;</span><br><span class="line">        features: [&#x27;attention_mask&#x27;, &#x27;idx&#x27;, &#x27;input_ids&#x27;, &#x27;label&#x27;, &#x27;sentence1&#x27;, &#x27;sentence2&#x27;, &#x27;token_type_ids&#x27;],</span><br><span class="line">        num_rows: 3668</span><br><span class="line">    &#125;)</span><br><span class="line">    validation: Dataset(&#123;</span><br><span class="line">        features: [&#x27;attention_mask&#x27;, &#x27;idx&#x27;, &#x27;input_ids&#x27;, &#x27;label&#x27;, &#x27;sentence1&#x27;, &#x27;sentence2&#x27;, &#x27;token_type_ids&#x27;],</span><br><span class="line">        num_rows: 408</span><br><span class="line">    &#125;)</span><br><span class="line">    test: Dataset(&#123;</span><br><span class="line">        features: [&#x27;attention_mask&#x27;, &#x27;idx&#x27;, &#x27;input_ids&#x27;, &#x27;label&#x27;, &#x27;sentence1&#x27;, &#x27;sentence2&#x27;, &#x27;token_type_ids&#x27;],</span><br><span class="line">        num_rows: 1725</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å½“ä¸éœ€è¦å…¶ä¸­çš„æŸäº›featuresæ—¶ï¼Œå¯ä»¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">samples = tokenized_datasets[<span class="string">&quot;train&quot;</span>][:]</span><br><span class="line">samples = &#123;k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> samples.items() <span class="keyword">if</span> k <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&quot;idx&quot;</span>, <span class="string">&quot;sentence1&quot;</span>, <span class="string">&quot;sentence2&quot;</span>]&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ä¹Ÿå¯ä»¥è°ƒç”¨Datasetdictçš„æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tokenized_datasets = tokenized_datasets.remove_columns([<span class="string">&quot;sentence1&quot;</span>, <span class="string">&quot;sentence2&quot;</span>, <span class="string">&quot;idx&quot;</span>])</span><br></pre></td></tr></table></figure>
<h3 id="åŠ¨æ€å¡«å……"><a href="#åŠ¨æ€å¡«å……" class="headerlink" title="åŠ¨æ€å¡«å……"></a>åŠ¨æ€å¡«å……</h3><p>åœ¨è®­ç»ƒ LLMæ—¶ï¼Œåªéœ€è¦å¯¹æ¯ä¸ª batch è¿›è¡Œ<strong>åŠ¨æ€ padding</strong>ï¼ˆå› ä¸ºæ¨¡å‹çš„è¾“å…¥å¿…é¡»æ˜¯è§„åˆ™çš„ï¼‰ï¼Œè€Œä¸æ˜¯å¯¹æ•´ä¸ªæ•°æ®é›†è¿›è¡Œç»Ÿä¸€ paddingï¼Œå› ä¸ºè¿™æ ·ä¼šå¤§é‡æµªè´¹è®¡ç®—èµ„æºã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> DataCollatorWithPadding</span><br><span class="line"></span><br><span class="line">data_collator = DataCollatorWithPadding(tokenizer=tokenizer)</span><br><span class="line">samples = tokenized_datasets[<span class="string">&quot;train&quot;</span>][:<span class="number">8</span>]</span><br><span class="line">samples = &#123;k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> samples.items() <span class="keyword">if</span> k <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&quot;idx&quot;</span>, <span class="string">&quot;sentence1&quot;</span>, <span class="string">&quot;sentence2&quot;</span>]&#125;</span><br><span class="line">batch = data_collator(samples)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­batchåˆ™æ˜¯nä¸ªæ ·æœ¬ï¼ˆä»£ç ä¸­ä¸º8ï¼‰æ‰€å¯¹åº”çš„ç»è¿‡tokenizaitonåçš„samplesï¼Œå¹¶ä¸”å…¶ä¸­çš„idå…¨éƒ¨éƒ½è¢«paddingè‡³8ä¸ªæ ·æœ¬ä¸­æœ€é•¿æ–‡æœ¬idçš„é•¿åº¦ï¼ˆbatch.item()å’Œsamplesçš„æ•°æ®ç»“æ„æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªæ ‡å‡†å­—å…¸ï¼Œä»…æœ‰idå‘ç”Ÿäº†paddingï¼‰</p>
<h1 id="æ¨¡å‹å¾®è°ƒ"><a href="#æ¨¡å‹å¾®è°ƒ" class="headerlink" title="æ¨¡å‹å¾®è°ƒ"></a>æ¨¡å‹å¾®è°ƒ</h1><h2 id="è°ƒç”¨Trainer-API"><a href="#è°ƒç”¨Trainer-API" class="headerlink" title="è°ƒç”¨Trainer API"></a>è°ƒç”¨Trainer API</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datasets <span class="keyword">import</span> load_dataset</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer, DataCollatorWithPadding, AutoModelForSequenceClassification</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> TrainingArguments, Trainer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">raw_datasets = load_dataset(<span class="string">&quot;glue&quot;</span>, <span class="string">&quot;mrpc&quot;</span>)</span><br><span class="line">checkpoint = <span class="string">&quot;bert-base-uncased&quot;</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(checkpoint)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tokenize_function</span>(<span class="params">example</span>):</span><br><span class="line">    <span class="keyword">return</span> tokenizer(example[<span class="string">&quot;sentence1&quot;</span>], example[<span class="string">&quot;sentence2&quot;</span>], truncation=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tokenized_datasets = raw_datasets.<span class="built_in">map</span>(tokenize_function, batched=<span class="literal">True</span>)</span><br><span class="line">data_collator = DataCollatorWithPadding(tokenizer=tokenizer)</span><br><span class="line">training_args = TrainingArguments(<span class="string">&quot;test-trainer&quot;</span>)</span><br><span class="line">model = AutoModelForSequenceClassification.from_pretrained(checkpoint, num_labels=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">trainer = Trainer(</span><br><span class="line">    model,</span><br><span class="line">    training_args,</span><br><span class="line">    train_dataset=tokenized_datasets[<span class="string">&quot;train&quot;</span>],</span><br><span class="line">    eval_dataset=tokenized_datasets[<span class="string">&quot;validation&quot;</span>],</span><br><span class="line">    data_collator=data_collator,</span><br><span class="line">    tokenizer=tokenizer,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trainer.train()</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨<code>AutoModelForSequenceClassification</code>å®ä¾‹åŒ–æ¨¡å‹æ—¶ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªè­¦å‘Šï¼Œè¿™æ˜¯å› ä¸º BERT æ²¡æœ‰åœ¨å¥å­å¯¹åˆ†ç±»æ–¹é¢è¿›è¡Œè¿‡é¢„è®­ç»ƒï¼Œæ‰€ä»¥<strong>é¢„è®­ç»ƒæ¨¡å‹çš„ head å·²ç»è¢«ä¸¢å¼ƒ</strong>ï¼Œè€Œæ˜¯<strong>æ·»åŠ äº†ä¸€ä¸ªé€‚åˆå¥å­åºåˆ—åˆ†ç±»çš„æ–°å¤´éƒ¨</strong>ã€‚è¿™äº›è­¦å‘Šè¡¨æ˜ä¸€äº›æƒé‡æ²¡æœ‰ä½¿ç”¨ï¼ˆå¯¹åº”äºè¢«æ”¾å¼ƒçš„é¢„è®­ç»ƒå¤´çš„æƒé‡ï¼‰ï¼Œè€Œæœ‰äº›æƒé‡è¢«éšæœºåˆå§‹åŒ–ï¼ˆå¯¹åº”äºæ–° head çš„æƒé‡ï¼‰ã€‚</p>
<h3 id="è¯„ä¼°"><a href="#è¯„ä¼°" class="headerlink" title="è¯„ä¼°"></a>è¯„ä¼°</h3><p>å¯¹äºæ¨¡å‹çš„è¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">predictions = trainer.predict(tokenized_datasets[<span class="string">&quot;validation&quot;</span>])</span><br></pre></td></tr></table></figure>
<p>å…¶ä¼šè¿”å›ä¸€ä¸ªå…ƒç»„ï¼š<code>(predictions,label_ids,metrics)</code>ï¼›å…¶ä¸­predictionsä¸ºä¸€ä¸ªå½¢çŠ¶ä¸º(batchsize,cls_num)çš„äºŒç»´å¼ é‡ï¼Œç¬¬äºŒç»´åº¦ä¸ºæ¯ä¸ªæ ·æœ¬çš„logitsï¼Œå…¶ä¸­çš„æœ€å¤§å€¼åˆ™ä¸ºé¢„æµ‹ç»“æœï¼›label_idsä¸ºæ ·æœ¬çœŸå®æ ‡ç­¾ï¼Œmetricsä¸ºè‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡ï¼Œé»˜è®¤åªè¿”å›loss</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªè¯„ä¼°å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compute_metrics</span>(<span class="params">eval_preds</span>):</span><br><span class="line">    metric = evaluate.load(<span class="string">&quot;glue&quot;</span>, <span class="string">&quot;mrpc&quot;</span>)</span><br><span class="line">    logits, labels = eval_preds</span><br><span class="line">    predictions = np.argmax(logits, axis=-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> metric.compute(predictions=predictions, references=labels)</span><br><span class="line"></span><br><span class="line">trainer = Trainer(</span><br><span class="line">    model,</span><br><span class="line">    training_args,</span><br><span class="line">    train_dataset=tokenized_datasets[<span class="string">&quot;train&quot;</span>],</span><br><span class="line">    eval_dataset=tokenized_datasets[<span class="string">&quot;validation&quot;</span>],</span><br><span class="line">    data_collator=data_collator,</span><br><span class="line">    tokenizer=tokenizer,</span><br><span class="line">    compute_metrics=compute_metrics,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­.computeæ–¹æ³•ä¼šè¿”å›å‡†ç¡®ç‡ä¸f1åˆ†æ•°</p>
<h2 id="ä¸ä½¿ç”¨Trainer"><a href="#ä¸ä½¿ç”¨Trainer" class="headerlink" title="ä¸ä½¿ç”¨Trainer"></a>ä¸ä½¿ç”¨Trainer</h2><h3 id="ä½¿ç”¨torchçš„DataloaderåŠ è½½æ•°æ®é›†"><a href="#ä½¿ç”¨torchçš„DataloaderåŠ è½½æ•°æ®é›†" class="headerlink" title="ä½¿ç”¨torchçš„DataloaderåŠ è½½æ•°æ®é›†"></a>ä½¿ç”¨torchçš„DataloaderåŠ è½½æ•°æ®é›†</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tokenized_datasets = raw_datasets.<span class="built_in">map</span>(tokenize_function, batched=<span class="literal">True</span>)</span><br><span class="line">data_collator = DataCollatorWithPadding(tokenizer=tokenizer)</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ å»ä¸éœ€è¦åˆ—ï¼Œå°†labelæ”¹åä¸ºlabelsï¼ˆæ¨¡å‹é»˜è®¤è¾“å…¥æ ¼å¼ï¼‰</span></span><br><span class="line">tokenized_datasets = tokenized_datasets.remove_columns([<span class="string">&quot;sentence1&quot;</span>, <span class="string">&quot;sentence2&quot;</span>, <span class="string">&quot;idx&quot;</span>])</span><br><span class="line">tokenized_datasets = tokenized_datasets.rename_column(<span class="string">&quot;label&quot;</span>, <span class="string">&quot;labels&quot;</span>)</span><br><span class="line">tokenized_datasets.set_format(<span class="string">&quot;torch&quot;</span>)</span><br><span class="line"><span class="comment">#&gt;&gt;&gt;[&quot;attention_mask&quot;, &quot;input_ids&quot;, &quot;labels&quot;, &quot;token_type_ids&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="comment">#Dataloaderå…¼å®¹transformersçš„DataCollatorWithPadding</span></span><br><span class="line">train_dataloader = DataLoader(</span><br><span class="line">    tokenized_datasets[<span class="string">&quot;train&quot;</span>], shuffle=<span class="literal">True</span>, batch_size=<span class="number">8</span>, collate_fn=data_collator</span><br><span class="line">)</span><br><span class="line">eval_dataloader = DataLoader(</span><br><span class="line">    tokenized_datasets[<span class="string">&quot;validation&quot;</span>], batch_size=<span class="number">8</span>, collate_fn=data_collator</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶dataloaderè¿”å›çš„æ¯ä¸ªbatchä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#x27;attention_mask&#x27;: torch.Size([8, 65]),</span><br><span class="line"> &#x27;input_ids&#x27;: torch.Size([8, 65]),</span><br><span class="line"> &#x27;labels&#x27;: torch.Size([8]),</span><br><span class="line"> &#x27;token_type_ids&#x27;: torch.Size([8, 65])&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥batchå¯ä»¥ç›´æ¥è¾“å…¥åˆ°AutoModelForSequenceClassificationå®ä¾‹åŒ–çš„æ¨¡å‹ä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> get_scheduler</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">optimizer = AdamW(model.parameters(), lr=<span class="number">5e-5</span>)</span><br><span class="line">num_epochs = <span class="number">3</span></span><br><span class="line">num_training_steps = num_epochs * <span class="built_in">len</span>(train_dataloader)</span><br><span class="line">lr_scheduler = get_scheduler(	<span class="comment">#å­¦ä¹ ç‡çº¿æ€§è¡°å‡</span></span><br><span class="line">    <span class="string">&quot;linear&quot;</span>,</span><br><span class="line">    optimizer=optimizer,</span><br><span class="line">    num_warmup_steps=<span class="number">0</span>,</span><br><span class="line">    num_training_steps=num_training_steps,</span><br><span class="line">)</span><br><span class="line">model.to(device)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epoch):</span><br><span class="line">    model.train()</span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> train_dataloader:</span><br><span class="line">        batch = &#123;k: v.to(device) <span class="keyword">for</span> k, v <span class="keyword">in</span> batch.items()&#125;</span><br><span class="line">        outputs = model(**batch)</span><br><span class="line">        loss = outputs.loss</span><br><span class="line">        loss.backward()</span><br><span class="line"></span><br><span class="line">        optimizer.step()</span><br><span class="line">        lr_scheduler.step()</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">    </span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line">	<span class="keyword">for</span> batch <span class="keyword">in</span> eval_loader:</span><br><span class="line">        batch = &#123;k: v.to(device) <span class="keyword">for</span> k, v <span class="keyword">in</span> batch.items()&#125;</span><br><span class="line">    	<span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        	outputs = model(**batch)</span><br><span class="line">        logits = outputs.logits</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€äº›ç»å…¸ç®—æ³•é›†åˆï¼ˆæ‚ï¼‰</title>
    <url>/2025/11/17/control-algorithm/</url>
    <content><![CDATA[<h1 id="PID"><a href="#PID" class="headerlink" title="PID"></a>PID</h1><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>PIDæ§åˆ¶ç®—æ³•æ˜¯ä¸€ç§çº¿æ€§æ§åˆ¶å™¨ï¼Œå®ƒæ ¹æ®ç»™å®šå€¼ï¼ˆç›®æ ‡å€¼ï¼‰å’Œå®é™…è¾“å‡ºå€¼ä¹‹é—´çš„åå·®ï¼Œåˆ©ç”¨æ¯”ä¾‹ï¼ˆProportionalï¼‰ã€ç§¯åˆ†ï¼ˆIntegralï¼‰ã€å¾®åˆ†ï¼ˆDerivativeï¼‰ä¸‰ç§æ§åˆ¶æ–¹å¼çš„ç»„åˆæ¥è°ƒæ•´æ§åˆ¶é‡ï¼Œä»è€Œå®ç°å¯¹è¢«æ§å¯¹è±¡çš„ç²¾ç¡®æ§åˆ¶ã€‚</p>
<h3 id="æ¯”ä¾‹æ§åˆ¶"><a href="#æ¯”ä¾‹æ§åˆ¶" class="headerlink" title="æ¯”ä¾‹æ§åˆ¶"></a>æ¯”ä¾‹æ§åˆ¶</h3><p>æ ¹æ®åå·®çš„å¤§å°ï¼Œ<strong>çº¿æ€§</strong>è°ƒæ•´æ§åˆ¶é‡ã€‚åå·®è¶Šå¤§ï¼Œæ§åˆ¶ä½œç”¨è¶Šå¼ºã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼š<strong>å“åº”é€Ÿåº¦å¿«</strong>ï¼Œèƒ½å¿«é€Ÿå¯¹åå·®åšå‡ºååº”ã€‚</li>
<li>ç¼ºç‚¹ï¼šæ¯”ä¾‹é¡¹è¾ƒå¤§æ—¶ï¼Œä¼šå‡ºç°<strong>éœ‡è¡</strong>ï¼Œè¾ƒå°æ—¶ä¼šå‡ºç°<strong>é™æ€è¯¯å·®</strong></li>
</ul>
<h3 id="ç§¯åˆ†æ§åˆ¶"><a href="#ç§¯åˆ†æ§åˆ¶" class="headerlink" title="ç§¯åˆ†æ§åˆ¶"></a>ç§¯åˆ†æ§åˆ¶</h3><p>æ ¹æ®åå·®çš„ç§¯åˆ†æ¥è°ƒæ•´æ§åˆ¶é‡ã€‚å®ƒä¼š<strong>ç´¯ç§¯è¿‡å»çš„åå·®</strong>ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå³ä½¿åå·®å¾ˆå°ï¼Œç§¯åˆ†é¡¹ä¹Ÿä¼šä¸æ–­ç§¯ç´¯ï¼Œä»è€Œæ¨åŠ¨ç³»ç»Ÿæ¶ˆé™¤åå·®</p>
<ul>
<li>ä¼˜ç‚¹ï¼šèƒ½å¤Ÿ<strong>æ¶ˆé™¤ç¨³æ€è¯¯å·®ï¼ˆé™å·®ï¼‰</strong>ï¼Œä¿è¯ç³»ç»Ÿçš„ç²¾åº¦ã€‚</li>
<li>ç¼ºç‚¹ï¼šç§¯åˆ†ä½œç”¨è¾ƒå¼ºæ—¶ï¼Œ<strong>å®¹æ˜“å¯¼è‡´ç³»ç»Ÿè¶…è°ƒ</strong>ï¼Œç”šè‡³ä½¿ç³»ç»Ÿä¸ç¨³å®šã€‚</li>
</ul>
<img src="/images/loading.png" data-original="/2025/11/17/control-algorithm/1.png" class title="This is an image"> 
<h3 id="å¾®åˆ†æ§åˆ¶"><a href="#å¾®åˆ†æ§åˆ¶" class="headerlink" title="å¾®åˆ†æ§åˆ¶"></a>å¾®åˆ†æ§åˆ¶</h3><p>æ˜¯æ ¹æ®åå·®çš„<strong>å˜åŒ–ç‡</strong>æ¥è°ƒæ•´æ§åˆ¶é‡ã€‚å®ƒèƒ½å¤Ÿ<u>é¢„æµ‹åå·®çš„å˜åŒ–è¶‹åŠ¿</u>ï¼Œæå‰åšå‡ºè°ƒæ•´ã€‚</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå¯ä»¥æŠ‘åˆ¶åå·®çš„å˜åŒ–ï¼Œ<strong>å‡å°‘ç³»ç»Ÿçš„è¶…è°ƒ</strong>ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¯¹å™ªå£°æ¯”è¾ƒæ•æ„Ÿã€‚å¦‚æœæµ‹é‡çš„åå·®ä¿¡å·ä¸­å­˜åœ¨å™ªå£°ï¼Œå¾®åˆ†é¡¹<strong>ä¼šæ”¾å¤§å™ªå£°</strong>çš„å½±å“ï¼Œå¯¼è‡´æ§åˆ¶é‡å‡ºç°ä¸å¿…è¦çš„æ³¢åŠ¨ã€‚å¾®åˆ†é¡¹è¾ƒå¤§æ—¶ä¹Ÿä¼šå‡ºç°éœ‡è¡</li>
</ul>
<h2 id="å¸¸è§ç»„åˆ"><a href="#å¸¸è§ç»„åˆ" class="headerlink" title="å¸¸è§ç»„åˆ"></a>å¸¸è§ç»„åˆ</h2><h3 id="PIæ§åˆ¶"><a href="#PIæ§åˆ¶" class="headerlink" title="PIæ§åˆ¶"></a>PIæ§åˆ¶</h3><ul>
<li><p>ä¼˜ç‚¹ï¼šå°†æ¯”åˆ—è°ƒèŠ‚çš„å¿«é€Ÿååº”ä¸ç§¯åˆ†è°ƒèŠ‚æ¶ˆé™¤é™å·®çš„ç‰¹ç‚¹ç»“åˆï¼›</p>
</li>
<li><p>ç¼ºç‚¹ï¼šä¸å¯¹æœªæ¥æ§åˆ¶è¯¯å·®è¿›è¡Œé¢„æµ‹ï¼Œé™åˆ¶äº†æ§åˆ¶æ€§èƒ½ã€‚</p>
</li>
</ul>
<p>é€‚ç”¨äºæ§åˆ¶é€šé“æ»åè¾ƒå°ã€<strong>è´Ÿè·å˜åŒ–ä¸å¤§</strong>ã€ å·¥è‰ºå‚æ•°<strong>ä¸å…è®¸æœ‰é™å·®</strong>çš„ç³»ç»Ÿã€‚</p>
<h3 id="PDæ§åˆ¶"><a href="#PDæ§åˆ¶" class="headerlink" title="PDæ§åˆ¶"></a>PDæ§åˆ¶</h3><ul>
<li>ä¼˜ç‚¹ï¼šå¯¹æƒ¯æ€§è¾ƒå¤§å¯¹è±¡ï¼Œå¯æ”¹å–„æ§åˆ¶è´¨é‡ï¼Œå‡å°åå·®ï¼Œç¼©çŸ­æ§åˆ¶æ—¶é—´ã€‚æœ‰åˆ©äº<strong>æé«˜ç³»ç»Ÿå“åº”é€Ÿåº¦ï¼ŒæŠ‘åˆ¶åŠ¨æ€åå·®</strong></li>
<li>ç¼ºç‚¹ï¼š<strong>æŠ—å¹²æ‰°èƒ½åŠ›å·®</strong>ï¼Œä¸€èˆ¬åªèƒ½åº”ç”¨äºè¢«è°ƒå‚æ•° å˜åŒ–å¹³ç¨³çš„ç”Ÿäº§è¿‡ç¨‹ï¼›å¾®åˆ†ä½œç”¨å¤ªå¼ºæ—¶ï¼Œå®¹æ˜“é€ æˆç³»ç»Ÿ<strong>æŒ¯è¡</strong>ã€‚</li>
</ul>
<h2 id="ä½ç½®å¼ä¸å¢é‡å¼"><a href="#ä½ç½®å¼ä¸å¢é‡å¼" class="headerlink" title="ä½ç½®å¼ä¸å¢é‡å¼"></a>ä½ç½®å¼ä¸å¢é‡å¼</h2><p>ä½ç½®å¼è¾“å‡ºï¼š</p>
<script type="math/tex; mode=display">
u(t) = K_p e(t) + K_i \int_{0}^{t} e(\tau) \,d\tau + K_d \frac{de(t)}{dt}</script><p>å¢é‡å¼è¾“å‡ºï¼š</p>
<script type="math/tex; mode=display">
\Delta u(k) = K_p [e(k) - e(k-1)] + K_i  e(k) + K_d ({e(k) - 2e(k-1) + e(k-2)})</script><script type="math/tex; mode=display">
u(k) = u(k-1) + \Delta u(k)</script><p>ä½ç½®å¼PIDæ§åˆ¶çš„è¾“å‡ºä¸æ•´ä¸ªè¿‡å»çš„çŠ¶æ€æœ‰å…³ï¼Œç”¨åˆ°äº†è¯¯å·®çš„ç´¯åŠ å€¼;è€Œå¢é‡å¼PIDçš„è¾“å‡ºåªä¸å½“å‰æ‹å’Œå‰ä¸¤æ‹çš„è¯¯å·®æœ‰å…³ï¼Œå› æ­¤<strong>ä½ç½®å¼PIDæ§åˆ¶çš„ç´¯ç§¯è¯¯å·®ç›¸å¯¹æ›´å¤§</strong>;</p>
<p>ç”±äºè¾“å‡ºä¸ºå¢é‡å½¢å¼ï¼Œå¯ä»¥å‡å°æ§åˆ¶å™¨å¯¹æ§åˆ¶é‡çš„å†²å‡»ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ å¹³ç¨³ã€‚</p>
<h2 id="æŠ—ç§¯åˆ†é¥±å’Œ"><a href="#æŠ—ç§¯åˆ†é¥±å’Œ" class="headerlink" title="æŠ—ç§¯åˆ†é¥±å’Œ"></a>æŠ—ç§¯åˆ†é¥±å’Œ</h2><p>PIDæ§åˆ¶å™¨çš„è¾“å‡ºç”±äºç§¯åˆ†ä½œç”¨çš„ä¸æ–­ç´¯åŠ è€Œæ‰©å¤§ï¼Œä»è€Œå¯¼è‡´æ§åˆ¶å™¨è¾“å‡ºä¸æ–­å¢å¤§è¶…å‡ºæ­£å¸¸èŒƒå›´è¿›å…¥é¥±å’ŒåŒºã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œéœ€è¦åœ¨æŸäº›æƒ…å†µä¸‹é™åˆ¶ç§¯åˆ†çš„å¢é•¿ï¼š</p>
<ul>
<li>ç§¯åˆ†åˆ†ç¦»ï¼šè®¾ç½®ä¸€ä¸ªè¯¯å·®é˜ˆå€¼ï¼Œåªæœ‰å½“è¯¯å·®è¾ƒå°ï¼ˆç³»ç»Ÿè¾“å‡ºæ¥è¿‘æœŸæœ›ï¼‰æ—¶ï¼Œæ‰åŠ å…¥ç§¯åˆ†æ§åˆ¶ï¼Œå¹³æ—¶åˆ™ä½¿ç”¨PDæ§åˆ¶</li>
<li>ç§¯åˆ†é™å¹…ï¼šè®¾ç½®ä¸€ä¸ªè¾“å‡ºé˜ˆå€¼èŒƒå›´ï¼Œè®¡ç®—U(k)çš„æ—¶å€™ï¼Œå…ˆåˆ¤æ–­ä¸Šä¸€æ—¶åˆ»çš„æ§åˆ¶é‡U(k-1)æ˜¯å¦å·²ç»è¶…å‡ºäº†é™åˆ¶èŒƒå›´ã€‚è‹¥U(k-1)&gt;Umaxï¼Œåˆ™åªç´¯åŠ è´Ÿåå·®ï¼›è‹¥U(k-1)&lt;Uminï¼Œåˆ™åªç´¯åŠ æ­£åå·®ã€‚</li>
</ul>
<h2 id="ä¸²çº§PID"><a href="#ä¸²çº§PID" class="headerlink" title="ä¸²çº§PID"></a>ä¸²çº§PID</h2><p>ä»¥ç”µæœºæ§åˆ¶ä¸ºä¾‹ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬çš„æœŸæœ›æ˜¯ä½ç½®ï¼ˆç”µæœºè½¬è§’ï¼‰ï¼Œä½†æˆ‘ä»¬æœ€ç»ˆå¯¹ç”µæœºçš„æ§åˆ¶é‡éƒ½æ˜¯ç”µæµï¼ˆåŠ›çŸ©ï¼Œæˆ–è€…è¯´æ˜¯åŠ é€Ÿåº¦ï¼‰ï¼Œå› æ­¤åœ¨ä½¿ç”¨å•ä½ç½®PIDæ—¶ï¼Œè¯¥æ§åˆ¶æ˜¯é—´æ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¯¥æƒ…å†µä¸‹ï¼Œ<strong>é€Ÿåº¦å’ŒåŠ é€Ÿåº¦çš„å˜åŒ–éƒ½æ˜¯æœªçŸ¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸å¹³æ»‘çš„</strong>ï¼›æœ€ç»ˆä¼šè¡¨ç°ä¸ºç”µæœºç»è¿‡äº†ç›®æ ‡ä½ç½®ï¼Œç„¶åå‡ºç°æŒç»­éœ‡è¡ï¼Œå› ä¸ºä»…ä»…ä½¿ç”¨ä½ç½®pidæ˜¯éš¾ä»¥è®©é€Ÿåº¦å’ŒåŠ é€Ÿåº¦éƒ½è¾¾åˆ°æœŸæœ›çš„ï¼‰</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥ä¸²çº§PIDï¼šï¼ˆç”±å¤–åˆ°å†…ï¼‰</p>
<ul>
<li>ä½ç½®ç¯ï¼šæ ¹æ®ä¸Šå±‚è§„åˆ’ç®—æ³•ç»™å‡ºçš„æœŸæœ›ä½ç½®è¿›è¡ŒPIDï¼Œè¾“å‡ºæœŸæœ›é€Ÿåº¦</li>
<li>é€Ÿåº¦ç¯ï¼šæ ¹æ®ä½ç½®ç¯å¾—åˆ°çš„æœŸæœ›é€Ÿåº¦è¿›è¡ŒPIDï¼Œè¾“å‡ºæœŸæœ›è½¬çŸ©/åŠ é€Ÿåº¦/ç”µæµ</li>
<li>ç”µæµç¯ï¼šæ ¹æ®é€Ÿåº¦ç¯è¾“å‡ºè¿›è¡ŒPIDï¼Œæœ€ç»ˆæ§åˆ¶ç”µæœºè½¬çŸ©</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ç½®-é€Ÿåº¦-ç”µæµè¿™ä¸ªæ§åˆ¶é¡ºåº<strong>æ˜¯æˆ‘ä»¬ä¸»åŠ¨ç»™å®š</strong>çš„ï¼Œç»™å®šçš„ç†ç”±æ˜¯è¿™ä¸‰è€…ä¸¤ä¸¤é—´å­˜åœ¨ç€è¾ƒä¸ºç®€å•çš„æ˜ å°„å…³ç³»ï¼Œå³å¾®ç§¯åˆ†å…³ç³»ï¼Œå¯¹äºåŠ é€Ÿåº¦å•Šè½¬çŸ©å•Šç”µæµå•Šï¼Œæ ¹æ®ç‰›äºŒã€æ¬§æ‹‰å’Œç”µæœºå‚æ•°éƒ½å¯ä»¥å¾—åˆ°æ˜ç¡®çš„å¯¹åº”å…³ç³»ï¼Œå› æ­¤åœ¨æœ€å†…ç¯çš„æ§åˆ¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»–ä»¬çœ‹ä½œåŒä¸€æ§åˆ¶é‡ï¼Œä¸€èˆ¬ç”¨ç”µæµçš„åŸå› å¯èƒ½åªæ˜¯å®é™…ç”µæµå€¼è¦æ›´å¥½æµ‹é‡ä¸€ç‚¹ï¼Ÿ</p>
<h3 id="åœ¨æœºå™¨äººä¸­"><a href="#åœ¨æœºå™¨äººä¸­" class="headerlink" title="åœ¨æœºå™¨äººä¸­"></a>åœ¨æœºå™¨äººä¸­</h3><p>ç”±äºæˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ä¸€äº›è½¨è¿¹è§„åˆ’ç®—æ³•ï¼ˆæ¨¡å‹ï¼‰å¹³æ»‘åœ°å¾—åˆ°å…³èŠ‚ç”µæœºçš„æœŸæœ›è§’åº¦ã€è§’é€Ÿåº¦ã€è§’åŠ é€Ÿåº¦ï¼Œå†ç»“åˆåŠ¨åŠ›å­¦æ¨¡å‹ä¾¿å¯å¾—åˆ°æœŸæœ›åŠ›çŸ©ï¼Œå› æ­¤åœ¨æœºå™¨äººæ§åˆ¶ä¸­ï¼Œä¸Šè¿°çš„<strong>å‰é¦ˆæ§åˆ¶</strong>å·²ç»å®Œæˆäº†ç»å¤§éƒ¨åˆ†çš„æ§åˆ¶å·¥ä½œï¼Œåœ¨ç†æƒ³æ¡ä»¶ä¸‹ï¼Œå‰é¦ˆè¶³çŸ£</p>
<p>ä½†å¦‚æœæœºå™¨äººåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å—åˆ°äº†å¹²æ‰°å‘¢ï¼Œå‰é¦ˆæ§åˆ¶ç»™å®šäº†åŠ›çŸ©æ˜¯åœ¨æœ€å¼€å§‹ç¡®å®šçš„ï¼Œæ— æ³•åº”å¯¹é¢å¤–å¹²æ‰°ï¼Œå› æ­¤éœ€è¦åé¦ˆæ§åˆ¶æ¥å‡å¼±å¹²æ‰°ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">joint_states = p.getJointStates(robotId,controllable_joints)</span><br><span class="line">q_actual = np.array([state[<span class="number">0</span>] <span class="keyword">for</span> state <span class="keyword">in</span> joint_states])</span><br><span class="line">qd_actual = np.array([state[<span class="number">1</span>] <span class="keyword">for</span> state <span class="keyword">in</span> joint_states])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">q_e = q[n] - q_actual</span><br><span class="line">qd_e = qd[n] - qd_actual</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">aq = qdd[n] + <span class="number">400</span> * q_e + <span class="number">40</span> * qd_e</span><br><span class="line"></span><br><span class="line">tau = p.calculateInverseDynamics(robotId,<span class="built_in">list</span>(q_actual),<span class="built_in">list</span>(qd_actual),<span class="built_in">list</span>(aq))</span><br><span class="line">p.setJointMotorControlArray(robotId,controllable_joints,p.TORQUE_CONTROL,</span><br><span class="line">                            forces = tau,</span><br><span class="line">                            )</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä»…å¯¹ä½ç½®ç¯å’Œé€Ÿåº¦ç¯è¿›è¡Œäº†æ¯”ä¾‹æ§åˆ¶ï¼Œå› ä¸ºåœ¨å®é™…ä¸­åœ¨å¤–ç¯éƒ¨åˆ†æ·»åŠ ç§¯åˆ†(I)åï¼Œå¯¼è‡´å“åº”å˜æ…¢ï¼Œæ·»åŠ å¾®åˆ†(D)å®¹æ˜“å¼•å…¥å™ªå£°ï¼›è€Œç”±äºæˆ‘ä»¬å·²ç»æœ‰æœŸæœ›ä½ç½®ã€é€Ÿåº¦ï¼Œå› æ­¤ä¹Ÿä¸éœ€è¦åƒä¼ ç»Ÿä¸²çº§pidä¸€æ ·è¿›è¡Œä¸²è”ä½ç½®ç¯ä¸é€Ÿåº¦ç¯ï¼Œè€Œæ˜¯å°†ä¸¤ç¯åŒæ—¶ä½œç”¨äºåŠ›çŸ©æ§åˆ¶</p>
<h2 id="PIDå‚æ•°è°ƒèŠ‚ç»éªŒ"><a href="#PIDå‚æ•°è°ƒèŠ‚ç»éªŒ" class="headerlink" title="PIDå‚æ•°è°ƒèŠ‚ç»éªŒ"></a>PIDå‚æ•°è°ƒèŠ‚ç»éªŒ</h2><ul>
<li>KPï¼šå…ˆè®¾Ki=Kd=0ï¼Œè°ƒKpè‡³ç³»ç»Ÿå‡ºç°è½»å¾®æŒ¯è¡ï¼›å–æ­¤æ—¶Kpå€¼çš„50%ä½œä¸ºåˆå§‹å€¼</li>
<li>KIï¼šé€æ­¥å¢åŠ Kiè‡³é™å·®åœ¨3~5ä¸ªæ§åˆ¶å‘¨æœŸå†…æ¶ˆé™¤</li>
<li>KDï¼šä»Kpå€¼çš„10%~20%å¼€å§‹è°ƒæ•´</li>
</ul>
<h1 id="LQR"><a href="#LQR" class="headerlink" title="LQR"></a>LQR</h1><p><strong>çº¿æ€§äºŒæ¬¡å‹è°ƒèŠ‚å™¨ï¼ˆLinear Quadratic Regulatorï¼‰</strong>ï¼Œå…¶ä¸­ï¼Œçº¿æ€§æŒ‡çº¿æ€§ç³»ç»Ÿï¼ŒäºŒæ¬¡å‹æŒ‡ç›®æ ‡å‡½æ•°</p>
<h2 id="ç³»ç»Ÿæ¨¡å‹æ„å»º"><a href="#ç³»ç»Ÿæ¨¡å‹æ„å»º" class="headerlink" title="ç³»ç»Ÿæ¨¡å‹æ„å»º"></a>ç³»ç»Ÿæ¨¡å‹æ„å»º</h2><img src="/images/loading.png" data-original="/2025/11/17/control-algorithm/2.png" class title="This is an image"> 
<p>é¦–å…ˆï¼ŒLQRä½œç”¨äºçº¿æ€§ç³»ç»Ÿï¼ˆå¯¹äºéçº¿æ€§ç³»ç»Ÿï¼Œéœ€è¦å…ˆçº¿æ€§åŒ–ï¼‰ï¼Œå¯¹äºä¸Šå›¾ç³»ç»Ÿï¼Œå…¶ç³»ç»Ÿæ¨¡å‹ä¸º</p>
<script type="math/tex; mode=display">
\dot x = Ax + Bu</script><p>å…¶ä¸­ï¼Œxä¸ºå½“å‰çŠ¶æ€çš„é›†åˆï¼Œå¯¹äºå€’ç«‹æ‘†ï¼Œå…¶å¯ä»¥ä¸º{ä½ç½®ï¼Œé€Ÿåº¦ï¼Œè§’åº¦ï¼Œè§’é€Ÿåº¦}ï¼›uä¸ºæˆ‘ä»¬çš„æ§åˆ¶è¾“å…¥ï¼ŒAå’ŒBä¸ºç³»ç»Ÿå†³å®šçš„å‚æ•°ï¼Œç³»ç»Ÿæ¨¡å‹<strong>å»ºç«‹äº†xï¼ˆå½“å‰çŠ¶æ€ï¼‰ å’Œ x_dotï¼ˆçŠ¶æ€éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿ï¼‰ ä¹‹é—´çš„å…³ç³»</strong>ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªçŠ¶æ€åé¦ˆu=-Kxï¼Œå¸¦å…¥ç³»ç»Ÿæ–¹ç¨‹ä¸­åˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\dot x = (A-BK)x</script><p>ç”±äºAå’ŒBåœ¨LQRè®¾è®¡é˜¶æ®µæ˜¯å·²çŸ¥çŸ©é˜µï¼Œå› æ­¤æˆ‘ä»¬åªéœ€å¾—åˆ°ä¸€ä¸ªåˆé€‚çš„å¢ç›ŠçŸ©é˜µKï¼Œå³å¯å®ç°æœŸæœ›æ§åˆ¶</p>
<h2 id="LQRæ§åˆ¶ç›®æ ‡"><a href="#LQRæ§åˆ¶ç›®æ ‡" class="headerlink" title="LQRæ§åˆ¶ç›®æ ‡"></a>LQRæ§åˆ¶ç›®æ ‡</h2><p>ç›¸æ¯”äºPIDçš„å°½å¯èƒ½å‡å°è¯¯å·®ï¼ŒLQRå®šä¹‰äº†ä¸€ç§ä»£ä»·å‡½æ•°ï¼Œé€šè¿‡è®©è¯¥èƒ½é‡å‡½æ•°æœ€å°ä»¥å®ç°æœ€ä¼˜æ§åˆ¶ï¼š</p>
<img src="/images/loading.png" data-original="/2025/11/17/control-algorithm/3.png" class title="This is an image"> 
<p>å…¶ä¸­ï¼ŒQï¼ˆçŠ¶æ€æƒé‡çŸ©é˜µï¼‰å’ŒRï¼ˆæ§åˆ¶è¾“å…¥æƒé‡çŸ©é˜µï¼‰å³æ˜¯æˆ‘ä»¬çš„æœŸæœ›é—­ç¯æ€§èƒ½ï¼ˆä¹Ÿå°±æ˜¯è¦è°ƒçš„å‚æ•°ï¼‰ï¼Œå³å½“æ§åˆ¶ç›®æ ‡ç¡®å®šæ—¶ï¼Œæˆ‘ä»¬æƒ³è¦ç”¨æœ€å°çš„æ§åˆ¶ä»£ä»·uå¾—åˆ°æœ€ä¼˜çš„æ§åˆ¶ã€‚é€šå¸¸ï¼ŒQè¶Šå¤§ï¼Œç³»ç»Ÿç›¸åº”è¶Šå¿«ï¼›Rè¶Šå¤§ï¼Œæ§åˆ¶åŠ›æƒ©ç½šè¶Šå¤§ï¼ˆå³åŠ›ä½œç”¨è¶Šå¹³ç¨³æ¸©æŸ”ï¼‰</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ç¡®å®šäº†Aï¼ŒBï¼ŒQï¼ŒRï¼Œå¦‚ä½•æ ¹æ®â€œä»£ä»·å‡½æ•°æœ€å°â€è¿™ä¸ªç›®æ ‡å¾—åˆ°Kå‘¢ï¼Ÿ</p>
<p><a href="https://blog.csdn.net/qq_36133747/article/details/123413115">çº¿æ€§äºŒæ¬¡å‹è°ƒèŠ‚å™¨(LQR)åŸç†è¯¦è§£-CSDNåšå®¢</a></p>
<p>åœ¨å‡è®¾ç³»ç»Ÿç¨³å®šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªriccatié‡Œå¡ææ–¹ç¨‹ç”±â€œJæœ€å°â€è¿™ä¸ªæ¡ä»¶å¾—åˆ°ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„è¾…åŠ©çŸ©é˜µPï¼Œå†ç”±På¾—åˆ°Kï¼Œå¯¹äºæ±‚è§£é‡Œå¡ææ–¹ç¨‹ï¼Œmatlabï¼Œscipyéƒ½æä¾›äº†å¯¹åº”å‡½æ•°</p>
<h3 id="Qå’ŒRçš„é€‰æ‹©"><a href="#Qå’ŒRçš„é€‰æ‹©" class="headerlink" title="Qå’ŒRçš„é€‰æ‹©"></a>Qå’ŒRçš„é€‰æ‹©</h3><p>Qï¼šåŠæ­£å®šçŸ©é˜µï¼Œé€šå¸¸é€‰ç”¨å¯¹è§’çŸ©é˜µï¼Œå¯¹è§’çº¿å…ƒç´ è¡¨ç¤ºå„çŠ¶æ€çš„æƒé‡ï¼ˆå› æ­¤å½¢çŠ¶åº”ä¸ºnxnï¼Œnä¸ºçŠ¶æ€æ•°é‡ï¼‰ï¼Œå› æ­¤éœ€æ ¹æ®å„çŠ¶æ€çš„é‡è¦æ€§åˆ†é…æƒé‡ï¼›é‡ç‚¹å…³æ³¨çš„çŠ¶æ€åº”åˆ†é…è¾ƒå¤§æƒé‡ï¼›<strong>å¦‚æœç³»ç»Ÿå“åº”è¾ƒæ…¢ä¹Ÿå¯å¢åŠ Q</strong></p>
<p>Rï¼šæ­£å®šçŸ©é˜µï¼Œé€šå¸¸é€‰ç”¨å¯¹è§’çŸ©é˜µï¼Œå¯¹è§’çº¿å…ƒç´ è¡¨ç¤ºå„æ§åˆ¶è¾“å…¥çš„æƒé‡ï¼ˆå› æ­¤å½¢çŠ¶åº”ä¸ºmxmï¼Œmä¸ºæ§åˆ¶é‡ï¼‰ï¼›åˆå§‹åº”é€‰æ‹©è¾ƒå°å€¼ï¼›å¦‚æœ<strong>æ§åˆ¶è¾“å…¥å¹…åº¦è¾ƒå¤§åˆ™å¢åŠ R</strong>ï¼Œå¦‚æœ<strong>ç³»ç»Ÿå“åº”è¾ƒæ…¢åˆ™å‡å°R</strong></p>
<h2 id="å€’ç«‹æ‘†ä¸­çš„LQR"><a href="#å€’ç«‹æ‘†ä¸­çš„LQR" class="headerlink" title="å€’ç«‹æ‘†ä¸­çš„LQR"></a>å€’ç«‹æ‘†ä¸­çš„LQR</h2><h3 id="å»ºç«‹åŠ¨åŠ›å­¦æ–¹ç¨‹"><a href="#å»ºç«‹åŠ¨åŠ›å­¦æ–¹ç¨‹" class="headerlink" title="å»ºç«‹åŠ¨åŠ›å­¦æ–¹ç¨‹"></a>å»ºç«‹åŠ¨åŠ›å­¦æ–¹ç¨‹</h3><p>å¯¹äºæ¯ä¸ªå¹¿ä¹‰åæ ‡q_iï¼Œæ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\frac d {dt}(\frac{\part L}{\part \dot{q_i}})-\frac {\part L}{\part q_i} = Q_i</script><p>å…¶ä¸­ï¼ŒQ_iæ˜¯å¹¿ä¹‰åæ ‡q_iå¯¹åº”å¹¿ä¹‰åŠ›ã€‚åœ¨å€’ç«‹æ‘†ä¸­ï¼Œq={x,Î¸}ï¼Œåˆ™Q={F,0}ï¼ˆå› ä¸ºæ²¡æœ‰éä¿å®ˆåŠ›ç›´æ¥å¯¹æ‘†æ†åšåŠŸï¼‰</p>
<p>åˆ™åˆ†åˆ«å°†q_iæ›¿æ¢ä¸ºxå’ŒÎ¸ååˆ™å¯å¾—åˆ°å€’ç«‹æ‘†çš„åŠ¨åŠ›å­¦æ¨¡å‹ï¼ˆæ–¹ç¨‹ç»„ï¼‰ï¼š</p>
<script type="math/tex; mode=display">
(M + m)\ddot{x} + m l \ddot{\theta} \cos\theta - m l \dot{\theta}^2 \sin\theta = F</script><script type="math/tex; mode=display">
(m l^2 + I) \ddot{\theta}+m l \ddot{x} \cos\theta - m g l \sin\theta = 0</script><h3 id="çº¿æ€§åŒ–"><a href="#çº¿æ€§åŒ–" class="headerlink" title="çº¿æ€§åŒ–"></a>çº¿æ€§åŒ–</h3><p>ç”±äºç°åœ¨çš„åŠ¨åŠ›å­¦æ–¹ç¨‹æ˜¯éçº¿æ€§çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆå°†å…¶çº¿æ€§åŒ–ã€‚è€Œåœ¨å€’ç«‹æ‘†ä¸­ï¼Œå¹³è¡¡ç‚¹å³ä¸ºÎ¸=0(cosÎ¸=0,sinÎ¸=Î¸)ï¼Œåˆ™çº¿æ€§åŒ–åæœ‰ï¼š</p>
<script type="math/tex; mode=display">
(M + m)\ddot{x} + m l \ddot{\theta}  = F</script><script type="math/tex; mode=display">
(m l^2 + I) \ddot{\theta}+m l \ddot{x} - m g l \theta = 0</script><p>å°†å…¶è½¬æ¢ä¸ºçº¿æ€§ç³»ç»Ÿæ ‡å‡†æ¨¡å‹ï¼š</p>
<script type="math/tex; mode=display">
\dot x = Ax + Bu</script><p>åˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}\dot x \\ \ddot x \\\dot{\theta} \\ \ddot{\theta}\end{bmatrix}
=A
\begin{bmatrix} x \\ \dot x \\\theta \\ \dot{\theta}\end{bmatrix}+BF</script><p>å…¶ä¸­ï¼š</p>
<img src="/images/loading.png" data-original="/2025/11/17/control-algorithm/4.png" class title="This is an image"> 
<p>å¾—åˆ°Aï¼ŒBåï¼Œæˆ‘ä»¬ä»¤Q=diag(1,1,1,1)ï¼ŒR=1ï¼ˆéšä¾¿ç»™çš„ï¼‰ï¼Œå³å¯é€šè¿‡riccatiæ–¹ç¨‹å¾—åˆ°ä¸€ä¸ª1x4çŸ©é˜µKï¼Œæœ€ç»ˆå¾—åˆ°æˆ‘ä»¬çš„æ§åˆ¶è¾“å…¥ï¼š</p>
<script type="math/tex; mode=display">
u = -Kx</script><p>uå³ä¸ºå½“å‰çŠ¶æ€ä¸‹<strong><u>ä¿æŒå¹³è¡¡</u></strong>åº”æ–½åŠ çš„åŠ›Fï¼ˆä½¿ç³»ç»Ÿ<strong>ç¨³å®š</strong>åœ¨æœŸæœ›çŠ¶æ€ï¼‰</p>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºæœºæ¢°è‡‚çš„pybulletå®æˆ˜</title>
    <url>/2025/11/12/pybullet-practice/</url>
    <content><![CDATA[<p>æœ¬ç« ä½¿ç”¨pubulletå®Œæˆå¸¸è§„æœºå™¨äººå­¦ç›¸å…³è®¡ç®—ï¼Œä½¿ç”¨å…­è‡ªç”±åº¦æœºæ¢°è‡‚</p>
<h1 id="é…ç½®ä¸åˆå§‹åŒ–"><a href="#é…ç½®ä¸åˆå§‹åŒ–" class="headerlink" title="é…ç½®ä¸åˆå§‹åŒ–"></a>é…ç½®ä¸åˆå§‹åŒ–</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pybullet <span class="keyword">as</span> p</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pybullet_data</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">physicsCilent = p.connect(p.DIRECT)</span><br><span class="line"></span><br><span class="line">p.setAdditionalSearchPath(pybullet_data.getDataPath())</span><br><span class="line">p.configureDebugVisualizer(p.COV_ENABLE_RENDERING, <span class="number">0</span>)</span><br><span class="line">planeId = p.loadURDF(<span class="string">&quot;plane.urdf&quot;</span>)</span><br><span class="line">robotId = p.loadURDF(<span class="string">&#x27;E:/robo_prj/pybullet/examples/urdf/ur5.urdf&#x27;</span>,useFixedBase=<span class="literal">True</span>)  <span class="comment">#è®°å¾—å›ºå®šåŸºåº§</span></span><br><span class="line">p.setGravity(<span class="number">0</span>, <span class="number">0</span>, -<span class="number">9.8</span>)</span><br><span class="line">p.configureDebugVisualizer(p.COV_ENABLE_RENDERING, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">q0 = np.array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">q1 = np.array([-<span class="number">1.5</span>, -<span class="number">1.0</span>, <span class="number">1.0</span>, -<span class="number">1.57</span>, -<span class="number">1.57</span>, -<span class="number">1.57</span>])</span><br><span class="line"></span><br><span class="line">controllable_joints = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(p.getNumJoints(robotId)) <span class="keyword">if</span> p.getJointInfo(robotId, i)[<span class="number">2</span>] != p.JOINT_FIXED]</span><br><span class="line"></span><br><span class="line"><span class="comment">#################åˆå§‹åŒ–è§’åº¦##############################</span></span><br><span class="line">zero_vec = [<span class="number">0.0</span>] * <span class="built_in">len</span>(controllable_joints)</span><br><span class="line">kp = <span class="number">1.0</span></span><br><span class="line">kv = <span class="number">1.0</span></span><br><span class="line">p.setJointMotorControlArray(</span><br><span class="line">    robotId,</span><br><span class="line">    controllable_joints,</span><br><span class="line">    p.POSITION_CONTROL,</span><br><span class="line">    targetPositions=q1,</span><br><span class="line">    targetVelocities=zero_vec,</span><br><span class="line">    positionGains=[kp] * <span class="built_in">len</span>(controllable_joints),</span><br><span class="line">    velocityGains=[kv] * <span class="built_in">len</span>(controllable_joints)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):  <span class="comment"># to settle the robot to its position</span></span><br><span class="line">    p.stepSimulation()</span><br><span class="line"></span><br><span class="line">joint_state = p.getJointStates(robotId,controllable_joints)</span><br><span class="line">joint_theta = [i[<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> joint_state]</span><br><span class="line">joint_velocity = [i[<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> joint_state]</span><br><span class="line">joint_torque = [i[<span class="number">3</span>] <span class="keyword">for</span> i <span class="keyword">in</span> joint_state]</span><br><span class="line"><span class="comment">#########################################################</span></span><br></pre></td></tr></table></figure>
<p>è¯¥éƒ¨åˆ†ä»£ç å®Œæˆäº†æ¨¡å‹åŠ è½½ã€é‡åŠ›è®¾ç½®ã€éå†å¯è¿åŠ¨å…³èŠ‚ã€è®¾ç½®å½“å‰è§’åº¦ä¸ºq1å¹¶è®¡ç®—å…³èŠ‚è§’åŠå…¶ä¸€é˜¶äºŒé˜¶å¯¼</p>
<ul>
<li><code>controllable_joints = [i for i in range(p.getNumJoints(robotId)) if p.getJointInfo(robotId, i)[2] != p.JOINT_FIXED]</code>æ˜¯å¸¸ç”¨çš„éå†å¯è¿åŠ¨å…³èŠ‚çš„æ“ä½œ</li>
<li>å¯¹äºå½“å‰æƒ…å†µï¼Œæœºå™¨äººæ˜¯é™æ­¢çš„ï¼Œå› æ­¤å…³èŠ‚é€Ÿåº¦å’ŒåŠ é€Ÿåº¦éƒ½ä¸º0</li>
</ul>
<h1 id="è¿åŠ¨å­¦"><a href="#è¿åŠ¨å­¦" class="headerlink" title="è¿åŠ¨å­¦"></a>è¿åŠ¨å­¦</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">###############è¿åŠ¨å­¦æ­£è§£#################################</span></span><br><span class="line">link_state = p.getLinkState(robotId, controllable_joints[-<span class="number">1</span>])</span><br><span class="line">link_pos = link_state[<span class="number">0</span>]</span><br><span class="line">link_orn = link_state[<span class="number">1</span>] <span class="comment">#ç¬›å¡å°”åæ ‡å§¿æ€</span></span><br><span class="line">link_R = np.array(p.getMatrixFromQuaternion(link_orn)).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">link_T = np.eye(<span class="number">4</span>) <span class="comment">#é½æ¬¡å˜æ¢çŸ©é˜µ</span></span><br><span class="line">link_T[:<span class="number">3</span>, :<span class="number">3</span>] = link_R</span><br><span class="line">link_T[:<span class="number">3</span>, <span class="number">3</span>] = link_pos</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;q1ä¸‹æœ«ç«¯è´¨å¿ƒé½æ¬¡çŸ©é˜µä¸ºï¼š<span class="subst">&#123;link_T&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment">########################################################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###############è¿åŠ¨å­¦é€†è§£#################################</span></span><br><span class="line">joint_angle_solve = p.calculateInverseKinematics(robotId,</span><br><span class="line">                                                 controllable_joints[-<span class="number">1</span>],</span><br><span class="line">                                                 targetPosition = link_pos,</span><br><span class="line">                                                 targetOrientation = link_orn)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;q1ä¸‹è¿åŠ¨å­¦é€†è§£ä¸ºï¼š<span class="subst">&#123;joint_angle_solve&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment">########################################################</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>p.getLinkState</code>ä¼šè¿”å›æ‰€æŸ¥è¯¢å…³èŠ‚<strong>å¯¹åº”å­è¿æ†</strong>çš„ä½å§¿ç­‰ä¿¡æ¯</p>
<p>åœ¨pybulletä¸­ï¼Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">base â†’ joint0 â†’ link1 â†’ joint1 â†’ link2 â†’ joint2 â†’ link3</span><br></pre></td></tr></table></figure>
<p>å¯¹äºjoint2ï¼Œå…¶å­è¿æ†ä¸ºlink3ï¼Œçˆ¶è¿æ†ä¸ºlink2</p>
</li>
<li><p>é»˜è®¤çš„å§¿æ€è¡¨ç¤ºæ˜¯åŸºäºç¬›å¡å°”åæ ‡ç³»çš„ï¼Œpybulletæä¾›å…¶ä¸çŸ©é˜µã€æ¬§æ‹‰åæ ‡çš„è½¬æ¢api</p>
</li>
</ul>
<h1 id="é›…å¯æ¯”çŸ©é˜µç›¸å…³"><a href="#é›…å¯æ¯”çŸ©é˜µç›¸å…³" class="headerlink" title="é›…å¯æ¯”çŸ©é˜µç›¸å…³"></a>é›…å¯æ¯”çŸ©é˜µç›¸å…³</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#################é›…å¯æ¯”è®¡ç®—##############################</span></span><br><span class="line">J_v, J_w = p.calculateJacobian(robotId,</span><br><span class="line">                               controllable_joints[-<span class="number">1</span>],</span><br><span class="line">                               link_pos,</span><br><span class="line">                               joint_theta,</span><br><span class="line">                               zero_vec, zero_vec)</span><br><span class="line">J = np.concatenate((np.asarray(J_v),np.asarray(J_w)),axis=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;q1ä¸‹æœ«ç«¯çš„é›…å¯æ¯”çŸ©é˜µä¸º<span class="subst">&#123;J&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment">#######################################################</span></span><br></pre></td></tr></table></figure>
<p>pybulletæä¾›çš„é›…å¯æ¯”å‡½æ•°é»˜è®¤åˆ†å¼€è¿”å›çº¿é€Ÿåº¦é›…å¯æ¯”å’Œè§’é€Ÿåº¦é›…å¯æ¯”ï¼Œéœ€è¦è¾“å…¥æ‰€è®¡ç®—è¿æ†çš„ä½ç½®å’Œæ‰€æœ‰å…³èŠ‚çš„è½¬è§’ï¼Œå…³èŠ‚é€Ÿåº¦å’ŒåŠ é€Ÿåº¦é»˜è®¤0å³å¯ï¼ˆå½¢çŠ¶éœ€ä¸æœºå™¨äººè‡ªç”±åº¦DOFåŒ¹é…ï¼‰</p>
<h1 id="æœºæ¢°è‡‚æ§åˆ¶-é€†åŠ¨åŠ›å­¦"><a href="#æœºæ¢°è‡‚æ§åˆ¶-é€†åŠ¨åŠ›å­¦" class="headerlink" title="æœºæ¢°è‡‚æ§åˆ¶(é€†åŠ¨åŠ›å­¦)"></a>æœºæ¢°è‡‚æ§åˆ¶(é€†åŠ¨åŠ›å­¦)</h1><p>å¤§è‡´æµç¨‹ï¼š</p>
<ul>
<li>è§„åˆ’è½¨è¿¹ï¼Œå¾—åˆ°qï¼Œqdï¼Œqdd</li>
<li>é€†åŠ¨åŠ›å­¦è®¡ç®—ï¼ˆpybulletä½¿ç”¨ç‰›é¡¿æ¬§æ‹‰æ³•ï¼‰</li>
<li>æ§åˆ¶ç”µæœº</li>
</ul>
<p>é¦–å…ˆå®šä¹‰å¦‚ä¸‹è½¨è¿¹è§„åˆ’å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">getTrajectory</span>(<span class="params">thi, thf, tf, dt</span>):</span><br><span class="line">    desired_position, desired_velocity, desired_acceleration = [], [], []</span><br><span class="line">    t = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> t &lt;= tf:</span><br><span class="line">        th = thi + ((thf - thi) / tf) * (t - (tf / (<span class="number">2</span> * np.pi)) * np.sin((<span class="number">2</span> * np.pi / tf) * t))</span><br><span class="line">        dth = ((thf - thi) / tf) * (<span class="number">1</span> - np.cos((<span class="number">2</span> * np.pi / tf) * t))</span><br><span class="line">        ddth = (<span class="number">2</span> * np.pi * (thf - thi) / (tf * tf)) * np.sin((<span class="number">2</span> * np.pi / tf) * t)</span><br><span class="line">        desired_position.append(th)</span><br><span class="line">        desired_velocity.append(dth)</span><br><span class="line">        desired_acceleration.append(ddth)</span><br><span class="line">        t += dt</span><br><span class="line">    desired_position = np.array(desired_position)</span><br><span class="line">    desired_velocity = np.array(desired_velocity)</span><br><span class="line">    desired_acceleration = np.array(desired_acceleration)</span><br><span class="line">    <span class="keyword">return</span> desired_position, desired_velocity, desired_acceleration</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æ ¹æ®å§‹æœ«å…³èŠ‚è§’è§„åˆ’nä¸ªå…³èŠ‚ç©ºé—´ç‚¹</p>
<h2 id="ä½ç½®æ§åˆ¶"><a href="#ä½ç½®æ§åˆ¶" class="headerlink" title="ä½ç½®æ§åˆ¶"></a>ä½ç½®æ§åˆ¶</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sim_time = <span class="number">2</span></span><br><span class="line">dt = <span class="number">1e-3</span></span><br><span class="line">q,qd,qdd = getTrajectory(q0,q1,tf=sim_time,dt=dt)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸è®¾ç½®é˜»å°¼</span></span><br><span class="line"><span class="keyword">for</span> link_idx <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">    p.changeDynamics(robotId, link_idx, linearDamping=<span class="number">0.0</span>, angularDamping=<span class="number">0.0</span>, 								jointDamping=<span class="number">0.0</span>)</span><br><span class="line">    p.changeDynamics(robotId, link_idx, maxJointVelocity=<span class="number">200</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">n = <span class="number">0</span></span><br><span class="line">kp = <span class="number">1</span></span><br><span class="line">kv = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> n &lt; q.shape[<span class="number">0</span>]:</span><br><span class="line">	<span class="comment">#ä½ç½®æ§åˆ¶</span></span><br><span class="line">    p.setJointMotorControlArray(robotId,controllable_joints,p.POSITION_CONTROL,</span><br><span class="line">                                targetPositions = <span class="built_in">list</span>(q[n]),</span><br><span class="line">                                targetVelocities = <span class="built_in">list</span>(qd[n]),</span><br><span class="line">                                positionGains=[kp] * <span class="built_in">len</span>(controllable_joints),</span><br><span class="line">                                velocityGains=[kv] * <span class="built_in">len</span>(controllable_joints)</span><br><span class="line">                                )</span><br><span class="line">    p.stepSimulation()</span><br><span class="line">    <span class="built_in">print</span>(tau)</span><br><span class="line">    time.sleep(dt)</span><br><span class="line">    n += <span class="number">1</span></span><br><span class="line">p.disconnect()</span><br></pre></td></tr></table></figure>
<p>æŸ¥é˜…å®˜æ–¹æ‰‹å†Œå¯çŸ¥ï¼Œè¾“å…¥æ¨¡å¼ä¸º<code>p.POSITION_CONTROL</code>æ—¶ï¼Œè¯¯å·®å‡½æ•°å¦‚å›¾ï¼š</p>
<img src="/images/loading.png" data-original="/2025/11/12/pybullet-practice/1.png" class title="This is an image"> 
<p>å› æ­¤ï¼Œä¸ºè¾¾åˆ°æœ€ä½³æ§åˆ¶æ•ˆæœï¼Œæˆ‘ä»¬æœ€å¥½é¢å¤–è¾“å…¥è§’é€Ÿåº¦é¡¹ï¼Œä¹Ÿå°±æ˜¯qd</p>
<h2 id="é€Ÿåº¦æ§åˆ¶"><a href="#é€Ÿåº¦æ§åˆ¶" class="headerlink" title="é€Ÿåº¦æ§åˆ¶"></a>é€Ÿåº¦æ§åˆ¶</h2><p>åªéœ€å°†æ§åˆ¶ç”µæœºå‡½æ•°æ”¹ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p.setJointMotorControlArray(robotId,controllable_joints,p.VELOCITY_CONTROL,</span><br><span class="line">                            targetVelocities = <span class="built_in">list</span>(qd[n]),</span><br><span class="line">                            forces = [<span class="number">200</span>]*<span class="built_in">len</span>(controllable_joints),</span><br><span class="line">                            )</span><br></pre></td></tr></table></figure>
<p>ç”±è¯¯å·®å‡½æ•°å¯çŸ¥ï¼Œå•é€Ÿåº¦é¡¹æ§åˆ¶éå¸¸ç®€å•ï¼Œå› æ­¤å…¶æ•ˆæœä¹Ÿä¸å¥½ï¼Œä¸€èˆ¬åœ¨æœºæ¢°è‡‚ä¸­ä¸ä½¿ç”¨</p>
<h2 id="åŠ›æ§åˆ¶"><a href="#åŠ›æ§åˆ¶" class="headerlink" title="åŠ›æ§åˆ¶"></a>åŠ›æ§åˆ¶</h2><h3 id="ç®€å•ç‰ˆ"><a href="#ç®€å•ç‰ˆ" class="headerlink" title="ç®€å•ç‰ˆ"></a>ç®€å•ç‰ˆ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p.setPhysicsEngineParameter(fixedTimeStep=dt, numSolverIterations=<span class="number">100</span>, numSubSteps=<span class="number">10</span>)</span><br><span class="line"><span class="comment">#é‡è¦ï¼Œæ­¤å¤„fixedTimeStepåº”ä¸getTrajectoryå’Œp.setTimeStep(dt)ä¸€è‡´ï¼ï¼ï¼ï¼</span></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="comment">#åˆå§‹åŒ–åŠ›æ§åˆ¶</span></span><br><span class="line">p.setJointMotorControlArray(robotId,controllable_joints,p.VELOCITY_CONTROL,</span><br><span class="line">                            forces = [<span class="number">0</span>]*<span class="built_in">len</span>(controllable_joints))</span><br><span class="line">n = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> n &lt; q.shape[<span class="number">0</span>]:</span><br><span class="line"></span><br><span class="line">    tau = p.calculateInverseDynamics(robotId,<span class="built_in">list</span>(q[n]),<span class="built_in">list</span>(qd[n]),<span class="built_in">list</span>(qdd[n]))</span><br><span class="line">    p.setJointMotorControlArray(robotId,controllable_joints,p.TORQUE_CONTROL,</span><br><span class="line">                                forces = tau,</span><br><span class="line">                                )</span><br><span class="line">    p.stepSimulation()</span><br><span class="line">    <span class="built_in">print</span>(tau)</span><br><span class="line">    time.sleep(dt)</span><br><span class="line">    n += <span class="number">1</span></span><br><span class="line">p.disconnect()</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨æ­¤ä¹‹å‰ä½¿ç”¨è¿‡ä½ç½®æ§åˆ¶ï¼Œéœ€è¦å…ˆè¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–åŠ›æ§åˆ¶ï¼ˆä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰ï¼Œç„¶åå°±æ˜¯ä¸€å®šè¦æ³¨æ„åœ¨åˆ›å»ºç¯å¢ƒæ—¶ä½¿ç”¨å¦‚ä¸‹ä»£ç ä¿è¯ç‰©ç†å¼•æ“è®¡ç®—ç¨³å®šæ€§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p.setTimeStep(dt)</span><br><span class="line">p.setPhysicsEngineParameter(fixedTimeStep=dt, numSolverIterations=<span class="number">100</span>, numSubSteps=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h3 id="å¸¦åé¦ˆç‰ˆ"><a href="#å¸¦åé¦ˆç‰ˆ" class="headerlink" title="å¸¦åé¦ˆç‰ˆ"></a>å¸¦åé¦ˆç‰ˆ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> n &lt; q.shape[<span class="number">0</span>]:</span><br><span class="line">    joint_states = p.getJointStates(robotId,controllable_joints)</span><br><span class="line">    q_actual = np.array([state[<span class="number">0</span>] <span class="keyword">for</span> state <span class="keyword">in</span> joint_states])</span><br><span class="line">    qd_actual = np.array([state[<span class="number">1</span>] <span class="keyword">for</span> state <span class="keyword">in</span> joint_states])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    q_e = q[n] - q_actual</span><br><span class="line">    qd_e = qd[n] - qd_actual</span><br><span class="line"></span><br><span class="line">    aq = qdd[n] + <span class="number">400</span> * q_e + <span class="number">40</span> * qd_e</span><br><span class="line"></span><br><span class="line">    tau = p.calculateInverseDynamics(robotId,<span class="built_in">list</span>(q_actual),<span class="built_in">list</span>(qd_actual),<span class="built_in">list</span>(aq))</span><br><span class="line">    p.setJointMotorControlArray(robotId,controllable_joints,p.TORQUE_CONTROL,</span><br><span class="line">                                forces = tau,</span><br><span class="line">                                )</span><br><span class="line">    p.stepSimulation()</span><br><span class="line">    <span class="built_in">print</span>(tau)</span><br><span class="line">    time.sleep(dt)</span><br><span class="line">    n += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šï¼Œå¯¹äºé€†åŠ¨åŠ›å­¦æˆ–è€…<code>p.calculateInverseDynamics</code>å‡½æ•°æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æ„å»ºåŠ¨åŠ›å­¦æ–¹ç¨‹æ—¶ï¼Œéƒ½åº”è¯¥ä½¿ç”¨ç³»ç»Ÿ<strong>å½“å‰</strong>ä½ç½®ã€<strong>å½“å‰</strong>é€Ÿåº¦å’Œ<strong>æœŸæœ›</strong>åŠ é€Ÿåº¦ï¼Œå› ä¸ºåœ¨æœºå™¨äººæ§åˆ¶ç³»ç»Ÿä¸­ï¼Œ<strong><u>åŠ é€Ÿåº¦é¡¹æ‰æ˜¯çœŸæ­£çš„å”¯ä¸€å‰é¦ˆé¡¹</u></strong>ï¼Œè€Œè¦æ„å»ºåŠ¨åŠ›å­¦æ–¹ç¨‹ä¸­çš„Mï¼ŒCï¼ŒGçŸ©é˜µåˆ™éœ€è¦<strong>å½“å‰</strong>ç³»ç»Ÿçš„ä½ç½®å’Œé€Ÿåº¦ï¼ˆå³q_actualï¼Œqd_actualå†³å®šåŠ¨åŠ›å­¦æ–¹ç¨‹å†…å®¹ï¼Œaqæ ¹æ®å½“å‰åŠ¨åŠ›å­¦æ–¹ç¨‹è¾“å‡º<strong>åœ¨æˆ‘ä»¬æœŸæœ›çš„åŠ é€Ÿåº¦ä¸‹å¯¹åº”çš„å…³èŠ‚åŠ›</strong>ï¼Œä»¥è½¦ä¸ºä¾‹ï¼Œå³æˆ‘ä»¬è¦æ§åˆ¶è½¦é€Ÿï¼Œæœ€ç»ˆåªèƒ½é€šè¿‡æ”¹å˜åŠ é€Ÿåº¦æ¥æ§åˆ¶ï¼Œè€Œè¦è¾¾åˆ°æœŸæœ›åŠ é€Ÿåº¦ï¼Œæˆ‘ä»¬å°±éœ€è¦æ„å»ºåŠ¨åŠ›å­¦æ–¹ç¨‹å°†æœŸæœ›åŠ é€Ÿåº¦æ˜ å°„åˆ°ç”µæœºè¾“å‡ºåŠ›ä¸Šï¼‰</p>
<p>å› æ­¤æˆ‘ä»¬è‹¥è¦å¼•å…¥åé¦ˆæ§åˆ¶ï¼Œä¹Ÿåº”è¯¥<strong>ä»…å¯¹</strong>æœŸæœ›åŠ é€Ÿåº¦é¡¹è¿›è¡Œè°ƒæ•´ï¼Œå› æ­¤çœŸæ­£çš„åŠ¨åŠ›å­¦æ–¹ç¨‹æ‰æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tau = p.calculateInverseDynamics(robotId,<span class="built_in">list</span>(q_actual),<span class="built_in">list</span>(qd_actual),<span class="built_in">list</span>(aq))</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æœºå™¨äººå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>pybulletåŸºç¡€</title>
    <url>/2025/11/11/pybullet/</url>
    <content><![CDATA[<p>æ¥æºï¼š<a href="https://zhuanlan.zhihu.com/p/347177629">(PyBulletç¬”è®°ï¼ˆäºŒï¼‰ä»hello worldå¼€å§‹çš„æ‚è°ˆï¼ˆå¼•æ“è¿æ¥ï¼ŒURDFæ¨¡å‹åŠ è½½ï¼ŒæŸ¥çœ‹ä¿¡æ¯ï¼‰ - çŸ¥ä¹</a>ï¼Œå¼€æºå¥½äººä¸€ç”Ÿå¹³å®‰ï¼</p>
<h1 id="è¿æ¥å¼•æ“"><a href="#è¿æ¥å¼•æ“" class="headerlink" title="è¿æ¥å¼•æ“"></a>è¿æ¥å¼•æ“</h1><p>ä½¿ç”¨pybulletçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¿æ¥ç‰©ç†å¼•æ“ï¼Œæ•´ä¸ªpybulletçš„ç»“æ„å¯ä»¥ç†è§£ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯å‘é€æŒ‡ä»¤ï¼ŒæœåŠ¡ç«¯æ¥æ‰§è¡Œã€‚ä¸ºäº†<u>è®©æˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ç¼–å†™çš„è„šæœ¬èƒ½å¤Ÿè¢«è§£é‡Š</u>ï¼Œå¹¶åœ¨ç‰©ç†å¼•æ“è¿è¡Œæ•´ä¸ªç¯å¢ƒï¼Œéœ€è¦ä½¿ç”¨pybulletçš„connectæ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pybullet <span class="keyword">as</span> p</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pybullet_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥ç‰©ç†å¼•æ“</span></span><br><span class="line">physicsCilent = p.connect(p.GUI)</span><br></pre></td></tr></table></figure>
<p>connectå‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨ç”¨æˆ·é€‰æ‹©è¿æ¥çš„ç‰©ç†å¼•æ“æœåŠ¡å™¨ï¼ˆ<strong>physics server</strong>ï¼‰ï¼Œå¯é€‰çš„æœ‰<code>pybullet.GUI</code>å’Œ<code>pybullet.DIRECT</code> ï¼Œè¿”å›ä¸€ä¸ªæ•°å­—ä»£è¡¨æœåŠ¡å™¨çš„IDã€‚è¿™ä¸¤ä¸ªç‰©ç†å¼•æ“æ‰§è¡Œçš„å†…å®¹ï¼Œè¿”å›çš„ç»“æœç­‰æ–¹é¢å®Œå…¨ä¸€è‡´ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯ï¼Œ<u>GUIå¯ä»¥å®æ—¶æ¸²æŸ“åœºæ™¯åˆ°guiä¸Šï¼Œè€ŒDIRECTåˆ™ä¸ä¼šä¸”ä¸å…è®¸ç”¨æˆ·è°ƒç”¨å†…ç½®çš„æ¸²æŸ“å™¨</u>ï¼Œï¼ˆå³ä¸è¿›è¡Œç”»é¢æ¸²æŸ“ç­‰å¯è§†åŒ–ï¼Œåœ¨RLè®­ç»ƒæ—¶ï¼Œè¿™äº›ä¸å¿…è¦æ“ä½œä¼šä½¿è®­ç»ƒå˜æ…¢ï¼‰ä¹Ÿä¸å…è®¸ç”¨æˆ·è°ƒç”¨å¤–éƒ¨çš„openGLï¼ŒVRä¹‹ç±»çš„ç¡¬ä»¶ç‰¹å¾ã€‚</p>
<h2 id="å…³é—­æœåŠ¡å™¨ï¼ˆå¼•æ“ï¼‰"><a href="#å…³é—­æœåŠ¡å™¨ï¼ˆå¼•æ“ï¼‰" class="headerlink" title="å…³é—­æœåŠ¡å™¨ï¼ˆå¼•æ“ï¼‰"></a>å…³é—­æœåŠ¡å™¨ï¼ˆå¼•æ“ï¼‰</h2><p>ä¸gymæ“ä½œç›¸åŒï¼Œå­˜åœ¨ä¸€ä¸ªæ–­å¼€ä¸æœåŠ¡å™¨è¿æ¥çš„å‡½æ•°ï¼š<code>p.disconnect()</code></p>
<h1 id="è°ƒè¯•é…ç½®"><a href="#è°ƒè¯•é…ç½®" class="headerlink" title="è°ƒè¯•é…ç½®"></a>è°ƒè¯•é…ç½®</h1><h2 id="uiç•Œé¢é…ç½®"><a href="#uiç•Œé¢é…ç½®" class="headerlink" title="uiç•Œé¢é…ç½®"></a>uiç•Œé¢é…ç½®</h2><p>åœ¨ä½¿ç”¨GUIå¼•æ“æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æ“ä½œå¯¹æ¸²æŸ“uiç•Œé¢è¿›è¡Œé…ç½®ï¼ˆå¦‚ä¸æ˜¾ç¤ºç•Œé¢çš„æ§ä»¶ã€ç¦ç”¨cpuæ ¸æ˜¾æ¸²æŸ“ç­‰ï¼‰è¿™äº›æ“ä½œé€šå¸¸éƒ½é€šè¿‡<code>p.configureDebugVisualizer(..., 0 or 1)</code>å®ç°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p.configureDebugVisualizer(p.COV_ENABLE_GUI, <span class="number">0</span>)</span><br><span class="line">p.configureDebugVisualizer(p.COV_ENABLE_TINY_RENDERER, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h3 id="ç»˜åˆ¶è¾…åŠ©çº¿"><a href="#ç»˜åˆ¶è¾…åŠ©çº¿" class="headerlink" title="ç»˜åˆ¶è¾…åŠ©çº¿"></a>ç»˜åˆ¶è¾…åŠ©çº¿</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">froms = [[<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>]]</span><br><span class="line">tos = [[-<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>]]</span><br><span class="line"><span class="keyword">for</span> f, t <span class="keyword">in</span> <span class="built_in">zip</span>(froms, tos):</span><br><span class="line">    p.addUserDebugLine(</span><br><span class="line">        lineFromXYZ=f,</span><br><span class="line">        lineToXYZ=t,</span><br><span class="line">        lineColorRGB=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        lineWidth=<span class="number">2</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ æ–‡å­—"><a href="#æ·»åŠ æ–‡å­—" class="headerlink" title="æ·»åŠ æ–‡å­—"></a>æ·»åŠ æ–‡å­—</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p.addUserDebugText(</span><br><span class="line">    text=&quot;Destination&quot;,</span><br><span class="line">    textPosition=[0, 1, 3],</span><br><span class="line">    textColorRGB=[0, 1, 0],</span><br><span class="line">    textSize=1.2,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ æ§ä»¶"><a href="#æ·»åŠ æ§ä»¶" class="headerlink" title="æ·»åŠ æ§ä»¶"></a>æ·»åŠ æ§ä»¶</h3><p>æ­¤å¤„ä¸ºåœ¨debugç•Œé¢æ·»åŠ æœºå™¨äººæŸå…³èŠ‚çš„è¿åŠ¨æ§åˆ¶ï¼Œ<code>p.addUserDebugParameter</code>ä¼šè¿”å›æ§ä»¶idï¼Œç”¨<code>p.readUserDebugParameter</code>å³å¯è¯»å–è¯¥idå¯¹åº”å…·ä½“å€¼</p>
<p>æ³¨ï¼šå½“rangeMin&gt;rangeMaxæ—¶ï¼Œæ§ä»¶ä¼šä»é»˜è®¤æ»‘å—å˜ä¸ºæŒ‰é’®ï¼ŒæŒ‰æŒ‰é’®çš„æ¬¡æ•°ä¼šæ”¾åæ˜ ä¸º<strong>ç´¯åŠ å€¼</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">v_id = p.addUserDebugParameter(</span><br><span class="line">    paramName=<span class="string">&quot;V&quot;</span>,</span><br><span class="line">    rangeMin=-<span class="number">50</span>,</span><br><span class="line">    rangeMax=<span class="number">50</span>,</span><br><span class="line">    startValue=<span class="number">0</span></span><br><span class="line">)</span><br><span class="line">f_id = p.addUserDebugParameter(</span><br><span class="line">    paramName=<span class="string">&quot;F&quot;</span>,</span><br><span class="line">    rangeMin=-<span class="number">10</span>,</span><br><span class="line">    rangeMax=<span class="number">10</span>,</span><br><span class="line">    startValue=<span class="number">0</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">p.setJointMotorControl2(    bodyUniqueId=robot_id,</span><br><span class="line">                            jointIndices=joint_id,</span><br><span class="line">                            controlMode=p.VELOCITY_CONTROL,</span><br><span class="line">                            targetVelocities=p.readUserDebugParameter(v_id),</span><br><span class="line">                            forces=p.readUserDebugParameter(f_id))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ åˆæˆæ‘„åƒæœºè§†è§’"><a href="#æ·»åŠ åˆæˆæ‘„åƒæœºè§†è§’" class="headerlink" title="æ·»åŠ åˆæˆæ‘„åƒæœºè§†è§’"></a>æ·»åŠ åˆæˆæ‘„åƒæœºè§†è§’</h3><p>ä½¿ç”¨<code>p.getCameraImage</code>è·å–uiç•Œé¢å·¦ä¾§ä¸‰ä¸ªçª—å£çš„è§†è§’ï¼Œä¸å…·ä½“å±•å¼€äº†ï¼Œç”¨åˆ°äº†å†è¯´</p>
<h3 id="ç§»é™¤debugé…ç½®"><a href="#ç§»é™¤debugé…ç½®" class="headerlink" title="ç§»é™¤debugé…ç½®"></a>ç§»é™¤debugé…ç½®</h3><ul>
<li>removeAllUserParametersï¼šç§»é™¤æ‰€æœ‰çš„æ»‘å—å’ŒæŒ‰é’®ç±»æ§ä»¶ã€‚</li>
<li>removeUserDebugItemï¼šæ¥å—ä¸€ä¸ªä»£è¡¨<strong>debug text</strong>æˆ–<strong>debug line</strong>çš„IDï¼Œå¹¶ç§»é™¤è¯¥IDçš„debug textæˆ–è€…debug line</li>
<li>removeAllUserDebugItemsï¼šç§»é™¤æ‰€æœ‰çš„debug textå’Œdebug line</li>
</ul>
<h2 id="è·å–é”®ç›˜ã€é¼ æ ‡äº‹ä»¶"><a href="#è·å–é”®ç›˜ã€é¼ æ ‡äº‹ä»¶" class="headerlink" title="è·å–é”®ç›˜ã€é¼ æ ‡äº‹ä»¶"></a>è·å–é”®ç›˜ã€é¼ æ ‡äº‹ä»¶</h2><ul>
<li><p>getKeyboardEventsï¼šé»˜è®¤æ— è¾“å…¥å³å¯ï¼Œèƒ½å¤Ÿè¿”å›ä¸€ä¸ª<strong>å­—å…¸</strong>ï¼Œå­—å…¸ä¸­ä¸ºå½“å‰æ—¶åˆ»è¢«æŒ‰ä¸‹å»çš„æŒ‰é”®çš„IDï¼ˆkeyï¼‰ä»¥åŠå®ƒçš„çŠ¶æ€ï¼ˆvalueï¼‰ã€‚å…¶ä¸­ï¼Œä¸€èˆ¬çš„æŒ‰é”®çš„IDï¼ˆkeyï¼‰å°±æ˜¯å®ƒçš„å°å†™å­—æ¯Unicodeç ï¼Œè€Œvalueåˆ™å›ºå®šä¸ºä¸‰ç§çŠ¶æ€ï¼šKEY_IS_DOWN, KEY_WAS_TRIGGERED å’Œ KEY_WAS_RELEASEDã€‚KEY_WAS_TRIGGERED ä¼šåœ¨è¯¥æŒ‰é”®åˆšåˆšè¢«æŒ‰ä¸‹å»åè§¦å‘ï¼Œå¹¶å°†æŒ‰é’®çŠ¶æ€è®¾ä¸ºKEY_IS_DOWNï¼›åªè¦æŒ‰é”®è¢«ä¸€ç›´æŒ‰ç€ï¼Œé‚£ä¹ˆKEY_IS_DOWNå°±ä¼šä¸€ç›´è§¦å‘ï¼›æŒ‰é’®æ¾å¼€ï¼ŒKEY_WAS_RELEASEDä¼šè¢«è§¦å‘ã€‚</p>
<p>å½“æ— é”®ç›˜äº‹ä»¶æ—¶ï¼Œè¯¥å‡½æ•°è¿”å›ç©ºå­—å…¸ï¼ˆä¹Ÿå°±æ˜¯è¯´å½“æœ‰æŒ‰é”®è§¦å‘æ—¶ï¼Œè¿”å›ä¸€ä¸ª<code>â€œæŒ‰é”®â€:p.KEY_WAS_TRIGGERED</code></p>
<p>å¯¹äºç‰¹æ®ŠæŒ‰é”®çš„keyï¼Œå¦‚ä¸‹ï¼š</p>
</li>
<li><p>getMouseEventsï¼šè·å–é¼ æ ‡äº‹ä»¶ï¼ŒåŒ…æ‹¬ç§»åŠ¨å’Œç‚¹å‡»ï¼Œå…·ä½“ç”¨åˆ°äº†å†å±•å¼€</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>è¯´æ˜</th>
<th>æŒ‰é”®IDå¸¸é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>F1åˆ°F12</td>
<td>B3G_F1 â€¦ B3G_F12</td>
</tr>
<tr>
<td>ä¸Šä¸‹å·¦å³æ–¹å‘é”®</td>
<td>B3G_LEFT_ARROW, B3G_RIGHT_ARROW, B3G_UP_ARROW, B3G_DOWN_ARROW</td>
</tr>
<tr>
<td>åŒä¸€é¡µå‘ä¸Š/ä¸‹ï¼Œé¡µå°¾ï¼Œèµ·å§‹é¡µ</td>
<td>B3G_PAGE_UP, B3G_PAGE_DOWN, B3G_PAGE_END, B3G_HOME</td>
</tr>
<tr>
<td>åˆ é™¤ï¼Œæ’å…¥ï¼ŒAltï¼ŒShiftï¼ŒCtrlï¼ŒEnterï¼ŒBackspaceï¼Œç©ºæ ¼</td>
<td>B3G_DELETE, B3G_INSERT, B3G_ALT, B3G_SHIFT, B3G_CONTROL, B3G_RETURN, B3G_BACKSPACE, B3G_SPACE</td>
</tr>
</tbody>
</table>
</div>
<h1 id="åŠ è½½æ¨¡å‹"><a href="#åŠ è½½æ¨¡å‹" class="headerlink" title="åŠ è½½æ¨¡å‹"></a>åŠ è½½æ¨¡å‹</h1><h2 id="ç›´æ¥åŠ è½½urdfæ¨¡å‹"><a href="#ç›´æ¥åŠ è½½urdfæ¨¡å‹" class="headerlink" title="ç›´æ¥åŠ è½½urdfæ¨¡å‹"></a>ç›´æ¥åŠ è½½urdfæ¨¡å‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®ç¯å¢ƒé‡åŠ›åŠ é€Ÿåº¦</span></span><br><span class="line">p.setGravity(<span class="number">0</span>, <span class="number">0</span>, -<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½URDFæ¨¡å‹ï¼Œæ­¤å¤„æ˜¯åŠ è½½è“ç™½ç›¸é—´çš„é™†åœ°</span></span><br><span class="line">planeId = p.loadURDF(<span class="string">&quot;plane.urdf&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æœºå™¨äººï¼Œå¹¶è®¾ç½®åŠ è½½çš„æœºå™¨äººçš„ä½å§¿</span></span><br><span class="line">startPos = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">startOrientation = p.getQuaternionFromEuler([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">boxId = p.loadURDF(<span class="string">&quot;r2d2.urdf&quot;</span>, startPos, startOrientation)</span><br></pre></td></tr></table></figure>
<p>pybulletæä¾›äº†éå¸¸æ–¹ä¾¿çš„å‡½æ•°loadURDFæ¥åŠ è½½å¤–éƒ¨çš„urdfæ–‡ä»¶ï¼Œè¿”å›å€¼æ˜¯<strong>åˆ›å»ºçš„æ¨¡å‹å¯¹è±¡çš„ID</strong>ï¼ˆæ¯ä¸ªåŠ è½½çš„æ¨¡å‹åœ¨æœåŠ¡å™¨ä¸­éƒ½ä½¿ç”¨å”¯ä¸€çš„IDï¼‰ï¼Œæ¥å—çš„å‚æ•°æœ‰8ä¸ªï¼Œåªæœ‰ç¬¬ä¸€ä¸ªæ˜¯å¿…å¡«å‚æ•°ï¼ˆurdfæ–‡ä»¶ç»å¯¹è·¯å¾„ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæœºå™¨äººèµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªä¸ºèµ·å§‹å§¿æ€ï¼Œå¯¹äºå§¿æ€ï¼Œå¯ä»¥è°ƒç”¨<code>p.getQuaternionFromEuler</code>ä½¿ç”¨æ¬§æ‹‰è§’å®šä¹‰å…¶å§¿æ€</p>
<p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>p.resetBasePositionAndOrientation</code>é‡ç½®ä½å§¿</p>
<h2 id="é€šè¿‡3Dæ–‡ä»¶åˆ›å»ºæ¨¡å‹"><a href="#é€šè¿‡3Dæ–‡ä»¶åˆ›å»ºæ¨¡å‹" class="headerlink" title="é€šè¿‡3Dæ–‡ä»¶åˆ›å»ºæ¨¡å‹"></a>é€šè¿‡3Dæ–‡ä»¶åˆ›å»ºæ¨¡å‹</h2><p><code>createVisualShape</code>è´Ÿè´£åˆ›å»ºè§†è§‰æ¨¡å‹ï¼Œ<code>createCollisionShape</code>è´Ÿè´£åˆ›å»ºç¢°æ’ç®±æ¨¡å‹ï¼Œè€Œ<code>createMultiBody</code>åˆ™æ˜¯è´Ÿè´£å°†è§†è§‰æ¨¡å‹å’Œç¢°æ’ç®±æ¨¡å‹æ•´åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªå®Œæ•´çš„ç‰©ç†æ¨¡å‹å¯¹è±¡ï¼Œå¹¶å¯ä»¥åŠ å…¥ä¸€äº›é¢å¤–çš„å‚æ•°ï¼Œæ¯”å¦‚è´¨é‡ï¼Œè½¬åŠ¨æƒ¯é‡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºè¿‡ç¨‹ä¸­ä¸æ¸²æŸ“</span></span><br><span class="line">p.configureDebugVisualizer(p.COV_ENABLE_RENDERING, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè§†è§‰æ¨¡å‹å’Œç¢°æ’ç®±æ¨¡å‹æ—¶å…±ç”¨çš„ä¸¤ä¸ªå‚æ•°</span></span><br><span class="line">shift = [<span class="number">0</span>, -<span class="number">0.02</span>, <span class="number">0</span>]</span><br><span class="line">scale = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè§†è§‰å½¢çŠ¶</span></span><br><span class="line">visual_shape_id = p.createVisualShape(</span><br><span class="line">    shapeType=p.GEOM_MESH,</span><br><span class="line">    fileName=<span class="string">&quot;duck.obj&quot;</span>,</span><br><span class="line">    rgbaColor=[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">    specularColor=[<span class="number">0.4</span>, <span class="number">0.4</span>, <span class="number">0</span>],</span><br><span class="line">    visualFramePosition=shift,</span><br><span class="line">    meshScale=scale</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¢°æ’æ¨¡å‹</span></span><br><span class="line">collision_shape_id = p.createCollisionShape(</span><br><span class="line">    shapeType=p.GEOM_MESH,</span><br><span class="line">    fileName=<span class="string">&quot;duck_vhacd.obj&quot;</span>,</span><br><span class="line">    collisionFramePosition=shift,</span><br><span class="line">    meshScale=scale</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨createMultiBodyå°†ä¸¤è€…ç»“åˆåœ¨ä¸€èµ·</span></span><br><span class="line">p.createMultiBody(</span><br><span class="line">    baseMass=<span class="number">1</span>,</span><br><span class="line">    baseCollisionShapeIndex=collision_shape_id,</span><br><span class="line">    baseVisualShapeIndex=visual_shape_id,</span><br><span class="line">    basePosition=[<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">    useMaximalCoordinates=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç»“æŸï¼Œé‡æ–°å¼€å¯æ¸²æŸ“</span></span><br><span class="line">p.configureDebugVisualizer(p.COV_ENABLE_RENDERING, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºåˆ›å»ºçš„æ‰€æœ‰æ¨¡å‹idï¼Œå‡å¯é‡å¤è°ƒç”¨ï¼Œå› æ­¤å¯ä»¥å¤šæ¬¡ä½¿ç”¨<code>p.createMultiBody</code>åˆ›å»ºå¤šä¸ªä¸€æ ·çš„é¸­å­</p>
<h1 id="å¼€å§‹æ¨¡æ‹Ÿ"><a href="#å¼€å§‹æ¨¡æ‹Ÿ" class="headerlink" title="å¼€å§‹æ¨¡æ‹Ÿ"></a>å¼€å§‹æ¨¡æ‹Ÿ</h1><h2 id="æ­¥è¿›æ¨¡æ‹Ÿ"><a href="#æ­¥è¿›æ¨¡æ‹Ÿ" class="headerlink" title="æ­¥è¿›æ¨¡æ‹Ÿ"></a>æ­¥è¿›æ¨¡æ‹Ÿ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¼€å§‹ä¸€åƒæ¬¡è¿­ä»£ï¼Œä¹Ÿå°±æ˜¯ä¸€åƒæ¬¡äº¤äº’ï¼Œæ¯æ¬¡äº¤äº’ååœé¡¿1/240</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">    p.stepSimulation()</span><br><span class="line">    time.sleep(<span class="number">1</span> / <span class="number">240</span>)</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨æ­£å‘åŠ¨åŠ›å­¦è¿›è¡Œæ­¥è¿›æ¨¡æ‹Ÿã€‚ç”±äºè®¡ç®—ä¸­æ¨¡æ‹Ÿç‰©ç†è¿‡ç¨‹è¿˜æ˜¯ç¦»æ•£å¾—æ¨¡æ‹Ÿçš„ï¼Œå› æ­¤ï¼Œä½¿ç”¨<code>stepSimulation</code>å¯ä»¥çœ‹æˆæ˜¯è¿›è¡Œä¸€æ¬¡è¿­ä»£æ­¥ã€‚å¯ä»¥ç†è§£ä¸ºgymä¸­çš„<code>env.step(action)</code>ï¼Œä½¿ç”¨<code>time.sleep</code>å¯ä»¥æ–¹ä¾¿è§‚å¯Ÿ</p>
<h2 id="å®æ—¶æ¨¡æ‹Ÿ"><a href="#å®æ—¶æ¨¡æ‹Ÿ" class="headerlink" title="å®æ—¶æ¨¡æ‹Ÿ"></a>å®æ—¶æ¨¡æ‹Ÿ</h2><p><code>setRealTimeSimulation</code>å‡½æ•°ç›´æ¥å°†ç‰©ç†å¼•æ“æ¸²æŸ“çš„æ—¶é—´å’ŒRTC(real time clock)åŒæ­¥ï¼Œè¿™æ ·åšï¼Œå°±ä¸éœ€è¦ä½¿ç”¨<code>stepSimualtion</code>æ˜¾å¼åœ°æ‰§è¡Œæ¨¡æ‹Ÿæ­¥äº†ã€‚å¼•æ“ä¼šæ ¹æ®RTCè‡ªåŠ¨æ‰§è¡Œæ¨¡æ‹Ÿæ­¥ã€‚è¿™å¯¹äºå®æ—¶å±•ç¤ºå¾ˆæœ‰åˆ©:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p.setRealTimeSimulation(<span class="number">1</span>)</span><br><span class="line">p.setTimeStep(<span class="number">1</span>/<span class="number">240</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h1 id="æŸ¥çœ‹æœºå™¨äººä¿¡æ¯"><a href="#æŸ¥çœ‹æœºå™¨äººä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æœºå™¨äººä¿¡æ¯"></a>æŸ¥çœ‹æœºå™¨äººä¿¡æ¯</h1><h2 id="ä½å§¿æŸ¥çœ‹"><a href="#ä½å§¿æŸ¥çœ‹" class="headerlink" title="ä½å§¿æŸ¥çœ‹"></a>ä½å§¿æŸ¥çœ‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è·å–ä½ç½®ä¸æ–¹å‘å››å…ƒæ•°</span></span><br><span class="line">cubePos, cubeOrn = p.getBasePositionAndOrientation(boxId)</span><br></pre></td></tr></table></figure>
<h2 id="å…³èŠ‚ä¿¡æ¯æŸ¥çœ‹"><a href="#å…³èŠ‚ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="å…³èŠ‚ä¿¡æ¯æŸ¥çœ‹"></a>å…³èŠ‚ä¿¡æ¯æŸ¥çœ‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">joint_num = p.getNumJoints(robot_id)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;r2d2çš„èŠ‚ç‚¹æ•°é‡ä¸ºï¼š&quot;</span>, joint_num)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;r2d2çš„ä¿¡æ¯ï¼š&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> joint_index <span class="keyword">in</span> <span class="built_in">range</span>(joint_num):</span><br><span class="line">    info_tuple = p.getJointInfo(robot_id, joint_index)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;å…³èŠ‚åºå·ï¼š<span class="subst">&#123;info_tuple[<span class="number">0</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            å…³èŠ‚åç§°ï¼š<span class="subst">&#123;info_tuple[<span class="number">1</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            å…³èŠ‚ç±»å‹ï¼š<span class="subst">&#123;info_tuple[<span class="number">2</span>]&#125;</span>\n\  #4è¡¨ç¤ºè¯¥å…³èŠ‚ä¸ºå›ºå®šå…³èŠ‚</span></span><br><span class="line"><span class="string">            æœºå™¨äººç¬¬ä¸€ä¸ªä½ç½®çš„å˜é‡ç´¢å¼•ï¼š<span class="subst">&#123;info_tuple[<span class="number">3</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            æœºå™¨äººç¬¬ä¸€ä¸ªé€Ÿåº¦çš„å˜é‡ç´¢å¼•ï¼š<span class="subst">&#123;info_tuple[<span class="number">4</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            ä¿ç•™å‚æ•°ï¼š<span class="subst">&#123;info_tuple[<span class="number">5</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            å…³èŠ‚çš„é˜»å°¼å¤§å°ï¼š<span class="subst">&#123;info_tuple[<span class="number">6</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            å…³èŠ‚çš„æ‘©æ“¦ç³»æ•°ï¼š<span class="subst">&#123;info_tuple[<span class="number">7</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            sliderå’Œrevolute(hinge)ç±»å‹çš„ä½ç§»æœ€å°å€¼ï¼š<span class="subst">&#123;info_tuple[<span class="number">8</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            sliderå’Œrevolute(hinge)ç±»å‹çš„ä½ç§»æœ€å¤§å€¼ï¼š<span class="subst">&#123;info_tuple[<span class="number">9</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            å…³èŠ‚é©±åŠ¨çš„æœ€å¤§å€¼ï¼š<span class="subst">&#123;info_tuple[<span class="number">10</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            å…³èŠ‚çš„æœ€å¤§é€Ÿåº¦ï¼š<span class="subst">&#123;info_tuple[<span class="number">11</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            èŠ‚ç‚¹åç§°ï¼š<span class="subst">&#123;info_tuple[<span class="number">12</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            å±€éƒ¨æ¡†æ¶ä¸­çš„å…³èŠ‚è½´ç³»ï¼š<span class="subst">&#123;info_tuple[<span class="number">13</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            çˆ¶èŠ‚ç‚¹frameçš„å…³èŠ‚ä½ç½®ï¼š<span class="subst">&#123;info_tuple[<span class="number">14</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            çˆ¶èŠ‚ç‚¹frameçš„å…³èŠ‚æ–¹å‘ï¼š<span class="subst">&#123;info_tuple[<span class="number">15</span>]&#125;</span>\n\</span></span><br><span class="line"><span class="string">            çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œè‹¥æ˜¯åŸºåº§è¿”å›-1ï¼š<span class="subst">&#123;info_tuple[<span class="number">16</span>]&#125;</span>\n\n&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>p.getNumJoints</code>è¿”å›å…³èŠ‚æ•°é‡ï¼Œ<code>p.getJointInfo</code>è¿”å›æŒ‡å®šå…³èŠ‚çš„ä¿¡æ¯</p>
<h1 id="æ§åˆ¶å…³èŠ‚ç”µæœº"><a href="#æ§åˆ¶å…³èŠ‚ç”µæœº" class="headerlink" title="æ§åˆ¶å…³èŠ‚ç”µæœº"></a>æ§åˆ¶å…³èŠ‚ç”µæœº</h1><p>pybulletä¸­æ§åˆ¶æœºå™¨äººå…³èŠ‚ç”µæœºçš„APIä¸»è¦æœ‰ä¸¤ä¸ªï¼š<code>setJointMotorControl2</code>ä¸<code>setJointMotorControlArray</code>ï¼Œè¿™ä¸¤ä¸ªçš„ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯å‰è€…è°ƒç”¨ä¸€æ¬¡åªèƒ½è®¾ç½®ä¸€å°å…³èŠ‚ç”µæœºçš„å‚æ•°ï¼Œåè€…è°ƒç”¨ä¸€æ¬¡åˆ™å¯ä»¥è®¾ç½®ä¸€ç»„å…³èŠ‚ç”µæœºçš„å‚æ•°ã€‚</p>
<ul>
<li><code>setJointMotorControl2</code>æœ‰ä¸‰ä¸ªå¿…é€‰å‚æ•°:ï¼ˆ<code>setJointMotorControlArray</code>å°†å¯¹åº”å‚æ•°æ›¿æ¢ä¸ºåˆ—è¡¨ï¼‰<ul>
<li>è¢«æ§æœºå™¨äººid</li>
<li>è¢«æ§å…³èŠ‚idï¼ˆå³å…³èŠ‚åºå·ç´¢å¼•info_tuple[0]ï¼‰</li>
<li>æ§åˆ¶æ¨¡å¼ï¼ˆå¯é€‰POSITION_CONTROL, VELOCITY_CONTROL, TORQUE_CONTROL and PD_CONTROLï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pybullet <span class="keyword">as</span> p</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pybullet_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥ç‰©ç†å¼•æ“</span></span><br><span class="line">physicsCilent = p.connect(p.GUI)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ èµ„æºè·¯å¾„</span></span><br><span class="line">p.setAdditionalSearchPath(pybullet_data.getDataPath())</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç¯å¢ƒé‡åŠ›åŠ é€Ÿåº¦</span></span><br><span class="line">p.setGravity(<span class="number">0</span>, <span class="number">0</span>, -<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½URDFæ¨¡å‹ï¼Œæ­¤å¤„æ˜¯åŠ è½½è“ç™½ç›¸é—´çš„é™†åœ°</span></span><br><span class="line">planeId = p.loadURDF(<span class="string">&quot;plane.urdf&quot;</span>)</span><br><span class="line">plane_Pos,_ = p.getBasePositionAndOrientation(planeId)</span><br><span class="line"><span class="comment"># åŠ è½½æœºå™¨äººï¼Œå¹¶è®¾ç½®åŠ è½½çš„æœºå™¨äººçš„ä½å§¿</span></span><br><span class="line">startPos = [<span class="number">0</span>, <span class="number">0</span>, plane_Pos[<span class="number">2</span>]+<span class="number">0.5</span>]</span><br><span class="line">startOrientation = p.getQuaternionFromEuler([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">boxId = p.loadURDF(<span class="string">&quot;r2d2.urdf&quot;</span>, startPos, startOrientation)</span><br><span class="line"></span><br><span class="line">available_joints_indexes = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(p.getNumJoints(boxId)) <span class="keyword">if</span> p.getJointInfo(boxId, i)[<span class="number">2</span>] != p.JOINT_FIXED]</span><br><span class="line">wheel_joints_indexes = [i <span class="keyword">for</span> i <span class="keyword">in</span> available_joints_indexes <span class="keyword">if</span> <span class="string">&quot;wheel&quot;</span> <span class="keyword">in</span> <span class="built_in">str</span>(p.getJointInfo(boxId, i)[<span class="number">1</span>])]</span><br><span class="line"></span><br><span class="line">target_v = <span class="number">10</span>                   <span class="comment"># ç”µæœºè¾¾åˆ°çš„é¢„å®šè§’é€Ÿåº¦ï¼ˆrad/sï¼‰</span></span><br><span class="line">max_force = <span class="number">10</span>                  <span class="comment"># ç”µæœºèƒ½å¤Ÿæä¾›çš„åŠ›ï¼Œè¿™ä¸ªå€¼å†³å®šäº†æœºå™¨äººè¿åŠ¨æ—¶çš„åŠ é€Ÿåº¦ï¼Œæƒ³ç¦ç”¨ç”µæœºç»™0å³å¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">    p.stepSimulation()</span><br><span class="line">    p.setJointMotorControlArray(</span><br><span class="line">        bodyUniqueId=boxId,</span><br><span class="line">        jointIndices=wheel_joints_indexes,</span><br><span class="line">        controlMode=p.VELOCITY_CONTROL,</span><br><span class="line">        targetVelocities=[target_v <span class="keyword">for</span> _ <span class="keyword">in</span> wheel_joints_indexes],</span><br><span class="line">        forces=[max_force <span class="keyword">for</span> _ <span class="keyword">in</span> wheel_joints_indexes]</span><br><span class="line">    )</span><br><span class="line">    time.sleep(<span class="number">1</span> / <span class="number">240</span>)         <span class="comment"># æ¨¡æ‹Ÿå™¨ä¸€ç§’æ¨¡æ‹Ÿè¿­ä»£240æ­¥</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–­å¼€è¿æ¥</span></span><br><span class="line">p.disconnect()</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“<strong>éœ€è¦ç”µæœºåè½¬æ—¶ï¼Œåº”è¯¥è®¾å®šé€Ÿåº¦ä¸ºè´Ÿå€¼ï¼Œè€ŒåŠ›ä»ä¸ºæ­£å€¼</strong></p>
<h1 id="ç›¸æœºè·Ÿè¸ª"><a href="#ç›¸æœºè·Ÿè¸ª" class="headerlink" title="ç›¸æœºè·Ÿè¸ª"></a>ç›¸æœºè·Ÿè¸ª</h1><p><code>p.resetDebugVisualizerCamera</code>é€šè¿‡è®¾ç½®ç›¸æœºæ¬§æ‹‰è§’ï¼Œå’Œå®æ—¶åæ ‡ï¼Œå¯ä»¥ä½¿å…¶è·Ÿè¸ªæœºå™¨äººä¸€èµ·è¿åŠ¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">location, _ = p.getBasePositionAndOrientation(boxId)</span><br><span class="line">p.resetDebugVisualizerCamera(</span><br><span class="line">    cameraDistance=<span class="number">3</span>,</span><br><span class="line">    cameraYaw=<span class="number">110</span>,</span><br><span class="line">    cameraPitch=-<span class="number">30</span>,</span><br><span class="line">    cameraTargetPosition=location</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³å®ç°æ›´å¤æ‚çš„è·Ÿè¸ªï¼ˆå¦‚æœºå™¨äººç¬¬ä¸€è§†è§’ï¼‰ï¼Œå¯ä»¥ç»“åˆ<code>p.getJointState(),p.getLinkState()</code>é€šè¿‡è·å–å¤šç§åæ ‡å®ç°</p>
<h1 id="çŠ¶æ€ä¿å­˜ä¸åŠ è½½"><a href="#çŠ¶æ€ä¿å­˜ä¸åŠ è½½" class="headerlink" title="çŠ¶æ€ä¿å­˜ä¸åŠ è½½"></a>çŠ¶æ€ä¿å­˜ä¸åŠ è½½</h1><ul>
<li>saveStateï¼šå°†ç›®å‰æ¨¡æ‹Ÿå™¨çš„çŠ¶æ€ä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œè®©è¿™æ®µç¨‹åºåé¢å¯ä»¥éšæ—¶è¯»å–å†…å­˜ä¸­çš„è¿™ä¸ªæ¨¡æ‹Ÿå™¨çŠ¶æ€ï¼Œç„¶åè½½å…¥è¿™ä¸ªå­˜æ¡£ï¼Œå› æ­¤saveStateåªéœ€è¦æŒ‡å®šæ¨¡æ‹Ÿå™¨ç¯å¢ƒIDï¼Œè¿”å›ä¸€ä¸ªçŠ¶æ€ID</li>
<li>saveBulletï¼šå°†çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œéœ€è¦æ¥å—æ¨¡æ‹Ÿå™¨IDå’Œè·¯å¾„</li>
<li>restoreStateï¼šè¯»å–çŠ¶æ€ï¼Œä¸Šè¿°ä¸¤ç§éƒ½ç”¨æ­¤æ–¹æ³•è¯»ï¼Œå…·ä½“ç”¨æ³•æœå®˜æ–¹æ–‡æ¡£</li>
</ul>
<h1 id="ç¢°æ’æ£€æµ‹"><a href="#ç¢°æ’æ£€æµ‹" class="headerlink" title="ç¢°æ’æ£€æµ‹"></a>ç¢°æ’æ£€æµ‹</h1><p>ä¸ºäº†ç®€åŒ–ç¢°æ’æ£€æµ‹ï¼Œé€šå¸¸ä½¿ç”¨è§„åˆ™çš„å‡ ä½•ç‰©ä½“ä»£æ›¿æœºå™¨äººå®é™…ç¢°æ’æ¨¡å‹ç”¨äºæ£€æµ‹ç¢°æ’ï¼Œåœ¨pybulletä¸­ï¼Œåˆ™ä½¿ç”¨AABBåŒ…å›´ç›’ä½œä¸ºä¸€ä¸ªç¢°æ’æ£€æµ‹çš„é•¿æ–¹ä½“ã€‚<u>AABBåŒ…å›´ç›’çš„å„æ¡è¾¹éƒ½ä¸åæ ‡è½´å¹³è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦é€‰å–ä¸¤ä¸ªä½äºä½“å¯¹è§’çº¿ä¸Šçš„ç‚¹å°±å¯ä»¥ç¡®å®šè¿™ä¸ªé•¿æ–¹ä½“</u>ï¼Œå¹¶ä¸”å½“ä¸€ä¸ªç‚¹ä½äºè¿™ä¸¤ç‚¹ä¹‹é—´æ—¶ï¼Œåˆ™å¯ä»¥è§†ä½œå‘ç”Ÿç¢°æ’</p>
<ul>
<li><p><code>getAABB</code>:é»˜è®¤è¿”å›åŸºäºä¸–ç•Œåæ ‡ç³»çš„ï¼ŒæŒ‡å®šæœºå™¨äººçš„AABBå¯¹è§’ç‚¹ï¼ˆä¸¤ä¸ªtupleï¼‰</p>
</li>
<li><p><code>getOverlappingObjects</code>:è¾“å…¥AABBå¯¹è§’ç‚¹ï¼Œè¿”å›ä¸è¿™ä¸ªAABBæ¨¡å‹å‘ç”Ÿç¢°æ’çš„æ¨¡å‹idå’Œå¯¹åº”å…·ä½“linkçš„id</p>
<p>æ³¨ï¼šå…¶è¿”å›çš„æ˜¯nä¸ªäºŒå…ƒtupleï¼Œå½“æœªå‘ç”Ÿç¢°æ’æ—¶ï¼Œå§‹ç»ˆè¿”å›((1,-1),)ï¼Œä»£è¡¨æ¨¡å‹è‡ªå·±ä¸è‡ªå·±é‡åˆï¼ŒåŸºäºè¿™ä¸ªæœºåˆ¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•åˆ¤æ–­æ˜¯å¦ç¢°æ’ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    p.stepSimulation()</span><br><span class="line">    P_min, P_max = p.getAABB(robot_id)</span><br><span class="line">    id_tuple = p.getOverlappingObjects(P_min, P_max)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(id_tuple) &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">for</span> ID, _ <span class="keyword">in</span> id_tuple:</span><br><span class="line">            <span class="keyword">if</span> ID == robot_id:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;hit happen! hit object is <span class="subst">&#123;p.getBodyInfo(ID)&#125;</span>&quot;</span>)</span><br><span class="line">    sleep(<span class="number">1</span> / <span class="number">240</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å…¶ä½™ç›¸å…³å‡½æ•°ï¼š</p>
<ul>
<li><code>getContactPoints</code>:è¿”å›ä¸ä¸€ä¸ªç‰©ä½“æ¥è§¦çš„æ‰€æœ‰æ¥è§¦ç‚¹</li>
<li><code>getClosestPoints</code>:è¿”å›ä¸¤ä¸ªç‰©ä½“è·ç¦»æœ€è¿‘çš„ç‚¹</li>
<li><code>setCollisionFilterGroupMask</code>:å¿½ç•¥æ¨¡å‹ä¸æ¨¡å‹ä¹‹é—´ç¢°æ’</li>
<li><code>setCollisionFilterPair</code>:å¿½ç•¥å…³èŠ‚ä¹‹é—´ç¢°æ’</li>
</ul>
]]></content>
      <tags>
        <tag>æœºå™¨äººå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ </title>
    <url>/2025/11/05/RL-1/</url>
    <content><![CDATA[<h1 id="å¼ºåŒ–å­¦ä¹ æ¦‚å¿µ"><a href="#å¼ºåŒ–å­¦ä¹ æ¦‚å¿µ" class="headerlink" title="å¼ºåŒ–å­¦ä¹ æ¦‚å¿µ"></a>å¼ºåŒ–å­¦ä¹ æ¦‚å¿µ</h1><p>å¼ºåŒ–å­¦ä¹ æ˜¯ä¸€ç§è§£å†³æ§åˆ¶ä»»åŠ¡ï¼ˆä¹Ÿç§°ä¸ºå†³ç­–é—®é¢˜ï¼‰çš„æ¡†æ¶ï¼Œé€šè¿‡æ„å»ºæ™ºèƒ½ä½“ï¼Œè¿™äº›æ™ºèƒ½ä½“é€šè¿‡ä¸ç¯å¢ƒäº’åŠ¨ã€è¯•é”™å¹¶æ¥æ”¶å¥–åŠ±ï¼ˆæ­£é¢æˆ–è´Ÿé¢ï¼‰ä½œä¸ºç‹¬ç‰¹çš„åé¦ˆæ¥ä»ç¯å¢ƒä¸­å­¦ä¹ ã€‚</p>
<h2 id="å¼ºåŒ–å­¦ä¹ æ¡†æ¶"><a href="#å¼ºåŒ–å­¦ä¹ æ¡†æ¶" class="headerlink" title="å¼ºåŒ–å­¦ä¹ æ¡†æ¶"></a>å¼ºåŒ–å­¦ä¹ æ¡†æ¶</h2><p>åœ¨ä¸‹å›¾ä¸­ï¼Œä»¥æœºå™¨äººä¸ºä¾‹ï¼Œagentåˆ™ä¸ºæœºå™¨äººçš„æ§åˆ¶ä¸­å¿ƒï¼Œenvironmentåˆ™å¯ä»¥ä¸ºæœºå™¨äººçš„å„ä¸ªå…³èŠ‚ç”µæœº</p>
<img src="/images/loading.png" data-original="/2025/11/05/RL-1/1.png" class title="This is an image"> 
<p>å½“æ§åˆ¶ä¸­å¿ƒï¼ˆagentï¼‰å¾—åˆ°å…³èŠ‚ç”µæœºï¼ˆenvironmentï¼‰0æ—¶åˆ»çš„è§’åº¦ï¼ˆstateï¼‰æ—¶ï¼Œä¼šæ§åˆ¶å…¶è¿›è¡Œè½¬åŠ¨ï¼ˆactionï¼‰ï¼Œåœ¨è½¬åŠ¨è¿‡åï¼Œt1æ—¶åˆ»ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„è§’åº¦ï¼Œå¦‚æœè¯¥è½¬è§’è¾¾åˆ°äº†é¢„æœŸï¼Œåˆ™ä¼šäº§ç”Ÿä¸€ä¸ªå¥–åŠ±ï¼ˆrewardï¼‰</p>
<p>å› æ­¤ï¼Œå¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡åº”è¯¥æ˜¯<strong>æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±</strong>ï¼Œç§°ä¸º<strong><u>é¢„æœŸå›æŠ¥</u></strong>çš„æœ€å¤§åŒ–</p>
<h3 id="çŠ¶æ€å’Œè§‚æµ‹ç©ºé—´"><a href="#çŠ¶æ€å’Œè§‚æµ‹ç©ºé—´" class="headerlink" title="çŠ¶æ€å’Œè§‚æµ‹ç©ºé—´"></a>çŠ¶æ€å’Œè§‚æµ‹ç©ºé—´</h3><ul>
<li>çŠ¶æ€ï¼ˆstateï¼‰æ˜¯å¯¹ä¸–ç•ŒçŠ¶æ€çš„å®Œæ•´æè¿°ï¼Œæ²¡æœ‰éšè—ä¿¡æ¯</li>
<li>è§‚æµ‹ï¼ˆobservationï¼‰æ˜¯å¯¹çŠ¶æ€çš„<strong>éƒ¨åˆ†æè¿°</strong></li>
</ul>
<h3 id="è¡ŒåŠ¨ç©ºé—´"><a href="#è¡ŒåŠ¨ç©ºé—´" class="headerlink" title="è¡ŒåŠ¨ç©ºé—´"></a>è¡ŒåŠ¨ç©ºé—´</h3><p>è¡ŒåŠ¨ç©ºé—´æ˜¯ç¯å¢ƒä¸­æ‰€æœ‰å¯èƒ½è¡ŒåŠ¨ï¼ˆactionï¼‰çš„åˆé›†ï¼Œåˆ†ä¸ºç¦»æ•£å’Œè¿ç»­è¡ŒåŠ¨ã€‚</p>
<ul>
<li>ç¦»æ•£ç©ºé—´ï¼šå¯èƒ½çš„è¡ŒåŠ¨æ•°é‡æœ‰é™ï¼ˆä¾‹å¦‚æ¸¸æˆçš„ç§»åŠ¨åªæœ‰ä¸Šå·¦ä¸‹å³ï¼‰</li>
<li>è¿ç»­ç©ºé—´ï¼šå¯èƒ½çš„è¡ŒåŠ¨æ•°é‡æ— é™ï¼ˆä¾‹å¦‚æ±½è½¦çš„ç§»åŠ¨æ–¹å‘ï¼‰</li>
</ul>
<h3 id="å¥–åŠ±ä¸æŠ˜æ‰£"><a href="#å¥–åŠ±ä¸æŠ˜æ‰£" class="headerlink" title="å¥–åŠ±ä¸æŠ˜æ‰£"></a>å¥–åŠ±ä¸æŠ˜æ‰£</h3><p>å¼ºåŒ–å­¦ä¹ ä¸­çš„å”¯ä¸€åé¦ˆæ˜¯ç´¯ç§¯å¥–åŠ±ï¼Œè€Œåœ¨è¾ƒæ—©æ—¶é—´æ­¥ä¸Šå¥–åŠ±æ›´æœ‰å¯èƒ½å‘ç”Ÿï¼Œä¸ºäº†è¡¨è¾¾å¯¹ä¸åŒæ—¶é—´æ­¥å¥–åŠ±çš„å…³å¿ƒç¨‹åº¦ï¼Œåœ¨ç§¯ç´¯å¥–åŠ±ä¸­å¼•å…¥æŠ˜æ‰£ç‡gammaï¼š</p>
<script type="math/tex; mode=display">
R(\tau)=r_{t}+\gamma r_{t+1}+ \gamma^2 r_{t+2}+ \gamma^3r_{t+3}+...</script><p>gammaå¤§å¤šæ•°æƒ…å†µä»‹äº0.95ä¸0.99ä¹‹é—´ï¼Œè¶Šå¤§ä»£è¡¨æŠ˜æ‰£è¶Šå°ï¼Œå³<strong>æ›´å…³å¿ƒé•¿æœŸå¥–åŠ±</strong>ï¼Œåä¹‹æˆç«‹ã€‚</p>
<h3 id="ä»»åŠ¡ç±»å‹"><a href="#ä»»åŠ¡ç±»å‹" class="headerlink" title="ä»»åŠ¡ç±»å‹"></a>ä»»åŠ¡ç±»å‹</h3><ul>
<li>æƒ…æ™¯å¼ä»»åŠ¡ï¼šå­˜åœ¨èµ·å§‹ä¸ç»ˆç»“ç‚¹çš„ä»»åŠ¡</li>
<li>æŒç»­å¼ä»»åŠ¡ï¼šæ²¡æœ‰ç»ˆæ­¢çŠ¶æ€çš„ä»»åŠ¡</li>
</ul>
<h3 id="æ¢ç´¢ä¸åˆ©ç”¨"><a href="#æ¢ç´¢ä¸åˆ©ç”¨" class="headerlink" title="æ¢ç´¢ä¸åˆ©ç”¨"></a>æ¢ç´¢ä¸åˆ©ç”¨</h3><ul>
<li>åˆ©ç”¨ï¼šåˆ©ç”¨å·²çŸ¥ä¿¡æ¯æ¥æœ€å¤§åŒ–å¥–åŠ±</li>
<li>æ¢ç´¢ï¼šé€šè¿‡éšæœºè¡ŒåŠ¨æ¢ç´¢ç¯å¢ƒï¼Œè·å–æ›´å¤šçš„ä¿¡æ¯</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œæ¢ç´¢å°±æ˜¯é£é™©æ›´å¤§çš„è·å–å¥–åŠ±çš„æ–¹å¼ï¼Œç›¸æ¯”åˆ©ç”¨ï¼Œå¯èƒ½è·å¾—æ›´å¤§å¥–åŠ±ï¼Œä½†ä¹Ÿå¯èƒ½<strong>è·å¾—æ›´å¤§æƒ©ç½šï¼ˆè´Ÿå¥–åŠ±å€¼ï¼‰</strong>ï¼Œå› æ­¤ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ªæœ‰åŠ©äº<strong>æƒè¡¡äºŒè€…çš„è§„åˆ™</strong>ã€‚</p>
<h2 id="å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡"><a href="#å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡" class="headerlink" title="å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡"></a>å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡</h2><p>æˆ‘ä»¬éœ€è¦å¾—åˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å¾—åˆ°å½“å‰ç¯å¢ƒçŠ¶æ€ï¼ˆstateï¼‰æ—¶ï¼Œä¼šç»™å‡ºæœ€ä¼˜çš„è¡ŒåŠ¨ï¼ˆactionï¼‰</p>
<ul>
<li>åŸºäºç­–ç•¥çš„æ–¹æ³•ï¼šç›´æ¥å­¦ä¹ ä¸€ä¸ªç­–ç•¥å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†å®šä¹‰<strong>æ¯ä¸ªçŠ¶æ€åˆ°æœ€ä½³åŠ¨ä½œçš„ç›´æ¥æ˜ å°„ï¼ˆæˆ–æ¦‚ç‡åˆ†å¸ƒï¼‰</strong></li>
<li>åŸºäºä»·å€¼çš„æ–¹æ³•ï¼šå­¦ä¹ ä¸€ä¸ªä»·å€¼å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ¯ä¸ªçŠ¶æ€æ˜ å°„åˆ°å¯¹åº”çš„ä¸€ä¸ªé¢„æœŸä»·å€¼ï¼Œå› æ­¤è¡ŒåŠ¨ç­–ç•¥å³â€œèµ°å‘ä»·å€¼æœ€é«˜çš„çŠ¶æ€â€</li>
</ul>
<h1 id="Gymnasium"><a href="#Gymnasium" class="headerlink" title="Gymnasium"></a>Gymnasium</h1><p>Gymnasiumæ˜¯ä¸€ä¸ªç”¨äºå¼ºåŒ–å­¦ä¹ åˆ›å»ºç¯å¢ƒçš„åº“</p>
<p>Gymnasium çš„æ ¸å¿ƒæ˜¯ <code>Env</code>ï¼Œä¸€ä¸ªè¡¨ç¤ºå¼ºåŒ–å­¦ä¹ ç†è®ºä¸­é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰çš„é«˜çº§ Python ç±»ï¼ˆæ³¨æ„ï¼šè¿™ä¸æ˜¯ä¸€ä¸ªå®Œç¾çš„é‡æ„ï¼Œç¼ºå°‘ MDP çš„å‡ ä¸ªç»„ä»¶ï¼‰ã€‚è¯¥ç±»ä¸ºç”¨æˆ·æä¾›äº†å¼€å§‹æ–°æƒ…èŠ‚ã€é‡‡å–è¡ŒåŠ¨å’Œå¯è§†åŒ–æ™ºèƒ½ä½“å½“å‰çŠ¶æ€çš„èƒ½åŠ›ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gymnasium <span class="keyword">as</span> gym</span><br><span class="line"></span><br><span class="line">env = gym.make(<span class="string">&#x27;CartPole-v1&#x27;</span>) <span class="comment">#é€šè¿‡è°ƒç”¨makeå‡½æ•°è¿”å›ä¸€ä¸ªenvç±»ï¼Œæ­¤å¤„ä¸ºå€’ç«‹æ‘†ç¯å¢ƒ</span></span><br><span class="line">observation, info = env.reset() <span class="comment">#åˆå§‹åŒ–ç¯å¢ƒ</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ªå€’ç«‹æ‘†æ¨¡å‹ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>env.step()</code>å¯¹ç¯å¢ƒæ‰§è¡ŒåŠ¨ä½œï¼ˆactionï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="keyword">not</span> episode_over:</span><br><span class="line">    <span class="comment">#éšæœºåŠ¨ä½œï¼Œå¯¹äºå€’ç«‹æ‘†æ¥è¯´ï¼Œå…¶åŠ¨ä½œç©ºé—´åªæœ‰å·¦0æˆ–å³1ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶åŠ¨ä½œç©ºé—´ä¸ºç¦»æ•£ç©ºé—´ </span></span><br><span class="line">    action = env.action_space.sample()</span><br><span class="line">    observation, reward, terminated, truncated, info = env.step(action)</span><br><span class="line">    total_reward += reward</span><br><span class="line">    episode_over = terminated <span class="keyword">or</span> truncated</span><br></pre></td></tr></table></figure>
<p>å¯¹äºstepçš„è¿”å›å¦‚ä¸‹ï¼Œå¯¹äºæ¯ä¸ªç¯å¢ƒï¼Œå…¶è¿”å›çš„å„å…ƒç´ å…·ä½“å†…å®¹éƒ½ä¸åŒï¼š</p>
<ul>
<li><code>observation</code>ï¼šæ–°çŠ¶æ€ (st+1)ï¼Œå–å†³äºç¯å¢ƒï¼Œå¯¹äºå€’ç«‹æ‘†ï¼Œå…¶ä¸º(4,)ï¼Œåˆ†åˆ«ä¸ºå°è½¦ä½ç½®ã€é€Ÿåº¦ã€æ†è§’åº¦ã€è§’é€Ÿåº¦</li>
<li><code>reward</code>ï¼šæ‰§è¡ŒåŠ¨ä½œåè·å¾—çš„å¥–åŠ±</li>
<li><code>terminated</code>ï¼šæŒ‡å¥–åŠ±æ˜¯å¦åˆ°è¾¾é˜ˆå€¼</li>
<li><code>truncated</code>ï¼šæŒ‡ç¯å¢ƒæ˜¯å¦å› è¶…å‡ºè¾¹ç•Œè€Œç»“æŸï¼Œå¯¹äºå€’ç«‹æ‘†ï¼Œæ†è§’åº¦è¿‡å¤§ã€å°è½¦ä½ç½®è¶…å‡ºå±å¹•æˆ–æ—¶é—´åˆ°è¾¾ä¸Šé™éƒ½ä¼šç»“æŸ</li>
<li><code>info</code>ï¼šä¸€ä¸ªæä¾›é¢å¤–ä¿¡æ¯çš„å­—å…¸ï¼ˆå–å†³äºç¯å¢ƒï¼‰ã€‚</li>
</ul>
<h2 id="æœˆçƒè½¦å®è·µ"><a href="#æœˆçƒè½¦å®è·µ" class="headerlink" title="æœˆçƒè½¦å®è·µ"></a>æœˆçƒè½¦å®è·µ</h2><p>é¦–å…ˆåˆ›å»ºå¯¹åº”ç¯å¢ƒï¼Œå¯¹äºæœˆçƒè½¦ï¼Œå…¶å¥–åŠ±æ–¹æ¡ˆè¾ƒä¸ºå¤æ‚ï¼Œå…·ä½“å¯æŸ¥é˜…<a href="https://gymnasium.org.cn/environments/box2d/lunar_lander/">æœˆçƒç€é™†å™¨ - Gymnasium æ–‡æ¡£ - Gymnasium æ–‡æ¡£</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gymnasium <span class="keyword">as</span> gym</span><br><span class="line"></span><br><span class="line">lunar = gym.make(<span class="string">&quot;LunarLander-v3&quot;</span>)</span><br><span class="line">lunar.reset()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Observation Space Shape&quot;</span>, lunar.observation_space.shape) <span class="comment">#ç¯å¢ƒå½¢çŠ¶</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Sample observation&quot;</span>, lunar.observation_space.sample())<span class="comment">#éšæœºå–ä¸€ä¸ªç¯å¢ƒè§‚æµ‹å€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Action Space Shape&quot;</span>, lunar.action_space) <span class="comment">#åŠ¨ä½œç©ºé—´å½¢çŠ¶</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Action Space Sample&quot;</span>, lunar.action_space.sample()) <span class="comment">#éšæœºå–åŠ¨ä½œç©ºé—´</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ç¯å¢ƒã€å¯æ‰§è¡Œçš„åŠ¨ä½œä»¥åŠå¥–åŠ±ï¼Œå°±å·®å¼•å…¥agentè¿›è¡Œå¼ºåŒ–å­¦ä¹ ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥stable_baselines3åº“ä¸­çš„PPOæ·±åº¦å¼ºåŒ–å­¦ä¹ æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = sb3.PPO(<span class="string">&#x27;MlpPolicy&#x27;</span>, lunar, verbose=<span class="number">1</span>,device=<span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line"><span class="comment">#PPOç®—æ³•åœ¨cpuçš„è¡¨ç°ä¸Šæ›´å¥½</span></span><br><span class="line">model.learn(total_timesteps=<span class="number">1000000</span>)</span><br><span class="line">model.save(<span class="string">&quot;ppo&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå¼ºåŒ–å­¦ä¹ ï¼Œå…¶æ€»å­¦ä¹ æ—¶é•¿ä¸å†ç”±epochå†³å®šï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå…³é”®çš„è®­ç»ƒå‚æ•°ï¼š</p>
<ul>
<li><p>total_timestepsï¼šæŒ‡<strong>æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­</strong>æ¨¡å‹ä¸€å…±ä¼šä¸ç¯å¢ƒäº¤äº’å¤šå°‘ä¸ªæ—¶é—´æ­¥</p>
</li>
<li><p>n_stepï¼šæ¯ä¸ªrolloutçš„é•¿åº¦ï¼Œå¯ä»¥å°†å…¶<strong>ç†è§£ä¸ºè®­ç»ƒæ•°æ®é›†çš„å¤§å°</strong>ï¼Œåªä¸è¿‡åœ¨å¼ºåŒ–å­¦ä¹ ä¸­æ•°æ®é›†åœ¨ä¸æ–­æ›´æ–°ï¼Œæ•°æ®é›†æ›´æ–°æ¬¡æ•°ä¸º<code>total_timesteps\n_step</code></p>
<p>ï¼ˆæ³¨ï¼šå½“åœ¨rolloutçš„è¿‡ç¨‹ä¸­å¦‚æœç¯å¢ƒç»ˆæ­¢è€Œæ—¶é—´æ­¥æœªè¾¾åˆ°<code>n_step</code>ï¼Œåˆ™ä¼šç«‹å³resetç¯å¢ƒç»§ç»­é‡‡æ ·ï¼‰</p>
</li>
<li><p>batchsizeï¼šæ¯æ¬¡<strong>æ¢¯åº¦æ›´æ–°</strong>çš„æ•°æ®é•¿åº¦ï¼Œå³å°†<code>n_step</code>åˆ‡åˆ†ä¸º<code>n_step/batchsize</code>ä»½ï¼Œä¸å¸¸è§„æ·±åº¦å­¦ä¹ åŒç†</p>
</li>
<li><p>n_epochï¼šå¯¹äºæ¯ä¸ªæ•°æ®é›†ï¼Œå…¶éƒ½ä¼šé‡å¤åˆ©ç”¨<code>n_epoch</code>æ¬¡ï¼Œä½†æ¯æ¬¡æ•°æ®é›†éƒ½ä¼šè¢«æ‰“ä¹±</p>
</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæ·±åº¦å¼ºåŒ–å­¦ä¹ çš„è®­ç»ƒç›¸æ¯”äºä¸€èˆ¬æ·±åº¦å­¦ä¹ ï¼Œå¤šäº†ä¸€ä¸ªç±»ä¼¼â€œæ›´æ–°æ•°æ®é›†çš„æ“ä½œâ€ï¼ˆå³rolloutï¼‰ï¼Œé™¤æ­¤ä¹‹å¤–å…¶ä»–çš„æ“ä½œæ˜¯ç±»ä¼¼çš„</p>
<p><strong><u>ç”±äºç¬”è€…æš‚æ—¶æœªæ¥è§¦å…¶ä»–å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œå› æ­¤ä»¥ä¸Šç»“è®ºå‡åªé’ˆå¯¹PPO</u></strong></p>
<h3 id="å¯è§†åŒ–"><a href="#å¯è§†åŒ–" class="headerlink" title="å¯è§†åŒ–"></a>å¯è§†åŒ–</h3><p>åœ¨è®­ç»ƒå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ¨ç”»è§‚å¯Ÿæ¨¡å‹è®­ç»ƒæ•ˆæœï¼š<strong>ï¼ˆè®¾ç½®<code>render_mode=&quot;human&quot;</code>ï¼‰</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gymnasium <span class="keyword">as</span> gym</span><br><span class="line"><span class="keyword">from</span> stable_baselines3 <span class="keyword">import</span> PPO</span><br><span class="line"></span><br><span class="line">env = gym.make(<span class="string">&quot;LunarLander-v3&quot;</span>, render_mode=<span class="string">&quot;human&quot;</span>)</span><br><span class="line">model = PPO.load(<span class="string">&quot;ppo&quot;</span>, env=env,device=<span class="string">&quot;cpu&quot;</span>)</span><br><span class="line"></span><br><span class="line">obs, info = env.reset()</span><br><span class="line">total_reward = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):	<span class="comment">#éšä¾¿å–çš„å€¼ï¼Œå¯èƒ½ä¼šæ‰§è¡Œå¤šæ¬¡episode</span></span><br><span class="line">    action, _ = model.predict(obs, deterministic=<span class="literal">True</span>)</span><br><span class="line">    obs, reward, terminated, truncated, info = env.step(action)</span><br><span class="line">    total_reward += reward</span><br><span class="line">    <span class="keyword">if</span> terminated <span class="keyword">or</span> truncated:</span><br><span class="line">        obs, info = env.reset()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;episode reward:<span class="subst">&#123;total_reward&#125;</span>&quot;</span>)</span><br><span class="line">        total_reward = <span class="number">0</span></span><br><span class="line">env.close()</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨äººåŠ¨åŠ›å­¦</title>
    <url>/2025/10/22/robo-dynamic/</url>
    <content><![CDATA[<h1 id="é€Ÿåº¦ä¸é™åŠ›"><a href="#é€Ÿåº¦ä¸é™åŠ›" class="headerlink" title="é€Ÿåº¦ä¸é™åŠ›"></a>é€Ÿåº¦ä¸é™åŠ›</h1><h2 id="ä½ç½®çŸ¢é‡çš„å¾®åˆ†ï¼ˆçº¿é€Ÿåº¦çŸ¢é‡ï¼‰"><a href="#ä½ç½®çŸ¢é‡çš„å¾®åˆ†ï¼ˆçº¿é€Ÿåº¦çŸ¢é‡ï¼‰" class="headerlink" title="ä½ç½®çŸ¢é‡çš„å¾®åˆ†ï¼ˆçº¿é€Ÿåº¦çŸ¢é‡ï¼‰"></a>ä½ç½®çŸ¢é‡çš„å¾®åˆ†ï¼ˆçº¿é€Ÿåº¦çŸ¢é‡ï¼‰</h2><p>å¯¹äºä½ç½®çŸ¢é‡çš„é€Ÿåº¦å¯ä»¥çœ‹æˆæ˜¯ç”¨<strong>ä½ç½®çŸ¢é‡æè¿°çš„ç©ºé—´ä¸Š<u>ä¸€ç‚¹çš„é€Ÿåº¦</u></strong>ï¼Œå¦‚æœæƒ³åœ¨åæ ‡ç³»{A}è¡¨è¾¾ä¸€ä¸ª{B}ä¸­ä½ç½®çŸ¢é‡çš„é€Ÿåº¦ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
^A(^BV_Q)=\frac{^Ad}{dt} {^BQ} \Leftrightarrow \lim_{\Delta t \to 0} \frac{^A Q(t + \Delta t) - ^A Q(t)}{\Delta t}</script><p>å› ä¸ºæ—‹è½¬çŸ©é˜µå¯ä»¥è¡¨ç¤ºåæ ‡ç³»çš„æ˜ å°„ï¼Œå› æ­¤æœ‰ï¼š</p>
<script type="math/tex; mode=display">
^A(^BV_Q)=^A_BR{^BV_Q}</script><p>ç”±äºé€Ÿåº¦çŸ¢é‡ä¸ºè‡ªç”±çŸ¢é‡ï¼Œå› æ­¤ä¸éœ€è¦ä½¿ç”¨å¹³ç§»çŸ©é˜µå³å¯è¡¨è¾¾ã€‚å› æ­¤å½“æˆ‘ä»¬å·²çŸ¥ä¸€ä¸ªåæ ‡ç³»{A}åŸç‚¹åœ¨{W}ä¸­çš„é€Ÿåº¦è¡¨è¾¾æ—¶ï¼Œä¾¿å¯é€šè¿‡æ—‹è½¬çŸ©é˜µå¾—åˆ°å…¶åœ¨å…¶ä»–åæ ‡ç³»{B}ä¸‹çš„<strong>è¡¨è¾¾</strong>ï¼š</p>
<script type="math/tex; mode=display">
^B(^WV_{A_{org}})=^BV_{A_{org}}=^B_WR{^WV_{A_{org}}}=^W_BR^{-1}{^WV_{A_{org}}}</script><p>å¯ä»¥çœ‹å‡ºï¼Œä¸Šè¿°è®¡ç®—ä¸{A}æ— å…³</p>
<h2 id="è§’é€Ÿåº¦çŸ¢é‡"><a href="#è§’é€Ÿåº¦çŸ¢é‡" class="headerlink" title="è§’é€Ÿåº¦çŸ¢é‡"></a>è§’é€Ÿåº¦çŸ¢é‡</h2><p>çº¿é€Ÿåº¦æè¿°çš„æ˜¯ä¸€ä¸ªç‚¹çš„é€Ÿåº¦å±æ€§ï¼Œè€Œè§’é€Ÿåº¦åˆ™æè¿°äº†åˆšä½“çš„<strong>è‡ªè½¬</strong>è¿åŠ¨ï¼ˆåæ ‡ç³»å›ºè¿åœ¨åˆšä½“ä¸Šï¼‰</p>
<p>ç”±äºè‡ªè½¬è‚¯å®šæ˜¯ç»•ç€æŸä¸€è½´ï¼Œå› æ­¤å¯¹äº</p>
<script type="math/tex; mode=display">
^A\Omega_B</script><p>å…¶æ–¹å‘åˆ™ä»£è¡¨äº†{B}ç›¸å¯¹äº{A}çš„ç¬æ—¶æ—‹è½¬è½´çš„æ–¹å‘ï¼Œå¤§å°åˆ™è¡¨ç¤ºæ—‹è½¬é€Ÿåº¦</p>
<p>å¯¹äºçº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼Œæˆ‘ä»¬è§„å®šï¼š</p>
<script type="math/tex; mode=display">
v_A=^WV_{A_{org}}</script><script type="math/tex; mode=display">
\omega_A = ^W\Omega_A</script><h2 id="åˆšä½“ï¼ˆä¸Šä¸€ç‚¹ï¼‰çš„é€Ÿåº¦è¡¨è¾¾"><a href="#åˆšä½“ï¼ˆä¸Šä¸€ç‚¹ï¼‰çš„é€Ÿåº¦è¡¨è¾¾" class="headerlink" title="åˆšä½“ï¼ˆä¸Šä¸€ç‚¹ï¼‰çš„é€Ÿåº¦è¡¨è¾¾"></a>åˆšä½“ï¼ˆä¸Šä¸€ç‚¹ï¼‰çš„é€Ÿåº¦è¡¨è¾¾</h2><p>ä¸Šé¢æˆ‘ä»¬è®¨è®ºçš„çº¿é€Ÿåº¦ä¸è§’é€Ÿåº¦éƒ½æ˜¯é’ˆå¯¹äºåæ ‡ç³»çš„åŸç‚¹ï¼Œç°åœ¨è®¨è®ºåœ¨åˆšä½“ä¸­çš„æƒ…å†µã€‚</p>
<p>å‡è®¾å‚è€ƒåæ ‡ç³»ä¸º{A}ï¼Œå°†{B}å›ºè¿åœ¨ä¸€åˆšä½“ä¸Šï¼Œåˆšä½“ä¸Šå­˜åœ¨ä¸€ç‚¹Qï¼ˆä¸åœ¨åŸç‚¹ä¸Šï¼‰ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
^AV_Q=(^AV_{B_{org}}+^A_BR^BV_Q)+(^A\Omega_B \times^A_BR^BQ)</script><p>å‰ä¸€ä¸ªæ‹¬å·è¡¨ç¤ºçº¿é€Ÿåº¦é¡¹ï¼Œåä¸€ä¸ªè¡¨ç¤ºè§’é€Ÿåº¦é¡¹</p>
<h3 id="å…³äºçº¿é€Ÿåº¦ã€è§’é€Ÿåº¦å’Œåˆšä½“çš„é€Ÿåº¦"><a href="#å…³äºçº¿é€Ÿåº¦ã€è§’é€Ÿåº¦å’Œåˆšä½“çš„é€Ÿåº¦" class="headerlink" title="å…³äºçº¿é€Ÿåº¦ã€è§’é€Ÿåº¦å’Œåˆšä½“çš„é€Ÿåº¦"></a>å…³äºçº¿é€Ÿåº¦ã€è§’é€Ÿåº¦å’Œåˆšä½“çš„é€Ÿåº¦</h3><p>çº¿é€Ÿåº¦æè¿°çš„æ˜¯ç©ºé—´ä¸Š<strong>ä¸€ä¸ªç‚¹</strong>æ²¿æŸè½¨è¿¹è¿åŠ¨çš„å¿«æ…¢ä¸æ–¹å‘ï¼Œåœ¨åæ ‡ç³»ä¸­åˆ™ä¸ºä½ç½®çŸ¢é‡Q<strong>å‘ç”Ÿå˜åŒ–</strong>çš„å¤§å°ä¸æ–¹å‘ï¼›è€Œè§’åŠ é€Ÿåº¦é’ˆå¯¹çš„æ˜¯åæ ‡ç³»çš„è‡ªè½¬æƒ…å†µï¼›å°†è¿™ä¸¤ä¸ªæ¦‚å¿µå¼•å…¥åˆ°åˆšä½“ä¸­ï¼Œå¯¹äº<strong>åˆšä½“é€Ÿåº¦</strong>çš„æè¿°ï¼Œå³æ˜¯<u>åˆšä½“ä¸ŠæŸä¸€ç‚¹Qåœ¨å‚è€ƒåæ ‡ç³»{A}ä¸‹çš„<strong>åæ ‡å˜åŒ–æƒ…å†µä¸è‡ªè½¬æƒ…å†µ</strong></u>ï¼Œè¯´çš„æ›´å…¨é¢ä¸€ç‚¹ï¼Œå³æ˜¯ï¼šåœ¨{A}ä¸­è§‚æµ‹{B}ä¸­ä¸€ä½ç½®çŸ¢é‡Qçš„é€Ÿåº¦å˜åŒ–ï¼Œ{B}ä»£è¡¨è¿™ä¸ªåˆšä½“ï¼ŒQä»£è¡¨åˆšä½“ä¸Šä¸€ç‚¹</p>
<p>å¦å¤–ï¼Œç”±äºæˆ‘ä»¬é€šå¸¸éƒ½æ˜¯è®¨è®ºåˆšä½“ä¸Šçš„å›ºå®šä¸€ç‚¹ï¼Œå› æ­¤å…¶ä½ç½®çŸ¢é‡çš„å¾®åˆ†ä¸º0ï¼Œæ‰€ä»¥å…¶å®<strong>çº¿é€Ÿåº¦é¡¹</strong>å°±æ˜¯åæ ‡ç³»{B}åŸç‚¹çš„ç§»åŠ¨é€Ÿåº¦ï¼š</p>
<script type="math/tex; mode=display">
^AV_Q=^AV_{B_{org}}+(^A\Omega_B \times^A_BR^BQ)</script><h2 id="è¿æ†é—´çš„é€Ÿåº¦ä¼ é€’"><a href="#è¿æ†é—´çš„é€Ÿåº¦ä¼ é€’" class="headerlink" title="è¿æ†é—´çš„é€Ÿåº¦ä¼ é€’"></a>è¿æ†é—´çš„é€Ÿåº¦ä¼ é€’</h2><p>ç”±äºè¿æ†æ˜¯é“¾å¼ç»“æ„ï¼Œæ¯ä¸€ä¸ªè¿æ†çš„è¿åŠ¨éƒ½ä¸å…¶ç›¸é‚»æ†æœ‰å…³ï¼Œ<strong>å› æ­¤å¯¹äºi+1è¿æ†ï¼Œå…¶é€Ÿåº¦å°±æ˜¯è¿æ†içš„é€Ÿåº¦åŠ ä¸Šé™„åŠ åˆ°å…³èŠ‚i+1ä¸Šçš„æ–°é€Ÿåº¦åˆ†é‡</strong>ï¼ˆå¯¹äºè¿æ†çš„é€Ÿåº¦ï¼Œæˆ‘ä»¬é€šå¸¸è®¨è®ºçš„æ˜¯è¿æ†åæ ‡ç³»åŸ<strong>ç‚¹</strong>çš„çº¿é€Ÿåº¦å’Œè¿æ†åæ ‡ç³»çš„è§’é€Ÿåº¦ï¼‰</p>
<p>å¯¹äºè§’é€Ÿåº¦ï¼Œæ ¹æ®ä¸Šè¿°è§„åˆ™ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
^i\omega_{i+1}={^i\omega}_{i}+{^i_{i+1}R \dot{\theta}_{i+1}{^{i+1}\hat{Z}_{i+1}}}</script><p>æ­¤å¤„ä¹˜Zæ˜¯ä¸ºäº†è®©å…³èŠ‚è§’åŠ é€Ÿåº¦åŒ¹é…RçŸ©é˜µç»´åº¦ï¼Œå¹¶ä¸”è¯¥åŠ é€Ÿåº¦åªåœ¨Zè½´ä¸Šå­˜åœ¨ï¼Œå°†ä¸Šå¼ä¸¤è¾¹åŒå·¦ä¹˜<strong>iç›¸å¯¹äºi+1</strong>çš„æ—‹è½¬çŸ©é˜µï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
^{i+1}\omega_{i+1}=^{i+1}_{i}R {^i\omega}_{i}+{ \dot{\theta}_{i+1}{^{i+1}\hat{Z}_{i+1}}}</script><p>å¯¹äºçº¿é€Ÿåº¦ï¼Œå…¶ç­‰äº{i}åŸç‚¹çº¿é€Ÿåº¦åŠ ä¸Šç”±äº<strong>iè§’é€Ÿåº¦</strong>å¼•èµ·çš„æ–°åˆ†é‡ï¼š</p>
<script type="math/tex; mode=display">
{^iv_{i+1}}={^iv_{i}}+{^i\omega}_{i}\times{^iP_{i+1}}</script><p>å…¶ä¸­Pä¸ºä¸¤åæ ‡ç³»åŸç‚¹å½¢æˆçš„çŸ¢é‡ï¼ŒåŒæ ·çš„ï¼Œé€šè¿‡å·¦ä¹˜æ—‹è½¬çŸ©é˜µå¯å¾—åˆ°{i+1}ä¸‹çš„é€Ÿåº¦è¡¨è¾¾ï¼š</p>
<script type="math/tex; mode=display">
{^{i+1}v_{i+1}}={^{i+1}_iR}({^iv_{i}}+{^i\omega}_{i}\times{^iP_{i+1}})</script><p>å¯¹äºç§»åŠ¨å…³èŠ‚ï¼Œåˆ™é¢å¤–æœ‰ï¼š</p>
<script type="math/tex; mode=display">
{^{i+1}v_{i+1}}={^{i+1}_iR}({^iv_{i}}+{^i\omega}_{i}\times{^iP_{i+1}})+\dot{d}_{i+1}\hat{Z}_{i+1}</script><h2 id="é›…å¯æ¯”çŸ©é˜µ"><a href="#é›…å¯æ¯”çŸ©é˜µ" class="headerlink" title="é›…å¯æ¯”çŸ©é˜µ"></a>é›…å¯æ¯”çŸ©é˜µ</h2><p>å¯¹äºä¸€ä¸ª6è‡ªç”±åº¦æœºå™¨äººï¼Œæˆ‘ä»¬å¯ä»¥è®¾å…¶æ­£è¿åŠ¨å­¦æ–¹ç¨‹ä¸ºï¼š</p>
<script type="math/tex; mode=display">
x=f(q)</script><p>å…¶ä¸­xæ˜¯ä¸€ä¸ªåŒ…å«ä½å§¿ä¸å§¿æ€çš„6x1å‘é‡ï¼Œqä¸ºæœºå™¨äººçš„å…­ä¸ªå…³èŠ‚å˜é‡ç»„æˆçš„6x1å‘é‡ï¼Œå› æ­¤fä¸ºä¸€ä¸ª6x6çŸ©é˜µï¼Œä»£è¡¨äº†xæ¯ä¸€ä¸ªå…ƒç´ ä¸qçš„éçº¿æ€§å‡½æ•°å…³ç³»ï¼Œå°†ä¸Šå¼ä¸¤è¾¹åŒæ—¶å¯¹æ—¶é—´æ±‚å¯¼ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\text{v}=J(q)\dot{q}</script><p>æ­¤æ—¶ï¼Œè¯¥å¼è¡¨ç¤ºäº†<strong>è¿æ†é€Ÿåº¦vï¼ˆç¬›å¡å°”è¡¨ç¤ºï¼‰</strong>ï¼ˆå–å†³äºé€‰æ‹©çš„è¿æ†å’Œå‚è€ƒåæ ‡ç³»ï¼‰ä¸<strong>å…³èŠ‚è§’é€Ÿåº¦</strong>ä¹‹é—´çš„<strong>æ˜ å°„å…³ç³»</strong></p>
<p>å¯¹äºå¸¸è§çš„æ±‚æœ«ç«¯é€Ÿåº¦çš„é›…å„æ¯”çŸ©é˜µï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
^0\text{v}_6=\begin{bmatrix}^0v_6\\^0\omega_6 \end{bmatrix}={^0J(q)}\dot{q}</script><p>æ­¤æ—¶ï¼Œè¯¥çŸ©é˜µä»£è¡¨äº†åœ¨{0}åæ ‡ä¸‹ï¼Œå„<strong>å…³èŠ‚è§’é€Ÿåº¦</strong>å¯¹<strong>æœ«ç«¯é€Ÿåº¦</strong>ï¼ˆçº¿+è§’ï¼‰çš„å…±äº«</p>
<h3 id="å¥‡å¼‚æ€§"><a href="#å¥‡å¼‚æ€§" class="headerlink" title="å¥‡å¼‚æ€§"></a>å¥‡å¼‚æ€§</h3><p>å› æ­¤ï¼Œå½“å·²çŸ¥æœºå™¨äººç»“æ„ï¼ˆ<strong>ç­‰åŒäºå·²çŸ¥é›…å„æ¯”çŸ©é˜µè¡¨è¾¾å¼</strong>ï¼‰ï¼Œå„å…³èŠ‚è½¬è§’ï¼ˆå¯æ±‚å‡ºJå…·ä½“å€¼ï¼‰å’Œç¬›å¡å°”é€Ÿåº¦æ—¶ï¼Œä¾¿å¯ä»¥æ±‚å‡ºå„å…³èŠ‚é€Ÿåº¦ï¼š</p>
<script type="math/tex; mode=display">
\dot{q}=J^{-1}(q)\text{v}</script><p>ä½†æ­¤æ—¶è¦æ±‚Jæ˜¯å¯é€†çš„ï¼Œå½“æœºå™¨äººå‡ºç°å¥‡å¼‚ä½å§¿æ—¶ï¼Œä¼šå¯¼è‡´Jçš„è¡Œåˆ—å¼ä¸º0ï¼Œæ­¤æ—¶ï¼ŒJä¸ºå¥‡å¼‚çš„</p>
<h3 id="å‚è€ƒç³»çš„å˜æ¢"><a href="#å‚è€ƒç³»çš„å˜æ¢" class="headerlink" title="å‚è€ƒç³»çš„å˜æ¢"></a>å‚è€ƒç³»çš„å˜æ¢</h3><p>å¯¹äºåœ¨{A}ä¸­è¡¨è¾¾çš„æŸé›…å„æ¯”çŸ©é˜µï¼Œè‹¥è¦å˜æ¢åˆ°{B}ä¸­è¡¨è¾¾ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
^BJ(q)=\begin{bmatrix}{^B_AR} &0 \\ 0 &{^B_AR} \end{bmatrix} {^AJ(q)}</script><h2 id="åŠ›åŸŸä¸­çš„é›…å¯æ¯”"><a href="#åŠ›åŸŸä¸­çš„é›…å¯æ¯”" class="headerlink" title="åŠ›åŸŸä¸­çš„é›…å¯æ¯”"></a>åŠ›åŸŸä¸­çš„é›…å¯æ¯”</h2><p>å½“ä¸€ä¸ªFä½œç”¨ä¸æœºå™¨äººæ—¶ï¼Œæˆ‘ä»¬æƒ³è¦æ±‚å‡ºå„å…³èŠ‚éœ€è¾“å‡ºå¤šå°‘åŠ›çŸ©ä»¥ä¿æŒæœºå™¨äººçš„é™åŠ›å¹³è¡¡ã€‚</p>
<p>å½“ä¸€ä¸ªç¬›å¡å°”å¹¿ä¹‰åŠ›Fï¼ˆå½¢å¼ç±»ä¼¼äºç¬›å¡å°”é€Ÿåº¦ï¼‰ä½œç”¨äºæœºå™¨äººæœ«ç«¯æ—¶ï¼Œæ ¹æ®åŠŸç‡å®ˆæ’ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
F^T\text{v}=\tau\dot{q}</script><p>å°†ä¸Šä¸€èŠ‚ä¸­è®¡ç®—çš„é€Ÿåº¦é›…å¯æ¯”æ–¹ç¨‹å¸¦å…¥vä¸­åˆ™æœ€ç»ˆæœ‰ï¼š</p>
<script type="math/tex; mode=display">
\tau={^0J^T}{^0F}</script><p>äºé€Ÿåº¦é›…å¯æ¯”æ–¹ç¨‹ä¸€æ ·ï¼ŒFä¸Jéœ€åœ¨åŒä¸€åæ ‡ç³»ä¸‹è¡¨è¾¾</p>
<h3 id="åŠ›-åŠ›çŸ©å˜æ¢"><a href="#åŠ›-åŠ›çŸ©å˜æ¢" class="headerlink" title="åŠ›-åŠ›çŸ©å˜æ¢"></a>åŠ›-åŠ›çŸ©å˜æ¢</h3><p>å¯¹äºç¬›å¡å°”å¹¿ä¹‰åŠ›çš„åœ¨ä¸åŒåæ ‡ç³»ä¸‹çš„è¡¨ç¤ºï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
{}^A F_A \\
{}^A N_A
\end{bmatrix}
=
\begin{bmatrix}
{}^A_B R & 0 \\
{}^A P_{BORG} \times {}^A_B R & {}^A_B R
\end{bmatrix}
\begin{bmatrix}
{}^B F_B \\
{}^B N_B
\end{bmatrix}</script><h1 id="æœºå™¨äººåŠ¨åŠ›å­¦"><a href="#æœºå™¨äººåŠ¨åŠ›å­¦" class="headerlink" title="æœºå™¨äººåŠ¨åŠ›å­¦"></a>æœºå™¨äººåŠ¨åŠ›å­¦</h1><p>å‡è®¾å·²çŸ¥å…³èŠ‚çš„è½¬è§’ã€é€Ÿåº¦å’ŒåŠ é€Ÿåº¦ï¼Œ<strong>æ±‚é©±åŠ¨å…³èŠ‚æ‰€éœ€è¦çš„åŠ›çŸ©</strong>ï¼ˆé€†åŠ¨åŠ›å­¦ï¼‰</p>
<h2 id="åˆšä½“çš„åŠ é€Ÿåº¦"><a href="#åˆšä½“çš„åŠ é€Ÿåº¦" class="headerlink" title="åˆšä½“çš„åŠ é€Ÿåº¦"></a>åˆšä½“çš„åŠ é€Ÿåº¦</h2><p>å¯¹ä¸Šä¸€ç« â€œåˆšä½“çš„é€Ÿåº¦è¡¨è¾¾â€ä¸­ä¸¤è¾¹åŒæ—¶å¯¹æ—¶é—´è¿›è¡Œæ±‚å¯¼æœ€ç»ˆå¯å¾—åˆ°åœ¨{A}ä¸­è¡¨è¾¾ä¸€ä¸ª{B}ä¸­çš„<strong>å¸¸é‡çŸ¢é‡Q</strong>çš„åŠ é€Ÿåº¦å…¬å¼ï¼šï¼ˆå¸¸é‡Qä»£è¡¨ç€å…¶åœ¨{B}ä¸­çš„é€Ÿåº¦ã€åŠ é€Ÿåº¦è¡¨è¾¾å‡ä¸º0ï¼‰</p>
<script type="math/tex; mode=display">
{^A\dot{V}_Q}={^A\dot{V}_{Borg}}+{^A\Omega_B}\times({^A\Omega_B}\times{}^A_B RQ)+{^A\dot{\Omega}_B}\times{}^A_B RQ</script><h2 id="åˆšä½“çš„è´¨é‡åˆ†å¸ƒ"><a href="#åˆšä½“çš„è´¨é‡åˆ†å¸ƒ" class="headerlink" title="åˆšä½“çš„è´¨é‡åˆ†å¸ƒ"></a>åˆšä½“çš„è´¨é‡åˆ†å¸ƒ</h2><p>åœ¨ä¸€ä¸ªåˆšä½“ç»•æŸä¸ªè½´åšæ—‹è½¬è¿åŠ¨æ—¶ï¼Œéœ€è¦ä¸€ç§èƒ½å¤Ÿè¡¨å¾å…¶è´¨é‡åˆ†å¸ƒçš„æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥æƒ¯æ€§å¼ é‡ï¼š</p>
<script type="math/tex; mode=display">
I = 
\begin{bmatrix}
I_{xx} & I_{xy} & I_{xz} \\
I_{yx} & I_{yy} & I_{yz} \\
I_{zx} & I_{zy} & I_{zz}
\end{bmatrix}</script><p>å…¶ä¸­ï¼Œxxï¼Œyyï¼Œzzä¸º<strong>æƒ¯é‡çŸ©</strong>ï¼Œå…¶ä½™äº¤å‰é¡¹ä¸º<strong>æƒ¯é‡ç§¯</strong>ï¼›è¿™å…­ä¸ªå‚é‡å–å†³äºå…¶<strong>æ‰€åœ¨</strong>åæ ‡ç³»ï¼ˆå³åˆšä½“ä¸­çš„{B}ï¼‰çš„ä½å§¿ï¼›</p>
<h3 id="å¹³ç§»ç§»è½´å®šç†"><a href="#å¹³ç§»ç§»è½´å®šç†" class="headerlink" title="å¹³ç§»ç§»è½´å®šç†"></a>å¹³ç§»ç§»è½´å®šç†</h3><p>è¯¥å®šç†æè¿°äº†ä¸€ä¸ªä»¥åˆšä½“è´¨å¿ƒä¸ºåŸç‚¹çš„åæ ‡ç³»<strong><u>å¹³ç§»</u></strong>åˆ°å¦ä¸€ä¸ªåæ ‡ç³»æ—¶çš„æƒ¯æ€§å¼ é‡å˜æ¢å…³ç³»ï¼š</p>
<script type="math/tex; mode=display">
{^AI}={^CI}+m(P^T_cP_cI_3-P_cP^T_c)</script><p>å…¶ä¸­Iä»£è¡¨è¦å˜æ¢çš„æƒ¯é‡çŸ©/æƒ¯é‡ç§¯ï¼ŒPcä¸ºè´¨å¿ƒåæ ‡ç³»{A}åŸç‚¹ä½ç½®ï¼ˆ3x1ï¼‰ï¼ŒI3ä¸º3x3å•ä½çŸ©é˜µ</p>
<h2 id="ç‰›é¡¿-æ¬§æ‹‰æ³•"><a href="#ç‰›é¡¿-æ¬§æ‹‰æ³•" class="headerlink" title="ç‰›é¡¿-æ¬§æ‹‰æ³•"></a>ç‰›é¡¿-æ¬§æ‹‰æ³•</h2><h3 id="ç‰›é¡¿æ–¹ç¨‹ä¸æ¬§æ‹‰æ–¹ç¨‹"><a href="#ç‰›é¡¿æ–¹ç¨‹ä¸æ¬§æ‹‰æ–¹ç¨‹" class="headerlink" title="ç‰›é¡¿æ–¹ç¨‹ä¸æ¬§æ‹‰æ–¹ç¨‹"></a>ç‰›é¡¿æ–¹ç¨‹ä¸æ¬§æ‹‰æ–¹ç¨‹</h3><p>ç‰›é¡¿æ–¹ç¨‹æè¿°äº†ä½œç”¨ä¸è´¨å¿ƒçš„åŠ›Fä¸è´¨å¿ƒåŠ é€Ÿåº¦ä¹‹é—´çš„å…³ç³»ï¼š</p>
<script type="math/tex; mode=display">
F=m\dot{v}</script><p>å¯¹äºåŠ é€Ÿåº¦çš„è®¡ç®—å·²åœ¨â€œåˆšä½“çš„åŠ é€Ÿåº¦â€å°èŠ‚ä¸­ç»™å‡ºï¼ˆæ²¡é”™ï¼Œå°±æ˜¯åŒ…å«äº†è§’åŠ é€Ÿåº¦çš„é‚£ä¸ªåŠ é€Ÿåº¦ï¼‰</p>
<p>æ¬§æ‹‰æ–¹ç¨‹æè¿°äº†æƒ¯é‡ã€åŠ›çŸ©ä¸è§’åŠ é€Ÿåº¦çš„å…³ç³»ï¼š</p>
<script type="math/tex; mode=display">
N=I\dot{\omega}+\omega \times I\omega</script><h3 id="å¤–å‘è¿­ä»£æ³•ï¼ˆè®¡ç®—é€Ÿåº¦ã€åŠ é€Ÿåº¦ä»¥å¾—åˆ°è¿æ†ä¸Šçš„åŠ›ã€åŠ›çŸ©ï¼‰"><a href="#å¤–å‘è¿­ä»£æ³•ï¼ˆè®¡ç®—é€Ÿåº¦ã€åŠ é€Ÿåº¦ä»¥å¾—åˆ°è¿æ†ä¸Šçš„åŠ›ã€åŠ›çŸ©ï¼‰" class="headerlink" title="å¤–å‘è¿­ä»£æ³•ï¼ˆè®¡ç®—é€Ÿåº¦ã€åŠ é€Ÿåº¦ä»¥å¾—åˆ°è¿æ†ä¸Šçš„åŠ›ã€åŠ›çŸ©ï¼‰"></a>å¤–å‘è¿­ä»£æ³•ï¼ˆè®¡ç®—é€Ÿåº¦ã€åŠ é€Ÿåº¦ä»¥å¾—åˆ°è¿æ†ä¸Šçš„åŠ›ã€åŠ›çŸ©ï¼‰</h3><p>ç”±è¿æ†é—´é€Ÿåº¦ä¼ é€’ï¼Œå¯¹<strong>è§’é€Ÿåº¦</strong>æ±‚å¯¼å¯å¾—ï¼š</p>
<script type="math/tex; mode=display">
{^{i+1}\dot{\omega}_{i+1}}=\frac{d(^{i+1}_iR^i\omega_i)}{dt}+{ \ddot{\theta}_{i+1}{^{i+1}\hat{Z}_{i+1}}}={}^{i+1}_iR ^i\dot{\omega}_i+{}^{i+1}_iR^i\omega_i\times{ \dot{\theta}_{i+1}{^{i+1}\hat{Z}_{i+1}}}+{ \ddot{\theta}_{i+1}{^{i+1}\hat{Z}_{i+1}}}</script><p>å› ä¸ºRæœ¬èº«ä¹Ÿä¸æ—¶é—´ç›¸å…³ï¼Œå› æ­¤å…¶å¯¼æ•°ä¹Ÿæœ‰ç‰¹æ®Šå½¢å¼ï¼Œä¸Šå¼è®°ä½å°±è¡Œ</p>
<p>ç”±â€œåˆšä½“åŠ é€Ÿåº¦â€ä¸­çš„å…¬å¼å¯å¾—æ¯ä¸ªè¿æ†<strong>åæ ‡ç³»åŸç‚¹</strong>å’Œå…¶<strong>è´¨å¿ƒ</strong>çš„åŠ é€Ÿåº¦ï¼š</p>
<script type="math/tex; mode=display">
{^{i+1}\dot v_{i+1}}=^{i+1}_iR({^i\dot v_i} + ^i\omega_i\times {}^iP_{i+1}+ ^i\omega_i \times(^i\omega_i \times {}^iP_{i+1}))</script><script type="math/tex; mode=display">
{^i\dot v_{C_i}}= {^i\dot v_{i}} + ^i\dot{\omega}_i \times {^iP_{C_i}}+^i\omega_i \times (^i\omega_i+{^iP_{C_i}})</script><p>å‡è®¾è´¨å¿ƒåæ ‡ç³»åæ ‡è½´æ–¹ä½ä¸è¿æ†åæ ‡ç³»{i}æ–¹å‘ç›¸åŒ</p>
<p>å¾—å‡ºè§’åŠ é€Ÿåº¦å’ŒåŠ é€Ÿåº¦åï¼Œå³å¯æ ¹æ®<strong>ç‰›é¡¿ã€æ¬§æ‹‰æ–¹ç¨‹</strong>è®¡ç®—å‡ºæ¯ä¸ª<strong>ä½œç”¨åœ¨æ¯ä¸ªè¿æ†ä¸Šçš„æƒ¯æ€§åŠ›å’ŒåŠ›çŸ©</strong></p>
<h3 id="å†…å‘è¿­ä»£æ³•"><a href="#å†…å‘è¿­ä»£æ³•" class="headerlink" title="å†…å‘è¿­ä»£æ³•"></a>å†…å‘è¿­ä»£æ³•</h3><p><u>åœ¨å¾—åˆ°ä½œç”¨åœ¨è¿æ†ä¸Šçš„åŠ›å’ŒåŠ›çŸ©å</u>ï¼Œå³å¯æ ¹æ®åŠ›ã€åŠ›çŸ©å¹³è¡¡è®¡ç®—å‡º<strong>è¿æ†i-1å¯¹è¿æ†i</strong>æ–½åŠ çš„åŠ›få’ŒåŠ›çŸ©nï¼Œæœ€åå¾—åˆ°<strong>å…³èŠ‚i</strong>çš„é©±åŠ¨åŠ›çŸ©ï¼š</p>
<script type="math/tex; mode=display">
{^if_i}={^i_{i+1}R}f_{i+1}+{}^iF_i</script><script type="math/tex; mode=display">
{}^in_i={}^iN_i+{^i_{i+1}R} \ n_{i+1}+{^iP_{C_i}}\times {}^iF_i+{}^iP_{i+1}\times{^i_{i+1}R}{^{i+1}f_{i+1}}</script><p>æœ€ç»ˆï¼Œå¯¹äºæ—‹è½¬å…³èŠ‚ï¼š</p>
<script type="math/tex; mode=display">
\tau_i={}^in_i^T\hat{Z}_i</script><p>å¯¹äºç§»åŠ¨å…³èŠ‚ï¼šï¼ˆæ­¤æ—¶tauä»£è¡¨çº¿æ€§é©±åŠ¨åŠ›ï¼‰</p>
<script type="math/tex; mode=display">
\tau_i={}^if_i^T\hat{Z}_i</script><p><strong>å¯¹äºæœ«ç«¯æœªä¸ç¯å¢ƒæ¥è§¦çš„æœºå™¨äººï¼Œå…¶f_i+1ä¸n_i+1ä¸º0</strong></p>
<h3 id="æ€»æµç¨‹"><a href="#æ€»æµç¨‹" class="headerlink" title="æ€»æµç¨‹"></a>æ€»æµç¨‹</h3><p>ç»“åˆå¤–å‘å’Œå†…å‘è¿­ä»£ï¼Œä¾¿å¯åœ¨å·²çŸ¥å…³èŠ‚è½¬è§’ã€åŠå…¶ä¸€é˜¶ã€äºŒé˜¶å¯¼çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—å‡ºæ¯ä¸ªå…³èŠ‚çš„é©±åŠ¨åŠ›çŸ©ï¼š</p>
<ul>
<li><p><strong>å¤–å‘è¿­ä»£</strong>ï¼Œä¾æ¬¡æ±‚è¿æ†ä¸Šæƒ¯æ€§åŠ›å’ŒåŠ›çŸ©ã€‚ä»<strong>0è¿æ†æ¨åˆ°nè¿æ†</strong>ï¼ˆ0è¿æ†ï¼ˆåŸºåº§ï¼‰çš„è§’é€Ÿåº¦ã€è§’åŠ é€Ÿåº¦ä¸º0ï¼‰</p>
<ul>
<li><p>è§’é€Ÿåº¦è®¡ç®—(<strong>ä¸éœ€è®¡ç®—çº¿é€Ÿåº¦</strong>)</p>
</li>
<li><p>è§’åŠ é€Ÿåº¦è®¡ç®—</p>
</li>
<li><p>è¿æ†åæ ‡ç³»åŸç‚¹åŠ é€Ÿåº¦è®¡ç®—</p>
</li>
<li><p>è¿æ†è´¨å¿ƒåŠ é€Ÿåº¦è®¡ç®—</p>
</li>
<li><p>æƒ¯æ€§åŠ›ã€åŠ›çŸ©è®¡ç®—</p>
</li>
</ul>
</li>
<li><p><strong>å†…å‘è¿­ä»£</strong>ï¼Œä¾æ¬¡æ±‚å„å…³èŠ‚é©±åŠ¨åŠ›çŸ©ã€‚ä»<strong>nè¿æ†æ¨åˆ°0è¿æ†</strong></p>
<ul>
<li>i-1è¿æ†å¯¹iè¿æ†çš„<strong>ä½œç”¨åŠ›</strong>è®¡ç®—</li>
<li>i-1è¿æ†å¯¹iè¿æ†çš„<strong>ä½œç”¨åŠ›çŸ©</strong>è®¡ç®—</li>
<li>æ ¹æ®å…³èŠ‚å±æ€§è®¡ç®—é©±åŠ¨åŠ›çŸ©/åŠ›</li>
</ul>
</li>
</ul>
<img src="/images/loading.png" data-original="/2025/10/22/robo-dynamic/1.png" class title="This is an image"> 
<h3 id="è€ƒè™‘é‡åŠ›å­˜åœ¨çš„æƒ…å†µ"><a href="#è€ƒè™‘é‡åŠ›å­˜åœ¨çš„æƒ…å†µ" class="headerlink" title="è€ƒè™‘é‡åŠ›å­˜åœ¨çš„æƒ…å†µ"></a>è€ƒè™‘é‡åŠ›å­˜åœ¨çš„æƒ…å†µ</h3><p>ä¸ºåŸºåº§åŠ é€Ÿåº¦å‡æƒ³ä¸€ä¸ªä¸é‡åŠ›çŸ¢é‡Gå¤§å°ç›¸ç­‰ï¼Œæ–¹å‘ç›¸åçš„åŠ é€Ÿåº¦ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">
{^0\dot{v}_0}=G</script><h2 id="åŠ¨åŠ›å­¦æ–¹ç¨‹"><a href="#åŠ¨åŠ›å­¦æ–¹ç¨‹" class="headerlink" title="åŠ¨åŠ›å­¦æ–¹ç¨‹"></a>åŠ¨åŠ›å­¦æ–¹ç¨‹</h2><h3 id="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"><a href="#çŠ¶æ€ç©ºé—´æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"></a>çŠ¶æ€ç©ºé—´æ–¹ç¨‹</h3><p>å¯¹äºç”¨ç‰›é¡¿-æ¬§æ‹‰æ³•åˆ†æå¾—åˆ°çš„å…³èŠ‚é©±åŠ¨åŠ›çŸ©çŸ©é˜µï¼Œå…¶åŠ¨åŠ›å­¦æ–¹ç¨‹å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
\tau=M(\theta)\ddot{\theta}+V(\theta,\dot{\theta})+G(\theta)</script><p>å…¶ä¸­Mä¸ºnxnè´¨é‡çŸ©é˜µï¼ŒVä¸ºnx1çš„ç¦»å¿ƒåŠ›ä¸å“¥æ°åŠ›çŸ¢é‡ï¼ŒGä¸ºnx1çš„é‡åŠ›çŸ¢é‡</p>
<p>å‡è®¾æœ‰å¦‚ä¸‹å…³èŠ‚åŠ›çŸ©è¡¨ç¤ºï¼š</p>
<img src="/images/loading.png" data-original="/2025/10/22/robo-dynamic/2.png" class title="This is an image"> 
<p>åˆ™å¯å¾—åˆ°ï¼š</p>
<img src="/images/loading.png" data-original="/2025/10/22/robo-dynamic/3.png" class title="This is an image"> 
<h3 id="ç¬›å¡å°”çŠ¶æ€ç©ºé—´æ–¹ç¨‹"><a href="#ç¬›å¡å°”çŠ¶æ€ç©ºé—´æ–¹ç¨‹" class="headerlink" title="ç¬›å¡å°”çŠ¶æ€ç©ºé—´æ–¹ç¨‹"></a>ç¬›å¡å°”çŠ¶æ€ç©ºé—´æ–¹ç¨‹</h3><p>å½“æˆ‘ä»¬é¡¹å°†ç¬›å¡å°”å˜é‡çš„ä¸€èˆ¬å½¢å¼åº”ç”¨äºåŠ¨åŠ›å­¦æ–¹ç¨‹ä¸­æ—¶ï¼Œæœ‰ï¼š</p>
<img src="/images/loading.png" data-original="/2025/10/22/robo-dynamic/4.png" class title="This is an image"> 
<h2 id="æ‹‰æ ¼æœ—æ—¥æ³•"><a href="#æ‹‰æ ¼æœ—æ—¥æ³•" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥æ³•"></a>æ‹‰æ ¼æœ—æ—¥æ³•</h2><p>ç‰›é¡¿-æ¬§æ‹‰æ³•æ˜¯é€šè¿‡åˆ†æä½œç”¨äºè¿æ†çš„ä¹‹é—´çš„çº¦æŸåŠ›å’ŒåŠ›çŸ©è€Œè¿›è¡ŒåŠ¨åŠ›å­¦æ±‚è§£ï¼Œå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ç§<strong>åŠ›å¹³è¡¡æ–¹æ³•</strong>ã€‚è€Œæ‹‰æ ¼æœ—æ—¥å…¬å¼åˆ™æ˜¯ä¸€ç§åŸºäºèƒ½é‡çš„åŠ¨åŠ›å­¦æ–¹æ³•ã€‚</p>
<p>æ‹‰æ ¼æœ—æ—¥å‡½æ•°æè¿°äº†ä¸€ä¸ªç³»ç»Ÿçš„åŠ¨èƒ½å’ŒåŠ¿èƒ½çš„å·®å€¼ï¼š</p>
<script type="math/tex; mode=display">
L(\theta,\dot{\theta})=k(\theta,\dot{\theta})-u(\theta)</script><p>å¯¹äºè¿æ†içš„åŠ¨èƒ½ï¼Œå¯è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
k_i=\frac1 2 m_iv^2_{Ci}+\frac1 2 I_i\omega^2_i</script><p>å¯¹äºè¿æ†içš„åŠ¿èƒ½ï¼Œå¯è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
u_i=m_igh+C</script><p>å…¶ä¸­Cä¸ºåŠ¿èƒ½å‚è€ƒ0ç‚¹æ‰€å¸¦æ¥çš„å¸¸æ•°ï¼Œå¯å–ä»»æ„å€¼ï¼Œé€šå¸¸å‚è€ƒç‚¹ä¸ºåŸºåº§ï¼Œåˆ™Cä¸º0ï¼ˆç”±äºåŠ¨åŠ›å­¦æ–¹ç¨‹ä¸­ä»…å‡ºç°åŠ¿èƒ½å¯¹Î¸çš„åå¯¼ï¼Œå› æ­¤Cæ— å…³ç´§è¦ï¼‰</p>
<p><strong>ç”±èƒ½é‡å®ˆæ’ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥å¤–åŠ›åšåŠŸ=ç³»ç»Ÿæœºæ¢°èƒ½å˜åŒ–é‡ï¼Œå¯¹ç­‰å¼ä¸¤è¾¹åŒæ—¶å¯¹ä½ç§»ï¼ˆÎ¸ï¼‰æ±‚å¯¼ï¼Œå³æœ‰æ‹‰æ ¼æœ—æ—¥åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š</strong></p>
<script type="math/tex; mode=display">
\tau=\frac d {dt} \frac{\partial L}{\partial \dot{\theta}}-\frac{\partial L}{\partial \theta}=\frac d {dt} \frac{\partial k}{\partial \dot{\theta}}-(\frac{\partial k}{\partial \theta}-\frac{\partial u}{\partial \theta})</script>]]></content>
      <tags>
        <tag>æœºå™¨äººå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°å­¦åŸºç¡€</title>
    <url>/2025/10/17/math-base/</url>
    <content><![CDATA[<p>å› ä¸ºå¾ˆå¤šæ•°å­¦çŸ¥è¯†ä¸€æ®µæ—¶é—´ä¸ç”¨å°±è€æ˜¯ä¼šå¿˜è®°ï¼Œå› æ­¤ç‰¹å¼€æ­¤èŠ‚è®°å½•ä¸€äº›æœ¬é¢†åŸŸä¼šç”¨åˆ°çš„ä¸€äº›æ•°å­¦åŸºç¡€çŸ¥è¯†</p>
<h1 id="å‚…é‡Œå¶å˜æ¢"><a href="#å‚…é‡Œå¶å˜æ¢" class="headerlink" title="å‚…é‡Œå¶å˜æ¢"></a>å‚…é‡Œå¶å˜æ¢</h1><h2 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h2><p>ä»»ä½•ä¿¡å·éƒ½å¯ä»¥çœ‹ä½œæ˜¯è‹¥å¹²ä¸ªä¸åŒé¢‘ç‡ã€ä¸åŒå¹…å€¼å’Œç›¸ä½çš„æ­£å¼¦æ³¢çš„å åŠ </p>
<h2 id="å¤æ•°ä¸æ¬§æ‹‰å…¬å¼"><a href="#å¤æ•°ä¸æ¬§æ‹‰å…¬å¼" class="headerlink" title="å¤æ•°ä¸æ¬§æ‹‰å…¬å¼"></a>å¤æ•°ä¸æ¬§æ‹‰å…¬å¼</h2><p>å¯¹äºä¸€ä¸ªå¤æŒ‡æ•°ï¼Œæœ‰</p>
<script type="math/tex; mode=display">
e^{\mathrm{j}\omega_{0}t} = \cos \omega_{0}t + \mathrm{j} \sin \omega_{0}t</script><script type="math/tex; mode=display">
|e^{j\omega_0t}|=1</script><p>å¤æ•°ï¼ˆä»£æ•°å½¢å¼a+bi)ï¼Œrä¸ºæ¨¡ï¼Œä¸ºå®éƒ¨è™šéƒ¨çš„å¹³æ–¹æ ¹ï¼›ç”±æ¬§æ‹‰å…¬å¼å¯å¾—ï¼š</p>
<script type="math/tex; mode=display">
e^{j2\pi}=1</script><script type="math/tex; mode=display">
e^{j\pi}=-1</script><script type="math/tex; mode=display">
cos(\theta) = \frac{e^{j\theta} + e^{-j\theta}}{2}</script><script type="math/tex; mode=display">
sin(\theta) = \frac{e^{j\theta} - e^{-j\theta}}{2j}</script><h2 id="æ•°å­¦å®šä¹‰"><a href="#æ•°å­¦å®šä¹‰" class="headerlink" title="æ•°å­¦å®šä¹‰"></a>æ•°å­¦å®šä¹‰</h2><script type="math/tex; mode=display">
X(\omega)= \int_{-\infty}^{\infty} x(t) e^{-j\omega t} \, dt</script><h2 id="æ€§è´¨"><a href="#æ€§è´¨" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h2><ul>
<li><p>çº¿æ€§æ€§</p>
<script type="math/tex; mode=display">
a f(t) + b g(t)  \Leftrightarrow a F(\omega) + b G(\omega)</script></li>
<li><p><strong>æ—¶ç§»æ€§</strong></p>
<script type="math/tex; mode=display">
x(tâˆ’t_0) \Leftrightarrow X(\omega)e^{âˆ’j\omega t_0}</script></li>
<li><p>é¢‘ç§»æ€§</p>
<script type="math/tex; mode=display">
e^{j\omega_0 t}x(t) \Leftrightarrow X(\omega-\omega_0)</script></li>
<li><p>å·ç§¯å®šç†</p>
<p>æ—¶åŸŸå·ç§¯ç­‰ä»·äºé¢‘åŸŸä¹˜ç§¯</p>
</li>
<li><p>å¯¹å¶æ€§</p>
<script type="math/tex; mode=display">
x(t)â†”X(f)â‡’X(t)â†”x(âˆ’f)</script></li>
</ul>
<h2 id="ç‰©ç†æ„ä¹‰ä¸ç†è§£"><a href="#ç‰©ç†æ„ä¹‰ä¸ç†è§£" class="headerlink" title="ç‰©ç†æ„ä¹‰ä¸ç†è§£"></a>ç‰©ç†æ„ä¹‰ä¸ç†è§£</h2><p>é€šè¿‡å–ä¸åŒçš„Ï‰ï¼Œå‚…é‡Œå¶å˜æ¢å¯ä»¥å°†ä¸€ä¸ªæ—¶åŸŸä¿¡å·åˆ†è§£ä¸ºä¸åŒé¢‘ç‡ä¸Šçš„å¤æ•°å€¼ï¼Œè‡³äºè¿™ä¸ªå¤æ•°ä»£è¡¨ä»€ä¹ˆï¼Œå¹¶ä¸”ä¸ºä»€ä¹ˆè¦åœ¨ç§¯åˆ†ä¸­ä¹˜è¿™ä¸ªå¤æŒ‡æ•°ï¼Œå…·ä½“åˆ†æå¯ä»¥çœ‹ï¼š<a href="https://zhuanlan.zhihu.com/p/40396861">å‚…é‡Œå¶å˜æ¢åé¢çš„åˆ°åº•æœ‰ä»€ä¹ˆå°ç§˜å¯† - çŸ¥ä¹</a></p>
<p>æ€»ç»“ä¸€ä¸‹è¿™ä¸ªæ–‡ç« è®²çš„å†…å®¹ï¼Œå…¶å®å‚…é‡Œå¶å˜æ¢çš„æœ¬è´¨å¯ä»¥çœ‹æˆæ—¶åŸŸä¿¡å·ä¸è¿™ä¸ªå¤æŒ‡æ•°çš„<strong>æ±‚å†…ç§¯</strong>ï¼ˆæ­£äº¤åˆ†è§£ï¼‰ï¼Œ<strong><u>x(t)ä¸­åªæœ‰é¢‘ç‡ä¸ºÏ‰çš„åˆ†é‡æ‰ä¼šæœ‰å†…ç§¯çš„ç»“æœï¼Œå…¶ä½™é¢‘ç‡åˆ†é‡çš„å†…ç§¯ä¸º0</u></strong>ï¼Œç§¯åˆ†ä¸Šä¸‹é™åˆ™ä»£è¡¨äº†å°†æ•´ä¸ªä¿¡å·è¿›è¡Œå†…ç§¯è®¡ç®—</p>
<p>å› æ­¤X(Ï‰)ä¸­åŒ…å«äº†x(t)çš„Ï‰åˆ†é‡çš„å¹…å€¼ã€ç›¸ä½ä¿¡æ¯</p>
<h2 id="ä½¿ç”¨æ¡ä»¶-ç‹„åˆ©èµ«é‡Œæ¡ä»¶"><a href="#ä½¿ç”¨æ¡ä»¶-ç‹„åˆ©èµ«é‡Œæ¡ä»¶" class="headerlink" title="ä½¿ç”¨æ¡ä»¶(ç‹„åˆ©èµ«é‡Œæ¡ä»¶)"></a>ä½¿ç”¨æ¡ä»¶(ç‹„åˆ©èµ«é‡Œæ¡ä»¶)</h2><ul>
<li><p>ç»å¯¹å¯ç§¯æ€§</p>
<script type="math/tex; mode=display">
\int_{-\infty}^{\infty} |x(t)| dt < \infty</script><p>ä¿¡å·æ•´ä½“èƒ½é‡å¿…é¡»æ˜¯æœ‰é™çš„ï¼Œå³ä¿¡å·ä¸èƒ½æ— é™å¢é•¿</p>
</li>
<li><p>å‡½æ•°åœ¨æœ‰é™åŒºé—´å†…è¿ç»­æˆ–åªæœ‰æœ‰é™ä¸ªç¬¬ä¸€ç±»é—´æ–­ç‚¹</p>
</li>
<li><p>åœ¨ä¸€ä¸ªå‘¨æœŸå†…å‡½æ•°æœ‰æœ‰é™ä¸ªæå¤§å€¼æˆ–æå°å€¼</p>
</li>
</ul>
<h1 id="æ‹‰æ™®æ‹‰æ–¯å˜æ¢"><a href="#æ‹‰æ™®æ‹‰æ–¯å˜æ¢" class="headerlink" title="æ‹‰æ™®æ‹‰æ–¯å˜æ¢"></a>æ‹‰æ™®æ‹‰æ–¯å˜æ¢</h1><p>å‚…é‡Œå¶å˜æ¢å…·æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å±€é™æ€§ï¼Œå³å…¶è¦æ±‚ä¿¡å·å…·æœ‰ç»å¯¹å¯ç§¯æ€§ï¼Œè¿™å¯¼è‡´äº†å¾ˆå¤šåœ¨æ— ç©·å¤„ä¸æ”¶æ•›çš„å‡½æ•°ä¸èƒ½ä½¿ç”¨å‚…é‡Œå¶å˜æ¢ã€‚</p>
<p>â€œè¿™ç‚¹éš¾åº¦å½“ç„¶æ‹¿ä¸åˆ°èªæ˜çš„æ•°å­¦å®¶ä»¬ï¼Œä»–ä»¬æƒ³åˆ°äº†ä¸€ä¸ªç»ä½³çš„ä¸»æ„ï¼šæŠŠä¸æ»¡è¶³ç»å¯¹çš„å¯ç§¯çš„å‡½æ•°<strong>ä¹˜ä»¥ä¸€ä¸ªå¿«é€Ÿè¡°å‡çš„å‡½æ•°</strong>ï¼Œè¿™æ ·åœ¨è¶‹äºæ— ç©· æ—¶åŸå‡½æ•°ä¹Ÿè¡°å‡åˆ°é›¶äº†ï¼Œä»è€Œæ»¡è¶³ç»å¯¹å¯ç§¯ã€‚â€</p>
<p>å› æ­¤ï¼Œåœ¨å‚…é‡Œå¶å˜æ¢çš„åŸºç¡€ä¸Šï¼š</p>
<script type="math/tex; mode=display">
X(\omega)= \int_{0}^{\infty} x(t)e^{-Ïƒt} e^{-j\omega t} \, dt</script><p>ä¸ºä¿è¯å‡½æ•°çš„è¡°å‡æ€§ï¼Œå°†æ—¶é—´è½´ç¼©å‡åˆ°æ­£åŠè½´ï¼ˆå®é™…ä¸Šæˆ‘ä»¬ä¹Ÿä¸å…³å¿ƒè´ŸåŠè½´ï¼‰</p>
<p>å°†å…¶æ•´ç†å³å¯å¾—åˆ°æ‹‰æ™®æ‹‰æ–¯å˜æ¢çš„æ•°å­¦å®šä¹‰å¼ï¼š</p>
<script type="math/tex; mode=display">
s=Ïƒ+j\omega</script><script type="math/tex; mode=display">
X(s)= \int_{0}^{\infty} x(t)e^{-st} \, dt</script><p>ä½†æ˜¯æ‹‰æ™®æ‹‰æ–¯å˜æ¢çš„ä½œç”¨è¿œä¸æ­¢å¯¹ä¿¡å·è¿›è¡Œåˆ†æï¼Œå…¶å¯¹ç»å¯¹å¯ç§¯æ€§é™åˆ¶çš„çªç ´ä½¿å…¶å¯ä»¥ç”¨äºæ›´å¤šçš„å‡½æ•°ï¼ˆä½†å…¶ä»è¦æ±‚ç§¯åˆ†æ”¶æ•›ï¼‰ï¼Œ<strong>å› æ­¤å¯ä»¥åˆ©ç”¨æ‹‰æ°å˜æ¢åŠå…¶æ€§è´¨æ±‚è§£æ—¶åŸŸä¸Šçš„å¤æ‚çš„å¾®åˆ†æ–¹ç¨‹</strong></p>
<h2 id="æ€§è´¨-1"><a href="#æ€§è´¨-1" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h2><ul>
<li><p>çº¿æ€§æ€§</p>
<p>åŒå‚…é‡Œå¶å˜æ¢</p>
</li>
<li><p><strong>å¾®åˆ†æ€§ï¼š</strong></p>
<script type="math/tex; mode=display">
\frac{dx(t)}{dt} \Leftrightarrow sX(s)-x(0^-)</script></li>
<li><p><strong>ç§¯åˆ†æ€§ï¼š</strong></p>
<script type="math/tex; mode=display">
\int_0^tx(t)dt \Leftrightarrow \frac{X(s)}{s}</script></li>
<li><p>æ—¶ç§»æ€§ï¼š</p>
<script type="math/tex; mode=display">
x(tâˆ’t_0) \Leftrightarrow e^{-st_0}X(s)</script></li>
<li><p>é¢‘ç§»æ€§ï¼š</p>
<script type="math/tex; mode=display">
e^{a t}x(t) \Leftrightarrow X(s-a)</script></li>
</ul>
<h1 id="ä»FTåˆ°å¸¸ç”¨çš„FFT"><a href="#ä»FTåˆ°å¸¸ç”¨çš„FFT" class="headerlink" title="ä»FTåˆ°å¸¸ç”¨çš„FFT"></a>ä»FTåˆ°å¸¸ç”¨çš„FFT</h1><p>å·²çŸ¥è¿ç»­å‚…é‡Œå¶å˜æ¢ï¼š</p>
<script type="math/tex; mode=display">
X(\omega)= \int_{-\infty}^{\infty} x(t) e^{-j\omega t} \, dt</script><h2 id="æ—¶é—´ç¦»æ•£åŒ–-é‡‡æ ·"><a href="#æ—¶é—´ç¦»æ•£åŒ–-é‡‡æ ·" class="headerlink" title="æ—¶é—´ç¦»æ•£åŒ–(é‡‡æ ·)"></a>æ—¶é—´ç¦»æ•£åŒ–(é‡‡æ ·)</h2><p>è™½ç„¶ä¸€èˆ¬æˆ‘ä»¬å¤„ç†çš„æ•°æ®éƒ½æ˜¯é»˜è®¤ç¦»æ•£æ•°æ®ï¼Œä½†æ—¢ç„¶éƒ½åˆ°è¿™é‡Œäº†ï¼Œå°±é¡ºä¾¿æä¸€ä¸‹è¿™ä¸€å—çŸ¥è¯†ã€‚</p>
<p>å¯¹äºè¿ç»­ä¿¡å·çš„é‡‡æ ·ï¼Œå¯ä»¥ä½¿ç”¨å†²æ¿€å‡½æ•°è¡¨è¾¾ï¼š</p>
<script type="math/tex; mode=display">
x[n]=x(t)âˆ‘^{âˆ}_{n=-âˆ}Î´(tâˆ’nT_s)</script><p>å› ä¸ºæ—¶åŸŸç›¸ä¹˜ç­‰ä»·äºé¢‘åŸŸå·ç§¯ï¼Œè€Œå†²æ¿€ä¸²åœ¨é¢‘åŸŸä¸Šè¡¨ç°ä»ä¸ºç­‰è·(f_s)å†²æ¿€ä¸²ï¼Œå› æ­¤<u>åŸä¿¡å·åœ¨é¢‘åŸŸä¸Šä¼šè¡¨ç°ä¸ºä»¥f_sçš„è·ç¦»å¤åˆ¶å‡ºç°</u>ï¼Œå½“ä¿¡å·çš„æœ€å¤§é¢‘ç‡æˆåˆ†å¤§äºé‡‡æ ·ç‡f_sæ—¶å°±ä¼šå‡ºç°<strong>æ··å ç°è±¡</strong>ï¼Œå› æ­¤ä¹Ÿæœ‰äº†å¥ˆå¥æ–¯ç‰¹å®šç†ï¼š</p>
<script type="math/tex; mode=display">
Ï‰_sâˆ’Ï‰_{max}>Ï‰_{max}â‡’Ï‰_s>2Ï‰_{max}</script><h2 id="ç¦»æ•£å‚…é‡Œå¶å˜æ¢DFT"><a href="#ç¦»æ•£å‚…é‡Œå¶å˜æ¢DFT" class="headerlink" title="ç¦»æ•£å‚…é‡Œå¶å˜æ¢DFT"></a>ç¦»æ•£å‚…é‡Œå¶å˜æ¢DFT</h2><p>å¯¹é¢‘ç‡åŒæ ·è¿›è¡Œç¦»æ•£åŒ–åï¼Œå°†å…¶å’Œx[n]å¸¦å…¥FTå…¬å¼ä¸­åˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
X[k]=âˆ‘^{N-1}_{n=0}x[n]e^{âˆ’j\frac{2\pi}{N}kn}</script><p>å…¶ä¸­k,n=0,1,2â€¦ï¼Œkä»£è¡¨é¢‘ç‡ç´¢å¼•ï¼Œnä»£è¡¨æ—¶é—´ç´¢å¼•ï¼ŒNä¸ºæ—¶åŸŸæ€»é‡‡æ ·ç‚¹æ•°ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æä¸€ä¸‹ï¼Œå¯¹äº<strong>ç¦»æ•£</strong>å¤æŒ‡æ•°ï¼šï¼ˆç”±æ¬§æ‹‰å…¬å¼å¾—ï¼‰</p>
<script type="math/tex; mode=display">
e^{âˆ’ja}=e^{âˆ’j(a+2\pi)}</script><p>å› æ­¤å¯¹äºè¿ç»­çš„X(w)ï¼Œå…¶æ˜¯2piå‘¨æœŸçš„ï¼Œå› æ­¤å¯¹é¢‘ç‡ç¦»æ•£é‡‡æ ·ä¸­æ˜¯2pi/N</p>
<p>ä¹Ÿè®¸ä½ ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼šé¢‘åŸŸçš„é‡‡æ ·è§„åˆ™è¦éµå¾ªæ—¶åŸŸé‡‡æ ·æ•°Nå—ï¼Ÿæ˜¯çš„ï¼Œä¸”<strong>å¿…é¡»å®Œå…¨ä¸€è‡´</strong>ï¼Œè¿™äºæ­£äº¤é¢‘ç‡åŸºç›¸å…³ï¼Œä¸è¯¦ç»†å±•å¼€ï¼ˆå…¶å®æˆ‘ä¹Ÿçœ‹ä¸æ‡‚ï¼‰ï¼Œ<strong>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€äº›FFTåº“å‡½æ•°çš„æ—¶å€™ï¼Œè¾“å…¥å‚æ•°nåï¼Œæ—¶åŸŸæ•°æ®ä¼šé¦–å…ˆè¢«å‰ªåˆ‡ä¸ºné•¿åº¦ï¼Œæœ€ç»ˆè¾“å‡ºçš„é¢‘åŸŸbinæ•°é‡ä¹Ÿä¸ºn</strong></p>
<p>ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘ä¹‹å‰çš„ä¸€ä¸ªè¯¯åŒºï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºè¾“å…¥çš„å‚æ•°nåªå†³å®šæœ€ç»ˆè¾“å‡ºçš„é¢‘ç‡binæ•°é‡ï¼Œæˆ‘è¿˜ä¸€ç›´è¯»å–ä¸€ä¸ªçˆ†é•¿çš„æ—¶åŸŸæ•°æ®ï¼Œç»“æœæœ€åå‡½æ•°åªä¼šä½¿ç”¨å‰nä¸ªæ•°æ®ï¼‰</p>
<p>å¯¹äºå¸¸ç”¨çš„FFTï¼Œå…¶ä¸æ˜¯ä¸€ç§æ–°çš„å˜æ¢ï¼Œè€Œæ˜¯DFTçš„é«˜æ•ˆè®¡ç®—ç®—æ³•ï¼Œ<strong>åœ¨ç»“æœå®Œå…¨ç­‰ä»·çš„å‰æä¸‹ï¼Œå¤§å¹…é™ä½äº†è®¡ç®—é‡</strong></p>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£é€†è¿åŠ¨å­¦</title>
    <url>/2025/10/17/robo-chapter3/</url>
    <content><![CDATA[<h1 id="å››ä¸ªè¿æ†å‚æ•°"><a href="#å››ä¸ªè¿æ†å‚æ•°" class="headerlink" title="å››ä¸ªè¿æ†å‚æ•°"></a>å››ä¸ªè¿æ†å‚æ•°</h1><ul>
<li><p>è¿æ†æœ¬èº«</p>
<ul>
<li><p>è¿æ†é•¿åº¦aï¼šé¦–å°¾ä¸¤å…³èŠ‚è½´çº¿è·ç¦»ï¼ˆå½“ä¸¤è½´ä¸å¹³è¡Œæ—¶ï¼Œå…¬å‚çº¿åªæœ‰ä¸€æ¡ï¼‰</p>
</li>
<li><p>æ‰­è½¬è§’Î±ï¼šé¦–å°¾ä¸¤å…³èŠ‚è½´çº¿å¤¹è§’ï¼ˆæŠ•å½±åˆ°åŒä¸€å¹³é¢ï¼‰</p>
</li>
</ul>
</li>
<li><p>è¿æ†è¿æ¥ï¼ˆå…³èŠ‚ï¼‰</p>
<ul>
<li>è¿æ†åè·d_iï¼šå…³èŠ‚iå¤„ï¼Œè¿æ†iåç¦»i-1çš„è·ç¦»</li>
<li>å…³èŠ‚è§’Î¸_iï¼šå…³èŠ‚iå¤„ï¼Œè¿æ†iä¸i-1çš„å¤¹è§’</li>
</ul>
</li>
</ul>
<p>å¯¹äºè½¬åŠ¨å…³èŠ‚ï¼Œé™¤<strong>å…³èŠ‚è§’</strong>å¤–ï¼Œå…¶ä»–å‚æ•°ä¸å˜ï¼›å¯¹äºç§»åŠ¨å…³èŠ‚ï¼Œé™¤<strong>åè·</strong>å¤–å…¶ä»–å‚æ•°ä¸å˜</p>
<p><u><strong>ç†è§£ï¼šå°†ä¸€ä¸ªè½¬åŠ¨å…³èŠ‚æƒ³è±¡ä¸ºåœ†æŸ±ï¼Œå‚ç›´äºåœ†æŸ±ä¾§é¢çš„ä¸ºè¿æ†é•¿åº¦aï¼Œå®ƒçš„è½¬è§’ä¸ºå…³èŠ‚è§’Î¸ï¼›æ²¿ç€åœ†æŸ±è½´çº¿çš„ä¸ºåè·dï¼›æ§åˆ¶åœ†æŸ±åˆå§‹ä½å§¿çš„ä¸ºæ‰­è½¬è§’Î±</strong></u></p>
<h1 id="æ­£è¿åŠ¨å­¦"><a href="#æ­£è¿åŠ¨å­¦" class="headerlink" title="æ­£è¿åŠ¨å­¦"></a>æ­£è¿åŠ¨å­¦</h1><p>å·²çŸ¥æœºå™¨äººå„è¿æ†å‚æ•°ï¼Œæ±‚æœ«ç«¯ä½å§¿ã€‚</p>
<p>å¯¹äºæœºå™¨äººçš„ä¸¤ä¸ªè¿æ†ä¹‹é—´çš„å˜æ¢ï¼Œç”±å››ä¸ªè¿æ†å‚æ•°å†³å®šï¼›è€Œè¿æ†é•¿åº¦aå’Œè¿æ†è½¬è§’Î±ç”±æœºæ¢°ç³»ç»Ÿå†³å®šï¼Œä¸æ˜¯å˜é‡ï¼Œæ ¹æ®å…³èŠ‚ç±»å‹çš„ä¸åŒï¼Œå¯¹äºä»»æ„æœºå™¨äººï¼Œ<strong>è¿™ä¸ªåæ ‡ç³»å˜æ¢éƒ½æ˜¯åªæœ‰ä¸€ä¸ªå˜é‡çš„å‡½æ•°</strong></p>
<p>å› æ­¤å¯¹äºæœºå™¨äººæœ«ç«¯æ‰§è¡Œå™¨åæ ‡ç³»{N}ç›¸å¯¹äºåæ ‡ç³»{0}çš„å˜æ¢çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
^0_NT=^0_1T^1_2T^2_3T...^{N-1}_NT</script><h2 id="DHå‚æ•°æ³•ï¼ˆæ”¹è¿›ï¼‰"><a href="#DHå‚æ•°æ³•ï¼ˆæ”¹è¿›ï¼‰" class="headerlink" title="DHå‚æ•°æ³•ï¼ˆæ”¹è¿›ï¼‰"></a>DHå‚æ•°æ³•ï¼ˆæ”¹è¿›ï¼‰</h2><p>å¯¹äºæ¯ä¸ªè¿æ†çš„åæ ‡ç³»ï¼Œé€šå¸¸é€‰æ‹©è½´çº¿æ–¹å‘ä¸ºZè½´ï¼ŒXè½´æ²¿ç€è¿æ†æ–¹å‘ï¼ˆå½“è¿æ†é•¿åº¦ä¸º0æ—¶ï¼ŒXè½´å‚ç›´äºZ_{i-1}å’ŒZiçš„å¹³é¢ï¼‰ï¼Œæ ¹æ®å³æ‰‹å®šå¾‹ç¡®å®šYè½´ã€‚åœ¨æ”¹è¿›DHå‚æ•°æ³•ä¸­ï¼Œåæ ‡ç³»{i}ä¸å…³èŠ‚iå›ºè¿</p>
<p>å› æ­¤ï¼Œå½“æˆ‘ä»¬è¦æ±‚è§£è¿æ†i-1åˆ°è¿æ†içš„å˜æ¢æ—¶ï¼ˆä¹Ÿå°±æ˜¯{i-1}åˆ°{i}çš„å˜æ¢ï¼‰ï¼Œéœ€è¦ï¼š</p>
<ul>
<li>a_{<strong>i-1</strong>}</li>
<li>Î±_{<strong>i-1</strong>}</li>
<li>d_i</li>
<li>Î¸_i</li>
</ul>
<p>å…¶ä¸­aå’ŒÎ±è¡¨ç¤ºè¿æ†ä¿¡æ¯ï¼Œdå’ŒÎ¸è¡¨ç¤ºå…³èŠ‚ä¿¡æ¯</p>
<p>åœ¨æ”¹è¿›DHå‚æ•°ä¸‹ï¼Œ<strong>æ¯ä¸ªåæ ‡ç³»ï¼ˆè¿æ†ï¼‰ä¹‹é—´çš„å˜æ¢çŸ©é˜µåˆåŒ…æ‹¬äº†ä¸€ä¸ªå˜é‡çŸ©é˜µå’Œä¸‰ä¸ªå¸¸é‡çŸ©é˜µçš„ä¹˜ç§¯</strong>ï¼Œå…¶é€šç”¨å½¢å¼å¯è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
^{i-1}_iT = 
\begin{bmatrix}
\cos\theta_i & -\sin\theta_i & 0 & a_{i-1} \\
\sin\theta_i \cos\alpha_{i-1} & \cos\theta_i \cos\alpha_{i-1} & -\sin\alpha_{i-1} & -d_i \sin\alpha_{i-1} \\
\sin\theta_i \sin\alpha_{i-1} & \cos\theta_i \sin\alpha_{i-1} & \cos\alpha_{i-1} & d_i \cos\alpha_{i-1} \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p>æ³¨ï¼šæ ‡å‡†DHå’Œæ”¹è¿›DHçš„å˜æ¢çŸ©é˜µä¸åŒ</p>
<h2 id="æ˜“æ··æ·†ç‚¹"><a href="#æ˜“æ··æ·†ç‚¹" class="headerlink" title="æ˜“æ··æ·†ç‚¹"></a>æ˜“æ··æ·†ç‚¹</h2><p>å¯¹äºæ”¹è¿›DHï¼Œåæ ‡ç³»{i}æ˜¯<strong>å›ºå®šåœ¨è¿æ†i</strong>ä¸Šï¼Œè€Œä¸æ˜¯å…³èŠ‚iï¼Œå› ä¸ºåæ ‡ç³»ç”¨äºè¿æ†ä¹‹é—´çš„åæ ‡å˜æ¢ï¼ŒåŒ…å«äº†è¿æ†æœ¬èº«å¸¦æ¥çš„å˜æ¢ï¼ˆaä¸Î±ï¼‰ä¸å…³èŠ‚å¸¦æ¥çš„å˜æ¢ï¼ˆdä¸Î¸ï¼‰ï¼Œè¯´åˆ°åº•ï¼Œå¯ä»¥ç›´æ¥å¿˜è®°å…³èŠ‚çš„æ¦‚å¿µï¼Œæ¯•ç«Ÿå˜æ¢éƒ½æ˜¯æŒ‡è¿æ†é—´çš„å˜æ¢</p>
<h2 id="åæ ‡ç³»æ ‡å‡†å‘½å"><a href="#åæ ‡ç³»æ ‡å‡†å‘½å" class="headerlink" title="åæ ‡ç³»æ ‡å‡†å‘½å"></a>åæ ‡ç³»æ ‡å‡†å‘½å</h2><ul>
<li>åŸºåæ ‡ç³»ï¼šæœºå™¨äººçš„åŸºåº§{B}</li>
<li>å·¥ä½œå°åæ ‡ç³»ï¼šæœºå™¨äººå·¥ä½œå°çš„åæ ‡ç³»{S}ï¼Œå¯ä»¥æ˜¯æ¡Œå­ã€åœ°é¢ä¸ŠæŸä¸ªé€šç”¨åæ ‡ç³»ï¼Œå¸¸æ ¹æ®åŸºåæ ‡ç³»ç¡®å®š</li>
<li>è…•éƒ¨åæ ‡ç³»ï¼šæœ«ç«¯è¿æ†è½´çš„åæ ‡ç³»{W}</li>
<li>å·¥å…·åæ ‡ç³»ï¼šæœºå™¨äººæœ«ç«¯åæ ‡ç³»{T}</li>
<li>ç›®æ ‡åæ ‡ç³»ï¼šå¯¹æœºå™¨äººå¤¹æŒçš„ç‰©ä»¶ç­‰çš„åæ ‡ç³»æè¿°{G}</li>
</ul>
<h1 id="é€†è¿åŠ¨å­¦"><a href="#é€†è¿åŠ¨å­¦" class="headerlink" title="é€†è¿åŠ¨å­¦"></a>é€†è¿åŠ¨å­¦</h1><p>å·²çŸ¥æœºå™¨äººæœ«ç«¯<strong>ä½å§¿</strong>ï¼Œæ±‚å„è¿æ†åè·orå…³èŠ‚è§’ã€‚è¯¥é—®é¢˜å¯åˆ†ä¸ºä¸¤æ­¥ï¼šï¼ˆ1ï¼‰æ±‚å‡ºè…•éƒ¨åæ ‡ç³»{W}ç›¸å¯¹äºåŸºåæ ‡{B}çš„å˜æ¢çŸ©é˜µï¼›ï¼ˆ2ï¼‰åº”ç”¨é€†è¿åŠ¨å­¦æ±‚è§£å…³èŠ‚è§’</p>
<h2 id="å·¥ä½œç©ºé—´æè¿°"><a href="#å·¥ä½œç©ºé—´æè¿°" class="headerlink" title="å·¥ä½œç©ºé—´æè¿°"></a>å·¥ä½œç©ºé—´æè¿°</h2><p>åœ¨è¿›è¡Œé€†è¿åŠ¨å­¦æ±‚è§£ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦è®¨è®ºè§£çš„å­˜åœ¨æ€§ï¼Œå³æœºå™¨äººæ˜¯å¦èƒ½å¤Ÿè¾¾åˆ°æœŸæœ›ä½å§¿ï¼Œè€Œè¿™å–å†³äºæœºå™¨äººçš„å·¥ä½œç©ºé—´ï¼Œè€Œç¡®å®šå·¥ä½œç©ºé—´çš„æ–¹æ³•å°±æ˜¯ç»™å‡º{W}çš„åæ ‡ç³»è¡¨è¾¾å¼ï¼Œä¸€ä¸ªå«æœ‰nä¸ªå˜é‡çš„å‡½æ•°</p>
<p>å½“å·²çŸ¥ç›®æ ‡ç‚¹</p>
<script type="math/tex; mode=display">
^BP_{P_{org}}=\begin{bmatrix}x_p \\y_p\\z_p \end{bmatrix}</script><p>åˆ™å¯é€šè¿‡æ±‚è§£{P}å„è½´åœ¨{B}ä¸‹çš„åæ ‡ä»¥å¾—åˆ°{P}çš„åæ ‡ç³»è¡¨ç¤ºï¼šï¼ˆæ—‹è½¬çŸ©é˜µçš„å®šä¹‰ï¼‰</p>
<script type="math/tex; mode=display">
^B_PT=\begin{bmatrix}^B\hat{X}_P &^B\hat{Y}_P &^B \hat{Z}_P & ^BP_{p_{org}}\\
0 & 0 & 0 & 1\end{bmatrix}</script><p>è€Œå¯¹äºè½´çŸ¢é‡çš„æ±‚è§£ï¼Œé€šå¸¸è¦ç»“åˆå®é™…æƒ…å†µä¸å‰ä¹˜</p>
<p>å› æ­¤ï¼Œä»»ä½•ä¸æ»¡è¶³è¯¥å·¥ä½œç©ºé—´çš„{W}å‡åœ¨æœºå™¨äººå·¥ä½œç©ºé—´ä¹‹å¤–</p>
<p>ï¼ˆçœ‹çš„ä¸æ˜¯å¾ˆæ‡‚ï¼Œç›®å‰æ„Ÿè§‰å½±å“ä¸å¤§ï¼‰</p>
<h2 id="ä»£æ•°æ³•æ±‚è§£é€†è¿åŠ¨å­¦"><a href="#ä»£æ•°æ³•æ±‚è§£é€†è¿åŠ¨å­¦" class="headerlink" title="ä»£æ•°æ³•æ±‚è§£é€†è¿åŠ¨å­¦"></a>ä»£æ•°æ³•æ±‚è§£é€†è¿åŠ¨å­¦</h2><p>åˆ©ç”¨æ­£è¿åŠ¨å­¦æ–¹ç¨‹ï¼Œé€šè¿‡ä»£æ•°å˜æ¢ï¼ˆå¦‚ç§»é¡¹ã€ä¸‰è§’æ’ç­‰å¼ç­‰ï¼‰ç›´æ¥æ±‚è§£å…³èŠ‚å˜é‡ã€‚é€‚ç”¨äºå¹³é¢ã€å°‘è‡ªç”±åº¦æœºå™¨äººé€†è¿åŠ¨å­¦æ±‚è§£</p>
<p>å¯¹äºä¸€ä¸ªä¸‰è¿æ†å¹³é¢æœºå™¨äººï¼Œå½“å·²çŸ¥é™¤Î¸å¤–å…¶ä»–è¿æ†å‚æ•°æ—¶ï¼Œå¯ä»¥æ ¹æ®åæ ‡è½´çŸ¢é‡å¾—åˆ°{W}çš„æ­£è¿åŠ¨å­¦å‡½æ•°ï¼Œï¼ˆå‡è®¾{W}å°±åœ¨è¿æ†3çš„å…³èŠ‚å¤„ï¼Œç›®æ ‡ç‚¹åœ¨{W}ä¸Šï¼‰ï¼Œå› æ­¤å½“ç»™å®šç›®æ ‡ç‚¹ä½å§¿æ—¶ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
c_{123} & -s_{123} & 0.0 & l_1c_1 + l_2c_{12} \\
s_{123} & c_{123} & 0.0 & l_1s_1 + l_2s_{12} \\
0.0 & 0.0 & 1.0 & 0.0 \\
0 & 0 & 0 & 1
\end{bmatrix}=
\begin{bmatrix}
c_{\phi} & -s_{\phi} & 0.0 & x \\
s_{\phi} & c_{\phi} & 0.0 & y \\
0.0 & 0.0 & 1.0 & 0.0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p>å…¶ä¸­Î¦ï¼Œxï¼Œyï¼Œl_1ï¼Œl_2ä¸ºå·²çŸ¥å€¼ã€‚å³æ ¹æ®å››ä¸ªéçº¿æ€§æ–¹ç¨‹æ±‚è§£ä¸‰ä¸ªæœªçŸ¥æ•°ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°æ‰€æœ‰å¯èƒ½è§£</p>
<p>ï¼ˆå°†æ–¹ç¨‹ä¸¤è¾¹å¹³æ–¹ç›¸åŠ ï¼Œæ¶ˆå»Î¸â‚ï¼Œåˆ©ç”¨ä½™å¼¦å®šç†ç›´æ¥æ±‚è§£Î¸â‚‚ï¼Œå†åæ±‚Î¸â‚ï¼Œæœ€åç”¨arctanæ±‚Î¦ï¼Œå‡å»Î¸â‚ï¼ŒÎ¸â‚‚å¾—åˆ°Î¸3ï¼‰</p>
<h2 id="å‡ ä½•æ³•æ±‚è§£é€†è¿åŠ¨å­¦"><a href="#å‡ ä½•æ³•æ±‚è§£é€†è¿åŠ¨å­¦" class="headerlink" title="å‡ ä½•æ³•æ±‚è§£é€†è¿åŠ¨å­¦"></a>å‡ ä½•æ³•æ±‚è§£é€†è¿åŠ¨å­¦</h2><p>å³é€šè¿‡ä¸‰è§’å‡½æ•°è¿›è¡Œå‡ ä½•åˆ†ææ±‚å„è§’åº¦ï¼Œä¸ä»£æ•°æ³•æœ¬è´¨ç›¸åŒï¼Œä¸å†è¯¦ç»†å±•å¼€</p>
<h2 id="æ•°å€¼æ³•æ±‚è§£é€†è¿åŠ¨å­¦"><a href="#æ•°å€¼æ³•æ±‚è§£é€†è¿åŠ¨å­¦" class="headerlink" title="æ•°å€¼æ³•æ±‚è§£é€†è¿åŠ¨å­¦"></a>æ•°å€¼æ³•æ±‚è§£é€†è¿åŠ¨å­¦</h2><p>ä½¿ç”¨è¿­ä»£æ•°å€¼æ±‚è§£ï¼Œè¿™é‡Œæš‚æ—¶ä¸æ·±ç©¶ï¼Œéœ€è¦æ—¶å†æ‰©å……</p>
]]></content>
      <tags>
        <tag>æœºå™¨äººå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>ç©ºé—´æè¿°å’Œå˜æ¢</title>
    <url>/2025/10/14/robo-chapter2/</url>
    <content><![CDATA[<h1 id="ä½å§¿æè¿°ä¸å˜æ¢"><a href="#ä½å§¿æè¿°ä¸å˜æ¢" class="headerlink" title="ä½å§¿æè¿°ä¸å˜æ¢"></a>ä½å§¿æè¿°ä¸å˜æ¢</h1><h2 id="å§¿æ€æè¿°"><a href="#å§¿æ€æè¿°" class="headerlink" title="å§¿æ€æè¿°"></a>å§¿æ€æè¿°</h2><p>å¯¹äºç©ºé—´ä¸­ä¸€ä¸ªåæ ‡ç³»{B}ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»{W}çš„å§¿æ€ï¼Œå¯ä»¥é€šè¿‡æ—‹è½¬çŸ©é˜µRè¿›è¡Œè¡¨ç¤ºï¼š</p>
<script type="math/tex; mode=display">
^W_B\mathbf{R} = \begin{bmatrix}
r_{11} & r_{12} & r_{13} \\
r_{21} & r_{22} & r_{23} \\
r_{31} & r_{32} & r_{33}
\end{bmatrix}</script><p>æ—‹è½¬çŸ©é˜µä»…æè¿°å½“å‰åæ ‡ç³»ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»çš„<strong>æ—‹è½¬å§¿æ€</strong>ï¼Œ<u>ä¸åŒ…å«å¹³ç§»ä¿¡æ¯</u>ï¼Œå› æ­¤å¯ä»¥å°†æ—‹è½¬çŸ©é˜µçš„<strong>æ¯ä¸€åˆ—</strong>æƒ³è±¡æˆå°†åŸç‚¹é‡åˆåï¼Œå½“å‰åæ ‡ç³»Xã€Yã€Z<strong>å•ä½çŸ¢é‡</strong>åœ¨{W}å„è½´çš„æŠ•å½±ï¼ˆ<strong>ä¹Ÿå°±æ˜¯å„è½´çŸ¢é‡åœ¨{W}ä¸‹çš„åæ ‡</strong>ï¼‰ã€‚å› æ­¤ä¹Ÿæœ‰ï¼š</p>
<script type="math/tex; mode=display">
^W_B\mathbf{R} = \begin{bmatrix}
\hat{X}_B \cdot \hat{X}_W & \hat{Y}_B \cdot \hat{X}_W & \hat{Z}_B \cdot \hat{X}_W \\
\hat{X}_B \cdot \hat{Y}_W & \hat{Y}_B \cdot \hat{Y}_W & \hat{Z}_B \cdot \hat{Y}_W \\
\hat{X}_B \cdot \hat{Z}_W & \hat{Y}_B \cdot \hat{Z}_W & \hat{Z}_B \cdot \hat{Z}_W
\end{bmatrix}=\begin{bmatrix}^B\hat{X}_W &^B\hat{Y}_W &^B \hat{Z}_W\end{bmatrix}</script><p>ç”±äºè¿™äº›çŸ¢é‡å‡ä¸ºå•ä½å‘é‡ï¼Œå› æ­¤å®ƒä»¬çš„ç‚¹ç§¯åˆ™ç›´æ¥ä»£è¡¨äº†ä¸¤ä¸ªçŸ¢é‡å¤¹è§’çš„ä½™å¼¦å€¼ï¼ˆçŸ¢é‡ç‚¹ç§¯çš„æ€§è´¨ï¼‰ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>å¯¹äºä¸¤ä¸ªåæ ‡ç³»è€Œå·²ï¼Œå®ƒä»¬ä¹‹é—´çš„äº’ç›¸å½¢æˆçš„ä¸¤ä¸ªæ—‹è½¬çŸ©é˜µä¸æ˜¯ç›¸åŒçš„ï¼ˆäº’ä¸ºè½¬ç½®ï¼‰</strong></p>
<p>ç”±äºæ—‹è½¬æ˜¯ç›¸å¯¹çš„ã€å¯é€†çš„ï¼Œå› æ­¤æ—‹è½¬çŸ©é˜µä¸ºä¸€ä¸ªæ­£äº¤é˜µï¼ˆé€†ç­‰äºè½¬ç½®ï¼‰</p>
<h2 id="åæ ‡ç³»æè¿°"><a href="#åæ ‡ç³»æè¿°" class="headerlink" title="åæ ‡ç³»æè¿°"></a>åæ ‡ç³»æè¿°</h2><p>å½“å·²çŸ¥æ—‹è½¬çŸ©é˜µåï¼Œåªéœ€çŸ¥é“åæ ‡ç³»{B}åŸç‚¹ç›¸å¯¹äºå‚è€ƒåæ ‡ç³»ï¼ˆè¿˜æ˜¯å‡è®¾ä¸ºä¸–ç•Œåæ ‡ç³»{W}ï¼‰çš„åæ ‡ï¼Œå³å¯æè¿°åæ ‡ç³»{B}çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<script type="math/tex; mode=display">
\{B\}=\{^W_B\mathbf{R},^W\mathbf{P_{B_{org}}}\}</script><p>å…¶ä¸­Pæ˜¯åæ ‡ç³»{B}åŸç‚¹<strong>åœ¨{W}ä¸­çš„åæ ‡å‘é‡</strong></p>
<p>å› æ­¤ï¼Œä¸€ä¸ªåæ ‡ç³»å¯ä»¥é€šè¿‡ä»»æ„å¦ä¸€åæ ‡ç³»è¡¨ç¤ºå‡ºæ¥</p>
<h2 id="å˜æ¢æ˜ å°„"><a href="#å˜æ¢æ˜ å°„" class="headerlink" title="å˜æ¢æ˜ å°„"></a>å˜æ¢æ˜ å°„</h2><p>å¯¹äº{B}ä¸­çš„ä¸€ä¸ªçŸ¢é‡Pï¼Œè‹¥æƒ³ç”¨å‚è€ƒåæ ‡ç³»{A}å°†å…¶è¡¨ç¤ºï¼Œå¯¹äºå•çº¯å¹³ç§»ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
^AP=^BP+^W\mathbf{P_{B_{org}}}</script><p>å¯¹äºå•çº¯æ—‹è½¬ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
^AP=^A_B\mathbf{R}^BP</script><p>å› æ­¤å¯¹äºä¸€èˆ¬æƒ…å†µï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}^AP \\ 1\end{bmatrix}=\begin{bmatrix}^A_B\mathbf{R} & ^AP_{B_{org}}\\
000 & 1\end{bmatrix}\begin{bmatrix}^BP \\ 1\end{bmatrix}</script><p>å…¶ä¸­4x4çš„TçŸ©é˜µå°±æ˜¯<strong>é½æ¬¡å˜æ¢çŸ©é˜µ</strong>ï¼Œå½“åªè¿›è¡Œæ—‹è½¬æˆ–å¹³ç§»æ—¶ï¼Œåªéœ€ä»¤æ—‹è½¬çŸ©é˜µä¸ºEæˆ–å¹³ç§»çŸ©é˜µä¸º0ï¼Œ0ï¼Œ0å³å¯</p>
<h2 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><p>å½“å­˜åœ¨å¤šä¸ªåæ ‡ç³»è½¬æ¢æ—¶ï¼šï¼ˆæ³¨æ„Tçš„åˆæˆæ˜¯å³ä¹˜ï¼‰</p>
<script type="math/tex; mode=display">
^AP=^A_B\mathbf{T}^B_C\mathbf{T}^CP=^A_CT^CP</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
^A_CT=\begin{bmatrix}^A_B\mathbf{R}^B_C\mathbf{R} & ^AP_{B_{org}}+^A_B\mathbf{R}^BP_{C_{org} }
\\
000 & 1\end{bmatrix}</script><p>å¯¹äºæ—‹è½¬æ˜ å°„ï¼Œæœ‰ï¼šï¼ˆæ³¨æ„é¡ºåºï¼‰</p>
<script type="math/tex; mode=display">
^A_C\mathbf{R}=^A_B\mathbf{R}^B_C\mathbf{R}</script><p><strong>å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Aé½æ¬¡å˜æ¢çŸ©é˜µä¸­ä»£è¡¨å¹³ç§»çš„æ˜ å°„ï¼š</strong></p>
<script type="math/tex; mode=display">
^AP_{C_{org}}=^AP_{B_{org}}+^A_B\mathbf{R}^BP_{C_{org}} \neq ^AP_{B_{org}}+^BP_{C_{org}}</script><p>è™½ç„¶åœ¨ç©ºé—´ä¸Šæ¥çœ‹{C}åŸç‚¹åœ¨{A}ä¸­çš„åæ ‡çŸ¢é‡æ„Ÿè§‰å°±æ˜¯ä¸‰ä¸ªåæ ‡ç³»åŸç‚¹é—´çŸ¢é‡çš„é¦–å°¾ç›¸åŠ ï¼Œ<strong><u>ä½†å…¶å®å¯¹CåŸç‚¹åœ¨{A}ä¸­çš„çŸ¢é‡åæ ‡éƒ½åº”è¯¥ç»Ÿä¸€åˆ°{A}åæ ‡ç³»ä¸‹è¿›è¡Œè®¡ç®—</u></strong>ï¼Œè€Œ</p>
<script type="math/tex; mode=display">
^BP_{C_{org}}</script><p>æ˜¯CåŸç‚¹åœ¨{B}ä¸‹çš„åæ ‡çŸ¢é‡ï¼Œå…¶åœ¨{A}ä¸­çš„è¡¨è¾¾è¿˜éœ€è¦ä¹˜ä¸€ä¸ª{B}ç›¸å¯¹äº{A}çš„<strong>æ—‹è½¬æ˜ å°„</strong></p>
<p>ç»¼ä¸Šï¼Œå¯ä»¥æ¨å¯¼å‡ºï¼Œåœ¨å¤šä¸ªåæ ‡ç³»å˜æ¢æ—¶ï¼Œå¹³ç§»æ˜ å°„ä¸­åªæœ‰{A}çš„ä¸‹ä¸€ä¸ªåæ ‡ç³»å¹³ç§»æ˜ å°„ä¸éœ€è¦ä¹˜æ—‹è½¬æ˜ å°„ï¼Œå…¶ä½™æ‰€æœ‰å¹³ç§»æ˜ å°„éƒ½éœ€è¦ä¹˜è¯¥åæ ‡ç³»ç›¸å¯¹äº{A}çš„æ—‹è½¬æ˜ å°„ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">
^AP_{N_{org}}=^AP_{B_{org}}+^A_B\mathbf{R}^BP_{C_{org}}+^A_C\mathbf{R}^CP_{D_{org}}+...+^A_{N-1}\mathbf{R}^{N-1}P_{N_{org}}</script><p>ä½†ä¸€èˆ¬è€Œè¨€ï¼Œæƒ³è¦ç›´æ¥å¾—åˆ°å„åæ ‡ç³»ç›¸å¯¹å‚è€ƒåæ ‡ç³»{A}çš„æ—‹è½¬çŸ©é˜µæ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œæ‰€ä»¥æ›´å¸¸è§çš„å†™æ³•æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
{}^A P_{N_{org}} 
= {}^A P_{B_{org}}
+ {}^A_{B}\mathbf{R}
\Big(
{}^B P_{C_{org}}
+ {}^B_{C}\mathbf{R}
\big(
{}^C P_{D_{org}}
+ {}^C_{D}\mathbf{R}
\big(
{}^D P_{E_{org}}
+ \cdots
+ {}^{N-1}_{N}\mathbf{R}\,{}^{N}P_{N_{org}}
\big)
\big)
\Big)</script><p>ä¹Ÿå°±æ˜¯é½æ¬¡å˜æ¢çŸ©é˜µç›¸ä¹˜å<strong>å¹³ç§»é¡¹</strong>çš„è¡¨è¾¾</p>
<h2 id="é€†å˜æ¢"><a href="#é€†å˜æ¢" class="headerlink" title="é€†å˜æ¢"></a>é€†å˜æ¢</h2><p>å¯¹äºæ±‚å…¶æ¬¡çŸ©é˜µçš„é€†å˜æ¢ï¼Œå¯¹äº<strong>æ—‹è½¬çŸ©é˜µï¼Œç”±äºå…¶ä¸ºæ­£äº¤é˜µï¼Œå› æ­¤ç›´æ¥å–è½¬ç½®</strong>å³å¯ï¼›å¯¹äºå¹³ç§»ç®—æ˜ å°„ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
^BP_{A_{org}}=-^A_BR^T{^AP_{B_{org}}}</script><p>å³æœ€ç»ˆé€†å˜æ¢é½æ¬¡å˜æ¢çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
^B_AT=\begin{bmatrix}^A_B\mathbf{R}^T & -^A_BR^T{^AP_{B_{org}}}\\
000 & 1\end{bmatrix}</script><p>æ¨å¹¿åˆ°Nä¸ªåæ ‡ç³»ä¸­æ—¶ï¼Œæ³¨æ„æ­¤æ—¶æ—‹è½¬ç®—å­ä¹˜ç§¯é¡ºåºæ˜¯<strong>ååºçš„</strong></p>
<h1 id="å…¶æ¬¡å˜æ¢çŸ©é˜µçš„å…¶ä»–å®šä¹‰"><a href="#å…¶æ¬¡å˜æ¢çŸ©é˜µçš„å…¶ä»–å®šä¹‰" class="headerlink" title="å…¶æ¬¡å˜æ¢çŸ©é˜µçš„å…¶ä»–å®šä¹‰"></a>å…¶æ¬¡å˜æ¢çŸ©é˜µçš„å…¶ä»–å®šä¹‰</h1><p>å¯¹äºé½æ¬¡å˜æ¢çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
^A_BT</script><p>å…¶æœ¬èº«æè¿°äº†ç›¸å¯¹äºåæ ‡ç³»{A}çš„{B}ï¼ŒåŒæ—¶å…¶ä¹Ÿå¯ä»¥æè¿°ä¸åŒåæ ‡ç³»ä¸­åŒä¸€ä¸ªçŸ¢é‡çš„æ˜ å°„å…³ç³»</p>
<p>é½æ¬¡å˜æ¢çŸ©é˜µåŒæ—¶<strong>ä¹Ÿå¯ç”¨äºæè¿°çŸ¢é‡å•çº¯çš„æ—‹è½¬ã€å¹³ç§»å˜æ¢</strong>ï¼Œè¿™æ—¶å…¶è¢«ç§°ä¸ºå˜æ¢ç®—å­ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}^AP_1 \\ 1\end{bmatrix}=\begin{bmatrix}\mathbf{R} & Q\\
000 & 1\end{bmatrix}\begin{bmatrix}^AP_2 \\ 1\end{bmatrix}</script><p>å…¶ä¸­Rä¸ºæ—‹è½¬ç®—å­ï¼ŒQä¸ºå¹³ç§»ç®—å­ï¼›</p>
<p>åœ¨å¤šæ¬¡å˜æ¢ä¸­ï¼Œå¯¹äºå¹³ç§»åªéœ€è¦è¿›è¡ŒåŠ å‡å³å¯ï¼›å¯¹äºæ—‹è½¬å˜æ¢ï¼Œå…¶é¡ºåºä¼šå½±å“Rçš„å€¼ï¼ˆè™½ç„¶æœ€ç»ˆç»“æœæ˜¯ä¸€æ ·çš„ï¼‰ï¼š</p>
<script type="math/tex; mode=display">
R_z(30)R_x(30) \neq R_x(30)R_z(30)</script>]]></content>
      <tags>
        <tag>æœºå™¨äººå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>simulinkåŸºç¡€</title>
    <url>/2025/10/13/simulink-base/</url>
    <content><![CDATA[<h1 id="å¸¸è§„æ¨¡å—"><a href="#å¸¸è§„æ¨¡å—" class="headerlink" title="å¸¸è§„æ¨¡å—"></a>å¸¸è§„æ¨¡å—</h1><h2 id="ä¿¡å·"><a href="#ä¿¡å·" class="headerlink" title="ä¿¡å·"></a>ä¿¡å·</h2><ul>
<li>æ­£å¼¦æ³¢ sine wave</li>
<li>é˜¶è·ƒä¿¡å· step</li>
<li>æ–œå¡ä¿¡å· ramp</li>
<li>å¸¸é‡ constant</li>
</ul>
<h2 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h2><ul>
<li>å¹³æ–¹æ ¹ï¼šsquare root</li>
<li>ç›¸å‡ï¼šsubtract</li>
<li>ç›¸åŠ ï¼šadd</li>
<li>ä¸¤å€¼ç›¸ä¹˜ï¼šproduct</li>
<li>å¢ç›Š Gain</li>
</ul>
<h2 id="é€»è¾‘"><a href="#é€»è¾‘" class="headerlink" title="é€»è¾‘"></a>é€»è¾‘</h2><ul>
<li>ä¸0æ¯”è¾ƒï¼šcompare to zero<ul>
<li>æ›´é€šç”¨ï¼šcompre to contrast</li>
</ul>
</li>
<li>é€»è¾‘é—¨ï¼šand or not</li>
<li>æ¡ä»¶ï¼šswitch</li>
</ul>
<h2 id="ä¿¡å·å¯¼å…¥"><a href="#ä¿¡å·å¯¼å…¥" class="headerlink" title="ä¿¡å·å¯¼å…¥"></a>ä¿¡å·å¯¼å…¥</h2><ul>
<li>signal editor</li>
</ul>
<h2 id="å‡½æ•°æ¨¡å—"><a href="#å‡½æ•°æ¨¡å—" class="headerlink" title="å‡½æ•°æ¨¡å—"></a>å‡½æ•°æ¨¡å—</h2><p>Matlab functionæ¨¡å—</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[power,v]</span> = <span class="title">fcn</span><span class="params">(deltaH)</span> %é¦–å…ˆå…ˆå®šä¹‰è¾“å‡ºä¸è¾“å…¥ï¼Œå¯å®šä¹‰å¤šä¸ªè¾“å…¥è¾“å‡ºï¼Œå¤šä¸ªè¾“å…¥ï¼š<span class="title">fcn</span><span class="params">(x1,x2)</span></span></span><br><span class="line"></span><br><span class="line">Cp = <span class="number">0.35</span>; </span><br><span class="line">rho = <span class="number">1000</span>; </span><br><span class="line">A = <span class="built_in">pi</span>*<span class="number">10</span>^<span class="number">2</span>; </span><br><span class="line">g = <span class="number">9.81</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">%å…·ä½“å‡½æ•°ï¼Œå·¦ä¾§ä¸ºè¾“å‡ºï¼Œå³ä¾§ä¸ºåŒ…å«è¾“å…¥å˜é‡çš„è®¡ç®—</span></span><br><span class="line">power = <span class="number">0.5</span>*Cp*rho*A*(<span class="number">2</span>*g*<span class="built_in">abs</span>(deltaH))^(<span class="number">3</span>/<span class="number">2</span>);</span><br><span class="line">v = <span class="built_in">sqrt</span>(<span class="number">2</span>*g*<span class="built_in">abs</span>(deltaH));</span><br></pre></td></tr></table></figure>
<h2 id="ç¦»æ•£ç³»ç»Ÿ"><a href="#ç¦»æ•£ç³»ç»Ÿ" class="headerlink" title="ç¦»æ•£ç³»ç»Ÿ"></a>ç¦»æ•£ç³»ç»Ÿ</h2><ul>
<li><p>å»¶è¿Ÿï¼šunit delayï¼Œæ¥å—ä¸€ä¸ªè¾“å…¥ä¿¡å·å¹¶åœ¨æŒ‡å®šçš„é‡‡æ ·æ—¶é—´å†…ä¿æŒå…¶å€¼</p>
<p>å½“æ­¥é•¿ä¸º-1æˆ–ç­‰äºè¾“å…¥ä¿¡å·é‡‡æ ·æ—¶é—´æ—¶ï¼Œåˆ™æ¨¡å—åœ¨tæ—¶åˆ»è¾“å‡ºt-1æ—¶åˆ»ä¿¡å·</p>
<p>å½“æ­¥é•¿ä¸ºå…¶ä»–å›ºå®šå€¼æ—¶ï¼Œå¯¹ä¿¡å·è¿›è¡Œé‡é‡‡æ ·ï¼Œå¹¶åœ¨tæ­¥è¾“å‡ºåŸä¿¡å·çš„t-1</p>
<p>å¯¹äºè¯¥ä¿¡å·ï¼Œé€šå¸¸å…ˆç¡®å®šè¾“å‡ºå†ç¡®å®šè¾“å…¥ï¼Œå¦‚æœå®¹æ˜“æ™•ï¼Œå°±å…ˆå†™å‡ºè¾“å…¥è¾“å‡ºæ˜¯ä»€ä¹ˆå†è¿›è¡Œè¿æ¥</p>
</li>
</ul>
<h2 id="è¿ç»­ç³»ç»Ÿ"><a href="#è¿ç»­ç³»ç»Ÿ" class="headerlink" title="è¿ç»­ç³»ç»Ÿ"></a>è¿ç»­ç³»ç»Ÿ</h2><ul>
<li><p>ç§¯åˆ†ï¼šintegratorï¼Œå¯¹è¿ç»­ä¿¡å·æ±‚ç§¯åˆ†</p>
<p><code>1/s</code>ä»£è¡¨äº†åœ¨såŸŸä¸Šçš„ä¼ é€’å‡½æ•°ï¼Œæœ‰æ‹‰æ™®æ‹‰æ–¯å˜æ¢ç§¯åˆ†ç‰¹æ€§å¯çŸ¥ï¼Œç§¯åˆ†æ“ä½œçš„è¾“å‡º/è¾“å…¥åœ¨såŸŸä¸Šä¸º1/s</p>
<p>å¯¹äºåŠ¨æ€å»ºæ¨¡ç³»ç»Ÿï¼Œè®°å¾—åœ¨æ¨¡å—ä¸­æ·»åŠ åˆå§‹æ¡ä»¶</p>
<p>å¯¹äºå¾®åˆ†æ–¹ç¨‹çš„å»ºæ¨¡ï¼š</p>
<ul>
<li>å…ˆå°†æœ€é«˜é˜¶å¯¼æ•°å•ç‹¬æ”¾åœ¨æ–¹ç¨‹å·¦ä¾§</li>
<li>ç¡®å®šæ–¹ç¨‹æ‰€éœ€ç§¯åˆ†æ¨¡å—æ•°é‡</li>
<li>æ„å»ºæ–¹ç¨‹å·¦è¾¹ï¼Œå°†æœ€ç»ˆè¾“å‡ºè¿æ¥è‡³ç¬¬ä¸€ä¸ªç§¯åˆ†æ¨¡å—</li>
<li>è®¾å®šåˆå§‹æ¡ä»¶</li>
</ul>
</li>
</ul>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul>
<li>æ‰“å°ä¿¡å·å€¼ display</li>
<li>ä¿¡å·å¯è§†åŒ–ï¼ˆç¤ºæ³¢å™¨ï¼‰ scope</li>
</ul>
<h1 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h1><ul>
<li>åˆ›å»ºåˆ†æ”¯ï¼šæŒ‰ä½ctrl</li>
<li>ç¿»è½¬æ¨¡å—æ–¹å‘ï¼šctrl+i</li>
</ul>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·çš„å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¥ç»ç½‘ç»œçš„ä¼˜åŒ–æ‰‹æ®µ</title>
    <url>/2025/10/05/DL-optimize/</url>
    <content><![CDATA[<h1 id="ç½‘ç»œä¼˜åŒ–"><a href="#ç½‘ç»œä¼˜åŒ–" class="headerlink" title="ç½‘ç»œä¼˜åŒ–"></a>ç½‘ç»œä¼˜åŒ–</h1><p>ç½‘ç»œä¼˜åŒ–å¯ä»¥ä»ä»¥ä¸‹å››ä¸ªæ–¹å‘å±•å¼€ï¼š</p>
<ul>
<li>ä½¿ç”¨æ›´æœ‰æ•ˆçš„ä¼˜åŒ–ç®—æ³•</li>
<li>ä½¿ç”¨æ›´å¥½çš„å‚æ•°åˆå§‹åŒ–ã€æ•°æ®é¢„å¤„ç†æ–¹æ³•</li>
<li>ä¿®æ”¹ç½‘ç»œç»“æ„ï¼ˆæ¿€æ´»å‡½æ•°ã€æ®‹å·®è¿æ¥ã€å½’ä¸€åŒ–ï¼‰</li>
<li>ä½¿ç”¨æ›´å¥½çš„è¶…å‚æ•°ä¼˜åŒ–æ–¹æ³•</li>
</ul>
<h1 id="ä¼˜åŒ–ç®—æ³•"><a href="#ä¼˜åŒ–ç®—æ³•" class="headerlink" title="ä¼˜åŒ–ç®—æ³•"></a>ä¼˜åŒ–ç®—æ³•</h1><h2 id="minibatchä¸æ¢¯åº¦ç§¯ç´¯"><a href="#minibatchä¸æ¢¯åº¦ç§¯ç´¯" class="headerlink" title="minibatchä¸æ¢¯åº¦ç§¯ç´¯"></a>minibatchä¸æ¢¯åº¦ç§¯ç´¯</h2><p>ä¸€èˆ¬è€Œè¨€ï¼Œbatchsizeè¾ƒå¤§æ—¶ä¼šè·å¾—è¾ƒç¨³å®šçš„è®­ç»ƒç»“æœï¼ˆå› æ­¤å¯ä»¥è®¾ç½®è¾ƒå¤§å­¦ä¹ ç‡ï¼‰ã€‚ä½†batchsizeä¼šè¢«GPUæ˜¾å­˜æ‰€é™åˆ¶ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æ¢¯åº¦ç´¯ç§¯çš„æ–¹å¼ï¼Œä½¿ç”¨è¾ƒå°çš„batchsizeæ¨¡æ‹Ÿå¤§batchsizeçš„è®­ç»ƒæ•ˆæœï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">batch_size = <span class="number">16</span></span><br><span class="line">accumulation_steps = <span class="number">4</span> </span><br><span class="line"><span class="keyword">for</span> i, (inputs, labels) <span class="keyword">in</span> <span class="built_in">enumerate</span>(dataloader):</span><br><span class="line">    <span class="comment"># å‰å‘ä¼ æ’­</span></span><br><span class="line">    outputs = model(inputs)</span><br><span class="line">    loss = criterion(outputs, labels)</span><br><span class="line">    loss = loss / accumulation_steps  <span class="comment"># æŸå¤±é™¤ä»¥ç´¯ç§¯æ­¥æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">    loss.backward()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¯ accumulation_steps æ¬¡æ›´æ–°ä¸€æ¬¡æƒé‡</span></span><br><span class="line">    <span class="keyword">if</span> (i + <span class="number">1</span>) % accumulation_steps == <span class="number">0</span>:</span><br><span class="line">        optimizer.step()</span><br><span class="line">        optimizer.zero_grad()</span><br></pre></td></tr></table></figure>
<p>è¯¥ä»£ç é€šè¿‡16çš„batchsizeæ¨¡æ‹Ÿäº†64batchsizeçš„è®­ç»ƒæ•ˆæœï¼Œå…·ä½“å…¶å®å°±æ˜¯æ¯4ä¸ªbatchæ‰è¿›è¡Œä¸€å±‚æ›´æ–°æƒé‡ã€‚</p>
<p>å¯¹äºpytorchï¼Œåœ¨è®¡ç®—äº†æ¯ä¸ªbatchä¸­å„<strong>æ ·æœ¬</strong>çš„lossåï¼Œä¼šå¯¹å…¶è¿›è¡Œ<strong>æ±‚å‡å€¼å¤„ç†</strong>ï¼Œå› æ­¤ä¸Šè¿°ä»£ç ä¸€æ¬¡å¾ªç¯ä¸­çš„lossä¸­åŒ…æ‹¬äº†16ä¸ªlossçš„å‡å€¼ï¼Œå› æ­¤å…¶åå‘ä¼ æ’­è®¡ç®—çš„æ¢¯åº¦ä¹Ÿæ˜¯ä¸€ä¸ª<strong>å¹³å‡æ¢¯åº¦</strong>ï¼›è€Œpytorchä¸­ï¼Œå¦‚æœä¸æ‰‹åŠ¨å¯¹æ¢¯åº¦è¿›è¡Œæ¸…é›¶ï¼ˆzero_grad()ï¼‰ï¼Œå…¶ä¼šè‡ªåŠ¨åœ¨å¾—åˆ°æ–°æ¢¯åº¦æ—¶<strong>æ±‚å’Œ</strong>ï¼Œå› æ­¤ä¸Šè¿°ä»£ç éœ€è¦ä½¿ç”¨ï¼š</p>
<p><code>loss = loss / accumulation_steps</code></p>
<p>å¯¹æ¯ä¸ªbatchçš„å¹³å‡lossæ ¹æ®accumulation_stepså†æ¬¡è¿›è¡Œå¹³å‡å¤„ç†ï¼Œæœ€åæ¯4ä¸ªbatchåç”Ÿæˆçš„lossæ‰æ˜¯batchsize=64æ—¶å¾—åˆ°çš„å¹³å‡lossï¼Œå…¶æ¢¯åº¦ä¹Ÿä¸º4ä¸ªbatchçš„å¹³å‡æ¢¯åº¦</p>
<p><strong>å¦‚æœä¸è¿›è¡Œå‡å€¼å¤„ç†ï¼Œåˆ™ç­‰åŒäºå­¦ä¹ ç‡è¢«æ”¾å¤§åŒç­‰å€æ•°</strong>ï¼Œä¼šå¯¼è‡´è®­ç»ƒä¸ç¨³å®š</p>
<h2 id="batchsizeå½±å“"><a href="#batchsizeå½±å“" class="headerlink" title="batchsizeå½±å“"></a>batchsizeå½±å“</h2><p>å¯¹äºå¼•å…¥äº†batchè¿›è¡Œå±€éƒ¨æ¢¯åº¦ä¼˜åŒ–çš„ç¥ç»ç½‘ç»œè®­ç»ƒï¼ˆå¤§å¤šæ•°è®­ç»ƒéƒ½é‡‡å–è¯¥ç­–ç•¥ï¼‰ï¼Œbatchsizeè¶Šå¤§ä¼šä»¤æ¯ä¸ªbatchçš„æ¢¯åº¦æ–¹å·®è¶Šå°ï¼Œä»è€Œä½¿è®­ç»ƒæ›´åŠ ç¨³å®šï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>å‡è®¾ä¸€ä¸ªé’ˆå¯¹çŒ«ç‹—çš„äºŒåˆ†ç±»å›¾åƒè¯†åˆ«ï¼Œå½“batchsizeè¾ƒå°æ—¶ï¼Œä¸€ä¸ªbatchå¯èƒ½å¤§éƒ¨åˆ†ç”±çŒ«ç»„æˆï¼Œè€Œå¦ä¸€ä¸ªbatchå¯èƒ½åˆå¤§éƒ¨åˆ†ç”±ç‹—ç»„æˆï¼Œè¿™å°†å¯¼è‡´è¿™<strong>ä¸¤ä¸ªbatchçš„æ¢¯åº¦å¤§æ¦‚ç‡å®Œå…¨ä¸åŒï¼Œç”šè‡³æ˜¯ç›¸åçš„æ–¹å‘</strong>ï¼ˆç”±ä¹‹å‰å¯¹åå‘ä¼ æ’­çš„æ¨åˆ°ä¸­å¯å¾—çŸ¥æŸå±‚å‚æ•°çš„åå¯¼ä¸ä¹‹å‰å±‚çš„æ¿€æ´»å‡½æ•°æ¢¯åº¦ä¸è¯¥å±‚è¾“å…¥å€¼æœ‰å…³ï¼‰ï¼Œæœ€ç»ˆ<strong>å¯¼è‡´å‚æ•°æ›´æ–°å·¦å³éœ‡è¡</strong></p>
<h2 id="å­¦ä¹ ç‡è°ƒæ•´"><a href="#å­¦ä¹ ç‡è°ƒæ•´" class="headerlink" title="å­¦ä¹ ç‡è°ƒæ•´"></a>å­¦ä¹ ç‡è°ƒæ•´</h2><h3 id="å­¦ä¹ ç‡è¡°å‡"><a href="#å­¦ä¹ ç‡è¡°å‡" class="headerlink" title="å­¦ä¹ ç‡è¡°å‡"></a>å­¦ä¹ ç‡è¡°å‡</h3><p>æ— éœ€å¤šè¨€ï¼Œè®­ç»ƒåæœŸä¸ºäº†é¿å…åœ¨æœ€ä¼˜ç‚¹é™„è¿‘æ¥å›éœ‡è¡ï¼Œè¦å¯¹å­¦ä¹ ç‡è¿›è¡Œè¡°å‡å¤„ç†ï¼Œå¸¸è§æ“ä½œæœ‰ï¼š</p>
<ul>
<li>åˆ†æ®µè¡°å‡</li>
<li>é€†æ—¶è¡°å‡</li>
<li>æŒ‡æ•°è¡°å‡</li>
<li>ä½™å¼¦è¡°å‡</li>
</ul>
<p>å…¶ä¸­é€†æ—¶ã€æŒ‡æ•°è¡°å‡å‘ˆç±»exp(-x)å½¢çŠ¶ï¼Œä½™å¼¦è¡°å‡å‘ˆä½™å¼¦ï¼ˆ0-piï¼‰å½¢çŠ¶ï¼Œå› æ­¤åœ¨è®­ç»ƒå‰æœŸå‰è€…è¡°å‡ä¼šå¤§äºåè€…ï¼Œå½“ç„¶ï¼Œå„è¡°å‡æ–¹æ³•éƒ½æœ‰å¯è°ƒå‚æ•°å¯å…·ä½“æ§åˆ¶è¡°å‡æƒ…å†µï¼Œä¸ç”¨è¿‡äºçº ç»“ã€‚</p>
<h3 id="å­¦ä¹ ç‡é¢„çƒ­"><a href="#å­¦ä¹ ç‡é¢„çƒ­" class="headerlink" title="å­¦ä¹ ç‡é¢„çƒ­"></a>å­¦ä¹ ç‡é¢„çƒ­</h3><p>ç”±äºç¥ç»ç½‘ç»œåœ¨è®­ç»ƒæœ€åˆå‚æ•°æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œå› æ­¤åœ¨åˆšå¼€å§‹è®­ç»ƒæ—¶æ¢¯åº¦ä¼šè¾ƒå¤§ï¼Œè€Œå­¦ä¹ ç‡æœ€å¼€å§‹ä¹Ÿè¾ƒå¤§ï¼Œå®¹æ˜“å‡ºç°è®­ç»ƒä¸ç¨³å®šçš„æƒ…å†µã€‚å› æ­¤å¯ä»¥åœ¨æœ€åˆå‡ è½®é‡‡ç”¨è¾ƒå°å­¦ä¹ ç‡ï¼Œè®©å­¦ä¹ ç‡åœ¨ä¸€å®šé¢„çƒ­å›åˆå†…é€æ¸ä¸Šå‡ä¸ºåˆå§‹å­¦ä¹ ç‡ã€‚ï¼ˆåœ¨SNNä¸­è²Œä¼¼å¾ˆå¸¸ç”¨ï¼Œåœ¨å¸¸è§„ç¥ç»ç½‘ç»œä¸­è²Œä¼¼ä¸æ˜¯å¾ˆå¿…è¦ï¼‰</p>
<h2 id="æ¢¯åº¦ä¼°è®¡ä¿®æ­£ï¼ˆä¼˜åŒ–å™¨é€‰æ‹©ï¼‰"><a href="#æ¢¯åº¦ä¼°è®¡ä¿®æ­£ï¼ˆä¼˜åŒ–å™¨é€‰æ‹©ï¼‰" class="headerlink" title="æ¢¯åº¦ä¼°è®¡ä¿®æ­£ï¼ˆä¼˜åŒ–å™¨é€‰æ‹©ï¼‰"></a>æ¢¯åº¦ä¼°è®¡ä¿®æ­£ï¼ˆä¼˜åŒ–å™¨é€‰æ‹©ï¼‰</h2><p>ä¹‹å‰æˆ‘ä»¬è¯´åˆ°ç°åœ¨å¤§éƒ¨åˆ†ç¥ç»ç½‘ç»œè®­ç»ƒéƒ½ä½¿ç”¨batchè¿›è¡Œ<strong>æ¢¯åº¦ä¼°è®¡</strong>ä»¥ä»£æ›¿æ•´ä¸ªè®­ç»ƒé›†ä¸Šçš„çœŸæ­£æ¢¯åº¦ï¼Œè¿™æ ·åšä¼šå¯¼è‡´æ¯ä¸ªbatchçš„å¹³å‡æ¢¯åº¦å…·æœ‰ä¸€å®šéšæœºæ€§ï¼ˆä¸å…¨å±€æœ€ä¼˜æ¢¯åº¦ä¸ä¸€è‡´ï¼‰ï¼Œå› æ­¤å‡ºç°äº†<strong>è®¸å¤šé€šè¿‡ä½¿ç”¨ä¸€æ®µæ—¶é—´ï¼ˆå¤šä¸ªbatchï¼‰å†…çš„å¹³å‡æ¢¯åº¦ä»¥ä»£æ›¿å•ä¸ªbatchæ¢¯åº¦çš„æ–¹æ³•</strong>ç¼“è§£æ¢¯åº¦ä¼°è®¡çš„éšæœºæ€§ã€‚</p>
<p><strong><u>è¿™åœ¨pytorchä¸­ç›´æ¥ä½“ç°åœ¨ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–å™¨</u></strong>ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¯¹æ¢¯åº¦çš„ç®¡ç†ï¼ˆé™¤äº†è®¡ç®—ï¼‰éƒ½æ˜¯é€šè¿‡ä¼˜åŒ–å™¨ç±»çš„æ–¹æ³•å®ç°(å¦‚stepï¼Œzero_grad)</p>
<p>è€ŒSGDä¼˜åŒ–å™¨åˆ™æ˜¯ç›´æ¥ä½¿ç”¨å½“å‰batchçš„ä¼°è®¡æ¢¯åº¦è¿›è¡Œæ›´æ–°ï¼Œæœ€ä¸ºç®€å•ï¼Œä½†è¿™å¹¶ä¸æ„ä¸ºç€SGDä¸å¥½ï¼Œç›¸åï¼ŒSGDåœ¨ç²¾ç»†è°ƒä¼˜åå’Œè®­ç»ƒåæœŸå¯ä»¥å®ç°æ›´ç¨³å®šã€ç²¾å‡†çš„æ•ˆæœã€‚</p>
<p>å¦ä¸€ä¸ªå¸¸è§çš„Adamä¼˜åŒ–å™¨åˆ™ä½¿ç”¨äº†<strong>åŠ¨é‡æ³•+è‡ªé€‚åº”å­¦ä¹ ç‡</strong>çš„æ–¹å¼è¿›è¡Œæ¢¯åº¦ä¼°è®¡ä¿®æ­£ï¼ŒåŠ¨é‡æ³•å¯ä»¥è€ƒè™‘åˆ°å¤šä¸ªbatchçš„å¹³å‡æ¢¯åº¦ï¼Œé™ä½æ¢¯åº¦ä¼°è®¡éšæœºæ€§ï¼›åŒæ—¶Adamç®—æ³•ä½¿ç”¨äº†è‡ªé€‚åº”å­¦ä¹ ç‡ï¼Œä½¿å…¶åœ¨å›ºå®šå­¦ä¹ ç‡ä¸‹ä¹Ÿå¯ä»¥æœ‰è¾ƒå¥½è®­ç»ƒæ•ˆæœï¼ˆä½†æœ€å¥½è¿˜æ˜¯æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªå­¦ä¹ ç‡è¡°å‡ï¼‰</p>
<h2 id="æ¢¯åº¦çˆ†ç‚¸é—®é¢˜"><a href="#æ¢¯åº¦çˆ†ç‚¸é—®é¢˜" class="headerlink" title="æ¢¯åº¦çˆ†ç‚¸é—®é¢˜"></a>æ¢¯åº¦çˆ†ç‚¸é—®é¢˜</h2><p>å½“æŸæ¬¡åå‘ä¼ æ’­æ—¶æ¢¯åº¦çªç„¶æš´å¢ä¼šå¯¼è‡´æ›´æ–°å‚æ•°æ—¶åè€Œè¿œç¦»æœ€ä¼˜ç‚¹ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨ä¸€äº›æ–¹æ³•é¿å…ï¼š</p>
<ul>
<li>æ¢¯åº¦è£å‰ªï¼šè®¾ç½®æ¢¯åº¦é˜ˆå€¼ï¼Œå½“è¶…è¿‡é˜ˆå€¼æ—¶æŒ‰æ¯”ä¾‹ç¼©å°è‡³é˜ˆå€¼</li>
<li>ä½¿ç”¨å½’ä¸€åŒ–ç¨³å®šæ¯ä¸€å±‚ç¥ç»ç½‘ç»œçš„è¾“å‡º</li>
</ul>
<h1 id="å‚æ•°åˆå§‹åŒ–ä¸æ•°æ®é¢„å¤„ç†"><a href="#å‚æ•°åˆå§‹åŒ–ä¸æ•°æ®é¢„å¤„ç†" class="headerlink" title="å‚æ•°åˆå§‹åŒ–ä¸æ•°æ®é¢„å¤„ç†"></a>å‚æ•°åˆå§‹åŒ–ä¸æ•°æ®é¢„å¤„ç†</h1><p>è¿™ä¸€å—æ„Ÿè§‰æ²¡å•¥å¥½è¯´çš„ï¼Œå°±åªåœ¨è¿™é‡Œåˆ—å‡ºï¼Œä¸å±•å¼€è¯´äº†ï¼Œä¸ªäººè®¤ä¸ºé™¤äº†æ•°æ®è¾“å…¥å½’ä¸€åŒ–å¤–å…¶ä»–ä½œç”¨ä¸å¤§ã€‚</p>
<h2 id="å½’ä¸€åŒ–ä¸æ ‡å‡†åŒ–"><a href="#å½’ä¸€åŒ–ä¸æ ‡å‡†åŒ–" class="headerlink" title="å½’ä¸€åŒ–ä¸æ ‡å‡†åŒ–"></a>å½’ä¸€åŒ–ä¸æ ‡å‡†åŒ–</h2><h1 id="å½’ä¸€åŒ–å¤„ç†"><a href="#å½’ä¸€åŒ–å¤„ç†" class="headerlink" title="å½’ä¸€åŒ–å¤„ç†"></a>å½’ä¸€åŒ–å¤„ç†</h1>]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ³¨æ„åŠ›æœºåˆ¶åŸç†ä¸å®ç°</title>
    <url>/2025/10/05/DL-attention/</url>
    <content><![CDATA[<h1 id="æ³¨æ„åŠ›æœºåˆ¶åŸç†"><a href="#æ³¨æ„åŠ›æœºåˆ¶åŸç†" class="headerlink" title="æ³¨æ„åŠ›æœºåˆ¶åŸç†"></a>æ³¨æ„åŠ›æœºåˆ¶åŸç†</h1><p>åœ¨ä¼ ç»Ÿçš„åºåˆ—å¤„ç†æ¨¡å‹ä¸­ï¼Œå¦‚å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰å’Œé•¿çŸ­æ—¶è®°å¿†ç½‘ç»œï¼ˆLSTMï¼‰ï¼Œæ•æ‰<strong>é•¿è·ç¦»ä¾èµ–å…³ç³»æ˜¯ä¸€ä¸ªéš¾é¢˜</strong>ã€‚å› ä¸ºéšç€åºåˆ—é•¿åº¦çš„å¢åŠ ï¼Œæ¨¡å‹å¾ˆå®¹æ˜“ä¸¢å¤±æ—©æœŸè¾“å…¥çš„ä¿¡æ¯ã€‚</p>
<p>æ³¨æ„åŠ›æœºåˆ¶å…è®¸æ¨¡å‹åœ¨åºåˆ—çš„ä¸åŒä½ç½®ä¹‹é—´å»ºç«‹ç›´æ¥è”ç³»ï¼Œæ— è®ºè¿™äº›ä½ç½®ç›¸è·å¤šè¿œï¼Œéƒ½èƒ½å¤Ÿæœ‰æ•ˆåœ°æ•æ‰åˆ°å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
<h2 id="æœ€åŸå§‹çš„æ³¨æ„åŠ›"><a href="#æœ€åŸå§‹çš„æ³¨æ„åŠ›" class="headerlink" title="æœ€åŸå§‹çš„æ³¨æ„åŠ›"></a>æœ€åŸå§‹çš„æ³¨æ„åŠ›</h2><p>å¯¹äºè¾“å…¥X=(N,D)ï¼Œå…¶ä¸­Dä¸ºæ¯ä¸ªtokençš„embedding dimensionï¼ŒNä¸ºåºåˆ—é•¿åº¦ï¼Œä¸ºäº†å¾—åˆ°æŸä¸ªç‰¹å®šä»»åŠ¡çš„ç›¸å…³ä¿¡æ¯ï¼Œå¼•å…¥ä¸€ä¸ªå’ŒtokenåŒç»´åº¦çš„æŸ¥è¯¢å‘é‡qï¼ˆqæ˜¯ä¸€ä¸ªå’Œä»»åŠ¡ç›¸å…³çš„è¡¨ç¤ºï¼Œè¿™é‡Œæš‚æ—¶ç†è§£ä¸ºä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œåç»­ä¼šè¯¦ç»†è¯´æ˜å®é™…ä¸­çš„ç”Ÿæˆæ–¹å¼ï¼‰ï¼Œé€šè¿‡è®¡ç®—æ¯ä¸ªtokenå’Œqçš„ç›¸å…³æ€§ä»¥å¾—åˆ°æ³¨æ„åŠ›åˆ†å¸ƒï¼š</p>
<script type="math/tex; mode=display">
\alpha_n=softmax(s(x_n,q))</script><p>x_nä¸ºXä¸­çš„ç¬¬nä¸ªtokenï¼›Î±ä¸ºqå¯¹x_nçš„<strong>å…³æ³¨ç¨‹åº¦</strong>ï¼›s(.)ä¸ºä¸€ä¸ª<strong>æ‰“åˆ†å‡½æ•°</strong>ï¼Œç”¨äºè®¡ç®—tokenå’Œqçš„ç›¸å…³æ€§ï¼Œæœ€é•¿ç”¨çš„æ˜¯ç¼©æ”¾ç‚¹ç§¯æ¨¡å‹ï¼š</p>
<script type="math/tex; mode=display">
s(x,q)=\frac{qx^T}{\sqrt{D}}</script><p>å½“tokenç»´åº¦Dè¾ƒå¤§æ—¶ï¼Œå¦‚æœä¸å¯¹ç‚¹ç§¯ç»“æœè¿›è¡Œç¼©æ”¾ï¼Œä¼šç”±äºè¾ƒå¤§çš„æ–¹å·®å¯¼è‡´softmaxæ¢¯åº¦è¾ƒå°</p>
<p>è‹¥æƒ³å¾—åˆ°è¾“å…¥Xä¸æŸ¥è¯¢å‘é‡qçš„æ•´ä½“ç›¸å…³æ€§ï¼Œåˆ™å¯ä»¥é€šè¿‡åŠ æƒå¹³å‡è·å¾—ï¼Œå³ç›´æ¥å°†å…³æ³¨ç¨‹åº¦ä¸tokenç›¸ä¹˜å†æ±‚å’Œï¼š</p>
<script type="math/tex; mode=display">
att(X,q)=\sum_{n=1}^{N} \alpha_n x_n</script><p>å› æ­¤attentionæœºåˆ¶<strong>å¯ä»¥å•ç‹¬ä½¿ç”¨</strong>ï¼Œä½†å…¶æ›´å¤šåœ°è¿˜æ˜¯ä½œä¸ºç¥ç»ç½‘ç»œä¸­çš„ä¸€ä¸ªç»„ä»¶ä½¿ç”¨ï¼Œå¹¶ä¸”ç°åœ¨ä¸»æµçš„attentionç®—æ³•ä¸ä¸Šè¿°è¿˜å­˜åœ¨ä¸€å®šå·®åˆ«</p>
<h2 id="è‡ªæ³¨æ„åŠ›æ¨¡å‹"><a href="#è‡ªæ³¨æ„åŠ›æ¨¡å‹" class="headerlink" title="è‡ªæ³¨æ„åŠ›æ¨¡å‹"></a>è‡ªæ³¨æ„åŠ›æ¨¡å‹</h2><p>ä¸ºäº†æé«˜æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ï¼Œç°åœ¨ä¸»æµçš„attentionæ¨¡å‹ä½¿ç”¨æŸ¥è¯¢-é”®-å€¼(qkv)æ¨¡å¼è¿›è¡Œè‡ªæ³¨æ„åŠ›è®¡ç®—ï¼Œå¯¹äºä¸Šä¸€å°èŠ‚ä¸­çš„æ‰“åˆ†å‡½æ•°ï¼Œå³ç¼©æ”¾ç‚¹ç§¯æ¨¡å‹åˆ™å˜ä¸ºä¸€ä¸ªçŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
s(K,Q)=\frac{QK^T}{\sqrt{D_k}}</script><p>å…¶ä¸­Qå’ŒKä¸ºXåˆ†åˆ«ç»è¿‡ä¸€ä¸ªçº¿æ€§å˜æ¢å¾—åˆ°çš„(D_k,N)çš„çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
Q(K)=W_{q(k)}X</script><p>å¯¹äºpytorchä¸­åˆ™é€šå¸¸ç›´æ¥é€šè¿‡linearå®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Q = nn.Linear(embedding_dim, mid_dim, bias=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆè‡ªæ³¨æ„æ¨¡å‹è¾“å‡ºä»ä¸ºä¸€ä¸ªåºåˆ—ï¼š</p>
<script type="math/tex; mode=display">
Y=softmax(s(K,Q)) V=AV</script><p>è¾“å‡ºYçš„embedding ç»´åº¦å–å†³äºVï¼Œè€ŒVä¹Ÿæ˜¯ç”±Xè¿›è¡Œçº¿æ€§å˜æ¢è€Œæ¥ï¼Œå› æ­¤è¾“å‡ºçš„embeddingç»´åº¦ç­‰äºVçº¿æ€§å˜æ¢çŸ©é˜µçš„è¡Œæ•°ï¼›</p>
<p><strong>è‡ªæ³¨æ„æœºåˆ¶çš„â€œè‡ªâ€å°±ä½“ç°åœ¨Qï¼ŒKï¼ŒVéƒ½æ˜¯ç”±åŒä¸€ä¸ªXç»è¿‡ä¸‰ä¸ªä¸åŒçš„çº¿æ€§å˜æ¢å¾—æ¥</strong></p>
<p>å¯¹äºå…³æ³¨åº¦ä¸Vç›¸ä¹˜çš„ç†è§£ï¼Œæˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼š</p>
<p>å°†Yçš„çŸ©é˜µä¹˜æ³•å±•å¼€ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
Y_i=\sum_{j=1}^nA_{ij}V_j</script><p>å› æ­¤å¯¹äºY_iï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªè¾“å‡ºçš„tokenï¼Œå…¶æ˜¯ç”±æ³¨æ„åŠ›æƒé‡ï¼ˆå…³æ³¨ç¨‹åº¦ï¼‰Aå¯¹<strong>æ‰€æœ‰è¾“å…¥tokençš„åŠ æƒ<u>æ±‚å’Œ</u></strong>å¾—æ¥ï¼Œ<strong>å…¶åŒ…å«äº†ä¸æ‰€æœ‰è¾“å…¥tokençš„ç›¸å…³ç¨‹åº¦</strong>ï¼›å¯¹äºAçš„ç†è§£ï¼Œå…¶ç¬¬nè¡Œä»£è¡¨äº†<strong>ç¬¬nä¸ª</strong>q<u>å‘é‡</u>ä¸<strong>æ‰€æœ‰</strong>key<u>å‘é‡</u>çš„ç›¸å…³ç¨‹åº¦</p>
<p>è¿™é‡Œå¯¹Açš„ç†è§£å¾ˆé‡è¦ï¼Œæ¶‰åŠåˆ°attentionä¸­padding mask å’Œ causal maskçš„è®¾è®¡ç†è§£</p>
<p>(ä¸¾ä¸ªä¾‹å­ï¼šA_12åˆ™ä¸ºq_1å¯¹k_2çš„å…³æ³¨åº¦)</p>
<h2 id="å¤šå¤´æ³¨æ„åŠ›"><a href="#å¤šå¤´æ³¨æ„åŠ›" class="headerlink" title="å¤šå¤´æ³¨æ„åŠ›"></a>å¤šå¤´æ³¨æ„åŠ›</h2><p>å¤šå¤´æ³¨æ„åŠ›å…¶å®å°±æ˜¯åœ¨è®¡ç®—æ³¨æ„åŠ›çš„è¿‡ç¨‹ä¸­ï¼ˆçº¿æ€§å˜æ¢ä¹‹åï¼‰ï¼Œ<strong>å°†embedding dimæ‹†ä¸ºnä»½</strong>ï¼Œæ¯ä»½å•ç‹¬è®¡ç®—æ³¨æ„åŠ›ï¼Œæœ€åå†è¿›è¡Œæ‹¼æ¥å›å®Œæ•´è¾“å‡ºã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æ¯ä¸ªtokenä¹‹é—´å­˜åœ¨çš„ä¸€äº›<strong>å±€éƒ¨ç›¸å…³æ€§</strong>ä¼šè¢«æ›´å¥½åœ°è¡¨ç¤ºï¼Œè®ºæ–‡åŸè¯æ˜¯ï¼š</p>
<p><em>Multi-head attention allows the model to jointly attend to information from different representation subspaces at different positions.å¤šå¤´æ³¨æ„åŠ›å…è®¸æ¨¡å‹å…±åŒå…³æ³¨æ¥è‡ªä¸åŒä½ç½®çš„ä¸åŒè¡¨ç¤ºå­ç©ºé—´çš„ä¿¡æ¯ã€‚</em></p>
<p>éœ€è¦æ¾„æ¸…çš„ä¸€ç‚¹æ¦‚å¿µæ˜¯ï¼Œå¯¹äºå¤šå¤´æ³¨æ„åŠ›åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œ<strong>å…¶æƒé‡ï¼ˆçº¿æ€§å˜æ¢å‚æ•°ï¼‰ä»ç„¶åªè®­ç»ƒäº†ä¸€æ¬¡</strong>ï¼Œåªæ˜¯è¯¥æ¬¡çš„è®­ç»ƒç»¼åˆäº†æ¯ä¸ªå¤´çš„æ³¨æ„åŠ›ç»“æœï¼Œä½¿è®­ç»ƒåçš„æ¨¡å‹èƒ½<strong>åŒæ—¶æ•æ‰å¤šç§ç±»å‹çš„ä¾èµ–å…³ç³»</strong>ï¼Œè¿™ç§ä¾èµ–å…³ç³»åœ¨ç‰©ç†æ„ä¹‰ä¸Šå¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªè¯ä¹‹é—´çš„è¯­æ³•å…³ç³»ã€è¯­ä¹‰å…³ç³»ã€ä½ç½®å…³ç³»ã€æƒ…æ„Ÿå…³ç³»ç­‰</p>
<h2 id="äº¤å‰æ³¨æ„åŠ›"><a href="#äº¤å‰æ³¨æ„åŠ›" class="headerlink" title="äº¤å‰æ³¨æ„åŠ›"></a>äº¤å‰æ³¨æ„åŠ›</h2><p>å¯¹äºè‡ªæ³¨æ„åŠ›ï¼Œå…¶Qï¼ŒKï¼ŒVéƒ½æ¥è‡ªäºåŒä¸€ä¸ªè¾“å…¥ï¼Œå§‹ç»ˆæ˜¯ä¸€ä¸ªåºåˆ—å†…çš„ä¸åŒtokenåœ¨ç›¸äº’è®¡ç®—ç›¸å…³ç¨‹åº¦ï¼›è€Œå¯¹äºäº¤å‰æ³¨æ„åŠ›ï¼ŒKï¼ŒVåˆ™æ¥è‡ªäºå¦ä¸€ä¸ªåºåˆ—ï¼›å› æ­¤äº¤å‰æ³¨æ„åŠ›å¸¸å‡ºç°åœ¨éœ€è¦å¤„ç†å¤šç§ä¸åŒè¾“å…¥çš„åœºæ™¯ï¼ˆå¦‚æœºå™¨ç¿»è¯‘ï¼Œè¯­ä¹‰ç”Ÿå›¾ç­‰ï¼‰ï¼Œä»¥ç¿»è¯‘ä¸ºä¾‹ï¼ŒKï¼ŒVä¸ºæºè¯­è¨€ï¼Œåˆ™Qä¸ºç›®æ ‡ç¿»è¯‘è¯­è¨€</p>
<h1 id="ä»£ç è§£è¯»ï¼ˆæ­¤ç‰ˆæœ¬ä»¥è¿‡æ—¶ï¼Œç›´æ¥çœ‹ä¸‹ä¸€èŠ‚ï¼‰"><a href="#ä»£ç è§£è¯»ï¼ˆæ­¤ç‰ˆæœ¬ä»¥è¿‡æ—¶ï¼Œç›´æ¥çœ‹ä¸‹ä¸€èŠ‚ï¼‰" class="headerlink" title="ä»£ç è§£è¯»ï¼ˆæ­¤ç‰ˆæœ¬ä»¥è¿‡æ—¶ï¼Œç›´æ¥çœ‹ä¸‹ä¸€èŠ‚ï¼‰"></a>ä»£ç è§£è¯»ï¼ˆæ­¤ç‰ˆæœ¬ä»¥è¿‡æ—¶ï¼Œç›´æ¥çœ‹ä¸‹ä¸€èŠ‚ï¼‰</h1><p>è¯¥ä»£ç ä¸ºå¤šå¤´æ³¨æ„åŠ›çš„å®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MultiHeadAttention</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, hidden_size, dropout_rate, head_size=<span class="number">8</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(MultiHeadAttention, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.head_size = head_size	<span class="comment">#å¤šå¤´æ•°</span></span><br><span class="line"></span><br><span class="line">        self.att_size = att_size = hidden_size // head_size</span><br><span class="line">        self.scale = att_size ** -<span class="number">0.5</span> <span class="comment">#ç¼©æ”¾ç‚¹ç§¯æ¨¡å‹ä¸­çš„ç¼©æ”¾å€¼</span></span><br><span class="line"></span><br><span class="line">        self.linear_q = nn.Linear(hidden_size, hidden_size, bias=<span class="literal">False</span>)</span><br><span class="line">        self.linear_k = nn.Linear(hidden_size, hidden_size, bias=<span class="literal">False</span>)</span><br><span class="line">        self.linear_v = nn.Linear(hidden_size, hidden_size, bias=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        self.att_dropout = nn.Dropout(dropout_rate)</span><br><span class="line"></span><br><span class="line">        self.output_layer = nn.Linear(head_size * att_size, hidden_size,</span><br><span class="line">                                      bias=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, q, k, v, mask=<span class="literal">None</span>, cache=<span class="literal">None</span></span>):</span><br><span class="line">        orig_q_size = q.size()</span><br><span class="line"></span><br><span class="line">        d_k = self.att_size</span><br><span class="line">        d_v = self.att_size</span><br><span class="line">        batch_size = q.size(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">		<span class="comment">#åœ¨ç»è¿‡çº¿æ€§å˜æ¢åï¼Œå°†(b,n,d) -&gt; (b,n, 8, åŸdim/8)</span></span><br><span class="line">        q = self.linear_q(q).view(batch_size, -<span class="number">1</span>, self.head_size, d_k)</span><br><span class="line">        k = self.linear_k(k).view(batch_size, -<span class="number">1</span>, self.head_size, d_k)</span><br><span class="line">        v = self.linear_v(v).view(batch_size, -<span class="number">1</span>, self.head_size, d_v)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#å°†å¤´æ•°å‰ç½®æ–¹ä¾¿è¿ç®—ï¼Œkä¹Ÿåœ¨è¿™é‡Œé¡ºä¾¿è¿›è¡Œäº†è½¬ç½®</span></span><br><span class="line">        q = q.transpose(<span class="number">1</span>, <span class="number">2</span>)                  <span class="comment"># [b, h, q_len, d_k]</span></span><br><span class="line">        v = v.transpose(<span class="number">1</span>, <span class="number">2</span>)                  <span class="comment"># [b, h, v_len, d_v]</span></span><br><span class="line">        k = k.transpose(<span class="number">1</span>, <span class="number">2</span>).transpose(<span class="number">2</span>, <span class="number">3</span>)  <span class="comment"># [b, h, d_k, k_len]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Scaled Dot-Product Attention.</span></span><br><span class="line">        <span class="comment"># Attention(Q, K, V) = softmax((QK^T)/sqrt(d_k))V</span></span><br><span class="line">        <span class="comment">#è¿™é‡Œå…ˆè¿›è¡Œäº†ç¼©æ”¾ï¼Œç¼©æ”¾å…ˆåæ— å½±å“</span></span><br><span class="line">        q.mul_(self.scale)</span><br><span class="line">        x = torch.matmul(q, k)  <span class="comment"># [b, h, q_len, k_len]</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment">#ç”±ä¹‹å‰çš„çŸ©é˜µä¹˜æ³•å±•å¼€å¯çŸ¥ï¼Œå¯¹äºæ¯ä¸€ä¸ªæœ€ç»ˆè¾“å‡ºçš„tokenï¼Œå…¶ä½¿ç”¨çš„æ˜¯A_ij(j=0,1,2...)ï¼Œå› æ­¤è¦å¯¹Açš„æ’ç»´åº¦è¿›è¡Œsoftmax</span></span><br><span class="line">        x = torch.softmax(x, dim=-<span class="number">1</span>)</span><br><span class="line">        x = self.att_dropout(x)</span><br><span class="line">        x = x.matmul(v)  <span class="comment"># [b, h, q_len, attn]</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment">#æ‹¼æ¥token embedding ç»´åº¦</span></span><br><span class="line">        x = x.transpose(<span class="number">1</span>, <span class="number">2</span>).contiguous()  <span class="comment"># [b, q_len, h, attn]</span></span><br><span class="line">        x = x.view(batch_size, -<span class="number">1</span>, self.head_size * d_v)</span><br><span class="line"></span><br><span class="line">        x = self.output_layer(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">assert</span> x.size() == orig_q_size</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h1 id="å†æˆ˜Transformer-2025-12-15"><a href="#å†æˆ˜Transformer-2025-12-15" class="headerlink" title="å†æˆ˜Transformer   2025.12.15"></a>å†æˆ˜Transformer   2025.12.15</h1><p>ä»”ç»†æƒ³æƒ³è‡ªå·±å¥½åƒè¿˜æ²¡ç”¨è¿‡æ ‡å‡†çš„transformerï¼Œä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£LLMï¼Œè‡ªå·±æ‰‹æ’•äº†ä¸€éï¼Œä¸»è¦çœ‹ä¸ªæ€è·¯ï¼Œä»£ç ä¹Ÿè®¸è¿˜å­˜åœ¨ä¸€äº›bugï¼Œå¦‚æœçœŸè¦ç”¨è¿˜æ˜¯å»ºè®®å»githubæ‰¾starå¤šçš„</p>
<h2 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MutiHeadAttention</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, hidden_size, num_head, dropout_rate=<span class="number">0.</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(MutiHeadAttention, self).__init__()</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.num_heads = num_head</span><br><span class="line">        self.attn_size = hidden_size // num_head</span><br><span class="line">        self.dropout = nn.Dropout(dropout_rate)</span><br><span class="line"></span><br><span class="line">        self.wq = nn.Linear(self.hidden_size, self.hidden_size)  <span class="comment"># å¯ç”¨bias</span></span><br><span class="line">        self.wk = nn.Linear(self.hidden_size, self.hidden_size)</span><br><span class="line">        self.wv = nn.Linear(self.hidden_size, self.hidden_size)</span><br><span class="line">        self.output_layer = nn.Linear(self.hidden_size, self.hidden_size)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, q, k, v, padding_mask=<span class="literal">None</span>, causal_mask=<span class="literal">None</span></span>):</span><br><span class="line">        batch_size = q.size(<span class="number">0</span>)</span><br><span class="line">        q_len, k_len = q.size(<span class="number">1</span>), k.size(<span class="number">1</span>)</span><br><span class="line">        k_dim = k.size(<span class="number">2</span>)</span><br><span class="line">        v_dim = k_dim</span><br><span class="line">        <span class="comment"># å°†feature dimåˆ†å¤´,å¹¶å°†å¤´æ•°å‰ç½®æ–¹ä¾¿è¿ç®—,(b,num_head,len,d)</span></span><br><span class="line">        Q = self.wq(q).view(batch_size, -<span class="number">1</span>, self.num_heads, self.attn_size).transpose(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">        K = self.wk(k).view(batch_size, -<span class="number">1</span>, self.num_heads, self.attn_size).transpose(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">        V = self.wv(v).view(batch_size, -<span class="number">1</span>, self.num_heads, self.attn_size).transpose(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        x = torch.matmul(Q, K.transpose(<span class="number">2</span>, <span class="number">3</span>)) / np.sqrt(self.attn_size)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ›å»ºå¤šå¤´padding maskï¼Œå› ä¸ºåœ¨è®¡ç®—æ³¨æ„åŠ›æ—¶åºåˆ—é•¿åº¦æ˜¯ä¸æ”¹å˜çš„ï¼Œå› æ­¤ç›´æ¥repeatå³å¯</span></span><br><span class="line">        <span class="comment"># maskæ˜¯ä½œç”¨äºkeyçš„ï¼Œå› æ­¤å…¶å…·ä½“æ©ç å†…å®¹ä»…ç”±keyçš„paddingæƒ…å†µå†³å®š</span></span><br><span class="line">        <span class="keyword">if</span> padding_mask <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">assert</span> padding_mask.size() == (batch_size, q_len, k_len)</span><br><span class="line">            padding_mask = padding_mask.unsqueeze(<span class="number">1</span>).repeat(<span class="number">1</span>, self.num_heads, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">            padding_mask = padding_mask.<span class="built_in">bool</span>()</span><br><span class="line">            x = x.masked_fill_(padding_mask, -<span class="number">1e9</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æˆ‘ä»¬ä¸å¸Œæœ›decoderè‡ªæ³¨æ„åŠ›é˜¶æ®µä¸­ä¸­ç¬¬nä¸ªtokenè·å¾—å¯¹æœªæ¥tokençš„æ³¨æ„åŠ›ï¼Œå› ä¸ºå®é™…é¢„æµ‹ä¸­tokenæ˜¯é€æ¸ç”Ÿæˆçš„ï¼Œè€Œè®­ç»ƒæ—¶æ˜¯å…¨éƒ¨å­˜åœ¨çš„</span></span><br><span class="line">        <span class="keyword">if</span> causal_mask <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">assert</span> causal_mask.size() == (batch_size, q_len, k_len)</span><br><span class="line">            causal_mask = causal_mask.unsqueeze(<span class="number">1</span>).repeat(<span class="number">1</span>, self.num_heads, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">            causal_mask = causal_mask.<span class="built_in">bool</span>()</span><br><span class="line">            x = x.masked_fill_(causal_mask, -<span class="number">1e9</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># scoreçš„ç¬¬nè¡Œä»£è¡¨ç¬¬nä¸ªqå‘é‡ä¸æ‰€æœ‰keyå‘é‡çš„å…³è”ç¨‹åº¦ï¼Œå› æ­¤è¯¥å¯¹æ¯ä¸€è¡Œåšsoftmax</span></span><br><span class="line">        attn_score = torch.softmax(x, dim=-<span class="number">1</span>)</span><br><span class="line">        attn_score = self.dropout(attn_score)</span><br><span class="line"></span><br><span class="line">        output = torch.matmul(attn_score, V)</span><br><span class="line">        output = output.transpose(<span class="number">1</span>, <span class="number">2</span>).contiguous().reshape(batch_size, -<span class="number">1</span>, self.hidden_size)</span><br><span class="line">        output = self.output_layer(output)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>
<p>ç›¸å…³ä»£ç å·²ç»åšäº†æ³¨é‡Šï¼Œè¿™é‡Œå†å¼ºè°ƒå‡ ä¸ªç‚¹ï¼š</p>
<h3 id="å…³äºæ©ç mask"><a href="#å…³äºæ©ç mask" class="headerlink" title="å…³äºæ©ç mask"></a>å…³äºæ©ç mask</h3><p>åœ¨æ ‡å‡†Transformerä¸­ï¼Œæœ‰ä¸¤ç§maskï¼špadding mask å’Œ causal maskï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºå±è”½å°†æ‰€æœ‰è¾“å…¥ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªbatchå†…ï¼‰å¡«å……è‡³åŒä¸€é•¿åº¦çš„padï¼ˆå› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›æ¨¡å‹å°†è¿™äº›padè§†ä½œè¯­ä¹‰çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œä»¥åŠåœ¨è®­ç»ƒä¸­é˜²æ­¢decoderåœ¨é¢„æµ‹tokenæ—¶çœ‹åˆ°æœªæ¥éƒ¨åˆ†ã€‚</p>
<ul>
<li>Encoderï¼šåœ¨encoderä¸­ï¼Œæ¨¡å‹éœ€è¦å­¦ä¹ æ•´ä¸ªè¾“å…¥çš„å…¨å±€è¯­ä¹‰ä¿¡æ¯ï¼Œå› æ­¤å…¶ä»…ä½¿ç”¨self-attentionæ¨¡å—ï¼Œä¸”ä»…ä½¿ç”¨padding mask</li>
<li>Decoderï¼šdecoderåŒ…å«äº†self-attentionå’Œcross-attentionï¼ˆå…³äºä»–ä»¬çš„åŒºåˆ«ç†è§£å¯æŸ¥çœ‹<a href="https://dhkkkkkk.github.io/2025/11/21/LLM/">LLMå­¦ä¹  | å°è‘£çš„BLOG</a>ï¼‰ã€‚<ul>
<li>åœ¨self-attentionä¸­ï¼Œç”±äºdecoderçš„è¾“å…¥åœ¨è®­ç»ƒæ—¶ä¸ºæ•´ä¸ªè¯­å¥ï¼Œè€Œå®é™…é¢„æµ‹æ—¶è¾“å…¥ä¸ºé€ä¸ªtokenï¼Œå› æ­¤åœ¨è®­ç»ƒæ—¶éœ€è¦causal maskå±è”½æ‰æœªæ¥ä¿¡æ¯ã€‚</li>
<li>åœ¨cross-attentionä¸­ï¼Œqä¸ºself-attentionè¾“å‡ºï¼Œè€Œkï¼Œvåˆ™ä¸ºencoderè¾“å‡ºï¼Œå› ä¸ºè¦ç”¨qæŸ¥è¯¢å…¶ä¸æ•´ä¸ªè¯­å¥çš„å…³æ³¨åº¦ï¼Œå› æ­¤ä¸éœ€è¦causal maskï¼Œä»…ä½¿ç”¨padding maskã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œattentionä¸­scoreçš„å½¢çŠ¶ä¸ºï¼ˆq_len, k_lenï¼‰ï¼Œå› æ­¤æ­¤å¤„çš„padding mask å’Œencoder é˜¶æ®µçš„å½¢çŠ¶æ˜¯ä¸åŒçš„ï¼ˆqæ¥æºä¸åŒï¼Œä½†kå½¢çŠ¶æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ¥è‡ªencoderçš„è¾“å…¥ï¼‰</li>
</ul>
</li>
</ul>
<p>å…³äºmaskçš„å…·ä½“å®ç°åœ¨åé¢ä¼šè®²</p>
<h3 id="ç»´åº¦çš„å˜åŒ–"><a href="#ç»´åº¦çš„å˜åŒ–" class="headerlink" title="ç»´åº¦çš„å˜åŒ–"></a>ç»´åº¦çš„å˜åŒ–</h3><p>attn_scoreçš„ç»´åº¦ä¸ºï¼ˆb,h, q_max_len, k_max_len)ï¼Œmaxæ˜¯æŒ‡å¡«å……è¿‡åçš„é•¿åº¦ï¼Œç”±äºkå’Œvçš„å½¢çŠ¶æ°¸è¿œæ˜¯ç›¸åŒçš„ï¼ˆä½†å…·ä½“å†…å®¹ä¸åŒï¼Œå› ä¸ºå®ƒä»¬ç»è¿‡äº†ä¸åŒçš„æŠ•å½±å±‚ï¼‰ï¼Œå› æ­¤attentionæœ€ç»ˆè¾“å‡ºçš„å½¢çŠ¶ä¸º(b,q_max_len,embedding_dim)</p>
<h3 id="å…³äºscoreçš„ç†è§£"><a href="#å…³äºscoreçš„ç†è§£" class="headerlink" title="å…³äºscoreçš„ç†è§£"></a>å…³äºscoreçš„ç†è§£</h3><p>ç¬¬nè¡Œä»£è¡¨äº†ç¬¬nä¸ªqå‘é‡å¯¹æ‰€æœ‰kå‘é‡çš„å…³æ³¨ç¨‹åº¦</p>
<h2 id="Feedforward"><a href="#Feedforward" class="headerlink" title="Feedforward"></a>Feedforward</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FeedForward</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, hidden_size, scale_p, dropout_rate=<span class="number">0.</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(FeedForward, self).__init__()</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.ffn_size = <span class="built_in">int</span>(scale_p) * hidden_size</span><br><span class="line">        self.linear1 = nn.Linear(self.hidden_size, self.ffn_size)</span><br><span class="line">        self.linear2 = nn.Linear(self.ffn_size, self.hidden_size)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        self.dropout = nn.Dropout(dropout_rate)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = self.linear1(x)</span><br><span class="line">        out = self.relu(out)</span><br><span class="line">        out = self.linear2(out)</span><br><span class="line">        out = self.dropout(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>
<p>ç”±äºattentionæ›´å¤šçš„æ˜¯åœ¨æ—¶é—´ç»´åº¦ä¸Šè¿›è¡Œä¿¡æ¯èåˆï¼Œå¹¶æ²¡æœ‰åœ¨<strong>ç‰¹å¾ç»´åº¦ä¸Šè¿›è¡Œè¡¨è¾¾æå‡å’Œéçº¿æ€§å˜æ¢</strong>ï¼Œå› æ­¤feedforwardå°±ç”¨äºè¡¥å……è¿™ä¸€ä¸è¶³è€Œè¢«ä½¿ç”¨ï¼Œå…¶æœ¬èº«å…¶å®å°±æ˜¯ç‰¹å¾ç»´åº¦çš„ç‰¹å¾å˜æ¢</p>
<h2 id="Encoder"><a href="#Encoder" class="headerlink" title="Encoder"></a>Encoder</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PositionalEncoding</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, d_model, dropout=<span class="number">0.1</span>, max_len=<span class="number">5000</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(PositionalEncoding, self).__init__()</span><br><span class="line">        self.dropout = nn.Dropout(p=dropout)</span><br><span class="line"></span><br><span class="line">        pe = torch.zeros(max_len, d_model)</span><br><span class="line">        position = torch.arange(<span class="number">0</span>, max_len).unsqueeze(<span class="number">1</span>)</span><br><span class="line">        div_term = torch.exp(torch.arange(<span class="number">0</span>, d_model, <span class="number">2</span>) * (-math.log(<span class="number">10000.0</span>) / d_model))</span><br><span class="line"></span><br><span class="line">        pe[:, <span class="number">0</span>::<span class="number">2</span>] = torch.sin(position * div_term)</span><br><span class="line">        pe[:, <span class="number">1</span>::<span class="number">2</span>] = torch.cos(position * div_term)</span><br><span class="line">        pe = pe.unsqueeze(<span class="number">0</span>)  <span class="comment"># (1, max_len, d_model)</span></span><br><span class="line"></span><br><span class="line">        self.register_buffer(<span class="string">&#x27;pe&#x27;</span>, pe)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = x + self.pe[:, :x.size(<span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">return</span> self.dropout(x)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EncoderLayer</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, hidden_size, num_head, attn_dropout, ffn_scale, ffn_dropout</span>):</span><br><span class="line">        <span class="built_in">super</span>(EncoderLayer, self).__init__()</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.num_heads = num_head</span><br><span class="line">        self.ffn_scale = ffn_scale</span><br><span class="line">        self.attn = MutiHeadAttention(self.hidden_size, self.num_heads, attn_dropout)</span><br><span class="line">        self.FFN = FeedForward(self.hidden_size, self.ffn_scale, ffn_dropout)</span><br><span class="line">        self.norm1 = nn.LayerNorm(self.hidden_size)  <span class="comment"># ä¸¤ä¸ªnorméœ€åˆ†åˆ«åˆå§‹åŒ–</span></span><br><span class="line">        self.norm2 = nn.LayerNorm(self.hidden_size)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, padding_mask</span>):</span><br><span class="line">        enc_in = x</span><br><span class="line">        x = self.norm1(x)  <span class="comment"># pre-normæ›´ç¨³å®š</span></span><br><span class="line">        out = enc_in + self.attn(x, x, x, padding_mask)  <span class="comment"># æ®‹å·®è¦ä½¿ç”¨normå‰çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        x = self.norm2(out)</span><br><span class="line">        out = out + self.FFN(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Encoder</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, max_len, hidden_size, num_head, num_layer, ffn_scale,</span></span><br><span class="line"><span class="params">                 emb_dropout, attn_dropout, ffn_dropout</span>):</span><br><span class="line">        <span class="built_in">super</span>(Encoder, self).__init__()</span><br><span class="line">        self.max_len = max_len</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.pos_embedding = PositionalEncoding(self.hidden_size, dropout=emb_dropout, max_len=self.max_len)</span><br><span class="line">        self.Layers = nn.ModuleList(</span><br><span class="line">            [EncoderLayer(self.hidden_size, num_head, attn_dropout, ffn_scale,</span><br><span class="line">             ffn_dropout) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_layer)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, padding_mask</span>):</span><br><span class="line">        out = self.pos_embedding(x)  <span class="comment"># embedding &amp; add &amp; dropout</span></span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> self.Layers:</span><br><span class="line">            out = layer(out, padding_mask)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>
<p>åœ¨Encoder layerä¸­ï¼Œç°åœ¨ä¸»æµçš„åšæ³•æ˜¯<strong>å‰ç½®</strong>layernormï¼Œè¿™æ ·ä¼šè·å¾—æ›´ç¨³å®šçš„æ³¨æ„åŠ›ç»“æœï¼›å¹¶ä¸”è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>æ®‹å·®ä¸€å®šä½¿ç”¨çš„æ˜¯å½’ä¸€åŒ–ä¹‹å‰çš„å€¼</strong></p>
<h2 id="Decoder"><a href="#Decoder" class="headerlink" title="Decoder"></a>Decoder</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DecoderLayer</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, hidden_size, num_head, attn_dropout, ffn_scale, ffn_dropout</span>):</span><br><span class="line">        <span class="built_in">super</span>(DecoderLayer, self).__init__()</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.num_heads = num_head</span><br><span class="line">        self.ffn_scale = ffn_scale</span><br><span class="line">        self.self_attn = MutiHeadAttention(self.hidden_size, self.num_heads, attn_dropout)</span><br><span class="line">        self.cross_attn = MutiHeadAttention(self.hidden_size, self.num_heads, attn_dropout)</span><br><span class="line">        self.FFN = FeedForward(self.hidden_size, self.ffn_scale, ffn_dropout)</span><br><span class="line">        self.norm1 = nn.LayerNorm(self.hidden_size)</span><br><span class="line">        self.norm2 = nn.LayerNorm(self.hidden_size)</span><br><span class="line">        self.norm3 = nn.LayerNorm(self.hidden_size)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”±äºdecoderçš„len_kå’Œencoderçš„ä¸åŒï¼Œå› æ­¤padding mask éœ€è¦åˆ†å¼€</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, enc_out, enc_padding_mask, dec_padding_mask, causal_mask</span>):</span><br><span class="line">        dec_in = x</span><br><span class="line">        x = self.norm1(x)</span><br><span class="line">        out = dec_in + self.self_attn(x, x, x, dec_padding_mask, causal_mask)</span><br><span class="line"></span><br><span class="line">        x = self.norm2(out)</span><br><span class="line">        out = out + self.cross_attn(x, enc_out, enc_out, enc_padding_mask, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">        x = self.norm3(out)</span><br><span class="line">        out = out + self.FFN(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Decoder</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, max_len, hidden_size, num_head, num_layer, ffn_scale,</span></span><br><span class="line"><span class="params">                 emb_dropout, attn_dropout, ffn_dropout</span>):</span><br><span class="line">        <span class="built_in">super</span>(Decoder, self).__init__()</span><br><span class="line">        self.max_len = max_len</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.pos_embedding = PositionalEncoding(self.hidden_size, dropout=emb_dropout, max_len=self.max_len)</span><br><span class="line">        self.Layers = nn.ModuleList(</span><br><span class="line">            [DecoderLayer(self.hidden_size, num_head, attn_dropout, ffn_scale, 						ffn_dropout) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_layer)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, enc_out, dec_padding_mask, causal_mask, enc_padding_mask</span>):</span><br><span class="line">        out = self.pos_embedding(x)</span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> self.Layers:</span><br><span class="line">            out = layer(out, enc_out, enc_padding_mask, dec_padding_mask, causal_mask)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å…³äºdecoderä¸­çš„padding mask å’Œ causal maskåœ¨åé¢ç»Ÿä¸€è®²</p>
<h2 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Transformer</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 hidden_size,</span></span><br><span class="line"><span class="params">                 num_head,</span></span><br><span class="line"><span class="params">                 enc_max_len,</span></span><br><span class="line"><span class="params">                 dec_max_len,</span></span><br><span class="line"><span class="params">                 num_enc_layer,</span></span><br><span class="line"><span class="params">                 num_dec_layer,</span></span><br><span class="line"><span class="params">                 ffn_scale,</span></span><br><span class="line"><span class="params">                 emb_dropout,</span></span><br><span class="line"><span class="params">                 attn_dropout,</span></span><br><span class="line"><span class="params">                 ffn_dropout</span></span><br><span class="line"><span class="params">                 </span>):</span><br><span class="line">        <span class="built_in">super</span>(Transformer, self).__init__()</span><br><span class="line">        self.Encoder = Encoder(enc_max_len, hidden_size, num_head, num_enc_layer, ffn_scale,</span><br><span class="line">                               emb_dropout, attn_dropout, ffn_dropout)</span><br><span class="line">        self.Decoder = Decoder(dec_max_len, hidden_size, num_head, num_dec_layer, ffn_scale,</span><br><span class="line">                               emb_dropout, attn_dropout, ffn_dropout)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_enc_padding_mask</span>(<span class="params">max_len: <span class="built_in">int</span>, seq_len: torch.Tensor, batch_size: <span class="built_in">int</span>, device: torch.device</span>):</span><br><span class="line">        enc_padding_mask = torch.zeros((batch_size, max_len, max_len), device=device)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batch_size):</span><br><span class="line">            enc_padding_mask[i, :, seq_len[i]:] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> enc_padding_mask.<span class="built_in">bool</span>()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_dec_padding_mask</span>(<span class="params">max_q_len: <span class="built_in">int</span>, max_k_len: <span class="built_in">int</span>, seq_len: torch.Tensor, batch_size: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">                             device: torch.device</span>):</span><br><span class="line">        dec_padding_mask = torch.zeros((batch_size, max_q_len, max_k_len), device=device)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batch_size):</span><br><span class="line">            dec_padding_mask[i, :, seq_len[i]:] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dec_padding_mask.<span class="built_in">bool</span>()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_causal_mask</span>(<span class="params">max_len: <span class="built_in">int</span>, batch_size: <span class="built_in">int</span>, device: torch.device</span>):</span><br><span class="line">        causal_mask = torch.triu(torch.ones((batch_size, max_len, max_len), device=device), diagonal=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> causal_mask.<span class="built_in">bool</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># enc_in_len å’Œ dec_in_len æ˜¯æ¯ä¸ªæ ·æœ¬çš„å®é™…é•¿åº¦ï¼Œå› æ­¤æ˜¯ä¸€ä¸ª(b,l)çš„tensor</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, enc_in, enc_in_len, dec_in, dec_in_len</span>):</span><br><span class="line">        batch_size = enc_in.size(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#å–æ¯ä¸ªbatchä¸­çš„æœ€é•¿</span></span><br><span class="line">        enc_in_maxlen = enc_in.size(<span class="number">1</span>)</span><br><span class="line">        dec_in_maxlen = dec_in.size(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        enc_padding_mask = self.get_enc_padding_mask(enc_in_maxlen, enc_in_len, batch_size, enc_in.device)</span><br><span class="line">        enc_out = self.Encoder(enc_in, enc_padding_mask)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è‡ªæ³¨æ„åŠ›ä¸­å¦‚æœpadå…¨åœ¨å°¾éƒ¨åˆ™ä¸éœ€è¦padding mask</span></span><br><span class="line">        causal_mask = self.get_causal_mask(dec_in_maxlen, batch_size, dec_in.device)</span><br><span class="line">        self_padding_mask = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># cross attention mask</span></span><br><span class="line">        enc_dec_padding_mask = self.get_dec_padding_mask(dec_in_maxlen, enc_in_maxlen,</span><br><span class="line">                                                     dec_in_len, batch_size, dec_in.device)</span><br><span class="line"></span><br><span class="line">        dec_out = self.Decoder(dec_in, enc_out, self_padding_mask, causal_mask, enc_dec_padding_mask)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dec_out <span class="comment">#æœªæ·»åŠ æœ€åçš„æŠ•å½±å±‚</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦å†è®²ä¸€ä¸‹maskçš„é€»è¾‘å’Œå…·ä½“å®ç°ï¼š</p>
<h3 id="padding-mask"><a href="#padding-mask" class="headerlink" title="padding mask"></a>padding mask</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œæ— è®ºæ˜¯padding mask è¿˜æ˜¯causal maskï¼Œå…¶éƒ½æ˜¯ç›´æ¥ä½œç”¨äºattentionä¸­çš„æ³¨æ„åŠ›æƒé‡attn_scoreï¼Œå…¶å½¢çŠ¶ä¸º(q_len,k_len)ï¼Œæ¯ä¸€è¡Œä»£è¡¨äº†ç¬¬nä¸ªqå‘é‡å¯¹æ‰€æœ‰kå‘é‡çš„å…³æ³¨ç¨‹åº¦ã€‚</p>
<p>ç°åœ¨ï¼Œç”±äºæˆ‘ä»¬çš„è¾“å…¥ä¸­å­˜åœ¨padï¼Œå› æ­¤æ— è®ºæ˜¯Qè¿˜æ˜¯Kä¸­éƒ½å­˜åœ¨ç€padï¼Œä½†æˆ‘ä»¬<strong>ä¸æƒ³è®©Qå…³æ³¨åˆ°Kä¸­çš„pad</strong>ï¼ŒåŒæ—¶ï¼Œå¦ä¸€ä¸ªé‡è¦çš„ç‚¹å°±æ˜¯<strong>æˆ‘ä»¬ä¸å…³å¿ƒ<u>Qçš„padå¯¹Kçš„å…³æ³¨</u></strong>ï¼Œå…·ä½“åŸå› ä¸åœ¨è¿™é‡Œå±•å¼€ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»æœä¸€ä¸‹ã€‚</p>
<p>å‡è®¾<code>K=[a,b,c,&lt;pad&gt;,&lt;pad&gt;]</code>,åˆ™padding maskå°±è¯¥æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>]]</span><br><span class="line"><span class="comment">#å¦‚æœQ=Kï¼Œé‚£ä¹ˆscoreä¸­çš„ç¬¬4ã€5è¡Œåˆ™æ˜¯æˆ‘ä»¬ä¸å…³å¿ƒçš„</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬çš„ä»£ç åˆ™ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@staticmethod </span><span class="comment">#å¦‚æœä¸éœ€è¦è°ƒç”¨self.ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç•¥å¾®æå‡æ€§èƒ½ä¸å¯è¯»æ€§</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_enc_padding_mask</span>(<span class="params">max_len: <span class="built_in">int</span>, seq_len: torch.Tensor, batch_size: <span class="built_in">int</span>, device: torch.device</span>):</span><br><span class="line">    <span class="comment">#å…ˆç”¨0åˆ›å»ºç©ºç™½maskï¼Œå†å¡«1</span></span><br><span class="line">    enc_padding_mask = torch.zeros((batch_size, max_len, max_len), device=device)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batch_size):</span><br><span class="line">        enc_padding_mask[i, :, seq_len[i]:] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> enc_padding_mask.<span class="built_in">bool</span>()</span><br></pre></td></tr></table></figure>
<p>åœ¨å½“å‰batchä¸­ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®<strong>æ¯ä¸€ä¸ªæ ·æœ¬</strong>çš„<strong>æœ‰æ•ˆé•¿åº¦</strong>ç”Ÿæˆå½“å‰æ ·æœ¬çš„padding maskã€‚åœ¨æˆ‘çš„ä»£ç ä¸­ï¼Œ1ä»£è¡¨äº†éœ€è¦maskçš„ä½ç½®ï¼Œå› ä¸ºattentionä»£ç ä¸­çš„<code>.masked_fill_</code>æ–¹æ³•ä¼šå°†Trueçš„ä½ç½®mask</p>
<p><strong><u>å¦å¤–ï¼Œpadæœ‰å¯èƒ½ä¸ä»…å‡ºç°åœ¨å°¾éƒ¨ï¼Œä½†æˆ‘çš„ä»£ç æœªè€ƒè™‘è¿™ç§æƒ…å†µ</u></strong></p>
<h3 id="causal-mask"><a href="#causal-mask" class="headerlink" title="causal mask"></a>causal mask</h3><p>causal mask<strong><u>ä»…å‡ºç°</u></strong>åœ¨decoderçš„self-attentioné˜¶æ®µï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢ç¬¬nä¸ªqå‘é‡çœ‹åˆ°nä¹‹åçš„å†…å®¹ã€‚æˆ‘ä»¬å·²çŸ¥attention scoreæ¯ä¸€è¡Œä»£è¡¨äº†ç¬¬nä¸ªqå‘é‡å¯¹æ‰€æœ‰kå‘é‡çš„å…³æ³¨ç¨‹åº¦ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>ä¸Šä¸‰è§’</strong>maskï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[[0,1,1,1,1],</span><br><span class="line">[0,0,1,1,1],</span><br><span class="line">[0,0,0,1,1],</span><br><span class="line">[0,0,0,0,1],</span><br><span class="line">[0,0,0,0,0]]</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ç¬¬nä¸ªqå°±åªèƒ½çœ‹åˆ°nä¹‹å‰çš„kå‘é‡äº†ï¼Œç›¸åŒåœ°ï¼Œ1ä»£è¡¨äº†éœ€è¦maskçš„ä½ç½®ï¼Œé€šè¿‡è°ƒç”¨<code>torch.triu</code>ç”Ÿæˆä¸Šä¸‰è§’çŸ©é˜µï¼Œå…¶å¤§å°ä»…ä¸decoderçš„è¾“å…¥é•¿åº¦ï¼ˆpaddingåï¼‰æœ‰å…³</p>
<h4 id="å…³äºdecoderä¸­çš„ä¸¤ä¸ªmask"><a href="#å…³äºdecoderä¸­çš„ä¸¤ä¸ªmask" class="headerlink" title="å…³äºdecoderä¸­çš„ä¸¤ä¸ªmask"></a>å…³äºdecoderä¸­çš„ä¸¤ä¸ªmask</h4><p>ä¹Ÿè®¸ä½ ä¼šäº§ç”Ÿè¿™æ ·ä¸€ä¸ªç–‘é—®ï¼Œåœ¨self-attentionä¸­ï¼Œcausal maskæ˜¯ä¸æ˜¯å¤©ç„¶çš„ä¹Ÿèµ·åˆ°äº†padding mask çš„æ•ˆæœï¼Ÿå› ä¸ºå¯¹äºæœ‰æ•ˆçš„Qæ¥è¯´ï¼Œå…¶æ°¸è¿œä¹Ÿçœ‹ä¸åˆ°Kä¸­çš„padã€‚è¿˜æ˜¯å‡è®¾ç°åœ¨Qå’ŒKä¸º<code>[a,b,c,&lt;pad&gt;,&lt;pad&gt;]</code>ï¼ˆè‡ªæ³¨æ„åŠ›ä¸­Qå’ŒKçš„padæ˜¯ä¸€æ ·çš„ï¼‰ï¼Œå¯¹äºQçš„æœ€åä¸€ä¸ªæœ‰æ•ˆtoken cï¼Œåœ¨ç»è¿‡causal maskåä¹Ÿåªçœ‹å¾—åˆ°aï¼Œbå’Œè‡ªå·±ï¼›è€Œå¯¹äºaï¼Œbæ¥è¯´ï¼Œå®ƒä»¬è¿céƒ½çœ‹ä¸åˆ°ï¼Œæ›´åˆ«è¯´padäº†ï¼Œé‚£ä¸ºä»€ä¹ˆåœ¨decoderçš„self-attentionä¸­è¿˜éœ€è¦padding maskå‘¢</p>
<p>ç­”æ¡ˆå…¶å®å¾ˆç®€å•ï¼Œä¹Ÿåœ¨ä¹‹å‰å°±æåˆ°è¿‡ï¼Œé‚£å°±æ˜¯<strong><u>padä¸ä¸€å®šåªå‡ºç°åœ¨å°¾éƒ¨</u></strong>ã€‚å¦‚æœaè¢«æ›¿æ¢ä¸ºpadï¼Œé‚£causal maskå°±æ— æ³•é˜²æ­¢ bï¼Œcçœ‹åˆ°padäº†</p>
<p>ç»¼ä¸Šï¼Œæˆ‘çš„ä»£ç ä¸­å¹¶æ²¡æœ‰è§£å†³è¯¥padçš„é—®é¢˜ï¼Œå› æ­¤åªç”¨äºç†è§£transformerç»“æ„</p>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>CNNæ‰«ç›²</title>
    <url>/2025/10/05/DL-conv/</url>
    <content><![CDATA[<h1 id="å·ç§¯ä¸äº’ç›¸å…³"><a href="#å·ç§¯ä¸äº’ç›¸å…³" class="headerlink" title="å·ç§¯ä¸äº’ç›¸å…³"></a>å·ç§¯ä¸äº’ç›¸å…³</h1><p>å¯¹äºç¦»æ•£ä¿¡å·ï¼Œå·ç§¯çš„å®šä¹‰ä¸ºï¼š</p>
<script type="math/tex; mode=display">
(f * g)(n) = \sum_{\tau = -\infty}^{\infty} f(\tau) g(n - \tau)</script><p>å…¶ä¸­gå°±æ˜¯æ»¤æ³¢å™¨ï¼ˆå·ç§¯æ ¸ï¼‰ï¼Œå…¬å¼çš„ç†è§£å°±æ˜¯å°†gå…ˆè¿›è¡Œ-Ï„çš„ç¿»è½¬ï¼Œå†è¿›è¡Œ+nçš„æ»‘åŠ¨ä»¥å¯¹å…¶è¾“å…¥ä¿¡å·fï¼Œå·ç§¯æ“ä½œçš„è¾“å‡ºå³ä¸ºç»è¿‡æ»¤æ³¢å™¨çš„è¾“å‡ºä¿¡å·</p>
<p>è€Œåœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œå·ç§¯æ ¸çš„ç¿»è½¬å…¶å®æ˜¯ä¸å¿…è¦çš„ï¼Œå› æ­¤çœå»äº†ç¿»è½¬ï¼Œç›´æ¥å¯¹å·ç§¯æ ¸è¿›è¡Œæ»‘åŠ¨çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯äº’ç›¸å…³æ“ä½œ</p>
<p>æ¥æºï¼š<a href="https://cloud.tencent.com/developer/article/2127881">ã€CNNã€‘å¾ˆè¯¦ç»†çš„è®²è§£ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆæ˜¯å·ç§¯ï¼ˆConvolutionï¼‰ï¼-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>
<p>å·ç§¯æ ¸æ ¹æ®å‚æ•°çš„ä¸åŒå¯ä»¥å®ç°æå–ä½é¢‘ã€é«˜é¢‘ç‰¹å¾ï¼ˆè¾¹ç¼˜ç‰¹å¾ï¼‰ï¼Œå¹³æ»‘ã€é”åŒ–å¤„ç†ç­‰æ“ä½œ</p>
<h1 id="å‚æ•°ç†è§£"><a href="#å‚æ•°ç†è§£" class="headerlink" title="å‚æ•°ç†è§£"></a>å‚æ•°ç†è§£</h1><h2 id="æ•°æ®å½¢çŠ¶"><a href="#æ•°æ®å½¢çŠ¶" class="headerlink" title="æ•°æ®å½¢çŠ¶"></a>æ•°æ®å½¢çŠ¶</h2><p>ä»¥äºŒç»´å·ç§¯ä¸ºä¾‹ï¼Œåœ¨pytorchä¸­ï¼Œconv2dçš„å®šä¹‰ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">    self,</span></span><br><span class="line"><span class="params">    in_channels: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">    out_channels: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">    kernel_size: _size_2_t,</span></span><br><span class="line"><span class="params">    stride: _size_2_t = <span class="number">1</span>,</span></span><br><span class="line"><span class="params">    padding: <span class="type">Union</span>[<span class="built_in">str</span>, _size_2_t] = <span class="number">0</span>,</span></span><br><span class="line"><span class="params">    dilation: _size_2_t = <span class="number">1</span>,</span></span><br><span class="line"><span class="params">    groups: <span class="built_in">int</span> = <span class="number">1</span>,</span></span><br><span class="line"><span class="params">    bias: <span class="built_in">bool</span> = <span class="literal">True</span>,</span></span><br><span class="line"><span class="params">    padding_mode: <span class="built_in">str</span> = <span class="string">&#x27;zeros&#x27;</span>,  <span class="comment"># <span class="doctag">TODO:</span> refine this type</span></span></span><br><span class="line"><span class="params">    device=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    dtype=<span class="literal">None</span></span></span><br><span class="line"><span class="params"></span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>in_channelså†³å®šäº†å·ç§¯æ ¸çš„<strong>æ·±åº¦</strong>ï¼Œæ¯å±‚å·ç§¯æ ¸è¾“å‡ºçš„æ•°æ®æœ€ç»ˆä¼šç›¸åŠ ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå·ç§¯æ ¸è¾“å‡ºä¸€ä¸ªå•é€šé“æ•°æ®</li>
<li>out_channelså†³å®šäº†å·ç§¯æ ¸çš„<strong>ä¸ªæ•°</strong>ï¼Œå†³å®šç”Ÿæˆå¤šå°‘ä¸ªä¸Šæ¡ä¸­è¯´åˆ°çš„å•é€šé“æ•°æ®</li>
<li>kernel_sizeå†³å®šäº†æ¯ä¸ªå·ç§¯æ ¸çš„<strong>é•¿å®½</strong>ï¼ˆå‚æ•°é‡ï¼‰</li>
</ul>
<p>è¿™ä¸‰ä¸ªå‚æ•°å…±åŒå†³å®šäº†è¯¥å·ç§¯å±‚çš„å‚æ•°é‡ï¼Œå…·ä½“å›¾ç‰‡ç­‰å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/80041030">(1 å°ç§ä¿¡ / 80 æ¡æ¶ˆæ¯) Depthwiseå·ç§¯ä¸Pointwiseå·ç§¯ - çŸ¥ä¹</a></p>
<p>å¯¹äºä¸€ç»´å·ç§¯ï¼Œå½“ä¸è€ƒè™‘channelsçš„æ”¹å˜ï¼ˆä¸”ä¸º1ï¼‰æ—¶ï¼Œå·ç§¯æ ¸ä¸º1*kæ—¶ç­‰ä»·äºå¯¹å…¶è¿›è¡Œä¸€ç»´å·ç§¯ï¼›ä¾‹ï¼šå¯¹äºå½¢çŠ¶ä¸º(b,t,f)çš„é¢‘è°±å›¾ï¼Œç›´æ¥å¯¹å…¶è¿›è¡Œä¸€ç»´å·ç§¯å°±æ˜¯åœ¨å¯¹å…¶frequency binè¿›è¡Œå·ç§¯æ“ä½œ</p>
<h2 id="æ„Ÿå—é‡å¤§å°ä¸æ­¥é•¿"><a href="#æ„Ÿå—é‡å¤§å°ä¸æ­¥é•¿" class="headerlink" title="æ„Ÿå—é‡å¤§å°ä¸æ­¥é•¿"></a>æ„Ÿå—é‡å¤§å°ä¸æ­¥é•¿</h2><ul>
<li>é1<em>1å·ç§¯æ ¸ï¼š`3</em>3<code>å’Œ</code>5*5`å…·æœ‰è¾ƒå¥½çš„ç»†ç²’åº¦ç‰¹å¾æå–èƒ½åŠ›ä¸”è®¡ç®—å¼€é”€é€‚ä¸­ï¼Œå¯¹äºæœ‰ç‰¹æ®Šè¦æ±‚çš„æ•°æ®ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸è§„åˆ™å½¢çŠ¶ï¼›è€Œä½¿ç”¨å¤§å·ç§¯æ ¸å¯ä»¥è·å–æ›´å¤§çš„å±€éƒ¨æ„Ÿå—é‡ï¼Œå¯¹å¤§é¢ç§¯çš„ç‰¹å¾ä¼šæ›´åŠ æ•æ„Ÿï¼Œä½†è®¡ç®—é‡ä¹Ÿä¼šå˜å¤§</li>
<li>1<em>1å·ç§¯æ ¸ï¼š`1</em>1`ç›®å‰æˆ‘è§åˆ°è¿‡çš„æœ‰å¦‚ä¸‹å‡ ç§ç”¨æ³•ï¼š1.ç”¨äºå¯¹æ•°æ®è¿›è¡Œå•çº¯çš„channelç»´åº¦ä¸Š\ä¸‹é‡‡æ ·ï¼›2.ç”¨äºDepthwise Separable Convolutionä¸­çš„pointwise å·ç§¯ï¼›3.ç”¨äºä»£æ›¿æŸäº›attentionç»“æ„ä¸­qkvçš„linearè®¡ç®—ï¼›4.inceptionæ¨¡å—ä¸­çš„å¤šæ„Ÿå—é‡èåˆ</li>
</ul>
<p>å¯¹äºæ­¥é•¿ï¼Œå¸¸ç”¨çš„å°±æ˜¯1å’Œ2ï¼Œ1é€‚åˆç”¨äºç‰¹å¾æå–é˜¶æ®µï¼›é€‰æ‹©2æ—¶è¾“å‡ºå½¢çŠ¶ä¼šç¼©å‡çº¦ä¸€åŠï¼Œå¸¸ç”¨äºä¸‹é‡‡æ ·</p>
<h1 id="å·ç§¯ç§ç±»"><a href="#å·ç§¯ç§ç±»" class="headerlink" title="å·ç§¯ç§ç±»"></a>å·ç§¯ç§ç±»</h1><h2 id="å¸¸è§„å·ç§¯"><a href="#å¸¸è§„å·ç§¯" class="headerlink" title="å¸¸è§„å·ç§¯"></a>å¸¸è§„å·ç§¯</h2><p>å·ç§¯æƒé‡å½¢çŠ¶ä¸º(out_channels, inchannels, H, W)ï¼Œå¯ä»¥ç†è§£ä¸ºæœ‰out_channelsä¸ª(inchannels, H, W)çš„å·ç§¯æ ¸ã€‚</p>
<p>å¸¸è§„å·ç§¯group=1ï¼Œå…·ä½“çœ‹ä¸‹ä¸€å°èŠ‚</p>
<h2 id="Depthwise-Separable-Convolution"><a href="#Depthwise-Separable-Convolution" class="headerlink" title="Depthwise Separable Convolution"></a>Depthwise Separable Convolution</h2><p>ç”±pointwise conv å’Œ depthwise convç»„åˆè€Œæˆï¼ˆå…ˆdepthå†pointwiseï¼‰ã€‚å…¶ä¸­ï¼Œpointwise convå°±æ˜¯å·ç§¯æ ¸ä¸º1*1çš„å¸¸è§„å·ç§¯ï¼Œåœ¨efficient netä¸­å…¶æ‰©å¤§äº†è¾“å‡ºchannelsï¼›è€Œdepthwise conv åˆ™æ˜¯é€šè¿‡è°ƒæ•´nn.conv2dçš„groupsé€‰é¡¹å®ç°ï¼š</p>
<p>å·ç§¯æƒé‡å½¢çŠ¶å®Œæ•´å†™æ³•å…¶å®ä¸º(out_channels, inchannels/groups, H, W)ï¼Œå¯¹äºdepthwise convï¼š<strong>groups=in_channels=out_channels</strong> ï¼Œgroupså¿…é¡»è¦èƒ½è¢«in_channelsæ•´é™¤ï¼›</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¸€ä¸ªin_channels=4çš„æ•°æ®æ¥è¯´ï¼Œå…ˆå°†å…¶åˆ†ä¸º4ä¸ªchannel=1çš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªå·ç§¯æ ¸çš„å¤§å°åªèƒ½ä¸º(1,H,W)ï¼›è€Œå¯¹äºå·ç§¯æ ¸çš„ä¸ªæ•°ï¼Œæ¯ç»„æ•°æ®åˆ†åˆ°out_channels/groupsä¸ªï¼ˆdepthwiseä¸­ä¸ºè¯¥ç»“æœä¸º1ï¼‰ï¼Œæœ€åæ‹¼æ¥èµ·æ¥å³ä¸ºout_channels</p>
<p>Depthwise Separable Convolutionå¯ä»¥æœ‰æ•ˆç¼©å‡å‚æ•°é‡ï¼Œä»¥è¾¾åˆ°æ›´æ·±çš„ç½‘ç»œç»“æ„ï¼šå‡è®¾in/out_channels=4ï¼Œå·ç§¯æ ¸3*3ï¼š</p>
<p>å¸¸è§„å·ç§¯å‚æ•°ï¼š<code>4*4*3*3=144</code></p>
<p>Depthwise Separableï¼š<code>4*4*1*1+4*1*3*3=52</code></p>
<h3 id="è½¬ç½®å·ç§¯"><a href="#è½¬ç½®å·ç§¯" class="headerlink" title="è½¬ç½®å·ç§¯"></a>è½¬ç½®å·ç§¯</h3><p>é€šè¿‡å¯¹è¾“å…¥è¿›è¡Œpaddingçš„æ–¹å¼ï¼Œå¯ä»¥å®ç°è¾“å…¥Hã€Wç»´åº¦çš„ä¸Šé‡‡æ ·ï¼Œç”Ÿæˆæ›´é«˜åˆ†è¾¨ç‡çš„æ•°æ®</p>
<h1 id="æ­å»ºEfficientNet-v2"><a href="#æ­å»ºEfficientNet-v2" class="headerlink" title="æ­å»ºEfficientNet_v2"></a>æ­å»ºEfficientNet_v2</h1><p>æœ¬èŠ‚ä»¥efficientnetv2_sä¸ºä¾‹</p>
<h2 id="ä¸»æ¨¡å‹ç±»"><a href="#ä¸»æ¨¡å‹ç±»" class="headerlink" title="ä¸»æ¨¡å‹ç±»"></a>ä¸»æ¨¡å‹ç±»</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EfficientNetV2</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 model_cnf: <span class="built_in">list</span>, <span class="comment">#ä¼ å…¥æ ¼å¼ä¸º[[repeat, kernel, stride, expansion, in_c, out_c, operator, se_ratio],...],å…¶ä¸­opå‚æ•°ä¸ºæ˜¯å¦ä½¿ç”¨fuse mbconv</span></span></span><br><span class="line"><span class="params">                 num_classes: <span class="built_in">int</span> = <span class="number">1000</span>,</span></span><br><span class="line"><span class="params">                 num_features: <span class="built_in">int</span> = <span class="number">1280</span>,</span></span><br><span class="line"><span class="params">                 dropout_rate: <span class="built_in">float</span> = <span class="number">0.2</span>,</span></span><br><span class="line"><span class="params">                 drop_connect_rate: <span class="built_in">float</span> = <span class="number">0.2</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(EfficientNetV2, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> cnf <span class="keyword">in</span> model_cnf:</span><br><span class="line">            <span class="keyword">assert</span> <span class="built_in">len</span>(cnf) == <span class="number">8</span>ã€</span><br><span class="line">            </span><br><span class="line">		<span class="comment">#functools.partialå¯ä»¥åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼ å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ï¼Œå¯¹äºä¸æ”¹å˜å‚æ•°çš„ç½‘ç»œç»“æ„æ›´ç®€æ´</span></span><br><span class="line">        norm_layer = partial(nn.BatchNorm2d, eps=<span class="number">1e-3</span>, momentum=<span class="number">0.1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#å¤´éƒ¨å·ç§¯å•ç‹¬å®ç°ï¼Œå…¶å·ç§¯æ ¸æ•°é‡éœ€åŒ¹é…åç»­æ¨¡å‹in_channels</span></span><br><span class="line">        stem_filter_num = model_cnf[<span class="number">0</span>][<span class="number">4</span>]</span><br><span class="line">		</span><br><span class="line">        <span class="comment">#ç®€å•çš„conv2d+norm+actï¼Œä¸å†å±•å¼€</span></span><br><span class="line">        self.stem = ConvBNAct(<span class="number">3</span>,</span><br><span class="line">                              stem_filter_num,</span><br><span class="line">                              kernel_size=<span class="number">3</span>,</span><br><span class="line">                              stride=<span class="number">2</span>,</span><br><span class="line">                              norm_layer=norm_layer)  <span class="comment"># æ¿€æ´»å‡½æ•°é»˜è®¤æ˜¯SiLU</span></span><br><span class="line">		</span><br><span class="line">       	<span class="comment">#i[0]ä¸ºè¯¥blockçš„é‡å¤æ¬¡æ•°</span></span><br><span class="line">        total_blocks = <span class="built_in">sum</span>([i[<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> model_cnf])</span><br><span class="line">        block_id = <span class="number">0</span></span><br><span class="line">        blocks = []</span><br><span class="line">        <span class="keyword">for</span> cnf <span class="keyword">in</span> model_cnf:</span><br><span class="line">            repeats = cnf[<span class="number">0</span>]</span><br><span class="line">            op = FusedMBConv <span class="keyword">if</span> cnf[-<span class="number">2</span>] == <span class="number">0</span> <span class="keyword">else</span> MBConv</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(repeats):</span><br><span class="line">                blocks.append(op(kernel_size=cnf[<span class="number">1</span>],</span><br><span class="line">                                 input_c=cnf[<span class="number">4</span>] <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">else</span> cnf[<span class="number">5</span>],</span><br><span class="line">                                 out_c=cnf[<span class="number">5</span>],</span><br><span class="line">                                 expand_ratio=cnf[<span class="number">3</span>],</span><br><span class="line">                                 stride=cnf[<span class="number">2</span>] <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span>,</span><br><span class="line">                                 se_ratio=cnf[-<span class="number">1</span>],</span><br><span class="line">                                 drop_rate=drop_connect_rate * block_id / total_blocks,</span><br><span class="line">                                 norm_layer=norm_layer))</span><br><span class="line">                block_id += <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">        <span class="comment">#*æ“ä½œä¼šæŒ‰æ·»åŠ é¡ºåºè¿”å›listï¼Œæ˜¯æ¨¡å—åŒ–ç¥ç»ç½‘ç»œçš„å¸¸ç”¨æ“ä½œ</span></span><br><span class="line">        self.blocks = nn.Sequential(*blocks)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#æ„å»ºåˆ†ç±»å¤´</span></span><br><span class="line">        head_input_c = model_cnf[-<span class="number">1</span>][-<span class="number">3</span>]</span><br><span class="line">        head = OrderedDict()</span><br><span class="line">        <span class="comment">#orderdictæ˜¯ä¸€ä¸ªæœ‰åºå­—å…¸ï¼Œå…¶updateæ–¹æ³•åœ¨æ’å…¥æ–°é”®æ—¶æŒ‰é¡ºåºæ’å…¥ï¼Œè¦†ç›–å·²æœ‰é”®æ—¶ä¸æ”¹å˜é¡ºåº</span></span><br><span class="line">        head.update(&#123;<span class="string">&quot;project_conv&quot;</span>: ConvBNAct(head_input_c,</span><br><span class="line">                                               num_features,</span><br><span class="line">                                               kernel_size=<span class="number">1</span>,</span><br><span class="line">                                               norm_layer=norm_layer)&#125;)  <span class="comment"># æ¿€æ´»å‡½æ•°é»˜è®¤æ˜¯SiLU</span></span><br><span class="line">        <span class="comment">#å¯ä»¥çœ‹å‡ºï¼Œè¯¥åˆ†ç±»å¤´æ˜¯ç›´æ¥å°†Hï¼ŒWæ± åŒ–ä¸º1*1ï¼Œå°†channelsç»´ä½œä¸ºæœ€ålinearçš„è¾“å…¥ç»´åº¦</span></span><br><span class="line">        head.update(&#123;<span class="string">&quot;avgpool&quot;</span>: nn.AdaptiveAvgPool2d(<span class="number">1</span>)&#125;)</span><br><span class="line">        head.update(&#123;<span class="string">&quot;flatten&quot;</span>: nn.Flatten()&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> dropout_rate &gt; <span class="number">0</span>:</span><br><span class="line">            head.update(&#123;<span class="string">&quot;dropout&quot;</span>: nn.Dropout(p=dropout_rate, inplace=<span class="literal">True</span>)&#125;)</span><br><span class="line">        head.update(&#123;<span class="string">&quot;classifier&quot;</span>: nn.Linear(num_features, num_classes)&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#dictå’Œlistéƒ½èƒ½ç›´æ¥ä¼ å…¥nn.Sequential</span></span><br><span class="line">        self.head = nn.Sequential(head)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># initial weights</span></span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(m, nn.Conv2d):</span><br><span class="line">                nn.init.kaiming_normal_(m.weight, mode=<span class="string">&quot;fan_out&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> m.bias <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    nn.init.zeros_(m.bias)</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(m, nn.BatchNorm2d):</span><br><span class="line">                nn.init.ones_(m.weight)</span><br><span class="line">                nn.init.zeros_(m.bias)</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(m, nn.Linear):</span><br><span class="line">                nn.init.normal_(m.weight, <span class="number">0</span>, <span class="number">0.01</span>)</span><br><span class="line">                nn.init.zeros_(m.bias)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x: Tensor</span>) -&gt; Tensor:</span><br><span class="line">        x = self.stem(x)</span><br><span class="line">        x = self.blocks(x)</span><br><span class="line">        x = self.head(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h2 id="MBConv"><a href="#MBConv" class="headerlink" title="MBConv"></a>MBConv</h2><p>å¯¹äºv2ç‰ˆæœ¬ï¼Œå…¶å‰åŠéƒ¨åˆ†ç½‘ç»œä½¿ç”¨çš„fuse-MBConvå°†åŸ1*1conv+depthwiseæ›¿æ¢ä¸ºäº†ä¸€ä¸ª33convï¼Œä¸å†é¢å¤–è¯´æ˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MBConv</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 kernel_size: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">                 input_c: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">                 out_c: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">                 expand_ratio: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">                 stride: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">                 se_ratio: <span class="built_in">float</span>,</span></span><br><span class="line"><span class="params">                 drop_rate: <span class="built_in">float</span>,</span></span><br><span class="line"><span class="params">                 norm_layer: <span class="type">Callable</span>[..., nn.Module]</span>):</span><br><span class="line">        <span class="built_in">super</span>(MBConv, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> stride <span class="keyword">not</span> <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>]:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;illegal stride value.&quot;</span>)</span><br><span class="line"></span><br><span class="line">        self.has_shortcut = (stride == <span class="number">1</span> <span class="keyword">and</span> input_c == out_c)</span><br><span class="line"></span><br><span class="line">        activation_layer = nn.SiLU  <span class="comment"># alias Swish</span></span><br><span class="line">        expanded_c = input_c * expand_ratio</span><br><span class="line"></span><br><span class="line">        <span class="keyword">assert</span> expand_ratio != <span class="number">1</span></span><br><span class="line">        <span class="comment"># channel é‡‡æ ·</span></span><br><span class="line">        self.expand_conv = ConvBNAct(input_c,</span><br><span class="line">                                     expanded_c,</span><br><span class="line">                                     kernel_size=<span class="number">1</span>,</span><br><span class="line">                                     norm_layer=norm_layer,</span><br><span class="line">                                     activation_layer=activation_layer)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ ‡å‡†depthwise conv</span></span><br><span class="line">        self.dwconv = ConvBNAct(expanded_c,</span><br><span class="line">                                expanded_c,</span><br><span class="line">                                kernel_size=kernel_size,</span><br><span class="line">                                stride=stride,</span><br><span class="line">                                groups=expanded_c,</span><br><span class="line">                                norm_layer=norm_layer,</span><br><span class="line">                                activation_layer=activation_layer)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#seæ¨¡å—</span></span><br><span class="line">        self.se = SqueezeExcite(input_c, expanded_c, se_ratio) <span class="keyword">if</span> se_ratio &gt; <span class="number">0</span> <span class="keyword">else</span> nn.Identity()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Point-wise linear projection</span></span><br><span class="line">        self.project_conv = ConvBNAct(expanded_c,</span><br><span class="line">                                      out_planes=out_c,</span><br><span class="line">                                      kernel_size=<span class="number">1</span>,</span><br><span class="line">                                      norm_layer=norm_layer,</span><br><span class="line">                                      activation_layer=nn.Identity)  <span class="comment"># æ³¨æ„è¿™é‡Œæ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼Œä¼ å…¥çš„æ˜¯Identity</span></span><br><span class="line"></span><br><span class="line">        self.out_channels = out_c</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åªæœ‰åœ¨ä½¿ç”¨shortcutè¿æ¥æ—¶æ‰ä½¿ç”¨dropoutå±‚</span></span><br><span class="line">        self.drop_rate = drop_rate</span><br><span class="line">        <span class="keyword">if</span> self.has_shortcut <span class="keyword">and</span> drop_rate &gt; <span class="number">0</span>:</span><br><span class="line">            self.dropout = DropPath(drop_rate)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x: Tensor</span>) -&gt; Tensor:</span><br><span class="line">        result = self.expand_conv(x)</span><br><span class="line">        result = self.dwconv(result)</span><br><span class="line">        result = self.se(result)</span><br><span class="line">        result = self.project_conv(result)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.has_shortcut:</span><br><span class="line">            <span class="keyword">if</span> self.drop_rate &gt; <span class="number">0</span>:</span><br><span class="line">                result = self.dropout(result)</span><br><span class="line">            result += x</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<h2 id="SEæ¨¡å—"><a href="#SEæ¨¡å—" class="headerlink" title="SEæ¨¡å—"></a>SEæ¨¡å—</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SqueezeExcite</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 input_c: <span class="built_in">int</span>,   <span class="comment"># block input channel</span></span></span><br><span class="line"><span class="params">                 expand_c: <span class="built_in">int</span>,  <span class="comment"># block expand channel</span></span></span><br><span class="line"><span class="params">                 se_ratio: <span class="built_in">float</span> = <span class="number">0.25</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(SqueezeExcite, self).__init__()</span><br><span class="line">        squeeze_c = <span class="built_in">int</span>(input_c * se_ratio)</span><br><span class="line">        <span class="comment">#å°†linearæ›¿æ¢ä¸ºäº†1*1convï¼Œè¿™æ ·åšå¯ä»¥ä¸ç”¨å˜æ¢ç»´åº¦ï¼Œæ˜¯å¸¸è§åšæ³•</span></span><br><span class="line">        self.conv_reduce = nn.Conv2d(expand_c, squeeze_c, <span class="number">1</span>)</span><br><span class="line">        self.act1 = nn.SiLU()  <span class="comment"># alias Swish</span></span><br><span class="line">        self.conv_expand = nn.Conv2d(squeeze_c, expand_c, <span class="number">1</span>)</span><br><span class="line">        self.act2 = nn.Sigmoid()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x: Tensor</span>) -&gt; Tensor:</span><br><span class="line">        scale = x.mean((<span class="number">2</span>, <span class="number">3</span>), keepdim=<span class="literal">True</span>)<span class="comment">#ç›¸å½“äºavgpool</span></span><br><span class="line">        scale = self.conv_reduce(scale) </span><br><span class="line">        scale = self.act1(scale)</span><br><span class="line">        scale = self.conv_expand(scale)</span><br><span class="line">        scale = self.act2(scale)</span><br><span class="line">        <span class="comment">#scaleä¼šå­¦ä¹ åˆ°å“ªäº›é€šé“æ›´é‡è¦ï¼Œç›¸å½“äºå¯¹xçš„é€šé“ç»´åº¦æ–½åŠ äº†ä¸€ä¸ªæ³¨æ„åŠ›å› å­</span></span><br><span class="line">        <span class="keyword">return</span> scale * x</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ åŸºç¡€æ‚é¡¹</title>
    <url>/2025/10/05/DL-base/</url>
    <content><![CDATA[<h1 id="å¸¸ç”¨æ¿€æ´»å‡½æ•°"><a href="#å¸¸ç”¨æ¿€æ´»å‡½æ•°" class="headerlink" title="å¸¸ç”¨æ¿€æ´»å‡½æ•°"></a>å¸¸ç”¨æ¿€æ´»å‡½æ•°</h1><h2 id="sigmoid"><a href="#sigmoid" class="headerlink" title="sigmoid"></a>sigmoid</h2><p>æŒ‡ä¸€ç±»<strong><u>Så‹</u>çš„ä¸¤ç«¯é¥±å’Œå‡½æ•°</strong>ï¼Œå¸¸è§çš„æœ‰logisticå’ŒTanhåŠå…¶å˜ç§</p>
<h3 id="logistic"><a href="#logistic" class="headerlink" title="logistic"></a>logistic</h3><script type="math/tex; mode=display">
\sigma(x)=\frac{1}{1+e^{-x}}</script><p>ç”±äºæœ€å¤§å¯¼æ•°åªæœ‰0.25ï¼Œä¸¤ç«¯é¥±å’Œä¸¥é‡ï¼Œè¾“å‡ºå§‹ç»ˆä¸ºæ­£ï¼Œå¯¼è‡´æ¢¯åº¦ä¸‹é™å˜æ…¢ï¼Œç°åœ¨æ·±åº¦å­¦ä¹ éšè—å±‚ä¸­å·²å¾ˆå°‘ä½¿ç”¨</p>
<h3 id="Tanh"><a href="#Tanh" class="headerlink" title="Tanh"></a>Tanh</h3><script type="math/tex; mode=display">
\sigma(x)=\frac{e^x-e^{-x}}{e^x+e^{-x}}</script><p>é›¶ä¸­å¿ƒåŒ–ï¼Œä¼˜äºlogistic</p>
<h2 id="ReLU"><a href="#ReLU" class="headerlink" title="ReLU"></a>ReLU</h2><script type="math/tex; mode=display">
f(x) = \max(0, x)</script><p>å¯¼æ•°1ç¼“è§£äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</p>
<p>0çš„éƒ¨åˆ†å¯¼è‡´äº†è¯¥ç¥ç»å…ƒçš„è¾“å…¥å‚æ•°æ­»äº¡ï¼Œæ°¸ä¸æ›´æ–°ï¼ˆæ³¨ï¼šæ­»äº¡ReLUå’Œæ¢¯åº¦æ¶ˆå¤±ä¸æ˜¯ä¸€å›äº‹ï¼‰</p>
<h3 id="LeakyReLU"><a href="#LeakyReLU" class="headerlink" title="LeakyReLU"></a>LeakyReLU</h3><script type="math/tex; mode=display">
f(x) = \max(0, x)+\gamma\min(0,x)</script><p>gammaä¸ºä¸€ä¸ªå¾ˆå°å€¼ï¼ˆtorchä¸­é»˜è®¤e-2ï¼‰ï¼Œä»£æ›¿ReLUçš„0</p>
<h3 id="PReLU"><a href="#PReLU" class="headerlink" title="PReLU"></a>PReLU</h3><p>å°†gammaæ¢ä½œå¯å­¦ä¹ çš„å‚æ•°</p>
<h3 id="Swish"><a href="#Swish" class="headerlink" title="Swish"></a>Swish</h3><script type="math/tex; mode=display">
f(x)=x\sigma(\beta x)</script><p>è‡ªé—¨æ§æ¿€æ´»å‡½æ•°ã€‚å…¶ä¸­sigmaä¸ºlogisitcå‡½æ•°ï¼Œbetaæ˜¯ä¸€ä¸ªå¯å­¦ä¹ æˆ–è¶…å‚æ•°ã€‚</p>
<p>å½“logisticæ¥è¿‘1æ—¶ï¼Œswishè¾“å‡ºæ¥è¿‘xï¼Œlogisticæ¥è¿‘0æ—¶ï¼Œè¾“å‡ºæ¥è¿‘0ä½†ä¸ä¸º0ã€‚</p>
<p>å½¢çŠ¶ç±»ä¼¼LeakyRelu</p>
<h1 id="æŸå¤±å‡½æ•°"><a href="#æŸå¤±å‡½æ•°" class="headerlink" title="æŸå¤±å‡½æ•°"></a>æŸå¤±å‡½æ•°</h1><h2 id="å‡æ–¹è¯¯å·®ï¼ˆMean-Squared-Error-ï¼‰"><a href="#å‡æ–¹è¯¯å·®ï¼ˆMean-Squared-Error-ï¼‰" class="headerlink" title="å‡æ–¹è¯¯å·®ï¼ˆMean Squared Error ï¼‰"></a>å‡æ–¹è¯¯å·®ï¼ˆMean Squared Error ï¼‰</h2><script type="math/tex; mode=display">
MSE = \frac{1}{n} \sum_{i=1}^{n} (\hat{y}_i - y_i)^2</script><p>å…¶ä¸­y^hatä¸ºæ¨¡å‹è¾“å‡ºï¼ˆæ¦‚ç‡ï¼‰ï¼Œyä¸ºæ ‡ç­¾å€¼ï¼ˆçœŸ1å‡0ï¼‰</p>
<p>åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œä½¿ç”¨sigmoid/softmxå¾—åˆ°æ¦‚ç‡ï¼Œé…åˆMSEæŸå¤±å‡½æ•°æ—¶ï¼Œé‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•è¿›è¡Œå­¦ä¹ æ—¶ï¼Œä¼šå‡ºç°æ¨¡å‹<strong>ä¸€å¼€å§‹è®­ç»ƒæ—¶ï¼Œå­¦ä¹ é€Ÿåº¦éå¸¸æ…¢</strong>çš„æƒ…å†µ</p>
<h2 id="äº¤å‰ç†µï¼ˆCross-Entropy-Loss-Functionï¼‰"><a href="#äº¤å‰ç†µï¼ˆCross-Entropy-Loss-Functionï¼‰" class="headerlink" title="äº¤å‰ç†µï¼ˆCross Entropy Loss Functionï¼‰"></a>äº¤å‰ç†µï¼ˆCross Entropy Loss Functionï¼‰</h2><script type="math/tex; mode=display">
L = \frac{1}{N} \sum_{i=1}^{N} L_i = -\frac{1}{N} \sum_{i=1}^{N} \sum_{c=1}^{M} y_{ic} \log(p_{ic})</script><p>å…¶ä¸­Nå¯ä»¥ç†è§£ä¸ºbatchsizeï¼ˆåªæ˜¯æœ€åå¯¹æ‰€æœ‰æ ·æœ¬çš„äº¤å‰ç†µæ±‚å¹³å‡ï¼‰ï¼ŒMä¸ºç±»åˆ«æ•°é‡ï¼ˆæ¨¡å‹è¾“å‡ºç»´åº¦ï¼‰ï¼Œy_icä¸ºæ ‡ç­¾å€¼ï¼ˆçœŸ1å‡0ï¼‰ï¼Œp_icä¸ºæ¨¡å‹å¯¹æ¯ä¸ªç±»çš„è¾“å‡ºæ¦‚ç‡</p>
<p><em><u>å¯¹äºtorchï¼Œå¯é€‰æ‹©æ˜¯å¦æœ€ç»ˆé™¤ä»¥N</u></em></p>
<h1 id="åå‘ä¼ æ’­ç®—æ³•"><a href="#åå‘ä¼ æ’­ç®—æ³•" class="headerlink" title="åå‘ä¼ æ’­ç®—æ³•"></a>åå‘ä¼ æ’­ç®—æ³•</h1><p>å¯¹äºæŸä¸ªç¥ç»å…ƒçš„è¾“å‡ºï¼Œè®¾ä¸ºï¼ˆå‡è®¾æ— åç½®é¡¹ï¼‰ï¼š</p>
<script type="math/tex; mode=display">
out^{(l)}=f(\omega x)=in^{(l+1)}</script><p>å…¶ä¸­ï¼Œlä¸Šæ ‡æŒ‡ç½‘ç»œå±‚æ•°ï¼Œfä¸ºæ¿€æ´»å‡½æ•°ã€‚ï¼ˆå…¶å®Ï‰xæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œä¸ºæ–¹ä¾¿ç†è§£ï¼Œå‡è®¾è¯¥ç¥ç»å…ƒåªæœ‰ä¸€ä¸ªè¾“å…¥ï¼‰å¯¹äºæ¢¯åº¦ä¸‹é™ç®—æ³•ä¸­æƒé‡çš„æ›´æ–°ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
\omega _{new}= \omega - \alpha \frac{\partial L}{\partial \omega}</script><p>ç”±é“¾å¼æ³•åˆ™å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial L}{\partial \omega} = \frac{\partial L}{\partial f}
\cdot \frac{\partial f}{\partial (\omega x)}
\cdot \frac{\partial (\omega x)}{\partial \omega}=
\frac{\partial L}{\partial out^{(l)}} \cdot f' \cdot out^{(l-1)}</script><p>ä¸€èˆ¬ç§°æŸå¤±å‡½æ•°å¯¹lå±‚è¯¥ç¥ç»å…ƒè¾“å‡ºçš„åå¯¼ä¸º<strong>è¯¯å·®é¡¹</strong>Î´ï¼Œåˆ™æŸå¤±å‡½æ•°å¯¹è¯¥æƒé‡çš„åå¯¼åˆ™ä¸ºï¼š</p>
<p>è¯¯å·®é¡¹  x  <strong>è¯¥ç¥ç»å…ƒ</strong>æ¿€æ´»å‡½æ•°çš„<strong>æ¢¯åº¦</strong>  x  <strong>è¯¥æƒé‡å¯¹åº”ä¸Šä¸€ç¥ç»å…ƒ</strong>çš„è¾“å‡º</p>
<p>è€Œè¯¯å·®é¡¹çš„è®¡ç®—ï¼š</p>
<script type="math/tex; mode=display">
out^{l+1}=f_{l+1}(\omega^{(l+1)} out^{(l)})
\\
\frac{\partial L}{\partial out^{(l)}}= \frac{\partial L}{\partial out^{(l+1)}}
\cdot \frac{\partial out^{l+1}}{\partial f_{l+1}}
\cdot \frac{\partial f_{l+1}}{\partial out^{(l)}}= \delta^{(l+1)} \cdot f_{(l+1)}' \cdot \omega^{(l+1)}</script><p>æ³¨æ„æ­¤å¤„æœ€åä¸€å¯¼æ˜¯å¯¹lå±‚è¯¥ç¥ç»å…ƒçš„è¾“å‡ºåå¯¼ï¼Œæ‰€ä»¥ç»“æœæ˜¯l+1å±‚çš„æƒé‡ã€‚ï¼ˆæˆ‘å¯¹æ¿€æ´»å‡½æ•°çš„ç†è§£ä¸æ ‡å‡†å…¬å¼ä¸­æ¢¯åº¦çš„ä½ç½®ä¸å¤ªä¸€æ ·ï¼Œä½†å…¶å®æœ€ç»ˆç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚å³ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial L}{\partial \omega_{(l)}}=\frac{\partial L}{\partial out^{(last)}} \\ \cdot f_{(last)}'\cdot \omega^{(last)}\cdot...
\cdot  \cdot f_{(l+1)}' \cdot \omega^{(l+1)} \cdot
\\
 f_{(l)}' \cdot out^{(l-1)}</script><p>æœ€åä¸€å±‚çš„è¾“å‡ºå³æ¨¡å‹çš„è¾“å‡ºï¼ˆæ¦‚ç‡ï¼‰ï¼Œæ€»ç»“ä¸‹æ¥å°±æ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æŸå¤±å‡½æ•°å¯¹lå±‚æƒé‡çš„åå¯¼ = æŸå¤±å‡½æ•°å¯¹æ¨¡å‹è¾“å‡ºçš„åå¯¼ *</span><br><span class="line">					  æœ€åä¸€å±‚åˆ°lå±‚çš„æ‰€æœ‰æ¿€æ´»å‡½æ•°çš„æ¢¯åº¦ *</span><br><span class="line">					  æœ€åä¸€å±‚åˆ°l+1å±‚çš„æƒé‡å’Œ *</span><br><span class="line">					  l-1å±‚çš„ç¥ç»å…ƒè¾“å‡º</span><br></pre></td></tr></table></figure>
<p>ï¼ˆé¢˜å¤–è¯ï¼Œç”±è¯¥å…¬å¼å¯ç†è§£æ­»äº¡ReLUé€ æˆçš„æ˜¯åœ¨åå‘ä¼ æ’­ä¸­è¯¥ç¥ç»å…ƒä¹‹å‰æ‰€æœ‰ç›¸å…³çº¿è·¯ä¸­å‚æ•°æ›´æ–°çš„ç›´æ¥æ­»äº¡ï¼Œè€Œæ¢¯åº¦æ¶ˆå¤±é—®é¢˜åˆ™æ˜¯ç”±äºæŸäº›æ¿€æ´»å‡½æ•°é¥±å’ŒåŒºå¯¼æ•°æ¥è¿‘0å¯¼è‡´çš„ç½‘ç»œå‚æ•°æ›´æ–°ç¼“æ…¢ï¼‰</p>
<h1 id="è‡ªåŠ¨å¾®åˆ†ä¸è®¡ç®—å›¾"><a href="#è‡ªåŠ¨å¾®åˆ†ä¸è®¡ç®—å›¾" class="headerlink" title="è‡ªåŠ¨å¾®åˆ†ä¸è®¡ç®—å›¾"></a>è‡ªåŠ¨å¾®åˆ†ä¸è®¡ç®—å›¾</h1><p>æœ¬èŠ‚ä»¥pytorchæ“ä½œä¸ºä¾‹</p>
<p>è‡ªåŠ¨å¾®åˆ†çš„å­˜åœ¨æ˜¯ä¸ºäº†æ–¹ä¾¿å¯¹å‚æ•°æ¢¯åº¦çš„è®¡ç®—ï¼Œå…¶åŸºæœ¬åŸç†æ˜¯å°†æ‰€æœ‰çš„æ•°å€¼è®¡ç®—åˆ†è§£ä¸ºåŸºæœ¬æ•°å€¼è¿ç®—å’Œä¸€äº›åˆç­‰å‡½æ•°ï¼Œæœ€ç»ˆé€šè¿‡é“¾å¼æ³•åˆ™è‡ªåŠ¨è®¡ç®—è¯¥å¤åˆå‡½æ•°çš„æ¢¯åº¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.tensor([<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>], requires_grad=<span class="literal">True</span>)</span><br><span class="line">y = (torch.exp(-(<span class="number">2</span>*x + <span class="number">1</span>) + <span class="number">1</span>) + <span class="number">1</span>)</span><br><span class="line">y.retain_grad()</span><br><span class="line">z = <span class="number">1</span> / y</span><br><span class="line">z.<span class="built_in">sum</span>().backward()</span><br><span class="line"><span class="built_in">print</span>(x.grad) <span class="comment"># tensor([0.2100, 0.0353, 0.0049, 0.0007])</span></span><br><span class="line"><span class="built_in">print</span>(y.grad) <span class="comment"># tensor([-0.7758, -0.9644, -0.9951, -0.9993])</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶xåˆ°zçš„è®¡ç®—å³ä¸ºï¼š</p>
<script type="math/tex; mode=display">
z=\frac{1}{y}=\frac{1}{e^{(-(2x+1)+1)}+1}</script><p>å…¶è®¡ç®—å›¾ä¸ºï¼š</p>
<script type="math/tex; mode=display">
2x>2x+1>-(2x+1)>-(2x+1)+1>...>\frac{1}{e^{(-(2x+1)+1)}+1}</script><p>å› æ­¤è‹¥è¦è®¡ç®—zå¯¹xçš„å¯¼æ•°ï¼Œåˆ™å¯ä»¥é€šè¿‡é“¾å¼æ³•åˆ™+åå‘ä¼ æ’­è¿›è¡Œæ±‚è§£ï¼Œå› ä¸ºæ¯ä¸ªå­å‡½æ•°çš„å¯¼æ•°éƒ½å¾ˆç®€å•ï¼Œæ‰€ä»¥é™ä½äº†è¿ç®—é‡</p>
<p>è‹¥æƒ³å•ç‹¬å¾—åˆ°æŸä¸€æ­¥è¿ç®—ä¸­tensorçš„æ¢¯åº¦ï¼Œåˆ™éœ€è¦å‘ä¸Šè¿°ä»£ç ä¸­çš„yä¸€æ ·å…ˆå•ç‹¬ä¿å­˜è¯¥tensorå¹¶ä¿å­˜å…¶æ¢¯åº¦</p>
<h2 id="åœ¨æ·±åº¦å­¦ä¹ ä¸­"><a href="#åœ¨æ·±åº¦å­¦ä¹ ä¸­" class="headerlink" title="åœ¨æ·±åº¦å­¦ä¹ ä¸­"></a>åœ¨æ·±åº¦å­¦ä¹ ä¸­</h2><p>åœ¨è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œbackwardä¼šè®¡ç®—å‡ºlossè®¡ç®—å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æ¢¯åº¦ï¼ŒåŒ…æ‹¬æ¿€æ´»å‡½æ•°æ¢¯åº¦ç­‰ï¼Œç„¶ååç»­å†é€šè¿‡ç”¨æˆ·è®¾ç½®ä¸åŒçš„ä¼˜åŒ–å™¨å¯¹å‚æ•°è¿›è¡Œä¼˜åŒ–è®¡ç®—ï¼Œå› æ­¤åœ¨ä»£ç ä¸­éœ€è¦å…ˆbackwardç„¶åå†optimizerï¼Œbackwardåªè´Ÿè´£è®¡ç®—æ¢¯åº¦ï¼Œä¸è´Ÿè´£ä¼˜åŒ–ï¼ˆè®­ç»ƒï¼‰å‚æ•°ã€‚</p>
<p>å› æ­¤ï¼Œå½“ç½‘ç»œä¸­å­˜åœ¨å¹¶è”ç»“æ„æ—¶ï¼ˆä¾‹å¦‚ä¸€ä¸ªencoderåå¹¶è”æ¥å…¥ä¸¤ä¸ªdecoderï¼‰ï¼Œå¦‚æœåªæƒ³è®©ä¸€ä¸ªdecoderèƒ½å½±å“encoderçš„æ›´æ–°ï¼ˆè®©å¦ä¸€ä¸ªdecoderè‡ªå·±å•ç‹¬è®­ç»ƒï¼‰ï¼Œå¯ä»¥å¯¹è¿™ä¸ªå•ç‹¬è®­ç»ƒçš„decoderè¾“å…¥è¿›è¡Œ.detach()æ“ä½œä»¥æ–­æ‰å…¶ä¹‹å‰çš„è®¡ç®—å›¾ï¼Œè¿™æ ·å¯¹è¯¥decoderè¿›è¡Œåå‘ä¼ æ’­æ—¶æ¢¯åº¦å°±åªä¼šè®¡ç®—è‡³detachå¤„ï¼ˆæ³¨ï¼šåªè¦ä½¿ç”¨äº†detachï¼Œè¯¥æ¡çº¿è·¯ä¸Šä¹‹å‰çš„ç¥ç»å…ƒå°±æ— è®ºå¦‚ä½•éƒ½æ— æ³•è¢«è¯¥çº¿è·¯çš„lossä¼˜åŒ–æ‰€è®­ç»ƒäº†ï¼‰</p>
<h1 id="æ®‹å·®ç»“æ„è®¾è®¡æ³¨æ„äº‹é¡¹"><a href="#æ®‹å·®ç»“æ„è®¾è®¡æ³¨æ„äº‹é¡¹" class="headerlink" title="æ®‹å·®ç»“æ„è®¾è®¡æ³¨æ„äº‹é¡¹"></a>æ®‹å·®ç»“æ„è®¾è®¡æ³¨æ„äº‹é¡¹</h1><p>å¯¹äºæ®‹å·®ç»“æ„æœ€åç›¸åŠ å¤„ï¼Œä¸»åˆ†æ”¯åœ¨æœ€åä¸€å±‚ç½‘ç»œåä¸åº”è¯¥å†ç»è¿‡æ¿€æ´»å‡½æ•°ï¼Œè€Œæ˜¯åº”è¯¥ç›´æ¥ä¸æ®‹å·®åˆ†æ”¯ç›¸åŠ åå†é€šè¿‡æ¿€æ´»å‡½æ•°ï¼ˆä½†æ˜¯ä¸»åˆ†æ”¯å†ç›¸åŠ å‰è¿˜æ˜¯è¦è¿›è¡Œå½’ä¸€åŒ–æ“ä½œï¼‰</p>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>éº¦å…‹é£é˜µåˆ—ä¸æˆåƒç®—æ³•</title>
    <url>/2025/10/05/beamform/</url>
    <content><![CDATA[<h1 id="å¯¼å‘çŸ¢é‡"><a href="#å¯¼å‘çŸ¢é‡" class="headerlink" title="å¯¼å‘çŸ¢é‡"></a>å¯¼å‘çŸ¢é‡</h1><img src="/images/loading.png" data-original="/2025/10/05/beamform/1.jpg" class title="This is an image"> 
<p>é€‰å®šå‚è€ƒé˜µå…ƒåï¼Œåé¢é˜µå…ƒæ¥æ”¶åˆ°çš„ä¿¡å·æ¯”å‚è€ƒé˜µå…ƒæ™šï¼š</p>
<script type="math/tex; mode=display">
\Delta t = \left[0,\ \frac{\delta \cos(\theta_d)}{c},\ \frac{2\delta \cos(\theta_d)}{c},\ \cdots,\ \frac{(M-1)\delta \cos(\theta_d)}{c}\right]</script><p>å…¶ä¸­cä¸ºå£°é€Ÿï¼ŒÎ´ä¸ºåç»­é˜µå…ƒç›¸å¯¹å‚è€ƒé˜µå…ƒçš„é—´è·ï¼ˆé’ˆå¯¹å¤æ‚é˜µå…ƒÎ´ä¸ä¸ºå®šå€¼ï¼‰ï¼ŒÎ¸ä¸ºä¿¡å·å…¥å°„è§’åº¦ï¼Œå°†å…¶ååº”åˆ°ä¿¡å·çš„ç›¸ä½å˜åŒ–ä¸Šï¼ˆå‡è®¾è¾“å…¥ä¸ºå•é¢‘ä¿¡å·ï¼‰ï¼š</p>
<p><em>æ—©åˆ°çš„ä¿¡å·ç›¸ä½ä¸º<strong>æ­£</strong>ï¼Œè¡¨ç¤ºç›¸ä½è¶…å‰ï¼Œæ™šåˆ°çš„åˆ™ä¸º<strong>è´Ÿ</strong>ï¼ˆå³ä¸‹è¿°åœºæ™¯ï¼‰</em></p>
<script type="math/tex; mode=display">
y(n) = \left[ x(n),\ x(n)e^{-j2\pi f_0\frac{\delta\cos(\theta_d)}{c}},\ x(n)e^{-j2\pi f_0\frac{2\delta\cos(\theta_d)}{c}},\ \cdots,\ x(n)e^{-j2\pi f_0\frac{(M-1)\delta\cos(\theta_d)}{c}} \right]  \\ = \left[ 1,\ e^{-j2\pi f_0\frac{\delta\cos(\theta_d)}{c}},\ e^{-j2\pi f_0\frac{2\delta\cos(\theta_d)}{c}},\ \cdots,\ e^{-j2\pi f_0\frac{(M-1)\delta\cos(\theta_d)}{c}} \right]x(n) \\
=a(\theta_d) \cdot x(n)</script><p>å…¶ä¸­aååº”äº†ä¸åŒaé˜µå…ƒçš„ç©ºé—´ç›¸ä½å·®ï¼Œå³å¯¼å‘çŸ¢é‡ï¼Œå—åˆ°ä»¥ä¸‹å˜é‡å½±å“ï¼š</p>
<ul>
<li>é˜µå…ƒå¸ƒç½®ç»“æ„ï¼Œå½±å“é˜µå…ƒé—´è·</li>
<li>æ¥æ³¢æ–¹å‘ï¼Œå½±å“å…¥å°„è§’</li>
<li>å‚è€ƒé˜µå…ƒä½ç½®ï¼Œå½±å“å…¶ä»–é˜µå…ƒè®¡ç®—é—´è·ï¼Œä¸å½±å“é˜µå…ƒé—´ç›¸å¯¹ç›¸ä½å·®</li>
</ul>
<p>è‹¥å¤šä¸ªå£°æºä»ä¸åŒè§’åº¦å…¥å°„ï¼Œåˆ™å¯¼å‘çŸ¢é‡å˜ä¸ºä¸€ä¸ªMxNçš„çŸ©é˜µï¼ŒMä¸ºé˜µå…ƒä¸ªæ•°ï¼ŒNä¸ºä¿¡å·æ•°é‡</p>
<h2 id="åˆ©ç”¨å¯¼å‘çŸ¢é‡ä¼°è®¡å£°æºå…¥å°„æ–¹å‘"><a href="#åˆ©ç”¨å¯¼å‘çŸ¢é‡ä¼°è®¡å£°æºå…¥å°„æ–¹å‘" class="headerlink" title="åˆ©ç”¨å¯¼å‘çŸ¢é‡ä¼°è®¡å£°æºå…¥å°„æ–¹å‘"></a>åˆ©ç”¨å¯¼å‘çŸ¢é‡ä¼°è®¡å£°æºå…¥å°„æ–¹å‘</h2><p>å½“å…¥å°„è§’æœªçŸ¥æ—¶ï¼Œå½“é˜µå…ƒå¸ƒç½®å’Œå‚è€ƒé˜µå…ƒç¡®å®šæ—¶ï¼Œå¯¼å‘çŸ¢é‡çš„å½¢å¼æ˜¯ç¡®å®šçš„ï¼Œä¸”åªå—åˆ°å…¥å°„è§’å½±å“ï¼Œå› æ­¤å¯ä»¥æ„é€ ä¸€ä¸ªæ–¹å‘ä¸ºÎ±çš„å¯¼å‘çŸ¢é‡å½¢å¼çš„å‘é‡ï¼ˆå…±è½­è½¬ç½®ï¼‰ä¸è¾“å…¥ä¿¡å·åš<strong>å†…ç§¯</strong>è®¡ç®—ï¼š</p>
<script type="math/tex; mode=display">
a^H(\alpha) \cdot a(\theta_d) \cdot x(n) \\= \left[ 1 + e^{-j2\pi f_0\delta \frac{[\cos(\alpha) - \cos(\theta_d)]}{c}} + e^{-j2\pi f_0\delta \frac{2[\cos(\alpha) - \cos(\theta_d)]}{c}} + \cdots + e^{-j2\pi f_0\delta \frac{(M-1)[\cos(\alpha) - \cos(\theta_d)]}{c}} \right] \\\leq M \cdot x(n)</script><p>å½“è§’åº¦é‡åˆæ—¶ï¼Œå†…ç§¯æœ€å¤§</p>
<h1 id="æ³¢æŸå½¢æˆå»¶è¿Ÿæ±‚å’Œæˆåƒ"><a href="#æ³¢æŸå½¢æˆå»¶è¿Ÿæ±‚å’Œæˆåƒ" class="headerlink" title="æ³¢æŸå½¢æˆå»¶è¿Ÿæ±‚å’Œæˆåƒ"></a>æ³¢æŸå½¢æˆå»¶è¿Ÿæ±‚å’Œæˆåƒ</h1><p>ç”±ä¸Šä¸€ç« å¾—çŸ¥éº¦å…‹é£ä¿¡å·ä¸ºå¯¹å‚è€ƒä¿¡å·ç›¸ä½åˆ†åˆ«è¿›è¡Œäº†å‡æ³•çš„ä¿¡å·ï¼Œå› æ­¤åªè¦å¯¹éº¦å…‹é£ä¿¡å·çš„ç›¸ä½åˆ†åˆ«è¿›è¡Œç›¸åçš„åŠ æ³•ï¼ˆåŠ æƒï¼‰å³å¯å¾—åˆ°åŸå§‹çš„ä¿¡å·æ³¢å½¢ï¼š</p>
<script type="math/tex; mode=display">
z(n)=\frac{1}{M}(1,e^{j2\pi f \tau_1},e^{j2\pi f \tau_2}...) \cdot y(n)^T
\\= \frac{1}{M}\omega(\theta) \cdot y(n)^T</script><p>å› æ­¤ï¼Œåœ¨è¿›è¡ŒæŸä¸ªæ–¹å‘çš„æ³¢æŸæ±‚å’Œæ—¶ï¼Œé¢‘ç‡fä¸ºå˜é‡ï¼ˆfä¾æ¬¡å˜åŒ–è®¡ç®—å‡ºæ¯ä¸ªé¢‘ç‡ä¸Šçš„å“åº”ï¼‰</p>
<p>ï¼ˆå…¶å®åŸç†å’Œä¸Šä¸€å°èŠ‚çš„ä¼°è®¡å£°æºæ–¹å‘ä¸€æ ·ï¼‰</p>
<p>ç»¼ä¸Šï¼Œå¯¹äº(Î¸ï¼ŒÏ†)æ–¹å‘ä¸Šï¼Œfé¢‘ç‡ä¸‹çš„åŠŸç‡ä¸ºï¼šï¼ˆYä¸ºfä¸‹å„é€šé“çš„å¤ä¿¡å·å‘é‡ï¼‰</p>
<script type="math/tex; mode=display">
P(f)  = |\mathbf{w}(f) \mathbf{Y}(f)|^2=|a^H(\theta,f)\mathbf{Y}(f)|^2</script><p><em>ä¸ºäº†åœ¨ä»Šåè®¡ç®—ä¸­åŠ ä»¥åŒºåˆ†ï¼Œä»¥wä»£è¡¨å»¶æ—¶æƒé‡ï¼Œaä»£è¡¨å¯¼å‘çŸ¢é‡ï¼Œè¿™ä¸clean-scè®ºæ–‡ä¸­ä¸åŒï¼Œè®ºæ–‡ä¸­çš„wä¸ºå¯¼å‘çŸ¢é‡ï¼ˆçŸ©é˜µï¼‰ï¼Œå› æ­¤æœ¬æ–‡ä¸­wçš„ç›¸ä½ä¸è®ºæ–‡æ˜¯ç›¸åçš„ã€‚</em></p>
<h1 id="ä½¿ç”¨äº¤å‰è°±çŸ©é˜µ"><a href="#ä½¿ç”¨äº¤å‰è°±çŸ©é˜µ" class="headerlink" title="ä½¿ç”¨äº¤å‰è°±çŸ©é˜µ"></a>ä½¿ç”¨äº¤å‰è°±çŸ©é˜µ</h1><p>åœ¨å®é™…å·¥ä¸šåœºæ™¯ä¸­ï¼Œå¾€å¾€ä¸ä½¿ç”¨ä¸Šè¿°çš„å•å¿«æ‹FFTçš„æ–¹æ³•ï¼Œå› ä¸ºè¯¥æ–¹æ³•ä¸­çš„Y(f)é€šå¸¸åªæ¥æºäºä¸€æ®µæçŸ­çš„æ—¶åŸŸä¿¡å·ï¼ˆDFTçš„åŸç†ï¼Œè¯¦è§<a href="https://dhkkkkkk.github.io/2025/10/17/math-base/">æ•°å­¦åŸºç¡€ | å°è‘£çš„BLOG</a>ï¼‰ï¼Œä¹Ÿå°±æ˜¯å•å¿«æ‹æ•°æ®ã€‚è¿™ç§çº¦ç­‰äºç¬æ—¶æˆåƒçš„æ–¹æ³•å®¹æ˜“å—åˆ°éšæœºå™ªå£°çš„å¹²æ‰°ï¼Œä»è€Œäº§ç”Ÿä¸€äº›è™šå‡çš„å£°æºä¿¡æ¯ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†å¤šå¿«æ‹è®¡ç®—æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€æ¬¡æˆåƒä¸­ä½¿ç”¨å¤šæ®µæ—¶åŸŸä¿¡å·è¿›è¡Œè®¡ç®—ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªçŸ©é˜µè¡¨ç¤ºè¿ç®—ç»“æœï¼š</p>
<script type="math/tex; mode=display">
\mathbf{C}_{f_0} = E[\mathbf{Y}\mathbf{Y}^H] = \begin{bmatrix} E[Y_1 Y_1^*] & E[Y_1 X_2^*] & \dots \\ E[Y_2 Y_1^*] & E[Y_2 Y_2^*] & \dots \\ \vdots & \vdots & \ddots \end{bmatrix}</script><p>è¿™ä¸ªçŸ©é˜µå°±æ˜¯äº¤å‰è°±çŸ©é˜µCSMï¼Œæ¯ä¸ªå€¼ä»£è¡¨äº†ä¸¤ä¸ªéº¦å…‹é£çš„ç›¸å…³ç¨‹åº¦ï¼Œå¯¹è§’çº¿åˆ™ä¸ºå½“å‰éº¦å…‹é£çš„èƒ½é‡ä¿¡æ¯ï¼ˆæ— ç›¸ä½ä¿¡æ¯ï¼Œå› æ­¤åœ¨è®¡ç®—ä¸­å¯è€ƒè™‘ä¸ä½¿ç”¨å¯¹è§’çº¿å…ƒç´ ï¼‰ã€‚å…¶ä¸­X_nä»£è¡¨ç¬¬nä¸ªéº¦å…‹é£åœ¨æŸä¸ªé¢‘ç‡f0ä¸‹çš„FFT å¤æ•°å€¼ã€‚</p>
<p>åœ¨åŸæ¥çš„å•å¿«æ‹è®¡ç®—ä¸­ï¼š</p>
<script type="math/tex; mode=display">
P_{single} = |\mathbf{w} \mathbf{Y}|^2 = (\mathbf{w} \mathbf{Y})(\mathbf{w} \mathbf{Y})^H= \mathbf{w} \mathbf{Y} \mathbf{Y}^H \mathbf{w}^H</script><p>å½“å¼•å…¥CSMåå¹¶åŠ å…¥å¯¹èƒ½é‡å–å¹³å‡ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
P_{multi} = \mathbf{w} E[\mathbf{Y} \mathbf{Y}^H] \mathbf{w}^H = \mathbf{w} \mathbf{C} \mathbf{w}^H</script><p>å› æ­¤å¯¹äºå»¶è¿Ÿæƒé‡å‘é‡ï¼ˆçŸ©é˜µï¼‰Wï¼Œå…¶ä¸å•å¿«æ‹è®¡ç®—ä¸­çš„å®Œå…¨ä¸€è‡´ï¼Œè¿å½¢çŠ¶éƒ½ä¸ç”¨å˜ã€‚</p>
<h1 id="å£°å­¦æ©¡çš®æ“¦ï¼ˆHDRï¼‰"><a href="#å£°å­¦æ©¡çš®æ“¦ï¼ˆHDRï¼‰" class="headerlink" title="å£°å­¦æ©¡çš®æ“¦ï¼ˆHDRï¼‰"></a>å£°å­¦æ©¡çš®æ“¦ï¼ˆHDRï¼‰</h1><p>å½“ç¯å¢ƒä¸­å­˜åœ¨å¤šä¸ªå£°æºæ—¶ï¼Œè¾ƒå¼±çš„å£°æºå®¹æ˜“ç›´æ¥è¢«å¼ºå£°æºè¦†ç›–ï¼Œè‹¥æƒ³æ˜¾ç¤ºè¯¥å¼±å£°æºï¼Œåˆ™å¯ä»¥é€šè¿‡æ³¢æŸå½¢æˆå•ç‹¬å¤åŸå¼ºå£°æºæ³¢å½¢ï¼Œå†å°†è¯¥æ³¢å½¢ä»éº¦å…‹é£ä¿¡å·ä¸­å‡å»ã€‚å¯¹äºè¯¥æ³¢å½¢çš„æ³¢æŸå½¢æˆï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
\hat f(s_1) = \frac 1 M \sum^M_{i=1} w_i(\theta,\phi)y_i</script><p><em>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¸æ³¢æŸå½¢æˆ<strong>æˆåƒ</strong>ç•¥æœ‰ä¸åŒã€‚æ­¤å¤„åœ¨å¯¹æ¯ä¸ªé€šé“çš„éº¦å…‹é£ä¿¡å·åˆ†åˆ«è¿›è¡Œç›¸ä½å¯¹å…¶åï¼Œç›´æ¥å°†æ‰€æœ‰é€šé“ä¿¡å·ç›¸åŠ å†å–å¹³å‡ï¼Œæ˜¯æœ€æ ‡å‡†çš„æ³¢æŸå½¢æˆã€‚ç›¸åŠ ä¹‹åï¼Œåœ¨(Î¸ï¼ŒÏ†)æ–¹å‘ä¸Šçš„ä¿¡å·ä¼šæ±‡èšï¼ˆå› ä¸ºå¯¹å®ƒä»¬çš„ç›¸ä½è¿›è¡Œäº†å¯¹é½ï¼‰ï¼Œå…¶ä»–æ–¹å‘ä¸Šçš„ä¿¡å·åˆ™å› ä¸ºç›¸ä½ä¸ä¸€è‡´ï¼Œæœ€ç»ˆè¢«å¼±åŒ–ã€‚</em></p>
<p>ç”±äºå»¶è¿Ÿæƒé‡wæ˜¯æ ¹æ®å‚è€ƒé˜µå…ƒè®¡ç®—å¾—åˆ°çš„ï¼Œ<strong>å› æ­¤æœ€ç»ˆå¤åŸçš„s1æ³¢å½¢ç›¸ä½ä¹Ÿä¸å‚è€ƒé˜µå…ƒç›¸åŒ</strong>ã€‚æ‰€æœ‰æˆ‘ä»¬å¦‚æœæƒ³åœ¨æ¯ä¸ªé€šé“ä¸­éƒ½å‡å»s1ï¼Œå°±è¦ä¹ŸæŠŠæ¯ä¸ªé€šé“æ•°æ®çš„ç›¸ä½å…ˆå¯¹é½è‡³å‚è€ƒé˜µå…ƒï¼ˆå…¶å®ä¹Ÿè¿˜æ˜¯å®Œå…¨ä¸€æ ·çš„å»¶æ—¶æ“ä½œï¼‰ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{Y}'_{\text{w/o s1}} = \mathbf{w}(\theta,\phi) \mathbf{Y} -\hat f(s_1)</script><p>å‡å»s1åå†æŠŠæ¯ä¸ªé€šé“çš„éº¦å…‹é£æ•°æ®æŒ‰ç…§<strong>åæ–¹å‘</strong>è¿›è¡Œç›¸ä½è°ƒæ•´å³å¯å¾—åˆ°å»é™¤s1çš„å„é€šé“æ•°æ®ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{Y}_{\text{w/o s1}} = \mathbf{w}^H(\theta,\phi)\mathbf{Y}'_{\text{w/o s1}}</script><p>åç»­å†è¿›è¡Œå‰æ–‡ä¸­çš„æˆåƒå³å¯ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥å¯¹é½çš„Yâ€™è¿›è¡Œæˆåƒï¼ˆç†è®ºä¸Šå¯ä»¥ï¼Œæˆ‘æ²¡æœ‰è¯•è¿‡ï¼Œæˆ‘æ˜¯å…ˆç”¨Yè®¡ç®—CSMåå†è®¡ç®—çš„åŠŸç‡ï¼‰</p>
<p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å•ç‹¬çš„å¯¹s1è¿›è¡Œæ›´æ¸…æ™°çš„æˆåƒï¼Œæ’é™¤å¼±å£°æºçš„å¹²æ‰°ï¼š</p>
<script type="math/tex; mode=display">
P_{s_1} = |\mathbf{w}(\theta,\phi)(\mathbf{Y}-\mathbf{Y}_{\text{w/o s1}})|^2</script><p>è™½ç„¶æ„Ÿè§‰å‡æ¥å‡å»çš„æœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾ï¼Œä½†æ˜¯è®ºæ–‡ä¸­ç¡®å®ä¹Ÿæ˜¯è¿™æ ·å†™çš„ã€‚ç†è®ºä¸Šå¯¹\hat f(s_1)æ ¹æ®å»¶è¿Ÿæƒ…å†µå¤åˆ¶Mä¸ªç›´æ¥æˆåƒä¹Ÿå¯ä»¥ï¼Ÿæˆ‘æ‡’å¾—è¯•äº†ã€‚æ€»ä¹‹æœ€é‡è¦çš„æ˜¯åœ¨è¿›è¡Œæ³¢æŸå½¢æˆæ—¶åŠ¡å¿…è¦<strong>é€šè¿‡æ±‚å’Œ</strong>ï¼Œæ‰å¯ä»¥è·å¾—ä¼°è®¡çš„s1ï¼Œä¹Ÿå°±æ˜¯æœ¬å°èŠ‚ç¬¬ä¸€ä¸ªå…¬å¼ï¼Œå…¶ä»–çš„å¤§å®¶å¯ä»¥è‡ªç”±å‘æŒ¥ã€‚</p>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>xLSTMç»“æ„æ¢³ç†</title>
    <url>/2024/11/13/xLSTM%E7%BB%93%E6%9E%84%E6%A2%B3%E7%90%86/</url>
    <content><![CDATA[<p>1æºç ä¸­çš„sLSTMæ— æ³•ä½¿ç”¨ï¼Œæœ¬æ–‡åªåˆ†æåŸºäºmLSTMçš„xLSTMç»“æ„æ¢³ç†</p>
<h1 id="xLSTMLMModel"><a href="#xLSTMLMModel" class="headerlink" title="xLSTMLMModel()"></a><code>xLSTMLMModel()</code></h1><p>å®ä¾‹åŒ–æ¨¡å‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, idx: torch.Tensor</span>) -&gt; torch.Tensor:</span><br><span class="line">        <span class="comment"># x = self.token_embedding(idx)</span></span><br><span class="line">        <span class="comment"># x = self.emb_dropout(x)</span></span><br><span class="line">        x = self.xlstm_block_stack(idx)</span><br><span class="line">        logits = self.lm_head(x)<span class="comment">#å…¨è¿æ¥å±‚</span></span><br><span class="line">        <span class="keyword">return</span> logits</span><br></pre></td></tr></table></figure>
<ul>
<li><p><u>è‹¥ç”¨äºè¯­è¨€æ¨¡å‹</u>ï¼Œåˆ™å…ˆé€šè¿‡<code>nn.Embedding(num_embeddings=.., embedding_dim=..)</code>è¿›è¡Œä¸€æ¬¡è¯ç´¢å¼•</p>
<p>å¯¹äºè¯¥å‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªembeddingæ¨¡å—ï¼ŒåŒ…å«num_embeddingsä¸ªå¼ é‡ï¼Œæ¯ä¸ªå¼ é‡å¤§å°ä¸ºembedding_dimã€‚å¯¹äºæ¯ä¸ªå¼ é‡çš„ç´¢å¼•åˆ™é€šè¿‡è¾“å…¥æ•´å‹æ•°å­—è¿›è¡Œç´¢å¼•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line">embedding = nn.Embedding(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">input</span> = torch.LongTensor([<span class="number">2</span>])<span class="comment">#å¯¹embedingæ¨¡å—ä¸­ä¸‹æ ‡ä¸º2çš„å¼ é‡è¿›è¡Œç´¢å¼•</span></span><br><span class="line">e = embedding(<span class="built_in">input</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(embedding.weight)</span><br><span class="line"><span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Parameter containing:</span></span><br><span class="line"><span class="string">tensor([[ 1.0561,  1.7934, -0.1304],</span></span><br><span class="line"><span class="string">        [ 1.4425,  0.8412,  0.1474],</span></span><br><span class="line"><span class="string">        [-0.0995,  0.1439, -0.7001],</span></span><br><span class="line"><span class="string">        [ 0.3784, -1.0610,  0.0362],</span></span><br><span class="line"><span class="string">        [ 0.5086, -0.5861, -0.4548]], requires_grad=True)</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">tensor([[-0.0995,  0.1439, -0.7001]], grad_fn=&lt;EmbeddingBackward0&gt;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>embedding()</code>çš„è¾“å…¥æ˜¯ä»»æ„ç»´åº¦çš„tensoræ ¼å¼ï¼Œä½†tensorä¸­çš„å€¼å¿…é¡»ä¸º&lt;=num_embeddings-1çš„æ•°</p>
</li>
<li><p>è‹¥è¾“å…¥çš„ç»´åº¦ä¸º[a,b,c]ï¼Œåˆ™è¾“å‡ºç»´åº¦ä¸º[a,b,c,embedding_dim]</p>
</li>
<li>è¯­è¨€æ¨¡å‹ä¸­è¯¥æ–¹æ³•å¯ä»¥ä½¿num_embeddingsä¸ªè¯è·å¾—å”¯ä¸€çš„åµŒå…¥å¼ é‡ï¼Œå¼ é‡å¤§å°ä¸ºembedding_dim</li>
</ul>
</li>
<li><p><u>è‹¥ç”¨äºè¯­è¨€æ¨¡å‹</u>ï¼Œåˆ™å°†ç´¢å¼•åˆ°çš„åµŒå…¥è¯å‘é‡é€šè¿‡<code>nn.Dropout()</code>è¿›è¡Œæ­£åˆ™åŒ–</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">m = nn.Dropout(<span class="number">0.2</span>)</span><br><span class="line"><span class="built_in">input</span> = torch.randn(<span class="number">20</span>, <span class="number">16</span>)</span><br><span class="line">output = m(<span class="built_in">input</span>)	<span class="comment">#å°†inputä¸­éšæœº20%çš„å€¼å˜0ï¼Œå…¶ä»–å€¼åˆ™é™¤ä»¥0.8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å°†è¦å¤„ç†çš„tensorè¾“å…¥<code>xLSTMBlockStack(config=...)</code>æ¨¡å—ä¸­</strong></p>
</li>
<li><p>å…¨è¿æ¥å±‚</p>
</li>
</ul>
<h2 id="xLSTMBlockStack"><a href="#xLSTMBlockStack" class="headerlink" title="xLSTMBlockStack()"></a><code>xLSTMBlockStack()</code></h2><p>ä¸»è¦ç”±<strong>åˆ›å»ºxlstmçš„block</strong>å’Œå½’ä¸€åŒ–ç»„æˆï¼Œè¯¥ç±»ä¸»è¦å®ç°å¤šä¸ªlstmå—çš„å®ä¾‹åŒ–ã€æ‹¼æ¥å’Œå½’ä¸€åŒ–</p>
<p>blocksé€šè¿‡åˆ—è¡¨åˆ›å»ºï¼‹nn.ModuleList()æ‹¼æ¥çš„æ–¹å¼è¿›è¡Œå®ä¾‹åŒ–</p>
<p><a href="https://zhuanlan.zhihu.com/p/75206669">è¯¦è§£PyTorchä¸­çš„ModuleListå’ŒSequential - çŸ¥ä¹</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.blocks = self._create_blocks(config=config)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_create_blocks</span>(<span class="params">self, config: xLSTMBlockStackConfig</span>):<span class="comment">#å…ˆè¿›è¡Œ</span></span><br><span class="line"></span><br><span class="line">    blocks = []<span class="comment">#blocké€šè¿‡åˆ—è¡¨å½¢å¼åˆ›å»º</span></span><br><span class="line">    <span class="keyword">for</span> block_idx, block_type_int <span class="keyword">in</span> <span class="built_in">enumerate</span>(config.block_map):</span><br><span class="line">        <span class="keyword">if</span> block_type_int == <span class="number">0</span>:<span class="comment">#æ ¹æ®è¯¥å¯¹è±¡å€¼åˆ¤æ–­åˆ›å»ºå“ªç§block</span></span><br><span class="line">            config = deepcopy(self.config.mlstm_block)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(config, <span class="string">&quot;_block_idx&quot;</span>):</span><br><span class="line">                config._block_idx = block_idx</span><br><span class="line">                config.__post_init__()</span><br><span class="line">            blocks.append(mLSTMBlock(config=config))</span><br><span class="line">        <span class="keyword">elif</span> block_type_int == <span class="number">1</span>:</span><br><span class="line">            config = deepcopy(self.config.slstm_block)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(config, <span class="string">&quot;_block_idx&quot;</span>):</span><br><span class="line">                config._block_idx = block_idx</span><br><span class="line">                config.__post_init__()</span><br><span class="line">            blocks.append(sLSTMBlock(config=config))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;Invalid block type <span class="subst">&#123;block_type_int&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> nn.ModuleList(blocks)<span class="comment">#æ‹¼æ¥block</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x: torch.Tensor, **kwargs</span>) -&gt; torch.Tensor:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> block <span class="keyword">in</span> self.blocks:</span><br><span class="line">        x = block(x, **kwargs)</span><br><span class="line"></span><br><span class="line">    x = self.post_blocks_norm(x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<p><code>self.post_blocks_norm(x)</code>è°ƒç”¨çš„<code>LayerNorm()</code>ä¼šåœ¨ä¸‹ä¸€èŠ‚è¯´åˆ°</p>
<p>æ ¹æ®config.block_mapä¸­çš„å€¼ä¼šåˆ›å»ºnä¸ªblock</p>
<h3 id="mLSTMBlock"><a href="#mLSTMBlock" class="headerlink" title="mLSTMBlock()"></a><code>mLSTMBlock()</code></h3><p>è¯¥ç±»ä¼šç»§æ‰¿çˆ¶ç±»<code>xLSTMBlock()</code>ï¼Œè¯¥éƒ¨åˆ†ä¸»è¦å®ç°mLSTMçš„æ®‹å·®ç»“æ„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">xLSTMBlock</span>(nn.Module):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;An xLSTM block can be either an sLSTM Block or an mLSTM Block.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    It contains the pre-LayerNorms and the skip connections.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    config_class = xLSTMBlockConfig</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, config: xLSTMBlockConfig</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.config = config</span><br><span class="line">        embedding_dim = (</span><br><span class="line">            self.config.mlstm.embedding_dim <span class="keyword">if</span> self.config.mlstm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> self.config.slstm.embedding_dim</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        self.xlstm_norm = LayerNorm(ndim=embedding_dim, weight=<span class="literal">True</span>, bias=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.config.mlstm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self.xlstm = mLSTMLayer(config=self.config.mlstm)</span><br><span class="line">        <span class="keyword">elif</span> self.config.slstm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self.xlstm = sLSTMLayer(config=self.config.slstm)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Either mlstm or slstm must be provided&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.config.feedforward <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self.ffn_norm = LayerNorm(ndim=self.config.feedforward.embedding_dim, weight=<span class="literal">True</span>, bias=<span class="literal">False</span>)</span><br><span class="line">            self.ffn = create_feedforward(config=self.config.feedforward)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.ffn_norm = <span class="literal">None</span></span><br><span class="line">            self.ffn = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        self.reset_parameters()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x: torch.Tensor, **kwargs</span>) -&gt; torch.Tensor:</span><br><span class="line">        x = x + self.xlstm(self.xlstm_norm(x), **kwargs)    <span class="comment">#æ®‹å·®ç»“æ„</span></span><br><span class="line">        <span class="keyword">if</span> self.ffn <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            x = x + self.ffn(self.ffn_norm(x), **kwargs)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">step</span>(<span class="params">self, x: torch.Tensor, **kwargs</span>) -&gt; <span class="built_in">tuple</span>[torch.Tensor, <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">tuple</span>[torch.Tensor, ...]]]:</span><br><span class="line">        x_xlstm, xlstm_state = self.xlstm.step(self.xlstm_norm(x), **kwargs)</span><br><span class="line">        x = x + x_xlstm</span><br><span class="line">        <span class="keyword">if</span> self.ffn <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            x = x + self.ffn(self.ffn_norm(x), **kwargs)</span><br><span class="line">        <span class="keyword">return</span> x, xlstm_state</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset_parameters</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.xlstm.reset_parameters()</span><br><span class="line">        self.xlstm_norm.reset_parameters()</span><br><span class="line">        <span class="keyword">if</span> self.ffn <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self.ffn.reset_parameters()</span><br><span class="line">            self.ffn_norm.reset_parameters()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>forwardä¸­å¯ä»¥çœ‹åˆ°ï¼ŒmLSTMä½¿ç”¨äº†æ®‹å·®ç»“æ„</li>
<li><code>self.xlstm_norm = LayerNorm</code>å®ç°äº†å¸¦æœ‰å¯é€‰åç½®ï¼ˆ<code>bias</code>ï¼‰å’Œæ®‹å·®æƒé‡ï¼ˆ<code>residual_weight</code>ï¼‰çš„ å½’ä¸€åŒ–å¤„ç†ã€‚</li>
<li>é€šè¿‡<code>mLSTMLayer(config=self.config.mlstm)</code>å»ºç«‹mLSTMå±‚</li>
</ul>
<h4 id="mLSTMLayer"><a href="#mLSTMLayer" class="headerlink" title="mLSTMLayer"></a>mLSTMLayer</h4><p>mLSTMå±‚çš„åº•å±‚å®ç°</p>
<img src="/images/loading.png" data-original="/2024/11/13/xLSTM%E7%BB%93%E6%9E%84%E6%A2%B3%E7%90%86/1.jpg" class title="This is an image"> 
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">mLSTMLayerConfig</span>(<span class="title class_ inherited__">UpProjConfigMixin</span>):</span><br><span class="line">    conv1d_kernel_size: <span class="built_in">int</span> = <span class="number">4</span></span><br><span class="line">    qkv_proj_blocksize: <span class="built_in">int</span> = <span class="number">4</span></span><br><span class="line">    num_heads: <span class="built_in">int</span> = <span class="number">4</span></span><br><span class="line">    proj_factor: <span class="built_in">float</span> = <span class="number">2.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># will be set toplevel config</span></span><br><span class="line">    embedding_dim: <span class="built_in">int</span> = -<span class="number">1</span></span><br><span class="line">    bias: <span class="built_in">bool</span> = <span class="literal">False</span></span><br><span class="line">    dropout: <span class="built_in">float</span> = <span class="number">0.0</span></span><br><span class="line">    context_length: <span class="built_in">int</span> = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    _num_blocks: <span class="built_in">int</span> = <span class="number">1</span></span><br><span class="line">    _inner_embedding_dim: <span class="built_in">int</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__post_init__</span>(<span class="params">self</span>):</span><br><span class="line">        self._set_proj_up_dim(embedding_dim=self.embedding_dim)</span><br><span class="line">        self._inner_embedding_dim = self._proj_up_dim</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">mLSTMLayer</span>(nn.Module):</span><br><span class="line">    config_class = mLSTMLayerConfig</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, config: mLSTMLayerConfig</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.config = config</span><br><span class="line"></span><br><span class="line">        self.proj_up = nn.Linear(</span><br><span class="line">            in_features=self.config.embedding_dim,</span><br><span class="line">            out_features=<span class="number">2</span> * self.config._inner_embedding_dim,</span><br><span class="line">            bias=self.config.bias,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        num_proj_heads = <span class="built_in">round</span>(self.config._inner_embedding_dim // self.config.qkv_proj_blocksize)</span><br><span class="line">        self.q_proj = LinearHeadwiseExpand(</span><br><span class="line">            config=LinearHeadwiseExpandConfig(</span><br><span class="line">                in_features=self.config._inner_embedding_dim,</span><br><span class="line">                num_heads=num_proj_heads,</span><br><span class="line">                bias=self.config.bias,</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">        self.k_proj = LinearHeadwiseExpand(</span><br><span class="line">            config=LinearHeadwiseExpandConfig(</span><br><span class="line">                in_features=self.config._inner_embedding_dim,</span><br><span class="line">                num_heads=num_proj_heads,</span><br><span class="line">                bias=self.config.bias,</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">        self.v_proj = LinearHeadwiseExpand(</span><br><span class="line">            config=LinearHeadwiseExpandConfig(</span><br><span class="line">                in_features=self.config._inner_embedding_dim,</span><br><span class="line">                num_heads=num_proj_heads,</span><br><span class="line">                bias=self.config.bias,</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        self.conv1d = CausalConv1d(</span><br><span class="line">            config=CausalConv1dConfig(</span><br><span class="line">                feature_dim=self.config._inner_embedding_dim,</span><br><span class="line">                kernel_size=self.config.conv1d_kernel_size,</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">        self.conv_act_fn = nn.SiLU()</span><br><span class="line">        self.mlstm_cell = mLSTMCell(</span><br><span class="line">            config=mLSTMCellConfig(</span><br><span class="line">                context_length=self.config.context_length,</span><br><span class="line">                embedding_dim=self.config._inner_embedding_dim,</span><br><span class="line">                num_heads=self.config.num_heads,</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">        self.ogate_act_fn = nn.SiLU()</span><br><span class="line"></span><br><span class="line">        self.learnable_skip = nn.Parameter(torch.ones(self.config._inner_embedding_dim, requires_grad=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line">        self.proj_down = nn.Linear(</span><br><span class="line">            in_features=self.config._inner_embedding_dim,</span><br><span class="line">            out_features=self.config.embedding_dim,</span><br><span class="line">            bias=self.config.bias,</span><br><span class="line">        )</span><br><span class="line">        self.dropout = nn.Dropout(self.config.dropout)</span><br><span class="line">        self.reset_parameters()</span><br><span class="line"></span><br><span class="line">    	<span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x: torch.Tensor, **kwargs</span>) -&gt; torch.Tensor:</span><br><span class="line">        B, S, _ = x.shape   <span class="comment">#è¾“å…¥ä¸ºå¼ é‡ç»´åº¦ä¸º(batch,time,feature)</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        batchï¼šåŒdataloaderè¾“å‡ºçš„batchç»´åº¦</span></span><br><span class="line"><span class="string">        time:æ—¶é—´åºåˆ—</span></span><br><span class="line"><span class="string">        featureï¼šæ¯ä¸ªåºåˆ—çš„å€¼ï¼Œå¯¹äºé¢‘è°±åˆ™ä¸ºç‰¹å¾é¢‘ç‡çš„å¹…å€¼</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment"># up-projection</span></span><br><span class="line">        x_inner = self.proj_up(x)   <span class="comment">#å…¨è¿æ¥å±‚ï¼Œè¾“å‡ºç¬¬ä¸‰ç»´å°ºå¯¸*2</span></span><br><span class="line">        x_mlstm, z = torch.split(x_inner,			                                          split_size_or_sections=self.config._inner_embedding_dim, dim=-<span class="number">1</span>)</span><br><span class="line">		  <span class="comment">#</span></span><br><span class="line">        <span class="comment"># mlstm branch</span></span><br><span class="line">        x_mlstm_conv = self.conv1d(x_mlstm)</span><br><span class="line">        x_mlstm_conv_act = self.conv_act_fn(x_mlstm_conv)</span><br><span class="line"></span><br><span class="line">        q = self.q_proj(x_mlstm_conv_act)</span><br><span class="line">        k = self.k_proj(x_mlstm_conv_act)</span><br><span class="line">        v = self.v_proj(x_mlstm)</span><br><span class="line"></span><br><span class="line">        h_tilde_state = self.mlstm_cell(q=q, k=k, v=v)</span><br><span class="line"></span><br><span class="line">        h_tilde_state_skip = h_tilde_state + (self.learnable_skip * x_mlstm_conv_act)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># output / z branch</span></span><br><span class="line">        h_state = h_tilde_state_skip * self.ogate_act_fn(z)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># down-projection</span></span><br><span class="line">        y = self.dropout(self.proj_down(h_state))</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">step</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        x: torch.Tensor,</span></span><br><span class="line"><span class="params">        mlstm_state: <span class="built_in">tuple</span>[torch.Tensor, torch.Tensor, torch.Tensor] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        conv_state: <span class="built_in">tuple</span>[torch.Tensor] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    </span>) -&gt; <span class="built_in">tuple</span>[torch.Tensor, <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">tuple</span>[torch.Tensor, ...]]]:</span><br><span class="line">        <span class="comment"># B, S, _ = x.shape</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># up-projection</span></span><br><span class="line">        x_inner = self.proj_up(x)</span><br><span class="line">        x_mlstm, z = torch.split(x_inner, split_size_or_sections=self.config._inner_embedding_dim, dim=-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># mlstm branch</span></span><br><span class="line">        x_mlstm_conv, conv_state = self.conv1d.step(x_mlstm, conv_state=conv_state)</span><br><span class="line">        x_mlstm_conv_act = self.conv_act_fn(x_mlstm_conv)</span><br><span class="line"></span><br><span class="line">        q = self.q_proj(x_mlstm_conv_act)</span><br><span class="line">        k = self.k_proj(x_mlstm_conv_act)</span><br><span class="line">        v = self.v_proj(x_mlstm)</span><br><span class="line"></span><br><span class="line">        h_tilde_state, mlstm_state = self.mlstm_cell.step(q=q, k=k, v=v, mlstm_state=mlstm_state)</span><br><span class="line"></span><br><span class="line">        h_tilde_state_skip = h_tilde_state + (self.learnable_skip * x_mlstm_conv_act)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># output / z branch</span></span><br><span class="line">        h_state = h_tilde_state_skip * self.ogate_act_fn(z)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># down-projection</span></span><br><span class="line">        y = self.dropout(self.proj_down(h_state))</span><br><span class="line">        <span class="keyword">return</span> y, &#123;<span class="string">&quot;mlstm_state&quot;</span>: mlstm_state, <span class="string">&quot;conv_state&quot;</span>: conv_state&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset_parameters</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># init inproj</span></span><br><span class="line">        small_init_init_(self.proj_up.weight, dim=self.config.embedding_dim)</span><br><span class="line">        <span class="keyword">if</span> self.proj_up.bias <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            nn.init.zeros_(self.proj_up.bias)</span><br><span class="line">        <span class="comment"># init outproj</span></span><br><span class="line">        wang_init_(self.proj_down.weight, dim=self.config.embedding_dim, num_blocks=self.config._num_blocks)</span><br><span class="line">        <span class="keyword">if</span> self.proj_down.bias <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            nn.init.zeros_(self.proj_down.bias)</span><br><span class="line"></span><br><span class="line">        nn.init.ones_(self.learnable_skip)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">_init_qkv_proj</span>(<span class="params">qkv_proj: LinearHeadwiseExpand</span>):</span><br><span class="line">            <span class="comment"># use the embedding dim instead of the inner embedding dim</span></span><br><span class="line">            small_init_init_(qkv_proj.weight, dim=self.config.embedding_dim)</span><br><span class="line">            <span class="keyword">if</span> qkv_proj.bias <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                nn.init.zeros_(qkv_proj.bias)</span><br><span class="line"></span><br><span class="line">        _init_qkv_proj(self.q_proj)</span><br><span class="line">        _init_qkv_proj(self.k_proj)</span><br><span class="line">        _init_qkv_proj(self.v_proj)</span><br><span class="line"></span><br><span class="line">        self.mlstm_cell.reset_parameters()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ çš„ä¸€äº›æ¦‚å¿µæ€§ç†è§£</title>
    <url>/2024/10/22/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5%E6%80%A7%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<h1 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h1><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°</h2><p>å¦‚æœæ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼Œç¥ç»ç½‘ç»œä¸­å°†åªå­˜åœ¨å¤§é‡çš„<code>æƒé‡*è¾“å…¥</code>ï¼ˆè¿˜æœ‰åç½®ï¼‰çš„çº¿æ€§å åŠ ï¼Œæ— æ³•æ‹Ÿåˆå‡ºéçº¿æ€§å‡½æ•°çš„æ•ˆæœã€‚å½“å¼•å…¥éçº¿æ€§çš„æ¿€æ´»å‡½æ•°åï¼Œç¥ç»ç½‘ç»œä¾¿å¯ä»¥é€¼è¿‘ä»»ä½•çº¿æ€§ã€éçº¿æ€§å‡½æ•°</p>
<h2 id="å¸¸è§æ¿€æ´»å‡½æ•°"><a href="#å¸¸è§æ¿€æ´»å‡½æ•°" class="headerlink" title="å¸¸è§æ¿€æ´»å‡½æ•°"></a>å¸¸è§æ¿€æ´»å‡½æ•°</h2><h3 id="sigmoidå‡½æ•°"><a href="#sigmoidå‡½æ•°" class="headerlink" title="sigmoidå‡½æ•°"></a>sigmoidå‡½æ•°</h3><p>æŒ‡ä¸€ç±»Så‹å‡½æ•°</p>
<ul>
<li>ä¼˜ç‚¹ï¼šlogisticå‡½æ•°å¯ä»¥å°†è¾“å‡ºå½’ä¸€åˆ°(0,1)ï¼Œè€ŒTanhå‡½æ•°å¯ä»¥å¤„ç†è´Ÿæ•°è¾“å…¥ï¼Œå› æ­¤Tanhä¼šæ›´å¸¸ç”¨ä¸€äº›</li>
<li>ç¼ºç‚¹ï¼š<strong>åœ¨ä¸¤ä¸ªé¥±å’Œå¤„ï¼Œå…¶æ–œç‡å˜åŒ–è¾ƒç¼“ï¼Œå¯¼è‡´wçš„å˜åŒ–å¯¹lossçš„å½±å“è¾ƒå°ï¼Œæœ€ç»ˆå¯¼è‡´wçš„æ›´æ–°å˜æ…¢</strong>ï¼ˆæ¢¯åº¦æ¶ˆå¤±ï¼‰ï¼ˆæˆ‘æ„Ÿè§‰è¿™æ ·è¯´å¥½ç†è§£ä¸€ç‚¹ï¼‰</li>
</ul>
<h3 id="ReLUå‡½æ•°"><a href="#ReLUå‡½æ•°" class="headerlink" title="ReLUå‡½æ•°"></a>ReLUå‡½æ•°</h3><p>å¼•å…¥äº†è´Ÿæ•°å…¨éƒ¨ç½®0çš„éçº¿æ€§å…ƒç´ ï¼Œä¸”å…¶æ­£éƒ¨æœ¬èº«ä¸ºçº¿æ€§ï¼Œæ–œç‡ä¸º1ï¼Œä¸ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</p>
<p>ç¼ºç‚¹ï¼šä½†å¦‚æœå‚æ•°åœ¨ä¸€æ¬¡ä¸æ°å½“çš„æ›´æ–°åï¼Œå¯¼è‡´æŸä¸€ä¸ªå±‚è¾“å…¥åˆ°æŸä¸ªç¥ç»å…ƒçš„å€¼ä¸º0æ—¶ï¼Œ<strong>è¯¥ç¥ç»å…ƒè¾“å‡ºåˆ°åé¢æ‰€æœ‰ç¥ç»å…ƒçš„å€¼å…¨ä¸º0ï¼Œæ­¤æ—¶è¯¥ç¥ç»å…ƒçš„wæ— è®ºæ€ä¹ˆå˜åŒ–ï¼Œè¾“å‡ºåˆ°ä¸‹ä¸€å±‚æ‰€æœ‰ç¥ç»å…ƒçš„å€¼éƒ½ä¸º0ï¼ˆæ¢¯åº¦ä¸º0ï¼‰ï¼Œå¯¼è‡´è¯¥ç¥ç»å…ƒå‰çš„å‚æ•°éƒ½æ— æ³•æ›´æ–°</strong>ï¼Œå‡ºç°dead relu</p>
<h1 id="åå‘ä¼ æ’­ï¼ˆBPï¼‰"><a href="#åå‘ä¼ æ’­ï¼ˆBPï¼‰" class="headerlink" title="åå‘ä¼ æ’­ï¼ˆBPï¼‰"></a>åå‘ä¼ æ’­ï¼ˆBPï¼‰</h1><h2 id="å‚æ•°å­¦ä¹ "><a href="#å‚æ•°å­¦ä¹ " class="headerlink" title="å‚æ•°å­¦ä¹ "></a>å‚æ•°å­¦ä¹ </h2><p>ä»¥äº¤å‰ç†µæŸå¤±å‡½æ•°ä¸ºä¾‹ï¼Œå‡è®¾yä¸ºone-hotå‘é‡ï¼ˆä»…æ ‡ç­¾ä½ç½®ä¸º1ï¼Œå…¶ä»–0ï¼‰ï¼Œåˆ™å¯ä»¥å»¶ä¼¸è‡³å¤šåˆ†ç±»é—®é¢˜ï¼Œä¸”å…¶è¾“å‡ºä»…ä¸æ ‡ç­¾ä½ç½®å¤„çš„y^ç›¸å…³ï¼Œy^è¶Šå°ï¼ŒæŸå¤±å‡½æ•°è¶Šå¤§(y^&lt;1)</p>
<img src="/images/loading.png" data-original="/2024/10/22/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5%E6%80%A7%E7%90%86%E8%A7%A3/1.jpg" class title="This is an image"> 
<p>ç”±äºy^æ˜¯Wï¼ˆæƒé‡çŸ©é˜µï¼‰å’Œåç½®çš„å‡½æ•°ï¼Œå› æ­¤Losså‡½æ•°ä¹Ÿä¸ºWå’Œbçš„å‡½æ•°ï¼Œé€šè¿‡ä¼˜åŒ–è¿­ä»£ä»–ä»¬çš„å€¼å³å¯æ¥è¿‘Lossçš„æœ€å°å€¼ï¼Œè€Œè¦é™ä½Lossï¼Œé€šå¸¸æ˜¯å€ŸåŠ©å„wçš„æ¢¯åº¦å®ç°</p>
<h2 id="åå‘ä¼ æ’­ç®—æ³•"><a href="#åå‘ä¼ æ’­ç®—æ³•" class="headerlink" title="åå‘ä¼ æ’­ç®—æ³•"></a>åå‘ä¼ æ’­ç®—æ³•</h2><p>å½“ä¸€æ¬¡æ­£å‘ä¼ æ’­åï¼ŒLosså€¼å·²ç»ç¡®å®šï¼Œæ­¤æ—¶Losså¯¹æ‰€æœ‰wçš„åå¯¼éƒ½å·²ç¡®å®šï¼Œå› æ­¤è®¡ç®—å‡ºè¿™äº›åå¯¼å³å¯å®Œæˆä¸€æ¬¡æ¢¯åº¦ä¸‹é™ã€‚å¦‚æœä»å¼€å¤´é€šè¿‡é“¾å¼æ³•åˆ™å¯¹æ‰€æœ‰wé€ä¸€è®¡ç®—æ•ˆç‡è¾ƒä½ã€‚ä½†ç”±é“¾å¼æ³•åˆ™åˆå¯å¾—ï¼š</p>
<p><strong>losså¯¹æŸä¸€wçš„åå¯¼å¯é€šè¿‡ä¸‹ä¸€å±‚çš„æ‰€æœ‰wåå¯¼è®¡ç®—è€Œå¾—ï¼Œå› æ­¤ä»è¾“å‡ºå±‚å¯¹wåå¯¼è¿›è¡Œåå‘è®¡ç®—æ•ˆç‡æ›´é«˜</strong></p>
<h1 id="æ³¨æ„åŠ›æœºåˆ¶"><a href="#æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="æ³¨æ„åŠ›æœºåˆ¶"></a>æ³¨æ„åŠ›æœºåˆ¶</h1><h2 id="å‘é‡ç‚¹ä¹˜çš„å‡ ä½•æ„ä¹‰"><a href="#å‘é‡ç‚¹ä¹˜çš„å‡ ä½•æ„ä¹‰" class="headerlink" title="å‘é‡ç‚¹ä¹˜çš„å‡ ä½•æ„ä¹‰"></a>å‘é‡ç‚¹ä¹˜çš„å‡ ä½•æ„ä¹‰</h2><p>å‘é‡<strong>x</strong>åœ¨å‘é‡<strong>y</strong>æ–¹å‘ä¸Šçš„æŠ•å½±å†ä¸å‘é‡<strong>y</strong>çš„ä¹˜ç§¯ï¼Œèƒ½å¤Ÿååº”ä¸¤ä¸ªå‘é‡çš„ç›¸ä¼¼åº¦ã€‚<u>å‘é‡ç‚¹ä¹˜ç»“æœè¶Šå¤§ï¼Œä¸¤ä¸ªå‘é‡è¶Šç›¸ä¼¼ã€‚</u></p>
<h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>æ³¨æ„åŠ›æœºåˆ¶é€šè¿‡è®¡ç®—è¾“å…¥åºåˆ—ä¸­æ¯ä¸ªä½ç½®ï¼ˆæ—¶é—´æ­¥ï¼‰çš„æƒé‡ï¼Œæ¥å†³å®šæ¯ä¸ªæ—¶é—´æ­¥çš„é‡è¦æ€§ã€‚æƒé‡è¶Šé«˜ï¼Œè¯´æ˜è¯¥æ—¶é—´æ­¥åŒ…å«çš„ä¿¡æ¯è¶Šå…³é”®ï¼Œæ¨¡å‹å°±ä¼šæ›´â€œå…³æ³¨â€è¯¥éƒ¨åˆ†ã€‚</p>
<p>ä¸ä¹‹ç›¸æ¯”ï¼Œå·ç§¯åªèƒ½ä½¿è¾“å…¥å±€éƒ¨ç›¸å…³ï¼Œè€Œå…¨è¿æ¥å±‚åˆ™è®¡ç®—é‡å¤§ï¼Œ<strong>æ³¨æ„åŠ›æœºåˆ¶åˆ™å¯ä»¥æ ¹æ®æ•´ä¸ªè¾“å…¥åºåˆ—å®æ—¶è°ƒæ•´æƒé‡</strong></p>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¹æ¯”å­¦ä¹ ä¹‹SimCLR</title>
    <url>/2024/09/14/%E5%AF%B9%E6%AF%94%E5%AD%A6%E4%B9%A0%E4%B9%8BSimCLR/</url>
    <content><![CDATA[<p>å¯¹æ¯”å­¦ä¹ å…¥é—¨ï¼Œè®°å½•ä¸€ä¸‹simclrçš„å­¦ä¹ è¿‡ç¨‹</p>
<h1 id="1-æ¨¡å‹å»ºç«‹"><a href="#1-æ¨¡å‹å»ºç«‹" class="headerlink" title="1.æ¨¡å‹å»ºç«‹"></a>1.æ¨¡å‹å»ºç«‹</h1><p>åŸºäºlightlyæ¡†æ¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> lightly.loss <span class="keyword">import</span> NTXentLoss</span><br><span class="line"><span class="keyword">from</span> lightly.models.modules <span class="keyword">import</span> SimCLRProjectionHead</span><br><span class="line"><span class="keyword">from</span> lightly.transforms.simclr_transform <span class="keyword">import</span> SimCLRTransform</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimCLR</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, backbone</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.backbone = backbone	<span class="comment">#resnetæœ€åå¹³å‡æ± åŒ–åä¸º512*1*1</span></span><br><span class="line">        self.projection_head = SimCLRProjectionHead(<span class="number">512</span>, <span class="number">512</span>, <span class="number">128</span>)<span class="comment">#éçº¿æ€§åŒ–</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.backbone(x).flatten(start_dim=<span class="number">1</span>) <span class="comment">#nn.flattenä¸ºå±•å¹³ä¸º1ç»´</span></span><br><span class="line">        z = self.projection_head(x)	<span class="comment">#</span></span><br><span class="line">        <span class="keyword">return</span> z</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">resnet = torchvision.models.resnet18()	<span class="comment">#ä½¿ç”¨resnetä½œä¸ºç‰¹å¾è¯†åˆ«ç½‘ç»œ</span></span><br><span class="line">backbone = nn.Sequential(*<span class="built_in">list</span>(resnet.children())[:-<span class="number">1</span>])<span class="comment">#è¿”å›æ®‹å·®ç»“æ„è¿­ä»£å™¨åˆ—è¡¨å¹¶æ‹¼æ¥ä¸ºresnetï¼Œæ­¤å¤„resnet.children()ä¸ä¼šè¿”å›resnetæœ¬æ¥çš„å…¨è¿æ¥å±‚ï¼ä»…åˆ°å…¨è¿æ¥å±‚å‰çš„å¹³å‡æ± åŒ–</span></span><br><span class="line">model = SimCLR(backbone)</span><br><span class="line"></span><br><span class="line">device = <span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span></span><br><span class="line">model.to(device)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#resnet.children()æµ‹è¯•</span></span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line">resnet = torchvision.models.resnet18()</span><br><span class="line">backbone = nn.Sequential(*<span class="built_in">list</span>(resnet.children())[:-<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(backbone)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Sequential(</span></span><br><span class="line"><span class="string">  (0): Conv2d(3, 64, kernel_size=(7, 7), stride=(2, 2), padding=(3, 3), bias=False)</span></span><br><span class="line"><span class="string">  (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">  (2): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">  (3): MaxPool2d(kernel_size=3, stride=2, padding=1, dilation=1, ceil_mode=False)</span></span><br><span class="line"><span class="string">  (4): Sequential(</span></span><br><span class="line"><span class="string">    (0): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    (1): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  (5): Sequential(</span></span><br><span class="line"><span class="string">    (0): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(64, 128, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (downsample): Sequential(</span></span><br><span class="line"><span class="string">        (0): Conv2d(64, 128, kernel_size=(1, 1), stride=(2, 2), bias=False)</span></span><br><span class="line"><span class="string">        (1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    (1): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  (6): Sequential(</span></span><br><span class="line"><span class="string">    (0): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(128, 256, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (downsample): Sequential(</span></span><br><span class="line"><span class="string">        (0): Conv2d(128, 256, kernel_size=(1, 1), stride=(2, 2), bias=False)</span></span><br><span class="line"><span class="string">        (1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    (1): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  (7): Sequential(</span></span><br><span class="line"><span class="string">    (0): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(256, 512, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (downsample): Sequential(</span></span><br><span class="line"><span class="string">        (0): Conv2d(256, 512, kernel_size=(1, 1), stride=(2, 2), bias=False)</span></span><br><span class="line"><span class="string">        (1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    (1): BasicBlock(</span></span><br><span class="line"><span class="string">      (conv1): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">      (relu): ReLU(inplace=True)</span></span><br><span class="line"><span class="string">      (conv2): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span></span><br><span class="line"><span class="string">      (bn2): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  (8): AdaptiveAvgPool2d(output_size=(1, 1))</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="2-transformã€dataset"><a href="#2-transformã€dataset" class="headerlink" title="2.transformã€dataset"></a>2.transformã€dataset</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">transform = SimCLRTransform(input_size=<span class="number">32</span>, gaussian_blur=<span class="number">0.0</span>)</span><br><span class="line">dataset = torchvision.datasets.CIFAR10(</span><br><span class="line">    <span class="string">&quot;datasets/cifar10&quot;</span>, download=<span class="literal">True</span>, transform=transform</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimCLRTransform</span>(<span class="title class_ inherited__">MultiViewTransform</span>):	<span class="comment">#ç»§æ‰¿MultiViewTransformçˆ¶ç±»</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        input_size: <span class="built_in">int</span> = <span class="number">224</span>,</span></span><br><span class="line"><span class="params">        cj_prob: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_strength: <span class="built_in">float</span> = <span class="number">1.0</span>,</span></span><br><span class="line"><span class="params">        cj_bright: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_contrast: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_sat: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_hue: <span class="built_in">float</span> = <span class="number">0.2</span>,</span></span><br><span class="line"><span class="params">        min_scale: <span class="built_in">float</span> = <span class="number">0.08</span>,</span></span><br><span class="line"><span class="params">        random_gray_scale: <span class="built_in">float</span> = <span class="number">0.2</span>,</span></span><br><span class="line"><span class="params">        gaussian_blur: <span class="built_in">float</span> = <span class="number">0.5</span>,</span></span><br><span class="line"><span class="params">        kernel_size: <span class="type">Optional</span>[<span class="built_in">float</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        sigmas: <span class="type">Tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>] = (<span class="params"><span class="number">0.1</span>, <span class="number">2</span></span>),</span></span><br><span class="line"><span class="params">        vf_prob: <span class="built_in">float</span> = <span class="number">0.0</span>,</span></span><br><span class="line"><span class="params">        hf_prob: <span class="built_in">float</span> = <span class="number">0.5</span>,</span></span><br><span class="line"><span class="params">        rr_prob: <span class="built_in">float</span> = <span class="number">0.0</span>,</span></span><br><span class="line"><span class="params">        rr_degrees: <span class="type">Optional</span>[<span class="type">Union</span>[<span class="built_in">float</span>, <span class="type">Tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>]]] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        normalize: <span class="type">Union</span>[<span class="literal">None</span>, <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">List</span>[<span class="built_in">float</span>]]] = IMAGENET_NORMALIZE,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        view_transform = SimCLRViewTransform(</span><br><span class="line">            input_size=input_size,</span><br><span class="line">            cj_prob=cj_prob,</span><br><span class="line">            cj_strength=cj_strength,</span><br><span class="line">            cj_bright=cj_bright,</span><br><span class="line">            cj_contrast=cj_contrast,</span><br><span class="line">            cj_sat=cj_sat,</span><br><span class="line">            cj_hue=cj_hue,</span><br><span class="line">            min_scale=min_scale,</span><br><span class="line">            random_gray_scale=random_gray_scale,</span><br><span class="line">            gaussian_blur=gaussian_blur,</span><br><span class="line">            kernel_size=kernel_size,</span><br><span class="line">            sigmas=sigmas,</span><br><span class="line">            vf_prob=vf_prob,</span><br><span class="line">            hf_prob=hf_prob,</span><br><span class="line">            rr_prob=rr_prob,</span><br><span class="line">            rr_degrees=rr_degrees,</span><br><span class="line">            normalize=normalize,</span><br><span class="line">        )</span><br><span class="line">        <span class="built_in">super</span>().__init__(transforms=[view_transform, view_transform])</span><br><span class="line">			<span class="comment">#é€šè¿‡çˆ¶ç±»MultiViewTransformç”Ÿæˆä¸€å¼ å›¾ç‰‡çš„ä¸åŒâ€œè§†è§’â€</span></span><br><span class="line">         </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimCLRViewTransform</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        input_size: <span class="built_in">int</span> = <span class="number">224</span>,</span></span><br><span class="line"><span class="params">        cj_prob: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_strength: <span class="built_in">float</span> = <span class="number">1.0</span>,</span></span><br><span class="line"><span class="params">        cj_bright: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_contrast: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_sat: <span class="built_in">float</span> = <span class="number">0.8</span>,</span></span><br><span class="line"><span class="params">        cj_hue: <span class="built_in">float</span> = <span class="number">0.2</span>,</span></span><br><span class="line"><span class="params">        min_scale: <span class="built_in">float</span> = <span class="number">0.08</span>,</span></span><br><span class="line"><span class="params">        random_gray_scale: <span class="built_in">float</span> = <span class="number">0.2</span>,</span></span><br><span class="line"><span class="params">        gaussian_blur: <span class="built_in">float</span> = <span class="number">0.5</span>,</span></span><br><span class="line"><span class="params">        kernel_size: <span class="type">Optional</span>[<span class="built_in">float</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        sigmas: <span class="type">Tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>] = (<span class="params"><span class="number">0.1</span>, <span class="number">2</span></span>),</span></span><br><span class="line"><span class="params">        vf_prob: <span class="built_in">float</span> = <span class="number">0.0</span>,</span></span><br><span class="line"><span class="params">        hf_prob: <span class="built_in">float</span> = <span class="number">0.5</span>,</span></span><br><span class="line"><span class="params">        rr_prob: <span class="built_in">float</span> = <span class="number">0.0</span>,</span></span><br><span class="line"><span class="params">        rr_degrees: <span class="type">Optional</span>[<span class="type">Union</span>[<span class="built_in">float</span>, <span class="type">Tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>]]] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        normalize: <span class="type">Union</span>[<span class="literal">None</span>, <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">List</span>[<span class="built_in">float</span>]]] = IMAGENET_NORMALIZE,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        color_jitter = T.ColorJitter(</span><br><span class="line">            brightness=cj_strength * cj_bright,</span><br><span class="line">            contrast=cj_strength * cj_contrast,</span><br><span class="line">            saturation=cj_strength * cj_sat,</span><br><span class="line">            hue=cj_strength * cj_hue,</span><br><span class="line">        )</span><br><span class="line">			<span class="comment">#éšæœºæ•°æ®å¢å¼º</span></span><br><span class="line">        transform = [</span><br><span class="line">            T.RandomResizedCrop(size=input_size, scale=(min_scale, <span class="number">1.0</span>)),</span><br><span class="line">            random_rotation_transform(rr_prob=rr_prob, rr_degrees=rr_degrees),</span><br><span class="line">            T.RandomHorizontalFlip(p=hf_prob),</span><br><span class="line">            T.RandomVerticalFlip(p=vf_prob),</span><br><span class="line">            T.RandomApply([color_jitter], p=cj_prob),	<span class="comment">#é¢œè‰²æŠ–åŠ¨ï¼Œå¯¹äºå¯¹æ¯”å­¦ä¹ å¾ˆé‡è¦</span></span><br><span class="line">            T.RandomGrayscale(p=random_gray_scale),	<span class="comment">#éšæœºç°åº¦ï¼ŒåŒä¸Š</span></span><br><span class="line">            GaussianBlur(kernel_size=kernel_size, sigmas=sigmas, prob=gaussian_blur),</span><br><span class="line">            T.ToTensor(),</span><br><span class="line">        ]</span><br><span class="line">        <span class="keyword">if</span> normalize:</span><br><span class="line">            <span class="comment">#å½’ä¸€åŒ–ï¼Œæ­¤å¤„åˆ—è¡¨å¯ç›´æ¥é€šè¿‡+=æ·»åŠ æ–°å…ƒç´ </span></span><br><span class="line">            transform += [T.Normalize(mean=normalize[<span class="string">&quot;mean&quot;</span>], std=normalize[<span class="string">&quot;std&quot;</span>])]</span><br><span class="line">        self.transform = T.Compose(transform)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, image: <span class="type">Union</span>[Tensor, Image]</span>) -&gt; Tensor:  <span class="comment">#è¯¥æ–¹æ³•ä¼šåœ¨è®¿é—®dataloaderå®ä¾‹æ—¶è‡ªåŠ¨è°ƒç”¨ï¼ˆç†è§£ä¸ºå›¾ç‰‡åœ¨ä½¿ç”¨å‰æ‰è¿›è¡Œè®¾ç½®å¥½çš„é¢„å¤„ç†ï¼‰ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶transformçš„ç»“æœéƒ½æ˜¯éšæœºçš„</span></span><br><span class="line">        transformed: Tensor = self.transform(image)</span><br><span class="line">        <span class="keyword">return</span> transformed</span><br></pre></td></tr></table></figure>
<h1 id="3-è®­ç»ƒ"><a href="#3-è®­ç»ƒ" class="headerlink" title="3.è®­ç»ƒ"></a>3.è®­ç»ƒ</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dataloader = torch.utils.data.DataLoader(</span><br><span class="line">    dataset,</span><br><span class="line">    batch_size=<span class="number">256</span>,</span><br><span class="line">    shuffle=<span class="literal">True</span>,</span><br><span class="line">    drop_last=<span class="literal">True</span>,</span><br><span class="line">    num_workers=<span class="number">8</span>,</span><br><span class="line">)</span><br><span class="line">criterion = NTXentLoss()	<span class="comment">#lossï¼Œç”¨äºè®¡ç®—2ä¸ªè¾“å…¥å¼ é‡çš„ç›¸ä¼¼åº¦</span></span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.06</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Starting Training&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    total_loss = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> dataloader:</span><br><span class="line">        x0, x1 = batch[<span class="number">0</span>]	<span class="comment">#batch[0]ä¸ºimageï¼Œ[1]ä¸ºlabelï¼Œå¯¹æ¯”å­¦ä¹ ä¸éœ€è¦label</span></span><br><span class="line">        x0 = x0.to(device)</span><br><span class="line">        x1 = x1.to(device)</span><br><span class="line">        z0 = model(x0)</span><br><span class="line">        z1 = model(x1)</span><br><span class="line">        loss = criterion(z0, z1)	<span class="comment">#åŸºäºç›¸ä¼¼åº¦çš„loss</span></span><br><span class="line">        total_loss += loss.detach()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">    avg_loss = total_loss / <span class="built_in">len</span>(dataloader)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;epoch: <span class="subst">&#123;epoch:&gt;02&#125;</span>, loss: <span class="subst">&#123;avg_loss:<span class="number">.5</span>f&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>for batch in dataloader:</code>æ—¶ï¼Œç»è¿‡transformé¢„å¤„ç†åä¸€å¼ å›¾ç‰‡ä¼šè¿”å›2ä¸ªéšæœºviewï¼Œä¹Ÿå°±æ˜¯è¯´x0,x1å„è‡ªé•¿åº¦éƒ½ä¸º256</p>
<p>å› æ­¤NTXentLoss()å‡½æ•°ä¼šæ¯”è¾ƒä¸€ä¸ªæ‰¹æ¬¡ä¸­<strong>æ‰€æœ‰å›¾åƒè§†å›¾</strong>çš„åµŒå…¥è¡¨ç¤ºï¼ˆ<code>z0</code> å’Œ <code>z1</code>ï¼‰ï¼Œä¸ä»…ä»…æ˜¯åŒä¸€å›¾åƒçš„ä¸åŒè§†å›¾ï¼ˆå³æ­£æ ·æœ¬å¯¹ï¼Œpositive pairï¼‰ï¼Œè¿˜<strong>åŒ…æ‹¬ä¸åŒå›¾åƒçš„ä¸åŒè§†å›¾</strong>ï¼ˆå³è´Ÿæ ·æœ¬å¯¹ï¼Œnegative pairï¼‰ã€‚</p>
<h1 id="3-åŸºäºsimclrçš„ä¸‹æ¸¸åˆ†ç±»ä»»åŠ¡"><a href="#3-åŸºäºsimclrçš„ä¸‹æ¸¸åˆ†ç±»ä»»åŠ¡" class="headerlink" title="3.åŸºäºsimclrçš„ä¸‹æ¸¸åˆ†ç±»ä»»åŠ¡"></a>3.åŸºäºsimclrçš„ä¸‹æ¸¸åˆ†ç±»ä»»åŠ¡</h1><p>è¦ä½¿ç”¨ç»è¿‡ SimCLR è®­ç»ƒçš„æ¨¡å‹è¿›è¡Œå›¾ç‰‡åˆ†ç±»ä»»åŠ¡ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª<strong>æœ‰ç›‘ç£çš„åˆ†ç±»æ¨¡å‹</strong>ã€‚SimCLR é€šè¿‡å¯¹æ¯”å­¦ä¹ å­¦ä¹ åˆ°çš„æ˜¯<strong>å›¾åƒçš„ç‰¹å¾è¡¨ç¤ºï¼Œä½†å¹¶æ²¡æœ‰å­¦åˆ°ç±»åˆ«ä¿¡æ¯</strong>ã€‚å› æ­¤ï¼Œæ¥ä¸‹æ¥éœ€è¦<strong>åœ¨ SimCLR è®­ç»ƒå¥½çš„ç‰¹å¾æå–å™¨åŸºç¡€ä¸Š</strong>ï¼ŒåŠ ä¸Šä¸€ä¸ªæ–°çš„åˆ†ç±»å¤´ï¼ˆå¦‚å…¨è¿æ¥å±‚ï¼‰ï¼Œå¹¶å¯¹è¿™ä¸ªåˆ†ç±»å™¨è¿›è¡Œè®­ç»ƒã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClassificationHead</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, backbone, num_classes=<span class="number">10</span></span>):<span class="comment"># cirf10æœ‰10ä¸ªç±»åˆ«</span></span><br><span class="line">        <span class="built_in">super</span>(ClassificationHead, self).__init__()</span><br><span class="line">        self.backbone = backbone</span><br><span class="line">        self.fc = nn.Linear(<span class="number">512</span>, num_classes) <span class="comment">#æ·»åŠ 1ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å‡ºä¸º10ä¸ªç±»åˆ«ï¼Œæ­¤å¤„512éœ€æ ¹æ®ä½¿ç”¨çš„backboneç§ç±»ç¡®å®šï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯éƒ½æ˜¯512ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        features = self.backbone(x).flatten(start_dim=<span class="number">1</span>)	<span class="comment">#è®°å¾—å…¨è¿æ¥ä¹‹å‰è¦å±•æˆ1ç»´</span></span><br><span class="line">        <span class="keyword">return</span> self.fc(features)</span><br><span class="line"></span><br><span class="line">model.load_state_dict(torch.load(<span class="string">&#x27;simclr.pth&#x27;</span>))</span><br><span class="line">backbone = model.backbone  <span class="comment"># ä» è®­ç»ƒå¥½çš„SimCLR æ¨¡å‹ä¸­è·å– backbone</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># å†»ç»“ backbone çš„å‚æ•°</span></span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> backbone.parameters():</span><br><span class="line">    param.requires_grad = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ä¾‹åŒ–åˆ†ç±»æ¨¡å‹</span></span><br><span class="line">model = ClassificationHead(backbone, num_classes=<span class="number">10</span>)</span><br><span class="line">model = model.to(device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ CIFAR-10 è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆå¸¦æ ‡ç­¾çš„æœ‰ç›‘ç£è®­ç»ƒï¼‰</span></span><br><span class="line">class_transform = torchvision.transforms.Compose(</span><br><span class="line">        [torchvision.transforms.Resize((<span class="number">32</span>, <span class="number">32</span>)),</span><br><span class="line">         torchvision.transforms.ToTensor(),</span><br><span class="line">         torchvision.transforms.Normalize((<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>), (<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))])</span><br><span class="line"></span><br><span class="line">train_dataset = torchvision.datasets.CIFAR10(</span><br><span class="line">        root=<span class="string">&quot;dataset&quot;</span>, train=<span class="literal">True</span>, download=<span class="literal">True</span>, transform=class_transform</span><br><span class="line">    )</span><br><span class="line">test_dataset = torchvision.datasets.CIFAR10(</span><br><span class="line">        root=<span class="string">&quot;dataset&quot;</span>, train=<span class="literal">False</span>, download=<span class="literal">True</span>, transform=class_transform</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">train_loader = DataLoader(train_dataset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">4</span>)</span><br><span class="line">test_loader = DataLoader(test_dataset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">False</span>, num_workers=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨</span></span><br><span class="line">    fc_loss = nn.CrossEntropyLoss()  <span class="comment"># åˆ†ç±»ä»»åŠ¡çš„æŸå¤±å‡½æ•°ï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°</span></span><br><span class="line">    optimizer = optim.Adam(model.fc.parameters(), lr=<span class="number">1e-3</span>)  <span class="comment"># åªæ›´æ–°å…¨è¿æ¥å±‚çš„å‚æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®­ç»ƒåˆ†ç±»å™¨</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;classification fc training start&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        model.train()</span><br><span class="line">        total_loss = <span class="number">0</span></span><br><span class="line">        correct = <span class="number">0</span></span><br><span class="line">        total = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> inputs, labels <span class="keyword">in</span> train_loader:</span><br><span class="line">            inputs, labels = inputs.to(device), labels.to(device)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å‰å‘ä¼ æ’­</span></span><br><span class="line">            outputs = model(inputs)</span><br><span class="line">            loss = fc_loss(outputs, labels)</span><br><span class="line">            optimizer.zero_grad()</span><br><span class="line">            loss.backward()</span><br><span class="line">            optimizer.step()</span><br><span class="line">            total_loss += loss.item()</span><br><span class="line"></span><br><span class="line">            _, predicted = outputs.<span class="built_in">max</span>(<span class="number">1</span>)</span><br><span class="line">            total += labels.size(<span class="number">0</span>)</span><br><span class="line">            correct += predicted.eq(labels).<span class="built_in">sum</span>().item()</span><br><span class="line"></span><br><span class="line">        avg_loss = total_loss / <span class="built_in">len</span>(train_loader)</span><br><span class="line">        accuracy = <span class="number">100.</span> * correct / total</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;stage2 Epoch [<span class="subst">&#123;epoch + <span class="number">1</span>&#125;</span>/5], Loss: <span class="subst">&#123;avg_loss:<span class="number">.4</span>f&#125;</span>, Accuracy: <span class="subst">&#123;accuracy:<span class="number">.2</span>f&#125;</span>%&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æµ‹è¯•é›†</span></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line">    correct = <span class="number">0</span></span><br><span class="line">    total = <span class="number">0</span></span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        <span class="keyword">for</span> inputs, labels <span class="keyword">in</span> test_loader:</span><br><span class="line">            inputs, labels = inputs.to(device), labels.to(device)</span><br><span class="line">            outputs = model(inputs)</span><br><span class="line">            total += labels.size(<span class="number">0</span>)</span><br><span class="line">            correct += predicted.eq(labels).<span class="built_in">sum</span>().item()</span><br><span class="line"></span><br><span class="line">    test_accuracy = <span class="number">100.</span> * correct / total</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;stage2 Test Accuracy: <span class="subst">&#123;test_accuracy:<span class="number">.2</span>f&#125;</span>%&quot;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºmodel-trainå’Œ-eval"><a href="#å…³äºmodel-trainå’Œ-eval" class="headerlink" title="å…³äºmodel.trainå’Œ.eval"></a>å…³äºmodel.trainå’Œ.eval</h2><ul>
<li><p>è®­ç»ƒæ¨¡å¼ï¼ˆTraining Modeï¼‰ï¼šå¦‚è¡¨æ ¼æ‰€ç¤ºï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œæ¨¡å‹ä¼šè¿›è¡Œå‰å‘ä¼ æ’­ã€åå‘ä¼ æ’­ä»¥åŠå‚æ•°æ›´æ–°ã€‚æŸäº›å±‚ï¼Œå¦‚Dropoutå±‚å’ŒBatchNormå±‚ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹çš„è¡Œä¸ºä¼šä¸è¯„ä¼°æ¨¡å¼ä¸‹ä¸åŒã€‚ä¾‹å¦‚ï¼ŒDropoutå±‚ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­éšæœºå°†ä¸€éƒ¨åˆ†è¾“å…¥è®¾ç½®ä¸º0ï¼Œä»¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p>
</li>
<li><p>è¯„ä¼°æ¨¡å¼ï¼ˆEvaluation Modeï¼‰ï¼šå¦‚è¡¨æ ¼æ‰€ç¤ºï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œæ¨¡å‹åªä¼šè¿›è¡Œå‰å‘ä¼ æ’­ï¼Œä¸ä¼šè¿›è¡Œåå‘ä¼ æ’­å’Œå‚æ•°æ›´æ–°ã€‚Dropoutå±‚ä¼šåœæ­¢dropoutï¼ŒBatchNormå±‚ä¼šä½¿ç”¨åœ¨è®­ç»ƒé˜¶æ®µè®¡ç®—å¾—åˆ°çš„å…¨å±€ç»Ÿè®¡æ•°æ®ï¼Œè€Œä¸æ˜¯æµ‹è¯•é›†ä¸­çš„æ‰¹ç»Ÿè®¡æ•°æ®ã€‚</p>
</li>
</ul>
<p>è¯„ä¼°æ¨¡å¼ä¸€èˆ¬ç”¨äºéªŒè¯ã€æµ‹è¯•é›†</p>
<h2 id="å…³äºtorch-max"><a href="#å…³äºtorch-max" class="headerlink" title="å…³äºtorch.max"></a>å…³äºtorch.max</h2><p><code>_, predicted = outputs.max(1)</code>ä¸<code>torch.max(outputs, dim=1)</code>ç›¸åŒï¼Œå¯¹äºå…¶è¿”å›å€¼ï¼š</p>
<ul>
<li>[0]ï¼šåœ¨å…¨è¿æ¥å±‚æ‰€æœ‰è¾“å‡ºä¸­çš„æœ€å¤§å€¼</li>
<li>[1]ï¼šæœ€å¤§å€¼å¯¹åº”çš„æ ‡ç­¾å€¼ï¼Œé€šå¸¸æˆ‘ä»¬åªå…³å¿ƒæ ‡ç­¾å€¼ï¼ˆç´¢å¼•ï¼‰ï¼Œä¸å…³å¿ƒ[0]</li>
</ul>
<h1 id="4-predict"><a href="#4-predict" class="headerlink" title="4.predict"></a>4.predict</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> examples.pytorch.simclr <span class="keyword">import</span> SimCLR</span><br><span class="line"><span class="keyword">from</span> examples.pytorch.simclr_classification <span class="keyword">import</span> ClassificationHead</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    transform = transforms.Compose(</span><br><span class="line">        [transforms.Resize((<span class="number">32</span>, <span class="number">32</span>)),</span><br><span class="line">         transforms.ToTensor(),</span><br><span class="line">         transforms.Normalize((<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>), (<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))])</span><br><span class="line"></span><br><span class="line">    classes = (<span class="string">&#x27;plane&#x27;</span>, <span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;deer&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;frog&#x27;</span>, <span class="string">&#x27;horse&#x27;</span>, <span class="string">&#x27;ship&#x27;</span>, <span class="string">&#x27;truck&#x27;</span>)</span><br><span class="line"></span><br><span class="line">   <span class="comment">#å®ä¾‹åŒ–simclræ¨¡å‹å¹¶åŠ è½½è®­ç»ƒå¥½çš„æƒé‡</span></span><br><span class="line">    resnet = torchvision.models.resnet18()</span><br><span class="line">    backbone = nn.Sequential(*<span class="built_in">list</span>(resnet.children())[:-<span class="number">1</span>])</span><br><span class="line">    simclr_model = SimCLR(backbone)</span><br><span class="line">    simclr_model.load_state_dict(torch.load(<span class="string">&#x27;simclr.pth&#x27;</span>))</span><br><span class="line">   </span><br><span class="line">   <span class="comment">#å°†è®­ç»ƒå¥½çš„simclrçš„backboneå–å‡ºä¸å…¨è¿æ¥å±‚æ‹¼æˆæ–°æ¨¡å‹</span></span><br><span class="line">    backbone = simclr_model.backbone</span><br><span class="line">    class_model = ClassificationHead(backbone, num_classes=<span class="number">10</span>)</span><br><span class="line">   </span><br><span class="line">   <span class="comment">#åŠ è½½å·²è®­ç»ƒå¥½çš„å…¨è¿æ¥å±‚æƒé‡</span></span><br><span class="line">    class_model.load_state_dict(torch.load(<span class="string">&#x27;simclr_classification.pth&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    class_model.<span class="built_in">eval</span>()</span><br><span class="line">    im = Image.<span class="built_in">open</span>(<span class="string">&#x27;1.jpg&#x27;</span>)</span><br><span class="line">    im = transform(im)  <span class="comment"># [C, H, W]</span></span><br><span class="line">    im = torch.unsqueeze(im, dim=<span class="number">0</span>)  <span class="comment"># [N, C, H, W]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        outputs = class_model(im)</span><br><span class="line">        predict = outputs.<span class="built_in">max</span>(<span class="number">1</span>)[<span class="number">1</span>].numpy()</span><br><span class="line">    <span class="built_in">print</span>(classes[<span class="built_in">int</span>(predict)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul>
<li>å…ˆå»ºç«‹åŸºäºresnet18çš„æ¨¡å‹ï¼Œä½¿ç”¨backboneè¿™ç§å½¢å¼å¤§æ¦‚æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨ä¸‹æ¸¸ä»»åŠ¡ä½¿ç”¨ï¼Ÿ</li>
<li>å¯¹æ•°æ®é›†è¿›è¡Œéšæœºè£å‰ªã€é¢œè‰²æŠ–åŠ¨ç­‰æ“ä½œï¼Œç”ŸæˆåŒä¸€å¼ å›¾çš„ä¸åŒview(é€šè¿‡dataloaderè®¿é—®æ•°æ®é›†æ—¶ä¼šé€šè¿‡transformç”Ÿæˆ2å¼ å›¾)</li>
<li>ä½¿ç”¨NTXentLossè¿›è¡Œå¯¹æ¯”å­¦ä¹ ï¼Œè¯¥æŸå¤±å‡½æ•°ä¼šä¼šæ¯”è¾ƒä¸€ä¸ªæ‰¹æ¬¡ä¸­<strong>æ‰€æœ‰å›¾åƒè§†å›¾</strong>ï¼Œç»è¿‡å¯¹æ¯”å­¦ä¹ åçš„backboneä¼šæœ‰æ›´å¥½çš„<strong>ç‰¹å¾æå–èƒ½åŠ›</strong></li>
<li>è‹¥è¦ç”¨äºåˆ†ç±»ä»»åŠ¡ï¼Œåˆ™å°†å¯¹æ¯”å­¦ä¹ è®­ç»ƒåçš„backboneæ¥ä¸Šå…¨è¿æ¥å±‚å¹¶å¯¹å…¨è¿æ¥å±‚<strong>å•ç‹¬è¿›è¡Œç›‘ç£è®­ç»ƒ</strong></li>
<li>è¿›è¡Œpredictæ—¶ï¼Œéœ€å…ˆåŠ è½½è®­ç»ƒå¥½çš„resnet backboneå‚æ•°ï¼Œå†åŠ è½½è®­ç»ƒå¥½çš„å…¨è¿æ¥å±‚å‚æ•°</li>
</ul>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ¶ä½œæ•°æ®é›†</title>
    <url>/2024/09/10/%E5%88%B6%E4%BD%9C%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    <content><![CDATA[<p>æœ€è¿‘çœ‹äº†å‡ ä¸ªç®—æ³•çš„æ•°æ®é›†å»ºç«‹æ–¹æ³•ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä»¥åå€Ÿç”¨</p>
<h1 id="å¯¹äºæ•°é‡è¾ƒå°‘ä¸”æ¯ç§å›¾ç‰‡æ•°é‡ç›¸åŒçš„æƒ…å†µ"><a href="#å¯¹äºæ•°é‡è¾ƒå°‘ä¸”æ¯ç§å›¾ç‰‡æ•°é‡ç›¸åŒçš„æƒ…å†µ" class="headerlink" title="å¯¹äºæ•°é‡è¾ƒå°‘ä¸”æ¯ç§å›¾ç‰‡æ•°é‡ç›¸åŒçš„æƒ…å†µ"></a>å¯¹äºæ•°é‡è¾ƒå°‘ä¸”æ¯ç§å›¾ç‰‡æ•°é‡ç›¸åŒçš„æƒ…å†µ</h1><p>è‹¥è¦ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå›¾ç‰‡åœ¨æ–‡ä»¶å¤¹ä¸­<strong>éœ€æŒ‰é¡ºåºæ’åˆ—</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mydataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, images, labels, transform</span>):</span><br><span class="line">        self.images = images</span><br><span class="line">        self.labels = labels</span><br><span class="line">        self.transform = transform</span><br><span class="line">        dataset = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(labels)):	<span class="comment">#æ¯ä¸ªå›¾ç‰‡éƒ½æœ‰å¯¹åº”çš„æ ‡ç­¾å…ƒç´ ï¼Œå› æ­¤æ ‡ç­¾æ•°é‡=å›¾ç‰‡æ•°é‡</span></span><br><span class="line">            temp_img = Image.<span class="built_in">open</span>(images[i])</span><br><span class="line">            temp_img = self.transform(temp_img)  <span class="comment"># transforms.Composeå¯¹è±¡å¯ç›´æ¥è¾“å…¥å›¾åƒ</span></span><br><span class="line">            dataset.append((temp_img, labels[i]))<span class="comment">#ç»è¿‡train_test_splitçš„å›¾ç‰‡æ ‡ç­¾ä¸€ä¸€å¯¹åº”</span></span><br><span class="line">        self.dataset = dataset</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line">        <span class="keyword">return</span> self.dataset[index]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.labels)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…ˆçœ‹è¿™ä¸ª</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_dataset</span>(<span class="params">self</span>):</span><br><span class="line">    data = []</span><br><span class="line">    all_imgs_path = glob.glob(<span class="string">r&#x27;dataset\*.png&#x27;</span>)	<span class="comment">#æŸ¥æ‰¾æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰pngæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> all_imgs_path:</span><br><span class="line">        data.append(ip)		<span class="comment">#æ­¤å¤„æ˜¯ä¿å­˜äº†æ¯ä¸ªå›¾åƒè·¯å¾„çš„åˆ—è¡¨</span></span><br><span class="line">    labels = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>): <span class="comment">#åªé€‚ç”¨äºçŸ¥é“æ¯ä¸ªç±»åˆ«å›¾ç‰‡æ•°é‡çš„æƒ…å†µï¼Œä¸”æ•°é‡æœ€å¥½ç›¸ç­‰ä¸”ä¸å¤š</span></span><br><span class="line">        labels.extend([i] * <span class="number">72</span>) <span class="comment">#å›¾ç‰‡æœ‰20ç§ï¼Œæ¯ç§æœ‰72å¼ </span></span><br><span class="line">      <span class="comment">#åˆ†åˆ«ç”Ÿæˆ72ä¸ª0ã€1...20ï¼Œæ­¤å¤„iå³ä¸ºæ ‡ç­¾</span></span><br><span class="line">    tr_imgs, te_imgs, tr_labs, te_labs = train_test_split(data, labels, train_size=<span class="number">0.9</span>)	<span class="comment">#å› ä¸ºdataæŒ‰ç…§æ–‡ä»¶é¡ºåºæ’åˆ—ï¼Œå› æ­¤å›¾ç‰‡ä¸æ ‡ç­¾å¯ä»¥ä¸€ä¸€å¯¹åº”ï¼Œè®­ç»ƒé›†:éªŒè¯é›†=9:1</span></span><br><span class="line">   </span><br><span class="line">    transform = transforms.Compose([</span><br><span class="line">        transforms.Resize((<span class="number">128</span>, <span class="number">128</span>)),</span><br><span class="line">        transforms.ToTensor()</span><br><span class="line">    ])</span><br><span class="line">      </span><br><span class="line">    tr_set = Mydataset(tr_imgs, tr_labs, transform)</span><br><span class="line">    te_set = Mydataset(te_imgs, te_labs, transform)</span><br><span class="line">    tr_loader = DataLoader(tr_set, batch_size=self.args.train_batch_size, shuffle=<span class="literal">True</span>, num_workers=self.args.workers,</span><br><span class="line">                           pin_memory=<span class="literal">True</span>)</span><br><span class="line">    te_loader = DataLoader(te_set, batch_size=self.args.train_batch_size, shuffle=<span class="literal">True</span>, num_workers=self.args.workers,</span><br><span class="line">                           pin_memory=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> tr_loader, te_loader</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="å¯¹äºå›¾ç‰‡å·²æŒ‰ç…§æ–‡ä»¶å¤¹åˆ†å¥½çš„æƒ…å†µ"><a href="#å¯¹äºå›¾ç‰‡å·²æŒ‰ç…§æ–‡ä»¶å¤¹åˆ†å¥½çš„æƒ…å†µ" class="headerlink" title="å¯¹äºå›¾ç‰‡å·²æŒ‰ç…§æ–‡ä»¶å¤¹åˆ†å¥½çš„æƒ…å†µ"></a>å¯¹äºå›¾ç‰‡å·²æŒ‰ç…§æ–‡ä»¶å¤¹åˆ†å¥½çš„æƒ…å†µ</h1><h2 id="æ•°æ®é›†åˆ’åˆ†"><a href="#æ•°æ®é›†åˆ’åˆ†" class="headerlink" title="æ•°æ®é›†åˆ’åˆ†"></a>æ•°æ®é›†åˆ’åˆ†</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> shutil <span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mkfile</span>(<span class="params">file</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file):</span><br><span class="line">        os.makedirs(file)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å– flower_photos æ–‡ä»¶å¤¹ä¸‹é™¤ .txt æ–‡ä»¶ä»¥å¤–æ‰€æœ‰æ–‡ä»¶å¤¹åï¼ˆå³5ç§èŠ±çš„ç±»åï¼‰</span></span><br><span class="line">file_path = <span class="string">&#x27;flower_data/flower_photos&#x27;</span></span><br><span class="line">flower_class = [cla <span class="keyword">for</span> cla <span class="keyword">in</span> os.listdir(file_path) <span class="keyword">if</span> <span class="string">&quot;.txt&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> cla]</span><br><span class="line"><span class="comment">#os.listdirä¼šè¿”å›æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤¹åçš„åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º è®­ç»ƒé›†train æ–‡ä»¶å¤¹ï¼Œå¹¶ç”±5ç§ç±»ååœ¨å…¶ç›®å½•ä¸‹åˆ›å»º5ä¸ªå­ç›®å½•</span></span><br><span class="line">mkfile(<span class="string">&#x27;flower_data/train&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> cla <span class="keyword">in</span> flower_class:</span><br><span class="line">    mkfile(<span class="string">&#x27;flower_data/train/&#x27;</span> + cla)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º éªŒè¯é›†val æ–‡ä»¶å¤¹ï¼Œå¹¶ç”±5ç§ç±»ååœ¨å…¶ç›®å½•ä¸‹åˆ›å»º5ä¸ªå­ç›®å½•</span></span><br><span class="line">mkfile(<span class="string">&#x27;flower_data/val&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> cla <span class="keyword">in</span> flower_class:</span><br><span class="line">    mkfile(<span class="string">&#x27;flower_data/val/&#x27;</span> + cla)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ’åˆ†æ¯”ä¾‹ï¼Œè®­ç»ƒé›† : éªŒè¯é›† = 9 : 1</span></span><br><span class="line">split_rate = <span class="number">0.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†5ç§èŠ±çš„å…¨éƒ¨å›¾åƒå¹¶æŒ‰æ¯”ä¾‹åˆ†æˆè®­ç»ƒé›†å’ŒéªŒè¯é›†</span></span><br><span class="line"><span class="keyword">for</span> cla <span class="keyword">in</span> flower_class:</span><br><span class="line">    cla_path = file_path + <span class="string">&#x27;/&#x27;</span> + cla + <span class="string">&#x27;/&#x27;</span>  <span class="comment"># æŸä¸€ç±»åˆ«èŠ±çš„å­ç›®å½•</span></span><br><span class="line">    images = os.listdir(cla_path)  <span class="comment"># iamges åˆ—è¡¨å­˜å‚¨äº†è¯¥ç›®å½•ä¸‹æ‰€æœ‰å›¾åƒçš„åç§°</span></span><br><span class="line">    num = <span class="built_in">len</span>(images)</span><br><span class="line">    eval_index = random.sample(images, k=<span class="built_in">int</span>(num * split_rate))  <span class="comment"># ä»imagesåˆ—è¡¨ä¸­éšæœºæŠ½å– k ä¸ªå›¾åƒåç§°</span></span><br><span class="line">    <span class="keyword">for</span> index, image <span class="keyword">in</span> <span class="built_in">enumerate</span>(images):  <span class="comment">#åˆ›å»ºéªŒè¯é›†</span></span><br><span class="line">        <span class="comment"># eval_index ä¸­ä¿å­˜éªŒè¯é›†valçš„å›¾åƒåç§°</span></span><br><span class="line">        <span class="keyword">if</span> image <span class="keyword">in</span> eval_index:</span><br><span class="line">            image_path = cla_path + image</span><br><span class="line">            new_path = <span class="string">&#x27;flower_data/val/&#x27;</span> + cla</span><br><span class="line">            copy(image_path, new_path)  <span class="comment"># å°†é€‰ä¸­çš„å›¾åƒå¤åˆ¶åˆ°æ–°è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å…¶ä½™çš„å›¾åƒä¿å­˜åœ¨è®­ç»ƒé›†trainä¸­</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            image_path = cla_path + image</span><br><span class="line">            new_path = <span class="string">&#x27;flower_data/train/&#x27;</span> + cla</span><br><span class="line">            copy(image_path, new_path)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\r[&#123;&#125;] processing [&#123;&#125;/&#123;&#125;]&quot;</span>.<span class="built_in">format</span>(cla, index + <span class="number">1</span>, num), end=<span class="string">&quot;&quot;</span>)  <span class="comment"># processing bar</span></span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;processing done!&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="pytorchåŠ è½½æ•°æ®é›†"><a href="#pytorchåŠ è½½æ•°æ®é›†" class="headerlink" title="pytorchåŠ è½½æ•°æ®é›†"></a>pytorchåŠ è½½æ•°æ®é›†</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è·å–å›¾åƒæ•°æ®é›†çš„è·¯å¾„</span></span><br><span class="line">data_root = os.path.abspath(os.path.join(os.getcwd(), <span class="string">&quot;../..&quot;</span>))  <span class="comment"># get data root path è¿”å›ä¸Šä¸Šå±‚ç›®å½•</span></span><br><span class="line">image_path = data_root + <span class="string">&quot;/data_set/flower_data/&quot;</span>  			<span class="comment"># flower data_set path</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥è®­ç»ƒé›†å¹¶è¿›è¡Œé¢„å¤„ç†</span></span><br><span class="line">train_dataset = datasets.ImageFolder(root=image_path + <span class="string">&quot;/train&quot;</span>,		</span><br><span class="line">                                     transform=data_transform[<span class="string">&quot;train&quot;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>ImageFolder()</code>è¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ…å«æ•°æ®é›†æ‰€æœ‰å›¾åƒåŠå¯¹åº”æ ‡ç­¾æ„æˆçš„äºŒç»´å…ƒç»„å®¹å™¨ï¼Œæ”¯æŒç´¢å¼•å’Œè¿­ä»£ï¼Œå¯ä½œä¸º<code>torch.utils.data.DataLoader</code>çš„è¾“å…¥ï¼Œå…¶æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>
<ul>
<li><p>self.classesï¼šç”¨ä¸€ä¸ªåˆ—è¡¨ä¿å­˜ç±»åˆ«åç§°ï¼Œä¾‹å¦‚[â€˜dogâ€™,â€™catâ€™]</p>
</li>
<li><p>self.class_to_idxï¼šå¾—åˆ°å­—å…¸ï¼šç±»åˆ« + å¯¹åº”çš„ç´¢å¼•å€¼ï¼Œä¾‹å¦‚{â€˜dogâ€™:1,â€™catâ€™:2}</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">flower_list = train_dataset.class_to_idx</span><br><span class="line"><span class="comment"># å°† flower_list ä¸­çš„ key å’Œ val è°ƒæ¢ä½ç½®</span></span><br><span class="line">cla_dict = <span class="built_in">dict</span>((val, key) <span class="keyword">for</span> key, val <span class="keyword">in</span> flower_list.items())</span><br></pre></td></tr></table></figure>
</li>
<li><p>self.imgsï¼šä¿å­˜(å›¾åƒè·¯å¾„, å®ƒæ‰€å±äºçš„ç±»åˆ«index) tupleçš„ list</p>
</li>
</ul>
<p>åŒæ—¶ï¼ŒimageFolder()è¿‡ç¨‹åªä¼šåŠ è½½indexï¼Œè€Œä¸ä¼šæ‰§è¡Œtransformæ“ä½œï¼ˆtransformæ“ä½œæ˜¯æ‡’åŠ è½½çš„ï¼Œåªæœ‰ä½¿ç”¨dataLoaderçš„æ—¶å€™æ‰ä¼šæ‰§è¡Œï¼‰</p>
<h1 id="å¯¹åŒä¸€æ•°æ®é›†è¿›è¡Œåˆ†å‰²"><a href="#å¯¹åŒä¸€æ•°æ®é›†è¿›è¡Œåˆ†å‰²" class="headerlink" title="å¯¹åŒä¸€æ•°æ®é›†è¿›è¡Œåˆ†å‰²"></a>å¯¹åŒä¸€æ•°æ®é›†è¿›è¡Œåˆ†å‰²</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»è®­ç»ƒé›†çš„50000ä¸ªæ ·æœ¬ä¸­ï¼Œå–49000ä¸ªä½œä¸ºè®­ç»ƒé›†ï¼Œå‰©ä½™1000ä¸ªä½œä¸ºéªŒè¯é›†</span></span><br><span class="line">NUM_TRAIN = <span class="number">49000</span></span><br><span class="line"></span><br><span class="line">loader_train = DataLoader(dataset, batch_size=<span class="number">64</span>, sampler=sampler.SubsetRandomSampler(<span class="built_in">range</span>(NUM_TRAIN)))</span><br><span class="line"></span><br><span class="line">loader_val = DataLoader(dataset, batch_size=<span class="number">64</span>, sampler=sampler.SubsetRandomSampler(<span class="built_in">range</span>(NUM_TRAIN, <span class="number">50000</span>)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ç»å…¸CNN</title>
    <url>/2024/09/04/Lenet/</url>
    <content><![CDATA[<h1 id="Lenet"><a href="#Lenet" class="headerlink" title="Lenet"></a>Lenet</h1><h2 id="model"><a href="#model" class="headerlink" title="model"></a>model</h2><p>å·ç§¯åçš„çŸ©é˜µæ·±åº¦ç”±å·ç§¯æ ¸ç»„æ•°å†³å®šï¼Œå¤§å°ç”±å·ç§¯æ ¸å°ºå¯¸é€šè¿‡å…¬å¼è®¡ç®—å¾—åˆ°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨torch.nnåŒ…æ¥æ„å»ºç¥ç»ç½‘ç»œ.</span></span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LeNet</span>(nn.Module): 					<span class="comment"># ç»§æ‰¿äºnn.Moduleè¿™ä¸ªçˆ¶ç±»</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):						<span class="comment"># åˆå§‹åŒ–ç½‘ç»œç»“æ„</span></span><br><span class="line">        <span class="built_in">super</span>(LeNet, self).__init__()    	<span class="comment"># å¤šç»§æ‰¿éœ€ç”¨åˆ°superå‡½æ•°</span></span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, <span class="number">16</span>, <span class="number">5</span>)	</span><br><span class="line">        <span class="comment">#2ç»´å·ç§¯ï¼šè¾“å…¥channelï¼ˆçŸ©é˜µæ·±åº¦ï¼‰ï¼Œè¾“å‡ºchannelï¼ˆå·ç§¯æ ¸ç»„æ•°ï¼‰ï¼Œå·ç§¯æ ¸å°ºå¯¸</span></span><br><span class="line">        self.pool1 = nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="comment">#æœ€å¤§æ± åŒ–ï¼šæ± åŒ–æ ¸å¤§å°ï¼Œå¸ƒè·</span></span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">16</span>, <span class="number">32</span>, <span class="number">5</span>)</span><br><span class="line">        self.pool2 = nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">32</span>*<span class="number">5</span>*<span class="number">5</span>, <span class="number">120</span>)	<span class="comment">#å…¨è¿æ¥å±‚ï¼Œè¾“å…¥éœ€å°†çŸ©é˜µè½¬ä¸º1ç»´</span></span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">120</span>, <span class="number">84</span>)</span><br><span class="line">        self.fc3 = nn.Linear(<span class="number">84</span>, <span class="number">10</span>)	<span class="comment">#æœ€åä¸€å±‚æ ¹æ®éœ€æ±‚æ›´æ”¹è¾“å‡ºä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):			 <span class="comment"># æ­£å‘ä¼ æ’­è¿‡ç¨‹ï¼Œpytorch ä¸­tensorçš„å®šä¹‰ï¼š[batchï¼Œchannelï¼Œheightï¼Œweight]</span></span><br><span class="line">        x = F.relu(self.conv1(x)) <span class="comment"># input(3, 32, 32) output(16, 28, 28)</span></span><br><span class="line">        x = self.pool1(x)            <span class="comment"># output(16, 14, 14) æ± åŒ–å±‚åªæ”¹å˜Hï¼ŒW</span></span><br><span class="line">        x = F.relu(self.conv2(x))    <span class="comment"># output(32, 10, 10)</span></span><br><span class="line">        x = self.pool2(x)            <span class="comment"># output(32, 5, 5)</span></span><br><span class="line">        x = x.view(-<span class="number">1</span>, <span class="number">32</span>*<span class="number">5</span>*<span class="number">5</span>)       <span class="comment"># output(32*5*5)ï¼Œtensorå±•å¹³</span></span><br><span class="line">        x = F.relu(self.fc1(x))      <span class="comment"># output(120)</span></span><br><span class="line">        x = F.relu(self.fc2(x))      <span class="comment"># output(84)</span></span><br><span class="line">        x = self.fc3(x)              <span class="comment"># output(10)</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="train"><a href="#train" class="headerlink" title="train"></a>train</h2><h3 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">transform = transforms.Compose(</span><br><span class="line">   [transforms.ToTensor(), <span class="comment">#å°†å›¾ç‰‡è½¬åŒ–ä¸ºtorchçš„tensoræ ¼å¼</span></span><br><span class="line">    transforms.Normalize((<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>), (<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))<span class="comment">#å½’ä¸€åŒ–</span></span><br><span class="line">   ])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¿˜å¯ä»¥æ·»åŠ </span></span><br><span class="line"><span class="string">transforms.RandomResizedCrop(size)      # éšæœºè£å‰ªï¼Œå†ç¼©æ”¾æˆ size*size</span></span><br><span class="line"><span class="string">transforms.RandomHorizontalFlip(p=0.5) 	#æ¦‚ç‡ä¸º0.5çš„éšæœºæ°´å¹³ç¿»è½¬</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‹è½½æ•°æ®é›†å¹¶é€šè¿‡dataloaderåŠ è½½"><a href="#ä¸‹è½½æ•°æ®é›†å¹¶é€šè¿‡dataloaderåŠ è½½" class="headerlink" title="ä¸‹è½½æ•°æ®é›†å¹¶é€šè¿‡dataloaderåŠ è½½"></a>ä¸‹è½½æ•°æ®é›†å¹¶é€šè¿‡dataloaderåŠ è½½</h3><p>å¯¹äºæ‰“åŒ…çš„è®­ç»ƒé›†éœ€è¦é€šè¿‡dataloaderåŠ è½½å¹¶è®¾ç½®batchsizeç­‰ä¿¡æ¯</p>
<h4 id="è®­ç»ƒé›†"><a href="#è®­ç»ƒé›†" class="headerlink" title="è®­ç»ƒé›†"></a>è®­ç»ƒé›†</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_set = torchvision.datasets.CIFAR10(root=<span class="string">&#x27;./data&#x27;</span>, train=<span class="literal">True</span>,download=<span class="literal">False</span>, transform=transform)</span><br><span class="line"></span><br><span class="line">train_loader = torch.utils.data.DataLoader(train_set, batch_size=<span class="number">36</span>,shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>)<span class="comment">#shuffle:æ‰“ä¹±</span></span><br></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•é›†"><a href="#æµ‹è¯•é›†" class="headerlink" title="æµ‹è¯•é›†"></a>æµ‹è¯•é›†</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">val_set = torchvision.datasets.CIFAR10(root=<span class="string">&#x27;./data&#x27;</span>, train=<span class="literal">False</span>,download=<span class="literal">False</span>, transform=transform)</span><br><span class="line"><span class="comment">#æµ‹è¯•é›†trainä¸ºfalse</span></span><br><span class="line">val_loader = torch.utils.data.DataLoader(val_set, batch_size=<span class="number">5000</span>,shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h3 id="å…³äºdataloader"><a href="#å…³äºdataloader" class="headerlink" title="å…³äºdataloader"></a>å…³äºdataloader</h3><p>å¦‚æœå¯¹dataloaderå¯¹è±¡å–è¿­ä»£å™¨ï¼Œåˆ™å…¶è¿”å›ä¸ºå€¼ä¸æ ‡ç­¾</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºè¿­ä»£å™¨æ–¹ä¾¿è®¿é—®ï¼ˆdataloaderè¿”å›å€¼ä¸ºæ•°æ®å’Œæ ‡ç­¾ï¼‰</span></span><br><span class="line">val_data_iter = <span class="built_in">iter</span>(val_loader)</span><br><span class="line">val_image, val_label = <span class="built_in">next</span>(val_data_iter)</span><br></pre></td></tr></table></figure>
<p>è‹¥å¯¹å…¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> step, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader, start=<span class="number">0</span>):</span><br></pre></td></tr></table></figure>
<p>åˆ™enumerateå‡½æ•°ä¼šè¿”å›å½“å‰çš„ç´¢å¼•æ­¥æ•°å’Œdataï¼Œå…¶ä¸­dataç»„æˆä¸º[valueï¼Œlabel]</p>
<h3 id="åŠ è½½lenetæ¨¡å‹ã€æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨"><a href="#åŠ è½½lenetæ¨¡å‹ã€æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨" class="headerlink" title="åŠ è½½lenetæ¨¡å‹ã€æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨"></a>åŠ è½½lenetæ¨¡å‹ã€æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">net = LeNet().to(device)<span class="comment">#è‹¥ä½¿ç”¨gpuï¼Œåˆ™æ‰€æœ‰å¼ é‡ï¼ˆæ¨¡å‹ã€ç»è¿‡transformå¤„ç†çš„å¯¹è±¡ï¼‰éƒ½è¦è½¬åˆ°gpuä¸Š</span></span><br><span class="line">loss_function = nn.CrossEntropyLoss()<span class="comment">#äº¤å‰ç†µæŸå¤±å‡½æ•°</span></span><br><span class="line">optimizer = optim.Adam(net.parameters(), lr=<span class="number">0.001</span>)<span class="comment">#adamä¼˜åŒ–å™¨</span></span><br></pre></td></tr></table></figure>
<h3 id="å¼€å§‹è®­ç»ƒ"><a href="#å¼€å§‹è®­ç»ƒ" class="headerlink" title="å¼€å§‹è®­ç»ƒ"></a>å¼€å§‹è®­ç»ƒ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>): </span><br><span class="line"></span><br><span class="line">  running_loss = <span class="number">0.0</span></span><br><span class="line">  <span class="keyword">for</span> step, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader, start=<span class="number">0</span>):</span><br><span class="line">      <span class="comment">#enumerateå°†dataloaderè½¬åŒ–ä¸ºç´¢å¼•å€¼+æ•°æ®çš„è¿­ä»£å™¨ç»“æ„ï¼Œå…¶ä¸­æ•°æ®dataåŒ…æ‹¬å›¾åƒå€¼å’Œæ ‡ç­¾</span></span><br><span class="line">      inputs, labels = data</span><br><span class="line"></span><br><span class="line">      <span class="comment"># zero the parameter gradients</span></span><br><span class="line">      optimizer.zero_grad()</span><br><span class="line">      </span><br><span class="line">      <span class="comment"># forward + backward + optimize</span></span><br><span class="line">      outputs = net(inputs.to(device))	<span class="comment">#æ­£å‘ä¼ æ’­</span></span><br><span class="line">      loss = loss_function(outputs, labels.to(device))	</span><br><span class="line">      loss.backward()	<span class="comment">#æ ¹æ®æŸå¤±å‡½æ•°åå‘ä¼ æ’­</span></span><br><span class="line">      optimizer.step()	<span class="comment">#ä¼˜åŒ–å™¨æ›´æ–°</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># print statistics</span></span><br><span class="line">      running_loss += loss.item()</span><br><span class="line">      <span class="keyword">if</span> step % <span class="number">500</span> == <span class="number">499</span>:    <span class="comment"># print every 500 mini-batches</span></span><br><span class="line">         <span class="keyword">with</span> torch.no_grad():	<span class="comment">#åœ¨withå—ä¸­ä¸´æ—¶å…³é—­æ¢¯åº¦è®¡ç®—ï¼Œå› ä¸ºæ­¤å¤„ä¸ºéªŒè¯è€Œéè®­ç»ƒ</span></span><br><span class="line">             outputs = net(val_image.to(device))  <span class="comment">#å°†éªŒè¯é›†æ”¾å…¥è®­ç»ƒå¥½çš„æ¨¡å‹ä¸­</span></span><br><span class="line">             predict_y = torch.<span class="built_in">max</span>(outputs, dim=<span class="number">1</span>)[<span class="number">1</span>]	<span class="comment">#é€‰å–è¾“å‡ºä¸­æ¦‚ç‡æœ€å¤§çš„ç±»åˆ«ä½œä¸ºé¢„æµ‹ç»“æœ</span></span><br><span class="line">             accuracy = torch.eq(predict_y, val_label.to(device)).<span class="built_in">sum</span>().item() / 					 val_label.size(<span class="number">0</span>)</span><br><span class="line">             <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">             torch.eq(predict_y, val_label.to(device)) æ¯”è¾ƒé¢„æµ‹ç»“æœ predict_y å’Œå®é™…æ ‡ç­¾ 				val_label æ˜¯å¦ç›¸ç­‰ï¼Œç”Ÿæˆä¸€ä¸ªå¸ƒå°”å¼ é‡ï¼Œå€¼ä¸º True è¡¨ç¤ºé¢„æµ‹æ­£ç¡®ï¼ŒFalse è¡¨ç¤ºé¢„æµ‹é”™è¯¯ã€‚</span></span><br><span class="line"><span class="string">				sum() è®¡ç®—é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬æ•°ï¼Œ.item() å°†ç»“æœä»å¼ é‡è½¬æ¢ä¸ºPythonæ•°å€¼ç±»å‹ã€‚æœ€åï¼Œç”¨æ­£ç¡®é¢„					æµ‹çš„æ•°é‡é™¤ä»¥éªŒè¯é›†çš„æ€»æ ·æœ¬æ•° val_label.size(0)ï¼Œå¾—åˆ°å‡†ç¡®ç‡ã€‚</span></span><br><span class="line"><span class="string">             &#x27;&#x27;&#x27;</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&#x27;[%d, %5d] train_loss: %.3f  test_accuracy: %.3f&#x27;</span> %(epoch + <span class="number">1</span>, 					 step + <span class="number">1</span>, running_loss / <span class="number">500</span>, accuracy))</span><br><span class="line">             running_loss = <span class="number">0.0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="predict"><a href="#predict" class="headerlink" title="predict"></a>predict</h2><p>éœ€æ³¨æ„å•å¼ å›¾ç‰‡çš„å¤„ç†æ ¼å¼ï¼Œåœ¨trainä¸­ï¼Œç”±äºè®­ç»ƒé›†ï¼ˆéªŒè¯é›†ï¼‰éƒ½ç»è¿‡äº†dataloaderçš„batchsizeçš„è®¾ç½®ï¼Œæœ€ç»ˆè¾“å…¥åˆ°æ¨¡å‹ä¸­çš„æ ¼å¼ä¸º[N, C, H, W]ï¼Œé¢„æµ‹ä¸­ç”±äºæ˜¯å•å¼ å›¾ç‰‡ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨é€šè¿‡torch.unsqueezeè®¾ç½®ä¸º[1, C, H, W]</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">transform = transforms.Compose(</span><br><span class="line">        	[transforms.Resize((<span class="number">32</span>, <span class="number">32</span>)),</span><br><span class="line">         transforms.ToTensor(),</span><br><span class="line">         transforms.Normalize((<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>), (<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))]</span><br><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">&#x27;1.jpg&#x27;</span>)</span><br><span class="line">im = transform(im)  <span class="comment"># [C, H, W]</span></span><br><span class="line">im = torch.unsqueeze(im, dim=<span class="number">0</span>)  <span class="comment"># [N, C, H, W]</span></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">   	outputs = net(im)</span><br></pre></td></tr></table></figure>
<h2 id="modelçš„ä¸€äº›æ”¹è¿›"><a href="#modelçš„ä¸€äº›æ”¹è¿›" class="headerlink" title="modelçš„ä¸€äº›æ”¹è¿›"></a>modelçš„ä¸€äº›æ”¹è¿›</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LeNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(LeNet, self).__init__()</span><br><span class="line">			<span class="comment">#åœ¨æ›´ä¸ºå¤æ‚çš„æ¨¡å‹ä¸­å¸¸ä½¿ç”¨nn.Sequentialé›†æˆCNNçš„å„éƒ¨åˆ†</span></span><br><span class="line">        self.feature = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">3</span>, <span class="number">16</span>, <span class="number">5</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),	<span class="comment">#è¯¥æ–¹æ³•å¯èŠ‚çº¦å†…å­˜</span></span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>),</span><br><span class="line">            nn.Conv2d(<span class="number">16</span>, <span class="number">32</span>, <span class="number">5</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">        )</span><br><span class="line">      	<span class="comment">#å…¨è¿æ¥å±‚</span></span><br><span class="line">        self.classifiter = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">32</span> * <span class="number">5</span> * <span class="number">5</span>, <span class="number">120</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">120</span>, <span class="number">84</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">84</span>, <span class="number">10</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.feature(x)</span><br><span class="line">        x = x.view(-<span class="number">1</span>, <span class="number">32</span>*<span class="number">5</span>*<span class="number">5</span>)	<span class="comment">#è¾“å…¥å…¨è¿æ¥å±‚æ—¶è®°å¾—å±•å¹³ä¸º1ç»´</span></span><br><span class="line">        x = self.classifiter(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="Alexnet"><a href="#Alexnet" class="headerlink" title="Alexnet"></a>Alexnet</h1><img src="/images/loading.png" data-original="/2024/09/04/Lenet/1.jpg" class title="This is an image"> 
<p>ç”±å›¾å¯å¾—ï¼ŒAlexnetå…±æœ‰ä¸‰æ¬¡æ± åŒ–ï¼Œä¸”2-3ä¹‹é—´å †å äº†3æ¬¡3x3çš„å·ç§¯</p>
<h1 id="Resnet"><a href="#Resnet" class="headerlink" title="Resnet"></a>Resnet</h1><h2 id="ä¼ ç»ŸCNNç¼ºç‚¹"><a href="#ä¼ ç»ŸCNNç¼ºç‚¹" class="headerlink" title="ä¼ ç»ŸCNNç¼ºç‚¹"></a>ä¼ ç»ŸCNNç¼ºç‚¹</h2><p>å®éªŒè¯æ˜ï¼Œå½“ç½‘ç»œå †å åˆ°ä¸€å®šæ·±åº¦æ—¶ï¼Œä¼šå‡ºç°ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>æ¢¯åº¦æ¶ˆå¤±æˆ–æ¢¯åº¦çˆ†ç‚¸</li>
<li>é€€åŒ–é—®é¢˜(degradation problem)ï¼šåœ¨è§£å†³äº†æ¢¯åº¦æ¶ˆå¤±ã€çˆ†ç‚¸é—®é¢˜åï¼Œä»ç„¶å­˜åœ¨æ·±å±‚ç½‘ç»œçš„æ•ˆæœå¯èƒ½æ¯”æµ…å±‚ç½‘ç»œå·®çš„ç°è±¡</li>
</ul>
<p>è€ŒResneté€šè¿‡ä»¥ä¸‹æ–¹æ³•è§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li><p>å¯¹äºæ¢¯åº¦æ¶ˆå¤±æˆ–æ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼ŒResNetè®ºæ–‡æå‡ºé€šè¿‡æ•°æ®çš„é¢„å¤„ç†ä»¥åŠåœ¨ç½‘ç»œä¸­ä½¿ç”¨ <strong>BNï¼ˆBatch Normalizationï¼‰å±‚</strong>æ¥è§£å†³ã€‚</p>
</li>
<li><p>å¯¹äºé€€åŒ–é—®é¢˜ï¼ŒResNetè®ºæ–‡æå‡ºäº† <strong><u>residualç»“æ„ï¼ˆæ®‹å·®ç»“æ„ï¼‰</u></strong>æ¥å‡è½»é€€åŒ–é—®é¢˜ï¼Œå¹¶ä¸”éšç€ç½‘ç»œçš„ä¸æ–­åŠ æ·±ï¼Œæ•ˆæœå¹¶æ²¡æœ‰å˜å·®ï¼Œè€Œæ˜¯å˜çš„æ›´å¥½äº†ã€‚</p>
</li>
</ul>
<h2 id="æ®‹å·®ç»“æ„"><a href="#æ®‹å·®ç»“æ„" class="headerlink" title="æ®‹å·®ç»“æ„"></a>æ®‹å·®ç»“æ„</h2><p>2ä¸ªé€‚ç”¨äºä¸åŒæ·±åº¦ç¥ç»ç½‘ç»œçš„æ®‹å·®ç»“æ„ã€‚</p>
<img src="/images/loading.png" data-original="/2024/09/04/Lenet/2.jpg" class title="This is an image"> 
<p>äººä¸ºåœ°è®©ç¥ç»ç½‘ç»œæŸäº›å±‚è·³è¿‡ä¸‹ä¸€å±‚ç¥ç»å…ƒçš„è¿æ¥ï¼Œéš”å±‚ç›¸è¿ï¼Œ<strong>å¼±åŒ–æ¯å±‚ä¹‹é—´çš„å¼ºè”ç³»</strong>ã€‚è¿™ç§ç¥ç»ç½‘ç»œè¢«ç§°ä¸º <strong>æ®‹å·®ç½‘ç»œ</strong> (<strong>ResNets</strong>)ã€‚</p>
<p>è¿™é‡Œè¦æ³¨æ„æœ€ä¸‹æ–¹æ˜¯<strong>æ±‚å’Œå</strong>å†ç»è¿‡æ¿€æ´»å‡½æ•°ï¼Œå…¶ä¸­1x1çš„å·ç§¯æ ¸é€šè¿‡è°ƒæ•´æ­¥æ•°ä»è€Œè¾¾åˆ°é™ç»´æ•ˆæœ</p>
<h2 id="resnetæ‰€æœ‰ç½‘ç»œçš„å…·ä½“ä¿¡æ¯"><a href="#resnetæ‰€æœ‰ç½‘ç»œçš„å…·ä½“ä¿¡æ¯" class="headerlink" title="resnetæ‰€æœ‰ç½‘ç»œçš„å…·ä½“ä¿¡æ¯"></a>resnetæ‰€æœ‰ç½‘ç»œçš„å…·ä½“ä¿¡æ¯</h2><img src="/images/loading.png" data-original="/2024/09/04/Lenet/4.jpg" class title="This is an image"> 
<p><strong>éœ€æ³¨æ„çš„æ˜¯18ã€32çš„è¾“å‡ºæ·±åº¦æ˜¯512ï¼Œè€Œ50ä»¥ä¸Šçš„è¾“å‡ºæ·±åº¦æ˜¯2048</strong></p>
<h2 id="resnet18ç»“æ„"><a href="#resnet18ç»“æ„" class="headerlink" title="resnet18ç»“æ„"></a>resnet18ç»“æ„</h2><img src="/images/loading.png" data-original="/2024/09/04/Lenet/3.jpg" class title="This is an image"> 
<p>ç”±äºç‰¹å¾çŸ©é˜µç›¸åŠ æ—¶æ·±åº¦å¿…é¡»ç›¸åŒï¼Œå› æ­¤è™šçº¿éƒ¨åˆ†éœ€é€šè¿‡1x1çŸ©é˜µé™ç»´</p>
<h2 id="pytorchæ­å»ºæ®‹å·®ç½‘ç»œ"><a href="#pytorchæ­å»ºæ®‹å·®ç½‘ç»œ" class="headerlink" title="pytorchæ­å»ºæ®‹å·®ç½‘ç»œ"></a>pytorchæ­å»ºæ®‹å·®ç½‘ç»œ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ResNet18/34çš„æ®‹å·®ç»“æ„ï¼Œç”¨çš„æ˜¯2ä¸ª3x3çš„å·ç§¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicBlock</span>(nn.Module):</span><br><span class="line">    expansion = <span class="number">1</span>  <span class="comment"># æ®‹å·®ç»“æ„ä¸­ï¼Œä¸»åˆ†æ”¯çš„å·ç§¯æ ¸ä¸ªæ•°æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œä¸å˜åˆ™ä¸º1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_channel, out_channel, stride=<span class="number">1</span>, downsample=<span class="literal">None</span></span>):  				<span class="comment">#downsampleå¯¹åº”è™šçº¿æ®‹å·®ç»“æ„</span></span><br><span class="line">        <span class="built_in">super</span>(BasicBlock, self).__init__()</span><br><span class="line">    <span class="comment">#ä¸»çº¿è·¯    </span></span><br><span class="line">        self.conv1 = nn.Conv2d(in_channels=in_channel, out_channels=out_channel,</span><br><span class="line">                             kernel_size=<span class="number">3</span>, stride=stride, padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(out_channel)</span><br><span class="line">        self.relu = nn.ReLU()</span><br><span class="line">        self.conv2 = nn.Conv2d(in_channels=out_channel, out_channels=out_channel,</span><br><span class="line">                               kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        self.bn2 = nn.BatchNorm2d(out_channel)</span><br><span class="line">      <span class="comment">#ä¸‹é‡‡æ ·ï¼Œè¡¨ç¤ºè™šçº¿éƒ¨åˆ†çš„é™ç»´ï¼Œä¸ä¸€å®šæ¯ä¸ªæ®‹å·®ç»“æ„éƒ½æœ‰   </span></span><br><span class="line">        self.downsample = downsample</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        identity = x</span><br><span class="line">        <span class="keyword">if</span> self.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:  <span class="comment"># è™šçº¿æ®‹å·®ç»“æ„ï¼Œéœ€è¦ä¸‹é‡‡æ ·</span></span><br><span class="line">            identity = self.downsample(x)  <span class="comment"># æ·å¾„åˆ†æ”¯ short cut</span></span><br><span class="line"></span><br><span class="line">        out = self.conv1(x)</span><br><span class="line">        out = self.bn1(out)</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        out = self.conv2(out)</span><br><span class="line">        out = self.bn2(out)</span><br><span class="line"></span><br><span class="line">        out += identity 	<span class="comment">#ç›¸åŠ åå†relu</span></span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="comment"># ResNet50/101/152çš„æ®‹å·®ç»“æ„ï¼Œç”¨çš„æ˜¯1x1+3x3+1x1çš„å·ç§¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bottleneck</span>(nn.Module):</span><br><span class="line">    expansion = <span class="number">4</span>  <span class="comment"># æ®‹å·®ç»“æ„ä¸­ç¬¬ä¸‰å±‚å·ç§¯æ ¸ä¸ªæ•°æ˜¯ç¬¬ä¸€/äºŒå±‚å·ç§¯æ ¸ä¸ªæ•°çš„4å€</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_channel, out_channel, stride=<span class="number">1</span>, downsample=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(Bottleneck, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(in_channels=in_channel, out_channels=out_channel,</span><br><span class="line">                               kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, bias=<span class="literal">False</span>)  <span class="comment"># squeeze channels</span></span><br><span class="line">        self.bn1 = nn.BatchNorm2d(out_channel)</span><br><span class="line">        <span class="comment"># -----------------------------------------</span></span><br><span class="line">        self.conv2 = nn.Conv2d(in_channels=out_channel, out_channels=out_channel,</span><br><span class="line">                               kernel_size=<span class="number">3</span>, stride=stride, bias=<span class="literal">False</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.bn2 = nn.BatchNorm2d(out_channel)</span><br><span class="line">        <span class="comment"># -----------------------------------------</span></span><br><span class="line">        self.conv3 = nn.Conv2d(in_channels=out_channel, out_channels=out_channel * self.expansion,</span><br><span class="line">                               kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, bias=<span class="literal">False</span>)  <span class="comment"># unsqueeze channels</span></span><br><span class="line">        self.bn3 = nn.BatchNorm2d(out_channel * self.expansion)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        self.downsample = downsample</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        identity = x</span><br><span class="line">        <span class="keyword">if</span> self.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            identity = self.downsample(x)  <span class="comment"># æ·å¾„åˆ†æ”¯ short cut</span></span><br><span class="line"></span><br><span class="line">        out = self.conv1(x)</span><br><span class="line">        out = self.bn1(out)</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        out = self.conv2(out)</span><br><span class="line">        out = self.bn2(out)</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        out = self.conv3(out)</span><br><span class="line">        out = self.bn3(out)</span><br><span class="line"></span><br><span class="line">        out += identity</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ResNet</span>(nn.Module):</span><br><span class="line">    <span class="comment"># block = BasicBlock or Bottleneck</span></span><br><span class="line">    <span class="comment"># block_numä¸ºæ®‹å·®ç»“æ„ä¸­conv2_x~conv5_xä¸­æ®‹å·®å—ä¸ªæ•°ï¼Œæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…±4å±‚ï¼Œæ¯å±‚æœ‰è‹¥å¹²å·ç§¯å±‚</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, block, blocks_num, num_classes=<span class="number">1000</span>, include_top=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(ResNet, self).__init__()</span><br><span class="line">        self.include_top = include_top</span><br><span class="line">        self.in_channel = <span class="number">64</span></span><br><span class="line"></span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, self.in_channel, kernel_size=<span class="number">7</span>, stride=<span class="number">2</span>,</span><br><span class="line">                               padding=<span class="number">3</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(self.in_channel)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        self.maxpool = nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.layer1 = self._make_layer(block, <span class="number">64</span>, blocks_num[<span class="number">0</span>])             </span><br><span class="line">        self.layer2 = self._make_layer(block, <span class="number">128</span>, blocks_num[<span class="number">1</span>], stride=<span class="number">2</span>) </span><br><span class="line">        self.layer3 = self._make_layer(block, <span class="number">256</span>, blocks_num[<span class="number">2</span>], stride=<span class="number">2</span>)  </span><br><span class="line">        self.layer4 = self._make_layer(block, <span class="number">512</span>, blocks_num[<span class="number">3</span>], stride=<span class="number">2</span>) </span><br><span class="line">        <span class="keyword">if</span> self.include_top:</span><br><span class="line">            self.avgpool = nn.AdaptiveAvgPool2d((<span class="number">1</span>, <span class="number">1</span>))  <span class="comment"># output size = (1, 1)</span></span><br><span class="line">            self.fc = nn.Linear(<span class="number">512</span> * block.expansion, num_classes)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(m, nn.Conv2d):</span><br><span class="line">                nn.init.kaiming_normal_(m.weight, mode=<span class="string">&#x27;fan_out&#x27;</span>, nonlinearity=<span class="string">&#x27;relu&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#é‡ç‚¹å‡½æ•°</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_make_layer</span>(<span class="params">self, block, channel, block_num, stride=<span class="number">1</span></span>):</span><br><span class="line">        downsample = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ResNet50/101/152çš„æ®‹å·®ç»“æ„ï¼Œblock.expansion=4ï¼Œæ»¡è¶³æ¡ä»¶åˆ™ç”Ÿæˆä¸‹é‡‡æ ·é™ç»´çš„æ—æ”¯</span></span><br><span class="line">        <span class="keyword">if</span> stride != <span class="number">1</span> <span class="keyword">or</span> self.in_channel != channel * block.expansion:</span><br><span class="line">            downsample = nn.Sequential(</span><br><span class="line">                nn.Conv2d(self.in_channel, channel * block.expansion, kernel_size=<span class="number">1</span>, 					  stride=stride, bias=<span class="literal">False</span>),</span><br><span class="line">                nn.BatchNorm2d(channel * block.expansion))</span><br><span class="line"></span><br><span class="line">        layers = []</span><br><span class="line">        layers.append(block(self.in_channel, channel, downsample=downsample, stride=stride))</span><br><span class="line">        self.in_channel = channel * block.expansion</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, block_num):</span><br><span class="line">            layers.append(block(self.in_channel, channel))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> nn.Sequential(*layers)</span><br><span class="line">   <span class="comment">#å¯¹åˆ—è¡¨å–*ç›¸å¯¹äºå°†å…¶å…ƒç´ ä¾æ¬¡é¡ºåºä¼ å…¥ï¼Œæ­¤æ—¶nn.Sequentialåˆ™ä¼šé¡ºåºæ‹¼æ¥å„ä¸ªæ®‹å·®å—çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = self.bn1(x)</span><br><span class="line">        x = self.relu(x)</span><br><span class="line">        x = self.maxpool(x)</span><br><span class="line"></span><br><span class="line">        x = self.layer1(x)</span><br><span class="line">        x = self.layer2(x)</span><br><span class="line">        x = self.layer3(x)</span><br><span class="line">        x = self.layer4(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.include_top:</span><br><span class="line">            x = self.avgpool(x)</span><br><span class="line">            x = torch.flatten(x, <span class="number">1</span>)</span><br><span class="line">            x = self.fc(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">resnet34</span>(<span class="params">num_classes=<span class="number">1000</span>, include_top=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="keyword">return</span> ResNet(BasicBlock, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">3</span>], num_classes=num_classes, include_top=include_top)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">resnet101</span>(<span class="params">num_classes=<span class="number">1000</span>, include_top=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="keyword">return</span> ResNet(Bottleneck, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">23</span>, <span class="number">3</span>], num_classes=num_classes, include_top=include_top)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºnn.Sequentialï¼Œå…¶å¯ä»¥é€šè¿‡<code>nn.Sequential(class1,class2)</code>çš„æ–¹å¼é¡ºåºæ‹¼æ¥ä¸¤ä¸ªç¥ç»ç½‘ç»œå—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡lenetä¸­çš„æ–¹å¼ä¾æ¬¡é›†æˆç¥ç»ç½‘ç»œ</p>
<p>ç”±äºæ®‹å·®ç»“æ„ï¼ˆå—ï¼‰çš„å…·ä½“å‚æ•°ï¼ˆå·ç§¯å±‚æ•°ï¼Œæ˜¯å¦ä¸‹é‡‡æ ·ï¼‰éœ€è¦æ ¹æ®ä½¿ç”¨çš„resnetçš„æ·±åº¦å†³å®šï¼Œå› æ­¤ä½¿ç”¨è¿™ç§æ‹¼æ¥çš„æ–¹å¼ä¼šæ¯”è¾ƒæ–¹ä¾¿</p>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>YOLO_v8</title>
    <url>/2024/07/23/YOLO-v8/</url>
    <content><![CDATA[<p>å¤§éƒ¨åˆ†éƒ½æ˜¯ç½‘ä¸Šç²˜çš„ï¼Œåªæ˜¯è®°å½•ä¸€ä¸‹æ–¹ä¾¿è‡ªå·±æŸ¥æ‰¾</p>
<h1 id="ç½®ä¿¡åº¦"><a href="#ç½®ä¿¡åº¦" class="headerlink" title="ç½®ä¿¡åº¦"></a>ç½®ä¿¡åº¦</h1><p>åœ¨YOLOä¸­ï¼Œç½®ä¿¡åº¦æ˜¯ä¸€ä¸ªä»‹äº0å’Œ1ä¹‹é—´çš„æ•°å€¼ï¼Œè¡¨ç¤ºæ¨¡å‹å¯¹æ£€æµ‹åˆ°çš„ç›®æ ‡çš„ç¡®ä¿¡ç¨‹åº¦ã€‚å¦‚æœç½®ä¿¡åº¦æ¥è¿‘1ï¼Œé‚£ä¹ˆæ¨¡å‹ç›¸ä¿¡è¯¥æ¡†ä¸­åŒ…å«äº†ç›®æ ‡å¯¹è±¡ã€‚å¦‚æœç½®ä¿¡åº¦æ¥è¿‘0ï¼Œæ¨¡å‹è®¤ä¸ºè¯¥æ¡†ä¸­å¯èƒ½æ²¡æœ‰ç›®æ ‡ã€‚æ‰€ä»¥ï¼Œç½®ä¿¡åº¦å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ï¼Œè¡¨ç¤ºç›®æ ‡çš„å­˜åœ¨æ¦‚ç‡ã€‚</p>
<p>åœ¨YOLOä¸­ï¼Œç½®ä¿¡åº¦ä»£è¡¨äº†ç®—æ³•å¯¹äºå…¶é¢„æµ‹ç»“æœçš„è‡ªä¿¡ç¨‹åº¦ã€‚ç®€å•åœ°è¯´ï¼Œ<strong>å°±æ˜¯ç®—æ³•è§‰å¾—â€œè¿™ä¸ªæ¡†é‡ŒçœŸçš„æœ‰ä¸€ä¸ªç‰©ä½“â€çš„æ¦‚ç‡</strong>ã€‚</p>
<h1 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h1><p>åœ¨å½“å‰ç›®å½•ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install ultralytics</span><br></pre></td></tr></table></figure>
<h1 id="è®­ç»ƒ-yamlé…ç½®"><a href="#è®­ç»ƒ-yamlé…ç½®" class="headerlink" title="è®­ç»ƒ.yamlé…ç½®"></a>è®­ç»ƒ.yamlé…ç½®</h1><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œçš„pathéœ€è¦æŒ‡å‘ä½ é¡¹ç›®ä¸­æ•°æ®é›†çš„ç›®å½•</span></span><br><span class="line"><span class="attr">path:</span> <span class="string">C:/Users/admin/Desktop/CSDN/YOLOV8_DEF/ultralytics-detect/datasets/coco128/</span> </span><br><span class="line"><span class="comment"># è¿™é‡Œåˆ†åˆ«æŒ‡å‘ä½ è®­ç»ƒã€éªŒè¯ã€æµ‹è¯•çš„æ–‡ä»¶åœ°å€ï¼Œåªéœ€è¦æŒ‡å‘å›¾ç‰‡çš„æ–‡ä»¶å¤¹å³å¯ã€‚ä½†æ˜¯è¦æ³¨æ„å›¾ç‰‡å’Œlabelsåç§°è¦å¯¹åº”</span></span><br><span class="line"><span class="attr">train:</span> <span class="string">images/train2017</span>  <span class="comment"># train images (relative to &#x27;path&#x27;) 128 images</span></span><br><span class="line"><span class="attr">val:</span> <span class="string">images/test2017</span>  <span class="comment"># val images (relative to &#x27;path&#x27;) 128 images</span></span><br><span class="line"><span class="attr">test:</span> <span class="string">images/test2017</span> <span class="comment"># test images (optional)</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Classes</span></span><br><span class="line"><span class="attr">names:</span></span><br><span class="line">  <span class="attr">0:</span> <span class="string">person</span></span><br><span class="line">  <span class="attr">1:</span> <span class="string">bicycle</span></span><br><span class="line">  <span class="attr">2:</span> <span class="string">car</span></span><br><span class="line">  <span class="attr">3:</span> <span class="string">motorcycle</span></span><br><span class="line">  <span class="attr">4:</span> <span class="string">airplane</span></span><br><span class="line">  <span class="string">......</span></span><br><span class="line">  <span class="attr">75:</span> <span class="string">vase</span></span><br><span class="line">  <span class="attr">76:</span> <span class="string">scissors</span></span><br><span class="line">  <span class="attr">77:</span> <span class="string">teddy</span> <span class="string">bear</span></span><br><span class="line">  <span class="attr">78:</span> <span class="string">hair</span> <span class="string">drier</span></span><br><span class="line">  <span class="attr">79:</span> <span class="string">toothbrush</span></span><br></pre></td></tr></table></figure>
<h1 id="æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯-txt"><a href="#æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯-txt" class="headerlink" title="æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯(txt)"></a>æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯(txt)</h1><ul>
<li>ç±»åˆ«IDï¼šå¯¹åº”.yamlä¸­çš„namesï¼Œä»£è¡¨å¯¹è±¡çš„ç±»åˆ«</li>
<li>ä¸­å¿ƒXã€Yåæ ‡ï¼šå¯¹è±¡<strong>è¾¹ç•Œæ¡†ä¸­å¿ƒ</strong>çš„æ°´å¹³ã€å‚ç›´æ–¹å‘åæ ‡ï¼ˆæ¯”ä¾‹ï¼‰</li>
<li>è¾¹ç•Œæ¡†å®½ã€é«˜åº¦ï¼šè¿™ä¸ªå€¼æ˜¯ç›¸å¯¹äºæ•´ä¸ªå›¾åƒçš„æ¯”ä¾‹</li>
</ul>
<p>è‹¥ä¸€ä¸ªå›¾ç‰‡çš„txtæ ‡æ³¨æ–‡ä»¶ä¸­æŸä¸€è¡Œä¸ºï¼š1 0.5 0.5 0.2 0.3åˆ™ä»£è¡¨ï¼š</p>
<ul>
<li>ç±»åˆ«ï¼š1</li>
<li>è¾¹ç•Œæ¡†<strong>ä¸­å¿ƒåæ ‡</strong>å¯¹åº”å›¾åƒæ°´å¹³ã€å‚ç›´çš„å„50%å¤„ï¼ˆä¸­å¿ƒï¼‰</li>
<li>è¾¹ç•Œæ¡†<strong>å®½åº¦</strong>ä¸ºå›¾åƒå®½åº¦çš„20%ï¼Œ<strong>é«˜åº¦</strong>ä¸ºå›¾åƒé«˜åº¦çš„30%</li>
</ul>
<h1 id="è®­ç»ƒå¯¹åº”çš„å„å‚æ•°è¯´æ˜"><a href="#è®­ç»ƒå¯¹åº”çš„å„å‚æ•°è¯´æ˜" class="headerlink" title="è®­ç»ƒå¯¹åº”çš„å„å‚æ•°è¯´æ˜"></a>è®­ç»ƒå¯¹åº”çš„å„å‚æ•°è¯´æ˜</h1><p><a href="https://blog.csdn.net/weixin_45303602/article/details/139798347?spm=1001.2014.3001.5506">è¶…è¯¦ç»†YOLOv8å…¨è§£ï¼šå­¦v8åªç”¨çœ‹ä¸€ç¯‡æ–‡ç« -CSDNåšå®¢</a></p>
<p>æœ€å¥½åœ¨è¿è¡Œæ—¶é€šè¿‡å‘½ä»¤è¡Œæˆ–.trainå‡½æ•°æ·»åŠ å‚æ•°å®ç°ï¼Œä¸åœ¨default.yamlä¸­ä¿®æ”¹</p>
<h1 id="é¢„æµ‹å¤§æ¦‚æ­¥éª¤"><a href="#é¢„æµ‹å¤§æ¦‚æ­¥éª¤" class="headerlink" title="é¢„æµ‹å¤§æ¦‚æ­¥éª¤"></a>é¢„æµ‹å¤§æ¦‚æ­¥éª¤</h1><ul>
<li><p>å…ˆä»å¤´åˆ›å»ºæ–°æ¨¡å‹å¹¶è®­ç»ƒ</p>
<p><a href="https://blog.csdn.net/qq_37553692/article/details/130898732">YOLOv8è®­ç»ƒå‚æ•°è¯¦è§£ï¼ˆå…¨é¢è¯¦ç»†ã€é‡ç‚¹çªå‡ºã€å¤§ç™½è¯é˜è¿°å°ç™½ä¹Ÿèƒ½çœ‹æ‡‚ï¼‰-CSDNåšå®¢</a></p>
<p>å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæ ¼å¼æˆ–pythonä»£ç æ ¼å¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from ultralytics import YOLO</span><br><span class="line"></span><br><span class="line">model=YOLO(&#x27;[æ¨¡å‹ï¼Œ.pt or .yaml]&#x27;)</span><br><span class="line">result=model.trian(data=&#x27;è‡ªå·±çš„.yaml&#x27;,epochs=[è®­ç»ƒè½®æ•°],lr0=[åˆå§‹å­¦ä¹ ç‡]))</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œé¢„æµ‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model= YOLO(<span class="string">&#x27;runs/detect/v8s01/weights/best.pt&#x27;</span>)</span><br><span class="line">result=model.predict(source=<span class="string">&#x27;[è¦é¢„æµ‹çš„å›¾çš„è·¯å¾„]&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="è®­ç»ƒè‡ªå¸¦çš„coco128æ•°æ®é›†"><a href="#è®­ç»ƒè‡ªå¸¦çš„coco128æ•°æ®é›†" class="headerlink" title="è®­ç»ƒè‡ªå¸¦çš„coco128æ•°æ®é›†"></a>è®­ç»ƒè‡ªå¸¦çš„coco128æ•°æ®é›†</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> ultralytics <span class="keyword">import</span> YOLO</span><br><span class="line"></span><br><span class="line">model = YOLO(<span class="string">&quot;./yolov8n.pt&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    result = model.train(data=<span class="string">&#x27;coco128.yaml&#x27;</span>,epochs=<span class="number">5</span>, lr0=<span class="number">0.01</span>)</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹coco128.yamlï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">path:</span> <span class="string">../datasets/coco128</span> <span class="comment"># dataset root dir</span></span><br><span class="line"><span class="attr">train:</span> <span class="string">images/train2017</span> <span class="comment"># train images (relative to &#x27;path&#x27;) 128 images</span></span><br><span class="line"><span class="attr">val:</span> <span class="string">images/train2017</span> <span class="comment"># val images (relative to &#x27;path&#x27;) 128 images</span></span><br><span class="line"><span class="attr">test:</span> <span class="comment"># test images (optional)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Classes</span></span><br><span class="line"><span class="attr">names:</span></span><br><span class="line">  <span class="attr">0:</span> <span class="string">person</span></span><br><span class="line">  <span class="attr">1:</span> <span class="string">bicycle</span></span><br><span class="line">  <span class="attr">2:</span> <span class="string">car</span></span><br><span class="line">  <span class="attr">3:</span> <span class="string">motorcycle</span></span><br><span class="line">  <span class="attr">4:</span> <span class="string">airplane</span></span><br><span class="line">  <span class="attr">5:</span> <span class="string">bus</span></span><br><span class="line">  <span class="attr">6:</span> <span class="string">train</span></span><br><span class="line">  <span class="attr">7:</span> <span class="string">truck</span></span><br><span class="line">  <span class="attr">8:</span> <span class="string">boat</span></span><br><span class="line">  <span class="attr">9:</span> <span class="string">traffic</span> <span class="string">light</span></span><br><span class="line">  <span class="attr">10:</span> <span class="string">fire</span> <span class="string">hydrant</span></span><br><span class="line">  <span class="attr">11:</span> <span class="string">stop</span> <span class="string">sign</span></span><br><span class="line">  <span class="attr">12:</span> <span class="string">parking</span> <span class="string">meter</span></span><br><span class="line">  <span class="attr">13:</span> <span class="string">bench</span></span><br><span class="line">  <span class="attr">14:</span> <span class="string">bird</span></span><br><span class="line">  <span class="attr">15:</span> <span class="string">cat</span></span><br><span class="line">  <span class="attr">16:</span> <span class="string">dog</span></span><br><span class="line">  <span class="attr">17:</span> <span class="string">horse</span></span><br><span class="line">  <span class="attr">18:</span> <span class="string">sheep</span></span><br><span class="line">  <span class="attr">19:</span> <span class="string">cow</span></span><br><span class="line">  <span class="attr">20:</span> <span class="string">elephant</span></span><br><span class="line">  <span class="attr">21:</span> <span class="string">bear</span></span><br><span class="line">  <span class="attr">22:</span> <span class="string">zebra</span></span><br><span class="line">  <span class="attr">23:</span> <span class="string">giraffe</span></span><br><span class="line">  <span class="attr">24:</span> <span class="string">backpack</span></span><br><span class="line">  <span class="attr">25:</span> <span class="string">umbrella</span></span><br><span class="line">  <span class="attr">26:</span> <span class="string">handbag</span></span><br><span class="line">  <span class="attr">27:</span> <span class="string">tie</span></span><br><span class="line">  <span class="attr">28:</span> <span class="string">suitcase</span></span><br><span class="line">  <span class="attr">29:</span> <span class="string">frisbee</span></span><br><span class="line">  <span class="attr">30:</span> <span class="string">skis</span></span><br><span class="line">  <span class="attr">31:</span> <span class="string">snowboard</span></span><br><span class="line">  <span class="attr">32:</span> <span class="string">sports</span> <span class="string">ball</span></span><br><span class="line">  <span class="attr">33:</span> <span class="string">kite</span></span><br><span class="line">  <span class="attr">34:</span> <span class="string">baseball</span> <span class="string">bat</span></span><br><span class="line">  <span class="attr">35:</span> <span class="string">baseball</span> <span class="string">glove</span></span><br><span class="line">  <span class="attr">36:</span> <span class="string">skateboard</span></span><br><span class="line">  <span class="attr">37:</span> <span class="string">surfboard</span></span><br><span class="line">  <span class="attr">38:</span> <span class="string">tennis</span> <span class="string">racket</span></span><br><span class="line">  <span class="attr">39:</span> <span class="string">bottle</span></span><br><span class="line">  <span class="attr">40:</span> <span class="string">wine</span> <span class="string">glass</span></span><br><span class="line">  <span class="attr">41:</span> <span class="string">cup</span></span><br><span class="line">  <span class="attr">42:</span> <span class="string">fork</span></span><br><span class="line">  <span class="attr">43:</span> <span class="string">knife</span></span><br><span class="line">  <span class="attr">44:</span> <span class="string">spoon</span></span><br><span class="line">  <span class="attr">45:</span> <span class="string">bowl</span></span><br><span class="line">  <span class="attr">46:</span> <span class="string">banana</span></span><br><span class="line">  <span class="attr">47:</span> <span class="string">apple</span></span><br><span class="line">  <span class="attr">48:</span> <span class="string">sandwich</span></span><br><span class="line">  <span class="attr">49:</span> <span class="string">orange</span></span><br><span class="line">  <span class="attr">50:</span> <span class="string">broccoli</span></span><br><span class="line">  <span class="attr">51:</span> <span class="string">carrot</span></span><br><span class="line">  <span class="attr">52:</span> <span class="string">hot</span> <span class="string">dog</span></span><br><span class="line">  <span class="attr">53:</span> <span class="string">pizza</span></span><br><span class="line">  <span class="attr">54:</span> <span class="string">donut</span></span><br><span class="line">  <span class="attr">55:</span> <span class="string">cake</span></span><br><span class="line">  <span class="attr">56:</span> <span class="string">chair</span></span><br><span class="line">  <span class="attr">57:</span> <span class="string">couch</span></span><br><span class="line">  <span class="attr">58:</span> <span class="string">potted</span> <span class="string">plant</span></span><br><span class="line">  <span class="attr">59:</span> <span class="string">bed</span></span><br><span class="line">  <span class="attr">60:</span> <span class="string">dining</span> <span class="string">table</span></span><br><span class="line">  <span class="attr">61:</span> <span class="string">toilet</span></span><br><span class="line">  <span class="attr">62:</span> <span class="string">tv</span></span><br><span class="line">  <span class="attr">63:</span> <span class="string">laptop</span></span><br><span class="line">  <span class="attr">64:</span> <span class="string">mouse</span></span><br><span class="line">  <span class="attr">65:</span> <span class="string">remote</span></span><br><span class="line">  <span class="attr">66:</span> <span class="string">keyboard</span></span><br><span class="line">  <span class="attr">67:</span> <span class="string">cell</span> <span class="string">phone</span></span><br><span class="line">  <span class="attr">68:</span> <span class="string">microwave</span></span><br><span class="line">  <span class="attr">69:</span> <span class="string">oven</span></span><br><span class="line">  <span class="attr">70:</span> <span class="string">toaster</span></span><br><span class="line">  <span class="attr">71:</span> <span class="string">sink</span></span><br><span class="line">  <span class="attr">72:</span> <span class="string">refrigerator</span></span><br><span class="line">  <span class="attr">73:</span> <span class="string">book</span></span><br><span class="line">  <span class="attr">74:</span> <span class="string">clock</span></span><br><span class="line">  <span class="attr">75:</span> <span class="string">vase</span></span><br><span class="line">  <span class="attr">76:</span> <span class="string">scissors</span></span><br><span class="line">  <span class="attr">77:</span> <span class="string">teddy</span> <span class="string">bear</span></span><br><span class="line">  <span class="attr">78:</span> <span class="string">hair</span> <span class="string">drier</span></span><br><span class="line">  <span class="attr">79:</span> <span class="string">toothbrush</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ•°æ®é›†ä¸­éšä¾¿æ‰¾å¼ å›¾å’Œå…¶æ ‡æ³¨ä¿¡æ¯ï¼š</p>
<img src="/images/loading.png" data-original="/2024/07/23/YOLO-v8/1.jpg" class title="This is an image"> 
<p>è®­ç»ƒå®Œæ¯•åç”¨è®­ç»ƒåçš„æ¨¡å‹é¢„æµ‹è¿™å¼ å›¾ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result=model.predict(source=<span class="string">&#x27;F:\\python\\ultralytics-main\\ultralytics-main\\ultralytics\\models\\yolo\\detect\\datasets\\coco128\\images\\train2017\\000000000009.jpg&#x27;</span>,save=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>å¯å¾—ï¼š</p>
<img src="/images/loading.png" data-original="/2024/07/23/YOLO-v8/2.jpg" class title="This is an image">
<p>æ³¨æ„ï¼š</p>
<p>ç”¨å‘½ä»¤è¡Œå¾—åˆ°çš„æ•°æ®åœ¨æ–‡ä»¶æ ¹ç›®å½•çš„runsæ–‡ä»¶å¤¹ä¸‹ï¼Œè€Œpythonä»£ç å¾—åˆ°çš„æ•°æ®åœ¨ultralytics/runsä¸‹ </p>
<h1 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h1><p><a href="https://blog.csdn.net/qq_34717531/article/details/135016961">yolov8å®æˆ˜ç¬¬äºŒå¤©â€”â€”yolov8è®­ç»ƒè¿‡ç¨‹ã€ç»“æœåˆ†æï¼ˆä¿å§†å¼è§£è¯»ï¼‰_yolov8è·‘å‡ºæ¥çš„æŒ‡æ ‡æ€ä¹ˆçœ‹-CSDNåšå®¢</a></p>
]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ çš„ä¸€äº›æ¦‚å¿µ</title>
    <url>/2024/07/17/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-1/</url>
    <content><![CDATA[<h1 id="ç›‘ç£å­¦ä¹ "><a href="#ç›‘ç£å­¦ä¹ " class="headerlink" title="ç›‘ç£å­¦ä¹ "></a>ç›‘ç£å­¦ä¹ </h1><p>ç›‘ç£å­¦ä¹ æ˜¯ä»<strong>å¯¹åº”äº†æŸç§ç‰¹å®šæ ‡ç­¾çš„çš„è®­ç»ƒæ•°æ®ï¼ˆä¾‹å¦‚æˆ¿ä»·é¢„æµ‹ä¸­çš„è¾“å…¥é‡Œï¼Œä¸€ä¸ªé¢ç§¯å¯¹åº”ä¸€ä¸ªçš„ä»·æ ¼ï¼‰</strong>ä¸­å­¦ä¹ å¹¶å»ºç«‹æ¨¡å‹ï¼Œç„¶ååŸºäºè¯¥æ¨¡å‹é¢„æµ‹æœªçŸ¥çš„æ ·æœ¬ã€‚å…¶ä¸­ï¼Œæ¨¡å‹çš„<strong>è¾“å…¥æ˜¯æŸä¸ªæ ·æœ¬æ•°æ®çš„ç‰¹å¾</strong>ï¼Œè€Œå‡½æ•°çš„è¾“å‡ºæ˜¯<strong>ä¸è¯¥æ ·æœ¬ç›¸å¯¹åº”çš„æ ‡ç­¾</strong>ã€‚ç›‘ç£å­¦ä¹ ç®—æ³•åˆ™è´Ÿè´£é¢„æµ‹è¾“å…¥åˆ°è¾“å‡ºä¹‹é—´çš„<strong>æ˜ å°„å…³ç³»</strong></p>
<p>ä¾‹å¦‚ï¼šè¾“å…¥ä¸ºè¯­éŸ³ï¼Œè¾“å‡ºä¸ºæ–‡å­—ï¼Œåˆ™è¯¥ç›‘ç£å­¦ä¹ çš„åº”ç”¨å³ä¸ºè¯­éŸ³è¯†åˆ«</p>
<p>åˆ†ç±»ï¼š</p>
<ul>
<li>å›å½’ç®—æ³•(regression)</li>
<li>åˆ†ç±»ç®—æ³•(classfication)ã€‚åˆ†ç±»é¢„æµ‹çš„æ˜¯ä¸€ä¸ªå°çš„ã€æœ‰é™çš„ä¸€å¥—é˜è¿°ç±»åˆ«ï¼ˆè¾“å‡ºå¤§å¤šä¸ºç¦»æ•£ã€æœ‰é™çš„ï¼‰</li>
</ul>
<h2 id="çº¿æ€§å›å½’æ¨¡å‹ï¼ˆlinear-regressionï¼‰"><a href="#çº¿æ€§å›å½’æ¨¡å‹ï¼ˆlinear-regressionï¼‰" class="headerlink" title="çº¿æ€§å›å½’æ¨¡å‹ï¼ˆlinear regressionï¼‰"></a>çº¿æ€§å›å½’æ¨¡å‹ï¼ˆlinear regressionï¼‰</h2><ul>
<li>è®­ç»ƒé›†ï¼ˆtraining setï¼‰ï¼šç”¨äºè®­ç»ƒæ¨¡å‹çš„å·²çŸ¥æ•°æ®<strong>é›†åˆ</strong></li>
<li>è¾“å…¥å˜é‡x(input/feature)ï¼šè®­ç»ƒé›†ä¸­çš„è¾“å…¥</li>
<li>è¾“å‡ºå˜é‡y (output/target)ï¼šè®­ç»ƒé›†ä¸­çš„è¾“å‡º</li>
<li>æ¨¡å‹ï¼šç”¨äºé¢„æµ‹çš„å‡½æ•°  </li>
<li>é¢„æµ‹y-hat(^)ï¼ˆpredictionï¼‰ï¼šæ¨¡å‹çš„è¾“å‡ºï¼Œ<strong>æ³¨æ„åŒºåˆ†yå’Œy-hat</strong></li>
</ul>
<h3 id="ä»£ä»·å‡½æ•°ï¼ˆcost-functionï¼‰oræŸå¤±å‡½æ•°ï¼ˆlossï¼‰"><a href="#ä»£ä»·å‡½æ•°ï¼ˆcost-functionï¼‰oræŸå¤±å‡½æ•°ï¼ˆlossï¼‰" class="headerlink" title="ä»£ä»·å‡½æ•°ï¼ˆcost functionï¼‰oræŸå¤±å‡½æ•°ï¼ˆlossï¼‰"></a>ä»£ä»·å‡½æ•°ï¼ˆcost functionï¼‰oræŸå¤±å‡½æ•°ï¼ˆlossï¼‰</h3><p>ç”¨äºè¯„ä¼°æ¨¡å‹è¾“å‡ºå’Œè®­ç»ƒæ•°æ®çš„æ‹Ÿåˆç¨‹åº¦</p>
<p>å› æ­¤ä»£ä»·å‡½æ•°è¾“å‡ºåº”å°½å¯èƒ½<strong>å°</strong></p>
<h4 id="å¹³æ–¹è¯¯å·®ä»£ä»·å‡½æ•°ï¼ˆsquared-error-cost-functionï¼‰"><a href="#å¹³æ–¹è¯¯å·®ä»£ä»·å‡½æ•°ï¼ˆsquared-error-cost-functionï¼‰" class="headerlink" title="å¹³æ–¹è¯¯å·®ä»£ä»·å‡½æ•°ï¼ˆsquared error cost functionï¼‰"></a>å¹³æ–¹è¯¯å·®ä»£ä»·å‡½æ•°ï¼ˆsquared error cost functionï¼‰</h4><img src="/images/loading.png" data-original="/2024/07/17/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-1/2.JPG" class title="This is an image"> 
<p>æ¨¡å‹å‚æ•°wï¼Œbä¼šå½±å“ä»£ä»·å‡½æ•°çš„è¾“å‡ºï¼Œè€Œæ‰¾åˆ°å½“å‰è®­ç»ƒé›†ä¸‹ä½¿ä»£ä»·å‡½æ•°è¾“å‡ºæœ€å°çš„å‚æ•°wï¼Œbï¼Œå³å¯æ‰¾åˆ°å¯¹å½“å‰è®­ç»ƒé›†æœ€é€‚åˆçš„çº¿æ€§å›å½’æ¨¡å‹</p>
<img src="/images/loading.png" data-original="/2024/07/17/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-1/3.jpg" class title="This is an image"> 
<p><u>å¯¹äºä½¿ç”¨å¹³æ–¹è¯¯å·®ä»£ä»·å‡½æ•°çš„çº¿æ€§å›å½’ä¸­æ€»ä¼šå‡ºç°å¼“å½¢ã€åŠåºŠå½¢çš„å›¾åƒ</u></p>
<p>å³åªæœ‰ä¸€ä¸ªæœ€å°å€¼</p>
<h3 id="æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆgradient-descentï¼‰"><a href="#æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆgradient-descentï¼‰" class="headerlink" title="æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆgradient descentï¼‰"></a>æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆgradient descentï¼‰</h3><p>å¯ç”¨äºå°è¯•æœ€å°åŒ–ä»»ä½•å‡½æ•°</p>
<img src="/images/loading.png" data-original="/2024/07/17/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-1/4.jpg" class title="This is an image"> 
<ul>
<li><p>å‚æ•°wã€bå¿…é¡»åŒæ—¶æ›´æ–°ï¼Œè€Œä¸ç®—å°†æ›´æ–°åçš„wç”¨äºbçš„æ›´æ–°ä¸­</p>
</li>
<li><p>Î±ï¼šå­¦ä¹ ç‡ï¼Œå­¦ä¹ ç‡è¿‡å¤§ä¼šå¯¼è‡´ä»£ä»·å‡½æ•°æ— æ³•æ”¶æ•›ï¼Œç”šè‡³æ•ˆæœè¶Šæ¥è¶Šå·®</p>
</li>
<li><p>ç”±å¼å¯ä»¥çœ‹å‡ºï¼Œ<strong>æ¢¯åº¦ä¸‹é™ç®—æ³•åª èƒ½æ‰¾åˆ°ä»£ä»·å‡½æ•°ä¸­çš„æŸä¸ªæå°å€¼</strong>ï¼Œè€Œå¯¹äºæ‰¾åˆ°çš„æå°å€¼åˆ™ä¸wï¼Œbåœ¨æ¢¯åº¦ä¸‹é™ç®—æ³•ä¸­çš„åˆå§‹å€¼æœ‰å…³</p>
</li>
</ul>
<img src="/images/loading.png" data-original="/2024/07/17/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-1/5.jpg" class title="This is an image">
<p>ç”±äºä¸¤ä¸ªå‚æ•°çš„æ¢¯åº¦ä¸‹é™å¼æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œå› æ­¤å¯¹wæˆ–bçš„æ›´æ–°å¯ä»¥è§†ä½œï¼Œå¦ä¸€ä¸ªå‚æ•°å›ºå®šã€‚å†ç»“åˆæ¢¯åº¦ä¸‹é™ç®—å¼å¯ä»¥çœ‹å‡ºè¯¥ç®—æ³•å…¶å®æ˜¯åˆ©ç”¨äº†æ–œç‡çš„æ­£è´Ÿç‰¹æ€§è¿›è¡Œæ‰¾æå°å€¼çš„è¿‡ç¨‹ </p>
<h2 id="åˆ†ç±»ç®—æ³•"><a href="#åˆ†ç±»ç®—æ³•" class="headerlink" title="åˆ†ç±»ç®—æ³•"></a>åˆ†ç±»ç®—æ³•</h2><h3 id="é€»è¾‘å›å½’ç®—æ³•ï¼ˆéå›å½’ç®—æ³•ï¼‰logistic-regression"><a href="#é€»è¾‘å›å½’ç®—æ³•ï¼ˆéå›å½’ç®—æ³•ï¼‰logistic-regression" class="headerlink" title="é€»è¾‘å›å½’ç®—æ³•ï¼ˆéå›å½’ç®—æ³•ï¼‰logistic regression"></a>é€»è¾‘å›å½’ç®—æ³•ï¼ˆéå›å½’ç®—æ³•ï¼‰logistic regression</h3><h1 id="éç›‘ç£å­¦ä¹ "><a href="#éç›‘ç£å­¦ä¹ " class="headerlink" title="éç›‘ç£å­¦ä¹ "></a>éç›‘ç£å­¦ä¹ </h1><p>éç›‘ç£å­¦ä¹ ç®—æ³•çš„è¾“å…¥æ ·æœ¬<strong>ä¸å¯¹åº”æŸç§ç‰¹å®šçš„æ ‡ç­¾</strong>ï¼Œè€Œæ˜¯<strong>è‡ªåŠ¨</strong>åœ°ä»æ ·æœ¬ä¸­å­¦ä¹ ä»¥æ‰¾åˆ°æŸç§ç»“æ„ã€æ¨¡å¼â€¦â€¦</p>
<p>åˆ†ç±»ï¼š</p>
<ul>
<li>èšç±»ç®—æ³•(clustering)ï¼šä¾‹å¦‚ä»æ•°ä¸‡ç¯‡æ–‡ç« ä¸­æ‰¾åˆ°ç›¸ä¼¼è¯ï¼ˆ<strong>éç‰¹å®š</strong>ï¼‰å¹¶èšç±»</li>
<li>å¼‚å¸¸æ£€æµ‹ï¼ˆanomaly detectionï¼‰</li>
<li>é™ç»´ï¼ˆdimensionality reductionï¼‰ </li>
</ul>
<p>å´æ©è¾¾ã®å°ç»ƒä¹ ï¼šï¼ˆå…¶ä¸­ä¸¤ä¸ªä¸ºç›‘ç£ä¸¤ä¸ªä¸ºéç›‘ç£ï¼‰</p>
<img src="/images/loading.png" data-original="/2024/07/17/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-1/1.jpg" class title="This is an image"> 
<h1 id="jupyter-Notebook"><a href="#jupyter-Notebook" class="headerlink" title="jupyter Notebook"></a>jupyter Notebook</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python -m pip install --upgrade pip</span><br><span class="line">pip install jupyter notebook</span><br></pre></td></tr></table></figure>
<p>å‰©ä¸‹çš„ä¸€äº›æ“ä½œlab1æ–‡ä»¶å†™çš„å¾ˆæ¸…æ¥šï¼Œå¿˜äº†å°±å»çœ‹çœ‹</p>
<h1 id="å‚æ•°å½’ä¸€åŒ–ï¼ˆnormalizationï¼‰"><a href="#å‚æ•°å½’ä¸€åŒ–ï¼ˆnormalizationï¼‰" class="headerlink" title="å‚æ•°å½’ä¸€åŒ–ï¼ˆnormalizationï¼‰"></a>å‚æ•°å½’ä¸€åŒ–ï¼ˆnormalizationï¼‰</h1><p>ç”±äºå„å‚æ•°ï¼ˆç‰¹å¾ï¼‰çš„å˜åŒ–èŒƒå›´ã€å¤§å°ã€å•ä½ä¸åŒï¼Œéœ€è¦å…ˆè¿›è¡Œå½’ä¸€åŒ–å¤„ç†åæ‰è¾“å…¥åˆ°æ¨¡å‹</p>
<h2 id="å¹³å‡å½’ä¸€åŒ–ï¼ˆmean-normalizationï¼‰"><a href="#å¹³å‡å½’ä¸€åŒ–ï¼ˆmean-normalizationï¼‰" class="headerlink" title="å¹³å‡å½’ä¸€åŒ–ï¼ˆmean normalizationï¼‰"></a>å¹³å‡å½’ä¸€åŒ–ï¼ˆmean normalizationï¼‰</h2><h2 id="Z-score-normalization"><a href="#Z-score-normalization" class="headerlink" title="Z-score normalization"></a>Z-score normalization</h2>]]></content>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>è®ºæ–‡æ’°å†™</title>
    <url>/2024/07/12/%E8%AE%BA%E6%96%87%E6%92%B0%E5%86%99/</url>
    <content><![CDATA[<p>å…ˆå†™æˆä¸‡èƒ½çš„æ‰‹ç¨¿æ ¼å¼ï¼Œå†æ ¹æ®æœŸåˆŠæ ¼å¼æ”¹</p>
<h1 id="1ã€å°é¢-Title"><a href="#1ã€å°é¢-Title" class="headerlink" title="1ã€å°é¢ Title"></a>1ã€å°é¢ Title</h1><p>æ ¹æ®æ‰€æŠ•æœŸåˆŠç¡®å®šï¼Œé€šå¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ ‡é¢˜ï¼ŒåŠ ç²—<ul>
<li><strong>å¯åˆ©ç”¨SCIæ•°æ®åº“ä¸­é«˜è¢«å¼•è®ºæ–‡çš„é¢˜åï¼Œç ”ç©¶å¦‚ä½•å†™å¥½è‹±æ–‡é¢˜åã€‚</strong>é¢˜åé€šå¸¸ç”±åè¯æ€§çŸ­è¯­æ„æˆï¼Œå…¶ä¸­çš„åŠ¨è¯å¤šä»¥åˆ†è¯æˆ–åŠ¨åè¯å½¢å¼å‡ºç°ï¼Œç”¨è¯éœ€å‡†ç¡®ã€‚</li>
</ul>
</li>
<li>ä½œè€…ï¼Œç”¨ä¸Šè§’æ ‡ã€*å·æ ‡æ³¨é¡ºåºå’Œé€šè®¯ä½œè€…</li>
<li>æœºæ„<ul>
<li>é™¢ç³»+å­¦æ ¡+åŸå¸‚+åŸå¸‚é‚®ç¼–+å›½å®¶;è‹±æ–‡è¯‘åç»“å°¾å¤„åº”åŠ â€Chinaâ€</li>
</ul>
</li>
<li>è”ç³»æ–¹å¼</li>
<li>åˆ©ç›Šå†²çª</li>
</ul>
<h1 id="2ã€æ‘˜è¦-Abstract"><a href="#2ã€æ‘˜è¦-Abstract" class="headerlink" title="2ã€æ‘˜è¦ Abstract"></a>2ã€æ‘˜è¦ Abstract</h1><ul>
<li><p>å¼•è¨€ï¼ˆèƒŒæ™¯ï¼‰ï¼Œ1å¥è¯</p>
</li>
<li><p>æ•´ç¯‡æ–‡ç« åšçš„äº‹ï¼Œ1å¥è¯</p>
</li>
<li><p>åˆ›æ–°ç‚¹/è¿‡ç¨‹/å¦‚ä½•å®ç°ã€‚2-3å¥è¯</p>
</li>
<li><p>é‡è¦çš„å®šæ€§ç»“è®ºã€æ•°æ®ï¼Œä¸ç”¨éå¸¸è¯¦ç»†ï¼Œ2-3å¥</p>
</li>
<li><p>ç ”ç©¶æ„ä¹‰ï¼Œ1å¥</p>
</li>
<li><p>å…³é”®è¯</p>
</li>
</ul>
<h2 id="å›¾æ–‡æ‘˜è¦ï¼ˆTOCï¼‰"><a href="#å›¾æ–‡æ‘˜è¦ï¼ˆTOCï¼‰" class="headerlink" title="å›¾æ–‡æ‘˜è¦ï¼ˆTOCï¼‰"></a>å›¾æ–‡æ‘˜è¦ï¼ˆTOCï¼‰</h2><p>å’Œæ‘˜è¦æ”¾åœ¨ä¸€èµ·ï¼Œ<strong>æ€»ç»“æ€§ã€å¯è¯»æ€§</strong>è¦å¼ºï¼Œ<strong>å±•ç¤ºç ”ç©¶çš„ç‰¹è‰²ã€æ–¹æ³•</strong>ï¼Œå¯é€‚å½“è¿›è¡Œæ–‡å­—æ ‡æ³¨</p>
<h1 id="3ã€å¼•è¨€-Introduction"><a href="#3ã€å¼•è¨€-Introduction" class="headerlink" title="3ã€å¼•è¨€ Introduction"></a>3ã€å¼•è¨€ Introduction</h1><h2 id="ç¬¬ä¸€éƒ¨åˆ†"><a href="#ç¬¬ä¸€éƒ¨åˆ†" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†"></a>ç¬¬ä¸€éƒ¨åˆ†</h2><p>éœ€ç»™å‡º<strong>èƒŒæ™¯ä¿¡æ¯</strong>ï¼Œä»å¹¿æ³›åˆ°å…·ä½“åˆ†æç ”ç©¶å¯¹è±¡ï¼Œ<strong>æ¯ä¸ªè§‚ç‚¹éƒ½éœ€è¦å¼•ç”¨æ–‡çŒ®</strong>ï¼Œæœ€å¥½ä¸è¶…è¿‡3ç¯‡ï¼Œä¸”<strong>è¶Šæ–°è¶Šå¥½</strong></p>
<h2 id="ç¬¬äºŒéƒ¨åˆ†"><a href="#ç¬¬äºŒéƒ¨åˆ†" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†"></a>ç¬¬äºŒéƒ¨åˆ†</h2><p>é€šè¿‡åˆ†ææŸä¸ªå…·ä½“ç ”ç©¶å¯¹è±¡çš„ä¸è¶³<strong>å¼•å‡º</strong>æœ¬æ–‡ç ”ç©¶å†…å®¹çš„<strong>è¿«åˆ‡æ€§</strong></p>
<h2 id="ç¬¬ä¸‰éƒ¨åˆ†"><a href="#ç¬¬ä¸‰éƒ¨åˆ†" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†"></a>ç¬¬ä¸‰éƒ¨åˆ†</h2><p><strong><u>æ–‡çŒ®ç»¼è¿°æ®µï¼ˆé‡è¦ï¼‰</u></strong>ï¼Œå¯¹å„æ–‡çŒ®è¦æœ‰æ·±åˆ»ã€åˆ°ä½çš„ç†è§£ï¼ˆä¸å¯åªæ˜¯xxxä½¿ç”¨xxxåšäº†xxxï¼‰ï¼Œ<strong>ä¼˜ç¼ºç‚¹éƒ½è¦å†™å‡º</strong></p>
<h2 id="ç»“è®ºéƒ¨åˆ†"><a href="#ç»“è®ºéƒ¨åˆ†" class="headerlink" title="ç»“è®ºéƒ¨åˆ†"></a>ç»“è®ºéƒ¨åˆ†</h2><p>å¯¹ä¸Šæ–‡è¿›è¡Œæ€»ç»“ï¼Œæå‡ºé—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Œåˆ—å‡ºåˆ›æ–°ç‚¹ </p>
<h1 id="4ã€Materials-amp-Methods"><a href="#4ã€Materials-amp-Methods" class="headerlink" title="4ã€Materials &amp; Methods"></a>4ã€Materials &amp; Methods</h1><p>å¯å¤§è‡´åˆ†ä¸ºæ¨¡æ‹Ÿç±»å’Œå®éªŒç±»ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li>æ¨¡æ‹Ÿç±»ï¼š<ul>
<li>ç†è®ºæ–¹æ³•<ul>
<li>ç”¨åˆ°çš„å…¬å¼ã€ç†è®º</li>
</ul>
</li>
<li>æ¨¡å‹è¯´æ˜<ul>
<li>å‡½æ•°å†…å®¹ï¼Œå‚æ•°è¯´æ˜ï¼Œæ¨¡æ‹Ÿæ–¹æ³•</li>
</ul>
</li>
<li><strong>æ¨¡å‹éªŒè¯</strong></li>
<li>è¡¨è¯æ‰‹æ®µï¼ˆæ•°æ®ä¸ç»“è®ºï¼‰</li>
</ul>
</li>
<li>å®éªŒç±»ï¼š<ul>
<li>å®éªŒå¯¹è±¡<ul>
<li>ä»‹ç»å¯¹è±¡çš„ä¿¡æ¯ã€ä½œç”¨ã€åŸç†ç­‰</li>
</ul>
</li>
<li>å®éªŒä¾æ®ä¸è¿‡ç¨‹<ul>
<li>å¦‚ä½•å®éªŒã€è¯´æ˜å‚æ•°ã€æ§åˆ¶å‚æ•°çš„æ–¹æ³•ä¸ç»†èŠ‚</li>
</ul>
</li>
<li>è¡¨å¾æ‰‹æ®µï¼ˆæ•°æ®ä¸ç»“è®ºï¼‰</li>
</ul>
</li>
</ul>
<h1 id="5ã€Result-amp-discussion"><a href="#5ã€Result-amp-discussion" class="headerlink" title="5ã€Result &amp; discussion"></a>5ã€Result &amp; discussion</h1><ul>
<li>å¤šå¼•ç”¨å…¶ä»–æ–‡çŒ®çš„å®éªŒç»“æœä¸è‡ªå·±çš„è¿›è¡Œ<strong>åˆ†æå¯¹æ¯”</strong></li>
<li>è¿›è¡Œå›¾ç‰‡è¯´æ˜æ—¶é¿å…å¤ªå¤šå•å›¾ï¼Œå¯ä»¥<strong>æ•´åˆæˆä¸€å¼ å¤§å›¾è¿›è¡Œç»¼åˆè®¨è®º</strong></li>
</ul>
<h1 id="6ã€Conclusion"><a href="#6ã€Conclusion" class="headerlink" title="6ã€Conclusion"></a>6ã€Conclusion</h1><ul>
<li>æ€»ç»“åšè¿‡çš„å·¥ä½œï¼Œç»™å‡ºä¸€äº›è§„å¾‹å’Œæœ‰æ„ä¹‰æ•°æ®</li>
<li><strong>è¯´æ˜ç ”ç©¶æ„ä¹‰ä¸ä»·å€¼</strong></li>
<li>å±•æœ›</li>
</ul>
<h1 id="å…¶ä»–æ³¨æ„äº‹é¡¹"><a href="#å…¶ä»–æ³¨æ„äº‹é¡¹" class="headerlink" title="å…¶ä»–æ³¨æ„äº‹é¡¹"></a><em>å…¶ä»–æ³¨æ„äº‹é¡¹</em></h1><ul>
<li><p>æ€»ä½“è¦æ±‚</p>
<ul>
<li>8-12é¡µï¼Œ3000-6000è¯å·¦å³</li>
<li>é‡å¤ç‡æ ¹æ®æœŸåˆŠè€Œå®š</li>
</ul>
</li>
<li><p>æäº¤å‰è®°å¾—ç”Ÿæˆè¡Œå·ï¼Œå¸ƒå±€-è¡Œå·</p>
</li>
<li>å‚è€ƒæ–‡çŒ®å°½é‡é¥±æ»¡ä¸€ç‚¹ï¼Œè®°å¾—åˆ—DOIå·</li>
<li>æŠ•ç¨¿éœ€å‡†å¤‡ï¼ˆå…·ä½“éœ€æ ¹æ®å„æœŸåˆŠè¦æ±‚ï¼‰<ul>
<li>æ‰‹ç¨¿</li>
<li>Cover Letter</li>
<li>High Light</li>
<li>Support Information</li>
<li>åˆ©ç›Šå†²çªè¯´æ˜</li>
</ul>
</li>
<li>æœŸåˆŠåˆ†æç½‘ç«™<a href="https://www.letpub.com.cn/index.php?page=./journalapp">LetPub</a></li>
</ul>
<h1 id="ä¸€äº›å¸¸è¯†"><a href="#ä¸€äº›å¸¸è¯†" class="headerlink" title="ä¸€äº›å¸¸è¯†"></a><em>ä¸€äº›å¸¸è¯†</em></h1><p><strong>SCI</strong>(ç§‘å­¦å¼•æ–‡ç´¢å¼• )ã€<strong>EI</strong> (å·¥ç¨‹ç´¢å¼• )ã€<strong>ISTP</strong> (ç§‘æŠ€ä¼šè®®å½•ç´¢å¼• ) æ˜¯ä¸–ç•Œè‘—åçš„ä¸‰å¤§ç§‘æŠ€æ–‡çŒ®æ£€ç´¢ç³»ç»Ÿã€‚<strong>SCI</strong>è®ºæ–‡ (Science Citation Index)ï¼šåœ¨SCIæ‰€æ”¶å½•çš„ç§‘å­¦æœŸåˆŠä¸Šå‘è¡¨çš„è®ºæ–‡ã€‚</p>
<p>å½±å“å› å­ (impact factorï¼Œ<strong>IF</strong>)ï¼šæŒ‡çš„æ˜¯æŸä¸€æœŸåˆŠçš„æ–‡ç« åœ¨ç‰¹å®šå¹´ä»½æˆ–æ—¶æœŸè¢«å¼•ç”¨çš„é¢‘ç‡ï¼Œæ˜¯è¡¡é‡å­¦æœ¯æœŸåˆŠå½±å“åŠ›çš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ã€‚è€çš„è®¡ç®—æ–¹å¼ï¼šæŸæ‚å¿—2008å¹´çš„IFï¼š2006ã€ 2007ä¸¤å¹´è®ºæ–‡åœ¨2008å¹´è¢«å¼•æ€»æ•°ï¼Œé™¤ä»¥åœ¨2006ã€2007ä¸¤å¹´æ‰€å‘è®ºæ–‡æ€»æ•°ã€‚</p>
<ul>
<li>æ‚å¿—çš„IFæ„ˆé«˜ï¼Œ<strong>å“ç‰Œæ•ˆåº”æ„ˆå¤§</strong>ï¼Œå®¡ç¨¿æ›´ä¸¥æ ¼ï¼ŒæŠ•ç¨¿éš¾åº¦æ„ˆå¤§ï¼›</li>
<li>å‘è¡¨åœ¨IFé«˜çš„æ‚å¿—ï¼Œä¸è§å¾—å­¦æœ¯ä»·å€¼å°±å¤§ã€‚</li>
<li>å•ç¯‡å­¦æœ¯è®ºæ–‡çš„å¼•ç”¨é¢‘ç‡æ›´é‡è¦ã€‚å¼•ç”¨é¢‘ç‡æ„ˆé«˜ï¼Œå…¶å­¦æœ¯ä»·å€¼æ„ˆå¤§ã€‚</li>
<li>æ‰€å‘æ‚å¿—çš„IFé«˜ï¼Œå•ç¯‡çš„å¼•ç”¨é¢‘ç‡ä¹Ÿé«˜ï¼Œå°±æ˜¯æœ€æœ‰ä»·å€¼çš„è®ºæ–‡ï¼Ÿä¹Ÿä¸å°½ç„¶ï¼<strong>é«˜æ°´å¹³çš„è®ºæ–‡ä¸é«˜å½±å“å› å­è®ºæ–‡ä¸æ˜¯ä¸€å›äº‹</strong>ã€‚</li>
</ul>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»˜å›¾å·¥å…·</title>
    <url>/2024/07/11/origin/</url>
    <content><![CDATA[<h1 id="Origin"><a href="#Origin" class="headerlink" title="Origin"></a>Origin</h1><h2 id="ç•Œé¢"><a href="#ç•Œé¢" class="headerlink" title="ç•Œé¢"></a>ç•Œé¢</h2><ul>
<li>bookæ–‡ä»¶ï¼šä¿å­˜ç»˜å›¾æ‰€éœ€çš„æ•°æ®</li>
<li>graphï¼ˆå›¾ï¼‰æ–‡ä»¶ï¼š<ul>
<li>åˆ†ä¸ºä¸‰å±‚ï¼šåº•å±‚ç”»å¸ƒï¼›åæ ‡ç³»ï¼›å›¾çº¿ï¼ˆåœ¨åæ ‡ç³»ä¸Šè¿›è¡Œç»˜åˆ¶ï¼‰</li>
<li>å¯åœ¨ä¸€ä¸ªç”»å¸ƒä¸Šç»˜åˆ¶å¤šä¸ªåæ ‡ç³»ç­‰å›¾å½¢</li>
</ul>
</li>
</ul>
<h2 id="ç»˜å›¾æ­¥éª¤"><a href="#ç»˜å›¾æ­¥éª¤" class="headerlink" title="ç»˜å›¾æ­¥éª¤"></a>ç»˜å›¾æ­¥éª¤</h2><ul>
<li>åˆ›å»ºbookï¼Œå¯¼å…¥æ•°æ®</li>
<li>åˆ›å»ºgraphï¼Œè®¾ç½®ç”»å¸ƒå°ºå¯¸</li>
<li>è®¾ç½®åæ ‡ç³»æ ¼å¼ã€å°ºå¯¸</li>
<li>ç»˜åˆ¶å›¾çº¿å¹¶è®¾ç½®çº¿çš„æ ¼å¼</li>
<li>æ·»åŠ æ ‡é¢˜ã€å›¾ä¾‹</li>
</ul>
<h3 id="1ã€bookçš„ç›¸å…³æ“ä½œ"><a href="#1ã€bookçš„ç›¸å…³æ“ä½œ" class="headerlink" title="1ã€bookçš„ç›¸å…³æ“ä½œ"></a>1ã€bookçš„ç›¸å…³æ“ä½œ</h3><img src="/images/loading.png" data-original="/2024/07/11/origin/1.jpg" class title="This is an image"> 
<ul>
<li>ç‚¹å‡»è¡¨æ ¼å·¦ä¸Šæ å·¦ä¾§å¯æ·»åŠ æ–°åˆ—ï¼›å³ä¾§å¯é€‰ä¸­æ•´è¡¨</li>
<li>ç‚¹å‡»ç»˜å›¾ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©Xã€Yè½´è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œå…¶ä¸­Xåªæœ‰1ä¸ªï¼ŒYå¯ä»¥æœ‰å¤šä¸ªï¼ˆå…¨ä½“é€‰ä¸­åç»˜å›¾ä¼šè‡ªåŠ¨å°†æ‰€æœ‰Yç»˜åˆ¶ï¼‰</li>
</ul>
<h3 id="2ã€graphç›¸å…³æ“ä½œ"><a href="#2ã€graphç›¸å…³æ“ä½œ" class="headerlink" title="2ã€graphç›¸å…³æ“ä½œ"></a>2ã€graphç›¸å…³æ“ä½œ</h3><ul>
<li><p>graph<strong>åŒå‡»ç™½è‰²ç”»å¸ƒ</strong>å¯è°ƒèŠ‚é¡µé¢å°ºå¯¸ï¼›å³é”®-æ–°å›¾å±‚ï¼ˆè½´ï¼‰å¯æ·»åŠ æ–°åæ ‡ç³»</p>
</li>
<li><p>åŒå‡»<strong>åæ ‡ç³»ç©ºç™½å¤„</strong>å¯è°ƒæ•´<strong>åæ ‡ç³»å°ºå¯¸</strong>å’Œåœ¨ç”»å¸ƒä¸­çš„ä½ç½® </p>
</li>
<li><p>å¯ä»¥é€šè¿‡ å›¾-å›¾è¡¨ç»˜åˆ¶ï¼Œåœ¨ä¸åŒçš„åæ ‡ç³»ï¼ˆå›¾å±‚ï¼‰ä¸Šå¯¼å…¥ä¸åŒçš„bookæ•°æ®ï¼Œé…ç½®å¥½XYçš„æ•°æ®åç‚¹æ·»åŠ </p>
<img src="/images/loading.png" data-original="/2024/07/11/origin/2.jpg" class title="This is an image"> 
</li>
<li><p>åŒå‡»åæ ‡<strong>è½´</strong>å¯ä»¥é…ç½®<strong>åæ ‡è½´çš„å„ä¿¡æ¯</strong>ï¼Œ<strong>æ ‡é¢˜</strong>ç­‰ä¿¡æ¯åœ¨æ­¤å¤„è®¾ç½®</p>
</li>
<li><p>åŒå‡»<strong>å›¾çº¿</strong>å¯é…ç½®å…¶ä¿¡æ¯</p>
</li>
<li><p>é€‰ä¸­åæ ‡ç³»ï¼Œå·¦ä¾§å·¥å…·æ â€œé‡æ„å›¾ä¾‹â€å¯ä»¥æ·»åŠ ã€æ›´æ–°<strong>å›¾ä¾‹</strong></p>
</li>
</ul>
<h2 id="å…¶ä»–åŠŸèƒ½"><a href="#å…¶ä»–åŠŸèƒ½" class="headerlink" title="å…¶ä»–åŠŸèƒ½"></a>å…¶ä»–åŠŸèƒ½</h2><h3 id="é“¾æ¥å…¶ä»–æ–‡ä»¶"><a href="#é“¾æ¥å…¶ä»–æ–‡ä»¶" class="headerlink" title="é“¾æ¥å…¶ä»–æ–‡ä»¶"></a>é“¾æ¥å…¶ä»–æ–‡ä»¶</h3><p>å¯¼å…¥ç½‘ç»œä¸­ã€æœ¬åœ°å…¶ä»–æ ¼å¼çš„æ–‡ä»¶ã€æ•°æ®åº“ï¼š booké¡µé¢ä¸‹  æ•°æ®-é“¾æ¥åˆ°xx</p>
<h3 id="ç»˜åˆ¶åŸºçº¿ä¸ä¸º0çš„æŸ±çŠ¶å›¾"><a href="#ç»˜åˆ¶åŸºçº¿ä¸ä¸º0çš„æŸ±çŠ¶å›¾" class="headerlink" title="ç»˜åˆ¶åŸºçº¿ä¸ä¸º0çš„æŸ±çŠ¶å›¾"></a>ç»˜åˆ¶åŸºçº¿ä¸ä¸º0çš„æŸ±çŠ¶å›¾</h3><ul>
<li><strong>2020båçš„ç‰ˆæœ¬éœ€å…ˆï¼šè®¾ç½®-ç³»ç»Ÿå˜é‡ä¸­ä»¤CBBä¸º0</strong>ï¼Œæ‰ä¼šä½¿æŸ±çŠ¶å›¾èµ·ç‚¹ä¸ä¸ºé»˜è®¤å€¼</li>
<li>å»ºç«‹æ–°å›¾-åŒå‡»åæ ‡è½´-è½´çº¿å’Œåˆ»åº¦çº¿-ä¸‹è½´-çº¿æ¡-è½´ä½ç½®è®¾ç½®ä¸ºâ€œåœ¨ä½ç½®=â€</li>
<li>å¯¼å…¥æ•°æ®</li>
</ul>
<img src="/images/loading.png" data-original="/2024/07/11/origin/3.jpg" class title="This is an image"> 
<h3 id="å †å æŸ±çŠ¶å›¾"><a href="#å †å æŸ±çŠ¶å›¾" class="headerlink" title="å †å æŸ±çŠ¶å›¾"></a>å †å æŸ±çŠ¶å›¾</h3><p>è°ƒå‡ºè¦å †å çš„æŸ±çŠ¶å›¾ï¼Œåœ¨ï¼šå›¾-åˆæ ‡å›¾è¡¨ä¸­</p>
<ul>
<li>åœ¨æ’åˆ—è®¾ç½®ä¸­è®¾ç½®è¡Œæ•°åˆ—æ•°</li>
</ul>
<h3 id="æ·»åŠ å‚è€ƒçº¿"><a href="#æ·»åŠ å‚è€ƒçº¿" class="headerlink" title="æ·»åŠ å‚è€ƒçº¿"></a>æ·»åŠ å‚è€ƒçº¿</h3><p>åŒå‡»åæ ‡è½´ï¼Œå‚ç…§çº¿-é€‰æ‹©å‚ç›´oræ°´å¹³-ç»†èŠ‚-è¿½åŠ ï¼Œå¹¶è®¾ç½®æƒ³è¦çš„æ ·å¼</p>
<h1 id="Matlabç»˜å›¾ç›¸å…³å‡½æ•°"><a href="#Matlabç»˜å›¾ç›¸å…³å‡½æ•°" class="headerlink" title="Matlabç»˜å›¾ç›¸å…³å‡½æ•°"></a>Matlabç»˜å›¾ç›¸å…³å‡½æ•°</h1><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">ä½œç”¨/ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">axis</td>
<td style="text-align:center">äººå·¥é€‰æ‹©åæ ‡è½´å°ºå¯¸</td>
</tr>
<tr>
<td style="text-align:center">fplot</td>
<td style="text-align:center">æ™ºèƒ½ç»˜å›¾åŠŸèƒ½</td>
</tr>
<tr>
<td style="text-align:center">grid</td>
<td style="text-align:center">æ˜¾ç¤ºç½‘æ ¼çº¿</td>
</tr>
<tr>
<td style="text-align:center">plot</td>
<td style="text-align:center">ç”ŸæˆXYå›¾</td>
</tr>
<tr>
<td style="text-align:center">print</td>
<td style="text-align:center">æ‰“å°æˆ–ç»˜å›¾åˆ°æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">title</td>
<td style="text-align:center">æŠŠæ–‡å­—ç½®äºé¡¶éƒ¨</td>
</tr>
<tr>
<td style="text-align:center">xlabel</td>
<td style="text-align:center">å°†æ–‡æœ¬æ ‡ç­¾æ·»åŠ åˆ°xè½´</td>
</tr>
<tr>
<td style="text-align:center">ylabel</td>
<td style="text-align:center">å°†æ–‡æœ¬æ ‡ç­¾æ·»åŠ åˆ°yè½´</td>
</tr>
<tr>
<td style="text-align:center">axes</td>
<td style="text-align:center">åˆ›å»ºè½´å¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:center">close</td>
<td style="text-align:center">å…³é—­å½“å‰çš„ç»˜å›¾</td>
</tr>
<tr>
<td style="text-align:center">close all</td>
<td style="text-align:center">å…³é—­æ‰€æœ‰ç»˜å›¾</td>
</tr>
<tr>
<td style="text-align:center">figure</td>
<td style="text-align:center">æ‰“å¼€ä¸€ä¸ªæ–°çš„å›¾å½¢çª—å£</td>
</tr>
<tr>
<td style="text-align:center">gtext</td>
<td style="text-align:center">é€šè¿‡é¼ æ ‡åœ¨æŒ‡å®šä½ç½®æ”¾æ³¨æ–‡</td>
</tr>
<tr>
<td style="text-align:center">hold</td>
<td style="text-align:center">ä¿æŒå½“å‰å›¾å½¢</td>
</tr>
<tr>
<td style="text-align:center">legend</td>
<td style="text-align:center">é¼ æ ‡æ”¾ç½®å›¾ä¾‹</td>
</tr>
<tr>
<td style="text-align:center">refresh</td>
<td style="text-align:center">é‡æ–°ç»˜åˆ¶å½“å‰å›¾å½¢çª—å£</td>
</tr>
<tr>
<td style="text-align:center">set</td>
<td style="text-align:center">æŒ‡å®šå¯¹è±¡çš„å±æ€§ï¼Œå¦‚è½´</td>
</tr>
<tr>
<td style="text-align:center">subplot</td>
<td style="text-align:center">åœ¨å­çª—å£ä¸­åˆ›å»ºå›¾</td>
</tr>
<tr>
<td style="text-align:center">text</td>
<td style="text-align:center">åœ¨å›¾ä¸Šåšæ ‡è®°</td>
</tr>
<tr>
<td style="text-align:center">bar</td>
<td style="text-align:center">åˆ›å»ºæ¡å½¢å›¾</td>
</tr>
<tr>
<td style="text-align:center">loglog</td>
<td style="text-align:center">åˆ›å»ºåŒå¯¹æ•°å›¾</td>
</tr>
<tr>
<td style="text-align:center">polar</td>
<td style="text-align:center">åˆ›å»ºæåæ ‡å›¾åƒ</td>
</tr>
<tr>
<td style="text-align:center">semilogx</td>
<td style="text-align:center">åˆ›å»ºåŠå¯¹æ•°å›¾ï¼ˆå¯¹æ•°æ¨ªåæ ‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">semilogy</td>
<td style="text-align:center">åˆ›å»ºåŠå¯¹æ•°å›¾ï¼ˆå¯¹æ•°çºµåæ ‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">stairs</td>
<td style="text-align:center">åˆ›å»ºé˜¶æ¢¯å›¾</td>
</tr>
<tr>
<td style="text-align:center">stem</td>
<td style="text-align:center">åˆ›å»ºé’ˆçŠ¶å›¾</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">x=[<span class="number">-100</span>:<span class="number">5</span>:<span class="number">100</span>]; <span class="comment">%è®¾ç½®èŒƒå›´å’Œå¢é‡å€¼çš„æ–¹æ³•</span></span><br><span class="line">y1=x.^<span class="number">2</span>;</span><br><span class="line">y2=<span class="built_in">sin</span>(x);</span><br><span class="line">f=<span class="built_in">plot</span>(x,y1,<span class="string">&#x27;r--&#x27;</span>,x,y2,<span class="string">&#x27;k+&#x27;</span>),	<span class="comment">%çº¢è‰²è™šçº¿å’Œé»‘è‰²xå‹ç‚¹</span></span><br><span class="line">set(f(<span class="number">1</span>),<span class="string">&#x27;LineWidth&#x27;</span>,<span class="number">2</span>),set(f(<span class="number">2</span>),<span class="string">&#x27;LineWidth&#x27;</span>,<span class="number">2</span>),	<span class="comment">%è®¾ç½®ä¸¤çº¿çº¿å®½</span></span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>),	<span class="comment">%å›¾ä¾‹</span></span><br><span class="line">xlabel(<span class="string">&#x27;&#x27;</span>),ylabel(<span class="string">&#x27;&#x27;</span>),	<span class="comment">%xyè½´æ ‡ç­¾</span></span><br><span class="line">title(<span class="string">&#x27;&#x27;</span>),	<span class="comment">%æ ‡é¢˜</span></span><br><span class="line">grid on,  <span class="comment">%ç”Ÿæˆç½‘æ ¼çº¿</span></span><br><span class="line">axis square		<span class="comment">%ç”Ÿæˆæ­£æ–¹å½¢å›¾</span></span><br><span class="line"><span class="comment">%% </span></span><br><span class="line">axis ( [xmin xmax ymin ymax] ) <span class="comment">%åˆ»åº¦æœ€å¤§å€¼æœ€å°å€¼</span></span><br><span class="line">subplot(m, n, p)	<span class="comment">%ç”Ÿæˆå­å›¾ï¼Œmå’Œnæ˜¯ç»˜å›¾æ•°ç»„çš„è¡Œæ•°å’Œåˆ—æ•°ï¼Œè€ŒpæŒ‡å®šæ”¾ç½®ç‰¹å®šç»˜å›¾çš„ä½ç½®</span></span><br><span class="line">line([x1,x2],[y1,y2])	<span class="comment">%è¿æ¥ä¸¤ç‚¹</span></span><br></pre></td></tr></table></figure>
<p>é¢œè‰²åŠå…¶ä»£ç ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ä»£ç </th>
<th style="text-align:center">é¢œè‰²</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">ç™½è‰²</td>
</tr>
<tr>
<td style="text-align:center">k</td>
<td style="text-align:center">é»‘è‰²</td>
</tr>
<tr>
<td style="text-align:center">b</td>
<td style="text-align:center">è“è‰²</td>
</tr>
<tr>
<td style="text-align:center">r</td>
<td style="text-align:center">çº¢è‰²</td>
</tr>
<tr>
<td style="text-align:center">c</td>
<td style="text-align:center">é’è‰²</td>
</tr>
<tr>
<td style="text-align:center">g</td>
<td style="text-align:center">ç»¿è‰²</td>
</tr>
<tr>
<td style="text-align:center">m</td>
<td style="text-align:center">æ´‹çº¢è‰²</td>
</tr>
<tr>
<td style="text-align:center">y</td>
<td style="text-align:center">é»„è‰²</td>
</tr>
</tbody>
</table>
</div>
<p>çº¿æ€§ã€æ ‡è®°ç±»å‹ä»£ç ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ä»£ç </th>
<th style="text-align:center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">â€”</td>
<td style="text-align:center">è™šçº¿</td>
</tr>
<tr>
<td style="text-align:center">ï¼š</td>
<td style="text-align:center">ç‚¹çº¿</td>
</tr>
<tr>
<td style="text-align:center">-.</td>
<td style="text-align:center">ç‚¹åˆ’çº¿</td>
</tr>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">åŠ å·å½¢ç‚¹</td>
</tr>
<tr>
<td style="text-align:center">o</td>
<td style="text-align:center">ç©ºå¿ƒåœ†</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">æ˜Ÿå·</td>
</tr>
<tr>
<td style="text-align:center">x</td>
<td style="text-align:center">xå½¢ç‚¹</td>
</tr>
<tr>
<td style="text-align:center">s</td>
<td style="text-align:center">ç©ºå¿ƒæ­£æ–¹å½¢</td>
</tr>
<tr>
<td style="text-align:center">d</td>
<td style="text-align:center">ç©ºå¿ƒè±å½¢</td>
</tr>
<tr>
<td style="text-align:center">^v&gt;&lt;</td>
<td style="text-align:center">ç©ºå¿ƒä¸Šä¸‹å³å·¦ä¸‰è§’</td>
</tr>
<tr>
<td style="text-align:center">p</td>
<td style="text-align:center">ç©ºå¿ƒå…­è§’å½¢</td>
</tr>
</tbody>
</table>
</div>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·çš„å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>EndNote</title>
    <url>/2024/07/09/endnote/</url>
    <content><![CDATA[<p>æœ¬æ–‡å­¦ä¹ åŸºäº<a href="https://www.bilibili.com/video/BV1W4411b7GM/?p=3&amp;spm_id_from=pageDriver&amp;vd_source=063d3dd412d275078eaf18c62b5f21f6">endnoteä¸­ç§‘å¤§æ…•è¯¾_bilibili</a></p>
<h1 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h1><img src="/images/loading.png" data-original="/2024/07/09/endnote/1.jpg" class title="This is an image"> 
<ul>
<li>åœ¨çº¿æœç´¢å¯åœ¨ä¸åŒæ•°æ®åº“ä¸­æŒ‰éœ€æ£€ç´¢æ–‡çŒ®</li>
<li>Retrieve resultå¯é€‰æ£€ç´¢ç»“æœæ˜¾ç¤ºæ•°é‡</li>
<li>â•å¯å°†é€‰ä¸­æ–‡çŒ®å¤åˆ¶åˆ°æœ¬åœ°æ•°æ®åº“</li>
<li><u>æŸ¥æ‰¾å…¨æ–‡</u>å¯æœç´¢åŸæ–‡PDFï¼›ä¹Ÿå¯é€šè¿‡<u>æ‰“å¼€ç½‘å€</u>è¿›è¡Œæ£€ç´¢ã€‚PDFæœ€å¥½ç”¨endnoteå†…ç½®é˜…è¯»å™¨æ‰“å¼€</li>
<li>å¯åœ¨å·¦ä¾§æ å¯¹æ•°æ®åº“æ–‡çŒ®è¿›è¡Œåˆ†ç»„ï¼Œç›´æ¥æ‹–æ‹½å°±å¯</li>
</ul>
<h1 id="åœ¨wordä¸­ä½¿ç”¨"><a href="#åœ¨wordä¸­ä½¿ç”¨" class="headerlink" title="åœ¨wordä¸­ä½¿ç”¨"></a>åœ¨wordä¸­ä½¿ç”¨</h1><h2 id="endnoteå…³è”word"><a href="#endnoteå…³è”word" class="headerlink" title="endnoteå…³è”word"></a>endnoteå…³è”word</h2><ul>
<li><p>åœ¨endnoteå®‰è£…è·¯å¾„ä¸‹è¿è¡Œconfigure endnoteå¹¶å‹¾é€‰ç¬¬ä¸€ä¸ªé€‰é¡¹</p>
</li>
<li><p>æ–‡ä»¶-é€‰é¡¹-åŠ è½½é¡¹-ç®¡ç†COMåŠ è½½é¡¹ è½¬åˆ°-å‹¾é€‰Endnote cite while you writeï¼Œå¦‚æœå‡ºç°<strong>æŠ¥é”™</strong>ï¼š</p>
<ul>
<li><p>æ£€æŸ¥windowç³»ç»Ÿä½æ•°ï¼ˆä¸€èˆ¬ä¸º64ï¼‰ï¼Œåœ¨endnoteå®‰è£…è·¯å¾„ä¸‹çš„Product-Support/CWYWä¸­å°†..x64.datæ”¹ä¸ºå‹ç¼©åŒ…æ ¼å¼åç¼€å¹¶è§£å‹ï¼Œå°†è§£å‹åçš„5ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°wordçš„endnoteåŠ è½½é¡¹åœ°å€è¿›è¡Œæ›¿æ¢</p>
</li>
<li><p>å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œæ£€æŸ¥<strong>word</strong>æ˜¯å¦ä¸º64ä½ï¼Œå¦‚æœwinç³»ç»Ÿä¸º64ä½è€Œwordä¸º32ä½å»ºè®®<strong>é‡è£…ä¸€ä¸ª64ä½officeï¼ˆ</strong>æœ¬äººåŸä¸º32ä½office2019ï¼Œå…¨ç½‘çš„æ–¹æ³•éƒ½è¯•è¿‡äº†è¿˜æ˜¯ä¸è¡Œï¼Œé‡è£…ä¸º64ä½office2021åå°±æ­£å¸¸äº†ï¼Œä½¿ç”¨çš„æ˜¯endnote 21ï¼‰</p>
</li>
<li><p>å…¶ä»–é—®é¢˜å¯å‚è€ƒï¼š<a href="https://blog.csdn.net/weixin_45936544/article/details/134223088?spm=1001.2014.3001.5506">Word æ‰¾ä¸åˆ° Endnoteé€‰é¡¹_wordåŠ è½½é¡¹é‡Œæ‰¾ä¸åˆ°endnote-CSDNåšå®¢</a></p>
<p><a href="https://www.zhihu.com/question/340094831/answer/1057369528"> word2019ä¸endnoteå¦‚ä½•å…³è”ï¼Ÿ - çŸ¥ä¹ (zhihu.com)</a></p>
<p>å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½ä¸è¡ŒçœŸçš„å»ºè®®ç«‹åˆ»é‡è£…ä¸€ä¸ª64ä½officeï¼Œåæ­£æˆ‘æ˜¯è¢«æŠ˜ç£¨äº†ä¸€æ•´å¤©çš„ğŸ˜¥</p>
<p>officeå¸è½½å»ºè®®ä½¿ç”¨å¾®è½¯å®˜æ–¹çš„å½»åº•å¸è½½ï¼ˆæ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚20minå·¦å³ï¼‰ï¼š<a href="https://support.microsoft.com/zh-cn/office/ä»-pc-å¸è½½-office-9dd49b83-264a-477a-8fcc-2fdf5dbf61d8?ui=zh-cn&amp;rs=zh-cn&amp;ad=cn">å¸è½½ Office -Microsoft æ”¯æŒ</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="åœ¨wordä¸­æ’å…¥å‚è€ƒæ–‡çŒ®"><a href="#åœ¨wordä¸­æ’å…¥å‚è€ƒæ–‡çŒ®" class="headerlink" title="åœ¨wordä¸­æ’å…¥å‚è€ƒæ–‡çŒ®"></a>åœ¨wordä¸­æ’å…¥å‚è€ƒæ–‡çŒ®</h2><img src="/images/loading.png" data-original="/2024/07/09/endnote/2.jpg" class title="This is an image"> 
<ul>
<li>å¯åœ¨<strong>wordä¸­æ’å…¥</strong>endnoteä¸­é€‰ä¸­çš„æ–‡çŒ®</li>
<li>ä¹Ÿå¯ä»¥<strong>åœ¨endnoteä¸­</strong>æœ‰ä¸ªå¼•å·å›¾æ ‡åœ¨æŒ‡å®šæ–‡æ¡£ä¸­æ’å…¥æ–‡çŒ®</li>
<li>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨endnoteä¸­æŠŠç›¸å…³æ–‡çŒ®<strong>æ‹–</strong>è¿›wordï¼ˆéœ€æ‰“å¼€wordä¸­çš„å³æ—¶æ ¼å¼åŒ–ï¼‰</li>
<li>åœ¨æ ·å¼ä¸­å¯ä»¥æ ¹æ®è¦æ±‚é€‰æ‹©ä¸åŒçš„<strong>å¼•ç”¨æ ¼å¼</strong></li>
<li>åœ¨æ’å…¥å¼•æ–‡ä¸­å¯ä»¥æ’å…¥<strong>ä½œè€…å</strong>ç­‰ä¿¡æ¯ï¼ˆéœ€endnoteè´¦å·ï¼‰</li>
<li>åœ¨â€œç¼–è¾‘ï¼†ç®¡ç†å¼•æ–‡â€ä¸­å¯ä»¥<strong>ç§»é™¤å¼•æ–‡</strong></li>
<li>æŠ•ç¨¿å‰éœ€å°†è®ºæ–‡åœ¨â€œè½¬æ¢å¼•æ–‡å’Œå‚è€ƒæ–‡çŒ®â€ä¸­è½¬æ¢ä¸ºçº¯æ–‡æœ¬</li>
</ul>
<h2 id="ä¿®æ”¹å¼•æ–‡æ ·å¼"><a href="#ä¿®æ”¹å¼•æ–‡æ ·å¼" class="headerlink" title="ä¿®æ”¹å¼•æ–‡æ ·å¼"></a>ä¿®æ”¹å¼•æ–‡æ ·å¼</h2><p>endnote21 ä¸­ å·¥å…·-è¾“å‡ºæ ·å¼-ç¼–è¾‘xx oræ–°æ ·å¼</p>
<h2 id="ä½¿ç”¨è®ºæ–‡æ¨¡æ¿"><a href="#ä½¿ç”¨è®ºæ–‡æ¨¡æ¿" class="headerlink" title="ä½¿ç”¨è®ºæ–‡æ¨¡æ¿"></a>ä½¿ç”¨è®ºæ–‡æ¨¡æ¿</h2><p>endnote21 ä¸­ å·¥å…·-æ ¼å¼åŒ–è®ºæ–‡-æ ¼å¼è®ºæ–‡</p>
<h2 id="æ’å›¾"><a href="#æ’å›¾" class="headerlink" title="æ’å›¾"></a>æ’å›¾</h2><p>ä½¿ç”¨endnoteæ’å›¾å¯ä»¥è‡ªåŠ¨æ ¹æ®é€‰æ‹©çš„æ ·å¼è¿›è¡Œæ’ç‰ˆ</p>
<ul>
<li>æ–°å»ºæ–‡çŒ®-reference typeè®¾ç½®ä¸ºfigure</li>
<li>titleè®¾ç½®è¯¥æ–‡çŒ®åå­—</li>
<li>captionè®¾ç½®æ‰¹æ³¨</li>
<li>figureé€‰æ‹©å›¾ç‰‡</li>
</ul>
<h1 id="å°†æ–‡çŒ®å¯¼å…¥endnote"><a href="#å°†æ–‡çŒ®å¯¼å…¥endnote" class="headerlink" title="å°†æ–‡çŒ®å¯¼å…¥endnote"></a>å°†æ–‡çŒ®å¯¼å…¥endnote</h1><h2 id="1ã€ç›´æ¥æ£€ç´¢"><a href="#1ã€ç›´æ¥æ£€ç´¢" class="headerlink" title="1ã€ç›´æ¥æ£€ç´¢"></a>1ã€ç›´æ¥æ£€ç´¢</h2><p>åœ¨endnoteä¸­åœ¨ä¸åŒæ•°æ®åº“ä¸­è¿›è¡Œåœ¨çº¿æœç´¢ï¼Œéœ€æ³¨æ„å‡ ç‚¹</p>
<ul>
<li>web of scienceçš„å¹´ä»½æœç´¢å¯é€šè¿‡20xx-20xxè¿›è¡ŒåŒºé—´æœç´¢ï¼›Pubä¸º20xx:20xx</li>
<li>å¯ä»¥ç‚¹å‡»â•é€‰æ‹©æ›´å¤šæ•°æ®åº“</li>
</ul>
<h2 id="2ã€ç½‘ç«™è¾“å‡º"><a href="#2ã€ç½‘ç«™è¾“å‡º" class="headerlink" title="2ã€ç½‘ç«™è¾“å‡º"></a>2ã€ç½‘ç«™è¾“å‡º</h2><ul>
<li><p>web of science</p>
<p>é€šè¿‡ç½‘ç«™çš„save to endnote desktopï¼ˆéœ€æ ¹æ®ç½‘ç«™å…·ä½“æƒ…å†µï¼‰ </p>
<p>web of scienceå¯å…ˆå°†é€‰ä¸­æ–‡çŒ®Add to Marked Listï¼Œå†å¯¼å‡ºè‡³endnote</p>
</li>
<li><p>Scopus</p>
<p>export-è¾“å‡ºä¸ºRISæ ¼å¼</p>
</li>
<li><p>çŸ¥ç½‘</p>
<p><em>å¯¼å‡ºçš„txtåœ¨endnoteä¸­è¿›è¡Œå¯¼å…¥ï¼Œå¯¼å…¥é€‰é¡¹ä¸ºendnote import</em>ï¼ˆç°åœ¨çŸ¥ç½‘å¯ä»¥ç›´æ¥å¯¼å‡ºendnoteå¯è¯†åˆ«çš„æ•°æ®åº“æ ¼å¼ï¼‰</p>
</li>
</ul>
<h2 id="3ã€PDFå¯¼å…¥"><a href="#3ã€PDFå¯¼å…¥" class="headerlink" title="3ã€PDFå¯¼å…¥"></a>3ã€PDFå¯¼å…¥</h2><p>éœ€åœ¨æœ‰ç½‘ç»œæ—¶ä½¿ç”¨</p>
<p>å¦‚æœæ²¡æœ‰æˆåŠŸè¯†åˆ«pdfä¿¡æ¯å¯èƒ½æ˜¯æ–‡çŒ®æ— doiå·ï¼Œå¯ä»¥å°è¯•æ”¹å+å³é”® æŸ¥æ‰¾æ–‡çŒ®æ›´æ–°</p>
<p>å¯åœ¨endnoteé¦–é€‰é¡¹ï¼ˆpreferenceï¼‰ä¸­è®¾ç½®pdfè‡ªåŠ¨å¯¼å…¥æ–‡ä»¶å¤¹</p>
<h2 id="4ã€æ‰‹åŠ¨è¾“å…¥å’Œè½¯ä»¶ä¹‹é—´çš„äº¤äº’"><a href="#4ã€æ‰‹åŠ¨è¾“å…¥å’Œè½¯ä»¶ä¹‹é—´çš„äº¤äº’" class="headerlink" title="4ã€æ‰‹åŠ¨è¾“å…¥å’Œè½¯ä»¶ä¹‹é—´çš„äº¤äº’"></a>4ã€æ‰‹åŠ¨è¾“å…¥å’Œè½¯ä»¶ä¹‹é—´çš„äº¤äº’</h2><ul>
<li><p>æ‰‹åŠ¨è¾“å…¥</p>
<p>ctrl+Nï¼ˆå¼•ç”¨æŒ‰é’®æ—è¾¹çš„æŒ‰é’®ï¼‰ </p>
</li>
<li><p>endnoteæ•°æ®åº“å¯¼å‡ºåˆ°å…¶ä»–è½¯ä»¶ï¼Œæ ¼å¼ä¸€èˆ¬ä¸ºRIS</p>
<p>ä¸€ç‚¹å°±é—ªé€€æğŸ˜‹ï¼Œè¿™ç›—ç‰ˆç”¨ä¸äº†ä¸€ç‚¹</p>
</li>
</ul>
<h1 id="endnoteçš„ä¸€äº›åŠŸèƒ½"><a href="#endnoteçš„ä¸€äº›åŠŸèƒ½" class="headerlink" title="endnoteçš„ä¸€äº›åŠŸèƒ½"></a>endnoteçš„ä¸€äº›åŠŸèƒ½</h1><ul>
<li><p><strong>æŸ¥æ‰¾é‡å¤æ–‡çŒ®</strong></p>
<p>endnote21ï¼šæ•°æ®åº“-æŸ¥æ‰¾é‡å¤é¡¹</p>
</li>
<li><p><strong>åˆ†ç»„/Tags/Label</strong></p>
<ul>
<li><p>åˆ†ç»„ï¼šæ‰‹åŠ¨æ‹–åŠ¨ï¼›åˆ›å»ºå¯ç­›é€‰çš„æ™ºèƒ½ç»„ï¼›æ ¹æ®å·²æœ‰ç»„å†æ¬¡ç­›é€‰æ–°ç»„ï¼›ç»„é›†ä¸‹å¯ä»¥å†åˆ›ç»„</p>
<p>å¯ä»¥é€šè¿‡ç»„é›†(group set)+ç»„(group)çš„æ–¹å¼å¯¹æ–‡çŒ®è¿›è¡Œ<strong>åˆ†çº§ç®¡ç†</strong></p>
</li>
<li><p>tagï¼šåˆ›å»ºåå¯åœ¨æ¯ç¯‡æ–‡çŒ®çš„summaryä¸‹ç®¡ç†tagï¼Œä¸»è¦ä½œä¸ºåˆ†ç»„çš„è¡¥å……</p>
<p>å¯ä»¥å°†æŸæ–‡çŒ®çš„å…·ä½“ç±»å‹ã€æœŸåˆŠç­‰å…ƒç´ é€šè¿‡tagè¿›è¡Œæ ‡è®°ï¼Œ<strong>tagçš„é¢œè‰²æœ‰é™</strong></p>
</li>
<li><p>Label:ç¼–è¾‘æ–‡çŒ®ä¸­å¯åœ¨Labelä¸­æ·»åŠ å¯¹æ”¹æ–‡çŒ®çš„ä¸€äº›<strong>æ ‡æ³¨</strong></p>
</li>
</ul>
</li>
<li><p><strong>åˆ†äº«</strong></p>
<p>ç”¨æ ¼å¼åŒ–å¤åˆ¶ï¼›é‚®ä»¶å‘é€ï¼ˆç”¨çš„officeï¼‰ï¼›å¯å¯¼å‡ºä¸ºtxtã€ç½‘é¡µæ ¼å¼</p>
</li>
<li><p><strong>æ–‡çŒ®åˆ†æ</strong></p>
<p>å·¥å…·-å­¦ç§‘æ–‡çŒ®ï¼ŒæŒ‰ç…§ä½œè€…ã€å¹´ä»½ã€æœŸåˆŠè¿›è¡Œæ•°é‡åˆ†æ</p>
</li>
</ul>
<h1 id="é«˜æ•ˆé˜…è¯»æ–‡çŒ®"><a href="#é«˜æ•ˆé˜…è¯»æ–‡çŒ®" class="headerlink" title="é«˜æ•ˆé˜…è¯»æ–‡çŒ®"></a>é«˜æ•ˆé˜…è¯»æ–‡çŒ®</h1><ul>
<li>å…ˆé˜…è¯»æ ‡é¢˜ï¼Œé€šè¿‡ratingå…ˆå¤§æ¦‚ç­›é€‰ä¸€é</li>
<li>æµè§ˆæ‘˜è¦ï¼Œå†é€šè¿‡ratingç­›é€‰ä¸€é</li>
</ul>
<h1 id="æ–‡çŒ®æ£€ç´¢æŠ€å·§"><a href="#æ–‡çŒ®æ£€ç´¢æŠ€å·§" class="headerlink" title="æ–‡çŒ®æ£€ç´¢æŠ€å·§"></a>æ–‡çŒ®æ£€ç´¢æŠ€å·§</h1><ul>
<li>å…ˆé€šè¿‡å„ç½‘ç«™æ‰¾åˆ°ç›¸å…³ä¸“ä¸šåè¯ï¼Œä¸€ç§ä¸œè¥¿å¯èƒ½å¯¹åº”äº†<strong>å¤šä¸ªè¯ç»„</strong><a href="https://dict.cnki.net/index">CNKIç¿»è¯‘åŠ©æ‰‹</a></li>
<li>å¯é€šè¿‡å•è¯åŠ *æ£€ç´¢è¯¥å•è¯æ‰€æœ‰å½¢å¼ï¼ˆå¤æ•°ã€å¤§å°å†™â€¦ï¼‰</li>
<li>å¯ä»¥ä»æ ‡é¢˜-&gt;ä¸»é¢˜è¿›è¡Œæ£€ç´¢</li>
</ul>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·çš„å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>éŸ³è‰²é“¾å­¦ä¹ </title>
    <url>/2024/06/30/%E9%9F%B3%E8%89%B2%E9%93%BE%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="ç®±ä½“AMP"><a href="#ç®±ä½“AMP" class="headerlink" title="ç®±ä½“AMP"></a>ç®±ä½“AMP</h1>]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>ROSä¸­çš„å¸¸ç”¨ç»„ä»¶</title>
    <url>/2024/04/18/ROS-3/</url>
    <content><![CDATA[<h1 id="1-launchå¯åŠ¨æ–‡ä»¶"><a href="#1-launchå¯åŠ¨æ–‡ä»¶" class="headerlink" title="1.launchå¯åŠ¨æ–‡ä»¶"></a>1.launchå¯åŠ¨æ–‡ä»¶</h1><h2 id="åŸºæœ¬å…ƒç´ "><a href="#åŸºæœ¬å…ƒç´ " class="headerlink" title="åŸºæœ¬å…ƒç´ "></a>åŸºæœ¬å…ƒç´ </h2><p>å¯åŠ¨æ–‡ä»¶Launch Fileæ˜¯ROSä¸­ä¸€ç§åŒæ—¶å¯åŠ¨å¤šä¸ªèŠ‚ç‚¹çš„é€”å¾„ã€‚å¯ä»¥è‡ªåŠ¨å¯åŠ¨ROS Masterå¹¶å®ç°å¤šä¸ªèŠ‚ç‚¹çš„å„ç§é…ç½®ï¼Œä¸ºå¤šä¸ªèŠ‚ç‚¹çš„æ“ä½œæä¾›äº†å¾ˆå¤§ä¾¿åˆ©ã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„.launchæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Turtlesim Nodeï¼Œæ³¨æ„æ³¨é‡Šçš„æ ¼å¼--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sim&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;teleop&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Axes --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;scale_linear&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;double&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;scale_angular&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;double&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;learning_tf&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_tf_broadcaster&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">args</span>=<span class="string">&quot;/turtle1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;turtle1_tf_broadcaster&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;learning_tf&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_tf_broadcaster&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">args</span>=<span class="string">&quot;/turtle2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;turtle2_tf_broadcaster&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><p><code>&lt;launch&gt;...&lt;/launch&gt;</code>ä¸ºXMLè¯­æ³•ä¸­çš„æ ¹å…ƒç´ ï¼ŒXMLè¯­æ³•è¦æ±‚æ¯ä¸ªæ–‡ä»¶å¿…é¡»åŒ…å«ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œæ–‡ä»¶ä¸­å…¶ä»–å†…å®¹éƒ½å¿…é¡»åŒ…å«åœ¨è¯¥æ ‡ç­¾å†…ã€‚</p>
</li>
<li><p><code>&lt;node.../&gt;</code>ä¸ºå¯åŠ¨ROSèŠ‚ç‚¹çš„æ ‡ç­¾å…ƒç´ ï¼Œç”±ä¸Šè¿°å®šä¹‰è§„åˆ™å¯çŸ¥ï¼Œåœ¨launchæ–‡ä»¶ä¸­å¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦ä¸‰ä¸ªå±æ€§ï¼š</p>
<ul>
<li>pkgï¼šè¯¥èŠ‚ç‚¹æ‰€åœ¨<strong>åŠŸèƒ½åŒ…</strong>çš„åå­—</li>
<li>typeï¼šè¯¥èŠ‚ç‚¹çš„<strong>å¯æ‰§è¡Œæ–‡ä»¶</strong>åå­—ï¼Œå¯æ‰§è¡Œæ–‡ä»¶æ˜¯åœ¨ä¸ºCMake_Listsä¸­é€šè¿‡add_executableå®šä¹‰çš„</li>
<li>nameï¼šç”¨äºå®šä¹‰èŠ‚ç‚¹è¿è¡Œä¸­çš„åå­—ï¼Œ<strong>ä¼šè¦†ç›–æ‰init()ä¸­å®šä¹‰çš„èŠ‚ç‚¹åå­—</strong></li>
</ul>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰å¯èƒ½ç”¨åˆ°ï¼š</p>
<ul>
<li>output=â€screenâ€ï¼šå°†èŠ‚ç‚¹çš„æ ‡å‡†è¾“å‡ºæ‰“å°åˆ°ç»ˆç«¯å±å¹•</li>
<li>respawn=â€tureâ€ï¼šå½“èŠ‚ç‚¹åœæ­¢æ—¶ä¼šè‡ªåŠ¨é‡å¯ï¼Œé»˜è®¤false</li>
<li>require=â€tureâ€ï¼šå¿…è¦èŠ‚ç‚¹ï¼Œå½“è¯¥èŠ‚ç‚¹ç»ˆæ­¢æ—¶launchä¸­çš„å…¶ä»–èŠ‚ç‚¹ä¹Ÿç»ˆæ­¢</li>
<li>ns=â€namespaceâ€ï¼šä¸ºèŠ‚ç‚¹å†…çš„ç›¸å¯¹åç§°æ·»åŠ å‘½åç©ºé—´å‰ç¼€</li>
<li>args=â€argumentsâ€ï¼šèŠ‚ç‚¹éœ€è¦çš„è¾“å…¥å‚æ•°</li>
</ul>
</li>
</ul>
<h2 id="å‚æ•°è®¾ç½®"><a href="#å‚æ•°è®¾ç½®" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h2><p>å˜é‡å£°æ˜ï¼Œç”±paramå’Œargä¸¤ç§æ ‡ç­¾å…ƒç´ ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ä¸åŒçš„</p>
<ul>
<li><p><code>&lt;param.../&gt;</code>ï¼šè®¾ç½®rosä¸­è¿è¡Œçš„å‚æ•°ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;scale_linear&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;double&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½œç”¨æ˜¾è€Œæ˜“è§ï¼šåä¸ºscale_linearçš„å‚æ•°ï¼ˆparameterï¼‰çš„å€¼è¢«è®¾ç½®ä¸ºäº†2ï¼Œç±»å‹ä¸ºdouble</p>
</li>
<li><p><code>&lt;arg.../&gt;</code>è®¾ç½®ä»…é™äºlaunchå†…éƒ¨ä½¿ç”¨çš„å±€éƒ¨å˜é‡</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;aca&quot;</span> <span class="attr">default</span>=<span class="string">&quot;value&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="é‡æ˜ å°„æœºåˆ¶ï¼ˆé‡è¦ï¼‰"><a href="#é‡æ˜ å°„æœºåˆ¶ï¼ˆé‡è¦ï¼‰" class="headerlink" title="é‡æ˜ å°„æœºåˆ¶ï¼ˆé‡è¦ï¼‰"></a>é‡æ˜ å°„æœºåˆ¶ï¼ˆé‡è¦ï¼‰</h2><p>ROSæä¾›ä¸€ç§é‡æ˜ å°„æœºåˆ¶ï¼Œä¾¿äºå°†ç¤¾åŒºä¸­å…¶ä»–äººçš„åŠŸèƒ½åŒ…æä¾›çš„æ¥å£è¿›è¡Œé‡æ˜ å°„ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ã€‚</p>
<p>ä¾‹å¦‚ä¹Œé¾Ÿæ§åˆ¶èŠ‚ç‚¹å‘å¸ƒçš„æ§åˆ¶è¯é¢˜å¯èƒ½æ˜¯/turtlebot/cmd_velï¼Œä½†æ˜¯æˆ‘ä»¬æœºå™¨äººè®¢é˜…çš„è¯é¢˜æ˜¯/cmd_velï¼Œæ­¤æ—¶åªéœ€è¦é‡æ˜ å°„ï¼Œæˆ‘ä»¬çš„æœºå™¨äººå°±èƒ½æ”¶åˆ°è¯é¢˜æ¶ˆæ¯äº†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;/turtlebot/cmd_vel&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/com_vel&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="2-TFå˜æ¢"><a href="#2-TFå˜æ¢" class="headerlink" title="2.TFå˜æ¢"></a>2.TFå˜æ¢</h1><p>TFåŠŸèƒ½åŒ…ä½¿ç”¨æ ‘å½¢æ•°æ®ç»“æ„ï¼Œå¯ä»¥è®©ç”¨æˆ·è·Ÿè¸ªå¤šä¸ªåæ ‡ç³»ï¼Œä»¥æ—¶é—´ä¸ºè½´è·Ÿè¸ªè¿™äº›åæ ‡ç³»ï¼ˆé»˜è®¤10så†…ï¼‰ï¼Œå¹¶å…è®¸å¼€å‘è€…è¯·æ±‚å¦‚ä¸‹æ•°æ®ï¼š</p>
<ul>
<li>5så‰ï¼Œæœºå™¨äººå¤´éƒ¨åæ ‡ç³»ç›¸å¯¹äºå…¨å±€åæ ‡ç³»æ˜¯æ€æ ·çš„ï¼Ÿ</li>
<li>æœºå™¨äººå¤¹å–çš„ç‰©ä½“ç›¸å¯¹äºæœºå™¨äººä¸­å¿ƒåæ ‡ç³»çš„ä½ç½®åœ¨å“ªï¼Ÿ</li>
<li>æœºå™¨äººä¸­å¿ƒåæ ‡ç³»ç›¸å¯¹äºå…¨å±€åæ ‡ç³»çš„ä½ç½®åœ¨å“ªï¼Ÿ</li>
</ul>
<p>æƒ³è¦ä½¿ç”¨TFåŠŸèƒ½åŒ…ï¼Œæ€»ä½“æ¥è¯´è¦ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>ç›‘å¬TFå˜æ¢ï¼Œæ¥æ”¶å¹¶ç¼“å­˜ç³»ç»Ÿä¸­å‘å¸ƒçš„æ‰€æœ‰åæ ‡æ•°æ®ï¼Œå¹¶æŸ¥è¯¢éœ€è¦çš„åæ ‡å˜æ¢å…³ç³»</li>
<li>å¹¿æ’­TFå˜æ¢ï¼Œå‘ç³»ç»Ÿå¹¿æ’­åæ ‡å˜æ¢å…³ç³»</li>
</ul>
<h2 id="ä¹Œé¾Ÿä¾‹ç¨‹ä¸­çš„TF"><a href="#ä¹Œé¾Ÿä¾‹ç¨‹ä¸­çš„TF" class="headerlink" title="ä¹Œé¾Ÿä¾‹ç¨‹ä¸­çš„TF"></a>ä¹Œé¾Ÿä¾‹ç¨‹ä¸­çš„TF</h2><p>è¯¥ç¯å¢ƒè‹¥å‡ºç°é—®é¢˜å¯çœ‹<a href="https://dhkkk.gitee.io/2024/02/19/linuxæ‚/">linuxã€ROSæ‚ | å°è‘£çš„BLOG</a></p>
<ul>
<li>å‡†å¤‡åº“ç¯å¢ƒï¼š<code>sudo apt-get install ros-noetic-turtle-tf</code></li>
<li>å¯åŠ¨launchæ–‡ä»¶è¿›è¡Œå®éªŒï¼š<code>roslaunch turtle_tf turtle_tf_dmeo.launch</code></li>
<li>å¼€å¯é”®ç›˜æ§åˆ¶ï¼š<code>rosrun turtlesim turtle_teleop_key</code></li>
</ul>
<p>å¯å¾—åˆ°ä¸¤åªä¹Œé¾Ÿï¼Œä¸€åªä¼šè·Ÿè¸ªå¦ä¸€åª</p>
<ul>
<li><code>rosrun tf view_frames</code>åå¯åœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹æ‰¾åˆ°frames.pdfã€‚å¯å¾—å½“å‰ç³»ç»Ÿä¸­å­˜åœ¨ä¸‰ä¸ªåæ ‡ç³»ï¼šworldã€turtle1ã€turtle2ï¼Œå…¶ä¸­worldä¸ºTFæ ‘çš„æ ¹èŠ‚ç‚¹ã€‚</li>
<li><code>rosrun tf tf_echo turtle1 turtle2</code>å¯å®æ—¶æŸ¥çœ‹å½“å‰turtle2è·Ÿéšturtle1æ‰€éœ€çš„åæ ‡å˜æ¢</li>
</ul>
<p>å¾—åˆ°åæ ‡å˜æ¢åï¼Œä¾¿å¯ä»¥è®¡ç®—ä¸¤ä¹Œé¾Ÿé—´çš„è·ç¦»å’Œè§’åº¦ã€‚</p>
<h2 id="åˆ›å»ºTFå¹¿æ’­å™¨"><a href="#åˆ›å»ºTFå¹¿æ’­å™¨" class="headerlink" title="åˆ›å»ºTFå¹¿æ’­å™¨"></a>åˆ›å»ºTFå¹¿æ’­å™¨</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tf/transform_broadcaster.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;turtlesim/Pose.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::string turtle_name;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">poseCallback</span><span class="params">(<span class="type">const</span> turtlesim::PoseConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// tfå¹¿æ’­å™¨</span></span><br><span class="line">    <span class="type">static</span> tf::TransformBroadcaster br;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®ä¹Œé¾Ÿå½“å‰çš„ä½å§¿ï¼Œè®¾ç½®ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»çš„åæ ‡å˜æ¢</span></span><br><span class="line">    tf::Transform transform;</span><br><span class="line">    transform.<span class="built_in">setOrigin</span>( tf::<span class="built_in">Vector3</span>(msg-&gt;x, msg-&gt;y, <span class="number">0.0</span>) );<span class="comment">//å¹³ç§»çŸ©é˜µï¼Œå› ä¸ºä¸ºå¹³é¢ç§»åŠ¨ï¼Œç¬¬ä¸‰é¡¹zä¸º0</span></span><br><span class="line">    tf::Quaternion q;</span><br><span class="line">    q.<span class="built_in">setRPY</span>(<span class="number">0</span>, <span class="number">0</span>, msg-&gt;theta);<span class="comment">//æ—‹è½¬çŸ©é˜µï¼Œå¹³é¢ä¸Šåªæœ‰yawæœ‰å€¼</span></span><br><span class="line">    transform.<span class="built_in">setRotation</span>(q);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘å¸ƒåæ ‡å˜æ¢</span></span><br><span class="line">    br.<span class="built_in">sendTransform</span>(tf::<span class="built_in">StampedTransform</span>(transform, ros::Time::<span class="built_in">now</span>(), <span class="string">&quot;world&quot;</span>, turtle_name));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–èŠ‚ç‚¹</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;my_tf_broadcaster&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>)<span class="comment">//argcä¸ºè¾“å…¥å­—ç¬¦ä¸²ä¸ªæ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;need turtle name as argument&quot;</span>); </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    turtle_name = argv[<span class="number">1</span>];<span class="comment">//è¾“å…¥çš„å‚æ•°ä»argv[1]å¼€å§‹å­˜æ”¾</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¢é˜…ä¹Œé¾Ÿçš„poseä¿¡æ¯</span></span><br><span class="line">    ros::NodeHandle node;</span><br><span class="line">    ros::Subscriber sub = node.<span class="built_in">subscribe</span>(turtle_name+<span class="string">&quot;/pose&quot;</span>, <span class="number">10</span>, &amp;poseCallback);</span><br><span class="line"></span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºTFç›‘å¬å™¨"><a href="#åˆ›å»ºTFç›‘å¬å™¨" class="headerlink" title="åˆ›å»ºTFç›‘å¬å™¨"></a>åˆ›å»ºTFç›‘å¬å™¨</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tf/transform_listener.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;geometry_msgs/Twist.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;turtlesim/Spawn.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–èŠ‚ç‚¹</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;my_tf_listener&quot;</span>);</span><br><span class="line"></span><br><span class="line">    ros::NodeHandle node;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡æœåŠ¡è°ƒç”¨ï¼Œäº§ç”Ÿç¬¬äºŒåªä¹Œé¾Ÿturtle2</span></span><br><span class="line">    ros::service::<span class="built_in">waitForService</span>(<span class="string">&quot;spawn&quot;</span>);</span><br><span class="line">    ros::ServiceClient add_turtle =</span><br><span class="line">    node.<span class="built_in">serviceClient</span>&lt;turtlesim::Spawn&gt;(<span class="string">&quot;spawn&quot;</span>);</span><br><span class="line">    turtlesim::Spawn srv;</span><br><span class="line">    add_turtle.<span class="built_in">call</span>(srv);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰turtle2çš„é€Ÿåº¦æ§åˆ¶å‘å¸ƒå™¨</span></span><br><span class="line">    ros::Publisher turtle_vel =</span><br><span class="line">    node.<span class="built_in">advertise</span>&lt;geometry_msgs::Twist&gt;(<span class="string">&quot;turtle2/cmd_vel&quot;</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// tfç›‘å¬å™¨,åˆ›å»ºåè‡ªåŠ¨æ¥æ”¶TFæ ‘çš„æ¶ˆæ¯å¹¶ç¼“å­˜10s</span></span><br><span class="line">    tf::TransformListener listener;</span><br><span class="line"></span><br><span class="line">    <span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">10.0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (node.<span class="built_in">ok</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        tf::StampedTransform transform;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// æŸ¥æ‰¾turtle2ä¸turtle1çš„åæ ‡å˜æ¢</span></span><br><span class="line">            listener.<span class="built_in">waitForTransform</span>(<span class="string">&quot;/turtle2&quot;</span>, <span class="string">&quot;/turtle1&quot;</span>, ros::<span class="built_in">Time</span>(<span class="number">0</span>), ros::<span class="built_in">Duration</span>(<span class="number">3.0</span>));<span class="comment">//ç»™å®šç›®æ ‡åæ ‡ç³»å’Œæºåæ ‡ç³»ï¼Œç­‰å¾…ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´ä¸€å®šå‘¨æœŸä¸‹çš„å˜æ¢å…³ç³»ï¼Œç¬¬å››ä¸ªå‚æ•°ä¸ºè¶…æ—¶æ—¶é—´ï¼ˆè¯¥å‡½æ•°ä¼šäº§ç”Ÿå µå¡ï¼‰</span></span><br><span class="line">            listener.<span class="built_in">lookupTransform</span>(<span class="string">&quot;/turtle2&quot;</span>, <span class="string">&quot;/turtle1&quot;</span>, ros::<span class="built_in">Time</span>(<span class="number">0</span>), transform);<span class="comment">//ç»™å®šç›®æ ‡åæ ‡ç³»å’Œæºåæ ‡ç³»ï¼Œå¾—åˆ°ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´ä¸€å®šå‘¨æœŸä¸‹çš„åæ ‡å˜æ¢ï¼ˆå­˜å…¥ç¬¬å››ä¸ªå‚æ•°ä¸­ï¼‰ï¼Œros::Time(0)è¡¨ç¤ºæƒ³è¦çš„æ˜¯æœ€æ–°çš„ä¸€æ¬¡åæ ‡å˜æ¢</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">catch</span> (tf::TransformException &amp;ex) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;%s&quot;</span>,ex.<span class="built_in">what</span>());</span><br><span class="line">            ros::<span class="built_in">Duration</span>(<span class="number">1.0</span>).<span class="built_in">sleep</span>();</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®turtle1å’Œturtle2ä¹‹é—´çš„åæ ‡å˜æ¢ï¼Œè®¡ç®—turtle2éœ€è¦è¿åŠ¨çš„çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦</span></span><br><span class="line">        <span class="comment">// å¹¶å‘å¸ƒé€Ÿåº¦æ§åˆ¶æŒ‡ä»¤ï¼Œä½¿turtle2å‘turtle1ç§»åŠ¨</span></span><br><span class="line">        geometry_msgs::Twist vel_msg;</span><br><span class="line">        vel_msg.angular.z = <span class="number">4.0</span> * <span class="built_in">atan2</span>(transform.<span class="built_in">getOrigin</span>().<span class="built_in">y</span>(),</span><br><span class="line">                                        transform.<span class="built_in">getOrigin</span>().<span class="built_in">x</span>());</span><br><span class="line">        vel_msg.linear.x = <span class="number">0.5</span> * <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(transform.<span class="built_in">getOrigin</span>().<span class="built_in">x</span>(), <span class="number">2</span>) +</span><br><span class="line">                                      <span class="built_in">pow</span>(transform.<span class="built_in">getOrigin</span>().<span class="built_in">y</span>(), <span class="number">2</span>));</span><br><span class="line">        turtle_vel.<span class="built_in">publish</span>(vel_msg);</span><br><span class="line"></span><br><span class="line">        rate.<span class="built_in">sleep</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡launchæ–‡ä»¶è¿è¡Œè¿™äº›èŠ‚ç‚¹"><a href="#é€šè¿‡launchæ–‡ä»¶è¿è¡Œè¿™äº›èŠ‚ç‚¹" class="headerlink" title="é€šè¿‡launchæ–‡ä»¶è¿è¡Œè¿™äº›èŠ‚ç‚¹"></a>é€šè¿‡launchæ–‡ä»¶è¿è¡Œè¿™äº›èŠ‚ç‚¹</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- æµ·é¾Ÿä»¿çœŸå™¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sim&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- é”®ç›˜æ§åˆ¶ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;teleop&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- ä¸¤åªæµ·é¾Ÿçš„tfå¹¿æ’­,ç”¨åŒä¸€å¯æ‰§è¡Œæ–‡ä»¶åˆ›å»ºä¸¤ä¸ªå¹¿æ’­èŠ‚ç‚¹ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;learning_tf&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_tf_broadcaster&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">args</span>=<span class="string">&quot;/turtle1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;turtle1_tf_broadcaster&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;learning_tf&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_tf_broadcaster&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">args</span>=<span class="string">&quot;/turtle2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;turtle2_tf_broadcaster&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- ç›‘å¬tfå¹¿æ’­ï¼Œå¹¶ä¸”æ§åˆ¶turtle2ç§»åŠ¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;learning_tf&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_tf_listener&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">name</span>=<span class="string">&quot;listener&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ROS</tag>
      </tags>
  </entry>
  <entry>
    <title>ROSçš„è¯é¢˜ä¸æœåŠ¡</title>
    <url>/2024/04/15/ROS-2/</url>
    <content><![CDATA[<h1 id="1-è¯é¢˜ä¸­çš„å‘å¸ƒè€…ä¸è®¢é˜…è€…"><a href="#1-è¯é¢˜ä¸­çš„å‘å¸ƒè€…ä¸è®¢é˜…è€…" class="headerlink" title="1.è¯é¢˜ä¸­çš„å‘å¸ƒè€…ä¸è®¢é˜…è€…"></a>1.è¯é¢˜ä¸­çš„å‘å¸ƒè€…ä¸è®¢é˜…è€…</h1><ul>
<li><p>ä½¿ç”¨<code>rqt_graph</code>å¯ä»¥æŸ¥çœ‹å½“å‰çš„èŠ‚ç‚¹å…³ç³»å›¾ï¼Œå¦‚å›¾ä¸ºä¹Œé¾Ÿä¾‹ç¨‹çš„é”®ç›˜è¾“å…¥æ§åˆ¶èŠ‚ç‚¹å›¾</p>
<img src="/images/loading.png" data-original="/2024/04/15/ROS-2/1.jpg" class title="This is an image"> 
<p>å…¶ä¸­teleop_turtleèŠ‚ç‚¹åˆ›å»ºäº†ä¸€ä¸ªå‘å¸ƒè€…ï¼ŒturtlesimèŠ‚ç‚¹åˆ›å»ºäº†ä¸€ä¸ªè®¢é˜…è€…ï¼›ä¸€ä¸ªå‘å¸ƒé”®ç›˜æ§åˆ¶çš„å‘½ä»¤ï¼Œä¸€ä¸ªè®¢é˜…å‘½ä»¤å®ç°ğŸ¢çš„ç§»åŠ¨ï¼Œæ­¤æ—¶çš„è¯é¢˜æ˜¯/turtlel/cmd_velã€‚</p>
</li>
</ul>
<h2 id="åˆ›å»ºPublisherï¼ˆå‘å¸ƒè€…ï¼‰"><a href="#åˆ›å»ºPublisherï¼ˆå‘å¸ƒè€…ï¼‰" class="headerlink" title="åˆ›å»ºPublisherï¼ˆå‘å¸ƒè€…ï¼‰"></a>åˆ›å»ºPublisherï¼ˆå‘å¸ƒè€…ï¼‰</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ROSèŠ‚ç‚¹åˆå§‹åŒ–ï¼Œä¸€ä¸ªcppå¯¹åº”ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹åä¸ºtalkerï¼Œåœ¨å½“å‰è¿è¡Œçš„ROSä¸­ç‹¬ä¸€æ— äºŒ</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;talker&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„ï¼Œæ–¹ä¾¿å¯¹talkerèŠ‚ç‚¹çš„ä½¿ç”¨</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/* åˆ›å»ºä¸€ä¸ªPublisherï¼Œå‘å¸ƒåä¸ºchatterï¼ˆchatteræ‰æ˜¯è¯é¢˜åå­—ï¼ï¼ï¼‰çš„è¯é¢˜ï¼Œæ¶ˆæ¯ç±»å‹ä¸ºstd_msgs::String</span></span><br><span class="line"><span class="comment">ros::å£°æ˜å‘½åç©ºé—´ï¼Œchatter_pubä¸ºè¯é¢˜å˜é‡ï¼ˆï¼Ÿè‡ªå·±çš„ç†è§£ï¼‰ï¼Œå…¶å‘å¸ƒçš„å†…å®¹ä¸ºStringç±»å‹æ¶ˆæ¯ï¼Œ1000ä¸ºé˜Ÿåˆ—å¤§å°ï¼Œadvertiseç±»ä¼¼cppå®¹å™¨ä¹‹ç±»çš„ä¸œè¥¿ï¼Ÿ*/</span></span><br><span class="line">   </span><br><span class="line">    ros::Publisher chatter_pub = n.<span class="built_in">advertise</span>&lt;std_msgs::String&gt;(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// è®¾ç½®å¾ªç¯çš„é¢‘ç‡ï¼Œå•ä½Hz</span></span><br><span class="line">    <span class="function">ros::Rate <span class="title">loop_rate</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())<span class="comment">//èŠ‚ç‚¹æœªå‘é€å¼‚å¸¸åˆ™æŒç»­å¾ªç¯</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–std_msgs::Stringç±»å‹çš„æ¶ˆæ¯</span></span><br><span class="line">        std_msgs::String msg;</span><br><span class="line">        std::stringstream ss;</span><br><span class="line">        ss &lt;&lt; <span class="string">&quot;hello world &quot;</span> &lt;&lt; count;</span><br><span class="line">        msg.data = ss.<span class="built_in">str</span>();<span class="comment">//å°†æµçš„å†…å®¹å…¨éƒ¨è¿”å›åˆ°msgçš„dataä¸­ï¼Œstd_msgs::Stringå¯¹è±¡åªæœ‰dataè¿™ä¸€ä¸ªæˆå‘˜</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;%s&quot;</span>, msg.data.<span class="built_in">c_str</span>());<span class="comment">//æ‰“å°å†…å®¹ï¼Œåªæ˜¯æ‰“å°è€Œå·²</span></span><br><span class="line">        chatter_pub.<span class="built_in">publish</span>(msg);<span class="comment">//å‘å¸ƒæ¶ˆæ¯ï¼Œå‘å¸ƒåMasterä¼šæ‰¾è®¢é˜…è¯¥è¯é¢˜çš„èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span></span><br><span class="line">        ros::<span class="built_in">spinOnce</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŒ‰ç…§å¾ªç¯é¢‘ç‡å»¶æ—¶</span></span><br><span class="line">        loop_rate.<span class="built_in">sleep</span>();<span class="comment">//èŠ‚ç‚¹ä¼‘çœ ï¼Œæ—¶é•¿ä¸å‰è®¾ç½®çš„å¾ªç¯é¢‘ç‡æœ‰å…³</span></span><br><span class="line">        ++count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºSubscriberï¼ˆè®¢é˜…è€…ï¼‰"><a href="#åˆ›å»ºSubscriberï¼ˆè®¢é˜…è€…ï¼‰" class="headerlink" title="åˆ›å»ºSubscriberï¼ˆè®¢é˜…è€…ï¼‰"></a>åˆ›å»ºSubscriberï¼ˆè®¢é˜…è€…ï¼‰</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯¥ä¾‹ç¨‹å°†è®¢é˜…chatterè¯é¢˜ï¼Œæ¶ˆæ¯ç±»å‹String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶åˆ°è®¢é˜…çš„æ¶ˆæ¯åï¼Œä¼šè¿›å…¥æ¶ˆæ¯å›è°ƒå‡½æ•°ï¼Œä¼ å…¥çš„å‚æ•°ä¸ºä¸€ä¸ªæ¶ˆæ¯æŒ‡é’ˆï¼ˆè®°ä½å§ï¼Œæ„Ÿè§‰å½¢å¼æ€ªæ€ªçš„ï¼‰</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">chatterCallback</span><span class="params">(<span class="type">const</span> std_msgs::String::ConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ‰“å°å‡ºæ¥</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;I heard: [%s]&quot;</span>, msg-&gt;data.<span class="built_in">c_str</span>());<span class="comment">//æ³¨æ„å½¢å¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ROSèŠ‚ç‚¹</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;listener&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªSubscriberï¼Œè®¢é˜…åä¸ºchatterçš„topicï¼Œæ³¨å†Œå›è°ƒå‡½æ•°chatterCallbackï¼Œæ³¨æ„è¿™é‡Œè¦æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œæ¶ˆæ¯ç±»å‹ä¸è®¢é˜…è€…æ— å…³</span></span><br><span class="line">    ros::Subscriber sub = n.<span class="built_in">subscribe</span>(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>, chatterCallback);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span></span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨è¯¥<strong>åŠŸèƒ½åŒ…</strong>ä¸­çš„CmakeLsit.txtä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_executable(talker src/talker.cpp)</span><br><span class="line">target_link_libraries(talker $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line">##add_dependencies(talker $&#123;PROJECT_NAME&#125;_generate_messages_cpp)ä¸éœ€</span><br><span class="line"></span><br><span class="line">add_executable(listener src/talker.cpp)</span><br><span class="line">target_link_libraries(listener $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line">##add_dependencies(listener $&#123;PROJECT_NAME&#125;_generate_messages_cpp)ä¸éœ€</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>add_ex...</code>ï¼šä¸ºè®¾ç½®éœ€ç¼–è¯‘çš„ä»£ç å’Œå¯æ‰§è¡Œæ–‡ä»¶ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæœŸæœ›ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„<strong>åå­—</strong>ï¼Œä¸€èˆ¬ä¸èŠ‚ç‚¹åç›¸åŒï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦ç¼–è¯‘çš„æ–‡ä»¶ã€‚</li>
<li><code>target...</code>ï¼šè®¾ç½®é“¾æ¥åº“ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºéœ€é“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶åï¼ˆåŒä¸Šçš„åå­—ï¼‰ï¼›ç¬¬äºŒä¸ªä¸ºè¦é“¾æ¥çš„åº“</li>
<li><code>add_de...</code>ï¼šè®¾ç½®ä¾èµ–ã€‚ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ èƒ½åŠ¨æ€äº§ç”Ÿæ¶ˆæ¯ä»£ç çš„ä¾èµ–ã€‚<strong>ä½†æ˜¯å…ˆç‰ˆæœ¬å¥½åƒå·²ä¸éœ€è¦æ·»åŠ è¿™ä¸ª</strong></li>
</ul>
<h2 id="è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹"><a href="#è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹"></a>è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹</h2><p>å‰ä¸¤èŠ‚ä¸­ä½¿ç”¨çš„æ¶ˆæ¯ç±»å‹ä¸ºROSå…ƒåŠŸèƒ½åŒ…å®šä¹‰çš„std_msgsï¼ˆæ ‡å‡†æ•°æ®ç±»å‹ï¼‰ä¸­é¢„å®šä¹‰çš„Stringç±»å‹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰msgæ–‡ä»¶ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<h3 id="1-ç¼–å†™msgæ–‡ä»¶"><a href="#1-ç¼–å†™msgæ–‡ä»¶" class="headerlink" title="1.ç¼–å†™msgæ–‡ä»¶"></a>1.ç¼–å†™msgæ–‡ä»¶</h3><p>åœ¨æœ¬åŠŸèƒ½åŒ…ä¸­åˆ›å»ºmsgæ–‡ä»¶å¤¹ï¼ˆä¸srcå¹³è¡Œï¼‰ï¼Œå¹¶åˆ›å»ºperson.msg</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">string name</span><br><span class="line">uint8 sex</span><br><span class="line">uint8 age</span><br><span class="line"></span><br><span class="line">uint8 unknown=0</span><br><span class="line">uint8 male=1</span><br><span class="line">uint8 female=2</span><br></pre></td></tr></table></figure>
<h3 id="2-ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„package-xml"><a href="#2-ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„package-xml" class="headerlink" title="2.ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„package.xml"></a>2.ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„package.xml</h3><p>æ·»åŠ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;build_depend&gt;message_generation&lt;/build_depend&gt;</span><br><span class="line">&lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;</span><br></pre></td></tr></table></figure>
<p>ä¿è¯msgæ–‡ä»¶èƒ½è½¬åŒ–ä¸ºcpp,pyç­‰è¯­è¨€çš„æºæ–‡ä»¶ï¼Œç¬¬ä¸€è¡Œä¸ºç¼–è¯‘ä¾èµ–ï¼›ç¬¬äºŒè¡Œä¸ºæ‰§è¡Œä¾èµ–</p>
<h3 id="3-ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„CMakeLists-txt"><a href="#3-ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„CMakeLists-txt" class="headerlink" title="3.ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„CMakeLists.txt"></a>3.ä¿®æ”¹æœ¬åŠŸèƒ½åŒ…ä¸‹çš„<strong>CMakeLists.txt</strong></h3><ul>
<li><p>åœ¨<strong><u>å·²æœ‰</u></strong>çš„find_packageä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find_package(catkin REQUIRED COMPONENTS</span><br><span class="line">   roscpp</span><br><span class="line">   rospy</span><br><span class="line">   std_msgs</span><br><span class="line">   message_generation</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨<strong><u>å·²æœ‰</u></strong>çš„catkin_packageä¸­å¢åŠ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">catkin_package(</span><br><span class="line">  ...</span><br><span class="line">	CATKIN_DEPENDS roscpp rospy std_msgs message_runtime</span><br><span class="line">  ...)</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾åˆ°è¢«æ³¨é‡Šæˆ–å·²æœ‰çš„add_message_files()è¯­å¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_message_files(</span><br><span class="line">  FILES</span><br><span class="line">  person.msg</span><br><span class="line"> )</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾åˆ°è¢«æ³¨é‡Šæˆ–å·²æœ‰çš„genreate_message()è¯­å¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">generate_messages(</span><br><span class="line">DEPENDENCIES</span><br><span class="line">std_msgs</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-ç¼–è¯‘"><a href="#3-ç¼–è¯‘" class="headerlink" title="3.ç¼–è¯‘"></a>3.ç¼–è¯‘</h3><p>ç¼–è¯‘æˆåŠŸåï¼Œå¯¹äºC++è€Œè¨€ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬è‡ªåŠ¨ç¼–å†™ä¸€ä¸ªå¤´æ–‡ä»¶ï¼š<code>sensor.h</code>ï¼Œæ–‡ä»¶ä½äº<code>workspace/devel/include</code>ä¸­ï¼Œé€šè¿‡å¼•ç”¨å¤´æ–‡ä»¶å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰æ•°æ®äº†ã€‚</p>
<ul>
<li><p>å¼•ç”¨æ ¼å¼ï¼š<code>#include &quot;learning_communication/person.h&quot;</code>/å‰ä¸ºè¯¥msgæ–‡ä»¶ï¼ˆä¸æ˜¯.hæ–‡ä»¶ï¼‰æ‰€åœ¨çš„åŠŸèƒ½åŒ…çš„åå­—</p>
</li>
<li><p>ä½¿ç”¨æ ¼å¼ï¼š<code>learning_communication::person</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">learning_communication::person msg;</span><br><span class="line">std::stringstream ss;</span><br><span class="line">ss &lt;&lt; <span class="string">&quot;dhk&quot;</span>;</span><br><span class="line">msg.name=ss.<span class="built_in">str</span>();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å°†è‡ªå®šä¹‰æ¶ˆæ¯ç”¨äºåˆšåˆšçš„è¯é¢˜ä¸­"><a href="#å°†è‡ªå®šä¹‰æ¶ˆæ¯ç”¨äºåˆšåˆšçš„è¯é¢˜ä¸­" class="headerlink" title="å°†è‡ªå®šä¹‰æ¶ˆæ¯ç”¨äºåˆšåˆšçš„è¯é¢˜ä¸­"></a>å°†è‡ªå®šä¹‰æ¶ˆæ¯ç”¨äºåˆšåˆšçš„è¯é¢˜ä¸­</h2><h3 id="å‘å¸ƒè€…"><a href="#å‘å¸ƒè€…" class="headerlink" title="å‘å¸ƒè€…"></a>å‘å¸ƒè€…</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;learning_communication/person.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ROSèŠ‚ç‚¹åˆå§‹åŒ–</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;talker&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªPublisherï¼Œå‘å¸ƒåä¸ºchatterçš„topicï¼Œæ¶ˆæ¯ç±»å‹ä¸ºè‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹</span></span><br><span class="line">    ros::Publisher chatter_pub = n.<span class="built_in">advertise</span>&lt;learning_communication::person&gt;(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å¾ªç¯çš„é¢‘ç‡</span></span><br><span class="line">    <span class="function">ros::Rate <span class="title">loop_rate</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–std_msgs::Stringç±»å‹çš„æ¶ˆæ¯</span></span><br><span class="line">        learning_communication::person msg;</span><br><span class="line">        std::stringstream ss;</span><br><span class="line">        ss &lt;&lt; <span class="string">&quot;dhk&quot;</span> &lt;&lt; count;</span><br><span class="line">        msg.name = ss.<span class="built_in">str</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘å¸ƒæ¶ˆæ¯</span></span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;%s&quot;</span>, msg.name.<span class="built_in">c_str</span>());<span class="comment">//c_str()é€šç”¨äºstringç±»å‹</span></span><br><span class="line">        chatter_pub.<span class="built_in">publish</span>(msg);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span></span><br><span class="line">        ros::<span class="built_in">spinOnce</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŒ‰ç…§å¾ªç¯é¢‘ç‡å»¶æ—¶</span></span><br><span class="line">        loop_rate.<span class="built_in">sleep</span>();</span><br><span class="line">        ++count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è®¢é˜…è€…"><a href="#è®¢é˜…è€…" class="headerlink" title="è®¢é˜…è€…"></a>è®¢é˜…è€…</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;learning_communication/person.h&quot;</span></span></span><br><span class="line"><span class="comment">// æ¥æ”¶åˆ°è®¢é˜…çš„æ¶ˆæ¯åï¼Œä¼šè¿›å…¥æ¶ˆæ¯å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">//ConstPtr&amp;ä¸ºé€šç”¨ç±»å‹ï¼Œç›´æ¥cvå°±è¡Œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">chatterCallback</span><span class="params">(<span class="type">const</span> learning_communication::person::ConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ‰“å°å‡ºæ¥</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;I heard: [%s]&quot;</span>, msg-&gt;name.<span class="built_in">c_str</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ROSèŠ‚ç‚¹</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;listener&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªSubscriberï¼Œè®¢é˜…åä¸ºchatterçš„topicï¼Œæ³¨å†Œå›è°ƒå‡½æ•°chatterCallback</span></span><br><span class="line">    ros::Subscriber sub = n.<span class="built_in">subscribe</span>(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>, chatterCallback);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾ªç¯ç­‰å¾…å›è°ƒå‡½æ•°</span></span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/images/loading.png" data-original="/2024/04/15/ROS-2/2.jpg" class title="This is an image"> 
<p>å¦‚å›¾ï¼ŒtalkerèŠ‚ç‚¹å‘å¸ƒäº†åä¸ºchatterçš„è¯é¢˜ï¼Œè¢«listenerèŠ‚ç‚¹è®¢é˜…ã€‚</p>
<h1 id="2-æœåŠ¡ä¸­çš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯"><a href="#2-æœåŠ¡ä¸­çš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯" class="headerlink" title="2.æœåŠ¡ä¸­çš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯"></a>2.æœåŠ¡ä¸­çš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯</h1><p>æœåŠ¡ï¼ˆserviceï¼‰ä¸ºèŠ‚ç‚¹ä¹‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œç”±å®¢æˆ·ç«¯ï¼ˆClientï¼‰å‘å¸ƒè¯·æ±‚ï¼ˆRequestï¼‰ï¼ŒæœåŠ¡ç«¯ï¼ˆServerï¼‰å¤„ç†åè¿”å›åº”ç­”ï¼ˆResponseï¼‰</p>
<h2 id="è‡ªå®šä¹‰æœåŠ¡æ•°æ®"><a href="#è‡ªå®šä¹‰æœåŠ¡æ•°æ®" class="headerlink" title="è‡ªå®šä¹‰æœåŠ¡æ•°æ®"></a>è‡ªå®šä¹‰æœåŠ¡æ•°æ®</h2><h3 id="1-ç¼–å†™srvæ–‡ä»¶"><a href="#1-ç¼–å†™srvæ–‡ä»¶" class="headerlink" title="1.ç¼–å†™srvæ–‡ä»¶"></a>1.ç¼–å†™srvæ–‡ä»¶</h3><p>åŒè¯é¢˜ä¸­çš„è‡ªå®šä¹‰æ¶ˆæ¯ä¸€æ ·ï¼ŒæœåŠ¡æ•°æ®å¯ä»¥é€šè¿‡<strong>srvæ–‡ä»¶</strong>è¿›è¡Œå®šä¹‰ï¼Œä¸”åŒmsgæ–‡ä»¶ä¸€æ ·æ”¾ç½®åœ¨å…·ä½“åŠŸèƒ½åŒ…æ–‡ä»¶å¤¹ä¸­ï¼Œä½†ç”±äºæ–‡ä»¶åŒ…å«<strong>è¯·æ±‚</strong>ä¸<strong>åº”ç­”ä¸¤ä¸ªæ•°æ®åŸŸ</strong>ï¼Œå› æ­¤è¦ç‰¹åˆ«åˆ†å‰²ä¸€ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int64 a</span><br><span class="line">int64 b</span><br><span class="line">---</span><br><span class="line">int64 sum</span><br></pre></td></tr></table></figure>
<p>ä¸Šä¸ºè¯·æ±‚åŸŸï¼Œä¸‹ä¸ºåº”ç­”åŸŸ</p>
<h3 id="2-ä¿®æ”¹package-xml"><a href="#2-ä¿®æ”¹package-xml" class="headerlink" title="2.ä¿®æ”¹package.xml"></a>2.ä¿®æ”¹package.xml</h3><p>å†…å®¹åŒè‡ªå®šä¹‰è®¢é˜…æ¶ˆæ¯ä¸­çš„æ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;build_depend&gt;message_generation&lt;/build_depend&gt;</span><br><span class="line">&lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-ä¿®æ”¹CMakeLists-txt"><a href="#3-ä¿®æ”¹CMakeLists-txt" class="headerlink" title="3.ä¿®æ”¹CMakeLists.txt"></a>3.ä¿®æ”¹CMakeLists.txt</h3><p>æ‰¾åˆ°è¢«æ³¨é‡Šæˆ–å·²æœ‰çš„add_service_files()è¯­å¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_service_files(</span><br><span class="line">  FILES</span><br><span class="line">  AddTwoInts.srv</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–æ“ä½œåŒè‡ªå®šä¹‰è®¢é˜…æ¶ˆæ¯</p>
<h2 id="åˆ›å»ºServer"><a href="#åˆ›å»ºServer" class="headerlink" title="åˆ›å»ºServer"></a>åˆ›å»ºServer</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;learning_communication/AddTwoInts.h&quot;</span><span class="comment">//è®°å¾—æ·»åŠ å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// serviceå›è°ƒå‡½æ•°ï¼Œç¬¬ä¸€å‚æ•°ä¸ºè¯·æ±‚åŸŸreqï¼Œç¬¬äºŒå‚æ•°ä¸ºåº”ç­”åŸŸresï¼Œä¸åŒåŸŸè¦åˆ†åˆ«å£°æ˜</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">add</span><span class="params">(learning_communication::AddTwoInts::Request  &amp;req,</span></span></span><br><span class="line"><span class="params"><span class="function">         learning_communication::AddTwoInts::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å°†è¾“å…¥å‚æ•°ä¸­çš„è¯·æ±‚æ•°æ®ç›¸åŠ ï¼Œç»“æœæ”¾åˆ°åº”ç­”å˜é‡ä¸­</span></span><br><span class="line">    res.sum = req.a + req.b;</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;request: x=%ld, y=%ld&quot;</span>, (<span class="type">long</span> <span class="type">int</span>)req.a, (<span class="type">long</span> <span class="type">int</span>)req.b);</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;sending back response: [%ld]&quot;</span>, (<span class="type">long</span> <span class="type">int</span>)res.sum);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ROSèŠ‚ç‚¹åˆå§‹åŒ–</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;add_two_ints_server&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªåä¸ºadd_two_intsçš„serverï¼Œæ³¨å†Œå›è°ƒå‡½æ•°add()</span></span><br><span class="line">    ros::ServiceServer service = n.<span class="built_in">advertiseService</span>(<span class="string">&quot;add_two_ints&quot;</span>, add);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;Ready to add two ints.&quot;</span>);</span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºClient"><a href="#åˆ›å»ºClient" class="headerlink" title="åˆ›å»ºClient"></a>åˆ›å»ºClient</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;learning_communication/AddTwoInts.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ROSèŠ‚ç‚¹åˆå§‹åŒ–</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;add_two_ints_client&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»ç»ˆç«¯å‘½ä»¤è¡Œè·å–ä¸¤ä¸ªåŠ æ•°ï¼Œä¸ºmainçš„è¾“å…¥å‚æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;usage: add_two_ints_client X Y&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºèŠ‚ç‚¹å¥æŸ„</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªclientï¼Œè¯·æ±‚add_two_intçš„serviceï¼Œä¸¤æ–‡ä»¶åœ¨æ­¤å¤„è”ç³»</span></span><br><span class="line">    <span class="comment">// serviceæ¶ˆæ¯ç±»å‹æ˜¯learning_communication::AddTwoInts</span></span><br><span class="line">    ros::ServiceClient client = n.<span class="built_in">serviceClient</span>&lt;learning_communication::AddTwoInts&gt;(<span class="string">&quot;add_two_ints&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºlearning_communication::AddTwoIntsç±»å‹çš„serviceæ¶ˆæ¯</span></span><br><span class="line">    learning_communication::AddTwoInts srv;</span><br><span class="line">    srv.request.a = <span class="built_in">atoll</span>(argv[<span class="number">1</span>]);</span><br><span class="line">    srv.request.b = <span class="built_in">atoll</span>(argv[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘å¸ƒserviceè¯·æ±‚ï¼Œç­‰å¾…åŠ æ³•è¿ç®—çš„åº”ç­”ç»“æœ</span></span><br><span class="line">   <span class="comment">//è¿™é‡Œè¾“å…¥å‚æ•°ä¸º1ä¸ªï¼Œä½†æ˜¯å›è°ƒæ˜¯ä¸¤ä¸ªï¼Œå›è°ƒçš„å†™æ³•åº”è¯¥æ˜¯å›ºå®šæ ¼å¼ï¼Ÿ</span></span><br><span class="line">    <span class="keyword">if</span> (client.<span class="built_in">call</span>(srv))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;Sum: %ld&quot;</span>, (<span class="type">long</span> <span class="type">int</span>)srv.response.sum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;Failed to call service add_two_ints&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ç¼–è¯‘åŠŸèƒ½åŒ…"><a href="#ç¼–è¯‘åŠŸèƒ½åŒ…" class="headerlink" title="ç¼–è¯‘åŠŸèƒ½åŒ…"></a>ç¼–è¯‘åŠŸèƒ½åŒ…</h2><p>åœ¨CMakeLists.txtä¸­æ·»åŠ ç›¸å…³å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_executable(add_two_ints_server src/server.cpp)</span><br><span class="line">target_link_libraries(add_two_ints_server $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line"></span><br><span class="line">add_executable(add_two_ints_client src/client.cpp)</span><br><span class="line">target_link_libraries(add_two_ints_client $&#123;catkin_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè¦æ³¨æ„add_executableç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæœŸæœ›çš„å¯æ‰§è¡Œæ–‡ä»¶åï¼Œå¯ä»¥ä¸ä¸èŠ‚ç‚¹åç›¸åŒï¼Œä½†æˆ‘å–œæ¬¢ç›¸åŒï¼ˆå“¼ï¼‰</p>
<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><img src="/images/loading.png" data-original="/2024/04/15/ROS-2/3.jpg" class title="This is an image"> 
<p>è¿™é‡Œè¦æ³¨æ„</p>
<ul>
<li>è¿è¡ŒèŠ‚ç‚¹æ—¶ä¸è¦è¿è¡Œæˆcppæ–‡ä»¶</li>
<li>ClientèŠ‚ç‚¹éœ€æ·»åŠ 2ä¸ªåˆå§‹å‚æ•°</li>
</ul>
<h1 id="è¯é¢˜ä¸æœåŠ¡çš„åŒºåˆ«"><a href="#è¯é¢˜ä¸æœåŠ¡çš„åŒºåˆ«" class="headerlink" title="è¯é¢˜ä¸æœåŠ¡çš„åŒºåˆ«"></a>è¯é¢˜ä¸æœåŠ¡çš„åŒºåˆ«</h1><ul>
<li>è¯é¢˜ä¸­å»ºç«‹ä¸¤èŠ‚ç‚¹å…³ç³»çš„é˜¶æ®µæ˜¯åœ¨listenerä¸­è®¢é˜…ç›¸å…³è¯é¢˜å¹¶æ³¨å†Œå›è°ƒå‡½æ•°ï¼›è€ŒæœåŠ¡ä¸­å»ºç«‹ä¸¤èŠ‚ç‚¹å…³ç³»çš„é˜¶æ®µæ˜¯åœ¨clientä¸­è¯·æ±‚åä¸ºxxçš„æœåŠ¡ã€‚å› æ­¤é¡ºåºåº”è¯¥ä¸ºï¼š<ul>
<li>è¯é¢˜ï¼šå…ˆç¼–å†™talkerï¼Œå†å†™listener</li>
<li>æœåŠ¡ï¼šå…ˆç¼–å†™serverï¼Œå†å†™client</li>
</ul>
</li>
<li>ä¸¤ç§é€šä¿¡çš„å…·ä½“é¡ºåºï¼š</li>
<li>è¯é¢˜<ul>
<li>åˆ›å»ºå‘å¸ƒè€…ï¼Œè¯é¢˜ï¼Œå¹¶è§„å®šè¯é¢˜çš„æ¶ˆæ¯å½¢å¼</li>
<li>å‘å¸ƒæ¶ˆæ¯</li>
<li>åˆ›å»ºè®¢é˜…è€…ï¼Œå¹¶è®¢é˜…è¯é¢˜ï¼Œæ³¨å†Œå›è°ƒå‡½æ•°ï¼Œç­‰å¾…å›è°ƒå‡½æ•°è¿è¡Œ</li>
</ul>
</li>
<li>æœåŠ¡<ul>
<li>åˆ›å»ºæœåŠ¡ç«¯ï¼ŒæœåŠ¡åï¼Œå¹¶æ³¨å†ŒæœåŠ¡å›è°ƒå‡½æ•°</li>
<li>åˆ›å»ºå®¢æˆ·ç«¯ï¼Œå¹¶è¯·æ±‚ç›¸å…³æœåŠ¡åçš„æœåŠ¡ï¼Œæ­¤æ—¶è§„å®šæœåŠ¡çš„æ¶ˆæ¯å½¢å¼</li>
<li>å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å¹¶è¾“å…¥ç›¸å…³å†…å®¹ï¼ŒæœåŠ¡ç«¯å›è°ƒå‡½æ•°è¿›è¡Œå¤„ç†æ—¶å®¢æˆ·ç«¯å µå¡ï¼Œç­‰å¾…æœåŠ¡å®Œæˆï¼ŒæœåŠ¡å®Œæˆåå®¢æˆ·ç«¯å†…ä¸å›è°ƒå‡½æ•°ç›¸å…³çš„å‚æ•°å·²æ”¹å˜</li>
</ul>
</li>
<li><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯é¢˜çš„å›è°ƒå‡½æ•°åªåœ¨è®¢é˜…æ–‡ä»¶ç”Ÿæ•ˆï¼Œä¸æ˜¯åé¦ˆï¼›è€ŒæœåŠ¡çš„å›è°ƒå‡½æ•°ä¼šç”Ÿæ•ˆäºå®¢æˆ·ç«¯ï¼Œæ˜¯çœŸæ­£çš„åé¦ˆ</strong></li>
</ul>
<h1 id="ROSå‘½åè§„åˆ™"><a href="#ROSå‘½åè§„åˆ™" class="headerlink" title="ROSå‘½åè§„åˆ™"></a>ROSå‘½åè§„åˆ™</h1><ul>
<li>åŸºç¡€åç§°ï¼šdhk</li>
<li>å…¨å±€åç§°ï¼š/xx/dhk</li>
<li>ç›¸å¯¹åç§°ï¼šxx/dhk</li>
<li>ç§æœ‰åç§°ï¼š~xx/dhk</li>
</ul>
<p>èµ·å§‹ä¸º/çš„éƒ½ä¸ºå…¨å±€åç§°</p>
]]></content>
      <tags>
        <tag>ROS</tag>
      </tags>
  </entry>
  <entry>
    <title>ROSçš„ä¸€äº›åŸºç¡€æ¦‚å¿µä¸é…ç½®</title>
    <url>/2024/04/10/ROS-1/</url>
    <content><![CDATA[<h1 id="1-å…³é”®æ¦‚å¿µ"><a href="#1-å…³é”®æ¦‚å¿µ" class="headerlink" title="1.å…³é”®æ¦‚å¿µ"></a>1.å…³é”®æ¦‚å¿µ</h1><h2 id="èŠ‚ç‚¹Node"><a href="#èŠ‚ç‚¹Node" class="headerlink" title="èŠ‚ç‚¹Node"></a>èŠ‚ç‚¹Node</h2><p>æ‰§è¡Œè¿ç®—ä»»åŠ¡çš„è¿›ç¨‹ï¼Œä¸€ä¸ªç³»ç»Ÿä¸€èˆ¬ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆã€‚</p>
<h2 id="æ¶ˆæ¯Message"><a href="#æ¶ˆæ¯Message" class="headerlink" title="æ¶ˆæ¯Message"></a>æ¶ˆæ¯Message</h2><p>èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶å°±æ˜¯åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å‹çš„æ¶ˆæ¯é€šä¿¡ï¼Œæ¶ˆæ¯æœ‰å¤šç§æ•°æ®ç»“æ„ã€‚</p>
<h2 id="è¯é¢˜Topic"><a href="#è¯é¢˜Topic" class="headerlink" title="è¯é¢˜Topic"></a>è¯é¢˜Topic</h2><p>æ¶ˆæ¯çš„ä¼ é€’æ–¹å¼ã€‚</p>
<p>ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥é’ˆå¯¹ä¸€ä¸ªç»™å®šçš„è¯é¢˜å‘å¸ƒæ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥å…³æ³¨æŸä¸ªè¯é¢˜å¹¶è®¢é˜…ç‰¹å®šç±»å‹çš„æ•°æ®ã€‚</p>
<h2 id="æœåŠ¡Service"><a href="#æœåŠ¡Service" class="headerlink" title="æœåŠ¡Service"></a>æœåŠ¡Service</h2><p>åŒå‘åŒæ­¥ä¼ è¾“æ¨¡å¼ï¼Œä¸¤èŠ‚ç‚¹ä¸€ä¸ªç”¨äºè¯·æ±‚ï¼Œä¸€ä¸ªç”¨äºåº”ç­”ã€‚ROSåªå…è®¸ä¸€ä¸ªèŠ‚ç‚¹æä¾›æŒ‡å®šå‘½åçš„æœåŠ¡ã€‚</p>
<h2 id="èŠ‚ç‚¹ç®¡ç†å™¨ROS-Master"><a href="#èŠ‚ç‚¹ç®¡ç†å™¨ROS-Master" class="headerlink" title="èŠ‚ç‚¹ç®¡ç†å™¨ROS Master"></a>èŠ‚ç‚¹ç®¡ç†å™¨ROS Master</h2><p>ç®¡ç†èŠ‚ç‚¹</p>
<h1 id="2-æ–‡ä»¶ç³»ç»Ÿ"><a href="#2-æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="2.æ–‡ä»¶ç³»ç»Ÿ"></a>2.æ–‡ä»¶ç³»ç»Ÿ</h1><h2 id="åŠŸèƒ½åŒ…"><a href="#åŠŸèƒ½åŒ…" class="headerlink" title="åŠŸèƒ½åŒ…"></a>åŠŸèƒ½åŒ…</h2><p>ROSè½¯ä»¶çš„åŸºæœ¬å•å…ƒï¼ŒåŒ…å«èŠ‚ç‚¹ã€åº“ã€é…ç½®æ–‡ä»¶ç­‰</p>
<h3 id="å¯¹åº”æ–‡ä»¶å¤¹å†…å®¹"><a href="#å¯¹åº”æ–‡ä»¶å¤¹å†…å®¹" class="headerlink" title="å¯¹åº”æ–‡ä»¶å¤¹å†…å®¹"></a>å¯¹åº”æ–‡ä»¶å¤¹å†…å®¹</h3><ul>
<li><p>configï¼šåŠŸèƒ½åŒ…çš„é…ç½®æ–‡ä»¶</p>
</li>
<li><p>includeï¼šåŠŸèƒ½åŒ…éœ€è¦ç”¨åˆ°çš„å¤´æ–‡ä»¶</p>
</li>
<li><p>scriptsï¼šå¯ä»¥ç›´æ¥è¿è¡Œçš„pyè„šæœ¬</p>
</li>
<li><p>srcï¼šéœ€è¦ç¼–è¯‘çš„cppä»£ç </p>
</li>
<li><p>launchï¼šæ‰€æœ‰å¯åŠ¨æ–‡ä»¶</p>
</li>
<li><p>msgï¼šåŠŸèƒ½åŒ…è‡ªå®šä¹‰çš„æ¶ˆæ¯ç±»å‹</p>
</li>
<li><p>srvï¼šè‡ªå®šä¹‰çš„æœåŠ¡ç±»å‹</p>
</li>
<li><p>actionï¼šè‡ªå®šä¹‰çš„åŠ¨ä½œæŒ‡ä»¤</p>
</li>
<li><p>CMakeLists.txtï¼šç¼–è¯‘å™¨ç¼–ä¸€åŠŸèƒ½åŒ…çš„è§„åˆ™</p>
</li>
<li><p>package.xmlï¼šåŠŸèƒ½åŒ…æ¸…å•ï¼ŒåŒ…å«è¯¥åŠŸèƒ½åŒ…åç§°ã€ç‰ˆæœ¬å·ç­‰ä¿¡æ¯ã€‚</p>
<p><build_depend>å®šä¹‰äº†ä»£ç ç¼–è¯‘æ‰€ä¾èµ–çš„å…¶ä»–åŠŸèƒ½åŒ…</build_depend></p>
<p><run_depend>å®šä¹‰äº†åŠŸèƒ½åŒ…ä¸­å¯æ‰§è¡Œç¨‹åºè¿è¡Œæ—¶æ‰€ä¾èµ–çš„å…¶ä»–åŠŸèƒ½åŒ…</run_depend></p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é’ˆå¯¹åŠŸèƒ½åŒ…çš„å¸¸ç”¨å‘½ä»¤ï¼š</span><br><span class="line">catkin_create_pkg åˆ›å»ºåŠŸèƒ½åŒ…</span><br><span class="line">rospack è·å–åŠŸèƒ½åŒ…ä¿¡æ¯</span><br><span class="line">catkin_make ç¼–è¯‘å·¥ä½œç©ºé—´ä¸­çš„åŠŸèƒ½åŒ…</span><br><span class="line">rosdep è‡ªåŠ¨å®‰è£…åŠŸèƒ½åŒ…ä¾èµ–çš„å…¶ä»–åŒ…</span><br><span class="line">roscd åŠŸèƒ½åŒ…ç›®å½•è·³è½¬</span><br><span class="line">roscp æ‹·è´åŠŸèƒ½åŒ…ä¸­çš„æ–‡ä»¶</span><br><span class="line">rosed ç¼–è¾‘åŠŸèƒ½åŒ…ä¸­çš„æ–‡ä»¶</span><br><span class="line">rosrun è¿è¡ŒåŠŸèƒ½åŒ…ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶</span><br><span class="line">roslaunch è¿è¡Œå¯åŠ¨æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<h2 id="å…ƒåŠŸèƒ½åŒ…"><a href="#å…ƒåŠŸèƒ½åŒ…" class="headerlink" title="å…ƒåŠŸèƒ½åŒ…"></a>å…ƒåŠŸèƒ½åŒ…</h2><p>åªåŒ…å«ä¸€ä¸ªpackage.xmlï¼Œå°†å¤šä¸ªåŠŸèƒ½åŒ…æ•´åˆæˆä¸€ä¸ªé€»è¾‘ä¸Šçš„ç‹¬ç«‹åŠŸèƒ½åŒ…</p>
<p>ä¸åŠŸèƒ½åŒ…ä¸­çš„ç±»ä¼¼ï¼Œéœ€é¢å¤–åŒ…å«ä¸€ä¸ª</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;export&gt;</span><br><span class="line">	&lt;metapackage/&gt;</span><br><span class="line">&lt;/export&gt;</span><br></pre></td></tr></table></figure>
<h1 id="3-ROSçš„é€šä¿¡æœºåˆ¶"><a href="#3-ROSçš„é€šä¿¡æœºåˆ¶" class="headerlink" title="3.ROSçš„é€šä¿¡æœºåˆ¶"></a>3.ROSçš„é€šä¿¡æœºåˆ¶</h1><h2 id="è¯é¢˜é€šä¿¡"><a href="#è¯é¢˜é€šä¿¡" class="headerlink" title="è¯é¢˜é€šä¿¡"></a>è¯é¢˜é€šä¿¡</h2><ul>
<li>Talker/Listeneræ³¨å†Œ</li>
<li>ROS Masterè¿›è¡Œä¿¡æ¯åŒ¹é…ï¼Œæ ¹æ®Listenerçš„è®¢é˜…ä¿¡æ¯ä»æ³¨å†Œåˆ—è¡¨æ‰¾Talkerï¼Œæ²¡æ‰¾åˆ°åˆ™ç­‰</li>
<li>Listenerå‘é€è¿æ¥è¯·æ±‚</li>
<li>Talkerç¡®è®¤è¿æ¥è¯·æ±‚</li>
<li>Listenerå°è¯•ä¸Talkerå»ºç«‹ç½‘ç»œè¿æ¥</li>
<li>Talkerå‘Listenerå‘å¸ƒæ•°æ®</li>
</ul>
<h2 id="æœåŠ¡é€šä¿¡"><a href="#æœåŠ¡é€šä¿¡" class="headerlink" title="æœåŠ¡é€šä¿¡"></a>æœåŠ¡é€šä¿¡</h2><p>ä¸è¯é¢˜ç›¸æ¯”å‡å°‘äº†RPCé€šä¿¡ï¼Œå³åŒ¹é…åç›´æ¥è¿›è¡Œç½‘ç»œè¿æ¥</p>
<p>æœåŠ¡æ˜¯ä¸€ç§å¸¦åº”ç­”çš„é€šä¿¡ï¼Œæœ€åä¸€æ­¥ä¸ºTalkeræ¥æ”¶åˆ°Listenerçš„è¯·æ±‚å’Œå‚æ•°åå¼€å§‹æ‰§è¡ŒæœåŠ¡åŠŸèƒ½ï¼Œå®ŒæˆåTalkerå‘é€åº”ç­”æ•°æ®ã€‚</p>
<h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><ul>
<li>å¼‚æ­¥ï¼›åŒæ­¥</li>
<li>æ— åé¦ˆï¼›æœ‰åé¦ˆ</li>
<li>æœ‰ç¼“å†²åŒºï¼›æ— ç¼“å†²åŒº</li>
<li>å¤šå¯¹å¤šï¼›ä¸€å¯¹ä¸€</li>
</ul>
<p>è¯é¢˜é€‚ç”¨äºä¸æ–­æ›´æ–°çš„æ•°æ®é€šä¿¡ï¼›æœåŠ¡é€‚ç”¨äºé€»è¾‘å¤„ç†å¤æ‚çš„æ•°æ®åŒæ­¥äº¤æ¢</p>
<h1 id="4-å°ä¹Œé¾Ÿä»¿çœŸ"><a href="#4-å°ä¹Œé¾Ÿä»¿çœŸ" class="headerlink" title="4.å°ä¹Œé¾Ÿä»¿çœŸ"></a>4.å°ä¹Œé¾Ÿä»¿çœŸ</h1><ul>
<li><p>roscoreä¸ºè¿è¡ŒROS Master</p>
</li>
<li><p>rosrun â€¦   â€¦    <strong>å¯åŠ¨â€¦åŠŸèƒ½åŒ…ä¸­çš„â€¦èŠ‚ç‚¹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rosrun turtlesim ...	å¯åŠ¨turtlesimåŠŸèƒ½åŒ…ä¸­çš„æŸä¸ªèŠ‚ç‚¹</span><br><span class="line">rosrun turtlesim 	turtlesim_node	å¯åŠ¨turtlesimä»¿çœŸå™¨èŠ‚ç‚¹</span><br><span class="line">rosrun turtlesim turtle_teleop_key	è¿è¡Œé”®ç›˜æ§åˆ¶èŠ‚ç‚¹</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="5-åˆ›å»ºå·¥ä½œç©ºé—´å’ŒåŠŸèƒ½åŒ…"><a href="#5-åˆ›å»ºå·¥ä½œç©ºé—´å’ŒåŠŸèƒ½åŒ…" class="headerlink" title="5.åˆ›å»ºå·¥ä½œç©ºé—´å’ŒåŠŸèƒ½åŒ…"></a>5.åˆ›å»ºå·¥ä½œç©ºé—´å’ŒåŠŸèƒ½åŒ…</h1><p>å·¥ä½œç©ºé—´æ˜¯å­˜æ”¾å·¥ç¨‹å¼€å‘ç›¸å…³æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œç°é»˜è®¤ä½¿ç”¨Catkinç¼–è¯‘ç³»ç»Ÿã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„å·¥ä½œç©ºé—´åŒ…å«ä»¥ä¸‹ç›®å½•ç©ºé—´ï¼š</p>
<ul>
<li>srcï¼šä»£ç ç©ºé—´ï¼Œå‚¨å­˜æ‰€æœ‰ROSåŠŸèƒ½åŒ…çš„æºç </li>
<li>buildï¼šç¼–è¯‘ç©ºé—´ï¼Œç”¨äºå­˜å‚¨å·¥ä½œç©ºé—´ç¼–è¯‘è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ç¼“å­˜ä¿¡æ¯å’Œä¸­é—´æ–‡ä»¶</li>
<li>develï¼šå¼€å‘ç©ºé—´ï¼Œæ”¾ç½®ç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶</li>
<li>installï¼šå®‰è£…ç©ºé—´ï¼Œç¼–è¯‘æˆåŠŸåï¼Œå¯ä»¥ä½¿ç”¨make installå‘½ä»¤å°†å¯æ‰§è¡Œæ–‡ä»¶å®‰è£…åˆ°å½“å‰å·¥ä½œç©ºé—´ã€‚è¿è¡Œè¯¥ç©ºé—´ä¸­çš„ç¯å¢ƒå˜é‡è„šæœ¬å³å¯åœ¨ç»ˆç«¯ä¸­è¿è¡Œè¿™äº›å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¯¥ç©ºé—´éå¿…è¦ã€‚</li>
</ul>
<h2 id="åˆ›å»ºå·¥ä½œç©ºé—´"><a href="#åˆ›å»ºå·¥ä½œç©ºé—´" class="headerlink" title="åˆ›å»ºå·¥ä½œç©ºé—´"></a>åˆ›å»ºå·¥ä½œç©ºé—´</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir catkin_ws/src</span><br><span class="line">è¿›å…¥srcå</span><br><span class="line">catkin_init_workspace	åˆ›å»ºå·¥ä½œç©ºé—´</span><br><span class="line">cd ..	å›åˆ°å·¥ä½œç©ºé—´</span><br><span class="line">catkin_make	ç¼–è¯‘</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘æˆåŠŸåï¼Œè‡ªåŠ¨ç”Ÿæˆbuildå’Œdevelã€‚develä¸­ç”Ÿæˆå‡ ä¸ªsetup.*shå½¢å¼çš„ç¯å¢ƒå˜é‡è®¾ç½®è„šæœ¬ï¼Œå¯ä½¿ç”¨sourceè¿è¡Œã€‚</p>
<p>è¿è¡Œåè¯¥å·¥ä½œç©ºé—´ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚å¯åœ¨å·¥ä½œç©ºé—´å¤–ä½¿ç”¨ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source devel/setup.bash</span><br><span class="line">è¯¥å‘½ä»¤è®¾ç½®çš„ç¯å¢ƒå˜é‡åªèƒ½åœ¨å½“å‰ç»ˆç«¯ä¸­å‰©ä¸‹</span><br></pre></td></tr></table></figure>
<img src="/images/loading.png" data-original="/2024/04/10/ROS-1/1.jpg" class title="This is an image"> 
<h2 id="åˆ›å»ºåŠŸèƒ½åŒ…"><a href="#åˆ›å»ºåŠŸèƒ½åŒ…" class="headerlink" title="åˆ›å»ºåŠŸèƒ½åŒ…"></a>åˆ›å»ºåŠŸèƒ½åŒ…</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">catkin_create_pkg &lt;package_name&gt; [depend1] [depend2]...</span><br></pre></td></tr></table></figure>
<ul>
<li><package_name>ä¸ºåŠŸèƒ½åŒ…åå­—</package_name></li>
<li>dependä¸ºå½“å‰åˆ›å»ºçš„åŠŸèƒ½åŒ…ç¼–è¯‘æ‰€ä¾èµ–çš„å…¶ä»–åŠŸèƒ½åŒ…câ€™d</li>
<li>ROSä¸å…è®¸åŠŸèƒ½åŒ…åµŒå¥—ï¼Œæ‰€æœ‰åŠŸèƒ½åŒ…<strong>å¹³è¡Œæ”¾ç½®åœ¨<u>src</u>ä¸­</strong></li>
<li>ä»»ä½•æ·»åŠ æ“ä½œå®Œåéƒ½åº”å›åˆ°æ ¹ç›®å½•sourceæ·»åŠ å…¶ç¯å¢ƒå˜é‡</li>
</ul>
<h2 id="å·¥ä½œç©ºé—´è¦†ç›–"><a href="#å·¥ä½œç©ºé—´è¦†ç›–" class="headerlink" title="å·¥ä½œç©ºé—´è¦†ç›–"></a>å·¥ä½œç©ºé—´è¦†ç›–</h2><p>ROSå…è®¸å¤šä¸ªå·¥ä½œç©ºé—´å¹¶å­˜ï¼Œå½“é‡åˆ°å·¥ä½œç©ºé—´ä¸­<strong>åå­—ç›¸åŒ</strong>ï¼ˆå†…å®¹ä¸ä¸€å®šç›¸åŒï¼‰çš„åŠŸèƒ½åŒ…æ—¶ï¼Œæ–°è®¾ç½®çš„è·¯å¾„ä¼šè‡ªåŠ¨æ”¾åˆ°æœ€å‰ç«¯ï¼Œåœ¨è¿è¡Œæ—¶ï¼ŒROSä¹Ÿä¼šä¼˜å…ˆæŸ¥æ‰¾æœ€å‰ç«¯çš„å·¥ä½œç©ºé—´æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„åŠŸèƒ½åŒ…ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rospack find ... æŸ¥æ‰¾...åŠŸèƒ½åŒ…çš„ä½ç½®</span><br><span class="line">/opt/rosä¸ºROSçš„é»˜è®¤å·¥ä½œç©ºé—´</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸€ä¸ªå·¥ä½œç©ºé—´ä¸‹çš„båŠŸèƒ½åŒ…<strong>ä¾èµ–</strong>åŒç©ºé—´çš„aåŠŸèƒ½åŒ…ï¼Œè€ŒaåŠŸèƒ½åŒ…åˆè¢«å¦ä¸€å·¥ä½œç©ºé—´ä¸‹çš„æ–°aåŠŸèƒ½åŒ…è¦†ç›–ï¼Œ<strong>è¯¥æ–°aåŠŸèƒ½åŒ…åå­—ä¸aåŠŸèƒ½åŒ…ç›¸åŒï¼Œä½†å†…å®¹å¯èƒ½ä¸åŒï¼Œ</strong>å› æ­¤å¯èƒ½å¯¼è‡´båŠŸèƒ½åŒ…å­˜åœ¨æ½œåœ¨é£é™©ã€‚</p>
<h1 id="6-vocodeé…ç½®ROSç¯å¢ƒ"><a href="#6-vocodeé…ç½®ROSç¯å¢ƒ" class="headerlink" title="6.vocodeé…ç½®ROSç¯å¢ƒ"></a>6.vocodeé…ç½®ROSç¯å¢ƒ</h1><h2 id="1æ‰“å¼€å·¥ä½œç©ºé—´"><a href="#1æ‰“å¼€å·¥ä½œç©ºé—´" class="headerlink" title="1æ‰“å¼€å·¥ä½œç©ºé—´"></a>1æ‰“å¼€å·¥ä½œç©ºé—´</h2><p>åœ¨å·¥ä½œç©ºé—´çš„æ ¹ç›®å½•ä¸‹è¾“å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">code .</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå®‰è£…äº†ROSæ’ä»¶ï¼ŒVScodeä¼šç›´æ¥è¯†åˆ«catkinç¯å¢ƒï¼Œå¹¶ä¸”è‡ªåŠ¨ç”Ÿæˆ.vscodeæ–‡ä»¶å¤¹ï¼Œé‡Œé¢ä¿å«c_cpp_properties.jsonã€settings.json ä¸¤ä¸ªæ–‡ä»¶ã€‚</p>
<h2 id="2åˆ›å»ºåŠŸèƒ½åŒ…"><a href="#2åˆ›å»ºåŠŸèƒ½åŒ…" class="headerlink" title="2åˆ›å»ºåŠŸèƒ½åŒ…"></a>2åˆ›å»ºåŠŸèƒ½åŒ…</h2><p>åœ¨vscodeèµ„æºç®¡ç†ä¸­å³é”®srcé€‰æ‹©create catkin package</p>
<h2 id="3é…ç½®ç›¸å…³æ–‡ä»¶"><a href="#3é…ç½®ç›¸å…³æ–‡ä»¶" class="headerlink" title="3é…ç½®ç›¸å…³æ–‡ä»¶"></a>3é…ç½®ç›¸å…³æ–‡ä»¶</h2><p>1.åœ¨.vscoceä¸‹çš„task.jsonï¼ˆè®°å¾—åŠ é€—å·å’Œå¼•å·ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;args&quot;: [</span><br><span class="line">	&quot;--directory&quot;,</span><br><span class="line">	&quot;/home/dhk/catkin_ws&quot;,</span><br><span class="line">	&quot;-DCMAKE_BUILD_TYPE=RelWithDebInfo&quot;, </span><br><span class="line">	&quot;-DCMAKE_EXPORT_COMPILE_COMMANDS=ON&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>2.åœ¨c_cpp_properties.jsonä¸­æ·»åŠ  ï¼ˆè®°å¾—é€—å·å’Œå¼•å·ï¼‰</p>
<p>â€œcompileCommandsâ€: â€œ${workspaceFolder}/build/compile_commands.jsonâ€ </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;configurations&quot;: [</span><br><span class="line">   &#123;</span><br><span class="line">     &quot;browse&quot;: &#123;</span><br><span class="line">       &quot;databaseFilename&quot;: &quot;$&#123;default&#125;&quot;,</span><br><span class="line">       &quot;limitSymbolsToIncludedHeaders&quot;: false</span><br><span class="line">     &#125;,</span><br><span class="line">     &quot;includePath&quot;: [</span><br><span class="line">       &quot;/opt/ros/noetic/include/**&quot;,</span><br><span class="line">       &quot;/home/dhk/catkin_ws/src/learning_communication/include/**&quot;,</span><br><span class="line">       &quot;/usr/include/**&quot;</span><br><span class="line">     ],</span><br><span class="line">     &quot;name&quot;: &quot;ROS&quot;,</span><br><span class="line">     &quot;intelliSenseMode&quot;: &quot;gcc-x64&quot;,</span><br><span class="line">     &quot;compilerPath&quot;: &quot;/usr/bin/gcc&quot;,</span><br><span class="line">     &quot;cStandard&quot;: &quot;gnu11&quot;,</span><br><span class="line">     &quot;cppStandard&quot;: &quot;c++14&quot;,</span><br><span class="line">     &quot;compileCommands&quot;: &quot;$&#123;workspaceFolder&#125;/build/compile_commands.json&quot;   </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><strong>è‹¥åç»­å¯¹èŠ‚ç‚¹æç¤ºæ‰¾ä¸åˆ°roså¤´æ–‡ä»¶ä¸”ç¡®å®æ— æ³•ç¼–è¯‘ï¼Œåº”è¯¥ä¸è¿™ä¸¤é¡¹æœ‰å…³</strong></p>
<h2 id="4ç¼–å†™æµ‹è¯•èŠ‚ç‚¹"><a href="#4ç¼–å†™æµ‹è¯•èŠ‚ç‚¹" class="headerlink" title="4ç¼–å†™æµ‹è¯•èŠ‚ç‚¹"></a>4ç¼–å†™æµ‹è¯•èŠ‚ç‚¹</h2><p>åœ¨æ–°åŠŸèƒ½åŒ…çš„srcä¸­åˆ›å»ºhelloworld.cppï¼Œç¼–å†™å¦‚ä¸‹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//æ‰§è¡Œ ros èŠ‚ç‚¹åˆå§‹åŒ–</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;hello&quot;</span>);<span class="comment">//èŠ‚ç‚¹åä¸ºhello</span></span><br><span class="line">    <span class="comment">//åˆ›å»º ros èŠ‚ç‚¹å¥æŸ„(éå¿…é¡»)</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line">    <span class="comment">//æ§åˆ¶å°è¾“å‡º hello world</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨<strong><u>æ–°åŠŸèƒ½åŒ…</u></strong>ä¸­çš„çš„CmakeLsit.txtæ·»åŠ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_executable(hello src/helloworld.cpp)</span><br><span class="line">target_link_libraries(hello $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…¶ä¸­</span><br><span class="line">add_executable(èŠ‚ç‚¹å src/æ–‡ä»¶å)</span><br><span class="line">target_link_libraries(èŠ‚ç‚¹å  $&#123;catkin_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>
<p>vscodeç¼–è¯‘ï¼Œæ•ˆæœåŒcatkin_make</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ‰§è¡Œå¿«æ·é”®ï¼šctrl+shift+b</span><br></pre></td></tr></table></figure>
<h2 id="5è¿è¡ŒROS-Master"><a href="#5è¿è¡ŒROS-Master" class="headerlink" title="5è¿è¡ŒROS Master"></a>5è¿è¡ŒROS Master</h2><p>å»ºè®®è¿˜æ˜¯ç”¨roscore</p>
<p>vscodeä¸­ c+s+p</p>
<p>ros:startå’Œros:stopå¯¹åº”å¼€å…³ï¼Œä½†æ˜¯è¿è¡Œåæ²¡æœ‰æç¤ºï¼Ÿ</p>
<h2 id="6è¿è¡ŒèŠ‚ç‚¹"><a href="#6è¿è¡ŒèŠ‚ç‚¹" class="headerlink" title="6è¿è¡ŒèŠ‚ç‚¹"></a>6è¿è¡ŒèŠ‚ç‚¹</h2><p>æ‰§è¡Œå¿«æ·é”®ctrl + shfit + pè¾“å…¥ROSï¼šRun a Ros executableï¼Œ ä¾æ¬¡è¾“å…¥ä½ åˆ›å»ºçš„åŠŸèƒ½åŒ…çš„åç§°ä»¥åŠèŠ‚ç‚¹åç§°ï¼ˆå³ç¼–è¯‘æˆåŠŸåäºŒè¿›åˆ¶æ–‡ä»¶çš„åç§°ï¼‰</p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å½“å·¥ä½œç©ºé—´å¯ä»¥æ­£å¸¸ç¼–è¯‘ä½†å´æ‰¾ä¸åˆ°åŠŸèƒ½åŒ…ä¸­çš„æŸä¸ªèŠ‚ç‚¹æ—¶ï¼š</p>
<p>å°†ç¬¬4èŠ‚ä¸­çš„</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_executable(hello src/helloworld.cpp)</span><br><span class="line">target_link_libraries(hello $&#123;catkin_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¸€å®šè¦æ”¾åœ¨è¯¥åŠŸèƒ½åŒ…ä¸­çš„CmakeLsit.txtçš„<strong><u>æœ«å°¾å¤„ï¼ï¼</u></strong></p>
<h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><p>ctrl+shift+pï¼šè°ƒå‡ºç”¨äºæ‰§è¡Œå‘½ä»¤çš„è¾“å…¥æ¡†<br>ctrl+shift+bï¼šç¼–è¯‘</p>
]]></content>
      <tags>
        <tag>ROS</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxã€ROSæ‚</title>
    <url>/2024/02/19/linux%E6%9D%82/</url>
    <content><![CDATA[<h1 id="Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±"><a href="#Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±" class="headerlink" title="Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±"></a>Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo service network-manager stop</span><br><span class="line">sudo rm /var/lib/NetworkManager/NetworkManager.state </span><br><span class="line">sudo service network-manager start</span><br></pre></td></tr></table></figure>
<h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><div class="table-container">
<table>
<thead>
<tr>
<th>ls</th>
<th>æŸ¥çœ‹å½“å‰ç›®å½•</th>
</tr>
</thead>
<tbody>
<tr>
<td>cd</td>
<td>è¿›å…¥ç›®æ ‡è·¯å¾„</td>
</tr>
<tr>
<td>pwd</td>
<td>æŸ¥çœ‹å½“å‰è·¯å¾„</td>
</tr>
<tr>
<td>mkdir</td>
<td>åˆ›å»ºç›®å½•</td>
</tr>
<tr>
<td>rmdir/rm</td>
<td>åˆ é™¤ç›®å½•</td>
</tr>
<tr>
<td>touch</td>
<td>åˆ›å»ºç©ºæ–‡ä»¶</td>
</tr>
<tr>
<td>echo</td>
<td>å°†å†…å®¹å›æ˜¾åˆ°æ ‡å‡†è¾“å‡ºï¼Œå¯é‡å®šå‘</td>
</tr>
<tr>
<td>file</td>
<td>æŸ¥çœ‹æ–‡ä»¶ç±»å‹</td>
</tr>
<tr>
<td>more/less</td>
<td>æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œç©ºæ ¼ç¿»é¡µï¼Œqé€€å‡ºã€‚ï¼ˆlessæ›´çµæ´»ï¼Œ/..æœç´¢å­—ç¬¦ä¸²ï¼‰</td>
</tr>
<tr>
<td>head/tail</td>
<td>æŸ¥çœ‹æ–‡ä»¶å¤´éƒ¨/å°¾éƒ¨</td>
</tr>
<tr>
<td>cat</td>
<td>å°†ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œå¯é‡å®šå‘</td>
</tr>
<tr>
<td>cat -n</td>
<td>ä»1å¼€å§‹å¯¹è¾“å‡ºè¡Œè¿›è¡Œç¼–å·ï¼Œ-sï¼šå°†å¤šè¡Œç©ºç™½åˆå¹¶</td>
</tr>
<tr>
<td>tar</td>
<td>-cæ–‡ä»¶æ‰“åŒ…ï¼›-xè§£åŒ…ï¼›-Aåˆå¹¶ï¼›-fæŒ‡å®šæ–‡ä»¶ï¼ŒåŠ åœ¨æœ€åï¼›-Cåˆ°æŒ‡å®šç›®å½•</td>
</tr>
<tr>
<td><em>cvf xvf ..-C..</em></td>
<td>-jè°ƒç”¨bzip2ï¼›-zè°ƒç”¨gzipï¼›-Zè°ƒç”¨compressï¼›-tåˆ—å‡ºåˆ—è¡¨;-vè¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr>
<td>mv</td>
<td>æ–‡ä»¶æ”¹åã€ç§»åŠ¨ã€‚è·¯å¾„ç›¸åŒåˆ™æ”¹åï¼Œä¸åŒåˆ™ç§»åŠ¨</td>
</tr>
<tr>
<td>cp</td>
<td>æ–‡ä»¶å¤åˆ¶</td>
</tr>
<tr>
<td>clear</td>
<td>æ¸…å±</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>find [è·¯å¾„] -name â€œâ€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ— è·¯å¾„é»˜è®¤æ¡Œé¢</span><br><span class="line">find -name &quot;*1*&quot;	åå­—å«1çš„æ–‡ä»¶</span><br><span class="line">find -name &quot;*.txt&quot;	ä¸ºåç¼€çš„æ–‡ä»¶</span><br><span class="line">find -name &quot;1*&quot;	ä»¥1ä¸ºå¼€å¤´çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>
</li>
<li><p>tar</p>
<p>æ‰“/è§£åŒ…æ–‡ä»¶ï¼Œè§£åŒ…åæ–‡ä»¶å­˜æ”¾è·¯å¾„ä¸ºå½“ä¸”æ–‡ä»¶å¤¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -cvf test.tar 1 2</span><br><span class="line">tar -xvf test.tar</span><br></pre></td></tr></table></figure>
<p>tarä¸‹çš„å‹ç¼©ä¸è§£å‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -zcvf test.gz 1 2</span><br><span class="line">tar -zxvf test.gz</span><br><span class="line">tar -zxvf test.gz -C æŒ‡å®šè·¯å¾„ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰</span><br><span class="line"></span><br><span class="line">tar -jcvf test.bz2 1 2</span><br><span class="line">tar -jxvf test.bz2</span><br><span class="line">tar -jxvf test.bz2 -C æŒ‡å®šè·¯å¾„ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰</span><br></pre></td></tr></table></figure>
</li>
<li><p>è½¯ä»¶å®‰è£…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 1. å®‰è£…è½¯ä»¶</span><br><span class="line">sudo apt install è½¯ä»¶åŒ…</span><br><span class="line"># 2. å¸è½½è½¯ä»¶</span><br><span class="line">sudo apt remove è½¯ä»¶å</span><br><span class="line"># 3. æ›´æ–°å·²å®‰è£…çš„åŒ…</span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure>
</li>
<li><p>which æç¤ºæ–‡ä»¶/å‘½ä»¤æ‰€åœ¨ä½ç½®</p>
</li>
</ul>
<h2 id="æ€æ­»è¿›ç¨‹"><a href="#æ€æ­»è¿›ç¨‹" class="headerlink" title="æ€æ­»è¿›ç¨‹"></a>æ€æ­»è¿›ç¨‹</h2><ul>
<li>xkill    å¼ºåˆ¶å…³é—­çª—å£</li>
<li>kill (pidå·)     pidå·ç”¨ps -auxæŸ¥è¯¢</li>
<li>pkill (ç¨‹åºå)</li>
</ul>
<h1 id="ROSæ— æ³•å®šä½è½¯ä»¶åŒ…"><a href="#ROSæ— æ³•å®šä½è½¯ä»¶åŒ…" class="headerlink" title="ROSæ— æ³•å®šä½è½¯ä»¶åŒ…"></a>ROSæ— æ³•å®šä½è½¯ä»¶åŒ…</h1><p><a href="https://fishros.org.cn/forum/topic/149/e-æ— æ³•å®šä½è½¯ä»¶åŒ…/3">Eï¼šæ— æ³•å®šä½è½¯ä»¶åŒ… | é±¼é¦™ROS (fishros.org.cn)</a></p>
<p>ç‰ˆæœ¬å¯¹åº”oræºçš„é—®é¢˜ï¼Œubuntu20å¯¹åº”noetic</p>
<h1 id="ROS-TFä¹Œé¾Ÿç¨‹åºæŠ¥é”™"><a href="#ROS-TFä¹Œé¾Ÿç¨‹åºæŠ¥é”™" class="headerlink" title="ROS TFä¹Œé¾Ÿç¨‹åºæŠ¥é”™"></a>ROS TFä¹Œé¾Ÿç¨‹åºæŠ¥é”™</h1><p><code>sudo apt install python-is-python3</code>å‡çº§pythonç‰ˆæœ¬</p>
<h1 id="view-framesæ„å¤–åœæ­¢"><a href="#view-framesæ„å¤–åœæ­¢" class="headerlink" title="view_framesæ„å¤–åœæ­¢"></a><strong>view_frames</strong>æ„å¤–åœæ­¢</h1><ul>
<li><code>sudo apt-get install vim</code></li>
<li><code>sudo vim /opt/ros/noetic/lib/tf/view_frames</code> </li>
<li>89è¡Œå¤„ï¼Œä¿®æ”¹ä¸º <code>m = r.search(vstr.decode(&#39;utf-8&#39;))</code> </li>
</ul>
<h2 id="Vimçš„è¾“å…¥æ¨¡å¼"><a href="#Vimçš„è¾“å…¥æ¨¡å¼" class="headerlink" title="Vimçš„è¾“å…¥æ¨¡å¼"></a>Vimçš„è¾“å…¥æ¨¡å¼</h2><p>åœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼ŒVim å¯ä»¥å¯¹æ–‡ä»¶æ‰§è¡Œå†™æ“ä½œï¼Œç±»ä¼¼äºåœ¨ Windows ç³»ç»Ÿçš„æ–‡æ¡£ä¸­è¾“å…¥å†…å®¹ã€‚</p>
<p>ä½¿ Vim è¿›è¡Œè¾“å…¥æ¨¡å¼çš„æ–¹å¼æ˜¯åœ¨å‘½ä»¤æ¨¡å¼çŠ¶æ€ä¸‹è¾“å…¥ iã€Iã€aã€Aã€oã€O ç­‰æ’å…¥å‘½ä»¤ï¼ˆå„æŒ‡ä»¤çš„å…·ä½“åŠŸèƒ½å¦‚è¡¨ 3 æ‰€ç¤ºï¼‰ï¼Œ<strong>å½“ç¼–è¾‘æ–‡ä»¶å®ŒæˆåæŒ‰ Esc é”®å³å¯è¿”å›å‘½ä»¤æ¨¡å¼ã€‚</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>åŠŸèƒ½æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td><strong>åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨ä½ç½®æ’å…¥éšåè¾“å…¥çš„æ–‡æœ¬ï¼Œå…‰æ ‡åçš„æ–‡æœ¬ç›¸åº”å‘å³ç§»åŠ¨</strong></td>
</tr>
<tr>
<td>I</td>
<td>åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–æ’å…¥éšåè¾“å…¥çš„æ–‡æœ¬ï¼Œè¡Œé¦–æ˜¯è¯¥è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ï¼Œç›¸å½“äºå…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–æ‰§è¡Œ i å‘½ä»¤</td>
</tr>
<tr>
<td>o</td>
<td>åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹é¢æ’å…¥æ–°çš„ä¸€è¡Œã€‚å…‰æ ‡åœåœ¨ç©ºè¡Œé¦–ï¼Œç­‰å¾…è¾“å…¥æ–‡æœ¬</td>
</tr>
<tr>
<td>O</td>
<td>åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šé¢æ’å…¥æ–°çš„ä¸€è¡Œã€‚å…‰æ ‡åœåœ¨ç©ºè¡Œçš„è¡Œé¦–ï¼Œç­‰å¾…è¾“å…¥æ–‡æœ¬</td>
</tr>
<tr>
<td>a</td>
<td>åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨ä½ç½®ä¹‹åæ’å…¥éšåè¾“å…¥çš„æ–‡æœ¬</td>
</tr>
<tr>
<td>A</td>
<td>åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå°¾æ’å…¥éšåè¾“å…¥çš„æ–‡æœ¬ï¼Œç›¸å½“äºå…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾å†æ‰§è¡Œaå‘½ä»¤</td>
</tr>
</tbody>
</table>
</div>
<h2 id="é€€å‡ºvim"><a href="#é€€å‡ºvim" class="headerlink" title="é€€å‡ºvim"></a>é€€å‡ºvim</h2><p><strong>æŒ‰esc</strong>åï¼Œè¾“å…¥å¦‚ä¸‹ï¼Œä¸€èˆ¬<code>:wq</code>å°±è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:q  </span><br><span class="line">//é€€å‡º</span><br><span class="line"></span><br><span class="line">:q! </span><br><span class="line">//é€€å‡ºä¸”ä¸ä¿å­˜ï¼ˆ:quit!çš„ç¼©å†™ï¼‰</span><br><span class="line"></span><br><span class="line">:wq</span><br><span class="line">//ä¿å­˜å¹¶é€€å‡º</span><br><span class="line"></span><br><span class="line">:wq!</span><br><span class="line">//ä¿å­˜å¹¶é€€å‡ºå³ä½¿æ–‡ä»¶æ²¡æœ‰å†™å…¥æƒé™ï¼ˆå¼ºåˆ¶ä¿å­˜é€€å‡ºï¼‰</span><br><span class="line"></span><br><span class="line">:x</span><br><span class="line">//ä¿å­˜å¹¶é€€å‡ºï¼ˆç±»ä¼¼:wqï¼Œä½†æ˜¯åªæœ‰åœ¨æœ‰æ›´æ”¹çš„æƒ…å†µä¸‹æ‰ä¿å­˜ï¼‰</span><br><span class="line"></span><br><span class="line">:exit</span><br><span class="line">//ä¿å­˜å¹¶é€€å‡ºï¼ˆå’Œ:xç›¸åŒï¼‰</span><br><span class="line"></span><br><span class="line">:qa</span><br><span class="line">//é€€å‡ºæ‰€æœ‰(:quitallçš„ç¼©å†™)</span><br><span class="line"></span><br><span class="line">:cq</span><br><span class="line">//é€€å‡ºä¸”ä¸ä¿å­˜ï¼ˆå³ä¾¿æœ‰é”™è¯¯ï¼‰</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ROS</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºç¡€ä¹ç†</title>
    <url>/2024/02/05/%E5%9F%BA%E7%A1%80%E4%B9%90%E7%90%86/</url>
    <content><![CDATA[<h1 id="å¸¸ç”¨å¤§è°ƒ"><a href="#å¸¸ç”¨å¤§è°ƒ" class="headerlink" title="å¸¸ç”¨å¤§è°ƒ"></a>å¸¸ç”¨å¤§è°ƒ</h1><h2 id="Cå¤§è°ƒ"><a href="#Cå¤§è°ƒ" class="headerlink" title="Cå¤§è°ƒ"></a>Cå¤§è°ƒ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
<th style="text-align:center">E</th>
<th style="text-align:center">F</th>
<th style="text-align:center">G</th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
<td style="text-align:center">8</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Då¤§è°ƒ"><a href="#Då¤§è°ƒ" class="headerlink" title="Då¤§è°ƒ"></a>Då¤§è°ƒ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">D</th>
<th style="text-align:center">E</th>
<th style="text-align:center">å‡F</th>
<th style="text-align:center">G</th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">å‡C</th>
<th style="text-align:center">D</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
<td style="text-align:center">8</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Eå¤§è°ƒ"><a href="#Eå¤§è°ƒ" class="headerlink" title="Eå¤§è°ƒ"></a>Eå¤§è°ƒ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">E</th>
<th style="text-align:center">å‡F</th>
<th style="text-align:center">å‡G</th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">å‡C</th>
<th style="text-align:center">å‡D</th>
<th style="text-align:center">E</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
<td style="text-align:center">8</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Få¤§è°ƒ"><a href="#Få¤§è°ƒ" class="headerlink" title="Få¤§è°ƒ"></a>Få¤§è°ƒ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">F</th>
<th style="text-align:center">G</th>
<th style="text-align:center">A</th>
<th style="text-align:center">é™B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
<th style="text-align:center">E</th>
<th style="text-align:center">F</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
<td style="text-align:center">8</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Gå¤§è°ƒ"><a href="#Gå¤§è°ƒ" class="headerlink" title="Gå¤§è°ƒ"></a>Gå¤§è°ƒ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">G</th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
<th style="text-align:center">E</th>
<th style="text-align:center">å‡F</th>
<th style="text-align:center">G</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
<td style="text-align:center">8</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Aå¤§è°ƒ"><a href="#Aå¤§è°ƒ" class="headerlink" title="Aå¤§è°ƒ"></a>Aå¤§è°ƒ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">å‡C</th>
<th style="text-align:center">D</th>
<th style="text-align:center">E</th>
<th style="text-align:center">å‡F</th>
<th style="text-align:center">å‡G</th>
<th style="text-align:center">A</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
<td style="text-align:center">8</td>
</tr>
</tbody>
</table>
</div>
<h1 id="å¤§å°è°ƒå…³ç³»"><a href="#å¤§å°è°ƒå…³ç³»" class="headerlink" title="å¤§å°è°ƒå…³ç³»"></a>å¤§å°è°ƒå…³ç³»</h1><ul>
<li>å¤§è°ƒéŸ³é˜¶çš„6çº§éŸ³ä¸ºå…¶å…³ç³»å°è°ƒçš„æ ¹éŸ³ï¼›å°è°ƒéŸ³é˜¶çš„3çº§éŸ³ä¸ºå…¶å…³ç³»å¤§è°ƒçš„æ ¹éŸ³</li>
<li>å¤§è°ƒæŒ‡å‹+1ä¸ºå°è°ƒæŒ‡å‹</li>
</ul>
<h1 id="äº”å£°éŸ³é˜¶"><a href="#äº”å£°éŸ³é˜¶" class="headerlink" title="äº”å£°éŸ³é˜¶"></a>äº”å£°éŸ³é˜¶</h1><p>æ¯ä¸ªå¼¦ä¸Šéƒ½åªæœ‰ä¸¤ä¸ªéŸ³ç¬¦</p>
<h2 id="å¤§è°ƒ"><a href="#å¤§è°ƒ" class="headerlink" title="å¤§è°ƒ"></a>å¤§è°ƒ</h2><p>å»é™¤4çº§éŸ³å’Œ7çº§éŸ³</p>
<h2 id="å°è°ƒ"><a href="#å°è°ƒ" class="headerlink" title="å°è°ƒ"></a>å°è°ƒ</h2><p>å»é™¤2çº§éŸ³å’Œå…­çº§éŸ³</p>
<h2 id="å…³ç³»äº”å£°éŸ³é˜¶"><a href="#å…³ç³»äº”å£°éŸ³é˜¶" class="headerlink" title="å…³ç³»äº”å£°éŸ³é˜¶"></a>å…³ç³»äº”å£°éŸ³é˜¶</h2><p>åŒå¤§å°è°ƒå…³ç³»ï¼Œå…¶å»é™¤çš„éŸ³ä¸èƒ½ä½œä¸ºæ ¹éŸ³</p>
<h2 id="æ¨éŸ³é˜¶"><a href="#æ¨éŸ³é˜¶" class="headerlink" title="æ¨éŸ³é˜¶"></a>æ¨éŸ³é˜¶</h2><p>å…ˆç”±çº§æ•°ç¡®å®šéŸ³çº§ï¼Œå†ç¡®å®šå‡é™</p>
<p>æ¨å‡ºæ¥å­—æ¯æ•°ä¸å¯¹ï¼ŒæŠŠæ ¹éŸ³å‡é™æ¢ä¸€ä¸‹</p>
<h1 id="å¤§è°ƒçš„çº¯éŸ³ç¨‹"><a href="#å¤§è°ƒçš„çº¯éŸ³ç¨‹" class="headerlink" title="å¤§è°ƒçš„çº¯éŸ³ç¨‹"></a>å¤§è°ƒçš„çº¯éŸ³ç¨‹</h1><p>éŸ³ç¨‹åˆ†ä¸ºåº¦æ•°å’Œæ€§è´¨ï¼Œåº¦æ•°æŒ‡éŸ³çº§<strong>çº§æ•°</strong>ï¼ˆå­—æ¯ï¼‰ï¼Œæ€§è´¨æŒ‡å…·ä½“ä½ç½®</p>
<p>éŸ³ç¨‹æŒ‡å½“å‰è°ƒå¼ä¸‹çš„<strong>è·ç¦»</strong></p>
<h2 id="ä¸Šä¸‹è¡Œ"><a href="#ä¸Šä¸‹è¡Œ" class="headerlink" title="ä¸Šä¸‹è¡Œ"></a>ä¸Šä¸‹è¡Œ</h2><p>ä¸Šè¡Œï¼šå‘é«˜éŸ³æ¨ï¼ˆæ ¹éŸ³ä½œä¸º1çº§éŸ³ï¼‰</p>
<p>ä¸‹è¡Œï¼šå‘ä½éŸ³æ¨ï¼ˆæ ¹éŸ³ä½œä¸º8çº§éŸ³ï¼‰</p>
<p><strong>éŸ³ç¨‹æ˜¯å›ºå®šçš„è·ç¦»ï¼Œå› æ­¤æ— è®ºä¸Šä¸‹è¡Œå…¶è·ç¦»éƒ½æ˜¯ç›¸åŒçš„ï¼ŒæŒ‡å‹éƒ½æ˜¯å›ºå®šçš„</strong>ï¼ˆé‡è¦ï¼ï¼ï¼ï¼‰</p>
<h2 id="å¤§è°ƒçº¯éŸ³ç¨‹å®šä¹‰"><a href="#å¤§è°ƒçº¯éŸ³ç¨‹å®šä¹‰" class="headerlink" title="å¤§è°ƒçº¯éŸ³ç¨‹å®šä¹‰"></a>å¤§è°ƒçº¯éŸ³ç¨‹å®šä¹‰</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">åº¦æ•°</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
<th style="text-align:center">7</th>
<th style="text-align:center">8</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ€§è´¨</td>
<td style="text-align:center">çº¯</td>
<td style="text-align:center">å¤§</td>
<td style="text-align:center">å¤§</td>
<td style="text-align:center">çº¯</td>
<td style="text-align:center">çº¯</td>
<td style="text-align:center">å¤§</td>
<td style="text-align:center">å¤§</td>
<td style="text-align:center">çº¯</td>
</tr>
</tbody>
</table>
</div>
<h2 id="æŒ‡æ¿éŸ³ç¨‹è§„å¾‹ï¼ˆå‡å¯æ­£ã€å€’æ¨ï¼‰"><a href="#æŒ‡æ¿éŸ³ç¨‹è§„å¾‹ï¼ˆå‡å¯æ­£ã€å€’æ¨ï¼‰" class="headerlink" title="æŒ‡æ¿éŸ³ç¨‹è§„å¾‹ï¼ˆå‡å¯æ­£ã€å€’æ¨ï¼‰"></a>æŒ‡æ¿éŸ³ç¨‹è§„å¾‹ï¼ˆå‡å¯æ­£ã€å€’æ¨ï¼‰</h2><h3 id="çº¯ä¸€åº¦"><a href="#çº¯ä¸€åº¦" class="headerlink" title="çº¯ä¸€åº¦"></a>çº¯ä¸€åº¦</h3><p>åŒä¸€éŸ³ç¬¦</p>
<p>ä¸¤å¼¦é—´å…¨éŸ³è§„å¾‹å†<strong>å‡</strong>1ä¸ªå…¨éŸ³è·ç¦»</p>
<h3 id="å¤§äºŒåº¦"><a href="#å¤§äºŒåº¦" class="headerlink" title="å¤§äºŒåº¦"></a><u>å¤§äºŒåº¦</u></h3><p>åŒå…¨éŸ³è§„å¾‹ï¼Œå¤§äºŒåº¦é•¿åº¦ä¸º<strong>1ä¸ªå…¨éŸ³ï¼</strong></p>
<h3 id="å¤§ä¸‰åº¦"><a href="#å¤§ä¸‰åº¦" class="headerlink" title="å¤§ä¸‰åº¦"></a>å¤§ä¸‰åº¦</h3><p>ä¸¤ä¸ªå…¨éŸ³è·ç¦»ï¼Œä¸¤å¼¦é—´å…¨éŸ³è§„å¾‹å†<strong>åŠ </strong>ä¸€ä¸ªå…¨éŸ³è·ç¦»</p>
<ul>
<li>åŒä¸€å¼¦å‘ä¸Šï¼ˆé«˜ï¼‰4å“</li>
<li>é™¤2ã€3ä¸ç§»åŠ¨ï¼Œå…¶ä½™ç›¸é‚»å¼¦å‘ä¸‹1å“</li>
</ul>
<h3 id="çº¯å››åº¦"><a href="#çº¯å››åº¦" class="headerlink" title="çº¯å››åº¦"></a><u>çº¯å››åº¦</u></h3><ul>
<li><p>é™¤2ã€3å¼¦ï¼Œå…¶ä½™å¼¦åŒä¸€å“å‡ä¸ºçº¯å››åº¦ï¼ˆ<strong>æ ‡å‡†è°ƒå¼¦</strong>ï¼‰</p>
</li>
<li><p>2ã€3å¼¦åŒå“ä¸ºå¤§ä¸‰åº¦ï¼Œå› æ­¤çº¯å››åº¦å‘ä¸Šï¼ˆé«˜ï¼‰1å“</p>
</li>
<li>åŒä¸€å¼¦å‘ä¸Š5å“</li>
</ul>
<h3 id="çº¯äº”åº¦"><a href="#çº¯äº”åº¦" class="headerlink" title="çº¯äº”åº¦"></a>çº¯äº”åº¦</h3><p>é€šè¿‡çº¯å››åº¦è®°å¿†</p>
<ul>
<li>ç›¸é‚»å¼¦çº¯å››åº¦å†å‘åŠ 1ä¸ªå…¨éŸ³è·ç¦»</li>
<li>ç›¸éš”2å¼¦é€šè¿‡çº¯å››åº¦+å…¨éŸ³è§„å¾‹ç¡®å®š</li>
</ul>
<h3 id="å¤§å…­åº¦"><a href="#å¤§å…­åº¦" class="headerlink" title="å¤§å…­åº¦"></a>å¤§å…­åº¦</h3><p>ç¡¬è®°orçº¯äº”åº¦ã€å¤§ä¸ƒåº¦æ¨</p>
<h3 id="å¤§ä¸ƒåº¦"><a href="#å¤§ä¸ƒåº¦" class="headerlink" title="å¤§ä¸ƒåº¦"></a>å¤§ä¸ƒåº¦</h3><p>çº¯å…«åº¦å‘ä¸‹<strong>1</strong>å“ï¼ˆå¤§è°ƒä¸­7ã€8çº§ä¸ºåŠéŸ³å…³ç³»ï¼‰</p>
<h3 id="çº¯å…«åº¦"><a href="#çº¯å…«åº¦" class="headerlink" title="çº¯å…«åº¦"></a><u>çº¯å…«åº¦</u></h3><p>5ä¸ªæ ¹éŸ³æŒ‡å‹</p>
<h2 id="ç»¼ä¸Š"><a href="#ç»¼ä¸Š" class="headerlink" title="ç»¼ä¸Š"></a>ç»¼ä¸Š</h2><p>å¤§äºŒåº¦ï¼ˆå…¨éŸ³è§„å¾‹ï¼‰â€”â€”&gt;çº¯ä¸€åº¦ã€å¤§ä¸‰åº¦</p>
<p>çº¯å››åº¦ï¼ˆæ ‡å‡†è°ƒå¼¦ï¼‰â€”â€”&gt;çº¯äº”åº¦ã€å¤§ä¸‰åº¦</p>
<p>çº¯å…«åº¦ï¼ˆæ ¹éŸ³æŒ‡å‹ï¼‰â€”â€”&gt;å¤§ä¸ƒåº¦</p>
<p>å¤§å…­åº¦</p>
<h1 id="å°ã€å‡ã€å¢éŸ³ç¨‹"><a href="#å°ã€å‡ã€å¢éŸ³ç¨‹" class="headerlink" title="å°ã€å‡ã€å¢éŸ³ç¨‹"></a>å°ã€å‡ã€å¢éŸ³ç¨‹</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><ul>
<li><strong>çº¯</strong>éŸ³ç¨‹å¢/å‡åŠéŸ³â€”â€”&gt;<strong>å¢/å‡</strong>éŸ³ç¨‹</li>
<li>å¤§éŸ³ç¨‹å¢åŠéŸ³â€”â€”&gt;<strong>å¢</strong>éŸ³ç¨‹</li>
<li>å¤§éŸ³ç¨‹å‡åŠéŸ³â€”â€”&gt;<strong>å°</strong>éŸ³ç¨‹</li>
<li>å¤§éŸ³ç¨‹å‡å…¨éŸ³â€”â€”&gt;<strong>å‡</strong>éŸ³ç¨‹</li>
</ul>
<h2 id="éŸ³ç¨‹ç®€å†™"><a href="#éŸ³ç¨‹ç®€å†™" class="headerlink" title="éŸ³ç¨‹ç®€å†™"></a>éŸ³ç¨‹ç®€å†™</h2><ul>
<li>æè¿°éŸ³ç¨‹æ—¶ï¼Œå‡ã€é™è®°å·æ”¾åœ¨æ•°å­—å‰ï¼›å¤§éŸ³ç¨‹åˆ°å‡éŸ³ç¨‹ä¸º2ä¸ªé™è®°å·</li>
<li>å¢å››åº¦å’Œå‡äº”åº¦æˆä¸ºä¸‰å…¨éŸ³(TT)</li>
<li>miä¸ºå°ï¼›dimä¸ºå‡ï¼›augä¸ºå¢</li>
</ul>
<h2 id="å‘½å"><a href="#å‘½å" class="headerlink" title="å‘½å"></a>å‘½å</h2><p>æ¯ä¸ªéŸ³ç¨‹å¯èƒ½æœ‰å¤šä¸ªåç§°ï¼ˆå¢å››åº¦å’Œå‡äº”åº¦ï¼›å¤§ä¸‰åº¦å’Œå‡å››åº¦éƒ½æ˜¯åŒä¸€éŸ³ç¨‹ï¼‰ï¼Œä½†å½“ä¸¤ä¸ªéŸ³çš„ç¬¦å·çŸ¥é“æ—¶ï¼ŒéŸ³ç¨‹åå”¯ä¸€ï¼ˆæ¯ä¸ªå­—æ¯åªå‡ºç°ä¸€æ¬¡ï¼‰</p>
<p>xåº¦çš„xç­‰äºå½“å‰éŸ³åœ¨å¤§è°ƒä¸­çš„<strong>çº§æ•°</strong></p>
<h1 id="å¤åˆéŸ³ç¨‹"><a href="#å¤åˆéŸ³ç¨‹" class="headerlink" title="å¤åˆéŸ³ç¨‹"></a>å¤åˆéŸ³ç¨‹</h1><p>å¤§ä¹åº¦=äºŒåº¦+å…«åº¦</p>
<p>çº¯åäº”åº¦=å…«åº¦+å…«åº¦</p>
<p>ç…§æ¨å³å¯ï¼Œæ‰¾åˆ°å°åº¦çš„ä½ç½®åç›´æ¥æŒ‰ç…§æ ¹éŸ³æŒ‡å‹åŠ å…«åº¦<strong>ï¼ˆæ³¨æ„ç›¸åŠ åçš„åº¦æ•°è¦å‡1æ‰ä¸ºå½“å‰åº¦æ•°ï¼‰</strong></p>
<p>ä¾‹å¦‚å¤§ä¹åº¦ï¼Œæ‰¾åˆ°å¤§äºŒåº¦åç›´æ¥åŠ ä¸€ä¸ªå…«åº¦éŸ³ç¨‹</p>
<h1 id="ä¸‰å’Œå¼¦ç¶éŸ³"><a href="#ä¸‰å’Œå¼¦ç¶éŸ³" class="headerlink" title="ä¸‰å’Œå¼¦ç¶éŸ³"></a>ä¸‰å’Œå¼¦ç¶éŸ³</h1><h2 id="å¤§ä¸‰å’Œå¼¦-C"><a href="#å¤§ä¸‰å’Œå¼¦-C" class="headerlink" title="å¤§ä¸‰å’Œå¼¦(C)"></a>å¤§ä¸‰å’Œå¼¦(C)</h2><p>ç”±æ ¹éŸ³å’Œæ ¹éŸ³çš„å¤§ä¸‰åº¦ã€çº¯äº”åº¦ç»„æˆ</p>
<p><strong>æ ¹éŸ³çº¯äº”åº¦ä½ç½®ä¸ä¸‹ä¸€æ ¹éŸ³ä¹‹é—´ä¸ºçº¯å››åº¦å…³ç³»</strong></p>
<p>â€‹    å› æ­¤é™¤äºŒä¸‰å¼¦å¤–ï¼Œçº¯äº”åº¦å¿…åœ¨ä¸‹ä¸€æ ¹éŸ³æ­£ä¸Šæ–¹ï¼›äºŒä¸‰å¼¦å†é«˜1ä¸ªåŠéŸ³è·ç¦»å³å¯</p>
<h2 id="å°ä¸‰å’Œå¼¦-Cm"><a href="#å°ä¸‰å’Œå¼¦-Cm" class="headerlink" title="å°ä¸‰å’Œå¼¦(Cm)"></a>å°ä¸‰å’Œå¼¦(Cm)</h2><p>ç”±æ ¹éŸ³å’Œæ ¹éŸ³çš„<strong>å°ä¸‰åº¦</strong>ã€çº¯äº”åº¦ç»„æˆ</p>
<p>â€‹    åœ¨å¤§ä¸‰åº¦å¤„å‡åŠéŸ³</p>
<p>â€‹    å¯ä»¥é€šè¿‡å¢äºŒåº¦æ¨ï¼ŒåŒå¼¦ä¸Šå°ä¸‰åº¦ä¸æ ¹éŸ³ç›¸å·®ä¸‰ä¸ªå“ä½</p>
<h2 id="å‡ä¸‰å’Œå¼¦-Cdim"><a href="#å‡ä¸‰å’Œå¼¦-Cdim" class="headerlink" title="å‡ä¸‰å’Œå¼¦(Cdim)"></a>å‡ä¸‰å’Œå¼¦(Cdim)</h2><p>ç”±æ ¹éŸ³å’Œæ ¹éŸ³çš„<strong>å°ä¸‰åº¦</strong>ã€<strong>å‡äº”åº¦</strong>ç»„æˆï¼ˆä¸æ˜¯å‡ä¸‰åº¦ï¼‰</p>
<p>â€‹    <strong>æ ¹éŸ³çº¯äº”åº¦ä½ç½®ä¸ä¸‹ä¸€æ ¹éŸ³ä¹‹é—´ä¸ºå¢å››åº¦å…³ç³»</strong>ï¼Œå› æ­¤åœ¨çº¯å››åº¦åŸºç¡€ä¸Šè¿˜è¦<strong>å¢åŠ </strong>1ä¸ªåŠéŸ³è·ç¦»</p>
<h2 id="å¢ä¸‰å’Œå¼¦-Caug"><a href="#å¢ä¸‰å’Œå¼¦-Caug" class="headerlink" title="å¢ä¸‰å’Œå¼¦(Caug)"></a>å¢ä¸‰å’Œå¼¦(Caug)</h2><p>ç”±æ ¹éŸ³å’Œæ ¹éŸ³çš„å¤§ä¸‰åº¦ã€<strong>å¢äº”åº¦</strong>ç»„æˆ</p>
<p>ç”±äºå¢äº”åº¦ä¸ä¸‹ä¸€æ ¹éŸ³ä¸ºå‡å››åº¦å…³ç³»ï¼Œç­‰åŒäºå¤§ä¸‰åº¦</p>
<p>â€‹    å› æ­¤å¢ä¸‰å’Œå¼¦ä¸­<strong>æ¯ä¸ªéŸ³é—´éš”éƒ½ä¸ºå¤§ä¸‰åº¦</strong>ï¼Œ<strong>æ‰€æœ‰éŸ³éƒ½å¯ä»¥ä½œä¸ºæ ¹éŸ³</strong>ï¼Œæ‰€æœ‰éŸ³éƒ½å¯ä»¥åœ¨ä¸Šä¸€éŸ³ä¸Šç”¨å¤§ä¸‰åº¦æŒ‡æ¿è§„å¾‹æ¨ï¼ˆæœ€ç®€å•çš„ä¸€é›†ï¼‰</p>
<h1 id="ä¸‰å’Œå¼¦"><a href="#ä¸‰å’Œå¼¦" class="headerlink" title="ä¸‰å’Œå¼¦"></a>ä¸‰å’Œå¼¦</h1><h2 id="å¯†é›†å’Œå¼¦"><a href="#å¯†é›†å’Œå¼¦" class="headerlink" title="å¯†é›†å’Œå¼¦"></a>å¯†é›†å’Œå¼¦</h2><p>æŒ‰ç…§135çš„é¡ºåºå›ºå®šæ’åˆ—çš„å’Œå¼¦</p>
<h2 id="è½¬ä½"><a href="#è½¬ä½" class="headerlink" title="è½¬ä½"></a>è½¬ä½</h2><ul>
<li>åŸä½ï¼šæœ€ä½éŸ³ä¸ºæ ¹éŸ³</li>
<li>ç¬¬ä¸€è½¬ä½ï¼šæœ€ä½éŸ³ä¸ºä¸‰åº¦éŸ³</li>
<li>ç¬¬äºŒè½¬ä½ï¼šæœ€ä½éŸ³ä¸ºäº”åº¦éŸ³</li>
</ul>
<h1 id="ä¸ƒå’Œå¼¦"><a href="#ä¸ƒå’Œå¼¦" class="headerlink" title="ä¸ƒå’Œå¼¦"></a>ä¸ƒå’Œå¼¦</h1><h2 id="å¤§ä¸ƒå’Œå¼¦ï¼ˆCmaj7ï¼‰"><a href="#å¤§ä¸ƒå’Œå¼¦ï¼ˆCmaj7ï¼‰" class="headerlink" title="å¤§ä¸ƒå’Œå¼¦ï¼ˆCmaj7ï¼‰"></a>å¤§ä¸ƒå’Œå¼¦ï¼ˆCmaj7ï¼‰</h2><p>1ã€3ã€5ã€7</p>
<h2 id="å°ä¸ƒå’Œå¼¦ï¼ˆCm7ï¼‰"><a href="#å°ä¸ƒå’Œå¼¦ï¼ˆCm7ï¼‰" class="headerlink" title="å°ä¸ƒå’Œå¼¦ï¼ˆCm7ï¼‰"></a>å°ä¸ƒå’Œå¼¦ï¼ˆCm7ï¼‰</h2><p>å°ä¸‰å’Œå¼¦+<strong>å°</strong>ä¸ƒåº¦</p>
<p>â€‹    æ ¹éŸ³+<strong>å°ä¸‰åº¦</strong>+çº¯äº”åº¦+<strong>å°ä¸ƒåº¦</strong></p>
<h2 id="å±ä¸ƒå’Œå¼¦ï¼ˆC7ï¼‰"><a href="#å±ä¸ƒå’Œå¼¦ï¼ˆC7ï¼‰" class="headerlink" title="å±ä¸ƒå’Œå¼¦ï¼ˆC7ï¼‰"></a>å±ä¸ƒå’Œå¼¦ï¼ˆC7ï¼‰</h2><p>å¤§ä¸‰å’Œå¼¦+<strong>å°</strong>ä¸ƒåº¦</p>
<h2 id="å‡ä¸ƒå’Œå¼¦ï¼ˆCdim7ï¼‰"><a href="#å‡ä¸ƒå’Œå¼¦ï¼ˆCdim7ï¼‰" class="headerlink" title="å‡ä¸ƒå’Œå¼¦ï¼ˆCdim7ï¼‰"></a>å‡ä¸ƒå’Œå¼¦ï¼ˆCdim7ï¼‰</h2><p>å‡ä¸‰å’Œå¼¦+<strong>å‡</strong>ä¸ƒåº¦</p>
<p>â€‹    æ¯ä¸ªéŸ³é—´éš”éƒ½ä¸º<strong>å°ä¸‰åº¦</strong></p>
<h2 id="å¼€æ”¾å’Œå¼¦"><a href="#å¼€æ”¾å’Œå¼¦" class="headerlink" title="å¼€æ”¾å’Œå¼¦"></a>å¼€æ”¾å’Œå¼¦</h2><p>ç›¸æ¯”äºå¯†é›†å’Œå¼¦ï¼Œå¼€æ”¾å’Œå¼¦æ›´åŠ å¸¸ç”¨ä¸”å®¹æ˜“å®ç°</p>
<p>ä»¥ä¸‹æ˜¯ä¸ƒå’Œå¼¦å¸¸ç”¨å£°éƒ¨æ„æˆï¼Œå¯ç”¨æ¥å¿«é€Ÿæ‰¾åˆ°å’Œå¼¦ï¼Œå…¶ä¸­æŒ‡å‹4ã€2æœ€é‡è¦</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">æŒ‡å‹</th>
<th style="text-align:center">å¸¸ç”¨å£°éƒ¨æ„æˆ</th>
<th style="text-align:center">æ ¹éŸ³æ‰€åœ¨å¼¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center"><strong>1</strong>ã€7ã€3ã€5</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"><strong>1</strong>ã€5ã€7ã€3</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center"><strong>1</strong>ã€5ã€7ã€3</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><strong>5</strong>ã€1ã€3ã€7</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><strong>3</strong>ã€7ã€1ã€5</td>
<td style="text-align:center">2</td>
</tr>
</tbody>
</table>
</div>
<p>æŠ€å·§ï¼šåœ¨äºŒå¼¦æ‰¾äº”åº¦éŸ³æ—¶ï¼Œç›´æ¥ç”¨ä¸€å¼¦çš„å››åº¦å…³ç³»æ‰¾ï¼›äºŒå¼¦æ‰¾ä¸‰åº¦éŸ³æ—¶ï¼Œç”¨ä¸‰å¼¦çš„ä¸‰åº¦å…³ç³»æ‰¾</p>
<p>åœ¨ä¸‰å¼¦æ‰¾äº”åº¦éŸ³æ—¶è¦æ³¨æ„äºŒä¸‰å¼¦æ˜¯å¤§ä¸‰åº¦ï¼Œåœ¨æ­£ä¸Šæ–¹<strong>å¤šä¸€ä¸ªåŠéŸ³è·ç¦»</strong></p>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>PLCã€ç”µåŠ›ç”µå­å’Œæ§åˆ¶ç”µè·¯(è€ƒè¯•å¤ä¹ è‡ªç”¨)</title>
    <url>/2023/05/29/PLC/</url>
    <content><![CDATA[<h1 id="PLCå­˜å‚¨åŒºå’Œåˆ†ç±»"><a href="#PLCå­˜å‚¨åŒºå’Œåˆ†ç±»" class="headerlink" title="PLCå­˜å‚¨åŒºå’Œåˆ†ç±»"></a>PLCå­˜å‚¨åŒºå’Œåˆ†ç±»</h1><ul>
<li><p>è¾“å…¥ç»§ç”µå™¨ I</p>
<p>åœ¨æ‰«æå¾ªç¯å¼€å§‹ä»ç°åœºè¯»å–è¾“å…¥ä¿¡å·å­˜å…¥I</p>
</li>
<li><p>è¾“å‡ºç»§ç”µå™¨ Q</p>
<p>åœ¨æ‰«æå¾ªç¯æœŸé—´å°†é€»è¾‘è¿è¾“ç»“æœå­˜å…¥Qï¼Œåœ¨æ‰«æç»“æŸåè¾“å‡º</p>
</li>
<li><p>è¾…åŠ©ç»§ç”µå™¨ M</p>
<p>å­˜å‚¨ç¨‹åºè¿ç®—çš„ä¸´æ—¶ç»“æœ</p>
</li>
<li><p>å¤–éƒ¨è¾“å…¥å¯„å­˜å™¨ PI</p>
<p>ç›´æ¥è®¿é—®æ¨¡æ‹Ÿé‡è¾“å…¥</p>
</li>
<li><p>å¤–éƒ¨è¾“å‡ºPQ</p>
</li>
<li><p>å®šæ—¶å™¨ T</p>
<p>è®¿é—®è¯¥å­˜å‚¨å™¨å¯è·å¾—å®šæ—¶å™¨å‰©ä½™æ—¶é—´</p>
</li>
<li><p>è®¡æ•°å™¨ C</p>
</li>
<li><p>æ•°æ®å—å¯„å­˜å™¨ DB</p>
</li>
<li><p>æœ¬åœ°æ•°æ®å¯„å­˜å™¨ L</p>
</li>
</ul>
<h1 id="S7-1200å¸¸ç”¨æŒ‡ä»¤"><a href="#S7-1200å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="S7-1200å¸¸ç”¨æŒ‡ä»¤"></a>S7-1200å¸¸ç”¨æŒ‡ä»¤</h1><h2 id="RSå’ŒSRè§¦å‘å™¨"><a href="#RSå’ŒSRè§¦å‘å™¨" class="headerlink" title="RSå’ŒSRè§¦å‘å™¨"></a>RSå’ŒSRè§¦å‘å™¨</h2><ul>
<li>RS ç½®ä½ä¼˜å…ˆ</li>
<li>SR å¤ä½ä¼˜å…ˆ</li>
</ul>
<img src="/images/loading.png" data-original="/2023/05/29/PLC/1.jpg" class title="This is an image"> 
<h2 id="è·³å˜æ²¿æ£€æµ‹"><a href="#è·³å˜æ²¿æ£€æµ‹" class="headerlink" title="è·³å˜æ²¿æ£€æµ‹"></a>è·³å˜æ²¿æ£€æµ‹</h2><h3 id="RLOè·³å˜æ²¿æ£€æµ‹"><a href="#RLOè·³å˜æ²¿æ£€æµ‹" class="headerlink" title="RLOè·³å˜æ²¿æ£€æµ‹"></a>RLOè·³å˜æ²¿æ£€æµ‹</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">RLOä¸Šå‡æ²¿æ£€æµ‹</th>
<th style="text-align:center">RLOä¸‹é™æ²¿æ£€æµ‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">è¾“å‡ºåœ°å€</td>
<td style="text-align:center">%M1.0</td>
<td style="text-align:center">%M1.2</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">â€”â€”ï¼ˆPï¼‰â€”â€”</td>
<td style="text-align:center">â€”â€”ï¼ˆNï¼‰â€”â€”</td>
</tr>
<tr>
<td style="text-align:center">è¾“å…¥åœ°å€</td>
<td style="text-align:center">%M1.1</td>
<td style="text-align:center">%M1.3</td>
</tr>
</tbody>
</table>
</div>
<h3 id="è§¦ç‚¹ä¿¡å·æ£€æµ‹æ²¿"><a href="#è§¦ç‚¹ä¿¡å·æ£€æµ‹æ²¿" class="headerlink" title="è§¦ç‚¹ä¿¡å·æ£€æµ‹æ²¿"></a>è§¦ç‚¹ä¿¡å·æ£€æµ‹æ²¿</h3><h2 id="å®šæ—¶å™¨æŒ‡ä»¤"><a href="#å®šæ—¶å™¨æŒ‡ä»¤" class="headerlink" title="å®šæ—¶å™¨æŒ‡ä»¤"></a>å®šæ—¶å™¨æŒ‡ä»¤</h2><h3 id="è„‰å†²å®šæ—¶å™¨"><a href="#è„‰å†²å®šæ—¶å™¨" class="headerlink" title="è„‰å†²å®šæ—¶å™¨"></a>è„‰å†²å®šæ—¶å™¨</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">%DB1</th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">TP<br>Time</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">IN</td>
<td style="text-align:center"></td>
<td style="text-align:center">Q</td>
</tr>
<tr>
<td style="text-align:center">PT</td>
<td style="text-align:center"></td>
<td style="text-align:center">ET</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>PTï¼šé¢„è®¾æ—¶é—´</li>
<li>ETï¼šè®¡æ—¶æ—¶é—´</li>
</ul>
<p><u><strong>ä¸€æ—¦INå‡ºç°ä¸Šå‡æ²¿</strong>ï¼ŒTPå¯åŠ¨ï¼ŒETå¼€å§‹è®¡æ—¶ï¼ŒET<PTæ—¶ï¼ŒQéƒ½ä¼šè¾“å‡º1ï¼ŒET>PTæ—¶ï¼ŒQéƒ½ä¼šè¾“å‡º0</PTæ—¶ï¼ŒQéƒ½ä¼šè¾“å‡º1ï¼ŒET></u></p>
<p>å¤ä½æ–¹æ³•ï¼š</p>
<ul>
<li>å¤–éƒ¨å¤ä½â€”â€”[RT]â€”â€”</li>
<li>ET&gt;PTåï¼ŒINä¸ºä½ç”µå¹³</li>
</ul>
<h3 id="æ¥é€šå»¶æ—¶å®šæ—¶å™¨"><a href="#æ¥é€šå»¶æ—¶å®šæ—¶å™¨" class="headerlink" title="æ¥é€šå»¶æ—¶å®šæ—¶å™¨"></a>æ¥é€šå»¶æ—¶å®šæ—¶å™¨</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">%DB1</th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">TON<br>Time</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">IN</td>
<td style="text-align:center"></td>
<td style="text-align:center">Q</td>
</tr>
<tr>
<td style="text-align:center">PT</td>
<td style="text-align:center"></td>
<td style="text-align:center">ET</td>
</tr>
</tbody>
</table>
</div>
<p><strong>å½“INä¸ºé«˜æ—¶TONå¯åŠ¨</strong>ï¼ŒETå¼€å§‹è®¡æ—¶ï¼Œ<strong>INéœ€ä¸€ç›´ä¸ºé«˜ç›´åˆ°ET&gt;PTå</strong>ï¼ŒQè¾“å‡ºé«˜ï¼ŒQè¾“å‡ºé«˜çš„æ—¶é—´å–å†³äº<strong>ET&gt;PTåINçš„é«˜ç”µå¹³æ—¶é—´</strong></p>
<p>å¤ä½æ–¹æ³•ï¼š</p>
<ul>
<li>INå‡ºç°ä½ç”µå¹³</li>
<li>å¤–éƒ¨å¤ä½â€”â€”[RT]â€”â€”ï¼ˆè‹¥INä¸ºé«˜åˆ™ETå¼€å§‹é‡æ–°è®¡æ—¶ï¼‰</li>
</ul>
<h3 id="å…³æ–­å»¶æ—¶å®šæ—¶å™¨"><a href="#å…³æ–­å»¶æ—¶å®šæ—¶å™¨" class="headerlink" title="å…³æ–­å»¶æ—¶å®šæ—¶å™¨"></a>å…³æ–­å»¶æ—¶å®šæ—¶å™¨</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">%DB1</th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">TOF<br>Time</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">IN</td>
<td style="text-align:center"></td>
<td style="text-align:center">Q</td>
</tr>
<tr>
<td style="text-align:center">PT</td>
<td style="text-align:center"></td>
<td style="text-align:center">ET</td>
</tr>
</tbody>
</table>
</div>
<p><strong>INä¸ºé«˜æ—¶Qè¾“å‡ºé«˜ï¼Œå½“INå‡ºç°ä¸‹é™æ²¿æ—¶TOFå¯åŠ¨</strong>ï¼ŒETå¼€å§‹è®¡æ—¶ï¼Œ<strong>æ­¤æ—¶QæŒç»­è¾“å‡ºé«˜</strong>ï¼Œ<strong>INéœ€ä¸€ç›´ä¸ºä½ç”µå¹³</strong>ç›´åˆ°ET&gt;PTåï¼ŒQè¾“å‡ºä½ç”µå¹³ï¼Œ<strong>è¾“å‡ºæ—¶é—´å–å†³äºINä½ç”µå¹³çš„æ—¶é—´</strong></p>
<p>å¤ä½æ–¹æ³•ï¼š</p>
<ul>
<li>INå‡ºç°é«˜ç”µå¹³</li>
<li>å¤–éƒ¨å¤ä½â€”â€”[RT]â€”â€”ï¼ˆè‹¥INä¸ºä½ï¼ˆETå·²å¼€å§‹è®¡æ—¶ï¼‰ï¼Œå¤ä½åQä¸ºä½ï¼‰</li>
</ul>
<h1 id="æ¥çº¿å›¾ä¸å˜é‡è¡¨å®ä¾‹"><a href="#æ¥çº¿å›¾ä¸å˜é‡è¡¨å®ä¾‹" class="headerlink" title="æ¥çº¿å›¾ä¸å˜é‡è¡¨å®ä¾‹"></a>æ¥çº¿å›¾ä¸å˜é‡è¡¨å®ä¾‹</h1><img src="/images/loading.png" data-original="/2023/05/29/PLC/2.jpg" class title="This is an image"> 
<h1 id="ç”µåŠ›å˜åŒ–ç”µè·¯"><a href="#ç”µåŠ›å˜åŒ–ç”µè·¯" class="headerlink" title="ç”µåŠ›å˜åŒ–ç”µè·¯"></a>ç”µåŠ›å˜åŒ–ç”µè·¯</h1><ul>
<li><p>å¯æ§æ•´æµç”µè·¯</p>
<p>å›ºå®šäº¤æµå˜å¯è°ƒç›´æµ</p>
</li>
<li><p>äº¤æµè°ƒå‹ç”µè·¯</p>
<p>å›ºå®šäº¤æµå˜ç”µå‹å¯è°ƒäº¤æµ</p>
</li>
<li><p>é€†å˜ç”µè·¯</p>
<p>ç›´æµå˜å¯è°ƒäº¤æµ</p>
</li>
<li><p>å˜é¢‘ç”µè·¯</p>
<p>å›ºå®šäº¤æµå˜é¢‘ç‡å¯è°ƒäº¤æµ</p>
</li>
<li><p>æ–©æ³¢ç”µè·¯</p>
<p>å›ºå®šç›´æµå˜å¯è°ƒç›´æµ</p>
</li>
</ul>
<h1 id="æ™¶é—¸ç®¡"><a href="#æ™¶é—¸ç®¡" class="headerlink" title="æ™¶é—¸ç®¡"></a>æ™¶é—¸ç®¡</h1><img src="/images/loading.png" data-original="/2023/05/29/PLC/11.jpg" class title="This is an image"> 
<ul>
<li>æ§åˆ¶ææ— ç”µå‹æ—¶æ™¶é—¸ç®¡ä¸ä¼šå¯¼é€šâ€”â€”æ­£åå‘é˜»æ–­èƒ½åŠ›</li>
<li>æ™¶é—¸ç®¡æ ·æœºå’Œæ§åˆ¶æåŒæ—¶æ­£å‘ç”µå‹æ—¶æ‰ä¼šå¯¼é€š</li>
<li>æ™¶é—¸ç®¡å¯¼é€šåæ§åˆ¶æå¤±å»ä½œç”¨ï¼Œåªæœ‰é˜³æç”µå‹é™åˆ°è¶³å¤Ÿå°æˆ–æ–­å¼€ã€åå‘æ—¶æ™¶é—¸ç®¡æ‰ä¼šé˜»æ–­</li>
</ul>
<h1 id="é—¨æå¯å…³æ–­æ™¶é—¸ç®¡"><a href="#é—¨æå¯å…³æ–­æ™¶é—¸ç®¡" class="headerlink" title="é—¨æå¯å…³æ–­æ™¶é—¸ç®¡"></a>é—¨æå¯å…³æ–­æ™¶é—¸ç®¡</h1><img src="/images/loading.png" data-original="/2023/05/29/PLC/22.jpg" class title="This is an image"> 
<p>ä¸¤è¾¹å‡ä¸ºç›´æµ</p>
<h1 id="å¯æ§æ•´æµç”µè·¯"><a href="#å¯æ§æ•´æµç”µè·¯" class="headerlink" title="å¯æ§æ•´æµç”µè·¯"></a>å¯æ§æ•´æµç”µè·¯</h1><h2 id="å•ç›¸åŠæ³¢å¯æ§æ•´æµç”µè·¯"><a href="#å•ç›¸åŠæ³¢å¯æ§æ•´æµç”µè·¯" class="headerlink" title="å•ç›¸åŠæ³¢å¯æ§æ•´æµç”µè·¯"></a>å•ç›¸åŠæ³¢å¯æ§æ•´æµç”µè·¯</h2><img src="/images/loading.png" data-original="/2023/05/29/PLC/33.jpg" class title="This is an image"> 
<h2 id="å¸¦ç”µæ„Ÿè´Ÿè½½"><a href="#å¸¦ç”µæ„Ÿè´Ÿè½½" class="headerlink" title="å¸¦ç”µæ„Ÿè´Ÿè½½"></a>å¸¦ç”µæ„Ÿè´Ÿè½½</h2><img src="/images/loading.png" data-original="/2023/05/29/PLC/44.jpg" class title="This is an image"> 
<h2 id="å¸¦ç»­æµäºŒæç®¡"><a href="#å¸¦ç»­æµäºŒæç®¡" class="headerlink" title="å¸¦ç»­æµäºŒæç®¡"></a>å¸¦ç»­æµäºŒæç®¡</h2><p>æé«˜å¤§æ„ŸæŠ—è´Ÿè½½æ—¶è¾“å‡ºå¹³å‡ç”µå‹</p>
<h1 id="é€†å˜ç”µè·¯ï¼ˆé€†å˜å™¨ï¼‰"><a href="#é€†å˜ç”µè·¯ï¼ˆé€†å˜å™¨ï¼‰" class="headerlink" title="é€†å˜ç”µè·¯ï¼ˆé€†å˜å™¨ï¼‰"></a>é€†å˜ç”µè·¯ï¼ˆé€†å˜å™¨ï¼‰</h1><h2 id="å•ç›¸æ— æºé€†å˜å™¨"><a href="#å•ç›¸æ— æºé€†å˜å™¨" class="headerlink" title="å•ç›¸æ— æºé€†å˜å™¨"></a>å•ç›¸æ— æºé€†å˜å™¨</h2><img src="/images/loading.png" data-original="/2023/05/29/PLC/55.jpg" class title="This is an image"> 
<h1 id="æ–©æ³¢ç”µè·¯"><a href="#æ–©æ³¢ç”µè·¯" class="headerlink" title="æ–©æ³¢ç”µè·¯"></a>æ–©æ³¢ç”µè·¯</h1><p>PWM/PFMæ”¹å˜é€†å˜å™¨è¾“å‡ºç”µå‹</p>
<h1 id="ç›´æµè°ƒé€Ÿç³»ç»Ÿ"><a href="#ç›´æµè°ƒé€Ÿç³»ç»Ÿ" class="headerlink" title="ç›´æµè°ƒé€Ÿç³»ç»Ÿ"></a>ç›´æµè°ƒé€Ÿç³»ç»Ÿ</h1><h2 id="è½¬é€Ÿè´Ÿåé¦ˆ"><a href="#è½¬é€Ÿè´Ÿåé¦ˆ" class="headerlink" title="è½¬é€Ÿè´Ÿåé¦ˆ"></a>è½¬é€Ÿè´Ÿåé¦ˆ</h2><img src="/images/loading.png" data-original="/2023/05/29/PLC/66.jpg" class title="This is an image"> 
<p>è°ƒé€Ÿæ–¹æ³•ï¼šæ”¹å˜è½¬å­ç”µå‹ï¼ˆæ”¹Ugï¼‰</p>
<p>æ”¾å¤§å€æ•°è¶Šé«˜ï¼Œå‡†ç¡®åº¦è¶Šé«˜ï¼Œè°ƒé€ŸèŒƒå›´è¶Šå¤§ï¼›å€æ•°è¿‡é«˜ç³»ç»Ÿä¸ç¨³å®š</p>
<h2 id="ç”µå‹è´Ÿåé¦ˆ"><a href="#ç”µå‹è´Ÿåé¦ˆ" class="headerlink" title="ç”µå‹è´Ÿåé¦ˆ"></a>ç”µå‹è´Ÿåé¦ˆ</h2><p>é€šè¿‡ç”µä½å™¨æ£€æµ‹è¢«æ§è´¨é‡</p>
<p>ç”µå‹è´Ÿåé¦ˆï¼Œç”µæµæ­£åé¦ˆ</p>
<h1 id="äº¤æµè°ƒé€Ÿç³»ç»Ÿ"><a href="#äº¤æµè°ƒé€Ÿç³»ç»Ÿ" class="headerlink" title="äº¤æµè°ƒé€Ÿç³»ç»Ÿ"></a>äº¤æµè°ƒé€Ÿç³»ç»Ÿ</h1><h2 id="è°ƒå‹è°ƒé€Ÿ"><a href="#è°ƒå‹è°ƒé€Ÿ" class="headerlink" title="è°ƒå‹è°ƒé€Ÿ"></a>è°ƒå‹è°ƒé€Ÿ</h2><p>è½¬é€Ÿè´Ÿåé¦ˆ</p>
<p>ä¸é€‚åˆé•¿æœŸå·¥ä½œåœ¨ä½é€ŸåŒºçš„å·¥ä½œæœºæ¢°</p>
<h2 id="å˜é¢‘è°ƒé€Ÿ"><a href="#å˜é¢‘è°ƒé€Ÿ" class="headerlink" title="å˜é¢‘è°ƒé€Ÿ"></a>å˜é¢‘è°ƒé€Ÿ</h2><p>é¢‘ç‡ä¸ç£é€šæˆåæ¯”ï¼Œå› æ­¤æœ€å¥½åŒæ—¶è°ƒå‹å˜é¢‘</p>
<h3 id="äº¤-ç›´-äº¤å˜é¢‘å™¨"><a href="#äº¤-ç›´-äº¤å˜é¢‘å™¨" class="headerlink" title="äº¤-ç›´-äº¤å˜é¢‘å™¨"></a>äº¤-ç›´-äº¤å˜é¢‘å™¨</h3><p>ACâ€”â€”æ•´æµå™¨â€”â€”DCâ€”â€”é€†å˜å™¨ï¼ˆæ–©æ³¢ï¼ˆç›´æµè°ƒæ•´ï¼‰+é€†å˜ï¼ˆç›´-äº¤ï¼‰ï¼‰â€”â€”AC</p>
<h1 id="æ­¥è¿›ç”µæœºè°ƒé€Ÿç³»ç»Ÿ"><a href="#æ­¥è¿›ç”µæœºè°ƒé€Ÿç³»ç»Ÿ" class="headerlink" title="æ­¥è¿›ç”µæœºè°ƒé€Ÿç³»ç»Ÿ"></a>æ­¥è¿›ç”µæœºè°ƒé€Ÿç³»ç»Ÿ</h1><h2 id="è„‰å†²åˆ†é…å™¨"><a href="#è„‰å†²åˆ†é…å™¨" class="headerlink" title="è„‰å†²åˆ†é…å™¨"></a>è„‰å†²åˆ†é…å™¨</h2><p>æ–¹å‘ç”µå¹³æ§åˆ¶è½¬å‘</p>
<h2 id="åŠŸç‡æ”¾å¤§å™¨"><a href="#åŠŸç‡æ”¾å¤§å™¨" class="headerlink" title="åŠŸç‡æ”¾å¤§å™¨"></a>åŠŸç‡æ”¾å¤§å™¨</h2><h3 id="å•ç”µå‹é©±åŠ¨"><a href="#å•ç”µå‹é©±åŠ¨" class="headerlink" title="å•ç”µå‹é©±åŠ¨"></a>å•ç”µå‹é©±åŠ¨</h3><img src="/images/loading.png" data-original="/2023/05/29/PLC/77.jpg" class title="This is an image"> 
<h3 id="é«˜ä½å‹åˆ‡æ¢å‹é©±åŠ¨"><a href="#é«˜ä½å‹åˆ‡æ¢å‹é©±åŠ¨" class="headerlink" title="é«˜ä½å‹åˆ‡æ¢å‹é©±åŠ¨"></a>é«˜ä½å‹åˆ‡æ¢å‹é©±åŠ¨</h3><p>åŠŸè€—å°ï¼Œå¯åŠ¨åŠ›çŸ©å¤§ï¼Œä½†å¢åŠ äº†é©±åŠ¨ç”µæº</p>
<img src="/images/loading.png" data-original="/2023/05/29/PLC/t1.jpg" class title="This is an image"> ]]></content>
      <tags>
        <tag>æœŸæœ«è€ƒè¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨çš„æ•°æ®é€šä¿¡åè®®</title>
    <url>/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<p>æœ€è¿‘åˆç”¨åˆ°äº†iicï¼Œä½†æ˜¯åŸç†åˆæœ‰äº›å¿˜è®°äº†ï¼Œåˆšå¥½å°±è¶è¿™ä¸ªæœºä¼šæ•´ç†ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„é€šä¿¡åè®®ï¼Œä¸»è¦æ˜¯é’ˆå¯¹åè®®å±‚å’Œå¯„å­˜å™¨çš„æ•´ç†ï¼Œå‡ä»¥32ä¸ºä¾‹ï¼Œ32æœ‰å…³å†…å®¹å¤§éƒ¨åˆ†æ¥è‡ªã€ŠSTM32ä¸­æ–‡å‚è€ƒæ‰‹å†ŒV10ã€‹ï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜…æ¸©ä¹ ã€‚</p>
<h1 id="ä¸²å£åè®®"><a href="#ä¸²å£åè®®" class="headerlink" title="ä¸²å£åè®®"></a>ä¸²å£åè®®</h1><p>å› ä¸ºä¹Ÿä¸æ˜¯åˆå­¦ï¼ŒåŒæ­¥å¼‚æ­¥å’Œå„ç§æ ‡å‡†å°±ä¸èµ˜è¿°äº†,ä¸»è¦è®²å¼‚æ­¥</p>
<h2 id="åè®®å±‚å†…å®¹"><a href="#åè®®å±‚å†…å®¹" class="headerlink" title="åè®®å±‚å†…å®¹"></a>åè®®å±‚å†…å®¹</h2><p>ä¸²å£é€šè®¯çš„æ•°æ®åŒ…ç”±å‘é€è®¾å¤‡é€šè¿‡è‡ªèº«çš„ TXD æ¥å£ä¼ è¾“åˆ°æ¥æ”¶è®¾å¤‡çš„ RXD æ¥å£ã€‚åœ¨ä¸²å£é€šè®¯ çš„åè®®å±‚ä¸­ï¼Œè§„å®šäº†æ•°æ®åŒ…çš„å†…å®¹ï¼Œå®ƒç”±å¯å§‹ä½ã€ä¸»ä½“æ•°æ®ã€æ ¡éªŒä½ä»¥åŠåœæ­¢ä½ç»„æˆï¼Œé€šè®¯åŒæ–¹çš„æ•°æ®åŒ…æ ¼å¼è¦çº¦å®šä¸€è‡´æ‰èƒ½æ­£å¸¸æ”¶å‘æ•°æ®</p>
<p>ä»¥32ä¸ºä¾‹ï¼Œæ¯ä¸€å¸§æ•°æ®ç”±ï¼š</p>
<ul>
<li>èµ·å§‹ä½ï¼Œä¸º1ä½é€»è¾‘0</li>
<li>æ•°æ®å†…å®¹ï¼Œ8æˆ–9ä½</li>
<li>æ ¡éªŒä½ï¼Œå¥‡å¶æ ¡éªŒï¼Œå‡†ç¡®æ¥è¯´åŒ…å«åœ¨æ•°æ®å†…å®¹é‡Œï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æ ¡éªŒï¼Œåˆ™å…¶ä¸ºæ•°æ®å†…å®¹çš„æœ€å1ä½</li>
<li>åœæ­¢ä½ï¼Œå¸¸ä¸º1or2ä½é€»è¾‘1</li>
</ul>
<p>ç»„æˆï¼Œé€šä¿¡çš„åŒæ–¹å¯¹æ•°æ®å¸§æ ¼å¼çº¦å®šä¸€è‡´æ‰å¯æ­£å¸¸æ”¶å‘æ•°æ®</p>
<h2 id="å¥‡å¶æ ¡éªŒ"><a href="#å¥‡å¶æ ¡éªŒ" class="headerlink" title="å¥‡å¶æ ¡éªŒ"></a>å¥‡å¶æ ¡éªŒ</h2><p>å¥‡å¶æ ¡éªŒä½åˆ†ä¸ºå¥‡æ ¡éªŒå’Œå¶æ ¡éªŒä¸¤ç§ï¼Œæ˜¯ä¸€ç§ç®€å•çš„æ•°æ®è¯¯ç æ ¡éªŒæ–¹æ³•ã€‚<strong>å¥‡æ ¡éªŒæ˜¯æŒ‡æ¯å¸§æ•°æ®ä¸­ï¼ŒåŒ…æ‹¬æ•°æ®ä½å’Œå¥‡å¶æ ¡éªŒä½çš„å…¨éƒ¨ä½ä¸­1çš„ä¸ªæ•°å¿…é¡»ä¸ºå¥‡æ•°ï¼›å¶æ ¡éªŒæ˜¯æŒ‡æ¯å¸§æ•°æ®ä¸­ï¼ŒåŒ…æ‹¬æ•°æ®ä½å’Œå¥‡å¶æ ¡éªŒä½çš„å…¨éƒ¨ä½ä¸­1çš„ä¸ªæ•°å¿…é¡»ä¸ºå¶æ•°ã€‚</strong></p>
<h2 id="æ³¢ç‰¹ç‡"><a href="#æ³¢ç‰¹ç‡" class="headerlink" title="æ³¢ç‰¹ç‡"></a>æ³¢ç‰¹ç‡</h2><p>æ³¢ç‰¹ç‡æŒ‡æ•°æ®ä¿¡å·å¯¹è½½æ³¢çš„è°ƒåˆ¶é€Ÿç‡ï¼Œå®ƒç”¨å•ä½æ—¶é—´å†…è½½æ³¢è°ƒåˆ¶çŠ¶æ€æ”¹å˜æ¬¡æ•°æ¥è¡¨ç¤ºï¼Œå•ä½ä¸ºæ³¢ç‰¹ã€‚è€Œæ¯”ç‰¹ç‡æŒ‡å•ä½æ—¶é—´å†…ä¼ è¾“çš„æ¯”ç‰¹æ•°ï¼Œå•ä½ bit/s(bps)ã€‚å¯¹äº USART æ³¢ç‰¹ç‡ä¸æ¯”ç‰¹ç‡ç›¸ç­‰ï¼Œæ³¢ç‰¹ç‡è¶Šå¤§ï¼Œä¼ è¾“é€Ÿç‡è¶Šå¿«ã€‚</p>
<p>è€ŒSTM32çš„USARTçš„å‘é€å™¨å’Œæ¥æ”¶å™¨ä½¿ç”¨ç›¸åŒçš„æ³¢ç‰¹ç‡ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š</p>
<img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/1.jpg" class title="image1"> 
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>fckä¸ºUSARTçš„æ—¶é’Ÿï¼Œè€Œä¸åŒçš„USARTæŒ‚è½½åœ¨ä¸åŒçš„æ—¶é’Ÿæ€»çº¿ä¸Šï¼Œä¾‹å¦‚USART1å°±æ˜¯æŒ‚è½½åœ¨APB2æ€»çº¿ä¸Š</li>
<li><strong>USARTDIVæ˜¯ä¸€ä¸ªå­˜æ”¾åœ¨æ³¢ç‰¹ç‡å¯„å­˜å™¨ï¼ˆUSART_BRRï¼‰ä¸­çš„ä¸€ä¸ªæ— ç¬¦å·å®šç‚¹æ•°</strong>ï¼š</li>
</ul>
<img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/2.jpg" class title="image2">
<p>â€‹    å…¶ä¸­ï¼Œ DIV_Mantissa[15:4] ä½å®šä¹‰ USARTDIV çš„æ•´æ•°éƒ¨åˆ†ï¼ŒDIV_Fraction[3:0] ä½å®šä¹‰ USARTDIV çš„å°æ•°éƒ¨åˆ†</p>
<p>â€‹    å¯¹äºå°æ•°éƒ¨åˆ†ï¼Œå¯„å­˜å™¨ä¸­å­˜å‚¨çš„å€¼ä¸º<strong>å®é™…å°æ•°*16</strong>ï¼Œè‹¥ä¸ä¸ºæ•´æ•°åˆ™å–è¿‘ä¼¼å€¼ï¼›æ•´æ•°éƒ¨åˆ†åˆ™ç›´æ¥å–16è¿›åˆ¶</p>
<p>â€‹    ä¾‹å¦‚ï¼Œå‡è®¾USARTDIVå€¼ä¸º39.0625ï¼Œåˆ™ï¼šDIV_Mantissa=39=0x27ï¼ŒDIV_Fraction=0.0625<em>16=1=0x01=0x1,æœ€ç»ˆUSART_BRRå­˜å‚¨çš„å€¼ä¸ºï¼š0x0271ï¼Œ<em>*æ­¤ç»“æœæ˜¯å½“fckä¸º72MHzæ—¶æ¯”ç‰¹ç‡ä¸º115200bpsçš„é…ç½®å€¼ã€‚</em></em></p>
<h2 id="é€šä¿¡çš„èµ·å§‹å’Œåœæ­¢"><a href="#é€šä¿¡çš„èµ·å§‹å’Œåœæ­¢" class="headerlink" title="é€šä¿¡çš„èµ·å§‹å’Œåœæ­¢"></a>é€šä¿¡çš„èµ·å§‹å’Œåœæ­¢</h2><ul>
<li>ç©ºé—²å¸§ï¼šåœ¨åŒæ–¹æ²¡æœ‰å‘é€æˆ–æ¥æ”¶æ•°æ®æ—¶ï¼Œæ­¤æ—¶æ•°æ®å¸§å¯ä»¥è¢«è§†ä½œ1ä¸ªå®Œå…¨ç”±1ç»„æˆçš„å®Œæ•´æ•°æ®å¸§</li>
<li>æ–­å¼€å¸§ï¼šè¢«è§†ä½œå…¨ä¸º0çš„å¸§</li>
</ul>
<h2 id="ç›¸å…³å¯„å­˜å™¨"><a href="#ç›¸å…³å¯„å­˜å™¨" class="headerlink" title="ç›¸å…³å¯„å­˜å™¨"></a>ç›¸å…³å¯„å­˜å™¨</h2><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/3.jpg" class title="image3">
<p>ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å°±ä¸å†™äº†</p>
<h3 id="åŠŸèƒ½å¼•è„š"><a href="#åŠŸèƒ½å¼•è„š" class="headerlink" title="åŠŸèƒ½å¼•è„š"></a>åŠŸèƒ½å¼•è„š</h3><ul>
<li><p>SW_RXï¼šåªç”¨äºå•çº¿å’Œæ™ºèƒ½å¡æ¨¡å¼ï¼Œå±äºå†…éƒ¨å¼•è„šï¼Œæ²¡æœ‰å…·ä½“å¤–éƒ¨å¼•è„š</p>
</li>
<li><p>nRTSï¼šè¯·æ±‚ä»¥å‘é€ (Request To Send)ï¼Œn è¡¨ç¤ºä½ç”µå¹³æœ‰æ•ˆã€‚å¦‚æœä½¿èƒ½ RTS æµæ§åˆ¶ï¼Œ<strong>å½“ USART æ¥ æ”¶å™¨å‡†å¤‡å¥½æ¥æ”¶æ–°æ•°æ®æ—¶å°±ä¼šå°† nRTS å˜æˆä½ç”µå¹³</strong>ï¼›å½“æ¥æ”¶å¯„å­˜å™¨å·²æ»¡æ—¶ï¼ŒnRTS å°†è¢«è®¾ç½®ä¸ºé«˜ ç”µå¹³ã€‚<strong>è¯¥å¼•è„šåªé€‚ç”¨äºç¡¬ä»¶æµæ§åˆ¶</strong></p>
</li>
<li><p>nCTSï¼šæ¸…é™¤ä»¥å‘é€ (Clear To Send)ï¼Œn è¡¨ç¤ºä½ç”µå¹³æœ‰æ•ˆã€‚å¦‚æœä½¿èƒ½ CTS æµæ§åˆ¶ï¼Œå‘é€å™¨åœ¨å‘é€ä¸‹ ä¸€å¸§æ•°æ®<strong>ä¹‹å‰</strong>ä¼šæ£€æµ‹ nCTS å¼•è„šï¼Œ<strong>å¦‚æœä¸ºä½ç”µå¹³ï¼Œè¡¨ç¤ºå¯ä»¥å‘é€æ•°æ®ï¼Œå¦‚æœä¸ºé«˜ç”µå¹³åˆ™åœ¨å‘é€å®Œå½“å‰æ•°æ®å¸§ä¹‹ååœæ­¢å‘é€ï¼ˆä¹Ÿå°±æ˜¯ä¸‹ä¸€å¸§ä¸ä¼šè¢«å‘é€ï¼‰</strong>ã€‚è¯¥å¼•è„š<strong>åªé€‚ç”¨äºç¡¬ä»¶æµæ§åˆ¶</strong>ã€‚</p>
<p>| STM32F10x | USART1 | USART2 | USART3 |<br>| :â€”â€”â€”-: | :â€”â€”: | :â€”â€”: | :â€”â€”: |<br>|   nCTS    |  PA11  |  PA0   |  PB13  |<br>|   nRTS    |  PA12  |  PA1   |  PB14  |</p>
</li>
</ul>
<h3 id="æ•°æ®å¯„å­˜å™¨DR"><a href="#æ•°æ®å¯„å­˜å™¨DR" class="headerlink" title="æ•°æ®å¯„å­˜å™¨DR"></a>æ•°æ®å¯„å­˜å™¨DR</h3><p>USART æ•°æ®å¯„å­˜å™¨ (USART_DR) åªæœ‰ä½ 9 ä½æœ‰æ•ˆï¼Œå¹¶ä¸”ç¬¬ 9 ä½æ•°æ®æ˜¯å¦æœ‰æ•ˆè¦å–å†³äº USART æ§åˆ¶å¯„å­˜å™¨ 1(USART_CR1) çš„ M ä½è®¾ç½®ï¼Œå½“ M ä½ä¸º 0 æ—¶è¡¨ç¤º 8 ä½æ•°æ®å­—é•¿ï¼Œå½“ M ä½ä¸º 1 è¡¨ç¤º 9 ä½æ•°æ®å­—é•¿ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ 8 ä½æ•°æ®å­—é•¿ã€‚</p>
<p>USART_DR åŒ…å«äº†å·²å‘é€çš„æ•°æ®æˆ–è€…æ¥æ”¶åˆ°çš„æ•°æ®ã€‚<strong>USART_DR å®é™…æ˜¯åŒ…å«äº†ä¸¤ä¸ªå¯„å­˜å™¨ï¼Œä¸€ ä¸ªä¸“é—¨ç”¨äºå‘é€çš„å¯å†™ TDRï¼Œä¸€ä¸ªä¸“é—¨ç”¨äºæ¥æ”¶çš„å¯è¯» RDRã€‚</strong>å½“è¿›è¡Œå‘é€æ“ä½œæ—¶ï¼Œå¾€ USART_DR å†™å…¥æ•°æ®ä¼šè‡ªåŠ¨å­˜å‚¨åœ¨ TDR å†…ï¼›å½“è¿›è¡Œè¯»å–æ“ä½œæ—¶ï¼Œå‘ USART_DR è¯»å–æ•°æ®ä¼šè‡ªåŠ¨æå– RDR æ•°æ®ã€‚</p>
<p>TDR å’Œ RDR éƒ½æ˜¯<strong>ä»‹äºç³»ç»Ÿæ€»çº¿å’Œç§»ä½å¯„å­˜å™¨ä¹‹é—´</strong>ã€‚ä¸²è¡Œé€šä¿¡æ˜¯ä¸€ä¸ªä½ä¸€ä¸ªä½ä¼ è¾“çš„ï¼Œ<strong>å‘é€æ—¶æŠŠ TDR å†…å®¹è½¬ç§»åˆ°å‘é€ç§»ä½å¯„å­˜å™¨ï¼Œç„¶åæŠŠç§»ä½å¯„å­˜å™¨æ•°æ®æ¯ä¸€ä½å‘é€å‡ºå»ï¼Œæ¥æ”¶æ—¶æŠŠæ¥æ”¶åˆ°çš„æ¯ä¸€ä½é¡ºåºä¿å­˜åœ¨æ¥æ”¶ç§»ä½å¯„å­˜å™¨å†…ç„¶åæ‰è½¬ç§»åˆ° RDR</strong></p>
<h3 id="æ§åˆ¶å™¨CRã€SR"><a href="#æ§åˆ¶å™¨CRã€SR" class="headerlink" title="æ§åˆ¶å™¨CRã€SR"></a>æ§åˆ¶å™¨CRã€SR</h3><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/4.jpg" class title="image4">
<h4 id="å‘é€å™¨"><a href="#å‘é€å™¨" class="headerlink" title="å‘é€å™¨"></a>å‘é€å™¨</h4><p>USART_CR1åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºä¸Šé¢ä¸€æ’ï¼Œç”¨äºé…ç½®ä¸²å£çš„æœ‰å”¤é†’å•å…ƒã€ä¸­æ–­æ§åˆ¶ç­‰ç­‰ï¼Œå¦ä¸€éƒ¨åˆ†ä¸ºå›¾ä¸­ä¸‹é¢ä¸€æ’ï¼Œç”¨äºæ§åˆ¶USARTçš„å‘é€å™¨</p>
<ul>
<li><strong>UEï¼š</strong>é¦–å…ˆï¼Œè‹¥è¦<strong>æ¿€æ´»è¯¥USART</strong>ï¼Œéœ€è¦å…ˆå°†USART_CR1å¯„å­˜å™¨ä¸Šçš„UEä½ç½®ä½</li>
<li><strong>Mï¼š</strong>Mç”¨äº<strong>å®šä¹‰å­—é•¿</strong>ï¼Œ8or9</li>
<li><strong>STOP[1:0] ï¼š</strong>è‹¥è¦<strong>æ§åˆ¶å¸§çš„åœæ­¢ä½é•¿åº¦</strong>ï¼Œå¯ä»¥é€šè¿‡ USART æ§åˆ¶å¯„å­˜å™¨ 2(USART_CR2) çš„ STOP[1:0] ä½æ§åˆ¶</li>
<li><strong>TEï¼š</strong>å½“USART_CR1å‘é€ä½¿èƒ½ä½ TE ç½® 1 ä¹‹å<strong>ï¼ˆå‘é€ä½¿èƒ½ï¼‰</strong>ï¼Œå‘é€å™¨å¼€å§‹ä¼šå…ˆå‘é€ä¸€ä¸ªç©ºé—²å¸§ (ä¸€ä¸ªæ•°æ®å¸§é•¿åº¦çš„é«˜ç”µå¹³)ï¼Œæ¥ä¸‹ æ¥å°±å¯ä»¥å¾€ USART_DR å¯„å­˜å™¨å†™å…¥è¦å‘é€çš„æ•°æ®ã€‚</li>
<li><strong>TCï¼š</strong>åœ¨å†™å…¥æœ€åä¸€ä¸ªæ•°æ®åï¼Œéœ€è¦ç­‰å¾… USART çŠ¶æ€å¯„å­˜å™¨ (USART_SR) çš„ TC ä½ä¸º 1ï¼Œ<strong>è¡¨ç¤ºæ•°æ®ä¼ è¾“å®Œæˆ</strong></li>
<li><strong>TCIEï¼š</strong>å¦‚æœ USART_CR1 å¯„å­˜å™¨çš„ TCIE ä½ç½® 1ï¼Œ<strong>TCç½®ä½åå°†äº§ç”Ÿä¸­æ–­</strong>ã€‚</li>
<li><strong>TXEï¼š</strong>ç”±ç¡¬ä»¶è®¾ç½®ï¼Œç½®ä½åˆ™è¡¨æ˜ï¼šæ•°æ®å·²ç»ä»TDRç§»é€åˆ°<strong>ç§»ä½å¯„å­˜å™¨</strong>ï¼Œä¸”TDRå·²æ¸…ç©ºï¼Œæ•°æ®å‘é€å·²ç»å¼€å§‹ï¼Œä¸‹ä¸€ä¸ªæ•°æ®å¯ä»¥è¢«å†™è¿›TDRã€‚</li>
<li><strong>TXEIEï¼š</strong>å¦‚æœè¢«è®¾ç½®ï¼ŒTXEçš„ç½®ä½ä¼šäº§ç”Ÿä¸€ä¸ªä¸­æ–­</li>
</ul>
<p>å…¶ä»–çš„ä½ä¸å¤ªå¸¸ç”¨ï¼Œéœ€è¦çš„è¯å†ä¸‹æ¥æŸ¥</p>
<h4 id="æ¥æ”¶å™¨"><a href="#æ¥æ”¶å™¨" class="headerlink" title="æ¥æ”¶å™¨"></a>æ¥æ”¶å™¨</h4><ul>
<li><strong>REï¼š</strong>USARTæ¥æ”¶ä½¿èƒ½ï¼Œä½¿èƒ½åå¼€å§‹ç­‰å¾…æ¥æ”¶æ•°æ®å¸§èµ·å§‹ä½ï¼Œå¯¹äºèµ·å§‹ä½çš„ä¾¦æµ‹æœ‰ä¸€å¥—ä¸¥æ ¼çš„ä¾¦æµ‹æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘æ²¡æ€ä¹ˆçœ‹æ‡‚/å¹å£å“¨ï¼ŒSTM32ä¸­æ–‡å‚è€ƒæ‰‹å†Œä¸­æœ‰è¯¦ç»†è®²ï¼Œæ„Ÿå…´è¶£å¯ä»¥å»çœ‹ä¸‹</li>
<li><strong>RXNEï¼š</strong>ä¸æ¥æ”¶å™¨çš„TXEç›¸ä¼¼ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®å·²è¢«è¯»å–ï¼ˆåŒ…æ‹¬æœ‰å…³çš„é”™è¯¯æ ‡å¿—ï¼‰ï¼Œ<strong>æ•°æ®å·²ç»è¿›å…¥RDR</strong>ï¼Œéšæ—¶å¯ä»¥è¢«è¯»å–</li>
<li><strong>RXNEIEï¼š</strong>RXNEå¯¹åº”ä¸­æ–­</li>
</ul>
<p>æœ‰å…³ä¸€äº›é”™è¯¯æ ‡å¿—æˆ‘ä¹Ÿä¸æ•´ç†äº†ï¼Œæ„Ÿè§‰åŸºæœ¬æ¯”è¾ƒå°‘é‡åˆ°</p>
<h4 id="æ ¡éªŒæ§åˆ¶"><a href="#æ ¡éªŒæ§åˆ¶" class="headerlink" title="æ ¡éªŒæ§åˆ¶"></a>æ ¡éªŒæ§åˆ¶</h4><p>å°† USART_CR1 å¯„å­˜å™¨çš„ PCE ä½ç½® 1 å°±å¯ä»¥å¯åŠ¨å¥‡å¶æ ¡éªŒæ§åˆ¶ï¼Œå¥‡å¶æ ¡éªŒç”±ç¡¬ä»¶è‡ªåŠ¨å®Œæˆã€‚å¯ åŠ¨äº†å¥‡å¶æ ¡éªŒæ§åˆ¶ä¹‹åï¼Œåœ¨å‘é€æ•°æ®å¸§æ—¶ä¼šè‡ªåŠ¨æ·»åŠ æ ¡éªŒä½ï¼Œæ¥æ”¶æ•°æ®æ—¶è‡ªåŠ¨éªŒè¯æ ¡éªŒä½ã€‚æ¥æ”¶ æ•°æ®æ—¶å¦‚æœå‡ºç°å¥‡å¶æ ¡éªŒä½éªŒè¯å¤±è´¥ï¼Œä¼šè§ USART_SR å¯„å­˜å™¨çš„ PE ä½ç½® 1ï¼Œå¹¶å¯ä»¥äº§ç”Ÿå¥‡å¶æ ¡éªŒä¸­æ–­ã€‚</p>
<p>å¶æ ¡éªŒPSä½ä¸º0ï¼Œå¥‡æ ¡éªŒä¸º1</p>
<h4 id="ä¸­æ–­äº‹ä»¶"><a href="#ä¸­æ–­äº‹ä»¶" class="headerlink" title="ä¸­æ–­äº‹ä»¶"></a>ä¸­æ–­äº‹ä»¶</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ä¸­æ–­äº‹ä»¶</th>
<th style="text-align:center">äº‹ä»¶æ ‡å¿—ä½ï¼ˆè¯¥ä½å¼•èµ·ä¸­æ–­ï¼‰</th>
<th style="text-align:center">ä¸­æ–­ä½¿èƒ½æ§åˆ¶ä½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‘é€æ•°æ®å¯„å­˜å™¨TDRä¸ºç©º</td>
<td style="text-align:center">TXE</td>
<td style="text-align:center">IXEIE</td>
</tr>
<tr>
<td style="text-align:center">CTS æ ‡å¿—</td>
<td style="text-align:center">CTS</td>
<td style="text-align:center">CTSIE</td>
</tr>
<tr>
<td style="text-align:center">å‘é€å®Œæˆ</td>
<td style="text-align:center">TC</td>
<td style="text-align:center">TCIE</td>
</tr>
<tr>
<td style="text-align:center">å‡†å¤‡å¥½è¯»å–æ¥æ”¶åˆ°çš„æ•°æ®ï¼ˆæ¥æ”¶ç§»ä½å¯„å­˜å™¨ä¸ºç©ºï¼‰</td>
<td style="text-align:center">RXNE</td>
<td style="text-align:center">RXNEIE</td>
</tr>
<tr>
<td style="text-align:center">æ£€æµ‹åˆ°ä¸Šæº¢é”™è¯¯</td>
<td style="text-align:center">ORE</td>
<td style="text-align:center">RXNEIE</td>
</tr>
<tr>
<td style="text-align:center">æµ‹åˆ°ç©ºé—²çº¿è·¯</td>
<td style="text-align:center">IDLE</td>
<td style="text-align:center">IDLEIE</td>
</tr>
<tr>
<td style="text-align:center">å¥‡å¶æ ¡éªŒé”™è¯¯</td>
<td style="text-align:center">PE</td>
<td style="text-align:center">PEIE</td>
</tr>
<tr>
<td style="text-align:center">æ–­è·¯æ ‡å¿—</td>
<td style="text-align:center">LBD</td>
<td style="text-align:center">LBDIE</td>
</tr>
<tr>
<td style="text-align:center">å¤šç¼“å†²é€šä¿¡ä¸­çš„å™ªå£°æ ‡å¿—ã€ä¸Šæº¢é”™è¯¯å’Œå¸§é”™è¯¯</td>
<td style="text-align:center">NF/ORE/FE</td>
<td style="text-align:center">EIE</td>
</tr>
</tbody>
</table>
</div>
<h1 id="IICåè®®"><a href="#IICåè®®" class="headerlink" title="IICåè®®"></a>IICåè®®</h1><p>I2C é€šè®¯åè®® (Inter ï¼ Integrated Circuit) æ˜¯ç”± Phiilps å…¬å¸å¼€å‘çš„ï¼Œç”±äºå®ƒå¼•è„šå°‘ï¼Œç¡¬ä»¶å®ç°ç®€å•ï¼Œ å¯æ‰©å±•æ€§å¼ºï¼Œä¸éœ€è¦ USARTã€CAN ç­‰é€šè®¯åè®®çš„å¤–éƒ¨æ”¶å‘è®¾å¤‡ï¼Œç°åœ¨è¢«å¹¿æ³›åœ°ä½¿ç”¨åœ¨ç³»ç»Ÿå†…å¤š ä¸ªé›†æˆç”µè·¯ (IC) é—´çš„é€šè®¯</p>
<h2 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h2><p>ç‰©ç†å±‚ä¸æ˜¯æœ¬ç¯‡é‡ç‚¹ï¼Œå°±ç®€å•è®²ä¸€ä¸‹ã€‚</p>
<img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/5.jpg" class title="image5">
<p>IICæ˜¯ä¸€ä¸ªæ”¯æŒå¤šè®¾å¤‡çš„æ€»çº¿ï¼Œåœ¨ä¸€ä¸ªIICé€šè®¯æ€»çº¿ä¸­ï¼Œå¯ä»¥è¿æ¥å¤šä¸ªé€šè®¯è®¾å¤‡ï¼Œå®ƒä»¬éƒ½å¯ä»¥æ˜¯ä¸»æœºæˆ–ä»æœºï¼ˆä¸»æœºå¯ä»¥ç®€å•ç†è§£ä¸ºå‘é€æ•°æ®çš„ä¸€ç«¯ï¼Œä»æœºåˆ™ä¸ºæ¥æ”¶ä¸€ç«¯ï¼‰</p>
<p>ä¸€ä¸ª IICæ€»çº¿åªä½¿ç”¨ä¸¤æ¡æ€»çº¿çº¿è·¯ï¼Œä¸€æ¡åŒå‘ä¸²è¡Œæ•°æ®çº¿ (SDA) ï¼Œä¸€æ¡ä¸²è¡Œæ—¶é’Ÿçº¿ (SCL)ã€‚ æ•°æ®çº¿å³ç”¨æ¥è¡¨ç¤ºæ•°æ®ï¼Œæ—¶é’Ÿçº¿ç”¨äºæ•°æ®æ”¶å‘åŒæ­¥ï¼Œä¸”æ¯ä¸ªè¿æ¥åˆ°æ€»çº¿çš„è®¾å¤‡éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„åœ°å€ï¼Œä¸»æœºå¯ä»¥åˆ©ç”¨è¿™ä¸ªåœ°å€è¿›è¡Œä¸åŒè®¾å¤‡ä¹‹é—´çš„è®¿é—®ã€‚</p>
<h2 id="åè®®å±‚"><a href="#åè®®å±‚" class="headerlink" title="åè®®å±‚"></a>åè®®å±‚</h2><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>åœ¨IICæ€»çº¿ç©ºé—²ï¼ˆåˆå§‹ï¼‰æ—¶ï¼ŒSCLå’ŒSDAéƒ½ä¸ºé«˜ç”µå¹³</p>
<h3 id="ç‰¹æ®Šä¿¡å·"><a href="#ç‰¹æ®Šä¿¡å·" class="headerlink" title="ç‰¹æ®Šä¿¡å·"></a>ç‰¹æ®Šä¿¡å·</h3><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/6.jpg" class title="image6">
<p>I2C æ€»çº¿åœ¨ä¼ é€æ•°æ®è¿‡ç¨‹ä¸­å…±æœ‰ä¸‰ç§ç±»å‹ä¿¡å·ï¼Œ å®ƒä»¬åˆ†åˆ«æ˜¯ï¼š<strong>å¼€å§‹ä¿¡å·ã€ç»“æŸä¿¡å·å’Œåº”ç­”ä¿¡å·</strong></p>
<ul>
<li><p>èµ·å§‹ä¿¡å·ï¼šSCL ä¸º<strong>é«˜ç”µå¹³</strong>æ—¶ï¼ŒSDA ç”±<strong>é«˜ç”µå¹³å‘ä½ç”µå¹³è·³å˜</strong>ï¼Œå¼€å§‹ä¼ é€æ•°æ®ã€‚</p>
</li>
<li><p>åœæ­¢ä¿¡å·ï¼šSCL ä¸º<strong>é«˜ç”µå¹³</strong>æ—¶ï¼Œ<strong>SDA ç”±ä½ç”µå¹³å‘é«˜ç”µå¹³è·³å˜</strong>ï¼Œç»“æŸä¼ é€æ•°æ®ã€‚</p>
</li>
<li><p>åº”ç­”ä¿¡å·ï¼šæ¥æ”¶æ•°æ®çš„è®¾å¤‡<strong>åœ¨æ¥æ”¶åˆ°8ä½æ•°æ®å</strong>ï¼Œ<strong>å‘å‘é€æ•°æ®çš„è®¾å¤‡å‘å‡ºç‰¹å®šçš„ä½ç”µå¹³è„‰å†²</strong>ï¼Œè¡¨ç¤ºå·²æ”¶åˆ°æ•°æ®ã€‚åº”ç­”ä¿¡å·çš„å‡ºç°æ¬¡æ•°ä¸æ•°æ®é•¿åº¦æœ‰å…³ï¼Œæ¯æ¥æ”¶8ä½æ•°æ®åæ¥æ”¶ç«¯éƒ½ä¼šå‘å‘é€ç«¯å‘å‡ºä¸€ä¸ªåº”ç­”ä¿¡å·</p>
<ul>
<li>æœ‰æ•ˆåº”ç­”ä½ï¼šSCLä¸ºé«˜ç”µå¹³æ—¶ï¼ŒSDAä¸ºä½ç”µå¹³</li>
<li>éåº”ç­”ä½ï¼š~ï¼ŒSDAä¸ºé«˜ç”µå¹³</li>
</ul>
<p><strong>å½“ä¸€ä¸ªå­—èŠ‚æŒ‰æ•°æ®ä½ä»é«˜ä½åˆ°ä½ä½çš„é¡ºåºä¼ è¾“å®Œåï¼Œç´§æ¥ç€ä»è®¾å¤‡å°†æ‹‰ä½SDAçº¿ï¼Œå›ä¼ ç»™ä¸»è®¾å¤‡ä¸€ä¸ªåº”ç­”ä½ACKï¼Œ æ­¤æ—¶æ‰è®¤ä¸ºä¸€ä¸ªæ•°æ®å¸§çœŸæ­£åœ°è¢«ä¼ è¾“å®Œæˆ</strong> </p>
</li>
</ul>
<p>ä¸ºç¡®ä¿ç¨³å®šæ€§ï¼Œæ¯æ¬¡ç”µå¹³è½¬æ¢çš„æ—¶é—´è¦&gt;4.7us</p>
<h3 id="æ•°æ®æœ‰æ•ˆæ€§"><a href="#æ•°æ®æœ‰æ•ˆæ€§" class="headerlink" title="æ•°æ®æœ‰æ•ˆæ€§"></a>æ•°æ®æœ‰æ•ˆæ€§</h3><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/7.jpg" class title="image7">
<p>ä¸ºäº†ä¸å°†åˆšåˆšè®²åˆ°çš„èµ·å§‹ã€åœæ­¢ä¿¡å·è¯¯è¯†åˆ«ä¸ºæ•°æ®å†…å®¹ï¼ŒIICåè®®è§„å®šäº†åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œ<strong>å½“SCL=1é«˜ç”µå¹³æ—¶ï¼Œæ•°æ®çº¿SDAå¿…é¡»ä¿æŒç¨³å®šçŠ¶æ€ï¼Œä¸å…è®¸æœ‰ç”µå¹³è·³å˜</strong>ï¼Œè€Œèµ·å§‹ã€åœæ­¢ä¿¡å·åˆ™åˆšå¥½æ˜¯åœ¨SCL=1é«˜ç”µå¹³æ—¶åœ¨SDAä¸Šå‘ç”Ÿç”µå¹³è·³å˜ï¼Œè¿™æ ·èµ·å§‹ã€åœæ­¢ä¿¡å·å°±å’Œæ•°æ®ä¼ è¾“å¾ˆå¥½çš„åŒºåˆ†å¼€äº†ã€‚å¹¶ä¸”å½“<strong>SCL=1æ—¶ï¼Œæ•°æ®çº¿SDAçš„ä»»ä½•ç”µå¹³å˜æ¢ä¼šçœ‹åšæ˜¯æ€»çº¿çš„èµ·å§‹ä¿¡å·æˆ–è€…åœæ­¢ä¿¡å·è€Œä¸æ˜¯æ•°æ®å†…å®¹ã€‚</strong>åªæœ‰åœ¨æ—¶é’Ÿçº¿ä¸Šçš„ä¿¡å·ä¸ºä½ç”µå¹³æœŸé—´ï¼Œæ•°æ®çº¿ä¸Šçš„é«˜ç”µå¹³æˆ–ä½ç”µå¹³çŠ¶æ€æ‰å…è®¸å˜åŒ–ï¼Œå› ä¸ºSCLä¸ºä½æ—¶ï¼ŒSDAçš„æ•°æ®æ˜¯æ— æ•ˆçš„ï¼Œä¸è¯»å–çš„ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥ç†è§£ä¸ºï¼Œå½“SCL=1é«˜ç”µå¹³æ—¶ä¸ºè¯»å–SDAä¹Ÿå°±æ˜¯æ•°æ®çš„è¿‡ç¨‹ï¼Œæ¯ä¸€æ¬¡SCLçš„é«˜ç”µå¹³è¯»å–1ä½SDAæ•°æ®ï¼Œåœ¨SCL=0ä½ç”µå¹³æ—¶ï¼ŒSDAå¯ä»¥æ”¹å˜ï¼Œä¸ºä¸‹ä¸€æ¬¡SCLé«˜ç”µå¹³çš„è¯»å–åšå‡†å¤‡</p>
<h3 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h3><p>å¤šæ•°IICè®¾å¤‡çš„åœ°å€ä¸º7ä½æˆ–10ä½ï¼Œé€šå¸¸ä½7ä½ã€‚åœ¨åœ°å€æœ€åè¿˜è¦åŠ ä¸Š1ä½çš„è¯»/å†™åœ°å€ï¼Œ<strong>æ‰€ä»¥è®¾å¤‡åœ°å€ä¸º8ä½</strong></p>
<p>å¯¹äºè¯»/å†™åœ°å€ä½ï¼š</p>
<ul>
<li>0è¡¨ç¤ºä¸»è®¾å¤‡å‘ä»è®¾å¤‡<strong>å†™æ•°æ®</strong></li>
<li>1è¡¨ç¤ºä¸»è®¾å¤‡ä»ä»è®¾å¤‡<strong>è¯»æ•°æ®</strong></li>
</ul>
<p>ä¾‹å¦‚ï¼Œå¯¹äºæ‰‹åŠ¿è¯†åˆ«æ¨¡å—PAJ7620ï¼Œå½“æˆ‘ä»¬è¦å‘æ¨¡å—å‘é€æ•°æ®æ—¶ï¼Œå°±è¦å…ˆå‘è¯¥æ¨¡å—çš„åœ°å€å‘é€æŒ‡å®šæ•°æ®å†…å®¹å°†å…¶è¯»/å†™åœ°å€ä½è®¾ç½®ä¸º0.æ¬¡æ•°è¯¥è®¾å¤‡æ‰å¯ä»¥æ¥æ”¶ä¸»è®¾å¤‡å†™æ¥çš„æ•°æ®</p>
<h3 id="æ•´ä½“æµç¨‹"><a href="#æ•´ä½“æµç¨‹" class="headerlink" title="æ•´ä½“æµç¨‹"></a>æ•´ä½“æµç¨‹</h3><ul>
<li>ä¸»æœºå…ˆäº§ç”Ÿ<strong>èµ·å§‹ä¿¡å·</strong></li>
<li>ç´§æ¥ç€å‘é€ä¸€ä¸ª<strong>è®¾å¤‡åœ°å€</strong>ï¼Œè¯¥è®¾å¤‡åœ°å€ç”±7ä½ä»æœºåœ°å€+1ä½æ•°æ®æ–¹å‘ä½ç»„æˆï¼Œæ­¤æ—¶æ–¹å‘ä½ä¸º0</li>
<li>ä¸»æœºå°†åœ°å€å‘é€åˆ°æ€»çº¿ä¸Šçš„è¿‡ç¨‹ä¸­ï¼Œæ€»çº¿ä¸Šçš„å…¶ä»–è®¾å¤‡ä¼šåŒæ—¶å°†åœ°å€é€ä½<strong>ä¸è‡ªå·±çš„åœ°å€ç›¸æ¯”è¾ƒ</strong>ï¼Œå½“7ä½ä»æœºåœ°å€åŒ¹é…æˆåŠŸåï¼Œæ ¹æ®ç¬¬å…«ä½æ•°æ®æ–¹å‘ä½å°†è¯¥è®¾å¤‡ç¡®å®šä¸ºå‘é€/æ¥æ”¶å™¨ã€‚</li>
<li>ç”±äºåœ°å€æ•°æ®ä¹Ÿç®—ä½œä¸€å¸§æ•°æ®ï¼Œæ‰€ä»¥åœ¨è®¾å¤‡åŒ¹é…æˆåŠŸåï¼Œä»æœºå°†ä¼šå‘é€1ä¸ªåº”ç­”ä¿¡å·</li>
<li>å¯¹äºPAJ7620ï¼Œæ­¤æ—¶éœ€è¦å¯¹å…¶å¯„å­˜å™¨è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–æˆåŠŸåä»æœºä¼šè¿”å›1ä¸ªåº”ç­”ä¿¡å·</li>
<li>æ­¤åä¸»æœºã€ä»æœºä¹‹é—´ä¾¿å¯æ­£å¸¸é€šè®¯</li>
<li>è‹¥è¦åœæ­¢è¯¥é€šä¿¡ï¼Œéœ€è¦ä¸»æœºå‘é€<strong>1ä¸ªåœæ­¢ä¿¡å·</strong></li>
<li>è‹¥è¦æ”¹å˜æ•°æ®ä¼ è¾“æ–¹å‘ï¼Œåœ¨ä»æœºåˆå§‹åŒ–å®Œæˆåï¼Œä¸»æœºéœ€è¦å†é‡æ–°äº§ç”Ÿ1ä¸ªèµ·å§‹ä¿¡å·ï¼›ä¹‹åå‘é€è®¾å¤‡åœ°å€ï¼Œæ­¤æ—¶æ–¹å‘ä½åº”ä¸º1ï¼›æœ€åä¸»æœºå°†è‡ªèº«SDAçš„IOå£è®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼ï¼›</li>
</ul>
<h2 id="STM32çš„IICç¡¬ä»¶"><a href="#STM32çš„IICç¡¬ä»¶" class="headerlink" title="STM32çš„IICç¡¬ä»¶"></a>STM32çš„IICç¡¬ä»¶</h2><p>STM32 çš„ I2C å¤–è®¾å¯ç”¨ä½œé€šè®¯çš„ä¸»æœºåŠä»æœºï¼Œæ”¯æŒ 100Kbit/s å’Œ 400Kbit/s çš„é€Ÿç‡ï¼Œæ”¯æŒ 7 ä½ã€10 ä½è®¾å¤‡åœ°å€ï¼Œæ”¯æŒ DMA æ•°æ®ä¼ è¾“ï¼Œå¹¶å…·æœ‰æ•°æ®æ ¡éªŒåŠŸèƒ½</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">STM32F10x</th>
<th style="text-align:center">IIC1</th>
<th style="text-align:center">IIC2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SCL</td>
<td style="text-align:center">PB6/PB8ï¼ˆé‡æ˜ å°„ï¼‰</td>
<td style="text-align:center">PB10</td>
</tr>
<tr>
<td style="text-align:center">SDA</td>
<td style="text-align:center">PB7/PB9ï¼ˆé‡æ˜ å°„ï¼‰</td>
<td style="text-align:center">PB11</td>
</tr>
</tbody>
</table>
</div>
<img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/8.jpg" class title="image8">
<h3 id="æ—¶é’Ÿé€»è¾‘"><a href="#æ—¶é’Ÿé€»è¾‘" class="headerlink" title="æ—¶é’Ÿé€»è¾‘"></a>æ—¶é’Ÿé€»è¾‘</h3><p>STM32 çš„I2Cå¤–è®¾éƒ½æŒ‚è½½åœ¨APB1æ€»çº¿ä¸Šï¼Œä½¿ç”¨APB1çš„æ—¶é’Ÿæº PCLK1ï¼Œå…·ä½“çš„SCLæ—¶é’Ÿè®¡ç®—ä¸ç»†è®²äº†</p>
<h3 id="æ•°æ®æ§åˆ¶é€»è¾‘"><a href="#æ•°æ®æ§åˆ¶é€»è¾‘" class="headerlink" title="æ•°æ®æ§åˆ¶é€»è¾‘"></a>æ•°æ®æ§åˆ¶é€»è¾‘</h3><p>I2C çš„ SDA ä¿¡å·ä¸»è¦è¿æ¥åˆ°æ•°æ®ç§»ä½å¯„å­˜å™¨ä¸Šï¼Œæ•°æ®ç§»ä½å¯„å­˜å™¨çš„æ•°æ®æ¥æºåŠç›®æ ‡æ˜¯æ•°æ®å¯„å­˜å™¨ (DR)ã€åœ°å€å¯„å­˜å™¨ (OAR)ã€PEC å¯„å­˜å™¨ä»¥åŠ SDA æ•°æ®çº¿ã€‚</p>
<h4 id="æ•°æ®å¯„å­˜å™¨DR-1"><a href="#æ•°æ®å¯„å­˜å™¨DR-1" class="headerlink" title="æ•°æ®å¯„å­˜å™¨DR"></a>æ•°æ®å¯„å­˜å™¨DR</h4><p>å½“å‘å¤–å‘é€æ•°æ®çš„æ—¶å€™ï¼Œæ•°æ®ç§»ä½å¯„å­˜å™¨ä»¥DRä¸ºæ•°æ®æºï¼ŒæŠŠæ•°æ®ä¸€ä½ä¸€ä½åœ°é€šè¿‡ SDA ä¿¡å·çº¿å‘é€å‡ºå»ï¼›å½“ä»å¤–éƒ¨æ¥æ”¶æ•°æ®çš„æ—¶å€™ï¼Œæ•°æ®ç§»ä½å¯„å­˜å™¨æŠŠ SDA ä¿¡å·çº¿é‡‡æ ·åˆ°çš„æ•°æ®ä¸€ä½ä¸€ä½åœ°å­˜å‚¨åˆ°DRä¸­ã€‚ </p>
<h4 id="å¸§é”™è¯¯æ ¡éªŒè®¡ç®—PEC"><a href="#å¸§é”™è¯¯æ ¡éªŒè®¡ç®—PEC" class="headerlink" title="å¸§é”™è¯¯æ ¡éªŒè®¡ç®—PEC"></a>å¸§é”™è¯¯æ ¡éªŒè®¡ç®—PEC</h4><p>è‹¥ä½¿èƒ½äº†æ•°æ®æ ¡éªŒï¼Œæ¥æ”¶åˆ°çš„æ•°æ®ä¼šç»è¿‡ PCE è®¡ç®—å™¨è¿ç®—ï¼Œè¿ç®—ç»“æœå­˜å‚¨åœ¨â€œPEC å¯„å­˜å™¨â€ä¸­ã€‚ </p>
<h4 id="æ¯”è¾ƒå™¨"><a href="#æ¯”è¾ƒå™¨" class="headerlink" title="æ¯”è¾ƒå™¨"></a>æ¯”è¾ƒå™¨</h4><p>å½“ STM32 çš„ I2C å·¥ä½œåœ¨<strong>ä»æœºæ¨¡å¼</strong>çš„æ—¶å€™ï¼Œæ¥æ”¶åˆ°è®¾å¤‡åœ°å€ä¿¡å·æ—¶ï¼Œæ•°æ®ç§»ä½å¯„å­˜å™¨ä¼šæŠŠæ¥æ”¶åˆ° çš„åœ°å€ä¸ STM32 çš„è‡ªèº«çš„â€œI2C åœ°å€å¯„å­˜å™¨â€çš„å€¼ä½œæ¯”è¾ƒï¼Œä»¥ä¾¿å“åº”ä¸»æœºçš„å¯»å€ã€‚STM32 çš„è‡ª èº« I2C åœ°å€å¯é€šè¿‡ä¿®æ”¹â€œè‡ªèº«åœ°å€å¯„å­˜å™¨â€ä¿®æ”¹ï¼Œ<strong>æ”¯æŒåŒæ—¶ä½¿ç”¨ä¸¤ä¸ª I2C è®¾å¤‡åœ°å€ï¼Œä¸¤ä¸ªåœ°å€åˆ†åˆ«å­˜å‚¨åœ¨ OAR1 å’Œ OAR2 ä¸­</strong></p>
<h3 id="æ•´ä½“æ§åˆ¶é€»è¾‘"><a href="#æ•´ä½“æ§åˆ¶é€»è¾‘" class="headerlink" title="æ•´ä½“æ§åˆ¶é€»è¾‘"></a>æ•´ä½“æ§åˆ¶é€»è¾‘</h3><p>æ•´ä½“æ§åˆ¶é€»è¾‘è´Ÿè´£åè°ƒæ•´ä¸ª I2C å¤–è®¾ï¼Œæ§åˆ¶é€»è¾‘çš„å·¥ä½œæ¨¡å¼æ ¹æ®æˆ‘ä»¬é…ç½®çš„â€œæ§åˆ¶å¯„å­˜å™¨ (CR1/CR2)â€çš„å‚æ•°è€Œæ”¹å˜ã€‚åœ¨å¤–è®¾å·¥ä½œæ—¶ï¼Œæ§åˆ¶é€»è¾‘ä¼šæ ¹æ®å¤–è®¾çš„å·¥ä½œçŠ¶æ€ä¿®æ”¹â€œçŠ¶æ€å¯„å­˜å™¨ (SR1 å’Œ SR2)â€ï¼Œæˆ‘ä»¬åªè¦è¯»å–è¿™äº›å¯„å­˜å™¨ç›¸å…³çš„å¯„å­˜å™¨ä½ï¼Œå°±å¯ä»¥äº†è§£ I2C çš„å·¥ä½œçŠ¶æ€ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ§åˆ¶é€»è¾‘è¿˜æ ¹æ®è¦æ±‚ï¼Œè´Ÿè´£æ§åˆ¶äº§ç”Ÿ I2C ä¸­æ–­ä¿¡å·ã€DMA è¯·æ±‚åŠå„ç§ I2C çš„é€šè®¯ä¿¡å· (èµ·å§‹ã€åœæ­¢ã€å“åº”ä¿¡å·ç­‰)ã€‚</p>
<h3 id="ç¡¬ä»¶é€šè®¯è¿‡ç¨‹"><a href="#ç¡¬ä»¶é€šè®¯è¿‡ç¨‹" class="headerlink" title="ç¡¬ä»¶é€šè®¯è¿‡ç¨‹"></a>ç¡¬ä»¶é€šè®¯è¿‡ç¨‹</h3><h4 id="å‘é€å™¨-1"><a href="#å‘é€å™¨-1" class="headerlink" title="å‘é€å™¨"></a>å‘é€å™¨</h4><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/9.jpg" class title="image9">
<p>å‘é€æµç¨‹ï¼š</p>
<ul>
<li>å½“å‘ç”Ÿèµ·å§‹ä¿¡å·åï¼Œå®ƒäº§ç”Ÿäº‹ä»¶â€œEV5â€ï¼Œå¹¶ä¼šå¯¹ SR1 å¯„å­˜å™¨çš„â€œSBâ€ ä½ç½® 1ï¼Œè¡¨ç¤ºèµ·å§‹ä¿¡å·å·²ç»å‘é€</li>
<li>ç´§æ¥ç€å‘é€è®¾å¤‡åœ°å€å¹¶ç­‰å¾…åº”ç­”ä¿¡å·ï¼Œè‹¥æœ‰ä»æœºåº”ç­”ï¼Œåˆ™äº§ç”Ÿäº‹ä»¶â€œEV6â€åŠâ€œEV8â€ï¼Œè¿™ æ—¶ SR1 å¯„å­˜å™¨çš„â€œADDRâ€ä½åŠâ€œTXEâ€ä½è¢«ç½® 1ï¼Œ<strong>ADDR ä¸º 1 è¡¨ç¤ºåœ°å€å·²ç»å‘é€ï¼ŒTXE ä¸º 1 è¡¨ç¤ºæ•°æ®å¯„å­˜å™¨ä¸ºç©º</strong></li>
<li>ä»¥ä¸Šæ­¥éª¤æ­£å¸¸æ‰§è¡Œå¹¶å¯¹ ADDR ä½æ¸…é›¶åï¼Œæˆ‘ä»¬å¾€ I2C çš„â€œæ•°æ®å¯„å­˜å™¨ DRâ€å†™å…¥è¦å‘é€çš„æ•°æ®ï¼Œè¿™æ—¶ TXE ä½ä¼šè¢«é‡ç½® 0ï¼Œè¡¨ç¤ºæ•°æ®å¯„å­˜å™¨éç©ºï¼ŒI2C å¤–è®¾é€šè¿‡ SDA ä¿¡å·çº¿ä¸€ä½ä½æŠŠæ•°æ®å‘é€ å‡ºå»åï¼Œåˆä¼šäº§ç”Ÿâ€œEV8â€äº‹ä»¶ï¼Œå³ TXE ä½è¢«ç½® 1ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±å¯ä»¥å‘é€å¤šä¸ªå­—èŠ‚æ•°æ®äº†</li>
<li>å‘é€æ•°æ®å®Œæˆåï¼Œæ§åˆ¶ I2C è®¾å¤‡äº§ç”Ÿä¸€ä¸ªåœæ­¢ä¿¡å· (P)ï¼Œè¿™ä¸ªæ—¶å€™ä¼šäº§ç”Ÿ EV8_2 äº‹ä»¶ï¼ŒSR1 çš„ TXE ä½åŠ BTF ä½éƒ½è¢«ç½® 1ï¼Œè¡¨ç¤ºé€šè®¯ç»“æŸ</li>
</ul>
<h4 id="æ¥æ”¶å™¨-1"><a href="#æ¥æ”¶å™¨-1" class="headerlink" title="æ¥æ”¶å™¨"></a>æ¥æ”¶å™¨</h4><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/10.jpg" class title="image10">
<p>å¯ä»¥å‚è€ƒå‘é€å™¨ï¼Œåº”è¯¥å¯ä»¥æ¨æµ‹å‡ºæ¥</p>
<h2 id="è½¯ä»¶IICå’Œç¡¬ä»¶IICçš„é€‰æ‹©"><a href="#è½¯ä»¶IICå’Œç¡¬ä»¶IICçš„é€‰æ‹©" class="headerlink" title="è½¯ä»¶IICå’Œç¡¬ä»¶IICçš„é€‰æ‹©"></a>è½¯ä»¶IICå’Œç¡¬ä»¶IICçš„é€‰æ‹©</h2><p>ç”±ç¡¬ä»¶å¤„ç†IICå¯ä»¥å‡è½»CPUçš„è´Ÿæ‹…ï¼Œä½†æ˜¯é…ç½®å’Œä½¿ç”¨èµ·æ¥éƒ½è¾ƒä¸ºå¤æ‚ï¼›è½¯ä»¶æ¨¡æ‹ŸIICç”±äºæ˜¯ç”±CPUæ§åˆ¶æ•´ä¸ªé€šè®¯æ—¶åºå’Œå¼•è„šçŠ¶æ€ï¼ŒCPUå ç”¨ä¼šæ›´å¤šï¼Œä½†æ˜¯ç›¸å¯¹çš„ä½¿ç”¨èµ·æ¥ä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œä¸”ä¾¿äºç§»æ¤ã€‚</p>
<h1 id="SPIåè®®"><a href="#SPIåè®®" class="headerlink" title="SPIåè®®"></a>SPIåè®®</h1><p>SPI åè®®æ˜¯ç”±æ‘©æ‰˜ç½—æ‹‰å…¬å¸æå‡ºçš„é€šè®¯åè®® (Serial Peripheral Interface)ï¼Œå³ä¸²è¡Œå¤–å›´è®¾å¤‡æ¥å£ï¼Œæ˜¯ ä¸€ç§é«˜é€Ÿå…¨åŒå·¥çš„é€šä¿¡æ€»çº¿ã€‚å®ƒè¢«å¹¿æ³›åœ°ä½¿ç”¨åœ¨ ADCã€LCD ç­‰è®¾å¤‡ä¸ MCU é—´ï¼Œè¦æ±‚é€šè®¯é€Ÿç‡ è¾ƒé«˜çš„åœºåˆã€‚</p>
<h2 id="ç‰©ç†å±‚-1"><a href="#ç‰©ç†å±‚-1" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h2><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/11.jpg" class title="image11">
<p>SPIä½¿ç”¨3æ¡æ€»çº¿å’Œç‰‡é€‰çº¿ï¼Œ3 æ¡æ€»çº¿åˆ†åˆ«ä¸º SCKã€MOSIã€MISOï¼›ç‰‡é€‰çº¿ï¼ˆä¹Ÿç§°ä¸º NSSã€CSï¼‰ç”¨äºä¸»æœºç‰‡é€‰è®¾å¤‡ï¼š</p>
<ul>
<li><p>ç‰‡é€‰ä¿¡å·çº¿ï¼šå½“æœ‰å¤šä¸ª SPI ä»è®¾å¤‡ä¸ SPI ä¸»æœºç›¸è¿æ—¶ï¼Œè®¾å¤‡çš„å…¶å®ƒä¿¡å·çº¿ SCKã€MOSI åŠ MIS O åŒæ—¶å¹¶è”åˆ°ç›¸åŒçš„ SPI æ€»çº¿ä¸Šï¼Œ<strong>å³æ— è®ºæœ‰å¤šå°‘ä¸ªä»è®¾å¤‡ï¼Œéƒ½å…±åŒåªä½¿ç”¨è¿™ 3 æ¡æ€»çº¿</strong>ï¼›è€Œæ¯ä¸ªä»è®¾å¤‡éƒ½æœ‰ç‹¬ç«‹çš„è¿™ä¸€æ¡ NSS ä¿¡å·çº¿ï¼Œæœ¬ä¿¡å·çº¿ç‹¬å ä¸»æœºçš„ä¸€ä¸ªå¼•è„šï¼Œ<strong>å³æœ‰å¤šå°‘ä¸ªä»è®¾å¤‡ï¼Œå°± æœ‰å¤šå°‘æ¡ç‰‡é€‰ä¿¡å·çº¿ã€‚</strong></p>
<p>å½“ä¸»æœºè¦é€‰æ‹©ä»è®¾å¤‡æ—¶ï¼Œ æŠŠè¯¥ä»è®¾å¤‡çš„ NSS ä¿¡å·çº¿è®¾ç½®ä¸ºä½ç”µå¹³ï¼Œè¯¥ä»è®¾å¤‡å³è¢«é€‰ä¸­ï¼Œå³ç‰‡é€‰æœ‰æ•ˆï¼Œæ¥ç€ä¸»æœºå¼€å§‹ä¸è¢«é€‰ä¸­çš„ä»è®¾å¤‡è¿›è¡Œ SPI é€šè®¯ã€‚<strong>æ‰€ä»¥ SPI é€šè®¯ä»¥ NSS çº¿ç½®ä½ç”µå¹³ä¸ºå¼€å§‹ä¿¡å·ï¼Œä»¥ NSS çº¿è¢«æ‹‰é«˜ä½œä¸ºç»“æŸä¿¡å·ã€‚</strong></p>
</li>
<li><p>SCKæ—¶é’Ÿçº¿ï¼šç”¨äºé€šè®¯æ•°æ®åŒæ­¥ã€‚å®ƒç”±é€šè®¯ä¸»æœºäº§ç”Ÿï¼Œå†³å®šäº†é€šè®¯çš„é€Ÿç‡</p>
</li>
<li><p>MOSIï¼šä¸»è®¾å¤‡è¾“å‡º/ä»è®¾å¤‡è¾“å…¥å¼•è„šã€‚</p>
</li>
<li><p>MISOï¼šä¸»è®¾å¤‡è¾“å…¥/ä»è®¾å¤‡è¾“å‡ºå¼•è„šã€‚</p>
</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒäºä¸²å£ä¸­ï¼Œä¸»æœºçš„TXå¯¹åº”ä»æœºçš„RXï¼ŒSPIä¸­ä¸»æœºå’Œä»æœºçš„MOSIå’ŒMISOæ˜¯<strong>ä¸€ä¸€å¯¹åº”çš„</strong></p>
<h2 id="åè®®å±‚-1"><a href="#åè®®å±‚-1" class="headerlink" title="åè®®å±‚"></a>åè®®å±‚</h2><h3 id="æ—¶é’Ÿææ€§ä¸ç›¸ä½"><a href="#æ—¶é’Ÿææ€§ä¸ç›¸ä½" class="headerlink" title="æ—¶é’Ÿææ€§ä¸ç›¸ä½"></a>æ—¶é’Ÿææ€§ä¸ç›¸ä½</h3><p>å¯¹äºSTM32ï¼ŒSPI_CRå¯„å­˜å™¨ä¸­æœ‰CPOLå’ŒCPHAä½ï¼Œå…¶ä¸­CPOLä½æ§åˆ¶æ—¶é’Ÿææ€§ï¼ŒCPHAæ§åˆ¶æ—¶é’Ÿç›¸ä½ã€‚</p>
<ul>
<li>CPOLæ—¶é’Ÿææ€§ï¼š<ul>
<li>ç½®0ï¼šSCKåœ¨ç©ºé—²æ—¶ä¸ºä½ç”µå¹³</li>
<li>ç½®1ï¼šSCKåœ¨ç©ºé—²æ—¶ä¸ºé«˜ç”µå¹³</li>
</ul>
</li>
<li>CPHAæ—¶é’Ÿç›¸ä½ï¼š<ul>
<li>ç½®0ï¼šå°†SCKæ—¶é’Ÿç¬¬ä¸€è¾¹æ²¿ç”¨ä½œæ•°æ®ä½é‡‡æ ·</li>
<li>ç½®1ï¼šå°†SCKæ—¶é’Ÿç¬¬äºŒè¾¹æ²¿ç”¨ä½œæ•°æ®é‡‡æ ·</li>
</ul>
</li>
</ul>
<p>å› æ­¤ï¼ŒåŸºäºä¸åŒé…ç½®çš„CPOLå’ŒCPHAï¼ŒSPIä¸€å…±æœ‰å››ç§é€šè®¯æ—¶åºï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">CPOL \ CPHA</th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">æ£€æµ‹ä¸Šå‡æ²¿</td>
<td style="text-align:center">æ£€æµ‹ä¸‹é™æ²¿</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">æ£€æµ‹ä¸‹é™æ²¿</td>
<td style="text-align:center">æ£€æµ‹ä¸Šå‡æ²¿</td>
</tr>
</tbody>
</table>
</div>
<img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/12.jpg" class title="image12">
<h3 id="èµ·å§‹ä¿¡å·å’Œåœæ­¢ä¿¡å·"><a href="#èµ·å§‹ä¿¡å·å’Œåœæ­¢ä¿¡å·" class="headerlink" title="èµ·å§‹ä¿¡å·å’Œåœæ­¢ä¿¡å·"></a>èµ·å§‹ä¿¡å·å’Œåœæ­¢ä¿¡å·</h3><p>é€šè®¯çš„å¼€å§‹ä¸ç»“æŸç”±ç‰‡é€‰ä¿¡å·çº¿æ§åˆ¶ï¼Œå½“ä¸»æœºè¦é€‰æ‹©ä»è®¾å¤‡æ—¶ï¼Œ æŠŠè¯¥ä»è®¾å¤‡çš„ NSS ä¿¡å·çº¿è®¾ç½®ä¸ºä½ç”µå¹³ï¼Œè¯¥ä»è®¾å¤‡å³è¢«é€‰ä¸­ï¼Œå³ç‰‡é€‰æœ‰æ•ˆï¼Œæ¥ç€ä¸»æœºå¼€å§‹ä¸è¢«é€‰ä¸­çš„ä»è®¾å¤‡è¿›è¡Œ SPI é€šè®¯ã€‚<strong>æ‰€ä»¥ SPI é€šè®¯ä»¥ NSS çº¿ç½®ä½ç”µå¹³ä¸ºå¼€å§‹ä¿¡å·ï¼Œä»¥ NSS çº¿è¢«æ‹‰é«˜ä½œä¸ºç»“æŸä¿¡å·ã€‚</strong></p>
<h3 id="æ•°æ®ä½åˆ‡æ¢"><a href="#æ•°æ®ä½åˆ‡æ¢" class="headerlink" title="æ•°æ®ä½åˆ‡æ¢"></a>æ•°æ®ä½åˆ‡æ¢</h3><p>ç”±ä¸Šå›¾å¯ä»¥è§‚å¯Ÿå‡ºï¼Œæ•°æ®ä½æ ¹æ®æ—¶é’Ÿé…ç½®ä¸åŒï¼Œé‡‡æ ·ç‚¹ä¹Ÿä¸åŒ</p>
<ul>
<li>å½“CPHAæ—¶é’Ÿç›¸ä½ä¸º0æ—¶ï¼ŒSCKç¬¬ä¸€ä¸ªä¿¡å·è¾¹æ²¿ç”¨äºé‡‡é›†æ•°æ®ï¼Œç¬¬äºŒä¸ªä¿¡å·è¾¹æ²¿ç”¨äºåˆ‡æ¢æ•°æ®ä½ï¼Œä¸ºä¸‹ä¸€æ¬¡é‡‡æ ·åšå‡†å¤‡</li>
<li>å½“CPHAæ—¶é’Ÿç›¸ä½ä¸º1æ—¶ï¼ŒSCKç¬¬ä¸€ä¸ªä¿¡å·è¾¹æ²¿ç”¨äºæ•°æ®ä½åˆ‡æ¢ï¼Œç¬¬äºŒä¸ªä¿¡å·è¾¹æ²¿ç”¨äºé‡‡é›†æ•°æ®</li>
</ul>
<p>åŒæ—¶ï¼Œæ¯ä¸ªæ•°æ®å¸§æ ¹æ®å¯„å­˜å™¨SPI_CR1å¯„å­˜å™¨çš„DFFçš„é…ç½®å¯ä»¥é…ç½®ä¸º8ä½æˆ–16ä½</p>
<h2 id="STM32çš„SPIç¡¬ä»¶"><a href="#STM32çš„SPIç¡¬ä»¶" class="headerlink" title="STM32çš„SPIç¡¬ä»¶"></a>STM32çš„SPIç¡¬ä»¶</h2><img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/13.jpg" class title="image13">
<p>å…·ä½“çš„å¯„å­˜å™¨æ¯ä¸€ä½çš„åŠŸèƒ½è¯·å‚è€ƒ<a href="https://blog.csdn.net/k666499436/article/details/124882583?ops_request_misc=%7B%22request%5Fid%22%3A%22167673150616800182736214%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=167673150616800182736214&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-6-124882583-null-null.142^v73^insert_down3,201^v4^add_ask,239^v2^insert_chatgpt&amp;utm_term=spiåè®®stm32&amp;spm=1018.2226.3001.4187">STM32SPIåè®®é€šä¿¡è¯¦è§£_rivencodeçš„åšå®¢-CSDNåšå®¢_stm32spié€šä¿¡</a>ï¼Œè®²çš„å¾ˆè¯¦ç»†ï¼Œè¿™é‡Œæˆ‘ä¸»è¦è®²ä¸€ä¸‹ä¸»æœºæ¨¡å¼ä¸‹çš„å‘é€æµç¨‹ï¼š</p>
<img src="/images/loading.png" data-original="/2023/02/09/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/14.jpg" class title="ä¸»æœºå‘é€æµç¨‹">
<ul>
<li><p>NSSç‰‡é€‰çº¿äº§ç”Ÿä¿¡å·ï¼Œé€‰æ‹©è®¾å¤‡</p>
</li>
<li><p>ç¬¬ä¸€æ¬¡å‘é€æ—¶ï¼Œå‘é€ç¼“å†²åŒºä¸ºç©ºï¼Œå› æ­¤è¡¨ç¤ºå…¶ä¸ºç©ºçš„TXEæ ‡å¿—åœ¨æœ€å¼€å§‹ä¼šä¸€ç›´ä¸ºé«˜ç”µå¹³</p>
</li>
<li><p>ç¬¬ä¸€æ¬¡å‘é€æ—¶ï¼Œç¬¬ä¸€å¸§æ•°æ®0xF1åœ¨æ—¶é’Ÿä¿¡å·äº§ç”Ÿçš„åŒæ—¶è¢«å­˜å…¥å‘é€ç¼“å†²åŒºä¸­ï¼Œç­‰å¾…è¢«å‘å‡ºï¼Œæ­¤æ—¶TXEä¸º0ï¼Œè¡¨ç¤ºå‘é€ç¼“å†²åŒºéç©º</p>
</li>
<li><p><strong>1ä¸ªæ—¶é’Ÿå‘¨æœŸä¹‹å</strong>ï¼Œ0xF1ä»å‘é€ç¼“å†²åŒºè¢«ç§»å…¥ç§»ä½å¯„å­˜å™¨ï¼ŒåŒæ—¶æŠŠç¬¬0ä½æ•°æ®ä»ç§»ä½å¯„å­˜å™¨å‘å‡ºï¼Œæ­¤æ—¶å‘é€å¯„å­˜å™¨è¢«æ¸…ç©ºï¼ŒTXEç¡¬ä»¶ç½®1</p>
<p><strong>ä¸æ­¤åŒæ—¶ï¼Œ</strong>ä»æœºç«¯ä¹Ÿå‘é€äº†1ä½æ•°æ®è‡³æ¥æ”¶ç¼“å†²åŒºä¸­</p>
</li>
<li><p>åœ¨è¿™ä¹‹åï¼Œ<strong>ç¬¬äºŒå¸§æ•°æ®ï¼ˆä¸æ˜¯ç¬¬äºŒä½ï¼ï¼‰</strong>åœ¨1ä¸ªæ—¶é’Ÿå‘¨æœŸåè¢«å­˜å…¥å‘é€ç¼“å†²åŒºä¸­ç­‰å¾…ä¸‹ä¸€æ¬¡çš„è½¬ç§»ã€‚å‘é€ç¼“å†²åŒºéç©ºï¼ŒTXEç½®0</p>
</li>
<li><p>ä¸æ­¤åŒæ—¶ï¼Œæ¯è¿‡1ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œä¸»æœºç«¯ç§»ä½å¯„å­˜å™¨å‘é€å‡º1ä½æ•°æ®ï¼Œæ¥æ”¶ç¼“å†²åŒºå­˜å…¥1ä½æ•°æ®ï¼Œ1å¸§æ•°æ®åœ¨8ä¸ªæ—¶é’Ÿå‘¨æœŸåè¢«å®Œå…¨å‘é€å‡ºã€‚åŒæ—¶ä¸»æœºä¹Ÿæ”¶åˆ°1å¸§å®Œæ•´æ•°æ®ï¼Œæ­¤æ—¶RXNEæ ‡å¿—ç½®ä½ï¼Œæ­¤æ—¶ç¬¬ä¸€å¸§æ•°æ®æ­£å¼å‘é€å®Œæ¯•</p>
</li>
<li><p>æ­¤åæ•°æ®ä»ä¸Šè¿°ç¬¬å››ç‚¹å¼€å§‹å¾ªç¯</p>
</li>
</ul>
<p>å‡å¦‚æˆ‘ä»¬ä½¿èƒ½äº† TXE æˆ– RXNE ä¸­æ–­ï¼ŒTXE æˆ– RXNE ç½® 1 æ—¶ä¼šäº§ç”Ÿ SPI ä¸­æ–­ä¿¡å·ï¼Œè¿›å…¥åŒä¸€ä¸ªä¸­æ–­æœåŠ¡å‡½æ•°ï¼Œåˆ° SPI ä¸­æ–­æœåŠ¡ç¨‹åºåï¼Œå¯é€šè¿‡æ£€æŸ¥å¯„å­˜å™¨ä½æ¥äº†è§£æ˜¯å“ªä¸€ä¸ªäº‹ä»¶ï¼Œå†åˆ†åˆ«è¿›è¡Œå¤„ç†ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ DMA æ–¹å¼æ¥æ”¶å‘æ¥æ”¶ç¼“å†²åŒºä¸­çš„æ•°æ®ã€‚</p>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C++-åŠ¨æ€å†…å­˜</title>
    <url>/2023/02/02/Cjj9/</url>
    <content><![CDATA[<h1 id="å†…å­˜ç›¸å…³"><a href="#å†…å­˜ç›¸å…³" class="headerlink" title="å†…å­˜ç›¸å…³"></a>å†…å­˜ç›¸å…³</h1><p>åšå®¢æˆªæ­¢åˆ°ç›®å‰çš„C++éƒ¨åˆ†éƒ½åªä½¿ç”¨äº†é™æ€å†…å­˜å’Œæ ˆå†…å­˜ã€‚</p>
<p>é™æ€å†…å­˜ç”¨äºä¿å­˜å±€éƒ¨staticå¯¹è±¡ã€ç±»çš„staticæ•°æ®æˆå‘˜å’Œä»»ä½•å®šä¹‰åœ¨å‡½æ•°ä¹‹å¤–çš„å˜é‡ã€‚</p>
<p>æ ˆå†…å­˜ç”¨äºä¿å­˜å®šä¹‰åœ¨å‡½æ•°å†…çš„éé™æ€å˜é‡ã€‚</p>
<p>åˆ†é…åœ¨é™æ€å†…å­˜å’Œæ ˆå†…å­˜ä¸­çš„å¯¹è±¡éƒ½ç”±ç¼–è¯‘å™¨æ§åˆ¶å®ƒä»¬çš„åˆ›å»ºå’Œé”€æ¯ï¼šC++ä¸­é™æ€å¯¹è±¡åœ¨<strong>è¯¥å¯¹è±¡è¢«é¦–æ¬¡ç”¨åˆ°</strong>æ—¶åˆ†é…å†…å­˜ï¼ˆCä¸­æ˜¯åœ¨ç¼–è¯‘æœŸé—´åˆå§‹åŒ–ï¼‰ï¼›æ ˆå†…å­˜åœ¨å…¶å®šä¹‰çš„ç¨‹åºå—è¿è¡Œæ—¶åˆ†é…å†…å­˜ã€‚</p>
<p>é™¤äº†ä»¥ä¸Šä¸¤ä¸ªå†…å­˜åŒºï¼Œæ¯ä¸ªç¨‹åºè¿˜æ‹¥æœ‰ä¸€ä¸ªå†…å­˜æ± ï¼Œè¿™éƒ¨åˆ†è¢«ç§°ä½œè‡ªç”±ç©ºé—´æˆ–<strong>å †</strong>ã€‚å †ç”¨äºå­˜å‚¨åŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œå³ç”±ç¨‹åºæœ¬èº«æ¥æ§åˆ¶ç”Ÿå­˜æœŸçš„å¯¹è±¡ã€‚</p>
<h1 id="åŠ¨æ€å†…å­˜ä¸æ™ºèƒ½æŒ‡é’ˆ"><a href="#åŠ¨æ€å†…å­˜ä¸æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="åŠ¨æ€å†…å­˜ä¸æ™ºèƒ½æŒ‡é’ˆ"></a>åŠ¨æ€å†…å­˜ä¸æ™ºèƒ½æŒ‡é’ˆ</h1><p>ç”±äºåŠ¨æ€å†…å­˜å¯¹è±¡æ˜¯ç”±ç¨‹åºæ§åˆ¶ï¼Œå› æ­¤å…¶å†…å­˜çš„ä½¿ç”¨å¾ˆå®¹æ˜“å‡ºé—®é¢˜ã€‚ä¸ºäº†æ›´å®‰å…¨ã€æ–¹ä¾¿åœ°ä½¿ç”¨åŠ¨æ€å†…å­˜ï¼Œæ ‡å‡†åº“æä¾›äº†ä¸¤ç§æ™ºèƒ½æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆä¸å¸¸è§„æŒ‡é’ˆçš„é‡è¦åŒºåˆ«æ˜¯<strong>æ™ºèƒ½æŒ‡é’ˆè´Ÿè´£è‡ªåŠ¨é‡Šæ”¾æ‰€æŒ‡å‘çš„å¯¹è±¡</strong>ï¼Œå¹¶ä¸”æ™ºèƒ½æŒ‡é’ˆæ˜¯æ¨¡æ¿ã€‚ä¸¤ç§æ™ºèƒ½åˆ¶é€ çš„åŒºåˆ«åœ¨äºç®¡ç†åº•å±‚æŒ‡é’ˆçš„æ–¹å¼ï¼š</p>
<ul>
<li>shared_ptrç±»å‹å…è®¸å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</li>
<li>unique_ptråˆ™åªå…è®¸å­˜åœ¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå¯¹è±¡</li>
</ul>
<p>å®ƒä»¬è¢«å®šä¹‰åœ¨å¤´æ–‡ä»¶memoryä¸­</p>
<h2 id="1ã€shared-ptrç±»"><a href="#1ã€shared-ptrç±»" class="headerlink" title="1ã€shared_ptrç±»"></a>1ã€shared_ptrç±»</h2><p>æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œç±»ä¼¼äºvectorç­‰ç±»å‹ï¼Œå¯¹æ™ºèƒ½æŒ‡é’ˆçš„åˆå§‹åŒ–ä¹Ÿè¦æä¾›æŒ‡é’ˆæŒ‡å‘çš„ç±»å‹è¿™ä¸€ä¿¡æ¯ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">shared_ptr&lt;string&gt; p1;</span><br><span class="line">shared_ptr&lt;vector&lt;<span class="type">int</span>&gt;&gt; p2;</span><br></pre></td></tr></table></figure>
<p>æ™ºèƒ½æŒ‡é’ˆçš„æ“ä½œåŸºæœ¬äºå¸¸è§„æŒ‡é’ˆç›¸åŒï¼Œå½“ç„¶å…¶ä½œä¸ºä¸€ä¸ªæ¨¡æ¿ä¹Ÿæœ‰è‡ªå·±ç‰¹æœ‰çš„æ“ä½œï¼š</p>
<p>shared_ptrå’Œunique_ptrå‡æ”¯æŒçš„æ“ä½œ</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">p</th>
<th style="text-align:center">å¯ç”¨ä½œä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œè‹¥pæŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡åˆ™è¿”å›true</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*p</td>
<td style="text-align:center">~</td>
</tr>
<tr>
<td style="text-align:center">p.get()</td>
<td style="text-align:center">è¿”å›pä¸­ä¿å­˜çš„æŒ‡é’ˆ</td>
</tr>
<tr>
<td style="text-align:center">swap(p1,p2)/p1.swap(q)</td>
<td style="text-align:center">äº¤æ¢på’Œqä¸­çš„æŒ‡é’ˆ</td>
</tr>
</tbody>
</table>
</div>
<h3 id="make-sharedå‡½æ•°"><a href="#make-sharedå‡½æ•°" class="headerlink" title="make_sharedå‡½æ•°"></a>make_sharedå‡½æ•°</h3><p>make_sharedå‡½æ•°è¢«å®šä¹‰åœ¨æ ‡å‡†åº“ä¸­ï¼Œè¯¥å‡½æ•°å¯ä»¥åœ¨åŠ¨æ€å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªå¯¹è±¡å¹¶åˆå§‹åŒ–ï¼Œå¹¶è¿”å›æŒ‡å‘è¯¥å¯¹è±¡çš„shared_ptrã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">shared_ptr&lt;string&gt; sp=<span class="built_in">make_shared</span>&lt;string&gt;(<span class="string">&quot;dhk&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹åº”æŒ‡å‘ç±»å‹çš„shared_prtï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨autoæ¥ä¿å­˜å‡½æ•°make_sharedçš„ç»“æœï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> sp=<span class="built_in">make_shared</span>&lt;string&gt;(<span class="string">&quot;dhk&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œmake_sharedå‡½æ•°æ”¯æŒå‚æ•°ç”¨ä½œæ„é€ ï¼Œå…¶ç”¨æ³•äºé¡ºåºå®¹å™¨çš„æˆå‘˜emplaceç›¸ä¼¼ï¼Œå‚æ•°é¡ºåºç­‰éœ€ä¸¥æ ¼éµå®ˆæ„é€ å‡½æ•°å†…å®¹ï¼Œè¯¦è§<a href="https://dhkkk.gitee.io/2023/01/12/C++-8/">C++-é¡ºåºå®¹å™¨ | å°è‘£çš„BLOG (gitee.io)</a></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> sp=<span class="built_in">make_shared</span>&lt;string&gt;(<span class="number">10</span>,<span class="string">&#x27;d&#x27;</span>);<span class="comment">//ä½¿ç”¨æ„é€ </span></span><br></pre></td></tr></table></figure>
<h3 id="shared-ptrçš„æ‹·è´å’Œèµ‹å€¼"><a href="#shared-ptrçš„æ‹·è´å’Œèµ‹å€¼" class="headerlink" title="shared_ptrçš„æ‹·è´å’Œèµ‹å€¼"></a>shared_ptrçš„æ‹·è´å’Œèµ‹å€¼</h3><p>å½“åœ¨è¿›è¡Œæ‹·è´å’Œèµ‹å€¼æ—¶ï¼Œæ¯ä¸ªshared_ptréƒ½ä¼šå®æ—¶åœ°è®°å½•å½“å‰æœ‰å¤šå°‘ä¸ªshared_ptræŒ‡å‘ç›¸åŒçš„å¯¹è±¡ï¼Œç§°ä¹‹ä¸º<strong>å¼•ç”¨è®¡æ•°</strong>ï¼Œä¸€ä½†ä¸€ä¸ªshared_ptrçš„è®¡æ•°å™¨å˜ä¸º0ï¼Œåˆ™ä¼šè‡ªåŠ¨é‡Šæ”¾è‡ªå·±æ‰€ç®¡ç†çš„å¯¹è±¡ã€‚</p>
<p><strong>å½“æŒ‡å‘ä¸€ä¸ªå¯¹è±¡çš„æœ€åä¸€ä¸ªshared_ptrè¢«é”€æ¯æ—¶ï¼Œshared_ptrç±»ä¼šè‡ªåŠ¨é”€æ¯è¿™ä¸ªå¯¹è±¡ã€‚</strong>è¯¥æ“ä½œé€šè¿‡ç±»çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°â€”â€”ææ„å‡½æ•°å®Œæˆã€‚</p>
<p>å¦‚æœè¯¥shared_ptræ˜¯ä½œä¸ºå±€éƒ¨å˜é‡å¯¼è‡´è¢«è‡ªåŠ¨é”€æ¯ï¼Œææ„å‡½æ•°åŒæ ·ä¼šå¯¹å¼•ç”¨è®¡æ•°è¿›è¡Œé€’å‡æ“ä½œ</p>
<h2 id="2ã€ç›´æ¥ç®¡ç†å†…å­˜"><a href="#2ã€ç›´æ¥ç®¡ç†å†…å­˜" class="headerlink" title="2ã€ç›´æ¥ç®¡ç†å†…å­˜"></a>2ã€ç›´æ¥ç®¡ç†å†…å­˜</h2><p>C++å®šä¹‰äº†ä¸¤ä¸ªè¿ç®—ç¬¦æ¥ç›´æ¥åˆ†é…å’Œé‡Šæ”¾å†…å­˜ï¼šnewç”¨äºåˆ†é…å†…å­˜ï¼Œdeleteç”¨äºé‡Šæ”¾å†…å­˜</p>
<h3 id="ä½¿ç”¨newåˆ†é…åŠ¨æ€å†…å­˜"><a href="#ä½¿ç”¨newåˆ†é…åŠ¨æ€å†…å­˜" class="headerlink" title="ä½¿ç”¨newåˆ†é…åŠ¨æ€å†…å­˜"></a>ä½¿ç”¨newåˆ†é…åŠ¨æ€å†…å­˜</h3><p>åœ¨å †ä¸­çš„åˆ†é…çš„å†…å­˜æ˜¯æ— åçš„ï¼Œå› æ­¤æ— è®ºæ˜¯make_sharedè¿˜æ˜¯newéƒ½æ— æ³•ä¸ºåˆ†é…ç©ºé—´çš„å¯¹è±¡å‘½åï¼Œå–è€Œä»£ä¹‹çš„æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆã€‚</p>
<p>å‡ ç§åˆå§‹åŒ–æ–¹å¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *p= <span class="keyword">new</span> <span class="type">int</span>;</span><br><span class="line"><span class="keyword">auto</span> p= <span class="keyword">new</span> <span class="type">int</span>;<span class="comment">//ä¸å®šä¹‰å€¼</span></span><br><span class="line"><span class="type">int</span> *p= <span class="keyword">new</span> <span class="built_in">int</span>();<span class="comment">//è¿›è¡Œå€¼é»˜è®¤åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span> *p= <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">auto</span> p= <span class="keyword">new</span> vector&lt;<span class="type">int</span>&gt;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨newåˆ†é…constå¯¹è±¡ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> p = <span class="keyword">new</span> <span class="type">const</span> <span class="built_in">int</span>(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œnewå’Œdelete<strong>éƒ½æ˜¯è¿ç®—ç¬¦ï¼Œè€Œä¸æ˜¯å…³é”®å­—ï¼</strong>å› æ­¤<code>const new int()</code>æ˜¯ä¸åˆæ³•çš„</p>
<p>å¦‚æœå †å†…å­˜è€—å°½ï¼Œæ— æ³•å†åˆ†é…æ–°çš„å†…å­˜ï¼Œåˆ™newè¡¨è¾¾å¼ä¼šå¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ªbad_allocï¼Œå¦‚æœä¸æƒ³å…¶æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨<strong>å®šä½new</strong>çš„æ–¹å¼é˜»æ­¢å…¶æŠ›å‡ºå¼‚å¸¸ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> p = <span class="built_in">new</span>(nothrow) <span class="type">int</span>;<span class="comment">//æ­¤æ—¶å¦‚æœåˆ†é…å¤±è´¥ï¼Œåˆ™åªä¼šè¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨å®šä½newéœ€è¦åŒ…å«å¤´æ–‡ä»¶new</strong></p>
<h3 id="ä½¿ç”¨deleteé‡Šæ”¾å†…å­˜"><a href="#ä½¿ç”¨deleteé‡Šæ”¾å†…å­˜" class="headerlink" title="ä½¿ç”¨deleteé‡Šæ”¾å†…å­˜"></a>ä½¿ç”¨deleteé‡Šæ”¾å†…å­˜</h3><p>é€šè¿‡deleteè¡¨è¾¾å¼å¯ä»¥å°†æŒ‡å®šçš„åŠ¨æ€å†…å­˜é‡Šæ”¾ï¼Œä½¿ç”¨æ—¶éœ€æ³¨æ„ï¼š</p>
<ul>
<li>deleteçš„å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</li>
<li><strong>è¯¥æŒ‡é’ˆåªèƒ½æŒ‡å‘ä¸€å—åŠ¨æ€å†…å­˜æˆ–ä¸ºç©º</strong>ï¼Œä¸èƒ½æŒ‡å‘é™æ€å†…å­˜æˆ–æ ˆå†…å­˜</li>
<li>åŠ¨æ€å†…å­˜ä¸­çš„constå¯¹è±¡å¯ä»¥è¢«æ­£å¸¸é‡Šæ”¾</li>
<li>ä¸èƒ½å¤šæ¬¡é‡Šæ”¾åŒä¸€å—å†…å­˜</li>
</ul>
<h3 id="å†…ç½®æŒ‡é’ˆçš„ç¼ºé™·"><a href="#å†…ç½®æŒ‡é’ˆçš„ç¼ºé™·" class="headerlink" title="å†…ç½®æŒ‡é’ˆçš„ç¼ºé™·"></a>å†…ç½®æŒ‡é’ˆçš„ç¼ºé™·</h3><p>ä¸Šä¸€èŠ‚ä¸­è®²åˆ°ï¼Œå¯¹äºshared_ptrç®¡ç†çš„å†…å­˜ï¼Œæ˜¯ä¼šæ ¹æ®å¼•ç”¨è®¡æ•°è‡ªåŠ¨é‡Šæ”¾å†…å­˜çš„ã€‚è€Œé€šè¿‡å¸¸è§„æŒ‡é’ˆä¿å­˜åŠ¨æ€å†…å­˜çš„æ–¹å¼æ— æ³•åƒæ™ºèƒ½æŒ‡é’ˆä¸€æ ·è‡ªåŠ¨é‡Šæ”¾ï¼Œ<strong>ä¹Ÿå°±æ˜¯é€šè¿‡newè¡¨è¾¾å¼åˆ›å»ºçš„åŠ¨æ€å†…å­˜ç©ºé—´å¿…é¡»æ˜¾å¼åœ°æ‰‹åŠ¨é‡Šæ”¾</strong></p>
<p>å› æ­¤ï¼Œä½¿ç”¨è€…å¿…é¡»è®°å¾—åœ¨ä¸ä½¿ç”¨æ—¶åˆ é™¤è¿™å—å†…å­˜ï¼Œå¦‚æœæŒ‡å‘è¯¥å†…å­˜çš„å¸¸è§„æŒ‡é’ˆæŒ‡å‘æ”¹å˜ï¼Œè¿™å—å†…å­˜å°±æ— æ³•è¢«é‡Šæ”¾äº†ï¼ˆå› ä¸ºå·²ç»æ‰¾ä¸åˆ°äº†ï¼‰ï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•æ˜¯å°†è¯¥æŒ‡é’ˆå®šä¹‰ä¸ºå¸¸é‡æŒ‡é’ˆï¼Œè™½ç„¶è¿™æ ·ä¹Ÿä»…ä»…èƒ½é¿å…åœ°å€ä¸¢å¤±çš„å‘ç”Ÿ</p>
<h3 id="æ··åˆä½¿ç”¨shared-ptrå’Œnew"><a href="#æ··åˆä½¿ç”¨shared-ptrå’Œnew" class="headerlink" title="æ··åˆä½¿ç”¨shared_ptrå’Œnew"></a>æ··åˆä½¿ç”¨shared_ptrå’Œnew</h3><p>å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæŒ‡å‘åŠ¨æ€å†…å­˜çš„å†…ç½®æŒ‡é’ˆæ¥åˆå§‹åŒ–ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">100</span>))</span></span>;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ—¶éœ€æ³¨æ„ï¼š</p>
<ul>
<li><p>ç”¨äºåˆå§‹åŒ–æ™ºèƒ½æŒ‡é’ˆçš„å‚æ•°<strong>å¿…é¡»æ˜¯ä¸€ä¸ªæŒ‡å‘åŠ¨æ€å†…å­˜çš„æŒ‡é’ˆ</strong></p>
</li>
<li><p><strong>å¿…é¡»ç”¨ç›´æ¥åˆå§‹åŒ–çš„æ–¹å¼åˆå§‹åŒ–æ™ºèƒ½æŒ‡é’ˆï¼Œè€Œä¸æ˜¯èµ‹å€¼åˆå§‹åŒ–ï¼Œå› ä¸ºæ¥å—æŒ‡é’ˆä¸ºå‚æ•°çš„æ„é€ å‡½æ•°æ˜¯explicitçš„</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">shared_ptr&lt;<span class="type">int</span>&gt; p1= <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">100</span>);<span class="comment">//é”™è¯¯ï¼å¿…é¡»ç›´æ¥åˆå§‹åŒ–</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å†…ç½®æŒ‡é’ˆä¸èƒ½å®ç°éšå¼è½¬åŒ–ä¸ºæ™ºèƒ½æŒ‡é’ˆï¼Œè¿™ä¹Ÿæ˜¯ä¸èƒ½é€šè¿‡èµ‹å€¼åˆå§‹åŒ–çš„åŸå› ğŸ‘†</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">test</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">new</span> <span class="built_in">int</span>(a));<span class="comment">//é”™è¯¯ï¼Œä¸èƒ½éšå¼è½¬åŒ–</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">shared_ptr</span>&lt;<span class="type">int</span>&gt; (<span class="keyword">new</span> <span class="built_in">int</span>(a));<span class="comment">//æ­£ç¡®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡è¿™ä¸ªæ–¹æ³•æ„é€ çš„shared_ptré»˜è®¤ä½¿ç”¨deleteæ¥é‡Šæ”¾å†…å­˜ï¼Œè€Œä¸æ˜¯ä¹‹å‰è®²åˆ°çš„ææ„å‡½æ•°ã€‚å› æ­¤å¦‚æœè¦å°†è¯¥shared_ptræŒ‡å‘å…¶ä»–çš„åŠ¨æ€å†…å­˜ï¼Œä½†æ˜¯è¿™æ ·åšå°±å¿…é¡»æä¾›è‡ªå·±çš„æ“ä½œæ¥ä»£æ›¿deleteï¼Œè¿™ä¸ªæ“ä½œåé¢ä¼šè®²åˆ°ã€‚</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C++-é¡ºåºå®¹å™¨</title>
    <url>/2023/01/12/C++-8/</url>
    <content><![CDATA[<h1 id="é¡ºåºå®¹å™¨æ¦‚è¿°"><a href="#é¡ºåºå®¹å™¨æ¦‚è¿°" class="headerlink" title="é¡ºåºå®¹å™¨æ¦‚è¿°"></a>é¡ºåºå®¹å™¨æ¦‚è¿°</h1><p>å®¹å™¨ï¼šä¸€äº›ç‰¹å®šç±»å‹å¯¹è±¡çš„é›†åˆã€‚é¡ºåºå®¹å™¨æä¾›äº†æ§åˆ¶å…ƒç´ å­˜å‚¨å’Œè®¿é—®é¡ºåºçš„èƒ½åŠ›ï¼Œä¸”è¯¥é¡ºåºä¸å…ƒç´ çš„å†…å®¹æ— å…³ï¼Œè€Œä¸å…ƒç´ åŠ å…¥å®¹å™¨æ—¶çš„ä½ç½®ç›¸å…³</p>
<h2 id="æ ‡å‡†åº“ä¸­çš„é¡ºåºå®¹å™¨"><a href="#æ ‡å‡†åº“ä¸­çš„é¡ºåºå®¹å™¨" class="headerlink" title="æ ‡å‡†åº“ä¸­çš„é¡ºåºå®¹å™¨"></a>æ ‡å‡†åº“ä¸­çš„é¡ºåºå®¹å™¨</h2><p>C++ä¸­æä¾›äº†å¤šç§å¤šç§é¡ºåºå®¹å™¨ï¼Œè¿™äº›å®¹å™¨æ ¹æ®ä¸‹ä¸¤æ–¹é¢æ€§èƒ½çš„é€‰æ‹©éƒ½æœ‰ä¸åŒçš„æŠ˜ä¸­ï¼š</p>
<ul>
<li>å‘å®¹å™¨ä¸­ä¸åŒä½ç½®æ·»åŠ ã€åˆ é™¤å…ƒç´ çš„ä»£ä»·</li>
<li>éé¡ºåºè®¿é—®å®¹å™¨ä¸­çš„å…ƒç´ çš„ä»£ä»·</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>vector</th>
<th>å¯å˜å¤§å°æ•°ç»„ï¼›æ”¯æŒå¿«é€Ÿä»»æ„å…ƒç´ éšæœºè®¿é—®ï¼›åœ¨å°¾éƒ¨ä¹‹å¤–æ’å…¥å…ƒç´ ä»£ä»·è¾ƒå¤§</th>
</tr>
</thead>
<tbody>
<tr>
<td>deque</td>
<td>åŒç«¯é˜Ÿåˆ—ï¼›æ”¯æŒå¿«é€Ÿä»»æ„å…ƒç´ éšæœºè®¿é—®ï¼›<strong>åœ¨å¤´ã€å°¾éƒ¨ä¹‹å¤–</strong>æ’å…¥å…ƒç´ ä»£ä»·è¾ƒå¤§</td>
</tr>
<tr>
<td>list</td>
<td>åŒå‘é“¾è¡¨ï¼›åªæ”¯æŒåŒå‘<strong>é¡ºåºè®¿é—®</strong>ï¼Œä¸æ”¯æŒéšæœºè®¿é—®ï¼›ä»»ä½•ä½ç½®æ’å…¥å…ƒç´ é€Ÿåº¦éƒ½å¿«</td>
</tr>
<tr>
<td>forward_list</td>
<td>å•å‘é“¾è¡¨ï¼Œåªæ”¯æŒå•å‘é¡ºåºè®¿é—®ï¼Œå…¶ä½™åŒåŒå‘é“¾è¡¨</td>
</tr>
<tr>
<td>array</td>
<td>å›ºå®šå¤§å°æ•°ç»„ï¼›æ”¯æŒå¿«é€Ÿä»»æ„å…ƒç´ éšæœºè®¿é—®ï¼›ä¸èƒ½æ·»åŠ ã€åˆ é™¤å…ƒç´ </td>
</tr>
<tr>
<td>string</td>
<td>å­—ç¬¦ä¸²ï¼Œä¸vectorç›¸ä¼¼ï¼Œä¸“é—¨ç”¨äºä¿å­˜å­—ç¬¦ï¼›åœ¨å°¾éƒ¨ä¹‹å¤–æ’å…¥å…ƒç´ ä»£ä»·è¾ƒå¤§</td>
</tr>
</tbody>
</table>
</div>
<p>arrayæ˜¯C++æ–°æ ‡å‡†æ·»åŠ çš„ç±»å‹ï¼Œæ¯”å†…ç½®çš„æ•°ç»„æ›´åŠ å®‰å…¨ã€æ›´å®¹æ˜“ä½¿ç”¨</p>
<h2 id="é€‰æ‹©é¡ºåºå®¹å™¨çš„åŸåˆ™"><a href="#é€‰æ‹©é¡ºåºå®¹å™¨çš„åŸåˆ™" class="headerlink" title="é€‰æ‹©é¡ºåºå®¹å™¨çš„åŸåˆ™"></a>é€‰æ‹©é¡ºåºå®¹å™¨çš„åŸåˆ™</h2><ul>
<li><p>é€šå¸¸ï¼Œä½¿ç”¨vectoræ˜¯æœ€å¥½çš„é€‰æ‹©</p>
</li>
<li><p>å¦‚æœéœ€å­˜æ”¾çš„å…ƒç´ å¾ˆå¤šã€å…ƒç´ å¾ˆå°ï¼Œå¹¶ä¸”ç©ºé—´çš„å¼€é”€å¾ˆé‡è¦ï¼Œåˆ™<strong>ä¸è¦é€‰æ‹©</strong>listæˆ–forward_list</p>
</li>
<li><p>å…¶ä½™åŸåˆ™æ ¹æ®ï¼š</p>
<ul>
<li>ç¨‹åºæ˜¯å¦è¦éšæœºè®¿é—®å…ƒç´ </li>
<li>ç¨‹åºæ˜¯å¦è¦åœ¨ä¸­é—´ã€å¤´éƒ¨ã€å°¾éƒ¨æ’å…¥å…ƒç´ </li>
</ul>
<p>è¿›è¡Œé€‰æ‹©</p>
</li>
<li><p>å¦‚æœç¨‹åºåªåœ¨è¯»å–è¾“å…¥æ—¶æ‰éœ€è¦åœ¨ä¸­é—´ä½ç½®æ’å…¥å…ƒç´ ï¼Œéšååªéœ€è¦éšæœºè®¿é—®å…ƒç´ ï¼š</p>
<p>å¯ä»¥åœ¨è¾“å…¥é˜¶æ®µä½¿ç”¨listï¼Œè¾“å…¥å®Œæˆåå°†å…ƒç´ æ‹·è´è‡³ä¸€ä¸ªvector</p>
</li>
</ul>
<p>å¦‚æœç›®å‰ä¸ç¡®å®šä½¿ç”¨å“ªç§å®¹å™¨ï¼Œå¯ä»¥å…ˆé€‰å®šä¸€ä¸ªå®¹å™¨ç±»å‹ï¼Œåœ¨ç¨‹åºä¸­åªä½¿ç”¨vectorå’Œlistçš„å…¬å…±æ“ä½œï¼šä½¿ç”¨è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸‹æ ‡ã€‚è¿™æ ·åç»­æ”¹å˜å®¹å™¨ç±»å‹ä¼šå¾ˆæ–¹ä¾¿</p>
<h1 id="å®¹å™¨é€šç”¨æ“ä½œ"><a href="#å®¹å™¨é€šç”¨æ“ä½œ" class="headerlink" title="å®¹å™¨é€šç”¨æ“ä½œ"></a>å®¹å™¨é€šç”¨æ“ä½œ</h1><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªå®¹å™¨éƒ½å®šä¹‰åœ¨å¯¹åº”çš„å¤´æ–‡ä»¶ä¸­ï¼Œä¸”æ–‡ä»¶åä¸ç±»å‹åç›¸åŒ</p>
<h2 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h2><p>æ¯ä¸ªå®¹å™¨éƒ½å®šä¹‰äº†å¤šä¸ªç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›ç±»å‹çš„ç±»å‹åˆ«åæ¥å®šä¹‰ä¸€ä¸ªå˜é‡ä»¥ä¾›ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; a&#123;<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">auto</span> i=a.<span class="built_in">begin</span>();</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨autoæ¥åˆ›å»ºä¸€ä¸ªå®¹å™¨å†…çš„ç±»å‹å¯¹è±¡ï¼Œå› ä¸ºé€šå¸¸è¿™æ ·æ›´æ–¹ä¾¿ï¼Œä½†æ˜¯åŒæ—¶å¯ä»¥é€šè¿‡ç±»å‹åˆ«åå…·ä½“åœ°å®šä¹‰è¿™äº›å˜é‡çš„ç±»å‹ï¼Œä¾‹å¦‚è¿™é‡Œçš„iç±»å‹å®é™…ä¸Šæ˜¯:<code>vector&lt;int&gt;::iterator</code>è¿™é‡Œçš„iteratorå°±æ˜¯ä¸€ä¸ªç±»å‹åˆ«åï¼Œæ‰€ä»¥è¿™é‡Œè¿˜å¯ä»¥ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; a&#123;<span class="number">1</span>&#125;;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator i=a.<span class="built_in">begin</span>();</span><br></pre></td></tr></table></figure>
<p>åƒè¿™æ ·çš„ç±»å‹åˆ«åè¿˜æœ‰ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">iterator</th>
<th style="text-align:center">æ­¤å®¹å™¨çš„è¿­ä»£å™¨ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">const_iterator</td>
<td style="text-align:center">åªè¯»è¿­ä»£å™¨ç±»å‹</td>
</tr>
<tr>
<td style="text-align:center">size_type</td>
<td style="text-align:center">æ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œç”¨äºä¿å­˜å®¹å™¨é•¿åº¦ï¼Œå¯ç”¨äºç´¢å¼•</td>
</tr>
<tr>
<td style="text-align:center">difference_type</td>
<td style="text-align:center">å¸¦ç¬¦å·æ•´æ•°ç±»å‹ï¼Œç”¨äºä¿å­˜ä¸¤è¿­ä»£å™¨ä¹‹é—´çš„è·ç¦»</td>
</tr>
<tr>
<td style="text-align:center">value_type</td>
<td style="text-align:center">å®¹å™¨çš„å…ƒç´ ç±»å‹</td>
</tr>
<tr>
<td style="text-align:center">reference</td>
<td style="text-align:center">å…ƒç´ çš„å·¦å€¼ç±»å‹</td>
</tr>
<tr>
<td style="text-align:center">const_reference</td>
<td style="text-align:center">åªè¯»å·¦å€¼ç±»å‹</td>
</tr>
</tbody>
</table>
</div>
<h2 id="å®¹å™¨å®šä¹‰å’Œåˆå§‹åŒ–"><a href="#å®¹å™¨å®šä¹‰å’Œåˆå§‹åŒ–" class="headerlink" title="å®¹å™¨å®šä¹‰å’Œåˆå§‹åŒ–"></a>å®¹å™¨å®šä¹‰å’Œåˆå§‹åŒ–</h2><p>ä¸ºæ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å…ˆåƒè¿™æ ·å®šä¹‰<strong>å®¹å™¨å…ƒç´ </strong>çš„ç±»å‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;   </span><br><span class="line">    <span class="built_in">person</span>() =<span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">person</span>(string s) &#123;name=s;&#125;</span><br><span class="line">    <span class="built_in">person</span>(string s1, string s2)  &#123;name=s1;addr=s2;&#125;</span><br><span class="line">   </span><br><span class="line">    string name;</span><br><span class="line">    string addr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¯¥ç±»æœ‰ä¸‰ä¸ªé»˜è®¤æ„é€ å‡½æ•°ï¼Œæ¥ä¸‹æ¥å¯¹å®¹å™¨çš„å®šä¹‰å’Œåˆå§‹åŒ–çš„å…ƒç´ å‡æ˜¯è¯¥ç±»å‹å¯¹è±¡ã€‚</p>
<p>å®¹å™¨çš„å®šä¹‰ä¸åˆå§‹åŒ–æœ‰ä»¥ä¸‹æ–¹å¼ï¼ˆå‡å·²vectorä¸ºä¾‹ï¼‰ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;person&gt; men;</span><br><span class="line"><span class="function">vector&lt;person&gt; <span class="title">men1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;person&gt; <span class="title">men2</span><span class="params">(men1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">a</span><span class="params">(<span class="string">&quot;dhk&quot;</span>)</span>,<span class="title">b</span><span class="params">(<span class="string">&quot;aca&quot;</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;person&gt; <span class="title">men3</span><span class="params">(<span class="number">10</span>,a)</span></span>;</span><br><span class="line"><span class="function">vector&lt;person&gt; <span class="title">men3</span><span class="params">(<span class="number">10</span>,a)</span></span>;</span><br><span class="line"><span class="function">vector&lt;person&gt; <span class="title">men4</span><span class="params">(<span class="number">10</span>,&#123;a,b&#125;)</span></span>;</span><br><span class="line"></span><br><span class="line">vector&lt;person&gt; men5&#123;a,b,a,b&#125;;</span><br><span class="line">vector&lt;person&gt; men6&#123;&#123;a,b&#125;,&#123;b,a&#125;&#125;;</span><br><span class="line"></span><br><span class="line">vector&lt;person&gt;::iterator i=men1.<span class="built_in">begin</span>(), e=men1.<span class="built_in">end</span>();</span><br><span class="line"><span class="function">vector&lt;person&gt; <span class="title">men7</span><span class="params">(i,e)</span></span>;</span><br></pre></td></tr></table></figure>
<p><em>å†™åœ¨å‰é¢ï¼šæœ‰å…³å…ƒç´ ç±»å¯¹è±¡çš„æ„é€ å‡½æ•°ç”Ÿæˆå…ƒç´ çš„æ–¹æ³•åé¢è¿˜ä¼šè®²åˆ°æ›´å¥½ç”¨çš„åŠæ³•ï¼Œå› æ­¤ä¸å»ºè®®åœ¨åˆå§‹åŒ–å®¹å™¨æ—¶å°±æ·»åŠ å…ƒç´ </em></p>
<ul>
<li><p>menä¸ºç»è¿‡<strong>é»˜è®¤å®¹å™¨æ„é€ å‡½æ•°</strong>å®šä¹‰çš„å®¹å™¨å¯¹è±¡ï¼Œæ¯ä¸ªå®¹å™¨ç±»å‹éƒ½å®šä¹‰äº†ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œé™¤äº†arrayå®¹å™¨ä¹‹å¤–ï¼Œå…¶ä»–å®¹å™¨çš„é»˜è®¤æ„é€ å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>æŒ‡å®šç±»å‹çš„ç©ºå®¹å™¨</strong>ã€‚è€Œå¯¹äºarrayæ¥è¯´ï¼Œç”¨Cä¸­æ•°ç»„æ€ç»´ç†è§£ï¼Œç”±äºåœ¨åˆ›å»ºæ—¶é•¿åº¦å·²ç»ç»™å®šï¼Œå› æ­¤arrayä¸­<strong>æ¯ä¸ªå…ƒç´ éƒ½ä¼šè¢«åˆå§‹åŒ–</strong>ã€‚</p>
</li>
<li><p>men1ä¸ºåˆ›å»ºä¸€ä¸ªå«æœ‰10ä¸ªpersonç±»å…ƒç´ çš„vectorå®¹å™¨ï¼Œè¿™äº›å…ƒç´ éƒ½å·²ç»ç»è¿‡åˆå§‹åŒ–ï¼Œå¹¶ä¸”å…¨éƒ¨ç›¸åŒã€‚</p>
</li>
<li><p>men2ä¸ºåˆ›å»ºä¸€ä¸ªvectorå®¹å™¨ï¼Œå…¶å«æœ‰çš„å…ƒç´ æœªmen1çš„æ‹·è´ï¼Œè¿™å°±è¦æ±‚men1å’Œmen2å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œä¸”å…ƒç´ ä¹Ÿä¸ºç›¸åŒçš„ç±»å‹ã€‚å¯¹äºarrayå®¹å™¨è€Œè¨€ï¼Œé•¿åº¦è¿˜å¿…é¡»ç›¸ç­‰ã€‚</p>
</li>
<li><p>men3ä¸ºåˆ›å»ºä¸€ä¸ªå«æœ‰10ä¸ªpersonç±»å…ƒç´ çš„vectorå®¹å™¨ï¼Œè€Œè¿™äº›å…ƒç´ <strong>é€šè¿‡personçš„ç¬¬äºŒä¸ªæ„é€ å‡½æ•°è¿›è¡Œäº†åˆå§‹åŒ–</strong>ï¼Œè€Œä¸æ˜¯åƒmen1ä¸€æ ·è¿›è¡Œé»˜è®¤åˆå§‹åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ç°åœ¨men3å†…æœ‰10ä¸ªnameä¸ºâ€dhkâ€ï¼Œaddrä¸ºé»˜è®¤åˆå§‹åŒ–å€¼çš„ç›¸åŒå…ƒç´ ã€‚</strong></p>
</li>
<li><p>men4ä¸ºåˆ›å»ºä¸€ä¸ªå«æœ‰10ä¸ªpersonç±»å…ƒç´ çš„vectorå®¹å™¨ï¼Œè€Œè¿™äº›å…ƒç´ ç»è¿‡personçš„ç¬¬ä¸‰ä¸ªæ„é€ å‡½æ•°è¿›è¡Œäº†åˆå§‹åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ç°åœ¨men3å†…æœ‰10ä¸ªnameä¸ºâ€dhkâ€ï¼Œaddrä¸ºâ€acaâ€çš„ç›¸åŒå…ƒç´ ã€‚</strong></p>
<p>åˆ°æ­¤å¯ä»¥çœ‹å‡ºï¼Œå½“ä½¿ç”¨å°æ‹¬å·è¿›è¡Œå®¹å™¨åˆå§‹åŒ–æ—¶ï¼Œä¸”å½“ç¬¬ä¸€ä¸ªå€¼ä¸ºä¸€ä¸ªæ•´æ•°næ—¶ï¼Œä»£è¡¨åˆå§‹åŒ–nä¸ªç›¸åŒçš„å…ƒç´ ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°<strong>å¯ä»¥ä¸ºå…ƒç´ çš„æ„é€ å‡½æ•°å‚æ•°</strong>ï¼Œä½†è¿™ä¸ªå‚æ•°<strong>æœ‰ä¸”åªèƒ½æœ‰1ä¸ªï¼ï¼ï¼</strong>ï¼Œå› ä¸ºè¿™nä¸ªå…ƒç´ æ˜¯ç›¸åŒçš„ï¼Œä¸èƒ½åœ¨è¿™é‡Œå¯¹å…¶ä¸­ä¸¤ä¸ªå…ƒç´ ä½¿ç”¨ä¸åŒçš„æ„é€ å‡½æ•°å‚æ•°ï¼Œ<strong>å› æ­¤ï¼Œ<code>vector&lt;person&gt; men3(10,a,b);</code>æ˜¯é”™è¯¯çš„å†™æ³•ï¼</strong></p>
<p>è€Œå¦‚æœå½“å…ƒç´ çš„æ„é€ å‡½æ•°å‚æ•°æœ‰å¤šä¸ªæ—¶ï¼Œåªéœ€è¦åƒmen4ä¸€æ ·å°†è¿™äº›å‚æ•°é€šè¿‡å¤§æ‹¬å·æ‹¬èµ·æ¥å³å¯ã€‚</p>
</li>
<li><p>men5ä¸ºåˆ›å»ºä¸€ä¸ªå«æœ‰<strong>4ä¸ª</strong>personç±»å…ƒç´ çš„vectorå®¹å™¨ï¼Œè¿™äº›å…ƒç´ é€šè¿‡personçš„ç¬¬äºŒä¸ªæ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ†åˆ«æ˜¯nameä¸ºâ€dhkâ€,â€acaâ€,â€dhkâ€,â€acaâ€ï¼›addrä¸ºé»˜è®¤åˆå§‹åŒ–å€¼çš„personå¯¹è±¡ã€‚</p>
</li>
<li><p>men6ä¸ºåˆ›å»ºä¸€ä¸ªå«æœ‰<strong>2ä¸ª</strong>personç±»å…ƒç´ çš„vectorå®¹å™¨ï¼Œè€Œè¿™äº›å…ƒç´ ç»è¿‡personçš„ç¬¬ä¸‰ä¸ªæ„é€ å‡½æ•°è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œåˆ†åˆ«æ˜¯<u>nameä¸ºâ€dhkâ€ï¼Œaddrä¸ºâ€acaâ€</u>å’Œ<u>nameä¸ºâ€dhkâ€ï¼Œaddrä¸ºâ€acaâ€</u>çš„<strong>ä¸¤ä¸ªå…ƒç´ </strong></p>
</li>
<li><p>men7ä¸ºè¿­ä»£å™¨iå’ŒeæŒ‡å®šèŒƒå›´å†…ä¸­å…ƒç´ çš„æ‹·è´ï¼Œè¿™äº›å…ƒç´ ç±»å‹ä¹Ÿéœ€å’Œmen7ä¸­çš„å…ƒç´ ç±»å‹ç›¸åŒ</p>
</li>
</ul>
<h3 id="arrayç±»å‹çš„åˆå§‹åŒ–"><a href="#arrayç±»å‹çš„åˆå§‹åŒ–" class="headerlink" title="arrayç±»å‹çš„åˆå§‹åŒ–"></a>arrayç±»å‹çš„åˆå§‹åŒ–</h3><p>arrayç±»å‹ç”±äºéœ€æŒ‡å®šå¤§å°ï¼Œåˆå§‹åŒ–æ–¹å¼ç¨å¾®æœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">array&lt;person,10&gt; men=&#123;a,b,a&#125;;</span><br></pre></td></tr></table></figure>
<p>å¹¶ä¸”åˆå§‹åŒ–æ—¶ä¸èƒ½åƒmen6ä¸€æ ·ä½¿ç”¨å¤§æ‹¬å·å®ç°å¤šä¸ªæ„é€ å‡½æ•°å‚æ•°åˆå§‹åŒ–</p>
<h3 id="stringå®¹å™¨åˆå§‹åŒ–"><a href="#stringå®¹å™¨åˆå§‹åŒ–" class="headerlink" title="stringå®¹å™¨åˆå§‹åŒ–"></a>stringå®¹å™¨åˆå§‹åŒ–</h3><p><a href="https://dhkkk.gitee.io/2022/09/15/C++-3/">C++å­—ç¬¦ä¸²ã€å‘é‡å’Œæ•°ç»„ | å°è‘£çš„BLOG (gitee.io)</a></p>
<h2 id="èµ‹å€¼æ“ä½œ"><a href="#èµ‹å€¼æ“ä½œ" class="headerlink" title="èµ‹å€¼æ“ä½œ"></a>èµ‹å€¼æ“ä½œ</h2><p>é™¤äº†ä¸€èˆ¬åˆå§‹åŒ–åˆ—è¡¨æ‹·è´ï¼ˆä¸æ”¯æŒarrayï¼‰ï¼Œæ’å…¥å‡½æ•°ä¹‹å¤–ï¼Œè¿™é‡Œå°†ä»‹ç»assignå‡½æ•°å’Œswapå‡½æ•°</p>
<h3 id="assign"><a href="#assign" class="headerlink" title="assign"></a>assign</h3><p>é¡ºåºå®¹å™¨ä¸­å®šä¹‰äº†assignæˆå‘˜ï¼Œè¯¥å‡½æ•°å…è®¸ä»ä¸€ä¸ªä¸åŒä½†å¯ä»¥å…¼å®¹çš„ç±»å‹å…ƒç´ èµ‹å€¼ï¼ˆä¸æ”¯æŒarrayï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">list&lt;string&gt; names;</span><br><span class="line">vector&lt;<span class="type">const</span> <span class="type">char</span>*&gt; oldstyle;</span><br><span class="line">names=oldstyle;<span class="comment">//é”™è¯¯çš„ï¼Œä¸å¯ä»¥ç›´æ¥å°†ç±»å‹ä¸åŒçš„å®¹å™¨èµ‹å€¼</span></span><br><span class="line">names=<span class="built_in">assign</span>( oldstyle.<span class="built_in">begin</span>(),oldstyle.<span class="built_in">end</span>() );</span><br></pre></td></tr></table></figure>
<p>assignä¼šç›´æ¥æ›¿æ¢æ‰æ—§çš„å…ƒç´ ï¼Œ<strong>å¹¶ä¸”assignä¸­ä½¿ç”¨çš„è¿­ä»£å™¨ä¸èƒ½æŒ‡å‘è°ƒç”¨assignçš„å®¹å™¨</strong></p>
<p>assignä¹Ÿæ”¯æŒè¾“å…¥ä¸€ä¸ªæ•´æ•°å’Œä¸€ä¸ªå…ƒç´ å€¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">list&lt;string&gt; <span class="title">names</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">name.<span class="built_in">assign</span>(<span class="number">10</span>,<span class="string">&quot;dhk&quot;</span>);<span class="comment">//æ›¿æ¢ä¸º10ä¸ªç›¸åŒçš„æŒ‡å®šå…ƒç´ </span></span><br></pre></td></tr></table></figure>
<h3 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h3><p>swapå‡½æ•°çš„ä½œç”¨æ˜¯äº¤æ¢<strong>ä¸¤ä¸ªç›¸åŒç±»å‹å®¹å™¨</strong>çš„å…ƒç´ ï¼Œä½†æ˜¯swapçš„é€Ÿåº¦è¦å¿«äºä¸€èˆ¬çš„å€¼æ‹·è´ï¼Œå› ä¸ºå…¶æœ¬è´¨çš„æ“ä½œå¹¶æ²¡æœ‰æ”¹å˜è¿™äº›å…ƒç´ çš„åœ°å€ï¼Œè€Œæ˜¯æ”¹å˜äº†ä¸¤ä¸ªå®¹å™¨çš„<strong>æ•°æ®ç»“æ„</strong>ï¼Œæˆ‘ä¸ªäººçš„ç†è§£æ˜¯å°±å¥½åƒ<a href="https://dhkkk.gitee.io/2022/12/09/åŸºäºFreeRTOSçš„åˆ—è¡¨å­¦ä¹ /">åŸºäºFreeRTOSçš„åˆ—è¡¨å­¦ä¹  | å°è‘£çš„BLOG (gitee.io)</a>ä¸­åˆ—è¡¨ä¸åˆ—è¡¨é¡¹ä¹‹é—´çš„å…³ç³»ï¼Œswapåªæ˜¯æ”¹å˜äº†é¦–å°¾åˆ—è¡¨é¡¹ä¸å¯¹åº”åˆ—è¡¨çš„æŒ‡é’ˆå…³ç³»ï¼›ä¹Ÿå°±æ˜¯è¯´å®¹å™¨å†…å…ƒç´ çš„åœ°å€æœªå‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯ç”¨äºå­˜å‚¨å®ƒä»¬æ‰€å±å®¹å™¨ä¿¡æ¯çš„æŸä¸ªå˜é‡ï¼ˆåº”è¯¥åªæœ‰é¦–å°¾å…ƒç´ ï¼‰å‘ç”Ÿäº†å˜åŒ–ã€‚å› æ­¤ï¼Œ<strong>swapæ“ä½œæ˜¯åœ¨ä¸€ä¸ªå¸¸æ•°æ—¶é—´å†…å®Œæˆçš„</strong>ï¼Œå› ä¸ºå®ƒè·Ÿå…ƒç´ çš„ä¸ªæ•°æ— å…³</p>
<p>å› æ­¤ï¼Œåœ¨swapå‰ä½¿ç”¨çš„è¿­ä»£å™¨ã€å¼•ç”¨ã€æŒ‡é’ˆåœ¨swapå<strong>éƒ½ä¸ä¼šå¤±æ•ˆï¼Œå› ä¸ºå…ƒç´ æœ¬èº«çš„åœ°å€æ˜¯æ²¡æœ‰æ”¹å˜çš„</strong>ï¼Œè¿™ç‚¹å°±ä¸åŒäºassignçš„å€¼æ‹·è´ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨ä½¿ç”¨swapåä»å¯ä»¥ä½¿ç”¨ä¹‹å‰çš„è¿­ä»£å™¨ã€å¼•ç”¨å’ŒæŒ‡é’ˆï¼Œå®ƒä»¬ä¾æ—§æŒ‡å‘ï¼ˆç»‘å®šï¼‰swapå‰çš„é‚£ä¸ªå…ƒç´ ï¼Œåªæ˜¯è¿™ä¸ªå…ƒç´ ä¸å†å±äºä¹‹å‰çš„å®¹å™¨äº†</strong></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li>å¯¹äºstringï¼Œè°ƒç”¨swapä¼šå¯¼è‡´ä¹‹å‰çš„è¿­ä»£å™¨ã€æŒ‡é’ˆå’Œå¼•ç”¨å¤±æ•ˆ</li>
<li>å¯¹äºarrayï¼Œä¸¤å®¹å™¨é•¿åº¦å¿…é¡»ç›¸ç­‰ã€‚swapä¼šçœŸæ­£åœ°äº¤æ¢å…ƒç´ å€¼ï¼Œä½†å…ƒç´ åœ°å€è¿˜æ˜¯æ²¡æœ‰æ”¹å˜çš„ï¼Œä¹Ÿå°±æ˜¯swapå‰çš„è¿­ä»£å™¨ã€æŒ‡é’ˆå’Œå¼•ç”¨ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼Œåªæ˜¯å®ƒæŒ‡å‘ï¼ˆç»‘å®šï¼‰çš„å…ƒç´ çš„å…ƒç´ å†…å®¹å‘ç”Ÿäº†å˜åŒ–</li>
</ul>
<h2 id="å…³ç³»è¿ç®—ç¬¦"><a href="#å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦"></a>å…³ç³»è¿ç®—ç¬¦</h2><p>æ‰€æœ‰å®¹å™¨éƒ½æ”¯æŒä½¿ç”¨å…³ç³»è¿ç®—ç¬¦ï¼Œä½†è¿ç®—å¯¹è±¡ç±»å‹å¿…é¡»ä¸€è‡´ï¼Œè¿ç®—åŸåˆ™ï¼š</p>
<ul>
<li>é•¿åº¦ç›¸ç­‰ä¸”å…ƒç´ ä¸¤ä¸¤å¯¹åº”ç›¸ç­‰åˆ™ä¸¤ä¸ªå®¹å™¨ç›¸ç­‰</li>
<li>å¦‚æœé•¿åº¦ä¸ç­‰ï¼Œä½†å…ƒç´ ç›¸ç­‰ï¼ˆè¾ƒå°å®¹å™¨çš„æ‰€æœ‰å…ƒç´ éƒ½ç­‰äºè¾ƒå¤§å®¹å™¨çš„å…ƒç´ ï¼‰ï¼Œåˆ™å°å®¹å™¨ï¼œå¤§å®¹å™¨</li>
<li>å¦‚æœé•¿åº¦ä¸ç­‰ä¸”å…ƒç´ ä¸ç­‰ï¼Œåˆ™å…³ç³»å–å†³äºç¬¬ä¸€ä¸ªä¸ä¸ç›¸ç­‰å…ƒç´ çš„å¤§å°å…³ç³»</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>åªæœ‰å½“å®¹å™¨å…ƒç´ çš„ç±»å‹ä¹Ÿå®šä¹‰äº†ç›¸åº”çš„è¿ç®—ç¬¦æ—¶æ‰å¯ä»¥ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªå®¹å™¨</strong></p>
<h1 id="é¡ºåºå®¹å™¨æ“ä½œ"><a href="#é¡ºåºå®¹å™¨æ“ä½œ" class="headerlink" title="é¡ºåºå®¹å™¨æ“ä½œ"></a>é¡ºåºå®¹å™¨æ“ä½œ</h1><h2 id="æ·»åŠ å…ƒç´ "><a href="#æ·»åŠ å…ƒç´ " class="headerlink" title="æ·»åŠ å…ƒç´ "></a>æ·»åŠ å…ƒç´ </h2><p>ä»¥ä¸‹å‡½æ•°çš†ä¸ºç±»æˆå‘˜å‡½æ•°</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">push_back(t)</td>
<td style="text-align:center">åœ¨å®¹å™¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªtå…ƒç´ </td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">push_front(t)</td>
<td style="text-align:center">åœ¨å®¹å™¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ªtå…ƒç´ </td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">insert(p,t)</td>
<td style="text-align:center">åœ¨è¿­ä»£å™¨pæŒ‡å‘çš„å…ƒç´ <strong>ä¹‹å‰</strong>æ·»åŠ ä¸€ä¸ªtå…ƒç´ </td>
<td style="text-align:center">æ–°å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">insert(p,n,t)</td>
<td style="text-align:center">æ’å…¥nä¸ªtå…ƒç´ </td>
<td style="text-align:center">ç¬¬ä¸€ä¸ªæ–°å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">insert(p,b,e)</td>
<td style="text-align:center">åœ¨è¿­ä»£å™¨pä¹‹å‰æ·»åŠ è¿­ä»£å™¨båˆ°eèŒƒå›´å†…çš„å…ƒç´ </td>
<td style="text-align:center">ç¬¬ä¸€ä¸ªæ–°å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">insert(p,il)</td>
<td style="text-align:center">æ’å…¥ä¸€ä¸ªilåˆ—è¡¨ï¼Œä¾‹å¦‚{1,2,3}</td>
<td style="text-align:center">ç¬¬ä¸€ä¸ªæ–°å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
</tbody>
</table>
</div>
<p>å½“å®¹å™¨å…ƒç´ éœ€è¦é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡½æ•°ç›´æ¥åœ¨å®¹å™¨å†…å­˜ä¸­æ„é€ å…ƒç´ ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">emplace_back(arg1,arg2,â€¦)</td>
<td style="text-align:center">ç›´æ¥æ·»åŠ ä¸€ä¸ªç”±å…ƒç´ ç±»æ„é€ å‡½æ•°æ„å»ºçš„æ–°å…ƒç´ åˆ°å®¹å™¨å°¾éƒ¨</td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">emplace_front(arg1,arg2,â€¦)</td>
<td style="text-align:center">ç›´æ¥æ·»åŠ ä¸€ä¸ªç”±å…ƒç´ ç±»æ„é€ å‡½æ•°æ„å»ºçš„æ–°å…ƒç´ åˆ°å®¹å™¨å¤´éƒ¨</td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">emplace(p,arg1,arg2,â€¦)</td>
<td style="text-align:center">ç›´æ¥æ·»åŠ ä¸€ä¸ªç”±å…ƒç´ ç±»æ„é€ å‡½æ•°æ„å»ºçš„å…ƒç´ åˆ°è¿­ä»£å™¨på‰</td>
<td style="text-align:center">æ–°å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
</tbody>
</table>
</div>
<p><strong>ä»arg1å¼€å§‹çš„å‚æ•°è¦ä¸¥æ ¼ç¬¦åˆå…ƒç´ çš„æ„é€ å‡½æ•°å‚æ•°è¦æ±‚</strong></p>
<p>ä½¿ç”¨è¿™äº›å‡½æ•°æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<ul>
<li>arrayä¸èƒ½ä½¿ç”¨è¿™äº›æ“ä½œ</li>
<li>forward_listæœ‰ä¸“ç”¨å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨è¿™äº›å‡½æ•°</li>
<li>forward_listä¸æ”¯æŒpush_backå’Œemplace_back</li>
<li>vectorå’Œstringä¸æ”¯æŒpush_frontå’Œemplace_front</li>
<li><strong>å‘ä¸€ä¸ªvectorã€stringæˆ–dequeæ’å…¥å…ƒç´ ä¼šä½¿åŸæ¥çš„è¿­ä»£å™¨ã€æŒ‡é’ˆã€å¼•ç”¨å¤±æ•ˆ</strong></li>
<li><strong>å°†å…ƒç´ æ’å…¥åˆ°vectorã€dequeå’Œstringä¸­æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯æ¶ˆè€—èµ„æºè¾ƒå¤§</strong></li>
</ul>
<h2 id="è®¿é—®å…ƒç´ "><a href="#è®¿é—®å…ƒç´ " class="headerlink" title="è®¿é—®å…ƒç´ "></a>è®¿é—®å…ƒç´ </h2><p>ä»¥ä¸‹çš†ä¸ºç±»æˆå‘˜å‡½æ•°</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">begin()</td>
<td style="text-align:center">è¿”å›é¦–å…ƒç´ è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">end()</td>
<td style="text-align:center">è¿”å›å°¾å…ƒç´ ä¹‹åä½ç½®çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">front()</td>
<td style="text-align:center">è¿”å›é¦–å…ƒç´ çš„å¼•ç”¨</td>
</tr>
<tr>
<td style="text-align:center">back()</td>
<td style="text-align:center">è¿”å›å°¾å…ƒç´ çš„å¼•ç”¨</td>
</tr>
<tr>
<td style="text-align:center">c[n]</td>
<td style="text-align:center">è¿”å›å®¹å™¨cä¸­ä¸‹æ ‡nå…ƒç´ çš„å¼•ç”¨ï¼Œä¸‹æ ‡è¶Šç•Œä¼šå¯¼è‡´è¿è¡Œå‡ºé”™</td>
</tr>
<tr>
<td style="text-align:center">at(n)</td>
<td style="text-align:center">åŒä¸Šï¼Œä½†å¦‚æœä¸‹æ ‡è¶Šç•Œï¼Œä¼šæŠ›å‡ºä¸€ä¸ªout_of_rangeå¼‚å¸¸</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>å¯¹ä¸€ä¸ªç©ºå®¹å™¨è°ƒç”¨è¿™äº›å‡½æ•°éƒ½å±äºè¶Šç•Œè®¿é—®</li>
<li>atå’Œä¸‹æ ‡æ“ä½œåªé€‚ç”¨äºvectorã€stringã€dequeå’Œarray</li>
<li>å¦‚æœå®¹å™¨æ˜¯constçš„ï¼Œåˆ™è¿”å›å…ƒç´ çš„å¼•ç”¨ä¹Ÿæ˜¯constçš„ï¼Œä¸å¯æ”¹å˜</li>
</ul>
<h2 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">pop_back()</td>
<td style="text-align:center">åˆ é™¤å°¾éƒ¨å…ƒç´ ï¼Œè‹¥å®¹å™¨ä¸ºç©ºåˆ™å‡½æ•°æœªå®šä¹‰</td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">pop_front()</td>
<td style="text-align:center">åˆ é™¤å¤´éƒ¨å…ƒç´ </td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">erase(p)</td>
<td style="text-align:center">åˆ é™¤è¿­ä»£å™¨på¤„å…ƒç´ ï¼Œè‹¥pä¸ºå°¾åè¿­ä»£å™¨ï¼Œåˆ™å‡½æ•°æœªå®šä¹‰</td>
<td style="text-align:center">è¢«åˆ å…ƒç´ ä¹‹åçš„å…ƒç´ è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">erase(b,e)</td>
<td style="text-align:center">åˆ é™¤è¿­ä»£å™¨bå’ŒeèŒƒå›´å†…çš„å…ƒç´ </td>
<td style="text-align:center">æœ€åä¸€ä¸ªè¢«åˆ å…ƒç´ ä¹‹åçš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">clear()</td>
<td style="text-align:center">åˆ é™¤æ‰€æœ‰å…ƒç´ </td>
<td style="text-align:center">void</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>arrayä¸èƒ½ä½¿ç”¨è¿™äº›æ“ä½œ</li>
<li>forward_listä¸æ”¯æŒpop_back()</li>
<li>vectorå’Œstringä¸æ”¯æŒpop_front()</li>
</ul>
<h2 id="forward-listçš„ç‰¹æ®Šæ“ä½œ"><a href="#forward-listçš„ç‰¹æ®Šæ“ä½œ" class="headerlink" title="forward_listçš„ç‰¹æ®Šæ“ä½œ"></a>forward_listçš„ç‰¹æ®Šæ“ä½œ</h2><p>å‰é¢è®²åˆ°ï¼Œforward_listä¸ºå•å‘é“¾è¡¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å‰é¢çš„è¿™äº›å‡½æ•°æ“ä½œæŸä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦æ‰¾åˆ°è¯¥å…ƒç´ çš„å‰é©±ï¼Œå› ä¸ºæ— è®ºæ˜¯æ·»åŠ ã€åˆ é™¤å…ƒç´ éƒ½éœ€è¦æ”¹å˜å‰é©±çš„é“¾æ¥ã€‚ä½†æ˜¯å•å‘é“¾è¡¨æ— æ³•é€šè¿‡ç®€å•çš„åŠæ³•æ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤å•å‘é“¾è¡¨çš„å®ç°æ–¹å¼æœ‰æ‰€ä¸åŒï¼šé€šè¿‡è¦æ“ä½œçš„å…ƒç´ çš„ä¸Šä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨æ¥æ‰¾åˆ°å¾…æ“ä½œå…ƒç´ </p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">before_begin()</td>
<td style="text-align:center">è¿”å›é¦–å…ƒç´ ä¹‹å‰çš„è¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨ä¸å¯è§£å¼•ç”¨</td>
<td style="text-align:center">~</td>
</tr>
<tr>
<td style="text-align:center">insert_after(p,t)</td>
<td style="text-align:center">åœ¨è¿­ä»£å™¨p<strong>å</strong>æ’å…¥t</td>
<td style="text-align:center">æ’å…¥çš„å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">insert_after(p,n,t)</td>
<td style="text-align:center">åœ¨è¿­ä»£å™¨p<strong>å</strong>æ’å…¥nä¸ªt</td>
<td style="text-align:center">æœ€åä¸€ä¸ªæ’å…¥çš„å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">insert_after(p,b,e)</td>
<td style="text-align:center">åœ¨p<strong>å</strong>æ’å…¥è¿­ä»£å™¨bå’Œeä¹‹é—´çš„å…ƒç´ </td>
<td style="text-align:center">æœ€åä¸€ä¸ªæ’å…¥çš„å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">insert_after(p,il)</td>
<td style="text-align:center">åœ¨p<strong>å</strong>æ’å…¥ä¸€ä¸ªèŠ±æ‹¬å·åˆ—è¡¨</td>
<td style="text-align:center">æœ€åä¸€ä¸ªæ’å…¥çš„å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">emplace_after(p,args1,args2,â€¦)</td>
<td style="text-align:center">åœ¨påæ’å…¥ä¸€ä¸ªç”±æ„é€ å‡½æ•°æ„é€ çš„å…ƒç´ </td>
<td style="text-align:center">æ–°å…ƒç´ çš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">erase_after(p)</td>
<td style="text-align:center">åˆ é™¤pæŒ‡å‘çš„å…ƒç´ ä¹‹åçš„é‚£ä¸€ä¸ªå…ƒç´ </td>
<td style="text-align:center">è¢«åˆ å…ƒç´ ä¹‹åçš„è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">erase_after(b,e)</td>
<td style="text-align:center">åˆ é™¤ä»bä¹‹ååˆ°eä¹‹é—´çš„å…ƒç´ ï¼Œå³(b,e]</td>
<td style="text-align:center">è¢«åˆ å…ƒç´ ä¹‹åçš„è¿­ä»£å™¨</td>
</tr>
</tbody>
</table>
</div>
<h1 id="æ”¹å˜å®¹å™¨å¤§å°"><a href="#æ”¹å˜å®¹å™¨å¤§å°" class="headerlink" title="æ”¹å˜å®¹å™¨å¤§å°"></a>æ”¹å˜å®¹å™¨å¤§å°</h1><p>å¯¹åº”é™¤arrayä¹‹å¤–çš„å®¹å™¨ï¼Œå…¶å®¹é‡éƒ½æ˜¯éšæ—¶å¯å˜çš„ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ã€åˆ é™¤å…ƒç´ å®æ—¶æ”¹å˜å®¹å™¨çš„å¤§å°ï¼Œè¿™é‡Œæä¾›äº†resizeå‡½æ•°æ¥å¯è§†åŒ–ç®¡ç†å®¹å™¨çš„å¤§å°ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">resize(n)</td>
<td style="text-align:center">å°†å®¹å™¨å¤§å°è°ƒæ•´ä¸ºn</td>
</tr>
<tr>
<td style="text-align:center">resize(n,t)</td>
<td style="text-align:center">ä»»ä½•æ–°æ·»åŠ çš„å…ƒç´ éƒ½åˆå§‹åŒ–ä¸ºt</td>
</tr>
</tbody>
</table>
</div>
<p>å¯¹äºè°ƒæ•´å€¼nï¼Œè‹¥nå°äºå®¹å™¨æœ¬èº«å¤§å°ï¼Œåˆ™å¤šå‡ºçš„å…ƒç´ è¢«ä¸¢å¼ƒï¼›è‹¥nå¤§äºå®¹å™¨å¤§å°ï¼Œæ–°çš„å…ƒç´ éƒ½å°†è¿›è¡Œåˆå§‹åŒ–</p>
<p>æ”¹å˜å®¹å™¨å¤§å°å¯èƒ½ä¼šå› ä¸ºåˆ é™¤å…ƒç´ å¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆ</p>
<h1 id="ç®¡ç†å®¹å™¨çš„å†…å­˜"><a href="#ç®¡ç†å®¹å™¨çš„å†…å­˜" class="headerlink" title="ç®¡ç†å®¹å™¨çš„å†…å­˜"></a>ç®¡ç†å®¹å™¨çš„å†…å­˜</h1><p>å¯¹äºvectorå’Œstringæ¥è¯´ï¼Œä¸ºäº†æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œå…¶å…ƒç´ åœ¨å†…å­˜ä¸Šæ˜¯è¿ç»­å­˜å‚¨çš„ã€‚</p>
<p>å› æ­¤ï¼Œå½“å®¹å™¨éœ€è¦æ‰©å……å®¹é‡æ—¶ï¼Œå› ä¸ºå…ƒç´ å¿…é¡»è¿ç»­çº¯ç²¹çš„å…³ç³»ï¼Œæ¯æ¬¡æ·»åŠ æ‰©å®¹çš„æ–°å…ƒç´ æ—¶ï¼Œå®¹å™¨éƒ½ä¼šé‡æ–°åˆ†é…å†…å­˜ç©ºé—´ä»¥ä¿è¯æ‰€æœ‰çš„å…ƒç´ åœ¨å†…å­˜ä¸Šéƒ½è¿ç»­å­˜å‚¨ï¼ˆæ­¤æ—¶åŸæ¥çš„ç©ºé—´å†…å­˜å°±ä¼šè¢«é‡Šæ”¾ï¼‰ï¼Œè¿™ç§æ“ä½œä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚</p>
<p>ä¸ºäº†å‡è½»è¿™ç§ä»£ä»·ï¼Œæ ‡å‡†åº“å®ç°è€…åœ¨å®¹å™¨ä¸å¾—ä¸è·å–æ–°çš„å†…å­˜ç©ºé—´æ—¶ï¼Œ<strong>ä¼šåˆ†é…æ¯”æ–°çš„ç©ºé—´éœ€æ±‚æ›´å¤§çš„å†…å­˜ç©ºé—´</strong>ï¼Œå¤šå‡ºçš„ç©ºé—´ä½œä¸ºé¢„ç•™å¤‡ç”¨ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦é¿å…å¤šæ¬¡é‡æ–°åˆ†é…å†…å­˜ç©ºé—´ã€‚è€Œåœ¨å®é™…ä¸­ï¼Œè¿™ç§ç­–ç•¥ä¹Ÿç¡®å®å¤§å¤§æé«˜äº†æ€§èƒ½</p>
<p>ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ç®¡ç†è¿™äº›å†…å­˜ï¼Œå®¹å™¨ç±»å‹ä¸­ä¹Ÿæä¾›äº†ç›¸å…³çš„æˆå‘˜å‡½æ•°ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">shrink_to_fit()</td>
<td style="text-align:center">åˆ é™¤é¢„ç•™çš„ç©ºé—´ï¼Œä½¿ç”¨åå†…å­˜ç©ºé—´ä¸size()ä¸€è‡´</td>
</tr>
<tr>
<td style="text-align:center">capacity()</td>
<td style="text-align:center">å®¹å™¨ç›®å‰åœ¨ä¸é‡æ–°åˆ†é…ç©ºé—´çš„å‰æä¸‹<strong>æœ€å¤š</strong>å¯ä»¥ä¿å­˜å¤šå°‘å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">reserve(n)</td>
<td style="text-align:center">ä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ª<strong>è‡³å°‘</strong>èƒ½å®¹çº³nä¸ªå…ƒç´ çš„ç©ºé—´</td>
</tr>
</tbody>
</table>
</div>
<p>æ ¹æ®æˆ‘çš„ä½¿ç”¨ç»éªŒï¼Œå½“reserveçš„å€¼è¶…è¿‡ç›®å‰å®¹å™¨å®é™…å®¹é‡ä¸€å®šå€¼ä¹‹åï¼Œreserveçš„å€¼ä¼šç­‰äºcapacityã€‚å¹¶ä¸”ï¼Œ<strong>reserveä¸resizeå‡½æ•°æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šreserveä»…åˆ†é…å†…å­˜ç©ºé—´ï¼Œè€Œresizeä¼šå°†å…ƒç´ è¿›è¡Œåˆå§‹åŒ–ï¼Œä½†å®ƒä»¬éƒ½æ˜¯ä»¥å…ƒç´ çš„ä¸ªæ•°ä¸ºå•ä½ï¼Œè€Œä¸æ˜¯å­—èŠ‚ä¹‹ç±»çš„</strong></p>
<ul>
<li>capacityå’Œreserveåªé€‚ç”¨äºvectorå’Œstring</li>
</ul>
<h1 id="é¢å¤–çš„stringæ“ä½œ"><a href="#é¢å¤–çš„stringæ“ä½œ" class="headerlink" title="é¢å¤–çš„stringæ“ä½œ"></a>é¢å¤–çš„stringæ“ä½œ</h1><h2 id="æ„é€ stringçš„å…¶ä»–æ–¹æ³•"><a href="#æ„é€ stringçš„å…¶ä»–æ–¹æ³•" class="headerlink" title="æ„é€ stringçš„å…¶ä»–æ–¹æ³•"></a>æ„é€ stringçš„å…¶ä»–æ–¹æ³•</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">string s(cp,n)</td>
<td style="text-align:center">sæ˜¯cpæŒ‡å‘çš„æ•°ç»„å‰nä¸ªå­—ç¬¦çš„æ‹·è´</td>
</tr>
<tr>
<td style="text-align:center">string s(s2,pos2)</td>
<td style="text-align:center">sæ˜¯stringå˜é‡s2ä»ä¸‹æ ‡pos2å¼€å§‹çš„å­—ç¬¦çš„æ‹·è´</td>
</tr>
<tr>
<td style="text-align:center">string s(s2,pos2,len2)</td>
<td style="text-align:center">åŒä¸Šï¼Œlençš„é•¿åº¦å¯ä»¥è¶…è¿‡s2é•¿åº¦ï¼Œæ­¤æ—¶è‡³å¤šæ‹·è´size-pos2ä¸ªå­—ç¬¦</td>
</tr>
</tbody>
</table>
</div>
<h2 id="å­å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­å­—ç¬¦ä¸²æ“ä½œ"></a>å­å­—ç¬¦ä¸²æ“ä½œ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">substr(pos,n)</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªstringï¼Œè¿”å›å€¼åŒç¬¬äºŒä¸ªæ„é€ å‡½æ•°</td>
</tr>
</tbody>
</table>
</div>
<h1 id="å…³è”å®¹å™¨"><a href="#å…³è”å®¹å™¨" class="headerlink" title="å…³è”å®¹å™¨"></a>å…³è”å®¹å™¨</h1><p>å…³è”å®¹å™¨å’Œé¡ºåºå®¹å™¨æœ‰æ ¹æœ¬çš„åŒºåˆ«ï¼Œç®€å•æ¥è¯´ï¼Œå…³è”å®¹å™¨é€šè¿‡å…³é”®å­—æ¥ä¿å­˜ã€è®¿é—®å…ƒç´ ï¼›è€Œé¡ºåºå®¹å™¨æ˜¯é€šè¿‡å…ƒç´ åœ¨å®¹å™¨ä¸­çš„ä½ç½®æ¥æ“ä½œå…ƒç´ çš„ã€‚</p>
<p>æ ‡å‡†åº“æä¾›äº†8ä¸ªå…³è”å®¹å™¨ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ç±»å‹</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">map</td>
<td style="text-align:center">å…³è”æ•°ç»„ï¼šå…³é”®å­—ä¸å€¼ä¸€ä¸€å¯¹åº”</td>
</tr>
<tr>
<td style="text-align:center">set</td>
<td style="text-align:center">å…³é”®å­—å³å€¼ï¼Œåªä¿å­˜å…³é”®å­—çš„å®¹å™¨</td>
</tr>
<tr>
<td style="text-align:center">multimap</td>
<td style="text-align:center">å…³é”®å­—å¯é‡å¤å‡ºç°ï¼Œå…è®¸å¤šä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªå…³é”®å­—çš„map</td>
</tr>
<tr>
<td style="text-align:center">multiset</td>
<td style="text-align:center">å…³é”®å­—å¯é‡å¤å‡ºç°çš„set</td>
</tr>
<tr>
<td style="text-align:center"><strong>ä¸‹æ–¹ä¸ºæ— åºå®¹å™¨</strong></td>
<td style="text-align:center">~</td>
</tr>
<tr>
<td style="text-align:center">unordered_map</td>
<td style="text-align:center">ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„map</td>
</tr>
<tr>
<td style="text-align:center">unordered_set</td>
<td style="text-align:center">ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„set</td>
</tr>
<tr>
<td style="text-align:center">unordered_multimap</td>
<td style="text-align:center">~</td>
</tr>
<tr>
<td style="text-align:center">unordered_multiset</td>
<td style="text-align:center">~</td>
</tr>
</tbody>
</table>
</div>
<p>ä½¿ç”¨å®ƒä»¬éœ€åŒ…å«å¯¹åº”çš„å¤´æ–‡ä»¶</p>
<h2 id="å…³è”å®¹å™¨æ¦‚è¿°"><a href="#å…³è”å®¹å™¨æ¦‚è¿°" class="headerlink" title="å…³è”å®¹å™¨æ¦‚è¿°"></a>å…³è”å®¹å™¨æ¦‚è¿°</h2><p>å…³è”å®¹å™¨æ”¯æŒä¸Šé¢è®²çš„å®¹å™¨é€šç”¨æ“ä½œï¼Œä¸æ”¯æŒé¡ºåºå®¹å™¨æ“ä½œï¼Œä¸”å…³è”å®¹å™¨çš„è¿­ä»£å™¨éƒ½æ˜¯åŒå‘çš„</p>
<h3 id="å…³è”å®¹å™¨å®šä¹‰"><a href="#å…³è”å®¹å™¨å®šä¹‰" class="headerlink" title="å…³è”å®¹å™¨å®šä¹‰"></a>å…³è”å®¹å™¨å®šä¹‰</h3><p>æ²¡ä»€ä¹ˆéœ€è¦ç‰¹åˆ«è®²çš„ï¼ŒåŸºæœ¬å¯ä»¥çœ‹æ˜ç™½</p>
<ul>
<li><p>mapï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">map&lt;string, <span class="type">int</span>&gt; test=&#123;&#123;<span class="string">&quot;dhk&quot;</span>,<span class="number">1</span>&#125;,&#123;<span class="string">&quot;aca&quot;</span>,<span class="number">2</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>setï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">set&lt;<span class="type">int</span>&gt; test=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="å…³é”®å­—ç±»å‹è¦æ±‚"><a href="#å…³é”®å­—ç±»å‹è¦æ±‚" class="headerlink" title="å…³é”®å­—ç±»å‹è¦æ±‚"></a>å…³é”®å­—ç±»å‹è¦æ±‚</h3><p>å¯¹äºå…³é”®å­—çš„ç±»å‹å¿…é¡»æ˜¯å¯ä»¥æ¯”è¾ƒçš„ã€‚</p>
<h2 id="å…³è”å®¹å™¨æ“ä½œ"><a href="#å…³è”å®¹å™¨æ“ä½œ" class="headerlink" title="å…³è”å®¹å™¨æ“ä½œ"></a>å…³è”å®¹å™¨æ“ä½œ</h2><h3 id="å…³è”å®¹å™¨ç‰¹æœ‰ç±»å‹åˆ«å"><a href="#å…³è”å®¹å™¨ç‰¹æœ‰ç±»å‹åˆ«å" class="headerlink" title="å…³è”å®¹å™¨ç‰¹æœ‰ç±»å‹åˆ«å"></a>å…³è”å®¹å™¨ç‰¹æœ‰ç±»å‹åˆ«å</h3><ul>
<li>key_typeï¼šå®¹å™¨çš„å…³é”®å­—ç±»å‹</li>
<li>mapped_typeï¼šå…³é”®å­—å¯¹åº”å€¼çš„ç±»å‹ï¼Œåªé€‚ç”¨äºmap</li>
<li>value_typeï¼šå¯¹äºsetï¼Œäºkey_typeç›¸åŒï¼›å¯¹äºmapï¼Œä¸º<code>pair&lt;const key_type,mapped_type&gt;</code></li>
</ul>
<p>(pairå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªç±»ä¼¼å°å®¹å™¨çš„ç±»å‹ï¼Œæ¯ä¸ªå¯¹è±¡åªå…è®¸æœ‰ä¸¤ä¸ªæˆå‘˜)</p>
<h3 id="å…³è”å®¹å™¨è¿­ä»£å™¨"><a href="#å…³è”å®¹å™¨è¿­ä»£å™¨" class="headerlink" title="å…³è”å®¹å™¨è¿­ä»£å™¨"></a>å…³è”å®¹å™¨è¿­ä»£å™¨</h3><p>å¯¹äºé¡ºåºå®¹å™¨ï¼Œè¿­ä»£å™¨çš„è§£å¼•ç”¨ä¸ºå…ƒç´ çš„å€¼ï¼›è€Œå¯¹äºå…³è”å®¹å™¨ï¼š</p>
<ul>
<li><p>setçš„è¿­ä»£å™¨è§£å¼•ç”¨å¯¹è±¡ä¸ºkey_type</p>
</li>
<li><p>mapçš„è¿­ä»£å™¨è§£å¼•ç”¨å¯¹è±¡ä¸ºä¸€ä¸ªpairç±»å‹ï¼Œå› æ­¤ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">map&lt;string,<span class="type">int</span>&gt; <span class="title">test</span><span class="params">(&#123;<span class="string">&quot;dhk&quot;</span>,<span class="number">1</span>&#125;,&#123;<span class="string">&quot;aca&quot;</span>,<span class="number">2</span>&#125;)</span></span>;</span><br><span class="line"><span class="keyword">auto</span> i=test.<span class="built_in">begin</span>();</span><br><span class="line">string a=(*i).first;</span><br><span class="line"><span class="type">int</span> b=i-&gt;second;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…³è”å®¹å™¨çš„å…³é”®å­—æ˜¯constçš„ï¼Œä¸å¯ä¿®æ”¹</p>
<p><strong>åŒæ—¶ï¼Œå¯¹äºå…³è”å®¹å™¨ï¼Œbeginå‡½æ•°è¿”å›çš„ä¸ä¸€å®šæ˜¯åˆå§‹åŒ–æ—¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œæ˜¯ç»è¿‡å…³é”®å­—æ¯”è¾ƒè¿‡åæœ€å°çš„å…ƒç´ </strong></p>
</li>
</ul>
<h3 id="æ’å…¥å…ƒç´ "><a href="#æ’å…¥å…ƒç´ " class="headerlink" title="æ’å…¥å…ƒç´ "></a>æ’å…¥å…ƒç´ </h3><p>å¯¹äºmapï¼Œä»¥ä¸‹å‡ ç§æ–¹å¼éƒ½å¯ä»¥</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">test.<span class="built_in">insert</span>(&#123;<span class="string">&quot;dhk&quot;</span>,<span class="number">1</span>&#125;);</span><br><span class="line">test.<span class="built_in">insert</span>(<span class="built_in">makepair</span>(<span class="string">&quot;dhk&quot;</span>,<span class="number">1</span>));<span class="comment">//makepairä¸ºç°åœºæ„é€ ä¸€ä¸ªpair</span></span><br><span class="line">test.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;string,<span class="type">int</span>&gt;(<span class="string">&quot;dhk&quot;</span>,<span class="number">1</span>));</span><br><span class="line">test.<span class="built_in">insert</span>(map&lt;string,<span class="type">int</span>&gt;::<span class="built_in">value_type</span>(<span class="string">&quot;dhk&quot;</span>,<span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨emplaceå‡½æ•°ï¼ŒåŒé¡ºåºå®¹å™¨</p>
<h3 id="åˆ é™¤å…ƒç´ -1"><a href="#åˆ é™¤å…ƒç´ -1" class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h3><p>ä½¿ç”¨eraseå‡½æ•°ï¼Œå‚æ•°å¯ä»¥ä¸ºå…³é”®å­—æˆ–è¿­ä»£å™¨</p>
<h3 id="mapçš„ä¸‹æ ‡æ“ä½œ"><a href="#mapçš„ä¸‹æ ‡æ“ä½œ" class="headerlink" title="mapçš„ä¸‹æ ‡æ“ä½œ"></a>mapçš„ä¸‹æ ‡æ“ä½œ</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">map&lt;string,<span class="type">int</span>&gt; <span class="title">test</span><span class="params">(&#123;<span class="string">&quot;dhk&quot;</span>,<span class="number">1</span>&#125;)</span></span>;</span><br><span class="line">map[<span class="string">&quot;dhk&quot;</span>]=<span class="number">2</span>;</span><br><span class="line">map[<span class="string">&quot;aca&quot;</span>]=<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>mapçš„ä¸‹æ ‡æ¥å—ä¸€ä¸ªå…³é”®å­—ï¼Œä¼šè·å–è¯¥å…³é”®å­—å…³è”çš„å€¼</p>
<p>å¦‚æœå®¹å™¨ä¸­æœªå­˜åœ¨è¯¥å…³é”®å­—ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç´ æ’å…¥å®¹å™¨ä¸­ï¼Œå› æ­¤ä¸‹æ ‡æ“ä½œåªèƒ½å¯¹éconstå®¹å™¨ä½¿ç”¨</p>
<h3 id="é€šç”¨è®¿é—®æ“ä½œ"><a href="#é€šç”¨è®¿é—®æ“ä½œ" class="headerlink" title="é€šç”¨è®¿é—®æ“ä½œ"></a>é€šç”¨è®¿é—®æ“ä½œ</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">åŠŸèƒ½</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">find(k)</td>
<td style="text-align:center">è®¿é—®å®¹å™¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„å…³é”®å­—ä¸ºkçš„å…ƒç´ </td>
<td style="text-align:center">è¯¥å…ƒç´ è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">count(k)</td>
<td style="text-align:center">å…³é”®å­—ä¸ºkçš„å…ƒç´ æ•°é‡</td>
<td style="text-align:center">æ•°é‡</td>
</tr>
<tr>
<td style="text-align:center">lower_bound(k)</td>
<td style="text-align:center">è®¿é—®ç¬¬ä¸€æ¬¡å‡ºç°çš„å…³é”®å­—â‰¤kçš„å…ƒç´ </td>
<td style="text-align:center">è¯¥å…ƒç´ è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">upper_bound(k)</td>
<td style="text-align:center">è®¿é—®ç¬¬ä¸€æ¬¡å‡ºç°çš„å…³é”®å­—ï¼kçš„å…ƒç´ </td>
<td style="text-align:center">è¯¥å…ƒç´ è¿­ä»£å™¨</td>
</tr>
<tr>
<td style="text-align:center">equal_range(k)</td>
<td style="text-align:center">å…³é”®å­—ä¸ºkçš„æ‰€æœ‰å…ƒç´ çš„èŒƒå›´</td>
<td style="text-align:center">ä¸€ä¸ªpairï¼Œä¸¤ä¸ªæˆå‘˜å‡ä¸ºè¿­ä»£å™¨</td>
</tr>
</tbody>
</table>
</div>
<p>å¯¹äºå…è®¸å…³é”®å­—é‡å¤çš„å®¹å™¨ï¼Œå…³é”®å­—ç›¸åŒçš„å…ƒç´ ä¼šåœ¨å®¹å™¨ä¸­ç›¸é‚»å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥é€šè¿‡è¿­ä»£å™¨é€’å¢çš„æ–¹å¼ä¾æ¬¡è®¿é—®</p>
<p><strong>è¿™äº›æ“ä½œä¸ä¸‹æ ‡æ“ä½œä¸åŒçš„æ˜¯ä¸èƒ½åˆ›å»ºæ–°å…ƒç´ </strong></p>
<h2 id="å•è¯è½¬æ¢ç¨‹åº"><a href="#å•è¯è½¬æ¢ç¨‹åº" class="headerlink" title="å•è¯è½¬æ¢ç¨‹åº"></a>å•è¯è½¬æ¢ç¨‹åº</h2><p>æ ¹æ®ä¹¦ä¸Šçš„æ€è·¯å†™äº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„æ‹¼éŸ³è½¬æ±‰å­—ç¨‹åº</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;array&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å°†æ–‡ä»¶æµç»‘å®šçš„æ–‡ä»¶æ•°æ®å¯¼å…¥åˆ°æœ¬ç¨‹åºçš„mapä¸­,æ–‡ä»¶æ•°æ®æ ¼å¼å¦‚ä¸‹*/</span></span><br><span class="line"><span class="comment">/*æ‹¼éŸ³ å¯¹åº”æ±‰å­—*/</span></span><br><span class="line"><span class="function">map&lt;string,string&gt; <span class="title">bulidmap</span><span class="params">(ifstream &amp;map_file)</span><span class="comment">//è¿”å›å€¼ä¸ºä¸€ä¸ªmap&lt;string,string&gt;</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;string,string&gt; the_map;</span><br><span class="line">    string key,value;</span><br><span class="line">    <span class="keyword">while</span>(map_file&gt;&gt;key &amp;&amp; <span class="built_in">getline</span>(map_file,value))</span><br><span class="line">    <span class="comment">//å°†æ‹¼éŸ³å­˜å…¥keyå˜é‡ä¸­ï¼Œè¯¥è¡Œå‰©ä¸‹çš„å†…å®¹å­˜å…¥valueä¸­</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœvalueæœ‰å€¼ï¼Œåˆ™åˆ é™¤å¼€å¤´çš„ç©ºæ ¼</span></span><br><span class="line">        <span class="keyword">if</span>(value.<span class="built_in">size</span>()&gt;<span class="number">1</span>)  the_map[key]=value.<span class="built_in">substr</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> the_map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ifstream mapfile;<span class="comment">//åˆ›å»ºä¸€ä¸ªè¯»å–æ–‡ä»¶æµç”¨äºè¯»å–æ–‡ä»¶</span></span><br><span class="line">    <span class="function">stringstream <span class="title">str</span><span class="params">(<span class="string">&quot;cy shi wo die&quot;</span>)</span></span>;<span class="comment">//å­—ç¬¦ä¸²æµç”¨äºç¨‹åºè¾“å…¥</span></span><br><span class="line">    mapfile.<span class="built_in">open</span>(<span class="string">&quot;c++\\ass_container\\map.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">auto</span> trans_map=<span class="built_in">bulidmap</span>(mapfile);<span class="comment">//å°†æ–‡ä»¶æµå†…å®¹å¯¼å…¥æ–°åˆ›å»ºçš„mapç±»å‹å˜é‡ä¸­</span></span><br><span class="line">    <span class="keyword">auto</span> end=trans_map.<span class="built_in">end</span>();<span class="comment">//æŒ‡å‘mapæœ«ç«¯ä¹‹åçš„ä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line">    string s,s1;</span><br><span class="line">    <span class="keyword">while</span>(str&gt;&gt;s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> i= trans_map.<span class="built_in">find</span>(s);<span class="comment">//å°†å­—ç¬¦ä¸²æµä¸­çš„æ¯ä¸€ä¸ªå•è¯å–å‡ºï¼Œåœ¨mapä¸­å¯»æ‰¾æœ‰æ— å¯¹åº”çš„key</span></span><br><span class="line">        <span class="keyword">if</span> (i !=end)<span class="comment">//å¦‚æœæœªå¯»æ‰¾åˆ°ï¼Œè¿­ä»£å™¨iä¼šç­‰äºend</span></span><br><span class="line">        &#123;</span><br><span class="line">            s=i-&gt;second;<span class="comment">//ç”¨å¯»æ‰¾åˆ°çš„keyå¯¹åº”çš„valueï¼ˆæ‹¼éŸ³å¯¹åº”æ±‰å­—ï¼‰è¦†ç›–sä¸­åŸæœ‰çš„æ‹¼éŸ³</span></span><br><span class="line">        &#125;</span><br><span class="line">        s1=s1+s;<span class="comment">//s1ç”¨äºå­˜å‚¨å…¨éƒ¨çš„è½¬æ¢ç»“æœ</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;s1&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>21è¡Œï¼šå­—ç¬¦ä¸²åˆ é™¤å‡½æ•°ï¼Œå¯ä»¥åˆ é™¤å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ•°é‡çš„å­—ç¬¦</li>
<li>38è¡Œï¼šfindå‡½æ•°å¦‚æœæœªæ‰¾åˆ°å¯¹åº”å…³é”®å­—åˆ™ä¼šè¿”å›é˜Ÿå°¾ä¹‹åçš„è¿­ä»£å™¨</li>
</ul>
<h1 id="æ— åºå®¹å™¨"><a href="#æ— åºå®¹å™¨" class="headerlink" title="æ— åºå®¹å™¨"></a>æ— åºå®¹å™¨</h1><p>æ— åºå®¹å™¨ä¹Ÿå±äºå…³è”å®¹å™¨çš„ä¸€ç§ï¼Œä½†æ— åºå®¹å™¨ä¸æ˜¯ä½¿ç”¨æ¯”è¾ƒå…³é”®å­—çš„æ–¹å¼æ¥ç»„ç»‡å…ƒç´ é¡ºåºï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ç®—æ³•è¿›è¡Œç»„ç»‡å…ƒç´ ï¼Œç®€å•åœ°æ¥è¯´ï¼Œè¯¥ç®—æ³•å°±æ˜¯ç”¨æ¯”æ™®é€šå…³è”å®¹å™¨ç»„ç»‡æ–¹å¼ä»£ä»·æ›´å°çš„æ–¹å¼è¿›è¡Œå…ƒç´ ç»„ç»‡ï¼Œ<strong>é€šå¸¸ç”¨äºå…³é”®å­—æ²¡æœ‰æ˜æ˜¾çš„åºå…³ç³»ç­‰æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¹Ÿè®¸å¯ä»¥èŠ‚çœæ€§èƒ½çš„å ç”¨</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ç±»å‹</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">unordered_map</td>
<td style="text-align:center">ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„map</td>
</tr>
<tr>
<td style="text-align:center">unordered_set</td>
<td style="text-align:center">ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„set</td>
</tr>
<tr>
<td style="text-align:center">unordered_multimap</td>
<td style="text-align:center">~</td>
</tr>
<tr>
<td style="text-align:center">unordered_multiset</td>
<td style="text-align:center">~</td>
</tr>
</tbody>
</table>
</div>
<h2 id="æ— åºå®¹å™¨çš„ç®¡ç†æªæ–½"><a href="#æ— åºå®¹å™¨çš„ç®¡ç†æªæ–½" class="headerlink" title="æ— åºå®¹å™¨çš„ç®¡ç†æªæ–½"></a>æ— åºå®¹å™¨çš„ç®¡ç†æªæ–½</h2><p>æ— åºå®¹å™¨åœ¨å­˜å‚¨ä¸Šç»„ç»‡ä¸ºä¸€ç»„â€œæ¡¶â€ï¼Œå“ˆå¸Œå‡½æ•°ä¼šè®¡ç®—æ¯ä¸ªå…ƒç´ çš„å“ˆå¸Œå€¼ï¼Œå…·æœ‰ç›¸åŒå“ˆå¸Œå€¼çš„å…ƒç´ ä¼šè¢«å­˜å…¥ä¸€ä¸ªæ¡¶ä¸­ï¼Œå¯¹äºæ¡¶çš„ç»´æŠ¤ï¼Œæ ‡å‡†åº“ä¹Ÿç»™å‡ºäº†ä¸€ç³»åˆ—å‡½æ•°ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ç”¨å¤„ä¸å¤§ï¼Œå°±å…ˆä¸å†™åœ¨è¿™é‡Œäº†</p>
<h2 id="æ— åºå®¹å™¨å¯¹å…³é”®å­—ç±»å‹çš„è¦æ±‚"><a href="#æ— åºå®¹å™¨å¯¹å…³é”®å­—ç±»å‹çš„è¦æ±‚" class="headerlink" title="æ— åºå®¹å™¨å¯¹å…³é”®å­—ç±»å‹çš„è¦æ±‚"></a>æ— åºå®¹å™¨å¯¹å…³é”®å­—ç±»å‹çš„è¦æ±‚</h2><p>æ— åºå®¹å™¨ä¸­æœ‰ä¸€ä¸ªhash<key_type>ç±»å‹ç”¨äºå­˜å‚¨å“ˆå¸Œå€¼ï¼Œå†…ç½®ç±»å‹å’Œstringç­‰æ ‡å‡†åº“ç±»å‹å‡å®šä¹‰äº†hashç±»å‹ï¼Œå‡å¯ä»¥ä½œä¸ºå…³é”®å­—ã€‚ä¸èƒ½ä½œä¸ºæ— åºå®¹å™¨å…³é”®å­—çš„æ˜¯å¦ä¸€ä¸ªè‡ªå®šä¹‰çš„æ— åºå®¹å™¨ï¼ŒåŸå› ä¸æ¨¡æ¿æœ‰å…³ã€‚</key_type></p>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>FreeRTOSä»»åŠ¡å»¶æ—¶åˆ†æ</title>
    <url>/2022/12/14/FreeRTOS%E4%BB%BB%E5%8A%A1%E5%BB%B6%E6%97%B6%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<p>å‰å‡ ç« ä¸­éƒ½æœ‰æ¶‰åŠFreeRTOSçš„åˆ—è¡¨ç›¸å…³å†…å®¹ï¼Œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥åˆ—è¡¨ä¸ä»»åŠ¡çš„çŠ¶æ€ï¼ˆå°±ç»ªã€å»¶æ—¶ã€å µå¡ï¼‰ä¸ä»»åŠ¡è°ƒåº¦æ¯æ¯ç›¸å…³ï¼Œæœ¬æ–‡å°±é’ˆå¯¹ä»»åŠ¡å»¶æ—¶è¿›è¡Œ<strong>åˆ—è¡¨è¿è¡Œæœºåˆ¶</strong>çš„è¿›ä¸€æ­¥å­¦ä¹ </p>
<p>å‚è€ƒï¼š<a href="https://freertos.blog.csdn.net/article/details/51705148">FreeRTOSé«˜çº§ç¯‡9â€”-FreeRTOSç³»ç»Ÿå»¶æ—¶åˆ†æ_ç ”ç©¶æ˜¯ä¸ºäº†ç†è§£çš„åšå®¢-CSDNåšå®¢_pdms_to_ticks</a></p>
<h1 id="ç›¸å¯¹å»¶æ—¶"><a href="#ç›¸å¯¹å»¶æ—¶" class="headerlink" title="ç›¸å¯¹å»¶æ—¶"></a>ç›¸å¯¹å»¶æ—¶</h1><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°å</th>
<th style="text-align:center">å‚æ•°</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">vTaskDelay( const TickType_t xTicksToDelay )</td>
<td style="text-align:center">ç³»ç»ŸèŠ‚æ‹ä¸ªæ•°</td>
<td style="text-align:center">æ— </td>
</tr>
</tbody>
</table>
</div>
<p>å†æ¬¡æé†’ä¸€ä¸‹ï¼ŒFreeRTOSä¸­çš„å»¶æ—¶å‚æ•°éƒ½æ˜¯ä»¥FreeRTOS<strong>è‡ªèº«çš„ç³»ç»ŸèŠ‚æ‹</strong>ä¸ºå•ä½ï¼Œç³»ç»ŸèŠ‚æ‹å¯ä»¥åœ¨åœ¨é…ç½®æ–‡ä»¶FreeRTOSConfig.hï¼Œæ”¹å˜å®configTICK_RATE_HZçš„å€¼ï¼›cubemxä¸­çš„é…ç½®é¡¹ä¹Ÿæœ‰ç›¸å…³çš„é…ç½®å¤„ï¼Œå•ä½ä¸ºHz</p>
<h2 id="å‡½æ•°ä½“"><a href="#å‡½æ•°ä½“" class="headerlink" title="å‡½æ•°ä½“"></a>å‡½æ•°ä½“</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTaskDelay</span><span class="params">( <span class="type">const</span> TickType_t xTicksToDelay )</span></span><br><span class="line">&#123;</span><br><span class="line">BaseType_t xAlreadyYielded = pdFALSE;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* å¦‚æœå»¶æ—¶æ—¶é—´ä¸º0,åˆ™ä¸ä¼šå°†å½“å‰ä»»åŠ¡åŠ å…¥å»¶æ—¶åˆ—è¡¨ */</span></span><br><span class="line">    <span class="keyword">if</span>( xTicksToDelay &gt; ( TickType_t ) <span class="number">0U</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        configASSERT( uxSchedulerSuspended == <span class="number">0</span> );<span class="comment">//ç¦ç”¨ä¸­æ–­</span></span><br><span class="line">        vTaskSuspendAll();<span class="comment">//å°†è°ƒåº¦å™¨æŒ‚èµ·</span></span><br><span class="line">        &#123;</span><br><span class="line">        <span class="comment">/* å°†å½“å‰ä»»åŠ¡ä»å°±ç»ªåˆ—è¡¨ä¸­ç§»é™¤,å¹¶æ ¹æ®å½“å‰ç³»ç»ŸèŠ‚æ‹è®¡æ•°å™¨å€¼è®¡ç®—å”¤é†’æ—¶é—´,ç„¶åå°†ä»»åŠ¡åŠ å…¥å»¶æ—¶åˆ—è¡¨ */</span></span><br><span class="line">            prvAddCurrentTaskToDelayedList( xTicksToDelay, pdFALSE );</span><br><span class="line">        &#125;</span><br><span class="line">        xAlreadyYielded = xTaskResumeAll();<span class="comment">//æ¢å¤è°ƒåº¦å™¨è¿è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* å¼ºåˆ¶æ‰§è¡Œä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢*/</span></span><br><span class="line">    <span class="keyword">if</span>( xAlreadyYielded == pdFALSE )</span><br><span class="line">    &#123;</span><br><span class="line">        portYIELD_WITHIN_API();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œå…³é”®å‡½æ•°ä¸ºprvAddCurrentTaskToDelayedList()ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">prvAddCurrentTaskToDelayedList</span><span class="params">( TickType_t xTicksToWait, <span class="type">const</span> BaseType_t xCanBlockIndefinitely )</span></span><br><span class="line">&#123;</span><br><span class="line">TickType_t xTimeToWake;</span><br><span class="line"><span class="type">const</span> TickType_t xConstTickCount = xTickCount;</span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span>( INCLUDE_xTaskAbortDelay == 1 )</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">/* å»¶æ—¶ç›¸å…³æ ‡å¿—ä½æ¸…é›¶ */</span></span><br><span class="line">		pxCurrentTCB-&gt;ucDelayAborted = pdFALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/* å°†åˆ—è¡¨é¡¹ç§»å‡ºå½“å‰åˆ—è¡¨ï¼ˆå°±ç»ªåˆ—è¡¨ï¼‰ï¼ŒpxCurrentTCBä½œä¸ºå…¨å±€å˜é‡æŒ‡å‘å½“å‰ä»»åŠ¡TCBï¼ŒuxListRemove()è¿”å›åˆ—è¡¨çš„æˆå‘˜ä¸ªæ•° */</span></span><br><span class="line">	<span class="keyword">if</span>( uxListRemove( &amp;( pxCurrentTCB-&gt;xStateListItem ) ) == ( UBaseType_t ) <span class="number">0</span> )</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">/* The current task must be in a ready list, so there is no need to</span></span><br><span class="line"><span class="comment">		check, and the port reset macro can be called directly. */</span></span><br><span class="line">		portRESET_READY_PRIORITY( pxCurrentTCB-&gt;uxPriority, uxTopReadyPriority );</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		mtCOVERAGE_TEST_MARKER();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( INCLUDE_vTaskSuspend == 1 )</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>( ( xTicksToWait == portMAX_DELAY ) &amp;&amp; ( xCanBlockIndefinitely != pdFALSE ) )</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">/*å¦‚æœè®¾ç½®çš„å»¶æ—¶å‚æ•°ç­‰äºportMAX_DELAY(0xffffffff)ï¼Œåˆ™è§†ä¸ºå µå¡è€Œä¸æ˜¯å»¶æ—¶ */</span></span><br><span class="line">			vListInsertEnd( &amp;xSuspendedTaskList, &amp;( pxCurrentTCB-&gt;xStateListItem ) );</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">/* è®¡ç®—å”¤é†’æ—¶é—´ */</span></span><br><span class="line">			xTimeToWake = xConstTickCount + xTicksToWait;</span><br><span class="line"></span><br><span class="line">			<span class="comment">/* å°†å½“å‰ä»»åŠ¡TCBçš„çŠ¶æ€åˆ—è¡¨é¡¹å€¼è®¾ç½®ä¸ºå”¤é†’æ—¶é—´ */</span></span><br><span class="line">			listSET_LIST_ITEM_VALUE( &amp;( pxCurrentTCB-&gt;xStateListItem ), xTimeToWake );</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>( xTimeToWake &lt; xConstTickCount )</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">/* Wake time has overflowed.  Place this item in the overflow</span></span><br><span class="line"><span class="comment">				list. */</span></span><br><span class="line">				vListInsert( pxOverflowDelayedTaskList, &amp;( pxCurrentTCB-&gt;xStateListItem ) );</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">/* ä½¿ç”¨çš„æ˜¯æ’å…¥å‡½æ•°ï¼Œå› æ­¤å»¶æ—¶åˆ—è¡¨ä¸­åˆ—è¡¨é¡¹ä¼šæ ¹æ®å”¤é†’æ—¶é—´çš„å¤§å°è¿›è¡Œæ’åº */</span></span><br><span class="line">				vListInsert( pxDelayedTaskList, &amp;( pxCurrentTCB-&gt;xStateListItem ) );</span><br><span class="line"></span><br><span class="line">				<span class="comment">/* If the task entering the blocked state was placed at the</span></span><br><span class="line"><span class="comment">				head of the list of blocked tasks then xNextTaskUnblockTime</span></span><br><span class="line"><span class="comment">				needs to be updated too. */</span></span><br><span class="line">				<span class="keyword">if</span>( xTimeToWake &lt; xNextTaskUnblockTime )</span><br><span class="line">				&#123;</span><br><span class="line">					xNextTaskUnblockTime = xTimeToWake;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					mtCOVERAGE_TEST_MARKER();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">		<span class="comment">/* Avoid compiler warning when INCLUDE_vTaskSuspend is not 1. */</span></span><br><span class="line">		( <span class="type">void</span> ) xCanBlockIndefinitely;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span> <span class="comment">/* INCLUDE_vTaskSuspend */</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å¯¹ä¸Šè¿°ä»£ç è§£é‡Šäº†åˆ—è¡¨çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><p>è‹¥è¦å°†å½“å‰ä»»åŠ¡å»¶æ—¶æˆ–æŒ‚èµ·ï¼Œå¯ä»¥é€šè¿‡å…¨å±€å˜é‡pxCurrentTCBæ‰¾åˆ°è¯¥ä»»åŠ¡TCBï¼Œå†æ“ä½œè¯¥TCBçš„<strong>çŠ¶æ€</strong>åˆ—è¡¨é¡¹</p>
</li>
<li><p>å½“ä»»åŠ¡å»¶æ—¶æˆ–æŒ‚èµ·æ—¶ï¼ŒçŠ¶æ€åˆ—è¡¨é¡¹çš„åˆ—è¡¨é¡¹å€¼xItemValueä¼šç”¨äºå­˜æ”¾å”¤é†’ï¼ˆå»¶æ—¶ç»“æŸï¼‰çš„æ—¶é—´ï¼Œç”±äºåˆ—è¡¨æ’å…¥å‡½æ•°ä¼šè‡ªåŠ¨æ ¹æ®xItemValueçš„å€¼è¿›è¡Œæ’åºï¼Œ<strong>æ‰€ä»¥å”¤é†’æ—¶é—´è¶ŠçŸ­çš„åˆ—è¡¨é¡¹ä¼šè¶Šæ’åœ¨åˆ—è¡¨å‰é¢</strong></p>
</li>
<li><p>FreeRTOSä½¿ç”¨äº†ä¸¤ä¸ªå»¶æ—¶åˆ—è¡¨ï¼šxDelayedTaskList1å’ŒxDelayedTaskList2ï¼Œå¹¶ä½¿ç”¨ä¸¤ä¸ªåˆ—è¡¨æŒ‡é’ˆç±»å‹å˜é‡pxDelayedTaskListå’ŒpxOverflowDelayedTaskListåˆ†åˆ«æŒ‡å‘ä¸Šé¢çš„å»¶æ—¶åˆ—è¡¨1å’Œå»¶æ—¶åˆ—è¡¨2</p>
<p>pxOverflowDelayedTaskListç”¨äºè§£å†³è®¡æ—¶æº¢å‡ºçš„é—®é¢˜ï¼š</p>
<p>tasks.cä¸­å®šä¹‰äº†å¾ˆå¤šå±€éƒ¨é™æ€å˜é‡ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå˜é‡xTickCountç”¨äºè®°å½•ç³»ç»ŸèŠ‚æ‹ä¸­æ–­æ¬¡æ•°ï¼ˆå¯ä»¥ç†è§£ä¸ºè®°å½•å½“å‰æ—¶é—´ï¼‰ï¼Œå½“xTicksToDelayè¾¾åˆ°4294967295åå†å¢åŠ ï¼Œå°±ä¼šæº¢å‡ºå˜æˆ0ã€‚ å¦‚æœå†…æ ¸åˆ¤æ–­å‡ºxTickCount+ xTicksToDelayæº¢å‡ºï¼Œå°±å°†å½“å‰ä»»åŠ¡æŒ‚æ¥åˆ°åˆ—è¡¨æŒ‡é’ˆpxOverflowDelayedTaskListæŒ‡å‘çš„åˆ—è¡¨ä¸­</p>
</li>
</ul>
<h2 id="ç›¸å¯¹å»¶æ—¶çš„ç¼ºç‚¹"><a href="#ç›¸å¯¹å»¶æ—¶çš„ç¼ºç‚¹" class="headerlink" title="ç›¸å¯¹å»¶æ—¶çš„ç¼ºç‚¹"></a>ç›¸å¯¹å»¶æ—¶çš„ç¼ºç‚¹</h2><p>ç”±äºç›¸å¯¹å»¶æ—¶æ˜¯åœ¨æ¯æ¬¡è°ƒç”¨vTaskDelayä¹‹åæ‰å¼€å¯å»¶æ—¶ï¼Œå¦‚æœè°ƒç”¨å»¶æ—¶çš„ä»»åŠ¡åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿä¸­æ–­ï¼Œé‚£é€šè¿‡ç›¸å¯¹å»¶æ—¶è¿›è¡Œçš„å‘¨æœŸä»»åŠ¡å°±ä¼šå› ä¸ºè¯¥ä¸­æ–­è€Œè¢«å½±å“å¯¼è‡´ä¸èƒ½å‘ç”Ÿä¸­æ–­ã€‚</p>
<p>å› æ­¤ï¼Œä¸ºäº†èƒ½æœ€å¤§ç¨‹åº¦çš„ä½¿ç›¸å¯¹å»¶æ—¶è¾¾åˆ°ç²¾å‡†çš„æ•ˆæœï¼Œæœ€å¥½å°†ä½¿ç”¨ç›¸å¯¹å»¶æ—¶çš„ä»»åŠ¡ä¼˜å…ˆçº§è®¾ç½®ä¸ºæœ€é«˜</p>
<h1 id="ç»å¯¹å»¶æ—¶"><a href="#ç»å¯¹å»¶æ—¶" class="headerlink" title="ç»å¯¹å»¶æ—¶"></a>ç»å¯¹å»¶æ—¶</h1><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°å</th>
<th style="text-align:center">å‚æ•°</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">vTaskDelayUntil( TickType_t * const pxPreviousWakeTime, <br>                   const TickType_t xTimeIncrement )</td>
<td style="text-align:center">ä¸Šä¸€æ¬¡è®°å½•çš„æ—¶é—´ï¼›<br>å‘¨æœŸå¾ªç¯æ—¶é—´</td>
<td style="text-align:center">æ— </td>
</tr>
</tbody>
</table>
</div>
<h2 id="å‡½æ•°ä½“-1"><a href="#å‡½æ•°ä½“-1" class="headerlink" title="å‡½æ•°ä½“"></a>å‡½æ•°ä½“</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTaskDelayUntil</span><span class="params">( TickType_t * <span class="type">const</span> pxPreviousWakeTime, <span class="type">const</span> TickType_t xTimeIncrement )</span></span><br><span class="line">&#123;</span><br><span class="line">TickType_t xTimeToWake;</span><br><span class="line">BaseType_t xAlreadyYielded, xShouldDelay = pdFALSE;</span><br><span class="line"> </span><br><span class="line">    vTaskSuspendAll();</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* ä¿å­˜ç³»ç»ŸèŠ‚æ‹ä¸­æ–­æ¬¡æ•°è®¡æ•°å™¨ */</span></span><br><span class="line">        <span class="type">const</span> TickType_t xConstTickCount = xTickCount;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* è®¡ç®—ä»»åŠ¡ä¸‹æ¬¡å”¤é†’æ—¶é—´(ä»¥ç³»ç»ŸèŠ‚æ‹ä¸­æ–­æ¬¡æ•°è¡¨ç¤º)   */</span></span><br><span class="line">        xTimeToWake = *pxPreviousWakeTime + xTimeIncrement;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* *pxPreviousWakeTimeä¸­ä¿å­˜çš„æ˜¯ä¸Šæ¬¡å”¤é†’æ—¶é—´,å”¤é†’åéœ€è¦ä¸€å®šæ—¶é—´æ‰§è¡Œä»»åŠ¡ä¸»ä½“ä»£ç ,å¦‚æœä¸Šæ¬¡å”¤é†’æ—¶é—´å¤§äºå½“å‰æ—¶é—´,è¯´æ˜èŠ‚æ‹è®¡æ•°å™¨æº¢å‡ºäº† */</span></span><br><span class="line">        <span class="keyword">if</span>( xConstTickCount &lt; *pxPreviousWakeTime )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/*åªæœ‰å½“å‘¨æœŸæ€§å»¶æ—¶æ—¶é—´å¤§äºä»»åŠ¡ä¸»ä½“ä»£ç æ‰§è¡Œæ—¶é—´,æ‰ä¼šå°†ä»»åŠ¡æŒ‚æ¥åˆ°å»¶æ—¶åˆ—è¡¨.*/</span></span><br><span class="line">            <span class="keyword">if</span>( ( xTimeToWake &lt; *pxPreviousWakeTime ) &amp;&amp; ( xTimeToWake &gt; xConstTickCount ) )</span><br><span class="line">            &#123;</span><br><span class="line">                xShouldDelay = pdTRUE;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* ä¹Ÿéƒ½æ˜¯ä¿è¯å‘¨æœŸæ€§å»¶æ—¶æ—¶é—´å¤§äºä»»åŠ¡ä¸»ä½“ä»£ç æ‰§è¡Œæ—¶é—´ */</span></span><br><span class="line">            <span class="keyword">if</span>( ( xTimeToWake &lt; *pxPreviousWakeTime ) || ( xTimeToWake &gt; xConstTickCount ) )</span><br><span class="line">            &#123;</span><br><span class="line">                xShouldDelay = pdTRUE;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* æ›´æ–°å”¤é†’æ—¶é—´,ä¸ºä¸‹ä¸€æ¬¡è°ƒç”¨æœ¬å‡½æ•°åšå‡†å¤‡. */</span></span><br><span class="line">        *pxPreviousWakeTime = xTimeToWake;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span>( xShouldDelay != pdFALSE )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* å°†æœ¬ä»»åŠ¡åŠ å…¥å»¶æ—¶åˆ—è¡¨,æ³¨æ„é˜»å¡æ—¶é—´å¹¶ä¸æ˜¯ä»¥å½“å‰æ—¶é—´ä¸ºå‚è€ƒ,å› æ­¤å‡å»äº†å½“å‰ç³»ç»ŸèŠ‚æ‹ä¸­æ–­è®¡æ•°å™¨å€¼*/</span></span><br><span class="line">            prvAddCurrentTaskToDelayedList( xTimeToWake - xConstTickCount, pdFALSE );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xAlreadyYielded = xTaskResumeAll();</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* å¼ºåˆ¶æ‰§è¡Œä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ */</span></span><br><span class="line">    <span class="keyword">if</span>( xAlreadyYielded == pdFALSE )</span><br><span class="line">    &#123;</span><br><span class="line">        portYIELD_WITHIN_API();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†™æ³•å’ŒåŸºæœ¬æ€è·¯å’Œç›¸å¯¹å»¶æ—¶åŒºåˆ«ä¸å¤§ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ã€‚ç»å¯¹å»¶æ—¶ä¹‹æ‰€ä»¥å«ç»å¯¹å»¶æ—¶ï¼Œ<strong>æ˜¯å› ä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°pxPreviousWakeTimeé™¤å¼€ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶éœ€è·å–å½“å‰ç³»ç»Ÿæ—¶é—´å¤–ï¼Œæ¯æ¬¡è°ƒç”¨ç»å¯¹å»¶æ—¶å‡½æ•°æ—¶pxPreviousWakeTimeå†…ä¿å­˜çš„å€¼ä¸ºä¸Šä¸€æ¬¡è°ƒç”¨æ—¶è®¡ç®—å‡ºçš„å”¤é†’æ—¶é—´</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç»å¯¹å»¶æ—¶çš„<strong>æ¯ä¸€æ¬¡å»¶æ—¶çš„èµ·ç‚¹éƒ½æ˜¯ä¸Šä¸€æ¬¡å»¶æ—¶çš„ç»ˆç‚¹</strong>ï¼Œè¿™ä¹Ÿå°±ä¿è¯äº†ä»»åŠ¡ä¸»ä½“å³ä½¿è¢«ä¸­æ–­ä¹Ÿä¸ä¼šå½±å“åˆ°ä¸‹ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡ä¸»ä½“ï¼ˆå‰ææ˜¯ä»»åŠ¡ä¸»ä½“+ä¸­æ–­æ‰§è¡Œçš„æ—¶é—´å°äºå»¶æ—¶é•¿åº¦ï¼Œå¦‚æœè¶…è¿‡å»¶æ—¶æ—¶é—´ï¼Œéœ€è¦é‡æ–°è·å–pxPreviousWakeTimeä¸ºå½“å‰ç³»ç»Ÿçš„æœ€æ–°æ—¶é—´ï¼‰</p>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>FreeRTOSçš„ä»»åŠ¡åˆ›å»ºåˆ†æ</title>
    <url>/2022/12/12/FreeRTOS%E7%9A%84%E4%BB%BB%E5%8A%A1%E5%88%9B%E5%BB%BA%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<p>æœ¬æ–‡çš„å­¦ä¹ å‚è€ƒäº†<a href="https://freertos.blog.csdn.net/article/details/51303639">FreeRTOSé«˜çº§ç¯‡2â€”-FreeRTOSä»»åŠ¡åˆ›å»ºåˆ†æ_ç ”ç©¶æ˜¯ä¸ºäº†ç†è§£çš„åšå®¢-CSDNåšå®¢_</a></p>
<h1 id="ä»»åŠ¡TCBåˆ†æ"><a href="#ä»»åŠ¡TCBåˆ†æ" class="headerlink" title="ä»»åŠ¡TCBåˆ†æ"></a>ä»»åŠ¡TCBåˆ†æ</h1><p>åœ¨<a href="https://dhkkk.gitee.io/2022/12/09/åŸºäºFreeRTOSçš„åˆ—è¡¨å­¦ä¹ /">åŸºäºFreeRTOSçš„åˆ—è¡¨å­¦ä¹  | å°è‘£çš„BLOG (gitee.io)</a>ä¸­å¯¹åˆ—è¡¨é¡¹åˆ†ææ—¶ï¼Œåœ¨åˆ—è¡¨é¡¹çš„ç»“æ„ä¸­æœ‰ä¸€ä¸ªæ— ç±»å‹æŒ‡é’ˆï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> * pvOwner;                                     <span class="comment">/*æŒ‡å‘ä¸€ä¸ªä»»åŠ¡TCB*/</span></span><br></pre></td></tr></table></figure>
<p>è¯¥æŒ‡é’ˆç”¨äºæŒ‡å‘ä»»åŠ¡çš„TCBï¼ˆTask Control Blockï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥ç»“æ„ä½œä¸ºä¸€ä¸ªç”¨äºæ§åˆ¶ä»»åŠ¡çš„é›†åˆã€‚å®ƒç”¨äºå­˜å‚¨ä»»åŠ¡çš„çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»»åŠ¡è¿è¡Œæ—¶çš„ç¯å¢ƒã€‚<strong>æ¯ä¸ªä»»åŠ¡éƒ½æœ‰è‡ªå·±çš„ä»»åŠ¡TCBã€‚</strong></p>
<h2 id="ç»“æ„è§£è¯»"><a href="#ç»“æ„è§£è¯»" class="headerlink" title="ç»“æ„è§£è¯»"></a>ç»“æ„è§£è¯»</h2><p>å¯ä»¥åœ¨task.cä¸­æ‰¾åˆ°å®šä¹‰TCBçš„ç»“æ„ä½“ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tskTaskControlBlock</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">volatile</span> StackType_t	*pxTopOfStack;		<span class="comment">//æ ˆé¡¶æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( portUSING_MPU_WRAPPERS == 1 )		<span class="comment">//æ˜¯å¦ä½¿ç”¨MPU</span></span></span><br><span class="line">		xMPU_SETTINGS	xMPUSettings;		</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	ListItem_t			xStateListItem;	<span class="comment">//çŠ¶æ€åˆ—è¡¨é¡¹</span></span><br><span class="line">	ListItem_t			xEventListItem;	<span class="comment">//äº‹ä»¶åˆ—è¡¨é¡¹	</span></span><br><span class="line">	UBaseType_t			uxPriority;			<span class="comment">//ä¼˜å…ˆçº§</span></span><br><span class="line">	StackType_t			*pxStack;			<span class="comment">//æŒ‡å‘å †æ ˆèµ·å§‹ä½ç½®</span></span><br><span class="line">	<span class="type">char</span>				pcTaskName[ configMAX_TASK_NAME_LEN ];		<span class="comment">//ä»»åŠ¡åå­—æœ€å¤§é•¿åº¦</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( portSTACK_GROWTH &gt; 0 )		<span class="comment">//åˆ¤æ–­å †æ ˆç”Ÿé•¿æ–¹å‘,&gt;0ä¸ºå‘ä¸Šç”Ÿé•¿</span></span></span><br><span class="line">		StackType_t		*pxEndOfStack;		 <span class="comment">//éœ€è¦é¢å¤–çš„ä¸€ä¸ªæŒ‡é’ˆæ¥åˆ¤æ–­å †æ ˆæ˜¯å¦æº¢å‡º</span></span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( portCRITICAL_NESTING_IN_TCB == 1 )</span></span><br><span class="line">		UBaseType_t		uxCriticalNesting;	</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( configUSE_TRACE_FACILITY == 1 )</span></span><br><span class="line">		UBaseType_t		uxTCBNumber;		<span class="comment">//ä¸€ä¸ªæ•°å€¼ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å€¼</span></span><br><span class="line">		UBaseType_t		uxTaskNumber;		<span class="comment">//å­˜å‚¨ä¸€ä¸ªç‰¹å®šæ•°å€¼</span></span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( configUSE_MUTEXES == 1 )	<span class="comment">//æ˜¯å¦ä½¿ç”¨äº’æ–¥é‡</span></span></span><br><span class="line">		UBaseType_t		uxBasePriority;		<span class="comment">//ç”¨äºä¿å­˜ä»»åŠ¡çš„åŸºç¡€çš„åŸºç¡€ä¼˜å…ˆçº§</span></span><br><span class="line">		UBaseType_t		uxMutexesHeld;</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( configUSE_APPLICATION_TASK_TAG == 1 )</span></span><br><span class="line">		TaskHookFunction_t pxTaskTag;</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span>( configNUM_THREAD_LOCAL_STORAGE_POINTERS &gt; 0 )</span></span><br><span class="line">		<span class="type">void</span> *pvThreadLocalStoragePointers[ configNUM_THREAD_LOCAL_STORAGE_POINTERS ];</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span>( configGENERATE_RUN_TIME_STATS == 1 )</span></span><br><span class="line">		<span class="type">uint32_t</span>		ulRunTimeCounter;		<span class="comment">//è®°å½•ä»»åŠ¡åœ¨è¿è¡ŒçŠ¶æ€ä¸‹æ‰§è¡Œçš„æ€»æ—¶é—´</span></span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span> ( configUSE_NEWLIB_REENTRANT == 1 )</span></span><br><span class="line">    <span class="comment">/* ä¸ºä»»åŠ¡åˆ†é…ä¸€ä¸ªNewlibreentç»“æ„ä½“å˜é‡ã€‚Newlibæ˜¯ä¸€ä¸ªCåº“å‡½æ•°ï¼Œå¹¶éFreeRTOSç»´æŠ¤ï¼ŒFreeRTOSä¹Ÿä¸å¯¹ä½¿ç”¨ç»“æœè´Ÿè´£ã€‚å¦‚æœç”¨æˆ·ä½¿ç”¨Newlibï¼Œå¿…é¡»ç†ŸçŸ¥Newlibçš„ç»†èŠ‚*/</span></span><br><span class="line">		<span class="class"><span class="keyword">struct</span>	_<span class="title">reent</span> <span class="title">xNewLib_reent</span>;</span></span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span>( configUSE_TASK_NOTIFICATIONS == 1 ) 		<span class="comment">//ä¸ä»»åŠ¡é€šçŸ¥ç›¸å…³</span></span></span><br><span class="line">		<span class="keyword">volatile</span> <span class="type">uint32_t</span> ulNotifiedValue;</span><br><span class="line">		<span class="keyword">volatile</span> <span class="type">uint8_t</span> ucNotifyState;</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span>( tskSTATIC_AND_DYNAMIC_ALLOCATION_POSSIBLE != 0 )</span></span><br><span class="line">		<span class="type">uint8_t</span>	ucStaticallyAllocated; 		</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="meta">#<span class="keyword">if</span>( INCLUDE_xTaskAbortDelay == 1 )</span></span><br><span class="line">		<span class="type">uint8_t</span> ucDelayAborted;</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">&#125; tskTCB;</span><br><span class="line"><span class="keyword">typedef</span> tskTCB TCB_t;</span><br></pre></td></tr></table></figure>
<h3 id="çŠ¶æ€åˆ—è¡¨é¡¹ä¸äº‹ä»¶åˆ—è¡¨é¡¹"><a href="#çŠ¶æ€åˆ—è¡¨é¡¹ä¸äº‹ä»¶åˆ—è¡¨é¡¹" class="headerlink" title="çŠ¶æ€åˆ—è¡¨é¡¹ä¸äº‹ä»¶åˆ—è¡¨é¡¹"></a>çŠ¶æ€åˆ—è¡¨é¡¹ä¸äº‹ä»¶åˆ—è¡¨é¡¹</h3><p>ä»TCBçš„ç»“æ„ä¸­å¯ä»¥å‘ç°ä¸¤ä¸ªå®šä¹‰çš„åˆ—è¡¨é¡¹ï¼Œåˆ†åˆ«æ˜¯<strong>çŠ¶æ€åˆ—è¡¨é¡¹å’Œäº‹ä»¶åˆ—è¡¨é¡¹</strong>ï¼Œåœ¨ä¸Šä¸€ç« ä¹Ÿç•¥å¾®æåˆ°è¿‡ï¼Œåˆ—è¡¨ä¸åˆ—è¡¨é¡¹ç”¨äºè°ƒåº¦ä»»åŠ¡ã€è·Ÿè¸ªä»»åŠ¡çŠ¶æ€ã€‚ä¾‹å¦‚ï¼šåœ¨task.cä¸­ï¼Œå®šä¹‰äº†ä¸€äº›é™æ€åˆ—è¡¨å˜é‡ï¼Œå…¶ä¸­æœ‰å°±ç»ªã€é˜»å¡ã€æŒ‚èµ·åˆ—è¡¨ï¼Œä¾‹å¦‚å½“æŸä¸ªä»»åŠ¡å¤„äºå°±ç»ªæ€æ—¶ï¼Œè°ƒåº¦å™¨å°±å°†è¿™ä¸ªä»»åŠ¡TCBçš„<strong>çŠ¶æ€åˆ—è¡¨é¡¹</strong>æŒ‚æ¥åˆ°å°±ç»ªåˆ—è¡¨ã€‚äº‹ä»¶åˆ—è¡¨é¡¹ä¹Ÿä¸ä¹‹ç±»ä¼¼ï¼Œå½“é˜Ÿåˆ—æ»¡çš„æƒ…å†µä¸‹ï¼Œä»»åŠ¡å› å…¥é˜Ÿæ“ä½œè€Œé˜»å¡æ—¶ï¼Œå°±ä¼šå°†<strong>äº‹ä»¶åˆ—è¡¨é¡¹</strong>æŒ‚æ¥åˆ°é˜Ÿåˆ—çš„ç­‰å¾…å…¥é˜Ÿåˆ—è¡¨ä¸Šã€‚å…·ä½“å®ç°æ–¹æ³•å’Œè§„åˆ™ä¼šåœ¨ä¹‹åå­¦ä¹ ä»»åŠ¡è°ƒåº¦æ—¶è®²åˆ°ã€‚</p>
<h3 id="uxTCBNumberä¸uxTaskNumber"><a href="#uxTCBNumberä¸uxTaskNumber" class="headerlink" title="uxTCBNumberä¸uxTaskNumber"></a>uxTCBNumberä¸uxTaskNumber</h3><p>è¿™ä¸¤ä¸ªå˜é‡ä¸»è¦ç”¨äºè°ƒè¯•ä¸å¯è§†åŒ–è¿½è¸ªã€‚ä»…å½“å®configUSE_TRACE_FACILITYï¼ˆä½äºFreeRTOSConfig.hä¸­ï¼‰ä¸º1æ—¶æœ‰æ•ˆã€‚å˜é‡uxTCBNumberåœ¨åˆ›å»ºä»»åŠ¡æ—¶<strong>ç”±å†…æ ¸è‡ªåŠ¨åˆ†é…</strong>ï¼Œæ¯ä¸ªä»»åŠ¡å¯¹åº”ä¸€ä¸ªå€¼ï¼Œ<strong>åç»­ä¸å†æ”¹å˜</strong>ã€‚å˜é‡uxTaskNumberç”±<strong>APIå‡½æ•°vTaskSetTaskNumber()æ¥è®¾ç½®çš„</strong>ï¼Œæ•°å€¼ç”±å‡½æ•°å‚æ•°æŒ‡å®šã€‚</p>
<p>å…¶å®šä¹‰åœ¨task.cä¸­å¦‚ä¸‹ï¼Œå‚æ•°ä¸ºå¯¹åº”ä»»åŠ¡çš„å¼•ç”¨å¥æŸ„å’Œè¦è®¾ç½®çš„æ•°å€¼</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTaskSetTaskNumber</span><span class="params">( TaskHandle_t xTask, <span class="type">const</span> UBaseType_t uxHandle )</span></span><br><span class="line">&#123;</span><br><span class="line">	TCB_t *pxTCB;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>( xTask != <span class="literal">NULL</span> )</span><br><span class="line">		&#123;</span><br><span class="line">			pxTCB = ( TCB_t * ) xTask;</span><br><span class="line">			pxTCB-&gt;uxTaskNumber = uxHandle;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä»»åŠ¡åˆ›å»ºçš„å†…éƒ¨æµç¨‹"><a href="#ä»»åŠ¡åˆ›å»ºçš„å†…éƒ¨æµç¨‹" class="headerlink" title="ä»»åŠ¡åˆ›å»ºçš„å†…éƒ¨æµç¨‹"></a>ä»»åŠ¡åˆ›å»ºçš„å†…éƒ¨æµç¨‹</h1><p>å‡è®¾å½“å‰åˆ›å»ºäº†ä¸€ä¸ªä»»åŠ¡å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> TaskHandle_t xHandleï¼›</span><br><span class="line">xTaskCreate(vTask_A,â€Task Aâ€,<span class="number">120</span>,<span class="literal">NULL</span>,<span class="number">1</span>,&amp;xHandle);</span><br></pre></td></tr></table></figure>
<p>å½“è¿™ä¸ªè¯­å¥æ‰§è¡Œåï¼Œä»»åŠ¡Aè¢«åˆ›å»ºå¹¶åŠ å…¥å°±ç»ªä»»åŠ¡åˆ—è¡¨ï¼Œæˆ‘ä»¬è¿™ç« çš„ä¸»è¦ç›®çš„ï¼Œå°±æ˜¯çœ‹çœ‹è¿™ä¸ªè¯­å¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ã€‚</p>
<h2 id="1ã€åˆ›å»ºä»»åŠ¡å †æ ˆå’ŒTCBæ‰€ç”¨ç©ºé—´"><a href="#1ã€åˆ›å»ºä»»åŠ¡å †æ ˆå’ŒTCBæ‰€ç”¨ç©ºé—´" class="headerlink" title="1ã€åˆ›å»ºä»»åŠ¡å †æ ˆå’ŒTCBæ‰€ç”¨ç©ºé—´"></a>1ã€åˆ›å»ºä»»åŠ¡å †æ ˆå’ŒTCBæ‰€ç”¨ç©ºé—´</h2><p>æ³¨ï¼šåŸåšå®¢ä¸­ä¹Ÿå°±æ˜¯æ¥ä¸‹æ¥è®²åˆ°çš„å‡½æ•°åœ¨æˆ‘ä½¿ç”¨çš„åŸºäºSTM32çš„FreeRTOSä¸­å¹¶ä¸å­˜åœ¨ï¼Œä½†æ˜¯å¯ä»¥åœ¨å¯¹xTaskCreateçš„å®šä¹‰ä¸‹æ‰¾åˆ°åŸºæœ¬ç±»ä¼¼çš„æ“ä½œï¼ˆå¯èƒ½æ˜¯ç‰ˆæœ¬åŸå› ï¼‰<strong>ï¼Œä¸è¿‡å…¶å¹¶ä¸æ˜¯ç”¨å‡½æ•°å°è£…çš„ï¼Œä½†æ˜¯åŠŸèƒ½åŸºæœ¬ä¸€è‡´</strong>ã€‚ä¸ºäº†æ–¹ä¾¿å­¦ä¹ å°±ä½¿ç”¨åŸåšå®¢ä¸­çš„å‡½æ•°æ¥ç†è§£ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> TCB_t *<span class="title function_">prvAllocateTCBAndStack</span><span class="params">( <span class="type">const</span> <span class="type">uint16_t</span> usStackDepth, StackType_t * <span class="type">const</span> puxStackBuffer, TCB_t * <span class="type">const</span> pxTaskBuffer )</span></span><br><span class="line">&#123;</span><br><span class="line">TCB_t *pxNewTCB;</span><br><span class="line">StackType_t *pxStack;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* åˆ†é…å †æ ˆç©ºé—´*/</span></span><br><span class="line">    pxStack = ( StackType_t * ) pvPortMallocAligned( ( ( ( <span class="type">size_t</span> ) usStackDepth ) * <span class="keyword">sizeof</span>( StackType_t ) ), puxStackBuffer );</span><br><span class="line">    <span class="keyword">if</span>( pxStack != <span class="literal">NULL</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* åˆ†é…TCBç©ºé—´ */</span></span><br><span class="line">        pxNewTCB = ( TCB_t * ) pvPortMallocAligned( <span class="keyword">sizeof</span>( TCB_t ), pxTaskBuffer );</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span>( pxNewTCB != <span class="literal">NULL</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* å°†å †æ ˆèµ·å§‹ä½ç½®å­˜å…¥TCB*/</span></span><br><span class="line">            pxNewTCB-&gt;pxStack = pxStack;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* å¦‚æœTCBåˆ†é…å¤±è´¥ï¼Œé‡Šæ”¾ä¹‹å‰ç”³è¯·çš„å †æ ˆç©ºé—´ */</span></span><br><span class="line">            <span class="keyword">if</span>( puxStackBuffer == <span class="literal">NULL</span> )</span><br><span class="line">            &#123;</span><br><span class="line">                vPortFree( pxStack );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        pxNewTCB = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>( pxNewTCB != <span class="literal">NULL</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* å¦‚æœéœ€è¦ï¼Œä½¿ç”¨å›ºå®šå€¼å¡«å……å †æ ˆ */</span></span><br><span class="line">        <span class="meta">#<span class="keyword">if</span>( ( configCHECK_FOR_STACK_OVERFLOW&gt; 1 ) || ( configUSE_TRACE_FACILITY == 1 ) || ( INCLUDE_uxTaskGetStackHighWaterMark== 1 ) )</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* ä»…ç”¨äºè°ƒè¯• */</span></span><br><span class="line">            ( <span class="type">void</span> ) <span class="built_in">memset</span>( pxNewTCB-&gt;pxStack, ( <span class="type">int</span> ) tskSTACK_FILL_BYTE, ( <span class="type">size_t</span> ) usStackDepth * <span class="keyword">sizeof</span>( StackType_t ) );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> pxNewTCB;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸºæœ¬å°±æ˜¯ä¸€äº›åˆ†é…å†…å­˜çš„é€»è¾‘ä¸æ“ä½œï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ã€‚</p>
<h2 id="2ã€åˆå§‹åŒ–TCBå¿…è¦çš„å­—æ®µ"><a href="#2ã€åˆå§‹åŒ–TCBå¿…è¦çš„å­—æ®µ" class="headerlink" title="2ã€åˆå§‹åŒ–TCBå¿…è¦çš„å­—æ®µ"></a>2ã€åˆå§‹åŒ–TCBå¿…è¦çš„å­—æ®µ</h2><p>è¿™äº›æ“ä½œåœ¨æˆ‘çš„ç‰ˆæœ¬ä¸­éƒ½æ˜¯ç”¨é¢„ç¼–è¯‘åˆ¤æ–­æ‰§è¡Œçš„ï¼Œæ²¡æœ‰ä½¿ç”¨å‡½æ•°å°è£…ï¼Œè¦æ‰¾åˆ°å¯¹åº”æ“ä½œå®åœ¨æ˜¯æœ‰ç‚¹çœ¼èŠ±ï¼Œå§‘ä¸”çœ‹åˆ°å¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯åœ¨task.cä¸­å¯¹xTaskCreateçš„å®šä¹‰çš„åé¢ï¼Œè¿™é‡Œä¸ºäº†<strong>æ–¹ä¾¿ç†è§£</strong>è¿˜æ˜¯ä½¿ç”¨åŸåšä¸»çš„å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">prvInitialiseTCBVariables</span><span class="params">( </span></span><br><span class="line"><span class="params">TCB_t * <span class="type">const</span> pxTCB,</span></span><br><span class="line"><span class="params"><span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> pcName, </span></span><br><span class="line"><span class="params">UBaseType_t uxPriority,   </span></span><br><span class="line"><span class="params"><span class="type">const</span> MemoryRegion_t * <span class="type">const</span> xRegions, </span></span><br><span class="line"><span class="params"><span class="type">const</span> <span class="type">uint16_t</span> usStackDepth </span></span><br><span class="line"><span class="params">)</span></span><br><span class="line">&#123;</span><br><span class="line">	UBaseType_t x;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* å°†ä»»åŠ¡æè¿°å­˜å…¥TCB */</span></span><br><span class="line">    <span class="keyword">for</span>( x = ( UBaseType_t ) <span class="number">0</span>; x &lt; ( UBaseType_t ) configMAX_TASK_NAME_LEN; x++ )</span><br><span class="line">    &#123;</span><br><span class="line">        pxTCB-&gt;pcTaskName[ x ] = pcName[ x ];</span><br><span class="line">        <span class="keyword">if</span>( pcName[ x ] == <span class="number">0x00</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* ç¡®ä¿å­—ç¬¦ä¸²æœ‰ç»“æŸ */</span></span><br><span class="line">    pxTCB-&gt;pcTaskName[ configMAX_TASK_NAME_LEN - <span class="number">1</span> ] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* è°ƒæ•´ä¼˜å…ˆçº§ï¼Œå®configMAX_PRIORITIESçš„å€¼åœ¨FreeRTOSConfig.hä¸­è®¾ç½® */</span></span><br><span class="line">    <span class="keyword">if</span>( uxPriority &gt;= ( UBaseType_t ) configMAX_PRIORITIES )</span><br><span class="line">    &#123;</span><br><span class="line">        uxPriority = ( UBaseType_t ) configMAX_PRIORITIES - ( UBaseType_t ) <span class="number">1U</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    pxTCB-&gt;uxPriority = uxPriority;</span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( configUSE_MUTEXES == 1 )              <span class="comment">/*ä½¿ç”¨äº’æ–¥é‡*/</span></span></span><br><span class="line">    &#123;  </span><br><span class="line">        pxTCB-&gt;uxBasePriority = uxPriority;</span><br><span class="line">        pxTCB-&gt;uxMutexesHeld = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span> <span class="comment">/* configUSE_MUTEXES */</span></span></span><br><span class="line">   </span><br><span class="line">    <span class="comment">/*åˆå§‹åŒ–åˆ—è¡¨é¡¹*/</span></span><br><span class="line">    vListInitialiseItem( &amp;( pxTCB-&gt;xStateListItem ) );</span><br><span class="line">    vListInitialiseItem( &amp;( pxTCB-&gt;xEventListItem ) );</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* è®¾ç½®åˆ—è¡¨é¡¹xStateListItemçš„æˆå‘˜pvOwneræŒ‡å‘å½“å‰ä»»åŠ¡æ§åˆ¶å— */</span></span><br><span class="line">    listSET_LIST_ITEM_OWNER( &amp;( pxTCB-&gt;xStateListItem ), pxTCB );</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* è®¾ç½®åˆ—è¡¨é¡¹xEventListItemçš„æˆå‘˜xItemValue*/</span></span><br><span class="line">    listSET_LIST_ITEM_VALUE( &amp;( pxTCB-&gt;xEventListItem ), ( TickType_t ) configMAX_PRIORITIES - ( TickType_t ) uxPriority );</span><br><span class="line">    <span class="comment">/* è®¾ç½®åˆ—è¡¨é¡¹xEventListItemçš„æˆå‘˜pvOwneræŒ‡å‘å½“å‰ä»»åŠ¡æ§åˆ¶å— */</span></span><br><span class="line">    listSET_LIST_ITEM_OWNER( &amp;( pxTCB-&gt;xEventListItem ), pxTCB );</span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( portCRITICAL_NESTING_IN_TCB ==1 )    <span class="comment">/*ä½¿èƒ½ä¸´ç•ŒåŒºåµŒå¥—åŠŸèƒ½*/</span></span></span><br><span class="line">    &#123;  </span><br><span class="line">        pxTCB-&gt;uxCriticalNesting = ( UBaseType_t ) <span class="number">0U</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span> <span class="comment">/* portCRITICAL_NESTING_IN_TCB */</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( configUSE_APPLICATION_TASK_TAG == 1 ) <span class="comment">/*ä½¿èƒ½ä»»åŠ¡æ ‡ç­¾åŠŸèƒ½*/</span></span></span><br><span class="line">    &#123;  </span><br><span class="line">        pxTCB-&gt;pxTaskTag = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span> <span class="comment">/* configUSE_APPLICATION_TASK_TAG */</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( configGENERATE_RUN_TIME_STATS == 1 )  <span class="comment">/*ä½¿èƒ½äº‹ä»¶ç»Ÿè®¡åŠŸèƒ½*/</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        pxTCB-&gt;ulRunTimeCounter = <span class="number">0UL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span> <span class="comment">/* configGENERATE_RUN_TIME_STATS */</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( portUSING_MPU_WRAPPERS == 1 )         <span class="comment">/*ä½¿ç”¨MPUåŠŸèƒ½*/</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        vPortStoreTaskMPUSettings( &amp;( pxTCB-&gt;xMPUSettings ), xRegions, pxTCB-&gt;pxStack, usStackDepth );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">else</span> <span class="comment">/* portUSING_MPU_WRAPPERS */</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        ( <span class="type">void</span> ) xRegions;</span><br><span class="line">        ( <span class="type">void</span> ) usStackDepth;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span> <span class="comment">/* portUSING_MPU_WRAPPERS */</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span>( configNUM_THREAD_LOCAL_STORAGE_POINTERS != 0 )<span class="comment">/*ä½¿èƒ½çº¿ç¨‹æœ¬åœ°å­˜å‚¨æŒ‡é’ˆ*/</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>( x = <span class="number">0</span>; x &lt; ( UBaseType_t )configNUM_THREAD_LOCAL_STORAGE_POINTERS; x++ )</span><br><span class="line">        &#123;</span><br><span class="line">            pxTCB-&gt;pvThreadLocalStoragePointers[ x ] = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( configUSE_TASK_NOTIFICATIONS == 1 )   <span class="comment">/*ä½¿èƒ½ä»»åŠ¡é€šçŸ¥åŠŸèƒ½*/</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        pxTCB-&gt;ulNotifiedValue = <span class="number">0</span>;</span><br><span class="line">        pxTCB-&gt;ucNotifyState = taskNOT_WAITING_NOTIFICATION;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( configUSE_NEWLIB_REENTRANT == 1 )     <span class="comment">/*ä½¿ç”¨Newlib*/</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        _REENT_INIT_PTR( ( &amp;( pxTCB-&gt;xNewLib_reent ) ) );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span>( INCLUDE_xTaskAbortDelay == 1 )</span></span><br><span class="line">    &#123;</span><br><span class="line">        pxTCB-&gt;ucDelayAborted = pdFALSE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å¤§éƒ¨åˆ†ä¹Ÿå°±æ˜¯å¯¹åº”TCBç»“æ„ä½“ä¸­å„ä¸ªæˆå‘˜çš„åˆå§‹åŒ–ï¼Œå…¶ä¸­æœ‰å‡ ç‚¹éœ€è¦ç€é‡è®²ä¸€ä¸‹ï¼š</p>
<h3 id="å¯¹ä¸¤ä¸ªåˆ—è¡¨é¡¹çš„åˆå§‹åŒ–ï¼š"><a href="#å¯¹ä¸¤ä¸ªåˆ—è¡¨é¡¹çš„åˆå§‹åŒ–ï¼š" class="headerlink" title="å¯¹ä¸¤ä¸ªåˆ—è¡¨é¡¹çš„åˆå§‹åŒ–ï¼š"></a>å¯¹ä¸¤ä¸ªåˆ—è¡¨é¡¹çš„åˆå§‹åŒ–ï¼š</h3><ul>
<li><p>å¯¹çŠ¶æ€åˆ—è¡¨é¡¹çš„åˆå§‹åŒ–</p>
<p>ä½¿æˆå‘˜pvOwneræŒ‡å‘å¯¹åº”çš„ä»»åŠ¡TCBï¼Œå…¶ä½™æˆå‘˜ä¸å¯¹å…¶æ“ä½œ</p>
</li>
<li><p><strong>å¯¹äº‹ä»¶åˆ—è¡¨é¡¹çš„åˆå§‹åŒ–</strong></p>
<p>ä¹‹å‰è®²åˆ°è¿‡äº‹ä»¶åˆ—è¡¨é¡¹å€¼ä¼šå­˜å‚¨ä»»åŠ¡çš„ä¼˜å…ˆçº§ç›¸å…³ä¿¡æ¯ï¼Œå…¶å­˜å‚¨æ–¹å¼æ¯”è¾ƒç‰¹åˆ«ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* è®¾ç½®åˆ—è¡¨é¡¹xEventListItemçš„æˆå‘˜xItemValue*/</span></span><br><span class="line">listSET_LIST_ITEM_VALUE( </span><br><span class="line">&amp;( pxTCB-&gt;xEventListItem ), </span><br><span class="line">( TickType_t ) configMAX_PRIORITIES - ( TickType_t ) uxPriority );</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶åˆ—è¡¨é¡¹çš„xItemValueä¸­å­˜å‚¨çš„å€¼ä¸º<strong><u>ç”¨æˆ·è®¾ç½®çš„æœ€å¤§ä¼˜å…ˆçº§-å½“å‰ä»»åŠ¡çš„ä¼˜å…ˆçº§</u></strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒItemValueçš„å€¼è¶Šå°ï¼Œå½“å‰ä»»åŠ¡çš„ä¼˜å…ˆçº§<strong>è¶Šé«˜</strong></p>
<p>å†å›æƒ³ä¸€ä¸‹åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨çš„å‡½æ•°vListInsert()ï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/12/FreeRTOS%E7%9A%84%E4%BB%BB%E5%8A%A1%E5%88%9B%E5%BB%BA%E5%88%86%E6%9E%90/15.jpg" class title="This is an image"> 
<p>å¯ä»¥å‘ç°xItemValueè¶Šå°çš„å€¼è¶Šæ˜¯æ’åœ¨åˆ—è¡¨çš„å‰é¢ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†è¿™æ ·åšçš„åŸå› ï¼Œ<strong>å…¶å®ä¹Ÿå°±æ˜¯ä¼˜å…ˆçº§è¶Šé«˜çš„ä»»åŠ¡è¶Šåœ¨åˆ—è¡¨å‰é¢</strong></p>
</li>
</ul>
<h3 id="ä»»åŠ¡é€šçŸ¥"><a href="#ä»»åŠ¡é€šçŸ¥" class="headerlink" title="ä»»åŠ¡é€šçŸ¥"></a>ä»»åŠ¡é€šçŸ¥</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> ( configUSE_TASK_NOTIFICATIONS == 1 )   <span class="comment">/*ä½¿èƒ½ä»»åŠ¡é€šçŸ¥åŠŸèƒ½*/</span></span></span><br><span class="line">&#123;</span><br><span class="line">    pxTCB-&gt;ulNotifiedValue = <span class="number">0</span>;</span><br><span class="line">    pxTCB-&gt;ucNotifyState = taskNOT_WAITING_NOTIFICATION;</span><br></pre></td></tr></table></figure>
<p>åœ¨<a href="https://dhkkk.gitee.io/2022/08/30/freertosä»»åŠ¡é€šçŸ¥ä¸ä¿¡å·é‡/">FreeRTOSä»»åŠ¡é—´çš„äº¤äº’æ–¹æ³• | å°è‘£çš„BLOG (gitee.io)</a>ä¸­å°†ä»»åŠ¡é€šçŸ¥çš„æµç¨‹æ—¶ä¹Ÿä½¿ç”¨åˆ°äº†ä½¿ç”¨è¯¥å€¼çš„å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">BaseType_t <span class="title function_">xTaskNotifyWait</span><span class="params">( uint32_tulBits ToClearOnEntry,</span></span><br><span class="line"><span class="params">									 uint32_tulBits ToClearOnExit,</span></span><br><span class="line"><span class="params">									 <span class="type">uint32_t</span>* pulNotificationValue,</span></span><br><span class="line"><span class="params">									 TickType_t xTicksToWait )</span>;</span><br></pre></td></tr></table></figure>
<p>å…¶å®pulNotificationValueå°±æ˜¯æ‹·è´è‡ªTCBä¸­çš„ulNotifiedValueå€¼ï¼Œè¯¥å€¼åœ¨ä»»åŠ¡é€šçŸ¥å‘é€å‡½æ•°å°†ulValueçš„å€¼æ‹·è´è¿›ulNotifiedValueï¼Œåœ¨æ¥æ”¶æ—¶ç”¨æˆ·å¯ä»¥é€šè¿‡pulNotificationValueåˆ¤æ–­ä»»åŠ¡é€šçŸ¥å‘é€çš„å€¼ã€‚åœ¨åˆå§‹åŒ–æ—¶ï¼Œå…¶ä¸º0ï¼Œå› æ­¤å‘é€çš„ä»»åŠ¡å€¼ä¸èƒ½ä¸º0</p>
<h2 id="3ã€åˆå§‹åŒ–ä»»åŠ¡å †æ ˆ"><a href="#3ã€åˆå§‹åŒ–ä»»åŠ¡å †æ ˆ" class="headerlink" title="3ã€åˆå§‹åŒ–ä»»åŠ¡å †æ ˆ"></a>3ã€åˆå§‹åŒ–ä»»åŠ¡å †æ ˆ</h2><p>è°ƒç”¨å‡½æ•°pxPortInitialiseStack()åˆå§‹åŒ–ä»»åŠ¡å †æ ˆï¼Œå¹¶å°†æœ€æ–°çš„æ ˆé¡¶æŒ‡é’ˆèµ‹å€¼ç»™ä»»åŠ¡TCBçš„pxTopOfStackå­—æ®µã€‚</p>
<p>å…·ä½“ä¸å¯„å­˜å™¨çš„è°ƒç”¨æœ‰å…³ï¼Œç›®å‰ä¸æ·±è¯»ã€‚</p>
<h2 id="4ã€è¿›å…¥ä¸´ç•ŒåŒº"><a href="#4ã€è¿›å…¥ä¸´ç•ŒåŒº" class="headerlink" title="4ã€è¿›å…¥ä¸´ç•ŒåŒº"></a>4ã€è¿›å…¥ä¸´ç•ŒåŒº</h2><p> è°ƒç”¨taskENTER_CRITICAL()è¿›å…¥ä¸´ç•ŒåŒºï¼Œè¿›å…¥ä¸´ç•ŒåŒºåçš„ä»£ç æ®µå°†ä¸èƒ½è¢«æ‰“æ–­ï¼Œæ¯”å¦‚æœ‰çš„å¤–è®¾çš„åˆå§‹åŒ–éœ€è¦ä¸¥æ ¼çš„æ—¶åºï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸èƒ½è¢«æ‰“æ–­ã€‚FreeRTOS åœ¨è¿›å…¥ä¸´ç•ŒåŒºä»£ç çš„æ—¶å€™éœ€è¦å…³é—­ä¸­æ–­ï¼Œå½“å¤„ç†å®Œä¸´ç•ŒåŒºä»£ç ä»¥åå†æ‰“å¼€ä¸­æ–­ã€‚</p>
<p>FreeRTOS ä¸ ä¸´ç•ŒåŒºä»£ ç  ä¿ æŠ¤ æœ‰ å…³ çš„ å‡½ æ•° æœ‰ 4 ä¸ª ï¼š taskENTER_CRITICAL() ã€taskEXIT_CRITICAL() ã€taskENTER_CRITICAL_FROM_ISR() å’ŒtaskEXIT_CRITICAL_FROM_ISR()ï¼Œè¿™å››ä¸ªå‡½æ•°å…¶å®æ˜¯å®å®šä¹‰ï¼Œåœ¨ task.h æ–‡ä»¶ä¸­æœ‰å®šä¹‰ã€‚ è¿™å››ä¸ªå‡½æ•°çš„åŒºåˆ«æ˜¯<strong>å‰ä¸¤ä¸ªæ˜¯ä»»åŠ¡çº§çš„</strong>ä¸´ç•Œæ®µä»£ç ä¿æŠ¤ï¼Œ<strong>åä¸¤ä¸ªæ˜¯ä¸­æ–­çº§</strong>çš„ä¸´ç•Œæ®µä»£ç ä¿æŠ¤ã€‚</p>
<h2 id="5ã€æ”¹å˜è·Ÿè¸ªä»»åŠ¡çš„å˜é‡"><a href="#5ã€æ”¹å˜è·Ÿè¸ªä»»åŠ¡çš„å˜é‡" class="headerlink" title="5ã€æ”¹å˜è·Ÿè¸ªä»»åŠ¡çš„å˜é‡"></a>5ã€æ”¹å˜è·Ÿè¸ªä»»åŠ¡çš„å˜é‡</h2><p>åœ¨task.cä¸­å®šä¹‰äº†ä¸€äº›é™æ€ç§æœ‰å˜é‡ç”¨äºè·Ÿè¸ªä»»åŠ¡çš„æ•°é‡ã€çŠ¶æ€ç­‰ä¿¡æ¯ï¼Œæ¯å½“æœ‰ä»»åŠ¡å‘ç”Ÿå˜åŒ–æ—¶è¿™äº›å¯¹åº”çš„å˜é‡ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<p>å…¶ä¸­å˜é‡uxCurrentNumberOfTasksè¡¨ç¤ºå½“å‰ä»»åŠ¡çš„æ€»æ•°é‡ï¼Œæ¯åˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œè¿™ä¸ªå˜é‡éƒ½ä¼šå¢åŠ 1ã€‚</p>
<h2 id="6ã€ç¬¬ä¸€æ¬¡è¿è¡Œçš„å¿…è¦åˆå§‹åŒ–"><a href="#6ã€ç¬¬ä¸€æ¬¡è¿è¡Œçš„å¿…è¦åˆå§‹åŒ–" class="headerlink" title="6ã€ç¬¬ä¸€æ¬¡è¿è¡Œçš„å¿…è¦åˆå§‹åŒ–"></a>6ã€ç¬¬ä¸€æ¬¡è¿è¡Œçš„å¿…è¦åˆå§‹åŒ–</h2><p>å¦‚æœå½“å‰åˆ›å»ºçš„ä»»åŠ¡ä¸ºç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œåˆ™ä¼šè°ƒç”¨å‡½æ•°prvInitialiseTaskLists()å¯¹åˆ—è¡¨è¿›è¡Œ<strong>åˆå§‹åŒ–</strong>ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œtask.cä¸­å®šä¹‰äº†è¿™äº›é™æ€ç±»å‹çš„åˆ—è¡¨å˜é‡ï¼š(List_tç±»å‹å˜é‡åœ¨ä¸Šä¸€ç« å·²ç»è®²è¿‡)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PRIVILEGED_DATAstatic List_t pxReadyTasksLists[ configMAX_PRIORITIES ];<span class="comment">/*æŒ‰ç…§ä¼˜å…ˆçº§æ’åºçš„å°±ç»ªæ€ä»»åŠ¡*/</span></span><br><span class="line">PRIVILEGED_DATAstatic List_t xDelayedTaskList1;                    <span class="comment">/*å»¶æ—¶çš„ä»»åŠ¡ */</span></span><br><span class="line">PRIVILEGED_DATAstatic List_t xDelayedTaskList2;                    <span class="comment">/*å»¶æ—¶çš„ä»»åŠ¡ */</span></span><br><span class="line">PRIVILEGED_DATAstatic List_t xPendingReadyList;             <span class="comment">/*ä»»åŠ¡å·²å°±ç»ª,ä½†è°ƒåº¦å™¨è¢«æŒ‚èµ· */</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (INCLUDE_vTaskDelete == 1 )</span></span><br><span class="line">    PRIVILEGED_DATA <span class="type">static</span> List_t xTasksWaitingTermination;<span class="comment">/*ä»»åŠ¡å·²ç»è¢«åˆ é™¤,ä½†å†…å­˜å°šæœªé‡Šæ”¾*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (INCLUDE_vTaskSuspend == 1 )</span></span><br><span class="line">    PRIVILEGED_DATA <span class="type">static</span> List_t xSuspendedTaskList;            <span class="comment">/*å½“å‰æŒ‚èµ·çš„ä»»åŠ¡*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">prvInitialiseTaskLists</span><span class="params">( <span class="type">void</span> )</span></span><br><span class="line">&#123;</span><br><span class="line">UBaseType_tuxPriority;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span>( uxPriority = ( UBaseType_t ) <span class="number">0U</span>; uxPriority &lt; ( UBaseType_t ) configMAX_PRIORITIES; uxPriority++ )</span><br><span class="line">    &#123;</span><br><span class="line">        vListInitialise( &amp;( pxReadyTasksLists[ uxPriority ] ) );</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    vListInitialise( &amp;xDelayedTaskList1 );</span><br><span class="line">    vListInitialise( &amp;xDelayedTaskList2 );</span><br><span class="line">    vListInitialise( &amp;xPendingReadyList );</span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( INCLUDE_vTaskDelete == 1 )</span></span><br><span class="line">    &#123;</span><br><span class="line">        vListInitialise( &amp;xTasksWaitingTermination );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span> <span class="comment">/* INCLUDE_vTaskDelete */</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> ( INCLUDE_vTaskSuspend == 1 )</span></span><br><span class="line">    &#123;</span><br><span class="line">        vListInitialise( &amp;xSuspendedTaskList );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span> <span class="comment">/* INCLUDE_vTaskSuspend */</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* Start with pxDelayedTaskList using list1 and the pxOverflowDelayedTaskListusing list2. */</span></span><br><span class="line">    pxDelayedTaskList = &amp;xDelayedTaskList1;</span><br><span class="line">    pxOverflowDelayedTaskList = &amp;xDelayedTaskList2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ä¸»è¦è°ƒç”¨çš„å‡½æ•°vListInitialise()åœ¨è®²åˆ—è¡¨æ—¶å·²ç»è®²è¿‡ï¼Œå…¶ä½œç”¨å°±æ˜¯åˆå§‹åŒ–åˆ—è¡¨æˆå‘˜çš„ä¸€äº›æŒ‡é’ˆçš„åˆå§‹æŒ‡å‘ï¼Œä¸ºåç»­æ¥å…¥åˆ—è¡¨é¡¹åšå‡†å¤‡ã€‚</p>
<h2 id="7ã€æ›´æ–°ä»»åŠ¡TCBæŒ‡é’ˆ"><a href="#7ã€æ›´æ–°ä»»åŠ¡TCBæŒ‡é’ˆ" class="headerlink" title="7ã€æ›´æ–°ä»»åŠ¡TCBæŒ‡é’ˆ"></a>7ã€æ›´æ–°ä»»åŠ¡TCBæŒ‡é’ˆ</h2><p>tasks.cä¸­å®šä¹‰äº†ä¸€ä¸ªä»»åŠ¡TCBæŒ‡é’ˆå‹å˜é‡ï¼š</p>
<ul>
<li><p>PRIVILEGED_DATA TCB_t * volatile pxCurrentTCB= NULL;</p>
<p>è¿™æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨tasks.cä¸­åªå®šä¹‰äº†è¿™ä¸€ä¸ªå…¨å±€å˜é‡ã€‚è¿™ä¸ªå˜é‡ç”¨æ¥æŒ‡å‘å½“å‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡TCBã€‚</p>
</li>
</ul>
<p>å½“è°ƒåº¦å™¨è¿˜æ²¡æœ‰å¼€å¯æ—¶ï¼ˆç¨‹åºåˆšå¼€å§‹è¿è¡Œæ—¶ï¼Œå¯èƒ½ä¼šå…ˆåˆ›å»ºå‡ ä¸ªä»»åŠ¡ï¼Œä¹‹åæ‰ä¼šå¯åŠ¨è°ƒåº¦å™¨ï¼‰ï¼Œå¦‚æœæ–°åˆ›å»ºçš„ä»»åŠ¡ä¼˜å…ˆçº§å¤§äºpxCurrentTCBæŒ‡å‘çš„ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œåˆ™è®¾ç½®pxCurrentTCBæŒ‡å‘å½“å‰æ–°åˆ›å»ºçš„ä»»åŠ¡TCBã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>( xSchedulerRunning == pdFALSE )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>( pxCurrentTCB-&gt;uxPriority &lt;= uxPriority )</span><br><span class="line">    &#123;</span><br><span class="line">        pxCurrentTCB = pxNewTCB;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        mtCOVERAGE_TEST_MARKER();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é¡¹æ“ä½œå¯ä»¥<strong>ç¡®ä¿pxCurrentTCBå§‹ç»ˆæŒ‡å‘ä¼˜å…ˆçº§æœ€é«˜çš„å°±ç»ªä»»åŠ¡ã€‚</strong></p>
<h2 id="8ã€å°†æ–°åˆ›å»ºçš„ä»»åŠ¡åŠ å…¥å°±ç»ªåˆ—è¡¨æ•°ç»„"><a href="#8ã€å°†æ–°åˆ›å»ºçš„ä»»åŠ¡åŠ å…¥å°±ç»ªåˆ—è¡¨æ•°ç»„" class="headerlink" title="8ã€å°†æ–°åˆ›å»ºçš„ä»»åŠ¡åŠ å…¥å°±ç»ªåˆ—è¡¨æ•°ç»„"></a>8ã€å°†æ–°åˆ›å»ºçš„ä»»åŠ¡åŠ å…¥å°±ç»ªåˆ—è¡¨æ•°ç»„</h2><p>æ–°åˆ›å»ºçš„ä»»åŠ¡ä¼šè¢«ç›´æ¥åŠ å…¥åˆ°å°±ç»ªåˆ—è¡¨ä¸­ï¼Œå› ä¸ºå®ƒä¸ä¼šä¸€è¢«åˆ›å»ºå°±è¢«é˜»å¡æˆ–æŒ‚èµ·ã€‚è§‚å¯Ÿåœ¨task.cä¸­å®šä¹‰çš„å‡ ä¸ªé™æ€ç±»å‹çš„åˆ—è¡¨å¯ä»¥å‘ç°å°±ç»ªåˆ—è¡¨æ˜¯ä¸€ä¸ªç»“æ„ä½“æ•°ç»„ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PRIVILEGED_DATAstatic List_t pxReadyTasksLists[ configMAX_PRIORITIES ];</span><br><span class="line"><span class="comment">/*æŒ‰ç…§ä¼˜å…ˆçº§æ’åºçš„å°±ç»ªæ€ä»»åŠ¡*/</span></span><br></pre></td></tr></table></figure>
<p>å› æ­¤å½“å‰æ–°åˆ›å»ºçš„ä»»åŠ¡ä¼šæ ¹æ®è¯¥ä»»åŠ¡TCBä¸­å­˜å‚¨çš„ä¼˜å…ˆçº§<strong>å†³å®šå­˜å…¥çš„åˆ—è¡¨ä¸‹æ ‡</strong>ã€‚æ¯”å¦‚æˆ‘ä»¬æ–°åˆ›å»ºçš„ä»»åŠ¡ä¼˜å…ˆçº§ä¸º1ï¼Œåˆ™è¿™ä¸ªä»»åŠ¡è¢«åŠ å…¥åˆ°åˆ—è¡¨pxReadyTasksLists[1]ä¸­ã€‚</p>
<p>å¹¶ä¸”ç”±äºåŒä¸€ä¸ªåˆ—è¡¨ä¸­ä»»åŠ¡çš„ä¼˜å…ˆçº§æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤æ¯æ¬¡åŠ å…¥åˆ—è¡¨æ—¶ä¼šç›´æ¥å°†å½“å‰ä»»åŠ¡æ”¾å…¥åˆ—è¡¨å°¾ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> prvAddTaskToReadyList( pxTCB )                        </span></span><br><span class="line">    taskRECORD_READY_PRIORITY( ( pxTCB)-&gt;uxPriority );       </span><br><span class="line">    vListInsertEnd( &amp;( pxReadyTasksLists[ (pxTCB )-&gt;uxPriority ] ), </span><br><span class="line">                    &amp;( ( pxTCB )-&gt;xStateListItem ) );</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ä¸€ä¸ªå®å°†ä»»åŠ¡æ”¾å…¥åˆ—è¡¨ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒåŠ å…¥åˆ—è¡¨çš„ä¸ºä»»åŠ¡çš„<strong>çŠ¶æ€åˆ—è¡¨é¡¹</strong>ï¼Œä½†æœ€ç»ˆè°ƒç”¨å®çš„<strong>å‚æ•°ç›´æ¥æ˜¯ä»»åŠ¡TCB</strong>ï¼Œå› æ­¤å¯èƒ½ç”¨æˆ·ä¸ç”¨å…³å¿ƒä½•æ—¶æ“ä½œçŠ¶æ€åˆ—è¡¨é¡¹ï¼Œä½•æ—¶æ“ä½œäº‹ä»¶åˆ—è¡¨é¡¹ï¼Ÿï¼ˆæˆ‘çš„çŒœæµ‹ï¼Œå› ä¸ºç›®å‰è¿˜ä¸å¤ªæ¸…æ¥šäºŒè€…çš„æ˜æ˜¾åŒºåˆ«ï¼‰</p>
<h2 id="9ã€é€€å‡ºä¸´ç•ŒåŒº"><a href="#9ã€é€€å‡ºä¸´ç•ŒåŒº" class="headerlink" title="9ã€é€€å‡ºä¸´ç•ŒåŒº"></a>9ã€é€€å‡ºä¸´ç•ŒåŒº</h2><p>åˆ°æ­¤ï¼Œä¸€ä¸ªä»»åŠ¡çš„åˆ›å»ºåŸºæœ¬ç»“æŸï¼Œä¹Ÿå°±å¯ä»¥é€€å‡ºä¸´ç•ŒåŒºäº†ï¼ˆæœ¬èº«è¿›å…¥ä¸´ç•ŒåŒºçš„åŸå› å°±æ˜¯è®©ä»»åŠ¡çš„åˆ›å»ºè¿‡ç¨‹ä¸è¢«æ‰“æ–­ï¼‰</p>
<h2 id="10ã€æ–°ä»»åŠ¡è¿›å…¥è°ƒåº¦"><a href="#10ã€æ–°ä»»åŠ¡è¿›å…¥è°ƒåº¦" class="headerlink" title="10ã€æ–°ä»»åŠ¡è¿›å…¥è°ƒåº¦"></a>10ã€æ–°ä»»åŠ¡è¿›å…¥è°ƒåº¦</h2><p>å¦‚æœè°ƒåº¦å™¨å·²å¼€å¯ï¼Œæ–°ä»»åŠ¡ä¾¿ä¼šæ ¹æ®å…¶ä¼˜å…ˆçº§ç”±è°ƒåº¦å™¨è¿›è¡Œç›¸å…³è°ƒåº¦ã€‚</p>
<h1 id="ä»»åŠ¡åˆ›å»ºè¿‡ç¨‹æ€»ç»“"><a href="#ä»»åŠ¡åˆ›å»ºè¿‡ç¨‹æ€»ç»“" class="headerlink" title="ä»»åŠ¡åˆ›å»ºè¿‡ç¨‹æ€»ç»“"></a>ä»»åŠ¡åˆ›å»ºè¿‡ç¨‹æ€»ç»“</h1><ul>
<li>ä¸ºå½“å‰ä»»åŠ¡<strong>åˆ†é…å†…å­˜</strong>åˆ›å»ºå †æ ˆï¼Œä¸ºä»»åŠ¡TCBåˆ›å»ºç©ºé—´</li>
<li><strong>åˆå§‹åŒ–TCB</strong>ï¼Œä¸»è¦æ˜¯ä½¿TCBæˆå‘˜ä¸­çš„ä¸¤ä¸ªåˆ—è¡¨é¡¹æŒ‡å‘å½“å‰TCBå’Œæ”¹å˜<strong>äº‹ä»¶åˆ—è¡¨é¡¹çš„åˆ—è¡¨é¡¹å€¼</strong></li>
<li><strong>åˆå§‹åŒ–</strong>ä»»åŠ¡çš„<strong>å †æ ˆ</strong></li>
<li><strong><em>è¿›å…¥ä¸´ç•ŒåŒºï¼Œä¹‹åçš„è¿›ç¨‹ä¸èƒ½è¢«æ‰“æ–­</em></strong></li>
<li>æ”¹å˜ä¸€äº›å­˜å‚¨ä»»åŠ¡ä¿¡æ¯çš„<strong>å˜é‡</strong>ï¼ˆä¸»è¦æ˜¯å…¨å±€çš„ä¿¡æ¯ï¼Œå¹¶ä¸æ˜¯æŒ‡æŸä¸€ä¸ªä»»åŠ¡çš„ä¿¡æ¯ã€‚æ¯”å¦‚ä»»åŠ¡çš„æ€»æ•°é‡ç­‰ï¼‰</li>
<li>å¦‚æœå½“å‰ä¸ºç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œåˆ™<strong>åˆå§‹åŒ–å„åˆ—è¡¨</strong></li>
<li><strong>æ›´æ–°</strong>å½“å‰çš„ä»»åŠ¡TCBæŒ‡é’ˆï¼ˆè¯¥æŒ‡é’ˆä¸“ç”¨äºæŒ‡å‘å½“å‰TCBï¼‰</li>
<li>å°†æ–°ä»»åŠ¡åŠ å…¥å°±ç»ªåˆ—è¡¨æ•°ç»„ä¸­ï¼Œ<strong>æ ¹æ®ä¼˜å…ˆçº§å†³å®šåŠ å…¥çš„æ•°ç»„ä¸‹æ ‡</strong></li>
<li><strong><em>é€€å‡ºä¸´ç•ŒåŒº</em></strong></li>
<li>æ–°ä»»åŠ¡ä¹ŸåŠ å…¥è°ƒåº¦è¿‡ç¨‹ä¸­</li>
</ul>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºFreeRTOSçš„åˆ—è¡¨å­¦ä¹ </title>
    <url>/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p><em>æœ¬æ–‡å‚è€ƒäº†<a href="https://freertos.blog.csdn.net/article/details/51190095">FreeRTOSé«˜çº§ç¯‡1â€”-FreeRTOSåˆ—è¡¨å’Œåˆ—è¡¨é¡¹ç ”ç©¶æ˜¯ä¸ºäº†ç†è§£çš„åšå®¢-CSDNåšå®¢freertos list</a>è¿›è¡Œå­¦ä¹ </em></p>
<h1 id="åˆ—è¡¨ä¸åˆ—è¡¨é¡¹"><a href="#åˆ—è¡¨ä¸åˆ—è¡¨é¡¹" class="headerlink" title="åˆ—è¡¨ä¸åˆ—è¡¨é¡¹"></a>åˆ—è¡¨ä¸åˆ—è¡¨é¡¹</h1><p>FreeRTOSå†…æ ¸ä¸ºäº†è°ƒåº¦ä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œå¤§é‡åœ°ä½¿ç”¨äº†åˆ—è¡¨å’Œåˆ—è¡¨é¡¹çš„æ•°æ®ç»“æœæ¥è·Ÿè¸ªä»»åŠ¡å½“å‰çš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œå¤„äºæŒ‚èµ·ã€å»¶æ—¶ã€å°±ç»ªçš„ä»»åŠ¡éƒ½ä¼šè¢«æŒ‚æ¥<strong>åˆ°å„è‡ªçš„åˆ—è¡¨ä¸­</strong></p>
<p>FreeRTOSä¸­ä½¿ç”¨æŒ‡é’ˆå®ç°åˆ—è¡¨çš„åŠŸèƒ½ï¼Œç±»ä¼¼äºé“¾å¼åˆ—è¡¨ã€‚<strong>ä¸€ä¸ªåˆ—è¡¨ä¸‹æœ‰å¤šä¸ªåˆ—è¡¨é¡¹</strong>ï¼Œä¸”æ¯ä¸ªåˆ—è¡¨é¡¹ä¸­éƒ½æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘åˆ—è¡¨ã€‚</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/1.jpg" class title="This is an image"> 
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<u>åˆ—è¡¨</u>å’Œä¹‹å‰è®²åˆ°ä»»åŠ¡äº¤äº’æ—¶ä½¿ç”¨çš„<u>é˜Ÿåˆ—</u>æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼</strong></p>
<h1 id="FreeRTOSåˆ—è¡¨é¡¹çš„æ„æˆ"><a href="#FreeRTOSåˆ—è¡¨é¡¹çš„æ„æˆ" class="headerlink" title="FreeRTOSåˆ—è¡¨é¡¹çš„æ„æˆ"></a>FreeRTOSåˆ—è¡¨é¡¹çš„æ„æˆ</h1><h2 id="å…¨åŠŸèƒ½ç‰ˆåˆ—è¡¨é¡¹"><a href="#å…¨åŠŸèƒ½ç‰ˆåˆ—è¡¨é¡¹" class="headerlink" title="å…¨åŠŸèƒ½ç‰ˆåˆ—è¡¨é¡¹"></a>å…¨åŠŸèƒ½ç‰ˆåˆ—è¡¨é¡¹</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨list.hä¸­æ‰¾åˆ°freertoså¯¹åˆ—è¡¨é¡¹çš„å®šä¹‰</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">xLIST_ITEM</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">     listFIRST_LIST_ITEM_INTEGRITY_CHECK_VALUE           <span class="comment">/*ç”¨äºæ£€æµ‹åˆ—è¡¨é¡¹æ•°æ®æ˜¯å¦å®Œæ•´*/</span></span><br><span class="line">     configLIST_VOLATILE TickType_t xItemValue;           <span class="comment">/*åˆ—è¡¨é¡¹å€¼*/</span></span><br><span class="line">     <span class="class"><span class="keyword">struct</span> <span class="title">xLIST_ITEM</span> * <span class="title">configLIST_VOLATILE</span> <span class="title">pxNext</span>;</span>      <span class="comment">/*æŒ‡å‘åˆ—è¡¨ä¸­ä¸‹ä¸€ä¸ªåˆ—è¡¨é¡¹*/</span></span><br><span class="line">     <span class="class"><span class="keyword">struct</span> <span class="title">xLIST_ITEM</span> * <span class="title">configLIST_VOLATILE</span> <span class="title">pxPrevious</span>;</span>  <span class="comment">/*æŒ‡å‘åˆ—è¡¨ä¸­ä¸Šä¸€ä¸ªåˆ—è¡¨é¡¹*/</span></span><br><span class="line">     <span class="type">void</span> * pvOwner;                                     <span class="comment">/*æŒ‡å‘ä¸€ä¸ªä»»åŠ¡TCB*/</span></span><br><span class="line">     <span class="type">void</span> * configLIST_VOLATILE pvContainer;             <span class="comment">/*æŒ‡å‘åŒ…å«è¯¥åˆ—è¡¨é¡¹çš„åˆ—è¡¨ */</span></span><br><span class="line">     listSECOND_LIST_ITEM_INTEGRITY_CHECK_VALUE          <span class="comment">/*ç”¨äºæ£€æµ‹åˆ—è¡¨é¡¹æ•°æ®æ˜¯å¦å®Œæ•´*/</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">xLIST_ITEM</span> <span class="title">ListItem_t</span>;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>listFIRST_LIST_ITEM_INTEGRITY_CHECK_VALUE å’ŒlistSECOND_LIST_ITEM_INTEGRITY_CHECK_VALUE è¿™ä¸¤ä¸ªå®å®šä¹‰ç”¨äº<strong>æ£€æŸ¥åˆ—è¡¨é¡¹çš„æ•°æ®æ˜¯å¦å®Œæ•´</strong>ã€‚</p>
<p>å½“ä½¿èƒ½projdefs.hä¸­çš„å®configUSE_LIST_DATA_INTEGRITY_CHECK_BYTESæ—¶ï¼Œè¿™ä¸¤ä¸ªå®ä¼šè¢«æ›¿æ¢æˆä¸¤ä¸ªå·²çŸ¥çš„æ•°å€¼ç”¨äºæ£€æµ‹å®Œæ•´æ€§ã€‚</p>
</li>
<li><p>xItemValueä¸º<strong>åˆ—è¡¨é¡¹å€¼</strong>ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªè¢«è·Ÿè¸ªçš„ä»»åŠ¡ä¼˜å…ˆçº§æˆ–æ˜¯ä¸€ä¸ªè°ƒåº¦äº‹ä»¶çš„è®¡æ•°å™¨å€¼ã€‚</p>
<p>ä¾‹å¦‚åœ¨é˜Ÿåˆ—çš„ä½¿ç”¨ä¸­ï¼Œå¦‚æœä¸€ä¸ªä»»åŠ¡å› ä¸ºåœ¨ç­‰å¾…ä»é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®è€Œè¿›å…¥é˜»å¡æ€ï¼Œåˆ™è¯¥ä»»åŠ¡çš„<strong>äº‹ä»¶åˆ—è¡¨é¡¹ä¸­çš„åˆ—è¡¨é¡¹å€¼</strong>ä¼šç”¨äºä¿å­˜è¯¥ä»»åŠ¡çš„ä¼˜å…ˆçº§æœ‰å…³ä¿¡æ¯ï¼›è¯¥ä»»åŠ¡çš„<strong>çŠ¶æ€åˆ—è¡¨é¡¹çš„åˆ—è¡¨é¡¹å€¼</strong>ä¼šç”¨äºä¿å­˜é˜»å¡æ—¶é—´çš„æœ‰å…³ä¿¡æ¯ï¼ˆä¹‹å‰è®²è¿‡ï¼Œå½“æœ‰å¤šä¸ªä»»åŠ¡ç­‰å¾…è¯»å–é˜Ÿåˆ—æ—¶ï¼Œè¯»å–é¡ºåºä¸ä¼˜å…ˆçº§å’Œé˜»å¡æ—¶é—´ç›¸å…³ï¼‰ã€‚è‡³äºä»€ä¹ˆæ˜¯äº‹ä»¶åˆ—è¡¨é¡¹å’ŒçŠ¶æ€åˆ—è¡¨é¡¹ï¼Œä¹‹åçš„æ–‡ç« ä¼šè®²åˆ°ã€‚</p>
<p>ç”±äºåˆ—è¡¨é¡¹å€¼åº”æ˜¯éšæ—¶éƒ½å¯èƒ½æ›´æ–°çš„ï¼Œå› æ­¤è¯¥å˜é‡è¢«configLIST_VOLATILEä¿®é¥°ï¼Œ<strong>è¯¥å®è¢«æ˜ å°„ä¸ºCçš„å…³é”®å­—volatile</strong>ã€‚</p>
</li>
<li><p>pxNextå’ŒpxPreviousä¸ºä¸¤ä¸ªç»“æ„ä½“æŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘ä¸Šä¸‹åˆ—è¡¨é¡¹ï¼Œå®ç°ç±»ä¼¼äºåŒå‘é“¾è¡¨çš„ç»“æ„ï¼Œå¯¹ç»“æ„ä½“æŒ‡é’ˆè¿˜ä¸å¤ªæ‡‚çš„è¯å¯ä»¥å‚è€ƒ<a href="https://dhkkk.gitee.io/2022/11/18/æ•°æ®ç»“æ„-çº¿æ€§è¡¨/">æ•°æ®ç»“æ„_é“¾è¡¨ | å°è‘£çš„BLOG (gitee.io)</a>ä¸­çš„ä¸€äº›è§£é‡Šã€‚</p>
</li>
<li><p>pvOwnerç”¨äºæŒ‡å‘ä¸€ä¸ªä»»åŠ¡çš„TCBï¼ˆTask Control Blockï¼‰ï¼Œä¹‹åçš„æ–‡ç« ä¼šè®²åˆ°ã€‚</p>
</li>
<li><p>pvContainerç”¨äºæŒ‡å‘<strong>åŒ…å«è¯¥åˆ—è¡¨é¡¹çš„åˆ—è¡¨</strong>ã€‚</p>
</li>
</ul>
<h2 id="è¿·ä½ ç‰ˆåˆ—è¡¨é¡¹"><a href="#è¿·ä½ ç‰ˆåˆ—è¡¨é¡¹" class="headerlink" title="è¿·ä½ ç‰ˆåˆ—è¡¨é¡¹"></a>è¿·ä½ ç‰ˆåˆ—è¡¨é¡¹</h2><p>list.hä¸­è¿˜æœ‰ä¸€ä¸ªè¿·ä½ ç‰ˆåˆ—è¡¨é¡¹çš„å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">xMINI_LIST_ITEM</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	listFIRST_LIST_ITEM_INTEGRITY_CHECK_VALUE			<span class="comment">//æ£€æµ‹å®Œæ•´æ€§</span></span><br><span class="line">	configLIST_VOLATILE TickType_t xItemValue;	<span class="comment">//åˆ—è¡¨é¡¹å€¼</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">xLIST_ITEM</span> * <span class="title">configLIST_VOLATILE</span> <span class="title">pxNext</span>;</span>		<span class="comment">//æŒ‡å‘ä¸‹ä¸€åˆ—è¡¨é¡¹</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">xLIST_ITEM</span> * <span class="title">configLIST_VOLATILE</span> <span class="title">pxPrevious</span>;</span>	<span class="comment">//æŒ‡å‘å‰ä¸€åˆ—è¡¨é¡¹</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">xMINI_LIST_ITEM</span> <span class="title">MiniListItem_t</span>;</span></span><br></pre></td></tr></table></figure>
<p>è¿·ä½ ç‰ˆåˆ—è¡¨é¡¹çš„ä½œç”¨ä¸‹ä¸€èŠ‚è®²åˆ—è¡¨æ—¶ä¼šè®²åˆ°ã€‚</p>
<h2 id="åˆå§‹åŒ–åˆ—è¡¨é¡¹"><a href="#åˆå§‹åŒ–åˆ—è¡¨é¡¹" class="headerlink" title="åˆå§‹åŒ–åˆ—è¡¨é¡¹"></a>åˆå§‹åŒ–åˆ—è¡¨é¡¹</h2><p>  åˆ—è¡¨é¡¹çš„åˆå§‹æ¯”è¾ƒç®€å•ï¼Œåªè¦ç¡®ä¿åˆ—è¡¨é¡¹ä¸åœ¨ä»»ä½•åˆ—è¡¨ä¸­å³å¯ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vListInitialiseItem</span><span class="params">( ListItem_t * <span class="type">const</span> pxItem )</span></span><br><span class="line">&#123;</span><br><span class="line">     pxItem-&gt;pvContainer = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/*è®¾ç½®ä¸ºå·²çŸ¥å€¼ï¼Œç”¨äºæ£€æµ‹åˆ—è¡¨é¡¹æ•°æ®æ˜¯å¦å®Œæ•´*/</span></span><br><span class="line">     listSET_FIRST_LIST_ITEM_INTEGRITY_CHECK_VALUE(pxItem );</span><br><span class="line">     listSET_SECOND_LIST_ITEM_INTEGRITY_CHECK_VALUE(pxItem );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="FreeRTOSçš„åˆ—è¡¨æ„æˆ"><a href="#FreeRTOSçš„åˆ—è¡¨æ„æˆ" class="headerlink" title="FreeRTOSçš„åˆ—è¡¨æ„æˆ"></a>FreeRTOSçš„åˆ—è¡¨æ„æˆ</h1><h2 id="åˆ—è¡¨çš„å®šä¹‰"><a href="#åˆ—è¡¨çš„å®šä¹‰" class="headerlink" title="åˆ—è¡¨çš„å®šä¹‰"></a>åˆ—è¡¨çš„å®šä¹‰</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">xLIST</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	listFIRST_LIST_INTEGRITY_CHECK_VALUE				<span class="comment">//æ£€æµ‹å®Œæ•´æ€§</span></span><br><span class="line">	configLIST_VOLATILE UBaseType_t uxNumberOfItems;</span><br><span class="line">	ListItem_t * configLIST_VOLATILE pxIndex;			</span><br><span class="line">	MiniListItem_t xListEnd;							</span><br><span class="line">	listSECOND_LIST_INTEGRITY_CHECK_VALUE				<span class="comment">//æ£€æµ‹å®Œæ•´æ€§</span></span><br><span class="line">&#125; List_t;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>uxNumberOfItemsç”¨äºè¡¨ç¤ºè¯¥åˆ—è¡¨ä¸­æŒ‚æ¥çš„åˆ—è¡¨é¡¹æ•°ç›®ï¼Œ0è¡¨ç¤ºåˆ—è¡¨ä¸ºç©ºã€‚</p>
</li>
<li><p>pxIndexä¸ºä¸€ä¸ªç±»å‹ä¸ºå®Œå…¨ä½“åˆ—è¡¨é¡¹çš„ç»“æ„ä½“æŒ‡é’ˆï¼Œç”¨äº<strong>éå†åˆ—è¡¨é¡¹ã€‚</strong></p>
</li>
<li><p>åˆ—è¡¨é¡¹xListEndç”¨äºæ ‡è®°åˆ—è¡¨ç»“æŸï¼Œ<strong>å› ä¸ºè¯¥åˆ—è¡¨é¡¹åªç”¨äºæ ‡è®°åˆ—è¡¨çš„ç»“æŸï¼Œå› æ­¤ä¸éœ€è¦å®Œå…¨ä½“åˆ—è¡¨é¡¹çš„æ‰€æœ‰åŠŸèƒ½</strong>ï¼Œå› æ­¤ä½¿ç”¨äº†è¿·ä½ ç‰ˆåˆ—è¡¨é¡¹çš„ç±»å‹ã€‚</p>
<p>xListEnd.xItemValueè¢«<strong>åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¸¸æ•°</strong>ï¼Œå…¶å€¼ä¸ç¡¬ä»¶æ¶æ„ç›¸å…³ï¼Œä¸º0xFFFFï¼ˆ16ä½æ¶æ„ï¼‰æˆ–0xFFFFFFFFï¼ˆ32ä½æ¶æ„ï¼‰ã€‚</p>
</li>
</ul>
<h2 id="åˆ—è¡¨çš„åˆå§‹åŒ–"><a href="#åˆ—è¡¨çš„åˆå§‹åŒ–" class="headerlink" title="åˆ—è¡¨çš„åˆå§‹åŒ–"></a>åˆ—è¡¨çš„åˆå§‹åŒ–</h2><p>å¯ä»¥åœ¨list.cä¸­æ‰¾åˆ°åˆå§‹åŒ–å‡½æ•°vListInitialise()</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vListInitialise</span><span class="params">( List_t * <span class="type">const</span> pxList )</span></span><br><span class="line">&#123;</span><br><span class="line">     <span class="comment">/*åˆ—è¡¨ç´¢å¼•æŒ‡å‘åˆ—è¡¨é¡¹xListEnd*/</span></span><br><span class="line">     pxList-&gt;pxIndex = ( ListItem_t * )&amp;( pxList-&gt;xListEnd );                  </span><br><span class="line">     <span class="comment">/* è®¾ç½®ä¸ºæœ€å¤§å¯èƒ½å€¼ä¸º0xffff */</span></span><br><span class="line">     pxList-&gt;xListEnd.xItemValue =portMAX_DELAY;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/* åˆ—è¡¨é¡¹xListEndçš„pxNextå’ŒpxPreviousæŒ‡é’ˆæŒ‡å‘äº†å®ƒè‡ªå·± */</span></span><br><span class="line">     pxList-&gt;xListEnd.pxNext = (ListItem_t * ) &amp;( pxList-&gt;xListEnd );</span><br><span class="line">     pxList-&gt;xListEnd.pxPrevious= ( ListItem_t * ) &amp;( pxList-&gt;xListEnd );</span><br><span class="line">     pxList-&gt;uxNumberOfItems = ( UBaseType_t) <span class="number">0U</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/* è®¾ç½®ä¸ºå·²çŸ¥å€¼ï¼Œç”¨äºæ£€æµ‹åˆ—è¡¨æ•°æ®æ˜¯å¦å®Œæ•´*/</span></span><br><span class="line">     listSET_LIST_INTEGRITY_CHECK_1_VALUE(pxList );</span><br><span class="line">     listSET_LIST_INTEGRITY_CHECK_2_VALUE(pxList );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¦‚æœå®configUSE_LIST_DATA_INTEGRITY_CHECK_BYTESè®¾ç½®ä¸º1ï¼Œåˆ™ä½¿èƒ½åˆ—è¡¨é¡¹æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼Œåˆ™å®listSET_LIST_INTEGRITY_CHECK_1_VALUE()å’ŒlistSET_LIST_INTEGRITY_CHECK_2_VALUEè¢«ä¸€ä¸ªå·²çŸ¥å€¼ä»£æ›¿ï¼Œé»˜è®¤ä¸º0x5a5aï¼ˆ16ä½æ¶æ„ï¼‰æˆ–è€…0x5a5a5a5aï¼ˆ32ä½æ¶æ„ï¼‰ã€‚</p>
</li>
<li><p>æŒ‰ç…§ä¸Šè¿°åˆå§‹åŒ–åå°±åº”è¯¥æ˜¯ä¸‹å›¾çš„æƒ…å†µï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/2.jpg" class title="This is an image"> 
<p>æ­¤æ—¶pxIndexã€pxList-&gt;xListEnd.pxNextã€pxList-&gt;xListEnd.pxPreviouséƒ½æŒ‡å‘äº† pxList-&gt;xListEndï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯xListEndè¿™ä¸ªç»“æ„ä½“çš„é¦–å…ƒç´ ï¼‰</p>
</li>
</ul>
<h1 id="å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨ä¸­"><a href="#å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨ä¸­" class="headerlink" title="å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨ä¸­"></a>å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨ä¸­</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vListInsert</span><span class="params">( List_t * <span class="type">const</span> pxList, ListItem_t * <span class="type">const</span> pxNewListItem )</span></span><br><span class="line">&#123;</span><br><span class="line">ListItem_t *pxIterator;		<span class="comment">//å‡½æ•°å†…å®šä¹‰ä¸€ä¸ªåˆ—è¡¨é¡¹æŒ‡é’ˆï¼Œé€šè¿‡åˆ—è¡¨é¡¹å€¼çš„æ¯”è¾ƒï¼Œæ‰¾åˆ°å½“å‰è¾“å…¥åˆ—è¡¨é¡¹éœ€æ’å…¥çš„ä½ç½®</span></span><br><span class="line"><span class="type">const</span> TickType_t xValueOfInsertion = pxNewListItem-&gt;xItemValue;	<span class="comment">//å®šä¹‰ä¸€ä¸ªå˜é‡å­˜æ”¾å½“å‰è¾“å…¥åˆ—è¡¨é¡¹çš„åˆ—è¡¨é¡¹å€¼</span></span><br><span class="line"></span><br><span class="line">	listTEST_LIST_INTEGRITY( pxList );		<span class="comment">//æ£€æµ‹å®Œæ•´æ€§</span></span><br><span class="line">	listTEST_LIST_ITEM_INTEGRITY( pxNewListItem );		<span class="comment">//æ£€æµ‹å®Œæ•´æ€§</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/*å¼€å§‹ä¸ºè¾“å…¥åˆ—è¡¨é¡¹å¯»æ‰¾åˆé€‚çš„æ’å…¥ä½ç½®*/</span></span><br><span class="line">	<span class="keyword">if</span>( xValueOfInsertion == portMAX_DELAY )</span><br><span class="line">	&#123;</span><br><span class="line">		pxIterator = pxList-&gt;xListEnd.pxPrevious;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>( pxIterator = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd ); </span><br><span class="line">								  pxIterator-&gt;pxNext-&gt;xItemValue &lt;= xValueOfInsertion; </span><br><span class="line">								  pxIterator = pxIterator-&gt;pxNext ) </span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">/* There is nothing to do here, just iterating to the wanted</span></span><br><span class="line"><span class="comment">			insertion position. */</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">   <span class="comment">/******************************/</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">/*æ­¤æ—¶pxIteratorä¸ºå½“å‰pxNewListItemè¦æ’å…¥çš„ä½ç½®*/</span></span><br><span class="line">	pxNewListItem-&gt;pxNext = pxIterator-&gt;pxNext;</span><br><span class="line">	pxNewListItem-&gt;pxNext-&gt;pxPrevious = pxNewListItem;</span><br><span class="line">	pxNewListItem-&gt;pxPrevious = pxIterator;</span><br><span class="line">	pxIterator-&gt;pxNext = pxNewListItem;</span><br><span class="line">   </span><br><span class="line">	<span class="comment">/*å°†åˆ—è¡¨é¡¹æ¥å…¥åˆ—è¡¨ï¼Œåˆ—è¡¨é¡¹æ•°ç›®+1*/</span></span><br><span class="line">	pxNewListItem-&gt;pvContainer = ( <span class="type">void</span> * ) pxList;</span><br><span class="line">	( pxList-&gt;uxNumberOfItems )++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°ä¸­æ¯”è¾ƒéš¾ä»¥ç†è§£çš„åœ°æ–¹å°±æ˜¯å…³äºå¯»æ‰¾åˆ—è¡¨é¡¹æ’å…¥ä½ç½®çš„åˆ¤æ–­å’Œå¾ªç¯éƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥å°†ä¸€æ­¥ä¸€æ­¥è®²è§£ï¼š</p>
<h2 id="å½“åˆ—è¡¨å†…æ— åˆ—è¡¨é¡¹æ—¶ï¼ˆå½“å‰æ’å…¥çš„åˆ—è¡¨é¡¹ä¸ºç¬¬ä¸€ä¸ªåˆ—è¡¨é¡¹ï¼‰"><a href="#å½“åˆ—è¡¨å†…æ— åˆ—è¡¨é¡¹æ—¶ï¼ˆå½“å‰æ’å…¥çš„åˆ—è¡¨é¡¹ä¸ºç¬¬ä¸€ä¸ªåˆ—è¡¨é¡¹ï¼‰" class="headerlink" title="å½“åˆ—è¡¨å†…æ— åˆ—è¡¨é¡¹æ—¶ï¼ˆå½“å‰æ’å…¥çš„åˆ—è¡¨é¡¹ä¸ºç¬¬ä¸€ä¸ªåˆ—è¡¨é¡¹ï¼‰"></a>å½“åˆ—è¡¨å†…æ— åˆ—è¡¨é¡¹æ—¶ï¼ˆå½“å‰æ’å…¥çš„åˆ—è¡¨é¡¹ä¸ºç¬¬ä¸€ä¸ªåˆ—è¡¨é¡¹ï¼‰</h2><p>å‡è®¾è¯¥åˆ—è¡¨é¡¹å€¼ä¸º50</p>
<h3 id="ifåˆ¤æ–­"><a href="#ifåˆ¤æ–­" class="headerlink" title="ifåˆ¤æ–­"></a>ifåˆ¤æ–­</h3><p>ä¸æ»¡è¶³æ¡ä»¶ï¼Œè·³è¿‡</p>
<h3 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><ul>
<li><p>åˆå§‹åŒ–<code>pxIterator = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd );</code>åï¼Œæ­¤æ—¶æƒ…å†µä¸ºï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/3.jpg" class title="This is an image"> 
<p>æ­¤æ—¶pxIteratoræˆå‘˜ä¸pxList-&gt;xListEndçš„æˆå‘˜ä¸€ä¸€å¯¹åº”</p>
</li>
<li><p>æ¡ä»¶åˆ¤æ–­<code>pxIterator-&gt;pxNext-&gt;xItemValue &lt;= xValueOfInsertion;</code></p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼š<strong>åˆ—è¡¨åˆå§‹åŒ–æ—¶ï¼ŒxListEndçš„æˆå‘˜pxNextï¼ŒpxPreviousæ˜¯æŒ‡å‘xListEndçš„</strong></p>
<p>å› æ­¤pxIterator-&gt;pxNext-&gt;xItemValueçš„å€¼å°±æ˜¯0xFFFFï¼Œæ˜¯å¤§äº50çš„ï¼Œå› æ­¤ä¸æ»¡è¶³æ¡ä»¶ï¼Œè·³å‡ºå¾ªç¯</p>
</li>
</ul>
<h3 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><ul>
<li><p><strong>pxNewListItem-&gt;pxNext = pxIterator-&gt;pxNext;</strong></p>
<p>pxIterator-&gt;pxNextæŒ‡å‘pxList-&gt;xListEnd.pxnextï¼Œè€ŒpxList-&gt;xListEnd.pxnextåˆæŒ‡å‘æœ¬èº«xListEndï¼›å› æ­¤ï¼Œ<u><strong>æœ€ç»ˆpxNewListItem-&gt;pxNextæŒ‡å‘äº†pxList-&gt;xListEnd</strong></u></p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/4.jpg" class title="cysgbj"> 
</li>
<li><p><strong>pxNewListItem-&gt;pxNext-&gt;pxPrevious = pxNewListItem;</strong></p>
<p>ä¸Šä¸€æ­¥ä¸­pxNewListItem-&gt;pxNextæŒ‡å‘äº†pxList-&gt;xListEndï¼Œå› æ­¤pxNewListItem-&gt;pxNext-&gt;pxPreviousç­‰åŒäºpxList-&gt;xListEnd.pxPreviousï¼Œè€ŒpxList-&gt;xListEnd.pxPreviousä¹‹å‰æ˜¯æŒ‡å‘pxList-&gt;xListEndæœ¬èº«çš„ï¼Œå› æ­¤<u><strong>è¿™ä¸€æ­¥æœ€ç»ˆçš„ç»“æœç›¸å½“äºå°†pxList-&gt;xListEnd.pxPreviousæ”¹å˜æŒ‡å‘ï¼ŒæŒ‡å‘pxNewListItem</strong></u></p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/5.jpg" class title="cysgbj"> 
</li>
<li><p><strong>pxNewListItem-&gt;pxPrevious = pxIterator;</strong></p>
<p>ç”±äºpxIteratoræœ¬èº«å°±æ˜¯æŒ‡å‘pxList-&gt;xListEndçš„ï¼Œå› æ­¤è¿™ä¸€æ­¥ç›¸å½“äºï¼š</p>
<p><u><strong>pxNewListItem-&gt;pxPrevious = pxList-&gt;xListEnd</strong></u></p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/6.jpg" class title="cysgbj"> 
</li>
<li><p><strong>pxIterator-&gt;pxNext = pxNewListItem;</strong></p>
<p>pxIterator-&gt;pxNextæŒ‡å‘pxList-&gt;xListEnd.pxnextï¼Œæ­¤æ—¶pxList-&gt;xListEnd.pxnextæœ¬æ¥æ˜¯æŒ‡å‘è‡ªå·±ï¼ˆpxList-&gt;xListEndï¼‰çš„ï¼Œå› æ­¤è¿™ä¸€æ­¥æœ€ç»ˆæ˜¯ï¼š</p>
<p><strong><u>å°†pxList-&gt;xListEnd.pxnextæ”¹å˜æŒ‡å‘ï¼ŒæŒ‡å‘pxNewListItem</u></strong></p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/7.jpg" class title="cysgbj"> 
</li>
<li><p>ç»¼ä¸Šï¼Œæœ€ç»ˆçš„ç»“æœä¸ºï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/8.jpg" class title="cysgbj"> 
<p><em>ä¸Šå›¾çœç•¥äº†pvContainerå’ŒpxIndexçš„æŒ‡å‘å’ŒuxNumberOfItemsçš„å˜åŒ–</em></p>
</li>
</ul>
<h2 id="ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä¸”è¯¥åˆ—è¡¨é¡¹å€¼å¤§äºä¸Šä¸€ä¸ª"><a href="#ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä¸”è¯¥åˆ—è¡¨é¡¹å€¼å¤§äºä¸Šä¸€ä¸ª" class="headerlink" title="ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä¸”è¯¥åˆ—è¡¨é¡¹å€¼å¤§äºä¸Šä¸€ä¸ª"></a>ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä¸”è¯¥åˆ—è¡¨é¡¹å€¼å¤§äºä¸Šä¸€ä¸ª</h2><p>å‡è®¾ç¬¬äºŒä¸ªåˆ—è¡¨é¡¹å€¼ä¸º60ï¼ˆç¬¬ä¸€ä¸ªä¸º50ï¼‰</p>
<h3 id="ifåˆ¤æ–­-1"><a href="#ifåˆ¤æ–­-1" class="headerlink" title="ifåˆ¤æ–­"></a>ifåˆ¤æ–­</h3><p>ä¸æ»¡è¶³æ¡ä»¶ï¼Œè·³è¿‡</p>
<h3 id="forå¾ªç¯-1"><a href="#forå¾ªç¯-1" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><ul>
<li><p>åˆå§‹åŒ–<code>pxIterator = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd );</code>åï¼Œç”±äºåœ¨ä¸Šä¸€ä¸ªåˆ—è¡¨é¡¹æ’å…¥åï¼ŒpxList.xListEndä¸­çš„pxNextå’ŒpxPreviouså·²ç»æ”¹å˜äº†æŒ‡å‘ï¼Œå› æ­¤å½“å‰æƒ…å†µä¸ºï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/9.jpg" class title="cysgbj"> 
</li>
<li><p>æ¡ä»¶åˆ¤æ–­<code>pxIterator-&gt;pxNext-&gt;xItemValue &lt;= xValueOfInsertion;</code></p>
<p>ç”±ä¸Šå›¾å¯å¾—çŸ¥ï¼Œæ­¤æ—¶pxIterator-&gt;pxNext-&gt;xItemValueä¸º50ï¼Œå°äº60ï¼Œæ¡ä»¶æˆç«‹</p>
</li>
<li><p>æ‰§è¡Œ<code>pxIterator = pxIterator-&gt;pxNext</code></p>
<p>ç”±äºpxIterator-&gt;pxNextæŒ‡å‘pxNewListItem(1)ï¼Œå› æ­¤å½“å‰æƒ…å†µå¦‚ä¸‹ï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/10.jpg" class title="cysgbj"> 
</li>
<li><p>å†æ¬¡è¿›è¡Œæ¡ä»¶åˆ¤æ–­<code>pxIterator-&gt;pxNext-&gt;xItemValue &lt;= xValueOfInsertion;</code></p>
<p>æ­¤æ—¶pxIterator-&gt;pxNext-&gt;xItemValueä¸º0xffffï¼Œä¸æ»¡è¶³æ¡ä»¶ï¼Œå¾ªç¯ç»“æŸã€‚</p>
</li>
</ul>
<p><strong>ç»¼ä¸Šï¼Œé€šè¿‡è¯¥forå¾ªç¯ï¼Œå¯ä»¥æ ¹æ®æ¯ä¸ªåˆ—è¡¨é¡¹å€¼çš„å¤§å°è¿›è¡Œåˆ—è¡¨ä¸­çš„ä½ç½®æ’åº</strong></p>
<h3 id="èµ‹å€¼-1"><a href="#èµ‹å€¼-1" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><p>è¿™é‡Œçš„æ‰€æœ‰pxNewListItemåœ¨æœªç‰¹åˆ«è¯´æ˜çš„æƒ…å†µä¸‹éƒ½æ˜¯æŒ‡pxNewListItem(2ï¼‰</p>
<ul>
<li><p><strong>pxNewListItem-&gt;pxNext = pxIterator-&gt;pxNext;</strong></p>
<p>åŒç¬¬ä¸€æ¬¡æ’å…¥åˆ—è¡¨ï¼Œ<u><strong>æœ€ç»ˆpxNewListItem-&gt;pxNextæŒ‡å‘äº†pxList-&gt;xListEnd</strong></u></p>
</li>
<li><p><strong>pxNewListItem-&gt;pxNext-&gt;pxPrevious = pxNewListItem;</strong></p>
<p>åŒç¬¬ä¸€æ¬¡æ’å…¥åˆ—è¡¨ï¼Œ<u><strong>å°†pxList-&gt;xListEnd.pxPreviousæ”¹å˜æŒ‡å‘ï¼ŒæŒ‡å‘pxNewListItem</strong></u></p>
</li>
<li><p><strong>pxNewListItem-&gt;pxPrevious = pxIterator;</strong></p>
<p>pxIteratoråœ¨forå¾ªç¯ä¸­å·²ç»æŒ‡å‘äº†pxNewListItem(1)ï¼Œå› æ­¤è¿™é‡Œï¼š</p>
<p><u><strong>pxNewListItem-&gt;pxPreviousæŒ‡å‘pxNewListItem(1)</strong></u></p>
</li>
<li><p><strong>pxIterator-&gt;pxNext = pxNewListItem;</strong></p>
<p>pxIterator-&gt;pxNextæŒ‡å‘pxNewListItem(1)-&gt;pxnextï¼Œè€ŒpxNewListItem(1)-&gt;nextæœ€ç»ˆæŒ‡å‘äº†pxlist.xListEndï¼Œå› æ­¤è¿™é‡Œç›¸å½“äº:</p>
<p><u><strong>æ”¹å˜pxNewListItem(1)-&gt;pxnextçš„æŒ‡å‘ï¼Œä½¿å…¶æŒ‡å‘pxNewListItem(2)</strong></u></p>
</li>
</ul>
<p>ç»¼ä¸Šï¼Œå½“å‰ç»“æœä¸ºï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/11.jpg" class title="cysgbj"> 
<p>æœ‰ç‚¹ä¹±ï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸‹å›¾ï¼Œä¸€æ ·çš„</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/12.jpg" class title="cysgbj">
<p>ä¸éš¾çœ‹å‡ºï¼Œèµ‹å€¼çš„æœ€åä¸¤æ­¥å°†å„ä¸ªåˆ—è¡¨é¡¹ç›¸äº’é“¾æ¥</p>
<h2 id="ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä½†è¯¥åˆ—è¡¨é¡¹å€¼å°äºä¸Šä¸€ä¸ª"><a href="#ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä½†è¯¥åˆ—è¡¨é¡¹å€¼å°äºä¸Šä¸€ä¸ª" class="headerlink" title="ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä½†è¯¥åˆ—è¡¨é¡¹å€¼å°äºä¸Šä¸€ä¸ª"></a>ç¬¬äºŒæ¬¡ï¼Œå½“åˆ—è¡¨ä¸­å·²æœ‰åˆ—è¡¨é¡¹æ—¶ï¼Œä½†è¯¥åˆ—è¡¨é¡¹å€¼å°äºä¸Šä¸€ä¸ª</h2><p>å‡è®¾ç¬¬äºŒä¸ªåˆ—è¡¨å€¼ä¸º30ï¼Œå°äºç¬¬ä¸€ä¸ªåˆ—è¡¨å€¼50</p>
<h3 id="ifåˆ¤æ–­-2"><a href="#ifåˆ¤æ–­-2" class="headerlink" title="ifåˆ¤æ–­"></a>ifåˆ¤æ–­</h3><p>ä¸æ»¡è¶³æ¡ä»¶ï¼Œè·³è¿‡</p>
<h3 id="forå¾ªç¯-2"><a href="#forå¾ªç¯-2" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><ul>
<li><p>åˆå§‹åŒ–<code>pxIterator = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd );</code>åï¼Œç”±äºåœ¨ä¸Šä¸€ä¸ªåˆ—è¡¨é¡¹æ’å…¥åï¼ŒpxList.xListEndä¸­çš„pxNextå’ŒpxPreviouså·²ç»æ”¹å˜äº†æŒ‡å‘ï¼Œå› æ­¤å½“å‰æƒ…å†µä¸ºï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/9.jpg" class title="cysgbj"> 
</li>
<li><p>æ¡ä»¶åˆ¤æ–­<code>pxIterator-&gt;pxNext-&gt;xItemValue &lt;= xValueOfInsertion;</code></p>
<p>ç”±ä¸Šå›¾å¯å¾—çŸ¥ï¼Œæ­¤æ—¶pxIterator-&gt;pxNext-&gt;xItemValueä¸º50ï¼Œå¤§äº30ï¼Œæ¡ä»¶ä¸æˆç«‹ï¼Œå¾ªç¯ç»“æŸ</p>
</li>
</ul>
<h3 id="èµ‹å€¼-2"><a href="#èµ‹å€¼-2" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><p>è¿™é‡Œçš„æ‰€æœ‰pxNewListItemåœ¨æœªç‰¹åˆ«è¯´æ˜çš„æƒ…å†µä¸‹éƒ½æ˜¯æŒ‡pxNewListItem(2ï¼‰</p>
<ul>
<li><p><strong>pxNewListItem-&gt;pxNext = pxIterator-&gt;pxNext;</strong></p>
<p><u><strong>ä¸åŒç¬¬ä¸€æ¬¡æ’å…¥åˆ—è¡¨ï¼æ­¤æ—¶pxNewListItem-&gt;pxNextæœ€ç»ˆæŒ‡å‘äº†xNewListItem(1)</strong></u></p>
</li>
<li><p><strong>pxNewListItem-&gt;pxNext-&gt;pxPrevious = pxNewListItem;</strong></p>
<p><strong>ä¸åŒç¬¬ä¸€æ¬¡æ’å…¥åˆ—è¡¨ï¼</strong>æ­¤æ—¶pxNewListItem-&gt;pxNext-&gt;pxPrevious å³æ˜¯ï¼š</p>
<p><u><strong>pxNewListItem(1)-&gt;xPreviousæŒ‡å‘äº†pxNewListItem(2)</strong></u></p>
</li>
<li><p><strong>pxNewListItem-&gt;pxPrevious = pxIterator;</strong></p>
<p>pxIteratoræ˜¯ç›´æ¥æŒ‡å‘pxList-&gt;xListEndçš„ï¼Œå› æ­¤ï¼š</p>
<p><u><strong>pxNewListItem-&gt;pxPrevious ç›´æ¥æŒ‡å‘pxList-&gt;xListEnd</strong></u></p>
</li>
<li><p><strong>pxIterator-&gt;pxNext = pxNewListItem;</strong></p>
<p>åœ¨æ‰§è¡Œè¿™ä¸€æ­¥ä¹‹å‰ï¼Œæƒ…å†µå¦‚ä¸‹ï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/13.jpg" class title="cysgbj"> 
<p>è¿™é‡Œæˆ‘äº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼ŒpxIterator-&gt;pxNextæ˜¯æŒ‡å‘pxNewListItem(1)ï¼Œé‚£è®©pxNewListItem(1)=pxNewListItemæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿè®©ä¸Šä¸€ä¸ªåˆ—è¡¨é¡¹æŒ‡å‘å½“å‰åˆ—è¡¨é¡¹ï¼Ÿè¿™æ˜æ˜¾æ˜¯ä¸ç¬¦åˆåˆ—è¡¨é€»è¾‘çš„ã€‚</p>
<p>åæ¥åœ¨æ‰¾å¯»é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œæ‰å‘ç°è‡ªå·±åˆçŠ¯äº†è€é”™è¯¯ï¼ŒpxNewListItem(1)å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œä»–æ˜¯ç›´æ¥æŒ‡å‘åˆ—è¡¨é¡¹1çš„å†…å­˜å•å…ƒçš„ï¼Œ<strong>å› æ­¤pxIterator-&gt;pxNextæ˜¯ç›´æ¥æŒ‡å‘äº†åˆ—è¡¨é¡¹1çš„å†…å­˜å•å…ƒ</strong>ï¼Œå› æ­¤æ”¹å˜pxIterator-&gt;pxNextæ˜¯ç›´æ¥æ”¹å˜äº†è¿™ä¸ªæŒ‡é’ˆçš„æŒ‡å‘ï¼Œä¹Ÿå°±æ˜¯è¯´ç»“æœæ˜¯ï¼š</p>
<p><strong><u>å°†pxList-&gt;xListEnd.pxNextæ”¹å˜æŒ‡å‘ï¼Œä½¿å…¶æŒ‡å‘pxNewListItem(2)</u></strong></p>
</li>
</ul>
<p>ç»¼ä¸Šï¼Œæœ€åç»“æœä¸ºï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/14.jpg" class title="cysgbj"> 
<h2 id="å¯¹æ¯”ä¸¤ç§æƒ…å†µ"><a href="#å¯¹æ¯”ä¸¤ç§æƒ…å†µ" class="headerlink" title="å¯¹æ¯”ä¸¤ç§æƒ…å†µ"></a>å¯¹æ¯”ä¸¤ç§æƒ…å†µ</h2><p>ç¬¬äºŒä¸ªåˆ—è¡¨é¡¹å€¼å¤§äºç¬¬ä¸€ä¸ªçš„æƒ…å†µï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/11.jpg" class title="cysgbj"> 
<p>å¯¹æ¯”ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li><strong>pxList-&gt;xListEnd.pxNextæ€»æ˜¯æŒ‡å‘åˆ—è¡¨é¡¹å€¼æœ€å°çš„åˆ—è¡¨é¡¹</strong></li>
<li><strong>pxList-&gt;xListEnd.pxPreviousæ€»æ˜¯æŒ‡å‘åˆ—è¡¨é¡¹å€¼æœ€å¤§çš„åˆ—è¡¨é¡¹</strong></li>
<li><strong>åˆ—è¡¨é¡¹å€¼å°çš„åˆ—è¡¨é¡¹çš„pxNextæ€»æ˜¯æŒ‡å‘åˆ—è¡¨é¡¹å€¼å¤§çš„åˆ—è¡¨é¡¹</strong></li>
<li><strong>åˆ—è¡¨é¡¹å€¼å¤§çš„åˆ—è¡¨é¡¹çš„PxPreviousæ€»æ˜¯æŒ‡å‘åˆ—è¡¨é¡¹å€¼å°çš„åˆ—è¡¨é¡¹</strong></li>
<li><strong>é¦–åˆ—è¡¨é¡¹çš„pxPreviouså’Œå°¾åˆ—è¡¨é¡¹çš„pxNextéƒ½æŒ‡å‘pxList-&gt;xListEnd</strong></li>
</ul>
<p>æ ¹æ®ä¸Šè¿°çš„è§„å¾‹ï¼Œå°±å¯ä»¥æ¸…æ™°åœ°æ˜ç™½FreeRTOSå¯¹åˆ—è¡¨çš„æ’å…¥æ–¹å¼äº†ï¼š</p>
<img src="/images/loading.png" data-original="/2022/12/09/%E5%9F%BA%E4%BA%8EFreeRTOS%E7%9A%84%E5%88%97%E8%A1%A8%E5%AD%A6%E4%B9%A0/15.jpg" class title="cysgbj"> 
<p>å› æ­¤ï¼Œè‹¥è¦è®¿é—®åˆ—è¡¨é¡¹ï¼Œè¦é€šè¿‡pxList-&gt;xListEnd.pxNextè®¿é—®æ‰‹åˆ—è¡¨é¡¹ï¼Œé€šè¿‡pxList-&gt;xListEnd.pxPreviousè®¿é—®å°¾åˆ—è¡¨é¡¹ã€‚</p>
<p>å®ç°æ’å…¥çš„æ–¹æ³•çœ‹äº†ä¹‹åæ„Ÿè§‰çœŸçš„å¾ˆå·§å¦™ï¼Œæˆ‘æ„Ÿè§‰ä¹Ÿåªèƒ½åœç•™åœ¨ç†è§£çš„é˜¶æ®µï¼Œè¦è‡ªå·±å†™å‡ºæ¥æ„Ÿè§‰éš¾åº¦è¿˜æ˜¯å¾ˆå¤§ã€‚ã€‚ã€‚<strong>ä½†æ˜¯è§„å¾‹è¿˜æ˜¯å¾ˆå¥½è®°ä½çš„ğŸ˜‹</strong></p>
<h1 id="ç›´æ¥å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨å°¾"><a href="#ç›´æ¥å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨å°¾" class="headerlink" title="ç›´æ¥å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨å°¾"></a>ç›´æ¥å°†åˆ—è¡¨é¡¹æ’å…¥åˆ—è¡¨å°¾</h1><p>åŸç†è·Ÿä¸Šé¢çš„æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœèƒ½ç†è§£æ’å…¥çš„æ–¹æ³•ï¼Œç›¸ä¿¡è¿™ä¸ªç†è§£èµ·æ¥å°±å¾ˆezäº†ï¼Œå°±ä¸å¤šè¯´äº†</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vListInsertEnd</span><span class="params">( List_t * <span class="type">const</span> pxList, ListItem_t * <span class="type">const</span> pxNewListItem )</span></span><br><span class="line">&#123;</span><br><span class="line">ListItem_t* <span class="type">const</span> pxIndex = pxList-&gt;pxIndex;</span><br><span class="line"> </span><br><span class="line">         <span class="comment">/*æ£€æŸ¥åˆ—è¡¨å’Œåˆ—è¡¨é¡¹æ•°æ®çš„å®Œæ•´æ€§ï¼Œä»…å½“configASSERT()å®šä¹‰æ—¶æœ‰æ•ˆã€‚*/</span></span><br><span class="line">         listTEST_LIST_INTEGRITY( pxList );</span><br><span class="line">         listTEST_LIST_ITEM_INTEGRITY(pxNewListItem );</span><br><span class="line"> </span><br><span class="line">         <span class="comment">/*å‘åˆ—è¡¨ä¸­æ’å…¥æ–°çš„åˆ—è¡¨é¡¹*/</span></span><br><span class="line">         pxNewListItem-&gt;pxNext = pxIndex;</span><br><span class="line">         pxNewListItem-&gt;pxPrevious =pxIndex-&gt;pxPrevious;</span><br><span class="line"> </span><br><span class="line">         mtCOVERAGE_TEST_DELAY();</span><br><span class="line"> </span><br><span class="line">         pxIndex-&gt;pxPrevious-&gt;pxNext =pxNewListItem;</span><br><span class="line">         pxIndex-&gt;pxPrevious = pxNewListItem;</span><br><span class="line"> </span><br><span class="line">         pxNewListItem-&gt;pvContainer = ( <span class="type">void</span>* ) pxList;</span><br><span class="line"> </span><br><span class="line">         ( pxList-&gt;uxNumberOfItems )++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨FreeRTOSä¸­ï¼Œä»»åŠ¡çš„è°ƒåº¦ä¸åˆ—è¡¨æ¯æ¯ç›¸å…³ï¼Œå› æ­¤è¦æƒ³å­¦å¥½ä»»åŠ¡è°ƒåº¦çš„åŸç†ï¼Œåˆ—è¡¨æ˜¯ç¬¬ä¸€å¤§éš¾å…³ï¼</p>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>å•ç‰‡æœºå¤ä¹ (è€ƒè¯•å¤ä¹ è‡ªç”¨)</title>
    <url>/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="è®¡ç®—æœºåŸºç¡€"><a href="#è®¡ç®—æœºåŸºç¡€" class="headerlink" title="è®¡ç®—æœºåŸºç¡€"></a>è®¡ç®—æœºåŸºç¡€</h1><ul>
<li><p>åŸç ã€åç ã€è¡¥ç </p>
<p>æ­£æ•°çš„ä¸‰è€…ç›¸åŒï¼Œè´Ÿæ•°åç ä¸ºåŸç é™¤ç¬¦å·ä½å…¶ä½™å–åï¼Œè¡¥ç ä¸ºå…¶åç +1</p>
<p><u><strong>è´Ÿæ•°çš„æœºå™¨ç æ˜¯å…¶åŸç çš„è¡¥ç </strong></u></p>
</li>
<li><p>å¾®å‹è®¡ç®—æœºé…ç½®é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨æ˜¯ä¸ºäº†è§£å†³ï¼š CPUäºå†…å­˜å‚¨å™¨é€Ÿåº¦ä¸åŒ¹é…</p>
</li>
<li><p>ROMå’ŒRAM</p>
<ul>
<li>ROMï¼šåªè¯»å­˜å‚¨å™¨ï¼Œåœ¨å•ç‰‡æœºä¸­ç”¨äºå­˜æ”¾ç¨‹åºï¼Œé…æœ‰è¾ƒå¤§ç©ºé—´ï¼Œ<strong>æ‰ç”µæ•°æ®ä¸ä¸¢å¤±</strong></li>
<li>RAMï¼šéšæœºå­˜å‚¨å™¨ï¼Œå­˜æ”¾ä¸´æ—¶æ•°æ®ï¼Œä½¿å•ç‰‡æœº<strong>æ›´é€‚ç”¨äºå®æ—¶æ§åˆ¶ç³»ç»Ÿ</strong>ï¼Œ<strong>æ‰ç”µæ•°æ®ä¸¢å¤±</strong></li>
<li><strong>è®¡ç®—æœºçš„å†…å­˜å®¹é‡ä¸»è¦æŒ‡RAM</strong></li>
</ul>
</li>
<li><p><u><strong>ç³»ç»Ÿæ€»çº¿ï¼šåœ°å€æ€»çº¿ ABï¼Œæ§åˆ¶æ€»çº¿ CB å’ŒåŒå‘æ•°æ®æ€»çº¿ DBã€‚</strong></u></p>
<ul>
<li>æ•°æ®æ€»çº¿ï¼ˆData Busâ€•DBï¼‰åŒå‘ã€ä¸‰æ€ï¼šæ•°æ®æ€»çº¿çš„æ ¹æ•°å†³å®šäº†ä¸€æ¬¡å¯ä»¥ä¼ é€’äºŒè¿›åˆ¶æ•°çš„<strong>ä½æ•°</strong>ã€‚ </li>
<li>åœ°å€æ€»çº¿ï¼ˆAddress Busâ€•ABï¼‰å•å‘ã€ä¸‰æ€ï¼šåœ°å€æ€»çº¿çš„ä½æ•°å†³å®šäº†<strong>å¯ä»¥ç›´æ¥è®¿é—®çš„å­˜å‚¨å•å…ƒ(æˆ– I/O å£)çš„æœ€å¤§å¯èƒ½æ•° é‡ï¼ˆå³å®¹é‡ï¼‰</strong>ã€‚ </li>
<li>æ§åˆ¶æ€»çº¿ï¼ˆControl Busâ€•CBï¼‰ï¼šæ§åˆ¶æ€»çº¿ç”¨æ¥<strong>ä¼ è¾“æ§åˆ¶ä¿¡å·</strong>ï¼Œæ•°æ®æ€»çº¿å’Œæ¯ä¸ªå…ƒä»¶çš„æ•°æ®çº¿ç›¸è¿ï¼Œä¸ºäº†ä½¿ CPU èƒ½å¤Ÿå’Œ å…¶ä¸­ä¸€ä¸ªå…ƒä»¶æ­£ç¡®é€šä¿¡ï¼Œå¿…é¡»ä½¿ç”¨ä¸‰æ€é€»è¾‘å…ƒä»¶ï¼ˆç‰¹åˆ«é’ˆå¯¹è¾“å…¥å…ƒä»¶ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 id="é¢˜"><a href="#é¢˜" class="headerlink" title="é¢˜"></a>é¢˜</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/1_1.jpg" class title="This is an image"> 
<h1 id="å•ç‰‡æœºç¡¬ä»¶ç»“æ„"><a href="#å•ç‰‡æœºç¡¬ä»¶ç»“æ„" class="headerlink" title="å•ç‰‡æœºç¡¬ä»¶ç»“æ„"></a>å•ç‰‡æœºç¡¬ä»¶ç»“æ„</h1><h2 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h2><p>åˆ†ä¸ºè¿ç®—å™¨å’Œæ§åˆ¶å™¨</p>
<ul>
<li><p>æ§åˆ¶å™¨ï¼šä¾æ¬¡å–å‡ºROMä¸­å­˜å‚¨å•å…ƒçš„æŒ‡ä»¤</p>
<ul>
<li>ç¨‹åºè®¡æ•°å™¨ï¼šPCï¼Œ16ä½ï¼ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤çš„<strong>åœ°å€</strong>ï¼Œå¤ä½åä¸º0000H</li>
<li>æŒ‡ä»¤å¯„å­˜å™¨</li>
<li>æŒ‡ä»¤è¯‘ç å™¨</li>
<li>å®šæ—¶æ§åˆ¶ç”µè·¯</li>
</ul>
</li>
<li><p>è¿ç®—å™¨ALUï¼šå¯¹æ•°æ®è¿›è¡Œç®—æœ¯ã€é€»è¾‘è¿ç®—</p>
<ul>
<li>ç®—æœ¯é€»è¾‘è¿ç®—éƒ¨ä»¶ALUï¼Œè´Ÿè´£è¿ç®—ï¼Œç»“æœä¼ å›ACCï¼Œç»“æœçš„çŠ¶æ€ä¼ å›PSW</li>
<li>ç´¯åŠ å™¨ACC</li>
<li><strong>ç¨‹åºçŠ¶æ€å¯„å­˜å™¨PSW</strong></li>
</ul>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ä½</th>
<th style="text-align:center">7</th>
<th style="text-align:center">6</th>
<th style="text-align:center">5</th>
<th style="text-align:center">4</th>
<th style="text-align:center">3</th>
<th style="text-align:center">2</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ä½å</td>
<td style="text-align:center">Cy</td>
<td style="text-align:center">AC</td>
<td style="text-align:center">F0</td>
<td style="text-align:center">RS1</td>
<td style="text-align:center">RS0</td>
<td style="text-align:center">OV</td>
<td style="text-align:center">F1</td>
<td style="text-align:center">P</td>
</tr>
<tr>
<td style="text-align:center">ä½œç”¨</td>
<td style="text-align:center">è¿›ä½/å€Ÿä½</td>
<td style="text-align:center">è¾…åŠ©è¿›ä½</td>
<td style="text-align:center">è‡ªå®šä¹‰</td>
<td style="text-align:center">å¯„å­˜å™¨é€‰æ‹©</td>
<td style="text-align:center">å¯„å­˜å™¨é€‰æ‹©</td>
<td style="text-align:center">æº¢å‡º</td>
<td style="text-align:center">è‡ªå®šä¹‰</td>
<td style="text-align:center">å¥‡å¶æ•ˆéªŒ</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>Cyï¼šè¿ç®—ç»“æœæœ€é«˜ä½æœ‰æ— è¿›ä½/é”™ä½</li>
<li>ACï¼šè¿ç®—ç»“æœä½å››ä½æœ‰æ— å‘é«˜å››ä½è¿›ä½</li>
<li>F0ã€F1ï¼šç”¨æˆ·è‡ªå®šä¹‰</li>
<li>RS1ã€RS0ï¼šä¸€èµ·å†³å®šå½“å‰å¯„å­˜å™¨ç»„(00å¯¹åº”å¯„å­˜å™¨0ç»„ï¼Œä¾æ¬¡å¢åŠ )</li>
<li>OVï¼šæ•°æ®æ˜¯å¦æº¢å‡º</li>
<li>Pï¼š1çš„ä¸ªæ•°ä¸ºå¥‡/å¶</li>
</ul>
<h2 id="æ—¶é’Ÿç”µè·¯"><a href="#æ—¶é’Ÿç”µè·¯" class="headerlink" title="æ—¶é’Ÿç”µè·¯"></a>æ—¶é’Ÿç”µè·¯</h2><ul>
<li>XTAL1:ç‰‡å†…æŒ¯è¡ç”µè·¯è¾“å…¥ç«¯</li>
<li>XTAL2ï¼šè¾“å‡ºç«¯</li>
</ul>
<p>å½“å¤–éƒ¨ä¿¡å·æºä¸ºå•ç‰‡æœºæä¾›æ—¶é’Ÿæ—¶ï¼Œ1æ¥åœ°ï¼Œ2æ¥ä¿¡å·æº</p>
<h2 id="EA"><a href="#EA" class="headerlink" title="EA"></a>EA</h2><p><strong>EAï¼ˆåï¼‰</strong>ä¸º1æ—¶CPUä»ç‰‡å†…è¯»å–æŒ‡ä»¤ï¼Œä¸º0æ—¶è®¿é—®å¤–éƒ¨</p>
<h2 id="å¹¶è¡ŒIOå£"><a href="#å¹¶è¡ŒIOå£" class="headerlink" title="å¹¶è¡ŒIOå£"></a>å¹¶è¡ŒIOå£</h2><h3 id="P1"><a href="#P1" class="headerlink" title="P1"></a>P1</h3><p>é€šç”¨è¾“å…¥ã€è¾“å‡ºæ¥å£</p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/p1.jpg" class title="This is an image"> 
<h4 id="ä½œè¾“å‡ºæ—¶ï¼š"><a href="#ä½œè¾“å‡ºæ—¶ï¼š" class="headerlink" title="ä½œè¾“å‡ºæ—¶ï¼š"></a>ä½œè¾“å‡ºæ—¶ï¼š</h4><ul>
<li><p><strong>è¾“å‡ºçš„æ•°æ®é€šè¿‡å†…éƒ¨æ€»çº¿é€å…¥é”å­˜å™¨ä¿å­˜</strong></p>
</li>
<li><p>åˆ¤æ–­æ•°æ®çš„æ¯ä¸€ä½ã€‚</p>
<p>ä¸º1æ—¶ï¼ŒQ=1ï¼ŒQï¼ˆåï¼‰=0ï¼ŒVTæˆªæ­¢ï¼ŒVccå‘å¼•è„šè¾“å‡ºé«˜ç”µå¹³ã€‚</p>
</li>
</ul>
<p><strong>ä¸Šæ‹‰ç”µé˜»çš„ä½œç”¨</strong>ï¼šå½“VTæˆªæ­¢æ—¶ï¼Œä½¿è¾“å‡ºå¼ºåˆ¶ä¸º1ï¼Œè‹¥æ²¡æœ‰ä¸Šæ‹‰ç”µé˜»ï¼Œè¾“å‡ºå¯èƒ½ç”±äºå™ªéŸ³ä¸Šä¸‹æµ®åŠ¨ã€‚</p>
<h4 id="ä½œè¾“å…¥æ—¶ï¼š"><a href="#ä½œè¾“å…¥æ—¶ï¼š" class="headerlink" title="ä½œè¾“å…¥æ—¶ï¼š"></a>ä½œè¾“å…¥æ—¶ï¼š</h4><ul>
<li><strong>å…ˆå‘é”å­˜å™¨å†™1ï¼ˆå‡†åŒå‘ï¼‰ï¼Œä½¿VTä¸€ç›´ä¸ºæˆªæ­¢çŠ¶æ€ã€‚</strong>å¦åˆ™VTå¯¼é€šä¼šæ‹‰ä½è¾“å…¥ä¿¡å·ã€‚</li>
<li>CPUæ‰§è¡Œè¯»æŒ‡ä»¤æ—¶ï¼Œ2å¯¼é€šï¼Œ<strong>æ•°æ®é€šè¿‡2ç›´æ¥è¿›å…¥</strong>å†…éƒ¨æ€»çº¿ï¼Œå› æ­¤å†…éƒ¨æ€»çº¿ä¿¡å·è·Ÿéšå¼•è„šå˜åŒ–ã€‚</li>
</ul>
<h3 id="P2"><a href="#P2" class="headerlink" title="P2"></a>P2</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/p2.jpg" class title="This is an image"> 
<p>æœ‰ä¸¤ç§ç”¨é€”ï¼Œå‡†åŒå‘IOå’Œé«˜8ä½åœ°å€æ€»çº¿</p>
<p>å½“ç”¨ä½œIOæ—¶ï¼Œæ§åˆ¶ä¿¡å·ä½¿å¼€å…³æ¥å·¦ä¾§ï¼ŒQè¾“å‡º1ä½¿VTæˆªæ­¢ã€‚</p>
<h3 id="P3"><a href="#P3" class="headerlink" title="P3"></a>P3</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/p3.jpg" class title="This is an image"> 
<p><strong>ç”¨æˆ·å¯è‡ªè¡Œæ“ä½œç¬¬äºŒåŠŸèƒ½å®ç°ç›¸å…³åŠŸèƒ½ï¼ŒP3é»˜è®¤ä¸ºå‡†åŒå‘IO</strong></p>
<p>ç¬¬äºŒåŠŸèƒ½åŒ…æ‹¬ï¼šä¸²å£æ”¶å‘ã€å¤–éƒ¨ä¸­æ–­ã€å®šæ—¶å™¨è¾“å‡ºç­‰</p>
<h3 id="P0"><a href="#P0" class="headerlink" title="P0"></a>P0</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/p0.jpg" class title="This is an image"> 
<p>å¯ä½œä¸ºå‡†åŒå‘IOï¼Œ<strong>IOæ—¶å¿…é¡»å¤–æ¥ä¸Šæ‹‰ç”µé˜»</strong>ã€‚ç¬¬äºŒåŠŸèƒ½æ—¶æä¾›å¤–éƒ¨å­˜å‚¨åœ°å€ä½8ä½<strong>å’ŒP2ç»„æˆ16ä½åœ°å€</strong>ï¼Œä¹‹åç”¨ä½œæ•°æ®æ€»çº¿ï¼ˆæ­¤æ—¶é”å­˜å™¨ä¼šä¿å­˜ä½å…«ä½åœ°å€ï¼‰ã€‚</p>
<p>P0å…·æœ‰é«˜é˜»æ€</p>
<h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ul>
<li>å››ä¸ªIOå‡ä¸ºå‡†åŒå‘ï¼Œ<strong>åœ¨ç”¨ä½œè¾“å…¥æ—¶éƒ½åº”å‘é”å­˜å™¨å†™â€œ1â€</strong></li>
<li>é™¤P1å¤–ï¼Œå…¶ä½™ç«¯å£éƒ½æœ‰ç¬¬äºŒåŠŸèƒ½ï¼š<ul>
<li>P0ï¼šä½å…«ä½åœ°å€å’Œæ•°æ®æ€»çº¿</li>
<li>P2ï¼šé«˜å…«ä½åœ°å€</li>
<li>P3ï¼šè‡ªå®šä¹‰åŠŸèƒ½</li>
</ul>
</li>
<li><strong>P0ä½œä¸ºé€šç”¨IOæ—¶éœ€è¦å¤–æ¥ä¸Šæ‹‰ç”µé˜»ï¼</strong></li>
<li><strong><u>P0ã€P2ä½œåœ°å€æ—¶å‰©ä¸‹å¼•è„šä¸èƒ½ä½œä¸ºIOä½¿ç”¨ï¼›ä½†æ˜¯P3å„ä¸ªå£ç‹¬ç«‹ï¼Œæœªç”¨ä½œç¬¬äºŒåŠŸèƒ½çš„å¯ä»¥ä½œä¸ºIOä½¿ç”¨</u></strong></li>
</ul>
<h2 id="å­˜å‚¨ç»“æ„"><a href="#å­˜å‚¨ç»“æ„" class="headerlink" title="å­˜å‚¨ç»“æ„"></a>å­˜å‚¨ç»“æ„</h2><p>51å•ç‰‡æœºå­˜å‚¨å™¨<strong>ç‰©ç†</strong>ä¸Šåˆ†ä¸ºå››ä¸ªç©ºé—´ï¼š</p>
<ul>
<li>ç‰‡å†…<strong>ç¨‹åº</strong>å­˜å‚¨å™¨</li>
<li>ç‰‡å¤–<strong>ç¨‹åº</strong>å­˜å‚¨å™¨</li>
<li>ç‰‡å†…<strong>æ•°æ®</strong>å­˜å‚¨å™¨</li>
<li>ç‰‡å¤–<strong>æ•°æ®</strong>å­˜å‚¨å™¨</li>
</ul>
<p>ä»ç”¨æˆ·ä½¿ç”¨çš„é€»è¾‘ä¸Šåˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼š</p>
<ul>
<li>ç‰‡å†…å¤–ç»Ÿä¸€ç¼–å€çš„ç¨‹åºå­˜å‚¨å™¨    0000H-FFFFH(64KB)</li>
<li>ç‰‡å†…æ•°æ®å­˜å‚¨    00-FFH 128B </li>
<li>ç‰‡å¤–æ•°æ®å­˜å‚¨    0000H-FFFFH</li>
</ul>
<h3 id="ç¨‹åºå­˜å‚¨å™¨"><a href="#ç¨‹åºå­˜å‚¨å™¨" class="headerlink" title="ç¨‹åºå­˜å‚¨å™¨"></a>ç¨‹åºå­˜å‚¨å™¨</h3><p>ç¨‹åºå­˜å‚¨å™¨ç”±ROMå’ŒEPROMæ„æˆï¼Œæ‰ç”µåæ•°æ®ä¸ä¸¢å¤±</p>
<p>ç”¨äºå­˜æ”¾ç¨‹åºå’Œç¨‹åºè¿è¡Œæ—¶æ‰€éœ€çš„å¸¸æ•°ã€‚<strong>51ç‰‡å†…æœ‰4K ROMï¼Œä½†åœ°å€çº¿ä¸º16ä½ï¼Œå› æ­¤åšå¤šå¯ä»¥æ‰©å±•åˆ°64KB</strong>ã€‚å½“PCå€¼è¶…è¿‡å†…éƒ¨ROMå®¹é‡æ—¶ä¼šè‡ªåŠ¨è½¬å‘å¤–éƒ¨å¯»å€ã€‚\EA=1æ—¶ä¸ºå¯»å€å†…éƒ¨ROMã€‚</p>
<p>MOVCæŒ‡ä»¤ç”¨äºè®¿é—®ç¨‹åºå­˜å‚¨å™¨ã€‚</p>
<h3 id="æ•°æ®å­˜å‚¨å™¨"><a href="#æ•°æ®å­˜å‚¨å™¨" class="headerlink" title="æ•°æ®å­˜å‚¨å™¨"></a>æ•°æ®å­˜å‚¨å™¨</h3><p>æ•°æ®å­˜å‚¨å™¨ç”±RAMå’Œä¸“ç”¨å¯„å­˜å™¨ç»„æˆï¼Œæ‰ç”µåæ•°æ®ä¸¢å¤±</p>
<p>ç”¨äºå­˜æ”¾ç¨‹åºè¿ç®—çš„ä¸­é—´ç»“æœã€æ ‡å¿—ä½ã€æ•°æ®ç¼“å†²ç­‰ã€‚51ç‰‡å†…æœ‰128+128Bçš„æ•°æ®å­˜å‚¨å™¨ï¼Œå¯æ‰©å……è‡³64KB</p>
<p>å†…éƒ¨æ•°æ®å­˜å‚¨å™¨åˆ†ä¸ºä½128Bå’Œé«˜128B</p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/ram.jpg" class title="This is an image"> 
<h4 id="ä½128Bï¼šRAMåŒº"><a href="#ä½128Bï¼šRAMåŒº" class="headerlink" title="ä½128Bï¼šRAMåŒº"></a>ä½128Bï¼šRAMåŒº</h4><ul>
<li><p><strong>é€šç”¨å¯„å­˜å™¨åŒº</strong>ï¼Œä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œç”¨äºä¸´æ—¶å­˜æ”¾8ä½æ•°æ®</p>
<p>é€šè¿‡ä¿®æ”¹ç¨‹åºçŠ¶æ€å¯„å­˜å™¨PSWä¸­çš„RS1å’ŒRS0å®ç°é€‰æ‹©ï¼Œ00H-1FH 128ä½</p>
</li>
<li><p><strong>ä½å¯»å€åŒº</strong>ï¼Œæä¾›åœ°å€è¯»å†™æ•°æ® </p>
<p>RAMä¸­çš„20H-2FHï¼Œ128ä½</p>
</li>
<li><p><strong>æ•°æ®ç¼“å­˜åŒº</strong></p>
</li>
</ul>
<h4 id="ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR"><a href="#ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR" class="headerlink" title="ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR"></a>ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR</h4><p>åŒ…æ‹¬51ä¸­æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å¯„å­˜å™¨ï¼Œå¦‚ACCã€PSWã€P0-P3ç­‰</p>
<p><u><strong>ä¸åŒ…æ‹¬PC</strong></u></p>
<h2 id="æ—¶åº"><a href="#æ—¶åº" class="headerlink" title="æ—¶åº"></a>æ—¶åº</h2><h3 id="æ—¶é’Ÿå‘¨æœŸï¼ˆæŒ¯è¡å‘¨æœŸï¼‰"><a href="#æ—¶é’Ÿå‘¨æœŸï¼ˆæŒ¯è¡å‘¨æœŸï¼‰" class="headerlink" title="æ—¶é’Ÿå‘¨æœŸï¼ˆæŒ¯è¡å‘¨æœŸï¼‰"></a>æ—¶é’Ÿå‘¨æœŸï¼ˆæŒ¯è¡å‘¨æœŸï¼‰</h3><p>ä¹Ÿå«æŒ¯è¡å‘¨æœŸï¼Œ<strong>ä¸ºæŒ¯è¡å™¨é¢‘ç‡çš„å€’æ•°</strong>ï¼Œæ˜¯æ—¶åºä¸­çš„<strong>æœ€å°å•ä½</strong></p>
<h3 id="çŠ¶æ€å‘¨æœŸ"><a href="#çŠ¶æ€å‘¨æœŸ" class="headerlink" title="çŠ¶æ€å‘¨æœŸ"></a>çŠ¶æ€å‘¨æœŸ</h3><p>ä¸¤ä¸ªæŒ¯è¡å‘¨æœŸï¼Œä¸€ä¸ªå®Œæˆè¿ç®—ï¼Œä¸€ä¸ªå®Œæˆä¼ é€</p>
<h3 id="æœºå™¨å‘¨æœŸ"><a href="#æœºå™¨å‘¨æœŸ" class="headerlink" title="æœºå™¨å‘¨æœŸ"></a>æœºå™¨å‘¨æœŸ</h3><p>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„ä¸€ä¸ªé˜¶æ®µçš„æ—¶é—´ã€‚<strong>æ˜¯å•ç‰‡æœºçš„åŸºæœ¬æ“ä½œå‘¨æœŸ</strong>ã€‚1ä¸ªæœºå™¨å‘¨æœŸ=6ä¸ªçŠ¶æ€å‘¨æœŸ=12ä¸ªæŒ¯è¡å‘¨æœŸ</p>
<h3 id="æŒ‡ä»¤å‘¨æœŸ"><a href="#æŒ‡ä»¤å‘¨æœŸ" class="headerlink" title="æŒ‡ä»¤å‘¨æœŸ"></a>æŒ‡ä»¤å‘¨æœŸ</h3><p>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„å‘¨æœŸï¼Œé€šå¸¸å«æœ‰1~4ä¸ªæœºå™¨å‘¨æœŸã€‚</p>
<p>51å•ç‰‡æœºåˆ†ä¸ºå•å‘¨æœŸæŒ‡ä»¤ã€åŒå‘¨æœŸæŒ‡ä»¤ã€å››å‘¨æœŸæŒ‡ä»¤ï¼Œåˆ†åˆ«å¯¹åº”nä¸ªæœºå™¨å‘¨æœŸã€‚<strong>åªæœ‰ä¹˜æ³•å’Œé™¤æ³•æ˜¯å››å‘¨ç ŒæŒ‡ä»¤ã€‚</strong></p>
<p>å› æ­¤ï¼Œæ™¶æŒ¯å‘¨æœŸä¸º12MHzæ—¶ï¼š</p>
<ul>
<li>æŒ¯è¡å‘¨æœŸ=1/12us</li>
<li>æœºå™¨å‘¨æœŸ=1us</li>
<li>æŒ‡ä»¤å‘¨æœŸï¼š1ã€2ã€4us</li>
</ul>
<h2 id="å·¥ä½œæ–¹å¼"><a href="#å·¥ä½œæ–¹å¼" class="headerlink" title="å·¥ä½œæ–¹å¼"></a>å·¥ä½œæ–¹å¼</h2><h3 id="å¤ä½æ–¹å¼"><a href="#å¤ä½æ–¹å¼" class="headerlink" title="å¤ä½æ–¹å¼"></a>å¤ä½æ–¹å¼</h3><ul>
<li>ä¸Šç”µå¤ä½</li>
<li>æŒ‰é”®å¤ä½</li>
</ul>
<h3 id="å¤ä½åå¯„å­˜å™¨çŠ¶æ€"><a href="#å¤ä½åå¯„å­˜å™¨çŠ¶æ€" class="headerlink" title="å¤ä½åå¯„å­˜å™¨çŠ¶æ€"></a>å¤ä½åå¯„å­˜å™¨çŠ¶æ€</h3><ul>
<li><strong>P0~P3ï¼š0FFHï¼ˆå…¨é«˜ç”µå¹³ï¼‰</strong></li>
<li><strong>PCï¼š0000H</strong></li>
<li><strong>SPï¼š07H</strong></li>
<li><strong>PSW:  00H</strong></li>
</ul>
<p><strong>51å•ç‰‡æœºåœ¨ç”µå¤ä½æ—¶RAMä¿æŒä¸å˜</strong></p>
<h3 id="ä½åŠŸè€—æ¨¡å¼"><a href="#ä½åŠŸè€—æ¨¡å¼" class="headerlink" title="ä½åŠŸè€—æ¨¡å¼"></a>ä½åŠŸè€—æ¨¡å¼</h3><ul>
<li>ä¼‘çœ æ¨¡å¼ï¼šåªæœ‰å¤–éƒ¨ä¸­æ–­å·¥ä½œ</li>
<li>ç©ºé—²æ¨¡å¼ï¼ˆå¾…æœºï¼‰ï¼šåªæœ‰CPUåœæ­¢å·¥ä½œ</li>
</ul>
<h2 id="é”™é¢˜"><a href="#é”™é¢˜" class="headerlink" title="é”™é¢˜"></a>é”™é¢˜</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/1.jpg" class title="This is an image"> 
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/2.jpg" class title="This is an image"> 
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/7.jpg" class title="This is an image"> 
<p><strong><u>ç”±äºRAMç‰‡å†…å¤–è®¿é—®æŒ‡ä»¤ä¸€ä¸ªæ˜¯MOVä¸€ä¸ªæ˜¯MOVXï¼Œå› æ­¤å…¶åœ°å€å¯ä»¥é‡å ã€‚å¤–éƒ¨åœ°å€æ€»çº¿16ä½å¯¹åº”64KBï¼Œè€Œå†…éƒ¨åœ°å€å¯ä»¥ä¸å…¶é‡åˆï¼Œå› æ­¤RAMæœ€å¤§æ€»é‡æ˜¯å¤§äº64KBçš„</u></strong></p>
<h1 id="51æŒ‡ä»¤ç³»ç»Ÿ"><a href="#51æŒ‡ä»¤ç³»ç»Ÿ" class="headerlink" title="51æŒ‡ä»¤ç³»ç»Ÿ"></a>51æŒ‡ä»¤ç³»ç»Ÿ</h1><p><a href="https://dhkkk.gitee.io/2022/10/14/51å•ç‰‡æœºæ±‡ç¼–è¯­è¨€/">51å•ç‰‡æœºæ±‡ç¼–æŒ‡ä»¤æŸ¥è¯¢ | å°è‘£çš„BLOG (gitee.io)</a></p>
<h2 id="é¢˜-1"><a href="#é¢˜-1" class="headerlink" title="é¢˜"></a>é¢˜</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/3.jpg" class title="This is an image"> 
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/4.jpg" class title="This is an image"> 
<p><strong>ä¸€èˆ¬åªæœ‰Aèƒ½å‚ä¸è¿™äº›é€»è¾‘è¿ç®—</strong></p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/5.jpg" class title="This is an image"> 
<p><strong>ç»å…¸</strong></p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/6.jpg" class title="This is an image"> 
<p><strong>è§„å®š</strong></p>
<h1 id="ä¸­æ–­"><a href="#ä¸­æ–­" class="headerlink" title="ä¸­æ–­"></a>ä¸­æ–­</h1><h2 id="ä¸­æ–­è¯·æ±‚æ ‡å¿—å¯„å­˜å™¨"><a href="#ä¸­æ–­è¯·æ±‚æ ‡å¿—å¯„å­˜å™¨" class="headerlink" title="ä¸­æ–­è¯·æ±‚æ ‡å¿—å¯„å­˜å™¨"></a>ä¸­æ–­è¯·æ±‚æ ‡å¿—å¯„å­˜å™¨</h2><h3 id="å®šæ—¶å™¨-è®¡æ•°å™¨æ§åˆ¶å¯„å­˜å™¨TCON"><a href="#å®šæ—¶å™¨-è®¡æ•°å™¨æ§åˆ¶å¯„å­˜å™¨TCON" class="headerlink" title="å®šæ—¶å™¨/è®¡æ•°å™¨æ§åˆ¶å¯„å­˜å™¨TCON"></a>å®šæ—¶å™¨/è®¡æ•°å™¨æ§åˆ¶å¯„å­˜å™¨TCON</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/tcon.jpg" class title="This is an image"> 
<ul>
<li>IT 0/1:å¤–éƒ¨ä¸­æ–­è§¦å‘æ–¹å¼ï¼Œ0ä½ç”µå¹³è§¦å‘ï¼Œ1ä¸‹é™æ²¿è§¦å‘</li>
<li>IE 0/1:ä¸­æ–­è¯·æ±‚æ ‡å¿—ä½ï¼Œè§¦å‘ä¸­æ–­åç¡¬ä»¶è‡ªåŠ¨æ¸…é›¶</li>
<li>TF 0/1:å®šæ—¶å™¨/è®¡æ•°å™¨æº¢å‡ºä¸­æ–­æ ‡å¿—ä½ï¼Œè§¦å‘ä¸­æ–­åè‡ªåŠ¨æ¸…é›¶</li>
<li>TR 0/1:å¯åœå®šæ—¶å™¨</li>
</ul>
<p>ä¸€èˆ¬å°±åªéœ€è®¾ç½®ITå’ŒTR</p>
<h3 id="ä¸²è¡Œå£æ§åˆ¶å¯„å­˜å™¨SCON"><a href="#ä¸²è¡Œå£æ§åˆ¶å¯„å­˜å™¨SCON" class="headerlink" title="ä¸²è¡Œå£æ§åˆ¶å¯„å­˜å™¨SCON"></a>ä¸²è¡Œå£æ§åˆ¶å¯„å­˜å™¨SCON</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/scon.jpg" class title="This is an image"> 
<ul>
<li>TI:å‘é€ä¸­æ–­æ ‡å¿—ä½ï¼Œæ¯å‘é€å®Œä¸€å¸§æ•°æ®åç¡¬ä»¶ä¼šå¯¹å…¶ç½®1ï¼Œ<strong>éœ€ç”¨æˆ·è‡ªè¡Œè½¯ä»¶æ¸…é›¶ï¼</strong></li>
<li>RI:æ¥æ”¶ä¸­æ–­æ ‡å¿—ä½ï¼Œè§„åˆ™åŒä¸Šã€‚</li>
</ul>
<h3 id="ä¸­æ–­å…è®¸å¯„å­˜å™¨IE"><a href="#ä¸­æ–­å…è®¸å¯„å­˜å™¨IE" class="headerlink" title="ä¸­æ–­å…è®¸å¯„å­˜å™¨IE"></a>ä¸­æ–­å…è®¸å¯„å­˜å™¨IE</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/ie.jpg" class title="This is an image"> 
<ul>
<li>EAï¼šæ€»ä¸­æ–­å…è®¸ä½</li>
<li>ESï¼šä¸²å£ä¸­æ–­å…è®¸ä½</li>
<li>ETï¼šå®šæ—¶å™¨ä¸­æ–­å…è®¸ä½</li>
<li>EXï¼šå¤–éƒ¨ä¸­æ–­å…è®¸ä½</li>
</ul>
<p>éƒ½æ˜¯ç½®1å…è®¸</p>
<p>è‹¥è¦ä½¿ç”¨æŸä¸ªä¸­æ–­ï¼Œå¿…é¡»å…ˆå¼€å¯ä¸­æ–­å…è®¸ä½ï¼Œå¤ä½åæ¸…é›¶</p>
<h3 id="æ€»ç»“ï¼š-1"><a href="#æ€»ç»“ï¼š-1" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ul>
<li>Iå¼€å¤´ä¸ºTCONå¯„å­˜å™¨ï¼Œæ§åˆ¶<strong>å®šæ—¶å™¨</strong>ä¸­æ–­è§¦å‘çš„æ–¹æ³•å’Œæ ‡å¿—ä½</li>
<li>RIå’ŒTIä¸ºSCONå¯„å­˜å™¨ï¼Œæ§åˆ¶<strong>ä¸²å£</strong>ç›¸å…³</li>
<li>Eå¼€å¤´ä¸ºä¸­æ–­å…è®¸å¯„å­˜å™¨IE</li>
</ul>
<h2 id="ä¸­æ–­ä¼˜å…ˆçº§"><a href="#ä¸­æ–­ä¼˜å…ˆçº§" class="headerlink" title="ä¸­æ–­ä¼˜å…ˆçº§"></a>ä¸­æ–­ä¼˜å…ˆçº§</h2><p>ç”±ä¸­æ–­ä¼˜å…ˆçº§å¯„å­˜å™¨IPæ§åˆ¶</p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/ip.jpg" class title="This is an image"> 
<ul>
<li>PX:å¤–éƒ¨ä¸­æ–­ä¼˜å…ˆçº§è®¾ç½®</li>
<li>PT:å®šæ—¶å™¨ä¸­æ–­ä¼˜å…ˆçº§è®¾ç½®</li>
<li>PS:ä¸²å£ä¸­æ–­ä¼˜å…ˆçº§è®¾ç½®</li>
</ul>
<h2 id="ä¸­æ–­å“åº”è¿‡ç¨‹"><a href="#ä¸­æ–­å“åº”è¿‡ç¨‹" class="headerlink" title="ä¸­æ–­å“åº”è¿‡ç¨‹"></a>ä¸­æ–­å“åº”è¿‡ç¨‹</h2><h3 id="ä¸­æ–­è¯·æ±‚"><a href="#ä¸­æ–­è¯·æ±‚" class="headerlink" title="ä¸­æ–­è¯·æ±‚"></a>ä¸­æ–­è¯·æ±‚</h3><p>ç¡¬ä»¶å®Œæˆï¼Œè¯·æ±‚å®Œæˆåå¯¹åº”æ ‡å¿—ä½ç½®1</p>
<h3 id="ä¸­æ–­æŸ¥è¯¢"><a href="#ä¸­æ–­æŸ¥è¯¢" class="headerlink" title="ä¸­æ–­æŸ¥è¯¢"></a>ä¸­æ–­æŸ¥è¯¢</h3><p>CPUæ£€æµ‹TCONå’ŒSCONä¸­å„æ ‡å¿—ä½çŠ¶æ€ï¼Œç¡®å®šæ˜¯å“ªä¸ªä¸­æ–­</p>
<h3 id="ä¸­æ–­å“åº”"><a href="#ä¸­æ–­å“åº”" class="headerlink" title="ä¸­æ–­å“åº”"></a>ä¸­æ–­å“åº”</h3><p>å“åº”æ¡ä»¶ï¼š</p>
<ul>
<li><strong>EAä½¿èƒ½</strong></li>
<li><strong>è¯¥ä¸­æ–­å…è®¸ä½ä¹Ÿä½¿èƒ½</strong></li>
<li>æœ‰ä¸­æ–­è¯·æ±‚</li>
<li>æ— åŒçº§æˆ–é«˜çº§ä¸­æ–­æ­£åœ¨è¿è¡Œ</li>
</ul>
<h3 id="ä¸­æ–­å¤„ç†"><a href="#ä¸­æ–­å¤„ç†" class="headerlink" title="ä¸­æ–­å¤„ç†"></a>ä¸­æ–­å¤„ç†</h3><p>ä¸­æ–­æœåŠ¡ç¨‹åº</p>
<h3 id="ä¸­æ–­è¿”å›"><a href="#ä¸­æ–­è¿”å›" class="headerlink" title="ä¸­æ–­è¿”å›"></a>ä¸­æ–­è¿”å›</h3><p>å¤ä½ç½®ä½çš„æ ‡å¿—ä½ï¼Œé‡æ–°æ‰§è¡ŒåŸç¨‹åºï¼ˆPCè¢«å¼¹å‡ºå †æ ˆï¼‰</p>
<h2 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h2><ul>
<li>æ‰“å¼€å¯¹åº”ä¸­æ–­å…è®¸ä½</li>
<li>è®¾ç½®è§¦å‘æ–¹å¼</li>
<li>å¼€å¯æ€»ä¸­æ–­å…è®¸</li>
<li>ç¼–å†™æœåŠ¡å‡½æ•°</li>
</ul>
<h2 id="é¢˜-2"><a href="#é¢˜-2" class="headerlink" title="é¢˜"></a>é¢˜</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/zd1.jpg" class title="This is an image"> 
<h1 id="å®šæ—¶å™¨-è®¡æ•°å™¨"><a href="#å®šæ—¶å™¨-è®¡æ•°å™¨" class="headerlink" title="å®šæ—¶å™¨/è®¡æ•°å™¨"></a>å®šæ—¶å™¨/è®¡æ•°å™¨</h1><h2 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h2><p>T1ã€T2åˆ†åˆ«ç”±ä¸¤ä¸ª8ä½ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨THå’ŒTLç»„æˆã€‚å½“å®ƒå¯¹å¤–éƒ¨äº‹ä»¶è¿›è¡Œè®¡æ•°æ—¶ï¼Œä½œä¸ºè®¡æ•°å™¨ä½¿ç”¨ï¼›å½“å¯¹å†…éƒ¨å›º<strong>å®šé¢‘ç‡çš„æœºå™¨å‘¨æœŸè¿›è¡Œè®¡æ•°æ—¶</strong>ï¼Œä¾¿å¯ä»¥è¾¾åˆ°å®šæ—¶çš„ç›®çš„ã€‚</p>
<h2 id="ä¸¤ç§å·¥ä½œæ¨¡å¼"><a href="#ä¸¤ç§å·¥ä½œæ¨¡å¼" class="headerlink" title="ä¸¤ç§å·¥ä½œæ¨¡å¼"></a>ä¸¤ç§å·¥ä½œæ¨¡å¼</h2><ul>
<li><p>è®¡æ•°å™¨å·¥ä½œæ¨¡å¼</p>
<p>å¯¹å¤–éƒ¨äº‹ä»¶è¿›è¡Œè®¡æ•°ï¼Œè®¡æ•°è„‰å†²æ¥è‡ªP3ä¸­çš„å¯¹åº”å¼•è„šã€‚</p>
<p>ä¸‹é™æ²¿è§¦å‘</p>
<p><strong>æœ€é«˜é¢‘ç‡ä¸ºæŒ¯è¡é¢‘ç‡çš„1/24ï¼Œå› ä¸ºè¯†åˆ«ä¸‹é™æ²¿éœ€è¦2ä¸ªæœºå™¨å‘¨æœŸï¼Œå³24ä¸ªæŒ¯è¡å‘¨æœŸ</strong></p>
</li>
<li><p>å®šæ—¶å™¨å·¥ä½œæ¨¡å¼</p>
<p>è®¡æ•°è„‰å†²ä¸ºå†…éƒ¨æ—¶é’Ÿè„‰å†²ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªæœºå™¨å‘¨æœŸ+1ï¼Œ<strong>å› æ­¤è®¡æ•°é¢‘ç‡ä¸ºæŒ¯è¡é¢‘ç‡çš„1/12</strong>ï¼Œå¾—åˆ°çš„æ—¶é—´ï¼šå®šæ—¶å™¨è®¡æ•°å€¼*æœºå™¨å‘¨æœŸæ—¶é—´</p>
</li>
</ul>
<p>å½“è®¾ç½®å¥½å®šæ—¶å™¨åï¼Œå®šæ—¶å™¨å°±å°†ç‹¬ç«‹å·¥ä½œï¼Œä¸å†å ç”¨CPUï¼Œåªæœ‰æº¢å‡ºæ—¶æ‰ä¼šç”³è¯·ä¸­æ–­ã€‚</p>
<h2 id="æ§åˆ¶å¯„å­˜å™¨"><a href="#æ§åˆ¶å¯„å­˜å™¨" class="headerlink" title="æ§åˆ¶å¯„å­˜å™¨"></a>æ§åˆ¶å¯„å­˜å™¨</h2><h3 id="å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMOD"><a href="#å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMOD" class="headerlink" title="å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMOD"></a>å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMOD</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/tmod.jpg" class title="This is an image"> 
<ul>
<li>GATEï¼šé—¨æ§ä½ï¼Œä½¿ç”¨å¤–éƒ¨ä¸­æ–­å¼•è„šçš„é«˜ç”µå¹³æ¥å¯åŠ¨å®šæ—¶å™¨ï¼ˆå‰ææ˜¯è¯¥å®šæ—¶å™¨å·²è¢«ç½®ä½è¿è¡Œï¼‰</li>
<li>C/(/T)ï¼š1ä¸ºè®¡æ•°å™¨æ¨¡å¼ï¼Œ0ä¸ºå®šæ—¶å™¨æ¨¡å¼</li>
<li>M1ï¼ŒM0ï¼šåŒæ—¶æ§åˆ¶å®šæ—¶å™¨çš„å·¥ä½œæ¨¡å¼ï¼ŒåŒPSWä¸­çš„RSç”¨æ³•</li>
</ul>
<h3 id="æ§åˆ¶å¯„å­˜å™¨TCON"><a href="#æ§åˆ¶å¯„å­˜å™¨TCON" class="headerlink" title="æ§åˆ¶å¯„å­˜å™¨TCON"></a>æ§åˆ¶å¯„å­˜å™¨TCON</h3><p>ä¸Šä¸€èŠ‚ä¸­æ–­ä¸­å·²è®²è¿‡ï¼Œæ§åˆ¶å®šæ—¶å™¨çš„å¼€å¯ã€‚</p>
<h2 id="å®šæ—¶å™¨çš„å·¥ä½œæ–¹å¼"><a href="#å®šæ—¶å™¨çš„å·¥ä½œæ–¹å¼" class="headerlink" title="å®šæ—¶å™¨çš„å·¥ä½œæ–¹å¼"></a>å®šæ—¶å™¨çš„å·¥ä½œæ–¹å¼</h2><h3 id="æ–¹å¼0"><a href="#æ–¹å¼0" class="headerlink" title="æ–¹å¼0"></a>æ–¹å¼0</h3><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/mod0.jpg" class title="This is an image"> 
<p>æ˜“å¾—å…¶å®šæ—¶æ—¶é—´ä¸ºï¼š(2^13 - åˆå€¼)*æœºå™¨å‘¨æœŸ</p>
<p>è®¡ç®—åçš„å€¼ä½5ä½èµ‹ç»™TLï¼Œé«˜8ä½èµ‹ç»™TH</p>
<h3 id="æ–¹å¼1"><a href="#æ–¹å¼1" class="headerlink" title="æ–¹å¼1"></a>æ–¹å¼1</h3><p>16ä½è®¡æ•°å™¨ï¼Œå…¶ä½™ä¸æ–¹å¼0ä¸€æ ·ã€‚</p>
<h3 id="æ–¹å¼2"><a href="#æ–¹å¼2" class="headerlink" title="æ–¹å¼2"></a>æ–¹å¼2</h3><p>æ–¹å¼2ä¸º8ä½å®šæ—¶å™¨</p>
<ul>
<li>TLç”¨ä½œå®šæ—¶ï¼ŒTHç”¨äºä¿å­˜åˆå€¼ã€‚å½“TLæº¢å‡ºåï¼Œä¸­æ–­æ ‡å¿—ç½®ä½ï¼Œ<strong>åŒæ—¶è‡ªåŠ¨å°†THä¸­çš„å€¼é‡æ–°è£…è½½è¿›TL</strong>ï¼Œæ— éœ€ç”¨æˆ·å†æ‰‹åŠ¨é‡æ–°è£…å…¥åˆå€¼ã€‚</li>
</ul>
<p>æ›´åŠ ç²¾å‡†ï¼Œä½†è®¡æ—¶èŒƒå›´å°ã€‚</p>
<h3 id="æ–¹å¼3"><a href="#æ–¹å¼3" class="headerlink" title="æ–¹å¼3"></a>æ–¹å¼3</h3><ul>
<li>åªæœ‰T0èƒ½è¢«è®¾ç½®ä¸ºæ¨¡å¼3ï¼ŒT1è‹¥ä¸ºæ¨¡å¼3ï¼Œåˆ™åœæ­¢è®¡æ•°ï¼Œä¿å­˜åŸæ ·ã€‚</li>
</ul>
<h4 id="T0ä¸ºæ¨¡å¼3æ—¶"><a href="#T0ä¸ºæ¨¡å¼3æ—¶" class="headerlink" title="T0ä¸ºæ¨¡å¼3æ—¶"></a>T0ä¸ºæ¨¡å¼3æ—¶</h4><p>THå’ŒTLåˆ†åˆ«å•ç‹¬å·¥ä½œ</p>
<ul>
<li>TLï¼šä½¿ç”¨T0çš„çŠ¶æ€æ§åˆ¶ä½ï¼ŒåŒæ–¹å¼2ï¼Œä½†æ˜¯æº¢å‡ºåéœ€ç”¨æˆ·æ‰‹åŠ¨è£…å…¥åˆå€¼</li>
<li>THï¼š<strong>è¢«å›ºå®šä¸ºä¸€ä¸ªå†…éƒ¨å®šæ—¶å™¨</strong>ï¼Œå—T1æ§åˆ¶ä½çš„TR1æ§åˆ¶å¯åœï¼ŒåŒä¸Šå ç”¨T1çš„ä¸­æ–­è¯·æ±‚TF1</li>
</ul>
<h4 id="T0ä¸ºæ¨¡å¼3æ—¶ï¼ŒT1çš„è®¾ç½®"><a href="#T0ä¸ºæ¨¡å¼3æ—¶ï¼ŒT1çš„è®¾ç½®" class="headerlink" title="T0ä¸ºæ¨¡å¼3æ—¶ï¼ŒT1çš„è®¾ç½®"></a>T0ä¸ºæ¨¡å¼3æ—¶ï¼ŒT1çš„è®¾ç½®</h4><p>T1ä»å¯è®¾ç½®ä¸ºæ–¹å¼0ã€1ã€2ï¼Œä½†ç”±äºä¸­æ–­è¢«å ç”¨ï¼Œåªèƒ½å°†è¾“å‡ºé€å¾€ä¸²å£</p>
<h2 id="ä½¿ç”¨æµç¨‹"><a href="#ä½¿ç”¨æµç¨‹" class="headerlink" title="ä½¿ç”¨æµç¨‹"></a>ä½¿ç”¨æµç¨‹</h2><ul>
<li>è®¾ç½®æ¨¡å¼TMOD</li>
<li>èµ‹åˆå€¼TLã€TH</li>
<li><p>å¼€å¯ä¸­æ–­ETã€EA</p>
</li>
<li><p>å¼€å¯å®šæ—¶å™¨TR</p>
</li>
</ul>
<h1 id="ä¸²å£é€šä¿¡"><a href="#ä¸²å£é€šä¿¡" class="headerlink" title="ä¸²å£é€šä¿¡"></a>ä¸²å£é€šä¿¡</h1><p>ä¸²è¡Œé€šä¿¡ï¼šæ•°æ®çš„å„ä½åœ¨åŒä¸€æ ¹æ•°æ®çº¿ä¸Šé€ä½å‘é€ã€æ¥æ”¶ã€‚</p>
<p>ä¸²è¡Œé€šä¿¡æŒ‰åŒæ­¥æ–¹å¼åˆ†ä¸ºå¼‚æ­¥é€šä¿¡å’ŒåŒæ­¥é€šä¿¡</p>
<h2 id="åŒæ­¥é€šä¿¡"><a href="#åŒæ­¥é€šä¿¡" class="headerlink" title="åŒæ­¥é€šä¿¡"></a>åŒæ­¥é€šä¿¡</h2><p>æ•°æ®ä¼ è¾“é€Ÿç‡é«˜ï¼Œä½†æ˜¯è¦æ±‚å‘é€æ—¶é’Ÿå’Œæ¥æ”¶æ—¶é’Ÿä¸¥æ ¼åŒæ­¥</p>
<h2 id="å¼‚æ­¥é€šä¿¡"><a href="#å¼‚æ­¥é€šä¿¡" class="headerlink" title="å¼‚æ­¥é€šä¿¡"></a>å¼‚æ­¥é€šä¿¡</h2><p>æ•°æ®ç»„æˆæ•°æ®å¸§æ–¹å¼ï¼Œæ”¶ã€å‘ç«¯ç›¸äº’ç‹¬ç«‹ã€äº’ä¸åŒæ­¥ï¼Œåªéœ€è§„å®šæ”¶å‘æ•°æ®çš„å¸§æ ¼å¼å³å¯ç›¸äº’è¯†åˆ«ã€‚</p>
<h3 id="æ•°æ®å¸§æ ¼å¼"><a href="#æ•°æ®å¸§æ ¼å¼" class="headerlink" title="æ•°æ®å¸§æ ¼å¼"></a>æ•°æ®å¸§æ ¼å¼</h3><ul>
<li>èµ·å§‹ä½ï¼šä½ç”µå¹³æœ‰æ•ˆ</li>
<li>æ•°æ®ä½ï¼š5~8ä½</li>
<li>å¥‡å¶æ ¡éªŒä½</li>
<li>åœæ­¢ä½ï¼šé«˜ç”µå¹³æœ‰æ•ˆ</li>
</ul>
<h3 id="æ³¢ç‰¹ç‡"><a href="#æ³¢ç‰¹ç‡" class="headerlink" title="æ³¢ç‰¹ç‡"></a>æ³¢ç‰¹ç‡</h3><p>æ¯ç§’ä¼ è¾“äºŒè¿›åˆ¶æ•°ç çš„ä½æ•°ï¼Œæ¯ä½çš„ä¼ è¾“æ—¶é—´ä¸º1/æ³¢ç‰¹ç‡</p>
<h2 id="51å•ç‰‡æœºçš„ä¸²å£é€šä¿¡"><a href="#51å•ç‰‡æœºçš„ä¸²å£é€šä¿¡" class="headerlink" title="51å•ç‰‡æœºçš„ä¸²å£é€šä¿¡"></a>51å•ç‰‡æœºçš„ä¸²å£é€šä¿¡</h2><p>51å†…éƒ¨æœ‰ä¸€ä¸ªå¯ç¼–ç¨‹å…¨åŒå·¥ä¸²å£ã€‚</p>
<h3 id="ä¸²å£ç›¸å…³å¯„å­˜å™¨"><a href="#ä¸²å£ç›¸å…³å¯„å­˜å™¨" class="headerlink" title="ä¸²å£ç›¸å…³å¯„å­˜å™¨"></a>ä¸²å£ç›¸å…³å¯„å­˜å™¨</h3><h4 id="ä¸²è¡Œæ•°æ®ç¼“å†²å™¨SBUF"><a href="#ä¸²è¡Œæ•°æ®ç¼“å†²å™¨SBUF" class="headerlink" title="ä¸²è¡Œæ•°æ®ç¼“å†²å™¨SBUF"></a>ä¸²è¡Œæ•°æ®ç¼“å†²å™¨SBUF</h4><p>åŒ…æ‹¬å‘é€å’Œæ¥æ”¶å¯„å­˜å™¨ï¼Œä½†åœ¨é€»è¾‘ä¸Šåªæœ‰ä¸€ä¸ªSBUFï¼Œåœ¨ä½¿ç”¨æ—¶å¯ç”¨ä½œå‘é€å’Œæ¥æ”¶ã€‚ï¼ˆç‰©ç†ä¸Šæœ‰ä¸¤ä¸ªå®Œå…¨ç‹¬ç«‹çš„SBUFï¼Œä½†æ˜¯ä»–ä»¬åœ°å€æ˜¯ä¸€æ ·çš„ï¼‰</p>
<h4 id="ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCON"><a href="#ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCON" class="headerlink" title="ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCON"></a>ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCON</h4><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/scon2.jpg" class title="This is an image"> 
<ul>
<li><p>SM0ã€1å·¥ä½œæ–¹å¼é€‰æ‹©ä½</p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/smod.jpg" class title="This is an image"> 
</li>
<li><p>SM2:å¤šæœºé€šä¿¡æ§åˆ¶ä½</p>
</li>
<li><p>RENï¼š<strong>å…è®¸æ¥æ”¶æ§åˆ¶ä½</strong></p>
</li>
<li><p>TB8ï¼šæ–¹å¼2ã€3çš„<strong>å‘é€</strong>ç¬¬ä¹ä½</p>
</li>
<li><p>RB8ï¼šæ–¹å¼2ã€3çš„æ¥æ”¶ç¬¬ä¹ä½</p>
</li>
</ul>
<h4 id="ç”µæºæ§åˆ¶å¯„å­˜å™¨PCON"><a href="#ç”µæºæ§åˆ¶å¯„å­˜å™¨PCON" class="headerlink" title="ç”µæºæ§åˆ¶å¯„å­˜å™¨PCON"></a>ç”µæºæ§åˆ¶å¯„å­˜å™¨PCON</h4><p>å…¶ä¸­ç¬¬ä¸ƒä½SMODä¸º1æ³¢ç‰¹ç‡åŠ å€</p>
<h2 id="åŸºç¡€æµç¨‹"><a href="#åŸºç¡€æµç¨‹" class="headerlink" title="åŸºç¡€æµç¨‹"></a>åŸºç¡€æµç¨‹</h2><ul>
<li><strong><u>é…ç½®SCON</u></strong></li>
<li><strong><u>æ•°æ®é€å¾€SBUF</u></strong></li>
<li><strong><u>å‘é€ã€æ¥æ”¶æ•°æ®</u></strong></li>
<li><strong><u>ä¸­æ–­ç½®ä½</u></strong></li>
</ul>
<h2 id="é¢˜-3"><a href="#é¢˜-3" class="headerlink" title="é¢˜"></a>é¢˜</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/8.jpg" class title="This is an image"> 
<h1 id="å¸¸ç”¨çš„ä¸€äº›å¯„å­˜å™¨"><a href="#å¸¸ç”¨çš„ä¸€äº›å¯„å­˜å™¨" class="headerlink" title="å¸¸ç”¨çš„ä¸€äº›å¯„å­˜å™¨"></a>å¸¸ç”¨çš„ä¸€äº›å¯„å­˜å™¨</h1><h2 id="ç‰‡å†…ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR"><a href="#ç‰‡å†…ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR" class="headerlink" title="ç‰‡å†…ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR"></a>ç‰‡å†…ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨SFR</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/sfr.jpg" class title="This is an image"> 
<p>å¤§å¤šæ•°ç‰¹æ®Šå¯„å­˜å™¨éƒ½åœ¨è¿™é‡Œï¼Œ<strong>ä½†ä¸åŒ…æ‹¬PCï¼ï¼</strong></p>
<h2 id="ç¨‹åºçŠ¶æ€å¯„å­˜å™¨PSW"><a href="#ç¨‹åºçŠ¶æ€å¯„å­˜å™¨PSW" class="headerlink" title="ç¨‹åºçŠ¶æ€å¯„å­˜å™¨PSW"></a>ç¨‹åºçŠ¶æ€å¯„å­˜å™¨PSW</h2><p>ç”¨äºè¡¨ç¤ºè¿ç®—ç»“æœçš„çŠ¶æ€</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ä½</th>
<th style="text-align:center">7</th>
<th style="text-align:center">6</th>
<th style="text-align:center">5</th>
<th style="text-align:center">4</th>
<th style="text-align:center">3</th>
<th style="text-align:center">2</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ä½å</td>
<td style="text-align:center">Cy</td>
<td style="text-align:center">AC</td>
<td style="text-align:center">F0</td>
<td style="text-align:center">RS1</td>
<td style="text-align:center">RS0</td>
<td style="text-align:center">OV</td>
<td style="text-align:center">F1</td>
<td style="text-align:center">P</td>
</tr>
<tr>
<td style="text-align:center">ä½œç”¨</td>
<td style="text-align:center">è¿›ä½/å€Ÿä½</td>
<td style="text-align:center">è¾…åŠ©è¿›ä½</td>
<td style="text-align:center">è‡ªå®šä¹‰</td>
<td style="text-align:center">å¯„å­˜å™¨é€‰æ‹©</td>
<td style="text-align:center">å¯„å­˜å™¨é€‰æ‹©</td>
<td style="text-align:center">æº¢å‡º</td>
<td style="text-align:center">è‡ªå®šä¹‰</td>
<td style="text-align:center">å¥‡å¶æ•ˆéªŒ</td>
</tr>
</tbody>
</table>
</div>
<h2 id="ä¸­æ–­å…è®¸å¯„å­˜å™¨IEï¼ˆç®¡ç†ä¸­æ–­å…è®¸ï¼‰Eå¼€å¤´"><a href="#ä¸­æ–­å…è®¸å¯„å­˜å™¨IEï¼ˆç®¡ç†ä¸­æ–­å…è®¸ï¼‰Eå¼€å¤´" class="headerlink" title="ä¸­æ–­å…è®¸å¯„å­˜å™¨IEï¼ˆç®¡ç†ä¸­æ–­å…è®¸ï¼‰Eå¼€å¤´"></a>ä¸­æ–­å…è®¸å¯„å­˜å™¨IEï¼ˆç®¡ç†ä¸­æ–­å…è®¸ï¼‰Eå¼€å¤´</h2><p>ç”¨äºç®¡ç†æ‰€æœ‰ä¸­æ–­</p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/ie.jpg" class title="This is an image"> 
<h2 id="ä¸­æ–­ä¼˜å…ˆçº§å¯„å­˜å™¨IPï¼ˆç®¡ç†ä¸­æ–­ä¼˜å…ˆçº§ï¼‰På¼€å¤´"><a href="#ä¸­æ–­ä¼˜å…ˆçº§å¯„å­˜å™¨IPï¼ˆç®¡ç†ä¸­æ–­ä¼˜å…ˆçº§ï¼‰På¼€å¤´" class="headerlink" title="ä¸­æ–­ä¼˜å…ˆçº§å¯„å­˜å™¨IPï¼ˆç®¡ç†ä¸­æ–­ä¼˜å…ˆçº§ï¼‰På¼€å¤´"></a>ä¸­æ–­ä¼˜å…ˆçº§å¯„å­˜å™¨IPï¼ˆç®¡ç†ä¸­æ–­ä¼˜å…ˆçº§ï¼‰På¼€å¤´</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/ip.jpg" class title="This is an image"> 
<p>å¤–éƒ¨ä¸­æ–­2ä½ï¼Œå®šæ—¶å™¨2ä½ï¼Œä¸²å£1ä½ï¼Œå…±5ä½</p>
<h2 id="å®šæ—¶å™¨å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMODï¼ˆç®¡ç†å®šæ—¶å™¨å·¥ä½œæ¨¡å¼ï¼‰"><a href="#å®šæ—¶å™¨å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMODï¼ˆç®¡ç†å®šæ—¶å™¨å·¥ä½œæ¨¡å¼ï¼‰" class="headerlink" title="å®šæ—¶å™¨å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMODï¼ˆç®¡ç†å®šæ—¶å™¨å·¥ä½œæ¨¡å¼ï¼‰"></a>å®šæ—¶å™¨å·¥ä½œæ¨¡å¼å¯„å­˜å™¨TMODï¼ˆç®¡ç†å®šæ—¶å™¨å·¥ä½œæ¨¡å¼ï¼‰</h2><p>8ä½ï¼Œä¸‹4ä½æ§åˆ¶T0ï¼Œä¸Š4ä½æ§åˆ¶T1</p>
<h2 id="å®šæ—¶å™¨ä¸­æ–­æ§åˆ¶å¯„å­˜å™¨TCONï¼ˆç®¡ç†å®šæ—¶å™¨å¯åŠ¨ã€å®šæ—¶å™¨å’Œå¤–éƒ¨ä¸­æ–­çš„ä¸­æ–­æ ‡å¿—ä½ï¼‰"><a href="#å®šæ—¶å™¨ä¸­æ–­æ§åˆ¶å¯„å­˜å™¨TCONï¼ˆç®¡ç†å®šæ—¶å™¨å¯åŠ¨ã€å®šæ—¶å™¨å’Œå¤–éƒ¨ä¸­æ–­çš„ä¸­æ–­æ ‡å¿—ä½ï¼‰" class="headerlink" title="å®šæ—¶å™¨ä¸­æ–­æ§åˆ¶å¯„å­˜å™¨TCONï¼ˆç®¡ç†å®šæ—¶å™¨å¯åŠ¨ã€å®šæ—¶å™¨å’Œå¤–éƒ¨ä¸­æ–­çš„ä¸­æ–­æ ‡å¿—ä½ï¼‰"></a>å®šæ—¶å™¨ä¸­æ–­æ§åˆ¶å¯„å­˜å™¨TCONï¼ˆç®¡ç†å®šæ—¶å™¨å¯åŠ¨ã€å®šæ—¶å™¨å’Œå¤–éƒ¨ä¸­æ–­çš„ä¸­æ–­æ ‡å¿—ä½ï¼‰</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/tcon.jpg" class title="This is an image"> 
<p>å…¶ä¸­ITå’ŒIEä¸ºæ§åˆ¶å¤–éƒ¨ä¸­æ–­çš„ä½</p>
<p>éœ€è¦æ“ä½œçš„ä½åªæœ‰ITå’ŒTRï¼Œå…¶ä»–éƒ½ä¼šè‡ªåŠ¨å¤ä½</p>
<h2 id="ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCONï¼ˆç®¡ç†ä¸²å£ä¸­æ–­ä½å’Œä¸²å£é…ç½®ï¼‰"><a href="#ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCONï¼ˆç®¡ç†ä¸²å£ä¸­æ–­ä½å’Œä¸²å£é…ç½®ï¼‰" class="headerlink" title="ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCONï¼ˆç®¡ç†ä¸²å£ä¸­æ–­ä½å’Œä¸²å£é…ç½®ï¼‰"></a>ä¸²è¡Œæ§åˆ¶å¯„å­˜å™¨SCONï¼ˆç®¡ç†ä¸²å£ä¸­æ–­ä½å’Œä¸²å£é…ç½®ï¼‰</h2><img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/scon2.jpg" class title="This is an image"> 
<h2 id="ç”µæºæ§åˆ¶å¯„å­˜å™¨PCONï¼ˆæ³¢ç‰¹ç‡ç¿»å€ï¼‰"><a href="#ç”µæºæ§åˆ¶å¯„å­˜å™¨PCONï¼ˆæ³¢ç‰¹ç‡ç¿»å€ï¼‰" class="headerlink" title="ç”µæºæ§åˆ¶å¯„å­˜å™¨PCONï¼ˆæ³¢ç‰¹ç‡ç¿»å€ï¼‰"></a>ç”µæºæ§åˆ¶å¯„å­˜å™¨PCONï¼ˆæ³¢ç‰¹ç‡ç¿»å€ï¼‰</h2><p>ä»…ä¸²å£ä¸­éœ€ä½¿ç”¨å…¶ç¬¬ä¸ƒä½ç¿»å€æ³¢ç‰¹ç‡</p>
<h1 id="é¢˜-4"><a href="#é¢˜-4" class="headerlink" title="é¢˜"></a>é¢˜</h1><ul>
<li><p>å †æ ˆçš„ä½œç”¨ï¼šä¿æŠ¤ç°åœºå’Œæ–­ç‚¹</p>
</li>
<li><p>JBä¸ºåˆ¤æ–­å½“å‰ä½ï¼Œä¸º1åˆ™è·³è½¬</p>
</li>
</ul>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/wxz.jpg" class title="This is an image"> 
<p>å¦‚æœæ˜¯Aï¼Œå°±æ˜¯ç›´æ¥å¯»å€ï¼ŒCåˆ™ä¸ºä½å¯»å€ï¼Œä½å¯»å€åªèƒ½æ“ä½œä½</p>
<img src="/images/loading.png" data-original="/2022/11/28/%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%8D%E4%B9%A0/ct.jpg" class title="This is an image"> 
<ul>
<li>C/(/T)ï¼š<strong>0ä¸ºå®šæ—¶å™¨æ¨¡å¼</strong></li>
</ul>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„_é“¾è¡¨</title>
    <url>/2022/11/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/</url>
    <content><![CDATA[<h1 id="1-é“¾è¡¨çš„æ¦‚å¿µ"><a href="#1-é“¾è¡¨çš„æ¦‚å¿µ" class="headerlink" title="1.é“¾è¡¨çš„æ¦‚å¿µ"></a>1.é“¾è¡¨çš„æ¦‚å¿µ</h1><p>é€šè¿‡å¤šä¸ª<strong>èŠ‚ç‚¹</strong>å°†å¤šä¸ªæ•°æ®å…ƒç´ ç»„æˆä¸€ä¸ªé“¾è¡¨ã€‚</p>
<ul>
<li>èŠ‚ç‚¹ï¼šæ•°æ®å…ƒç´ çš„å­˜å‚¨æ˜ åƒï¼Œ ç”±<strong>æ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸ</strong>ä¸¤éƒ¨åˆ†ç»„æˆã€‚</li>
</ul>
<p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>æ•°æ®å…ƒç´ çš„ä¸ªæ•°å¯ä»¥è‡ªç”±æ‰©å……</li>
<li>æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œä¸å¿…ç§»åŠ¨æ•°æ®ï¼Œåªéœ€ä¿®æ”¹é“¾æ¥æŒ‡é’ˆï¼Œä¿®æ”¹æ•ˆç‡è¾ƒé«˜</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>å­˜å‚¨å¯†åº¦å°</li>
<li>å­˜å–æ•ˆç‡ä¸é«˜ï¼Œå¿…é¡»é‡‡ç”¨é¡ºåºå­˜å–ï¼Œå³å­˜å–æ•°æ®å…ƒç´ æ—¶ï¼Œåªèƒ½æŒ‰é“¾è¡¨çš„é¡ºåºè¿›è¡Œè®¿é—®ï¼ˆé¡ºè—¤æ‘¸ç“œï¼‰</li>
</ul>
<h1 id="2-åˆ›å»ºä¸€ä¸ªå•å‘åˆ—è¡¨"><a href="#2-åˆ›å»ºä¸€ä¸ªå•å‘åˆ—è¡¨" class="headerlink" title="2.åˆ›å»ºä¸€ä¸ªå•å‘åˆ—è¡¨"></a>2.åˆ›å»ºä¸€ä¸ªå•å‘åˆ—è¡¨</h1><p>å•å‘åˆ—è¡¨å³æ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è”ç³»æ˜¯å•å‘çš„ï¼Œä»…é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆé“¾æ¥ã€‚</p>
<p>åˆ›å»ºåˆ—è¡¨æœ‰ä¸¤ç§æ–¹æ³•ï¼šå‰æ’æ³•å’Œåæ’æ³•ã€‚</p>
<h2 id="å‰æ’æ³•"><a href="#å‰æ’æ³•" class="headerlink" title="å‰æ’æ³•"></a>å‰æ’æ³•</h2><p>æ–°çš„èŠ‚ç‚¹é“¾æ¥åˆ°ä¸Šä¸€èŠ‚ç‚¹çš„å¼€å¤´</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">list</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> num; 	<span class="comment">//æ•°æ®åŸŸ</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list</span> *<span class="title">last</span>;</span>	<span class="comment">//æŒ‡é’ˆåŸŸ</span></span><br><span class="line">&#125;test;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setlist</span><span class="params">(test* linkhead, <span class="type">int</span> data)</span></span><br><span class="line">&#123;</span><br><span class="line">   test *tmp=(test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test));<span class="comment">//åˆ†é…åŠ¨æ€å†…å­˜ï¼Œé˜²æ­¢ç”Ÿæˆé‡æŒ‡é’ˆ</span></span><br><span class="line">   tmp-&gt;num=data;</span><br><span class="line">   tmp-&gt;last=linkhead-&gt;last;</span><br><span class="line">   linkhead-&gt;last=tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> a[<span class="number">3</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">   <span class="type">int</span> i;</span><br><span class="line">   test* head=(test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test));</span><br><span class="line">   head-&gt;last=<span class="literal">NULL</span>;</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;++i)</span><br><span class="line">   &#123;</span><br><span class="line">      setlist(head,a[i]);</span><br><span class="line">   &#125;</span><br><span class="line">   test* p= head-&gt;last;</span><br><span class="line">   <span class="keyword">while</span>(p!=<span class="literal">NULL</span>)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,p-&gt;num);</span><br><span class="line">      p=p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‰æ’æ³•åˆ›å»ºé“¾è¡¨çš„æ­¥éª¤ä¸ºï¼ˆä»¥åˆ›å»ºä¸¤ä¸ªèŠ‚ç‚¹ä¸ºä¾‹ï¼‰:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">setlist</span><span class="params">(test* linkhead, <span class="type">int</span> data)</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">//å¼€è¾Ÿä¸€ä¸ªæ–°èŠ‚ç‚¹</span></span><br><span class="line">   test *tmp=(test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test));</span><br><span class="line">   <span class="comment">//å†™å…¥éœ€è¦çš„æ•°æ®</span></span><br><span class="line">   tmp-&gt;num=data;</span><br><span class="line">   <span class="comment">//å°†èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸæŒ‡å‘linkheadçš„æŒ‡é’ˆåŸŸ</span></span><br><span class="line">   tmp-&gt;last=linkhead-&gt;last;</span><br><span class="line">   <span class="comment">//å°†linkheadçš„æŒ‡é’ˆåŸŸæŒ‡å‘æ–°èŠ‚ç‚¹é¦–åœ°å€</span></span><br><span class="line">   linkhead-&gt;last=tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ›å»ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œè¯¥èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸå…ˆæŒ‡å‘NULLåï¼ŒlinkheadæŒ‡é’ˆåŸŸå†æŒ‡å‘è¯¥èŠ‚ç‚¹é¦–åœ°å€ã€‚</p>
<p>å½“åˆšåˆ›å»ºç¬¬äºŒä¸ªèŠ‚ç‚¹æ—¶ï¼Œæƒ…å†µå¦‚ä¸‹ï¼š</p>
<img src="/images/loading.png" data-original="/2022/11/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/1.jpg" class title="This is an image"> 
<p>å½“æ‰§è¡Œ<code>tmp-&gt;last=linkhead-&gt;last;</code>æ—¶ï¼Œç”±äºlinkheadçš„æŒ‡é’ˆåŸŸæ­¤æ—¶æŒ‡å‘tmp(1)ï¼ˆè¿™é‡Œçš„1æŒ‡ç¬¬ä¸€å—èŠ‚ç‚¹çš„å†…å­˜ç©ºé—´ï¼‰çš„é¦–åœ°å€ï¼Œ<strong>æ‰€ä»¥tmp(2)çš„æŒ‡é’ˆåŸŸä¼šé€šè¿‡linkheadç›´æ¥ä¹ŸæŒ‡å‘tmp(1)çš„é¦–åœ°å€:</strong></p>
<img src="/images/loading.png" data-original="/2022/11/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/2.jpg" class title="This is an image"> 
<p>è¿™æ ·ä¹‹åï¼Œä¸¤ä¸ªèŠ‚ç‚¹å°±é€šè¿‡æŒ‡é’ˆé“¾æ¥åœ¨äº†ä¸€èµ·ï¼Œä¸”tmp(2)åœ¨tmp(1)ä¹‹å‰ã€‚</p>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œå‰æ’æ³•çš„åŸç†å°±æ˜¯ä»¥linkheadä¸ºåª’ä»‹æ¥é“¾æ¥èŠ‚ç‚¹ï¼Œ<strong>linkheadæœ¬èº«æ˜¯ä¸å­˜å‚¨æ•°æ®çš„</strong></p>
<p>æœ€åï¼Œæ‰§è¡Œ<code>linkhead-&gt;last=tmp;</code>ï¼Œ<strong>å°†linkheadæŒ‡é’ˆåŸŸæŒ‡å‘ç¬¬äºŒä¸ªèŠ‚ç‚¹é¦–åœ°å€ï¼Œä»¥ä¾›ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸæ‰¾åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</strong></p>
<img src="/images/loading.png" data-original="/2022/11/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/3.jpg" class title="This is an image"> 
<p>ä»¥æ­¤ç±»æ¨ï¼Œå‡å¦‚ç°åœ¨åˆ›å»ºäº†4ä¸ªèŠ‚ç‚¹ï¼Œé‚£æƒ…å†µå°±åº”è¯¥åƒè¿™æ ·ï¼š</p>
<img src="/images/loading.png" data-original="/2022/11/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/4.jpg" class title="This is an image"> 
<p>åœ¨ä¾‹ç¨‹ä¸­ï¼Œç”±äºå‰æ’æ³•å¾—åˆ°çš„é“¾è¡¨é¡ºåºä¸ºæœ€åè¾“å…¥çš„æ•°æ®å¼€å§‹ï¼Œæ‰€ä»¥æœ€åæ‰“å°çš„ç»“æœä¸º3 2 1</p>
<h2 id="å°¾æ’æ³•"><a href="#å°¾æ’æ³•" class="headerlink" title="å°¾æ’æ³•"></a>å°¾æ’æ³•</h2><p>ç›¸å¯¹äºå‰æ’æ³•ï¼Œå°¾æ’æ³•ä½¿ç”¨èµ·æ¥é€»è¾‘ä¼šæ›´åŠ æ¸…æ™°ï¼Œå› ä¸ºå…¶é“¾æ¥é¡ºåºæ˜¯åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹åï¼Œæ‰€ä»¥å°¾æ’æ³•è¦æ›´å®¹æ˜“ç†è§£ä¸€äº›ã€‚</p>
<p>åœ¨<a href="https://dhkkk.gitee.io/2022/08/01/C-ç»“æ„ä½“/">ç»“æ„ä½“å¤ä¹  | å°è‘£çš„BLOG (gitee.io)</a>ä¸­è®²åˆ°çš„åˆ—è¡¨å°±æ˜¯ä½¿ç”¨çš„å°¾æ’æ³•ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">list</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> num;</span><br><span class="line">	<span class="type">char</span> name[<span class="number">30</span>];</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;test;</span><br><span class="line"></span><br><span class="line">test *<span class="title function_">creat</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	test *linkhead,*linkend,*tmp;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		tmp=(test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test));<span class="comment">//åˆ†é…åŠ¨æ€å†…å­˜</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %s&quot;</span>,&amp;tmp-&gt;num,tmp-&gt;name);</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			linkhead=tmp;<span class="comment">//ç¬¬ä¸€æ¬¡å…ˆå°†å½“å‰èŠ‚ç‚¹èµ‹ç»™é“¾å¤´é“¾å°¾</span></span><br><span class="line">			linkend=tmp;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span><span class="comment">//è‹¥ä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå…ˆå°†å½“å‰èŠ‚ç‚¹å­˜å…¥ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextä¸­ï¼Œå†å°†linkendæ›´æ–°ä¸ºå½“å‰èŠ‚ç‚¹ä»¥ä¾›ä¸‹ä¸€æ¬¡è®¿é—®</span></span><br><span class="line">		&#123;                                                                <span class="comment">//å½“å‰èŠ‚ç‚¹çš„next</span></span><br><span class="line">			linkend-&gt;next=tmp;<span class="comment">//é€šè¿‡linkendç›´æ¥æŒ‡å‘å†…å­˜ä¸­çš„ä¸€ä¸ªstruct listå˜é‡ä½¿å…¶æŒ‡å‘tmpçš„å†…å­˜</span></span><br><span class="line">			linkend=tmp;</span><br><span class="line">         <span class="comment">//ä»¥ç¬¬äºŒä¸ªèŠ‚ç‚¹ä¸ºä¾‹ï¼Œå…ˆå°†ç¬¬linkendï¼ˆä¹Ÿå°±æ˜¯tmp(1)ï¼‰çš„æŒ‡é’ˆåŸŸæŒ‡å‘äºŒä¸ªèŠ‚ç‚¹é¦–åœ°å€</span></span><br><span class="line">         <span class="comment">//å†å°†linkendæŒ‡å‘tmp(2)ï¼Œä»¥ä¾›åé¢çš„èŠ‚ç‚¹é‡å¤23ã€24è¡Œçš„æ“ä½œ</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	linkend-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> linkhead;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¯´å‰æ’æ³•æ˜¯é€šè¿‡linkheadä¸ºåª’ä»‹è¿›è¡Œé“¾æ¥ï¼Œé‚£å°¾æ’æ³•å°±æ˜¯é€šè¿‡linkendä¸ºåª’ä»‹é“¾æ¥å„èŠ‚ç‚¹ã€‚</p>
<h1 id="3-åŒå‘é“¾è¡¨çš„åˆ›å»º"><a href="#3-åŒå‘é“¾è¡¨çš„åˆ›å»º" class="headerlink" title="3.åŒå‘é“¾è¡¨çš„åˆ›å»º"></a>3.åŒå‘é“¾è¡¨çš„åˆ›å»º</h1><p>åŒæ ·åˆ†ä¸ºä½¿ç”¨å‰æ’æ³•å’Œåæ’æ³•ï¼Œä½†æ˜¯å°¾æ’æ³•ä¼šç®€å•å¾ˆå¤šï¼Œæ‰€ä»¥å…ˆè®²ä¸€ä¸‹å°¾æ’æ³•</p>
<h2 id="å°¾æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨"><a href="#å°¾æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨" class="headerlink" title="å°¾æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨"></a>å°¾æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">list</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> num;</span><br><span class="line">	<span class="type">char</span> name[<span class="number">30</span>];</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list</span> *<span class="title">last</span>;</span>	<span class="comment">//å­˜æ”¾ä¸Šä¸€èŠ‚ç‚¹</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list</span> *<span class="title">next</span>;</span>	<span class="comment">//å­˜æ”¾ä¸‹ä¸€èŠ‚ç‚¹</span></span><br><span class="line">&#125;test;</span><br><span class="line"></span><br><span class="line">test *<span class="title function_">creat</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	test *linkhead,*linkend,*tmp;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		tmp=(test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test)); </span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %s&quot;</span>,&amp;tmp-&gt;num,tmp-&gt;name);</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			linkhead=tmp;</span><br><span class="line">			linkend=tmp;</span><br><span class="line">			linkhead-&gt;last=<span class="literal">NULL</span>; <span class="comment">//å› ä¸ºé“¾å¤´æ²¡æœ‰ä¸Šä¸€èŠ‚ç‚¹ï¼Œå›ºå…¶lastæŒ‡é’ˆåŸŸæŒ‡å‘NULL</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			tmp-&gt;last=linkend;	<span class="comment">//æŠŠä¸Šä¸€èŠ‚ç‚¹åœ°å€å­˜å…¥æœ¬èŠ‚ç‚¹çš„lastæŒ‡é’ˆä¸­</span></span><br><span class="line">			linkend-&gt;next=tmp;</span><br><span class="line">			linkend=tmp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	linkend-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> linkhead;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°¾æ’æ³•ç”±äºå…¶åˆ›å»ºé“¾è¡¨çš„æ–¹å¼ä¸ºé¡ºåºåˆ›å»ºï¼Œå› æ­¤åªéœ€åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šæ·»åŠ å­˜æ”¾ä¸Šä¸€èŠ‚ç‚¹çš„æŒ‡é’ˆå°±è¡Œäº†</p>
<p>ä½¿ç”¨åŒå‘é“¾è¡¨ä¼šå¢åŠ å†…å­˜ï¼Œä½†æ˜¯å°±å¯ä»¥é€šè¿‡ä»»æ„èŠ‚ç‚¹æ‰¾åˆ°å…¶ä»–èŠ‚ç‚¹äº†ã€‚</p>
<h2 id="ä½¿ç”¨å‰æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨"><a href="#ä½¿ç”¨å‰æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨" class="headerlink" title="ä½¿ç”¨å‰æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨"></a>ä½¿ç”¨å‰æ’æ³•åˆ›å»ºåŒå‘é“¾è¡¨</h2><p>ä½¿ç”¨å‰æ’æ³•çš„è¯ä¼šç¨å¾®éº»çƒ¦ä¸€äº›ï¼Œè€Œä¸”ç†è§£èµ·æ¥ä¹Ÿä¼šæœ‰ç‚¹ç»•ï¼Œæ„Ÿè§‰ç”¨å°¾æ’æ³•å¥½ä¸€äº›ã€‚</p>
<p>ï¼ˆè¿™æ˜¯æˆ‘è‡ªå·±å†™çš„æ–¹æ³•ï¼Œæ„Ÿè§‰æœ‰ç‚¹ç»•ï¼‰</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">list</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> num; 	<span class="comment">//æ•°æ®åŸŸ</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list</span> *<span class="title">last</span>;</span>	</span><br><span class="line">   <span class="class"><span class="keyword">struct</span> <span class="title">list</span> *<span class="title">next</span>;</span>	</span><br><span class="line">&#125;test;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> time=<span class="number">1</span>;</span><br><span class="line">test* <span class="title function_">InsertList</span><span class="params">(test *head,<span class="type">int</span> val)</span></span><br><span class="line">&#123;</span><br><span class="line">   test *tmp,*end;</span><br><span class="line">   tmp=(test *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span> (test));</span><br><span class="line">	<span class="keyword">if</span>(time==<span class="number">1</span>) <span class="comment">//å»ºç«‹ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ—¶å°†è¯¥èŠ‚ç‚¹ä½œä¸ºé“¾å°¾</span></span><br><span class="line">	&#123;</span><br><span class="line">		tmp-&gt;num=val;</span><br><span class="line">		tmp-&gt;last=head-&gt;last;</span><br><span class="line">		head-&gt;last=tmp;	</span><br><span class="line">		end=tmp;	<span class="comment">//endä½œä¸ºé“¾å°¾å°†ä¸€ç›´æŒ‡å‘ç¬¬ä¸€ä¸ªå»ºç«‹çš„èŠ‚ç‚¹ï¼Œåç»­ä¸å†æ”¹å˜end</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		tmp-&gt;num=val;</span><br><span class="line">		tmp-&gt;last=head-&gt;last;</span><br><span class="line">		head-&gt;last-&gt;next=tmp;	<span class="comment">//å°†ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼ˆæœ‰ç‚¹å¥—å¨ƒçš„æ„Ÿè§‰ï¼‰</span></span><br><span class="line">		head-&gt;last=tmp;</span><br><span class="line">		tmp-&gt;next=<span class="literal">NULL</span>; <span class="comment">//æ¯ä¸ªèŠ‚ç‚¹çš„nextå…ˆæ¸…é›¶ï¼Œä¸ºäº†è®©æœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘null</span></span><br><span class="line">	&#125;</span><br><span class="line">	++time;</span><br><span class="line">	<span class="keyword">return</span> end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> a[<span class="number">3</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">   <span class="type">int</span> i;</span><br><span class="line">   test *linkhead, *linkend;</span><br><span class="line">   linkhead=(test *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span> (test));</span><br><span class="line">   linkhead-&gt;last=<span class="literal">NULL</span>;</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">2</span>;i&gt;=<span class="number">0</span>;--i) <span class="comment">//ç”±äºæ˜¯å‰æ’æ³•ï¼Œæ‰€ä»¥è¾“å…¥å€’åºè¾“å…¥</span></span><br><span class="line">   &#123;</span><br><span class="line">      linkend=InsertList(linkhead,a[i]);</span><br><span class="line">   &#125;</span><br><span class="line">   test *p1,*p2;</span><br><span class="line">   p1=linkhead-&gt;last;</span><br><span class="line">   p2=linkend;</span><br><span class="line">   <span class="keyword">while</span>(p1!=<span class="literal">NULL</span>)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,p1-&gt;num);</span><br><span class="line">      p1=p1-&gt;last;      </span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">while</span>(p2!=<span class="literal">NULL</span>)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,p2-&gt;num);</span><br><span class="line">      p2=p2-&gt;next;      </span><br><span class="line">   &#125;</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/images/loading.png" data-original="/2022/11/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/5.jpg" class title="This is an image"> 
<p>åœ¨å†™è¿™ä¸ªåŒå‘é“¾è¡¨æ—¶æˆ‘é‡è§äº†ä¸ªé—®é¢˜ï¼šå¯¹äºlinkendå˜é‡ï¼Œæˆ‘åœ¨ä¸»å‡½æ•°ä¸­å®šä¹‰åï¼Œåƒé€šè¿‡åƒlinkheadä¸€æ ·çš„æ–¹å¼å¯¹linkendè¿›è¡Œæ”¹å˜ï¼Œä½†æ˜¯å§‹ç»ˆæ— æ³•å®ç°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">InsertList</span><span class="params">(test *head,test *end;<span class="type">int</span> val)</span></span><br><span class="line">&#123;</span><br><span class="line">   test *tmp,*end;</span><br><span class="line">   tmp=(test *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span> (test));</span><br><span class="line">	<span class="keyword">if</span>(time==<span class="number">1</span>) </span><br><span class="line">	&#123;</span><br><span class="line">		tmp-&gt;num=val;</span><br><span class="line">		tmp-&gt;last=head-&gt;last;</span><br><span class="line">		head-&gt;last=tmp;	</span><br><span class="line">		end=tmp;	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		tmp-&gt;num=val;</span><br><span class="line">		tmp-&gt;last=head-&gt;last;</span><br><span class="line">		head-&gt;last-&gt;next=tmp;	</span><br><span class="line">		head-&gt;last=tmp;</span><br><span class="line">		tmp-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	++time;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   test *linkhead, *linkend;</span><br><span class="line">   linkhead=(test *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span> (test));</span><br><span class="line">   linkhead-&gt;last=<span class="literal">NULL</span>;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨ä¸»å‡½æ•°ä¸­æ²¡æœ‰å¯¹linkendåˆ†é…å†…å­˜ï¼Œlinkendå°†æˆä¸ºä¸€ä¸ªé‡æŒ‡é’ˆï¼Œæ— æ³•æŒ‡å‘å­—ç¬¦å€¼å¸¸é‡ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåˆ†é…äº†å†…å­˜ï¼Œç”±äºlinkheadæ˜¯é€šè¿‡lastæˆå‘˜æ¥å¯»æ‰¾é“¾è¡¨ï¼Œä½†æ˜¯linkendå´æ— æ³•åƒlinkheadä¸€æ ·æ­£å¸¸å®ç°åŠŸèƒ½ï¼Œåœ¨ç»è¿‡æ•´æ•´ä¸€å¤©çš„æŸ¥æ‰¾èµ„æ–™ï¼†è°ƒè¯•åï¼Œç»ˆäºå‘ç°äº†åŸå› ï¼š</p>
<p>å½“ä¸€ä¸ªå‡½æ•°çš„å½¢å‚æ˜¯ç»“æ„ä½“æŒ‡é’ˆæ—¶ï¼Œ<strong>è¿™ä¸ªå½¢å‚æœ¬èº«çš„åœ°å€ï¼ˆä¸æ˜¯æ‰€æŒ‡å‘çš„åœ°å€ï¼‰å’Œå®å‚çš„åœ°å€ï¼ˆä¹Ÿä¸æ˜¯æ‰€æŒ‡å‘çš„åœ°å€ï¼‰æ˜¯ä¸åŒçš„</strong>ã€‚ç”¨ä¾‹ç¨‹ä¸¾ä¾‹ï¼š</p>
<ul>
<li><strong>&amp;linkendâ‰ &amp;endï¼Œ</strong>å› æ­¤ï¼Œ<strong>åœ¨å‡½æ•°ä¸­æ”¹å˜å½¢å‚endæ‰€æŒ‡å‘çš„å†…å®¹æ˜¯å®Œå…¨ä¸ä¼šå½±å“å®å‚linkendçš„ï¼Œå› ä¸ºæ­¤æ—¶è¿™ä¸¤ä½å¯ä»¥ç†è§£æˆä¸¤ä¸ªå˜é‡</strong></li>
</ul>
<p>é‚£è¿™æ—¶å¤§å®¶è‚¯å®šä¼šæœ‰ä¸ªç–‘æƒ‘ï¼šé‚£linkheadä¸ºä»€ä¹ˆå°±å¯ä»¥å®ç°æƒ³è¦é“¾è¡¨åŠŸèƒ½å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»”ç»†çœ‹InsertListå‡½æ•°ä¸­çš„å†…å®¹ï¼Œä½ è‚¯å®šä¼šå‘ç°ï¼Œå‡½æ•°ä¸­æ²¡æœ‰å‡ºç°ç›´æ¥æ“ä½œlinkheadçš„æ“ä½œï¼Œåªæœ‰æ“ä½œlinkheadæˆå‘˜çš„æ“ä½œï¼Œ<strong>è¿™é‡Œå°±å¼•å‡ºäº†ä¸€ä¸ªæŠ˜ç£¨äº†æˆ‘åŠå¤©çš„çŸ¥è¯†ç‚¹</strong>ï¼š</p>
<ul>
<li><p>å¯¹äºä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆå½¢å‚ï¼Œå½¢å‚åçš„åœ°å€å’Œå®å‚åçš„åœ°å€æ˜¯ä¸èƒ½åˆ’ç­‰å·çš„ï¼Œ<strong>ä½†æ˜¯å½¢å‚æˆå‘˜çš„åœ°å€å’Œå®å‚æˆå‘˜çš„åœ°å€æ˜¯å®Œå…¨ç›¸åŒçš„</strong>ï¼Œç”¨ä¾‹ç¨‹ä¸¾ä¸ªä¾‹å­</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&amp;linkendâ‰ &amp;end</span><br><span class="line">linkend-&gt;next=end-&gt;next      (=æ˜¯ç­‰äºçš„æ„æ€ï¼Œä¸æ˜¯èµ‹å€¼çš„æ„æ€)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å…¶å®è¿™é‡Œçš„è§£é‡Šæœ‰ç‚¹ç±»ä¼¼äºåœ¨<a href="https://dhkkk.gitee.io/2022/08/01/C-ç»“æ„ä½“/">ç»“æ„ä½“å¤ä¹  | å°è‘£çš„BLOG (gitee.io)</a>æœ€åæˆ‘å¯¹ä¸€é‡æŒ‡é’ˆçš„è§£é‡Šï¼š</p>
<ul>
<li><strong>å‡å¦‚æœ‰ä¸¤ä¸ªå¹¶åˆ—çš„æŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå˜é‡ï¼Œä½ ä¸èƒ½é€šè¿‡æ”¹å˜å…¶ä¸­ä¸€ä¸ªæŒ‡é’ˆçš„æŒ‡å‘æ¥å½±å“å¦ä¸€ä¸ªæŒ‡é’ˆçš„æŒ‡å‘</strong></li>
</ul>
<p>é‚£ä¹ˆè¿™æ—¶åˆå¼•å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå½¢å‚endå’Œå®å‚linkendæŒ‡å‘å“ªé‡Œï¼Ÿ</p>
<p>å…ˆè¯´ä¸€ä¸‹ç»“è®ºï¼š<strong>linkendå’Œendéƒ½æŒ‡å‘linkendçš„ç¬¬ä¸€ä¸ªæˆå‘˜numçš„åœ°å€ã€‚</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å½¢å‚endå’Œå®å‚linkendä½œä¸ºä¸¤ä¸ªä¸åŒçš„æŒ‡é’ˆå˜é‡ï¼Œä»–ä»¬æŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€</strong>ï¼ˆä¹Ÿè®¸å¯ä»¥é€šè¿‡è¿™ä¸€ç‰¹æ€§æ¥å†™ä¸€ä¸ªé“¾è¡¨ï¼Ÿä½†æ˜¯æˆ‘ä¸æƒ³å†™äº†ğŸ˜‹ï¼‰</p>
<p>å…¶å®è¿™ä¸ªçŸ¥è¯†ç‚¹ç¬¦åˆæˆ‘ä»¬å¯¹å½¢å‚å’ŒæŒ‡é’ˆå˜é‡çš„è®¤çŸ¥ï¼Œæ‰€ä»¥è¿™é‡Œæ¯”è¾ƒé‡è¦çš„ç‚¹å…¶å®æ˜¯ï¼š</p>
<ul>
<li>ä¸åŒäºæ•°ç»„ï¼Œ<strong>ç»“æ„ä½“æŒ‡é’ˆååœ°å€â‰ ç¬¬ä¸€ä¸ªæˆå‘˜çš„åœ°å€ï¼Œä½†æŒ‡é’ˆåæŒ‡å‘ç¬¬ä¸€ä¸ªæˆå‘˜çš„åœ°å€</strong>ï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œç»“æ„ä½“æŒ‡é’ˆåæŒ‡å‘ä¸€å—å†…å­˜ï¼Œè¯¥å†…å­˜æ˜¯ç”±è‹¥å¹²ä¸ªç»“æ„ä½“æˆå‘˜ç»„æˆçš„ï¼Œè¿™äº›æˆå‘˜çš„ç±»å‹åœ¨å®šä¹‰ç»“æ„ä½“æ—¶ç¡®å®šã€‚</li>
</ul>
<p>è¿™ä¹ŸåŠ æ·±äº†æˆ‘å¯¹<code>end=(LNode*)malloc(sizeof (LNode));</code>çš„ç†è§£ï¼Œ<strong>å…¶å®å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†ä¸€å—å†…å­˜ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç»“æ„ä½“çš„æ–¹å¼è®¿é—®è¿™å—å†…å­˜ä¸­çš„æˆå‘˜</strong></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li><strong>å½“ä¸€ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ç»“æ„ä½“æŒ‡é’ˆæ—¶ï¼Œæ“ä½œè¿™ä¸ªå‡½æ•°çš„å½¢å‚åä¸ä¼šå½±å“å®å‚ï¼ŒåŒæ—¶è¿™ä¸ªå½¢å‚åçš„ä½œç”¨åŸŸåªé™äºå‡½æ•°ä½“ï¼›ä½†æ˜¯æ“ä½œè¿™ä¸ªå½¢å‚çš„ä»»ä½•æˆå‘˜ç­‰åŒäºç›´æ¥æ“ä½œå®å‚çš„å¯¹åº”æˆå‘˜ï¼Œå› ä¸ºå®ƒä»¬æœ¬èº«çš„åœ°å€æ˜¯ç›¸åŒçš„</strong></li>
<li><strong>ç»“æ„ä½“æŒ‡é’ˆåæŒ‡å‘ç¬¬ä¸€ä¸ªæˆå‘˜çš„åœ°å€</strong></li>
</ul>
<p><strong>æ‰€ä»¥ï¼Œç»“æ„ä½“æŒ‡é’ˆå¹¶ä¸ä¸€å®šè¦æŒ‡å‘ä¸€ä¸ªæ˜ç¡®çš„ç»“æ„ä½“ï¼Œå½“ä»–æŒ‡å‘ä¸€å—å†…å­˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥èµ‹å€¼ç»“æ„ä½“æŒ‡é’ˆæˆå‘˜çš„æ–¹å¼æ“ä½œè¿™å—å†…å­˜</strong>ï¼ˆè¿™å—å†…å­˜å…¶å®å°±æ˜¯ä¸€ä¸ªéšå¼çš„ï¼Œæ²¡æœ‰å…·ä½“åå­—çš„ç»“æ„ä½“ï¼‰</p>
<p>ä¸€äº›æ„Ÿæƒ³ï¼šå¥½ä¹…æ²¡æœ‰é‡åˆ°è¿‡è¿™ä¹ˆæŠ˜ç£¨çš„é—®é¢˜äº†ï¼Œä¸€å¼€å§‹å®Œå…¨æ²¡æœ‰å¤´ç»ªï¼Œç½‘ç»œä¸Šå¯¹äºè¿™æ–¹é¢çš„è®²è§£ä¹Ÿæ˜¯å‡ ä¹æ²¡æœ‰ï¼Œè¿˜å¥½æ‰¾åˆ°äº†è¿™ç¯‡åšå®¢å¯å‘äº†æˆ‘<a href="https://blog.csdn.net/qq_36733983/article/details/92184983?ops_request_misc=%7B%22request%5Fid%22%3A%22166891705416800213084052%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=166891705416800213084052&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-92184983-null-null.142^v65^pc_rank_34_queryrelevant25,201^v3^add_ask,213^v2^t3_esquery_v3&amp;utm_term=C æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ä½œç”¨åŸŸ&amp;spm=1018.2226.3001.4187">Cè¯­è¨€ç†è§£æŒ‡é’ˆä½œä¸ºå½¢å‚ä½œç”¨</a>ï¼ˆåšå®¢ä¸­ç”¨çš„C++ï¼Œä½†æ˜¯åŸç†æ˜¯å®Œå…¨ç›¸åŒçš„ï¼‰</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>matlab</title>
    <url>/2022/11/09/matlab/</url>
    <content><![CDATA[<p><strong>å†…å®¹å¤§éƒ¨åˆ†æ¥è‡ª<a href="https://www.w3cschool.cn/matlab/matlab-5use28gb.html">MATLABä»‹ç»_w3cschool</a>åªæ˜¯cvä¸€ä¸‹æ–¹ä¾¿è‡ªå·±æŸ¥é˜…</strong></p>
<h1 id="åŸºç¡€å†…å®¹"><a href="#åŸºç¡€å†…å®¹" class="headerlink" title="åŸºç¡€å†…å®¹"></a>åŸºç¡€å†…å®¹</h1><h2 id="å¸¸ç”¨è¿ç®—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦"><a href="#å¸¸ç”¨è¿ç®—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦" class="headerlink" title="å¸¸ç”¨è¿ç®—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦"></a>å¸¸ç”¨è¿ç®—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>+</strong></td>
<td style="text-align:center">åŠ ï¼›åŠ æ³•è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>-</strong></td>
<td style="text-align:center">å‡ï¼›å‡æ³•è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>*</strong></td>
<td style="text-align:center">æ ‡é‡å’ŒçŸ©é˜µä¹˜æ³•è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>.*</strong></td>
<td style="text-align:center">æ•°ç»„ä¹˜æ³•è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>^</strong></td>
<td style="text-align:center">æ ‡é‡å’ŒçŸ©é˜µæ±‚å¹‚è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>.^</strong></td>
<td style="text-align:center">æ•°ç»„æ±‚å¹‚è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>\</strong></td>
<td style="text-align:center">çŸ©é˜µå·¦é™¤</td>
</tr>
<tr>
<td style="text-align:center"><strong>/</strong></td>
<td style="text-align:center">çŸ©é˜µå³é™¤</td>
</tr>
<tr>
<td style="text-align:center"><strong>.\</strong></td>
<td style="text-align:center">é˜µåˆ—å·¦é™¤</td>
</tr>
<tr>
<td style="text-align:center"><strong>./</strong></td>
<td style="text-align:center">é˜µåˆ—å³é™¤</td>
</tr>
<tr>
<td style="text-align:center"><strong>:</strong></td>
<td style="text-align:center">å‘é‡ç”Ÿæˆï¼›å­é˜µæå–</td>
</tr>
<tr>
<td style="text-align:center"><strong>( )</strong></td>
<td style="text-align:center">ä¸‹æ ‡è¿ç®—ï¼›å‚æ•°å®šä¹‰</td>
</tr>
<tr>
<td style="text-align:center"><strong>[ ]</strong></td>
<td style="text-align:center">çŸ©é˜µç”Ÿæˆ</td>
</tr>
<tr>
<td style="text-align:center"><strong>.</strong></td>
<td style="text-align:center">ç‚¹ä¹˜è¿ç®—ï¼Œå¸¸ä¸å…¶ä»–è¿ç®—ç¬¦è”åˆä½¿ç”¨</td>
</tr>
<tr>
<td style="text-align:center"><strong>â€¦</strong></td>
<td style="text-align:center">ç»­è¡Œæ ‡å¿—ï¼›è¡Œè¿ç»­è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>,</strong></td>
<td style="text-align:center">åˆ†è¡Œç¬¦ï¼ˆè¯¥è¡Œç»“æœä¸æ˜¾ç¤ºï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><strong>;</strong></td>
<td style="text-align:center"><strong>è¯­å¥ç»“æŸï¼›åˆ†è¡Œç¬¦ï¼ˆè¯¥è¡Œç»“æœæ˜¾ç¤ºï¼‰</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>%</strong></td>
<td style="text-align:center"><strong>æ³¨é‡Šæ ‡å¿—</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>_</strong></td>
<td style="text-align:center">å¼•ç”¨ç¬¦å·å’Œè½¬ç½®è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>._</strong></td>
<td style="text-align:center">éå…±è½­è½¬ç½®è¿ç®—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center"><strong>=</strong></td>
<td style="text-align:center">èµ‹å€¼è¿ç®—ç¬¦</td>
</tr>
</tbody>
</table>
</div>
<h2 id="ç‰¹æ®Šå˜é‡å’Œå¸¸é‡"><a href="#ç‰¹æ®Šå˜é‡å’Œå¸¸é‡" class="headerlink" title="ç‰¹æ®Šå˜é‡å’Œå¸¸é‡"></a>ç‰¹æ®Šå˜é‡å’Œå¸¸é‡</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Name</th>
<th style="text-align:center">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>ans</strong></td>
<td style="text-align:center">é»˜è®¤çš„å˜é‡åï¼Œä»¥åº”ç­”æœ€è¿‘ä¾æ¬¡æ“ä½œè¿ç®—ç»“æœ</td>
</tr>
<tr>
<td style="text-align:center"><strong>eps</strong></td>
<td style="text-align:center">æµ®ç‚¹æ•°çš„ç›¸å¯¹è¯¯å·®</td>
</tr>
<tr>
<td style="text-align:center"><strong>i,j</strong></td>
<td style="text-align:center">è™šæ•°å•ä½ï¼Œå®šä¹‰ä¸º i2 = j2 = -1</td>
</tr>
<tr>
<td style="text-align:center"><strong>Inf</strong></td>
<td style="text-align:center">ä»£è¡¨æ— ç©·å¤§</td>
</tr>
<tr>
<td style="text-align:center"><strong>NaN</strong></td>
<td style="text-align:center">ä»£è¡¨ä¸å®šå€¼ï¼ˆä¸æ˜¯æ•°å­—ï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><strong>pi</strong></td>
<td style="text-align:center">åœ†å‘¨ç‡</td>
</tr>
</tbody>
</table>
</div>
<h2 id="matlabå‘½åå˜é‡"><a href="#matlabå‘½åå˜é‡" class="headerlink" title="matlabå‘½åå˜é‡"></a>matlabå‘½åå˜é‡</h2><ul>
<li>åç§°ä¸ºå­—æ¯å¼€å¤´ï¼Œåå¯æ¥ä»»æ„æ•°é‡çš„ä¸‹åˆ’çº¿ã€å­—æ¯ã€æ•°å­—</li>
<li>åŒºåˆ†å¤§å°å†™</li>
</ul>
<h2 id="ä¿å­˜å·¥ä½œè¿›åº¦"><a href="#ä¿å­˜å·¥ä½œè¿›åº¦" class="headerlink" title="ä¿å­˜å·¥ä½œè¿›åº¦"></a>ä¿å­˜å·¥ä½œè¿›åº¦</h2><p>MATLABä½¿ç”¨saveå‘½ä»¤ä¿å­˜å·¥ä½œåŒºä¸­çš„æ‰€æœ‰å˜é‡ï¼Œç„¶åä½œä¸ºä¸€ä¸ªæ‰©å±•åä¸º.matçš„æ–‡ä»¶ï¼Œåœ¨å½“å‰ç›®å½•ä¸­ã€‚</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">save myfile</span><br><span class="line">load myfile</span><br></pre></td></tr></table></figure>
<h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><h2 id="æ˜¾ç¤ºå·²ä½¿ç”¨çš„å˜é‡"><a href="#æ˜¾ç¤ºå·²ä½¿ç”¨çš„å˜é‡" class="headerlink" title="æ˜¾ç¤ºå·²ä½¿ç”¨çš„å˜é‡"></a>æ˜¾ç¤ºå·²ä½¿ç”¨çš„å˜é‡</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">who</span><br><span class="line">whos</span><br><span class="line">clear <span class="comment">%åˆ é™¤æ‰€æœ‰ï¼ˆæˆ–æŒ‡å®šï¼‰çš„å˜é‡%</span></span><br></pre></td></tr></table></figure>
<h2 id="å»¶ä¼¸è¡Œ"><a href="#å»¶ä¼¸è¡Œ" class="headerlink" title="å»¶ä¼¸è¡Œ"></a>å»¶ä¼¸è¡Œ</h2><ul>
<li>ä½¿ç”¨<code>...</code>å°†å½“å‰è¡Œå»¶ä¼¸è‡³ä¸‹ä¸€è¡Œ</li>
</ul>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">initial_velocity = <span class="number">0</span>;</span><br><span class="line">acceleration = <span class="number">9.8</span>;</span><br><span class="line">time = <span class="number">20</span>;</span><br><span class="line">final_velocity = initial_velocity ...</span><br><span class="line">    + acceleration * time</span><br></pre></td></tr></table></figure>
<h2 id="æ ¼å¼å‘½ä»¤"><a href="#æ ¼å¼å‘½ä»¤" class="headerlink" title="æ ¼å¼å‘½ä»¤"></a>æ ¼å¼å‘½ä»¤</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">format short</td>
<td style="text-align:center">æ˜¾ç¤º4ä½å°æ•°</td>
</tr>
<tr>
<td style="text-align:center">format long</td>
<td style="text-align:center">æ˜¾ç¤º16ä½å°æ•°</td>
</tr>
<tr>
<td style="text-align:center">format bank</td>
<td style="text-align:center">æ˜¾ç¤ºä¸¤ä½å°æ•°</td>
</tr>
<tr>
<td style="text-align:center">format rat</td>
<td style="text-align:center">æ˜¾ç¤ºæœ‰ç†è¡¨è¾¾å¼</td>
</tr>
<tr>
<td style="text-align:center">format +</td>
<td style="text-align:center">æ­£æ•°</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>åœ¨å‘½ä»¤ååŠ <code>e</code>åˆ™ä¼šæ˜¾ç¤ºå¯¹åº”çš„æŒ‡æ•°å½¢å¼</li>
</ul>
<h2 id="åˆ›å»ºçŸ©é˜µ"><a href="#åˆ›å»ºçŸ©é˜µ" class="headerlink" title="åˆ›å»ºçŸ©é˜µ"></a>åˆ›å»ºçŸ©é˜µ</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">m = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]</span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼š</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">m =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line">     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span></span><br><span class="line">     <span class="number">7</span>     <span class="number">8</span>     <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>åŒç†å¯åˆ›å»ºè¡Œã€åˆ—å‘é‡ã€‚</p>
<h1 id="ç›¸å…³å‘½ä»¤"><a href="#ç›¸å…³å‘½ä»¤" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h1><h2 id="å‘é‡ã€çŸ©é˜µç›¸å…³"><a href="#å‘é‡ã€çŸ©é˜µç›¸å…³" class="headerlink" title="å‘é‡ã€çŸ©é˜µç›¸å…³"></a>å‘é‡ã€çŸ©é˜µç›¸å…³</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">ä½œç”¨/ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">cat</td>
<td style="text-align:center">è¿æ¥æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center">find</td>
<td style="text-align:center">æŸ¥æ‰¾éé›¶å…ƒç´ çš„ç´¢å¼•</td>
</tr>
<tr>
<td style="text-align:center">length</td>
<td style="text-align:center">è®¡ç®—å…ƒç´ æ•°é‡</td>
</tr>
<tr>
<td style="text-align:center">linspace</td>
<td style="text-align:center">åˆ›å»ºé—´éš”å‘é‡</td>
</tr>
<tr>
<td style="text-align:center">logspace</td>
<td style="text-align:center">åˆ›å»ºå¯¹æ•°é—´éš”å‘é‡</td>
</tr>
<tr>
<td style="text-align:center">max</td>
<td style="text-align:center">è¿”å›æœ€å¤§å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">min</td>
<td style="text-align:center">è¿”å›æœ€å°å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">prod</td>
<td style="text-align:center">è®¡ç®—æ•°ç»„å…ƒç´ çš„è¿ä¹˜ç§¯</td>
</tr>
<tr>
<td style="text-align:center">reshape</td>
<td style="text-align:center">é‡æ–°è°ƒæ•´çŸ©é˜µçš„è¡Œæ•°ã€åˆ—æ•°ã€ç»´æ•°</td>
</tr>
<tr>
<td style="text-align:center">size</td>
<td style="text-align:center">è®¡ç®—æ•°ç»„å¤§å°</td>
</tr>
<tr>
<td style="text-align:center">sort</td>
<td style="text-align:center">æ’åºæ¯ä¸ªåˆ—</td>
</tr>
<tr>
<td style="text-align:center">sum</td>
<td style="text-align:center">æ¯åˆ—ç›¸åŠ </td>
</tr>
<tr>
<td style="text-align:center">eye</td>
<td style="text-align:center">åˆ›å»ºä¸€ä¸ªå•ä½çŸ©é˜µ</td>
</tr>
<tr>
<td style="text-align:center">ones</td>
<td style="text-align:center">ç”Ÿæˆå…¨1çŸ©é˜µ</td>
</tr>
<tr>
<td style="text-align:center">zeros</td>
<td style="text-align:center">ç”Ÿæˆé›¶çŸ©é˜µ</td>
</tr>
<tr>
<td style="text-align:center">cross</td>
<td style="text-align:center">è®¡ç®—çŸ©é˜µäº¤å‰ä¹˜ç§¯</td>
</tr>
<tr>
<td style="text-align:center">dot</td>
<td style="text-align:center">è®¡ç®—çŸ©é˜µç‚¹ç§¯</td>
</tr>
<tr>
<td style="text-align:center">det</td>
<td style="text-align:center">è®¡ç®—æ•°ç»„çš„è¡Œåˆ—å¼</td>
</tr>
<tr>
<td style="text-align:center">inv</td>
<td style="text-align:center">è®¡ç®—çŸ©é˜µçš„é€†</td>
</tr>
<tr>
<td style="text-align:center">pinv</td>
<td style="text-align:center">è®¡ç®—çŸ©é˜µçš„ä¼ªé€†</td>
</tr>
<tr>
<td style="text-align:center">rank</td>
<td style="text-align:center">è®¡ç®—çŸ©é˜µçš„ç§©</td>
</tr>
<tr>
<td style="text-align:center">rref</td>
<td style="text-align:center">å°†çŸ©é˜µåŒ–æˆè¡Œæœ€ç®€å½¢</td>
</tr>
<tr>
<td style="text-align:center">cell</td>
<td style="text-align:center">åˆ›å»ºå•å…ƒæ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center">celldisp</td>
<td style="text-align:center">æ˜¾ç¤ºå•å…ƒæ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center">cellplot</td>
<td style="text-align:center">æ˜¾ç¤ºå•å…ƒæ•°ç»„çš„å›¾å½¢è¡¨ç¤º</td>
</tr>
<tr>
<td style="text-align:center">num2cell</td>
<td style="text-align:center">å°†æ•°å€¼é˜µåˆ—è½¬åŒ–ä¸ºå¼‚è´¨é˜µåˆ—</td>
</tr>
<tr>
<td style="text-align:center">deal</td>
<td style="text-align:center">åŒ¹é…è¾“å…¥å’Œè¾“å‡ºåˆ—è¡¨</td>
</tr>
<tr>
<td style="text-align:center">iscell</td>
<td style="text-align:center">åˆ¤æ–­æ˜¯å¦ä¸ºå…ƒèƒç±»å‹</td>
</tr>
</tbody>
</table>
</div>
<h2 id="ç»˜å›¾"><a href="#ç»˜å›¾" class="headerlink" title="ç»˜å›¾"></a>ç»˜å›¾</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">ä½œç”¨/ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">axis</td>
<td style="text-align:center">äººå·¥é€‰æ‹©åæ ‡è½´å°ºå¯¸</td>
</tr>
<tr>
<td style="text-align:center">fplot</td>
<td style="text-align:center">æ™ºèƒ½ç»˜å›¾åŠŸèƒ½</td>
</tr>
<tr>
<td style="text-align:center">grid</td>
<td style="text-align:center">æ˜¾ç¤ºç½‘æ ¼çº¿</td>
</tr>
<tr>
<td style="text-align:center">plot</td>
<td style="text-align:center">ç”ŸæˆXYå›¾</td>
</tr>
<tr>
<td style="text-align:center">print</td>
<td style="text-align:center">æ‰“å°æˆ–ç»˜å›¾åˆ°æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">title</td>
<td style="text-align:center">æŠŠæ–‡å­—ç½®äºé¡¶éƒ¨</td>
</tr>
<tr>
<td style="text-align:center">xlabel</td>
<td style="text-align:center">å°†æ–‡æœ¬æ ‡ç­¾æ·»åŠ åˆ°xè½´</td>
</tr>
<tr>
<td style="text-align:center">ylabel</td>
<td style="text-align:center">å°†æ–‡æœ¬æ ‡ç­¾æ·»åŠ åˆ°yè½´</td>
</tr>
<tr>
<td style="text-align:center">axes</td>
<td style="text-align:center">åˆ›å»ºè½´å¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:center">close</td>
<td style="text-align:center">å…³é—­å½“å‰çš„ç»˜å›¾</td>
</tr>
<tr>
<td style="text-align:center">close all</td>
<td style="text-align:center">å…³é—­æ‰€æœ‰ç»˜å›¾</td>
</tr>
<tr>
<td style="text-align:center">figure</td>
<td style="text-align:center">æ‰“å¼€ä¸€ä¸ªæ–°çš„å›¾å½¢çª—å£</td>
</tr>
<tr>
<td style="text-align:center">gtext</td>
<td style="text-align:center">é€šè¿‡é¼ æ ‡åœ¨æŒ‡å®šä½ç½®æ”¾æ³¨æ–‡</td>
</tr>
<tr>
<td style="text-align:center">hold</td>
<td style="text-align:center">ä¿æŒå½“å‰å›¾å½¢</td>
</tr>
<tr>
<td style="text-align:center">legend</td>
<td style="text-align:center">é¼ æ ‡æ”¾ç½®å›¾ä¾‹</td>
</tr>
<tr>
<td style="text-align:center">refresh</td>
<td style="text-align:center">é‡æ–°ç»˜åˆ¶å½“å‰å›¾å½¢çª—å£</td>
</tr>
<tr>
<td style="text-align:center">set</td>
<td style="text-align:center">æŒ‡å®šå¯¹è±¡çš„å±æ€§ï¼Œå¦‚è½´</td>
</tr>
<tr>
<td style="text-align:center">subplot</td>
<td style="text-align:center">åœ¨å­çª—å£ä¸­åˆ›å»ºå›¾</td>
</tr>
<tr>
<td style="text-align:center">text</td>
<td style="text-align:center">åœ¨å›¾ä¸Šåšæ ‡è®°</td>
</tr>
<tr>
<td style="text-align:center">bar</td>
<td style="text-align:center">åˆ›å»ºæ¡å½¢å›¾</td>
</tr>
<tr>
<td style="text-align:center">loglog</td>
<td style="text-align:center">åˆ›å»ºåŒå¯¹æ•°å›¾</td>
</tr>
<tr>
<td style="text-align:center">polar</td>
<td style="text-align:center">åˆ›å»ºæåæ ‡å›¾åƒ</td>
</tr>
<tr>
<td style="text-align:center">semilogx</td>
<td style="text-align:center">åˆ›å»ºåŠå¯¹æ•°å›¾ï¼ˆå¯¹æ•°æ¨ªåæ ‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">semilogy</td>
<td style="text-align:center">åˆ›å»ºåŠå¯¹æ•°å›¾ï¼ˆå¯¹æ•°çºµåæ ‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">stairs</td>
<td style="text-align:center">åˆ›å»ºé˜¶æ¢¯å›¾</td>
</tr>
<tr>
<td style="text-align:center">stem</td>
<td style="text-align:center">åˆ›å»ºé’ˆçŠ¶å›¾</td>
</tr>
</tbody>
</table>
</div>
<h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><h2 id="å¸¸ç”¨çš„æ•°æ®ç±»å‹"><a href="#å¸¸ç”¨çš„æ•°æ®ç±»å‹" class="headerlink" title="å¸¸ç”¨çš„æ•°æ®ç±»å‹"></a>å¸¸ç”¨çš„æ•°æ®ç±»å‹</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">æ•°æ®ç±»å‹</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>int8</code></td>
<td style="text-align:center"><code>8</code>ä½æœ‰ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>uint8</code></td>
<td style="text-align:center"><code>8</code>ä½æ— ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>int16</code></td>
<td style="text-align:center"><code>16</code>ä½æœ‰ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>uint16</code></td>
<td style="text-align:center"><code>16</code>ä½æ— ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>int32</code></td>
<td style="text-align:center"><code>32</code>ä½æœ‰ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>uint32</code></td>
<td style="text-align:center"><code>32</code>ä½æ— ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>int64</code></td>
<td style="text-align:center"><code>64</code>ä½æœ‰ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>uint64</code></td>
<td style="text-align:center"><code>64</code>ä½æ— ç¬¦å·æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center"><code>single</code></td>
<td style="text-align:center">å•ç²¾åº¦æ•°å€¼æ•°æ®</td>
</tr>
<tr>
<td style="text-align:center"><code>double</code></td>
<td style="text-align:center">åŒç²¾åº¦æ•°å€¼æ•°æ®</td>
</tr>
<tr>
<td style="text-align:center"><code>logical</code></td>
<td style="text-align:center">é€»è¾‘å€¼ä¸º<code>1</code>æˆ–<code>0</code>ï¼Œåˆ†åˆ«ä»£è¡¨<code>true</code>å’Œ<code>false</code></td>
</tr>
<tr>
<td style="text-align:center"><code>char</code></td>
<td style="text-align:center">å­—ç¬¦æ•°æ®(å­—ç¬¦ä¸²ä½œä¸ºå­—ç¬¦å‘é‡å­˜å‚¨)</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>ä½†æ˜¯ç”¨æ³•å’ŒCä¸åŒï¼Œmatlabä¸­ç”¨æ³•ç±»ä¼¼äºå‡½æ•°ï¼ˆmatlabçš„å˜é‡ä¸ç”¨ä»»ä½•å®šä¹‰è¯­å¥ï¼‰</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">str = <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line">n = <span class="number">2345</span></span><br><span class="line">d = double(n)</span><br><span class="line">un = uint32(<span class="number">789.50</span>)</span><br><span class="line">rn = <span class="number">5678.92347</span></span><br><span class="line">c = int32(rn)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="æ•°æ®ç±»å‹ç¡®è®¤å‡½æ•°"><a href="#æ•°æ®ç±»å‹ç¡®è®¤å‡½æ•°" class="headerlink" title="æ•°æ®ç±»å‹ç¡®è®¤å‡½æ•°"></a>æ•°æ®ç±»å‹ç¡®è®¤å‡½æ•°</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">æè¿°è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>is</code></td>
<td style="text-align:center">æ£€æµ‹çŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:center"><code>isa</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦æ˜¯æŒ‡å®šç±»çš„å¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:center"><code>iscell</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å•å…ƒæ ¼æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>iscellstr</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å­—ç¬¦ä¸²çš„å•å…ƒæ ¼æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>ischar</code></td>
<td style="text-align:center">ç¡®å®šé¡¹ç›®æ˜¯å¦æ˜¯å­—ç¬¦æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>isfield</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦æ˜¯ç»“æ„æ•°ç»„å­—æ®µ</td>
</tr>
<tr>
<td style="text-align:center"><code>isfloat</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦ä¸ºæµ®ç‚¹æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>ishghandle</code></td>
<td style="text-align:center">ç¡®å®šæ˜¯å¦ç”¨äºå¤„ç†å›¾å½¢å¯¹è±¡å¥æŸ„</td>
</tr>
<tr>
<td style="text-align:center"><code>isinteger</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦ä¸ºæ•´æ•°æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>isjava</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦ä¸ºJavaå¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:center"><code>islogical</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦ä¸ºé€»è¾‘æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>isnumeric</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦æ˜¯æ•°å­—æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>isobject</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦ä¸ºMATLABå¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:center"><code>isreal</code></td>
<td style="text-align:center">æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºå®æ•°æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>isscalar</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦ä¸ºæ ‡é‡</td>
</tr>
<tr>
<td style="text-align:center"><code>isstr</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦æ˜¯å­—ç¬¦æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>isstruct</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦æ˜¯ç»“æ„æ•°ç»„</td>
</tr>
<tr>
<td style="text-align:center"><code>isvector</code></td>
<td style="text-align:center">ç¡®å®šè¾“å…¥æ˜¯å¦ä¸ºå‘é‡</td>
</tr>
<tr>
<td style="text-align:center"><code>class</code></td>
<td style="text-align:center">ç¡®å®šå¯¹è±¡çš„ç±»</td>
</tr>
<tr>
<td style="text-align:center"><code>validateattributes</code></td>
<td style="text-align:center">æ£€æŸ¥æ•°ç»„çš„æœ‰æ•ˆæ€§</td>
</tr>
<tr>
<td style="text-align:center"><code>whos</code></td>
<td style="text-align:center">åœ¨å·¥ä½œåŒºä¸­åˆ—å‡ºå˜é‡ï¼Œå…¶å¤§å°å’Œç±»å‹</td>
</tr>
</tbody>
</table>
</div>
<h1 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h1><h2 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">å‡½æ•°</th>
<th style="text-align:left">ç›®çš„/ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">bitand(a, b)</td>
<td style="text-align:left">å½“aã€bæ˜¯ä¸€ä¸ªæˆ–æ•°ä¸ªæ— ç¬¦å·æ•´æ•°æˆ–æ— ç¬¦å·æ•´æ•°æ•°ç»„ï¼Œè¿”å›å‚æ•°aå’Œbä½å’Œï¼Œ</td>
</tr>
<tr>
<td style="text-align:left">bitcmp(a)</td>
<td style="text-align:left">açš„è¡¥ç </td>
</tr>
<tr>
<td style="text-align:left">bitget(a,pos)</td>
<td style="text-align:left">åœ¨æŒ‡å®šä½ç½®posä¸­è·å–ä½ï¼Œåœ¨æ•´æ•°æ•°ç»„aä¸­</td>
</tr>
<tr>
<td style="text-align:left">bitor(a, b)</td>
<td style="text-align:left">å¯¹æ•°aå’ŒbæŒ‰ä½æˆ–</td>
</tr>
<tr>
<td style="text-align:left">bitset(a, pos)</td>
<td style="text-align:left">açš„é›†åˆç‚¹åœ¨ä¸€ä¸ªç‰¹å®šçš„ä½ç½®pos</td>
</tr>
<tr>
<td style="text-align:left">bitshift(a, k)</td>
<td style="text-align:left">è¿”å›ä¸€ä¸ªç§»åˆ°å·¦Kä½ï¼Œç›¸å½“äºä¹˜ä»¥2Kã€‚Kè´Ÿå€¼å¯¹åº”çš„ä½æƒè½¬ç§»æˆ–é™¤ä»¥2\</td>
<td>K\</td>
<td>å‘è´Ÿæ— ç©·èˆå…¥åˆ°æœ€è¿‘çš„æ•´æ•°ã€‚ä»»ä½•æº¢å‡ºä½éƒ½è¢«æˆªæ–­ã€‚</td>
</tr>
<tr>
<td style="text-align:left">bitxor(a, b)</td>
<td style="text-align:left">å¯¹æ•°aå’ŒbæŒ‰ä½å¼‚æˆ–</td>
</tr>
<tr>
<td style="text-align:left">swapbytes</td>
<td style="text-align:left">äº¤æ¢å­—èŠ‚é¡ºåº</td>
</tr>
</tbody>
</table>
</div>
<h2 id="é›†åˆè¿ç®—"><a href="#é›†åˆè¿ç®—" class="headerlink" title="é›†åˆè¿ç®—"></a>é›†åˆè¿ç®—</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">å‡½æ•°</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">intersect(A,B)</td>
<td style="text-align:left">è®¾ç½®ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†ï¼›è¿”å›Aå’ŒBæ‰€å…±æœ‰çš„å€¼ã€‚è¿”å›çš„å€¼æŒ‰æ’åºé¡ºåºæ’åˆ—ã€‚</td>
</tr>
<tr>
<td style="text-align:left">intersect(A,B,â€™rowsâ€™)</td>
<td style="text-align:left">å°†Aå’ŒBçš„æ¯ä¸€è¡Œä½œä¸ºå•ä¸ªå®ä½“å¤„ç†ï¼Œå¹¶è¿”å›Aå’ŒBçš„å…¬å…±è¡Œã€‚è¿”å›çš„çŸ©é˜µçš„è¡ŒæŒ‰æ’åºé¡ºåºæ’åˆ—ã€‚</td>
</tr>
<tr>
<td style="text-align:left">ismember(A,B)</td>
<td style="text-align:left">è¿”å›ä¸Aå¤§å°ç›¸åŒçš„æ•°ç»„ï¼ŒåŒ…å«1ï¼ˆtrueï¼‰ï¼Œå…¶ä¸­Açš„å…ƒç´ åœ¨å…¶ä»–åœ°æ–¹çš„Bä¸­æ‰¾åˆ°ï¼Œå®ƒè¿”å›0ï¼ˆfalseï¼‰ã€‚</td>
</tr>
<tr>
<td style="text-align:left">ismember(A,B,â€™rowsâ€™)</td>
<td style="text-align:left">å°†Aå’ŒBçš„æ¯ä¸€è¡Œä½œä¸ºå•ä¸ªå®ä½“å¤„ç†ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«1ï¼ˆtrueï¼‰çš„å‘é‡ï¼Œå…¶ä¸­çŸ©é˜µAçš„è¡Œä¹Ÿæ˜¯Bçš„è¡Œï¼›å¦åˆ™ï¼Œå®ƒè¿”å›0ï¼ˆfalseï¼‰ã€‚</td>
</tr>
<tr>
<td style="text-align:left">issorted(A)</td>
<td style="text-align:left">å¦‚æœAçš„å…ƒç´ æŒ‰æ’åºé¡ºåºè¿”å›é€»è¾‘1ï¼ˆtrueï¼‰ï¼Œå¦åˆ™è¿”å›é€»è¾‘0ï¼ˆfalseï¼‰ã€‚è¾“å…¥Aå¯ä»¥æ˜¯å‘é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯N-by-1æˆ–1-by-Nçš„å­—ç¬¦ä¸²æ•°ç»„ã€‚å¦‚æœAå’Œsortï¼ˆAï¼‰çš„è¾“å‡ºç›¸ç­‰ï¼Œåˆ™Aè¢«è®¤ä¸ºæ˜¯æ’åºçš„ã€‚</td>
</tr>
<tr>
<td style="text-align:left">issorted(A, â€˜rowsâ€™)</td>
<td style="text-align:left">å¦‚æœäºŒç»´çŸ©é˜µAçš„è¡ŒæŒ‰æ’åºé¡ºåºè¿”å›é€»è¾‘1ï¼ˆçœŸï¼‰ï¼Œå¦åˆ™è¿”å›é€»è¾‘0ï¼ˆå‡ï¼‰ã€‚ å¦‚æœAå’Œæ’åºï¼ˆAï¼‰çš„è¾“å‡ºç›¸ç­‰ï¼Œåˆ™è®¤ä¸ºçŸ©é˜µAè¢«æ’åºã€‚</td>
</tr>
<tr>
<td style="text-align:left">setdiff(A,B)</td>
<td style="text-align:left">è®¾ç½®ä¸¤ä¸ªæ•°ç»„çš„å·®å€¼ï¼›è¿”å›ä¸åœ¨Bä¸­çš„å€¼ã€‚è¿”å›æ•°ç»„ä¸­çš„å€¼æŒ‰æ’åºé¡ºåºæ’åˆ—ã€‚</td>
</tr>
<tr>
<td style="text-align:left">setdiff(A,B,â€™rowsâ€™)</td>
<td style="text-align:left">å°†æ¯ä¸€è¡ŒAå’ŒBè¡Œä½œä¸ºå•ä¸ªå®ä½“å¤„ç†ï¼Œå¹¶è¿”å›ä¸€ä¸ªä¸åœ¨Bä¸­çš„è¡Œã€‚è¿”å›çš„çŸ©é˜µçš„è¡ŒæŒ‰æ’åºé¡ºåºæ’åˆ—ã€‚â€œè¡Œâ€é€‰é¡¹ä¸æ”¯æŒå•å…ƒæ ¼æ•°ç»„ã€‚</td>
</tr>
<tr>
<td style="text-align:left">setxor</td>
<td style="text-align:left">è®¾ç½®ä¸¤ä¸ªæ•°ç»„çš„å¼‚æˆ–</td>
</tr>
<tr>
<td style="text-align:left">union</td>
<td style="text-align:left">è®¾ç½®ä¸¤ä¸ªæ•°ç»„çš„å¹¶é›†</td>
</tr>
<tr>
<td style="text-align:left">unique</td>
<td style="text-align:left">æ•°ç»„ä¸­å”¯ä¸€çš„å€¼</td>
</tr>
</tbody>
</table>
</div>
<h1 id="è¯­å¥"><a href="#è¯­å¥" class="headerlink" title="è¯­å¥"></a>è¯­å¥</h1><h2 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (...)</span><br><span class="line">	.....;</span><br><span class="line">	.....;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(...)</span><br><span class="line">	<span class="keyword">case</span> .. 	<span class="comment">%æ— å†’å·</span></span><br><span class="line">		....;</span><br><span class="line">		....;</span><br><span class="line">	<span class="keyword">case</span> ..</span><br><span class="line">		....	<span class="comment">%å•è¡Œå¯ä»¥ä¸åŠ åˆ†å·</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å…¶ä»–ç”¨æ³•ä¸CåŸºæœ¬ç›¸åŒ</li>
<li>endåä¸é¡»è·Ÿåˆ†å·ï¼ˆå³ä½¿åé¢è¿˜æœ‰è¯­å¥ï¼‰</li>
</ul>
<h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while()</span><br><span class="line">	...;</span><br><span class="line">	...;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><p>forå¾ªç¯æœ‰ä¸‰ç§ç”¨æ³•ï¼š</p>
<ul>
<li><p>initval:endval  é»˜è®¤æ­¥é•¿ä¸º+1ï¼Œé€’å¢</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> a = <span class="number">10</span>:<span class="number">20</span> </span><br><span class="line">	...;</span><br><span class="line">	...;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>initval:step:endval  stepå¯è‡ªå®šä¹‰æ­¥é•¿</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> a = <span class="number">1.0</span>: <span class="number">-0.1</span>: <span class="number">0.0</span></span><br><span class="line">	...;</span><br><span class="line">	...;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç´¢å¼•æ•°ç»„</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> a = [<span class="number">24</span>,<span class="number">18</span>,<span class="number">17</span>,<span class="number">23</span>,<span class="number">28</span>]</span><br><span class="line">	...;</span><br><span class="line">	...;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="å‘é‡"><a href="#å‘é‡" class="headerlink" title="å‘é‡"></a>å‘é‡</h1><h2 id="å…ƒç´ ç´¢å¼•"><a href="#å…ƒç´ ç´¢å¼•" class="headerlink" title="å…ƒç´ ç´¢å¼•"></a>å…ƒç´ ç´¢å¼•</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">rv = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>];</span><br><span class="line">sub_rv = rv(<span class="number">3</span>:<span class="number">7</span>)</span><br><span class="line">rv(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="å‘é‡è½¬ç½®"><a href="#å‘é‡è½¬ç½®" class="headerlink" title="å‘é‡è½¬ç½®"></a>å‘é‡è½¬ç½®</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">r = [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> ];</span><br><span class="line">tr = r&#x27;;</span><br></pre></td></tr></table></figure>
<h2 id="æ±‚å‘é‡çš„æ¨¡"><a href="#æ±‚å‘é‡çš„æ¨¡" class="headerlink" title="æ±‚å‘é‡çš„æ¨¡"></a>æ±‚å‘é‡çš„æ¨¡</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">v = [<span class="number">1</span>: <span class="number">2</span>: <span class="number">20</span>];</span><br><span class="line">sv = v.* v;    </span><br><span class="line">dp = sum(sv);    </span><br><span class="line">mag = <span class="built_in">sqrt</span>(dp);  </span><br></pre></td></tr></table></figure>
<h2 id="å‘é‡ç‚¹ç§¯"><a href="#å‘é‡ç‚¹ç§¯" class="headerlink" title="å‘é‡ç‚¹ç§¯"></a>å‘é‡ç‚¹ç§¯</h2><p>è‹¥è¦æ±‚å–å‘é‡çš„ç‚¹ç§¯ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦æ±‚å¾—ï¼Œéœ€ä½¿ç”¨å‡½æ•°dot(a,b)</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">v1 = [<span class="number">2</span> <span class="number">3</span> <span class="number">4</span>];</span><br><span class="line">v2 = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>];</span><br><span class="line">dp = <span class="built_in">dot</span>(v1, v2);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>*</code>å·ç”¨äºè¿ç®—çŸ©é˜µä¹˜æ³•ï¼Œè€Œ<code>.*</code>ç”¨äºæ•°ç»„çš„ä¹˜æ³•ï¼ˆæ•°ç»„çš„ä¹˜æ³•æœ‰ä¸€å¥—è‡ªå·±çš„ç®—æ³•ï¼‰</li>
</ul>
<h1 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h1><h2 id="çŸ©é˜µç´¢å¼•"><a href="#çŸ©é˜µç´¢å¼•" class="headerlink" title="çŸ©é˜µç´¢å¼•"></a>çŸ©é˜µç´¢å¼•</h2><ul>
<li><p>ç¬¬mè¡Œï¼Œç¬¬nåˆ—çš„ä¸€ä¸ªå…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mx(m,n);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¬¬måˆ—çš„æ‰€æœ‰å…ƒç´ </p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">a = [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>; <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>];</span><br><span class="line">v = a(:,<span class="number">4</span>) <span class="comment">%ç¬¬4åˆ—çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªåˆ—å‘é‡</span></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">a = [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>; <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>];</span><br><span class="line">a(:, <span class="number">2</span>:<span class="number">3</span>) <span class="comment">%ç¬¬2-3åˆ—çš„æ‰€æœ‰å…ƒç´ </span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>æ³¨ï¼šç´¢å¼•ä»1å¼€å§‹ï¼Œè€Œä¸æ˜¯0</strong></p>
<h2 id="åˆ é™¤è¡Œæˆ–åˆ—"><a href="#åˆ é™¤è¡Œæˆ–åˆ—" class="headerlink" title="åˆ é™¤è¡Œæˆ–åˆ—"></a>åˆ é™¤è¡Œæˆ–åˆ—</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a = [ 1 2 3 4 5; 2 3 4 5 6; 3 4 5 6 7; 4 5 6 7 8];</span><br><span class="line">a( 4 , : ) = []</span><br></pre></td></tr></table></figure>
<h2 id="é™¤æ³•"><a href="#é™¤æ³•" class="headerlink" title="é™¤æ³•"></a>é™¤æ³•</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">a = [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> ; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>];</span><br><span class="line">b = [ <span class="number">7</span> <span class="number">5</span> <span class="number">6</span> ; <span class="number">2</span> <span class="number">0</span> <span class="number">8</span>; <span class="number">5</span> <span class="number">7</span> <span class="number">1</span>];</span><br><span class="line">c = a / b	<span class="comment">%aå³ä¹˜bçš„é€†çŸ©é˜µ(inv(b))</span></span><br><span class="line">d = a \ b	<span class="comment">%bå·¦ä¹˜açš„é€†çŸ©é˜µ</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¿…é¡»ä¸ºæ–¹é˜µï¼Œå› ä¸ºåªæœ‰æ–¹é˜µæ‰æœ‰é€†çŸ©é˜µ</li>
</ul>
<h2 id="è¡Œåˆ—å¼"><a href="#è¡Œåˆ—å¼" class="headerlink" title="è¡Œåˆ—å¼"></a>è¡Œåˆ—å¼</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">a = [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>; <span class="number">1</span> <span class="number">2</span> <span class="number">5</span>]</span><br><span class="line">det(a)</span><br></pre></td></tr></table></figure>
<ul>
<li>è¡Œåˆ—å¼ä¸€å®šä¸ºæ–¹é˜µ</li>
<li>è½¬ç½®ä¸æ”¹å˜è¡Œåˆ—å¼çš„å€¼</li>
</ul>
<h2 id="å¤šç»´æ•°ç»„"><a href="#å¤šç»´æ•°ç»„" class="headerlink" title="å¤šç»´æ•°ç»„"></a>å¤šç»´æ•°ç»„</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a = [7 9 5; 6 1 9; 4 3 2];</span><br><span class="line">a(:, :, 2)= [ 1 2 3; 4 5 6; 7 8 9];</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line">a(:,:,1) =</span><br><span class="line">     7     9     5</span><br><span class="line">     6     1     9</span><br><span class="line">     4     3     2</span><br><span class="line"></span><br><span class="line">a(:,:,2) =</span><br><span class="line">     1     2     3</span><br><span class="line">     4     5     6</span><br><span class="line">     7     8     9</span><br></pre></td></tr></table></figure>
<p>æˆ–ä½¿ç”¨catå‡½æ•°ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">b = <span class="built_in">cat</span>(<span class="number">3</span>,a,[ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]); <span class="comment">%ç»´åº¦+è¦ä¸²è”çš„é˜µåˆ—</span></span><br></pre></td></tr></table></figure>
<h1 id="å•å…ƒé˜µåˆ—"><a href="#å•å…ƒé˜µåˆ—" class="headerlink" title="å•å…ƒé˜µåˆ—"></a>å•å…ƒé˜µåˆ—</h1><p>å•å…ƒé˜µåˆ—çš„é˜µåˆ—ä¸­æ¯ä¸ªå•å…ƒæ ¼å¯ä»¥å­˜å‚¨ä¸åŒçš„ç»´åº¦å’Œæ•°æ®ç±»å‹çš„æ•°ç»„çš„ç´¢å¼•å•å…ƒæ ¼</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">C = cell(dim1,...,dimN) <span class="comment">%dim æ˜¯ä¸€ä¸ªæ ‡é‡æ•´æ•°æˆ–æ•´æ•°å‘é‡ï¼ŒæŒ‡å®šå•å…ƒæ ¼é˜µåˆ—Cçš„å°ºå¯¸</span></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">c = cell(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">c = &#123;<span class="string">&#x27;Red&#x27;</span>, <span class="string">&#x27;Blue&#x27;</span>, <span class="string">&#x27;Green&#x27;</span>, <span class="string">&#x27;Yellow&#x27;</span>, <span class="string">&#x27;White&#x27;</span>; <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line">c = </span><br><span class="line">    <span class="string">&#x27;Red&#x27;</span>    <span class="string">&#x27;Blue&#x27;</span>    <span class="string">&#x27;Green&#x27;</span>    <span class="string">&#x27;Yellow&#x27;</span>    <span class="string">&#x27;White&#x27;</span></span><br><span class="line">    [  <span class="number">1</span>]    [   <span class="number">2</span>]    [    <span class="number">3</span>]    [     <span class="number">4</span>]    [    <span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<h2 id="å•å…ƒé˜µåˆ—ç´¢å¼•"><a href="#å•å…ƒé˜µåˆ—ç´¢å¼•" class="headerlink" title="å•å…ƒé˜µåˆ—ç´¢å¼•"></a>å•å…ƒé˜µåˆ—ç´¢å¼•</h2><p>å¯ä»¥ä½¿ç”¨å¤§æ‹¬å·æˆ–å°æ‹¬å·ç´¢å¼•ï¼Œç´¢å¼•æ–¹æ³•ä¸å‰ç›¸åŒ</p>
<h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><h2 id="ä¸€èˆ¬å‡½æ•°æ ¼å¼"><a href="#ä¸€èˆ¬å‡½æ•°æ ¼å¼" class="headerlink" title="ä¸€èˆ¬å‡½æ•°æ ¼å¼"></a>ä¸€èˆ¬å‡½æ•°æ ¼å¼</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[out1,out2,...]</span> = <span class="title">fun_name</span><span class="params">(in1,in2,...)</span></span></span><br><span class="line"><span class="comment">%å¸®åŠ©æ–‡æœ¬</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">power = @(x, n) x.^n;</span><br><span class="line">result1 = power(<span class="number">7</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h1 id="ç»˜å›¾-1"><a href="#ç»˜å›¾-1" class="headerlink" title="ç»˜å›¾"></a>ç»˜å›¾</h1><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">plot</span>(x, y), xlabel(<span class="string">&#x27;x&#x27;</span>), ylabel(<span class="string">&#x27;Sin(x)&#x27;</span>), title(<span class="string">&#x27;Sin(x) Graph&#x27;</span>),</span><br></pre></td></tr></table></figure>
<h2 id="ç»˜åˆ¶å¤šæ¡æ›²çº¿"><a href="#ç»˜åˆ¶å¤šæ¡æ›²çº¿" class="headerlink" title="ç»˜åˆ¶å¤šæ¡æ›²çº¿"></a>ç»˜åˆ¶å¤šæ¡æ›²çº¿</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">x = [<span class="number">-10</span> : <span class="number">0.01</span>: <span class="number">10</span>];</span><br><span class="line">y = <span class="number">3</span>*x.^<span class="number">4</span> + <span class="number">2</span> * x.^<span class="number">3</span> + <span class="number">7</span> * x.^<span class="number">2</span> + <span class="number">2</span> * x + <span class="number">9</span>;</span><br><span class="line">g = <span class="number">5</span> * x.^<span class="number">3</span> + <span class="number">9</span> * x + <span class="number">2</span>;</span><br><span class="line"><span class="built_in">plot</span>(x, y, <span class="string">&#x27;r&#x27;</span>, x, g, <span class="string">&#x27;g&#x27;</span>) <span class="comment">% &#x27;r&#x27;,&#x27;g&#x27;ä»£è¡¨æ›²çº¿é¢œè‰²</span></span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;y(x)&#x27;</span>,<span class="string">&#x27;g(x)&#x27;</span>);</span><br></pre></td></tr></table></figure>
<img src="/images/loading.png" data-original="/2022/11/09/matlab/p1.jpg" class title="This is an image"> 
<h2 id="è®¾ç½®è½´åˆ»åº¦"><a href="#è®¾ç½®è½´åˆ»åº¦" class="headerlink" title="è®¾ç½®è½´åˆ»åº¦"></a>è®¾ç½®è½´åˆ»åº¦</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">axis ( [xmin xmax ymin ymax] )</span><br></pre></td></tr></table></figure>
<h2 id="ç»˜åˆ¶å¤šä¸ªå›¾åƒ"><a href="#ç»˜åˆ¶å¤šä¸ªå›¾åƒ" class="headerlink" title="ç»˜åˆ¶å¤šä¸ªå›¾åƒ"></a>ç»˜åˆ¶å¤šä¸ªå›¾åƒ</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">subplot(a,b,c);</span><br></pre></td></tr></table></figure>
<ul>
<li>aï¼šæ€»è¡Œ</li>
<li>bï¼šæ€»åˆ—</li>
<li>cï¼šç¬¬å‡ å›¾</li>
</ul>
<p>ä¾‹å¦‚ç”Ÿæˆ2*2ä¸ªå›¾åƒï¼Œç¬¬äºŒè¡Œç¬¬ä¸€ä¸ªå›¾åˆ™ä¸º<code>subplot(2,2,3);</code></p>
<h1 id="ä»£æ•°"><a href="#ä»£æ•°" class="headerlink" title="ä»£æ•°"></a>ä»£æ•°</h1><h2 id="å£°æ˜ä¸€ä¸ªä»£æ•°"><a href="#å£°æ˜ä¸€ä¸ªä»£æ•°" class="headerlink" title="å£°æ˜ä¸€ä¸ªä»£æ•°"></a>å£°æ˜ä¸€ä¸ªä»£æ•°</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">syms x </span><br></pre></td></tr></table></figure>
<h2 id="è§£ä»£æ•°æ–¹ç¨‹"><a href="#è§£ä»£æ•°æ–¹ç¨‹" class="headerlink" title="è§£ä»£æ•°æ–¹ç¨‹"></a>è§£ä»£æ•°æ–¹ç¨‹</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">solve(x^<span class="number">2</span> <span class="number">-7</span>*x + <span class="number">12</span> == <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>æˆ–ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">eq=<span class="string">&#x27;x^2 -7*x + 12 == 0&#x27;</span>;</span><br><span class="line">result=solve(eq);</span><br></pre></td></tr></table></figure>
<p>è‹¥è¦å•ç‹¬æ˜¾ç¤ºå„ä¸ªæ ¹ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">disp</span>(result(<span class="number">1</span>));</span><br><span class="line"><span class="built_in">disp</span>(result(<span class="number">2</span>));</span><br><span class="line"><span class="built_in">disp</span>(result(<span class="number">3</span>));</span><br><span class="line"><span class="built_in">disp</span>(result(<span class="number">4</span>));</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>æˆ‘çš„matlabå¿…é¡»æ‰‹åŠ¨æ‰“å°ç»“æœï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆ</strong></li>
</ul>
<h1 id="å¤šé¡¹å¼"><a href="#å¤šé¡¹å¼" class="headerlink" title="å¤šé¡¹å¼"></a>å¤šé¡¹å¼</h1><p>å½“è®¡ç®—ä¸€ä¸ªä¸€å…ƒå¤šæ¬¡é¡¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¡Œå‘é‡è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š</p>
<p>æ–¹ç¨‹ P(x) = x^4 + 7x^3 - 5x + 9 å¯ä»¥è¡¨ç¤ºä¸º:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p = [1 7 0 -5 9]ï¼›</span><br></pre></td></tr></table></figure>
<p>æ±‚è§£ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">polyval(p,<span class="number">4</span>) <span class="comment">%è®¡ç®—å½“x=4æ—¶å¤šé¡¹å¼çš„å€¼</span></span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥é€šè¿‡è¾“å…¥çŸ©é˜µçš„æ–¹å¼è®¡ç®—å¤šä¸ªå€¼ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">p = [<span class="number">1</span> <span class="number">7</span> <span class="number">0</span>  <span class="number">-5</span> <span class="number">9</span>];</span><br><span class="line">X = [<span class="number">1</span> <span class="number">2</span> <span class="number">-3</span> <span class="number">4</span>; <span class="number">2</span> <span class="number">-5</span> <span class="number">6</span> <span class="number">3</span>; <span class="number">3</span> <span class="number">1</span> <span class="number">0</span> <span class="number">2</span>; <span class="number">5</span> <span class="number">-7</span> <span class="number">3</span> <span class="number">8</span>];</span><br><span class="line">polyval(p, X);</span><br><span class="line"></span><br><span class="line"><span class="comment">%ç»“æœï¼š</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line">        <span class="number">2307</span>       <span class="number">-1769</span>        <span class="number">-939</span>        <span class="number">4499</span></span><br><span class="line">        <span class="number">2314</span>       <span class="number">-2376</span>        <span class="number">-249</span>        <span class="number">4695</span></span><br><span class="line">        <span class="number">2256</span>       <span class="number">-1892</span>        <span class="number">-549</span>        <span class="number">4310</span></span><br><span class="line">        <span class="number">4570</span>       <span class="number">-4532</span>       <span class="number">-1062</span>        <span class="number">9269</span></span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨å¤šé¡¹å¼çš„æ›²çº¿æ‹Ÿåˆ"><a href="#ä½¿ç”¨å¤šé¡¹å¼çš„æ›²çº¿æ‹Ÿåˆ" class="headerlink" title="ä½¿ç”¨å¤šé¡¹å¼çš„æ›²çº¿æ‹Ÿåˆ"></a>ä½¿ç”¨å¤šé¡¹å¼çš„æ›²çº¿æ‹Ÿåˆ</h2><p>å½“æˆ‘ä»¬è¦å¯¹ç¦»æ•£ç‚¹æ‹Ÿåˆä¸€æ¡æ›²çº¿æ—¶ï¼Œå¯ä»¥ä½¿ç”¨polyfitå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯é€šè¿‡æœ€å°äºŒä¹˜æ³•çš„æ–¹å¼<strong>æ‹Ÿåˆå‡ºä¸€æ¡æ›²çº¿çš„å¤šé¡¹å¼</strong>ã€‚</p>
<ul>
<li>polyfit(x,y,n)    nä¸ºéœ€è¦æ‹Ÿåˆçš„æœ€é«˜æ¬¡å¹‚ï¼Œå…·ä½“æ±‚æ³•å¯å‚è€ƒ<a href="https://blog.csdn.net/weixin_39796363/article/details/116188595?ops_request_misc=%7B%22request%5Fid%22%3A%22166808186016782425129618%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=166808186016782425129618&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-6-116188595-null-null.142^v63^pc_rank_34_queryrelevant25,201^v3^add_ask,213^v2^t3_esquery_v3&amp;utm_term=matlab polyfit&amp;spm=1018.2226.3001.4187">MATLAB polyfitæ›²çº¿æ‹ŸåˆåŠæ‹Ÿåˆæœ€é«˜æ¬¡å¹‚çš„é€‰æ‹©</a></li>
</ul>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">x = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]; y = [<span class="number">5.5</span> <span class="number">43.1</span> <span class="number">128</span> <span class="number">290.7</span> <span class="number">498.4</span> <span class="number">978.67</span>]; </span><br><span class="line">p = polyfit(x,y,<span class="number">5</span>)   </span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶pä¸ºä¸€ä¸ªå¤šé¡¹å¼ï¼Œå¯ä»¥ä½¿ç”¨polyvalåœ¨åæ ‡é›†ä¸Šæ‹Ÿåˆå‡ºè¯¥æ›²çº¿</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">x2 = <span class="number">1</span>:<span class="number">0.1</span>:<span class="number">6</span>;          </span><br><span class="line">y2 = polyval(p,x2);</span><br><span class="line"><span class="built_in">plot</span>(x,y,<span class="string">&#x27;o&#x27;</span>,x2,y2)</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·çš„å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>C++_IOåº“</title>
    <url>/2022/10/31/C++-7/</url>
    <content><![CDATA[<h1 id="IOç±»"><a href="#IOç±»" class="headerlink" title="IOç±»"></a>IOç±»</h1><p>åœ¨ä¹‹å‰çš„ä¸€äº›ç”¨åˆ°è¾“å…¥ä¸è¾“å‡ºçš„ç¨‹åºéƒ½æ˜¯ç”¨æˆ·å¯¹æµçš„è¯»å†™ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨çš„iostreamç±»ï¼Œä½†æ˜¯C++ä¸­çš„IOå¤„ç†å¹¶ä¸æ­¢é€šè¿‡æµè¿›è¡Œè¯»å†™ï¼Œä¸ºäº†æ”¯æŒä¸åŒçš„IOæ“ä½œï¼Œæ ‡å‡†åº“ä¸­è¿˜å®šä¹‰äº†å…¶ä»–çš„ä¸€äº›IOç±»ï¼Œä»–ä»¬è¢«åŒ…å«åœ¨ä¸åŒçš„å¤´æ–‡ä»¶ä¸­ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å¤´æ–‡ä»¶</th>
<th style="text-align:center">ç±»</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">iostream</td>
<td style="text-align:center">(w)istream<br>(w)ostream<br>(w)iostream</td>
<td style="text-align:center">ä»<strong>æ™®é€šæµ</strong>ä¸­è¯»å†™æ•°æ®</td>
</tr>
<tr>
<td style="text-align:center">fstream</td>
<td style="text-align:center">(w)ifstream<br>(w)ofstream<br>(w)fstream</td>
<td style="text-align:center">ä»<strong>æ–‡ä»¶æµ</strong>ä¸­è¯»å†™æ•°æ®</td>
</tr>
<tr>
<td style="text-align:center">sstream</td>
<td style="text-align:center">(w)istringstream<br>(w)ostringstream<br>(w)stringstream</td>
<td style="text-align:center">ä»<strong>å­—ç¬¦ä¸²æµ</strong>ä¸­è¯»å†™æ•°æ®</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>åœ¨ç±»å’Œå…¶å‡½æ•°å‰æ·»åŠ wåˆ™ä¸ºæ­£å¸¸ç±»å¯¹è±¡ã€å‡½æ•°ç­‰ï¼ˆä¾‹å¦‚wcinï¼Œwcoutï¼‰çš„å®½å­—ç¬¦ç‰ˆã€‚</li>
</ul>
<h2 id="IOç±»å‹é—´çš„å…³ç³»"><a href="#IOç±»å‹é—´çš„å…³ç³»" class="headerlink" title="IOç±»å‹é—´çš„å…³ç³»"></a>IOç±»å‹é—´çš„å…³ç³»</h2><p>ç±»å‹ifstreamå’Œistringstreaméƒ½<strong>ç»§æ‰¿</strong>è‡ªistreamï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨istreamï¼Œå°±å¦‚ä½•ä½¿ç”¨å…¶ä»–IOç±»å‹ã€‚åœ¨ä¹‹åä»‹ç»çš„æ ‡å‡†åº“çš„æµç‰¹æ€§<strong>å‡å¯ä»¥æ— å·®åˆ«åœ°ä½¿ç”¨äºå„ä¸ªIOç±»å‹</strong>ã€‚</p>
<h1 id="IOç±»å‹çš„ç‰¹æ€§"><a href="#IOç±»å‹çš„ç‰¹æ€§" class="headerlink" title="IOç±»å‹çš„ç‰¹æ€§"></a>IOç±»å‹çš„ç‰¹æ€§</h1><h2 id="IOå¯¹è±¡ä¸èƒ½æ‹·è´"><a href="#IOå¯¹è±¡ä¸èƒ½æ‹·è´" class="headerlink" title="IOå¯¹è±¡ä¸èƒ½æ‹·è´"></a>IOå¯¹è±¡ä¸èƒ½æ‹·è´</h2><p>å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€äº›IOå¯¹è±¡æ—¶ï¼ˆé€šå¸¸æ˜¯ç”¨äºIOæ“ä½œçš„ä¸€äº›å‡½æ•°ï¼‰ï¼Œä¹‹å‰ä¹Ÿä½¿ç”¨è¿‡ï¼Œæ˜¯ä¸èƒ½å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œæ‹·è´æˆ–èµ‹å€¼çš„æ“ä½œçš„ï¼Œ<strong>å› æ­¤å½“æˆ‘ä»¬æ“ä½œæµæ—¶ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨å¼•ç”¨çš„æ–¹å¼ä¼ é€’å’Œè¿”å›æµ</strong>ï¼Œè¿™ä¹Ÿæ„å‘³ç€è¿™äº›IOæ“ä½œå‡½æ•°çš„è¿”å›ç±»å‹è¦å®šä¹‰ä¸ºIOç±»çš„å¼•ç”¨ï¼Œå‚æ•°ä¸­çš„æµä¹Ÿéœ€å®šä¹‰ä¸ºIOç±»çš„å¼•ç”¨ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;in, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    in&gt;&gt;item.name&gt;&gt;item.addr;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;<span class="comment">//ä¸Šä¸€ç« è®²åˆ°çš„readå‡½æ•°å°±æ˜¯ä¸€ä¸ªIOæ“ä½œå‡½æ•°</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¡ä»¶çŠ¶æ€"><a href="#æ¡ä»¶çŠ¶æ€" class="headerlink" title="æ¡ä»¶çŠ¶æ€"></a>æ¡ä»¶çŠ¶æ€</h2><p>å½“ä½¿ç”¨IOæ“ä½œæµæ—¶å¯èƒ½ä¼šå‘ç”Ÿå¤šç§é”™è¯¯ï¼Œä¸ºäº†æŸ¥è¯¢è¿™äº›é”™è¯¯ï¼Œæ ‡å‡†åº“ä¸­å®šä¹‰äº†ç›¸å…³å‡½æ•°å’Œæ ‡å‡†ä»¥è®¿é—®å½“å‰æµçš„æ¡ä»¶çŠ¶æ€ã€‚</p>
<p>æµåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªçŠ¶æ€ï¼šï¼ˆè¿™äº›çŠ¶æ€ä¸ºIOç±»ä¸­å®šä¹‰ï¼‰</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">badbit</th>
<th style="text-align:center">å½“å‰æµå·²å´©æºƒ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">failbit</td>
<td style="text-align:center">å½“å‰IOæ“ä½œå¤±è´¥äº†</td>
</tr>
<tr>
<td style="text-align:center">eofbit</td>
<td style="text-align:center">å½“å‰æµåˆ°è¾¾äº†æ–‡ä»¶ç»“æŸ</td>
</tr>
<tr>
<td style="text-align:center">goodbit</td>
<td style="text-align:center">ä¸º0ä»£è¡¨æµæ­£å¸¸</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>å¯ä»¥å¯¹è¿™äº›çŠ¶æ€ä½è¿›è¡Œä½è¿ç®—</li>
<li>badbitè¡¨ç¤ºç³»ç»Ÿçº§é”™è¯¯ï¼Œæ˜¯ä¸å¯æ¢å¤çš„é”™è¯¯ã€‚é€šå¸¸ä¸€æ—¦è¢«ç½®ä½ï¼Œæµå°±æ— æ³•å†ä½¿ç”¨äº†ã€‚</li>
<li>failbitè¡¨ç¤ºå¯æ¢å¤çš„é”™è¯¯ï¼Œä¿®æ­£åæµå¯ä»¥æœºæ¢°ä½¿ç”¨ã€‚<strong>badbitè¢«ç½®ä½åfailbitä¹Ÿä¼šè¢«ç½®ä½</strong>ã€‚</li>
<li>å¦‚æœæ–‡ä»¶ç»“æŸï¼Œfailbitå’Œeofbit<strong>éƒ½ä¼šè¢«ç½®ä½</strong>ã€‚</li>
<li>ä¸Šé¢ä¸‰ä½<strong>ä»»æ„ä¸€ä½æœ‰ç½®ä½æƒ…å†µgoodbitéƒ½ä¼šè¢«ç½®ä½</strong>ã€‚</li>
</ul>
<p>ä»¥ä¸‹æ˜¯IOç±»çš„ä¸€äº›æŸ¥è¯¢å‡½æ•°ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ç±»çš„å­å‡½æ•°</th>
<th style="text-align:center">ä½œç”¨</th>
<th style="text-align:center">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">eof()</td>
<td style="text-align:center">æŸ¥è¯¢eofbitçŠ¶æ€</td>
<td style="text-align:center">è‹¥å¯¹åº”çŠ¶æ€ä½<strong>ç½®ä½</strong>åˆ™è¿”å›ture</td>
</tr>
<tr>
<td style="text-align:center">fail()</td>
<td style="text-align:center">æŸ¥è¯¢failbitçŠ¶æ€</td>
<td style="text-align:center">è‹¥å¯¹åº”çŠ¶æ€ä½<strong>ç½®ä½</strong>åˆ™è¿”å›ture</td>
</tr>
<tr>
<td style="text-align:center">bad()</td>
<td style="text-align:center">æŸ¥è¯¢badbitçŠ¶æ€</td>
<td style="text-align:center">è‹¥å¯¹åº”çŠ¶æ€ä½<strong>ç½®ä½</strong>åˆ™è¿”å›ture</td>
</tr>
<tr>
<td style="text-align:center">good()</td>
<td style="text-align:center">æŸ¥è¯¢goodbitçŠ¶æ€</td>
<td style="text-align:center">è‹¥å¯¹åº”çŠ¶æ€ä½<strong>ç½®ä½</strong>åˆ™è¿”å›ture</td>
</tr>
<tr>
<td style="text-align:center">clear()</td>
<td style="text-align:center">å°†æµä¸­æ‰€æœ‰æ¡ä»¶çŠ¶æ€ä½å¤ä½</td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">rdstate()</td>
<td style="text-align:center">è¿”å›å½“å‰æµçš„çŠ¶æ€</td>
<td style="text-align:center">ä¸€ç§åŒ…å«æ‰€æœ‰çŠ¶æ€ä½ä¿¡æ¯çš„ç±»ï¼Œä½†ç±»å‹åŒçŠ¶æ€ä½</td>
</tr>
<tr>
<td style="text-align:center">clear(flag)</td>
<td style="text-align:center">å¤ä½æŒ‡å®šçŠ¶æ€ä½</td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">setstate(flag)</td>
<td style="text-align:center">ç½®ä½æŒ‡å®šçŠ¶æ€ä½</td>
<td style="text-align:center">void</td>
</tr>
</tbody>
</table>
</div>
<h3 id="ç®¡ç†æ¡ä»¶çŠ¶æ€"><a href="#ç®¡ç†æ¡ä»¶çŠ¶æ€" class="headerlink" title="ç®¡ç†æ¡ä»¶çŠ¶æ€"></a>ç®¡ç†æ¡ä»¶çŠ¶æ€</h3><p>æ¯è¿›è¡Œä¸€æ¬¡æµæ“ä½œåæ¢å¤ä¸Šä¸€æ¬¡çš„æ¡ä»¶çŠ¶æ€ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> oldstate = cin.<span class="built_in">rdstate</span>();</span><br><span class="line">cin.<span class="built_in">clear</span>();</span><br><span class="line">cin&gt;&gt;....<span class="comment">//ä¸€æ¬¡è¾“å…¥æµæ“ä½œ</span></span><br><span class="line">cin.<span class="built_in">setstate</span>(oldstate);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½æ“ä½œä¸€æ¬¡æ“ä½œå¤šä¸ªçŠ¶æ€ä½ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡è®¾å½“å‰æ‰€æœ‰çŠ¶æ€ç½®ä½</span></span><br><span class="line">cin.<span class="built_in">clear</span>(cin.<span class="built_in">rdstate</span>() &amp; ~cin.failbit &amp; ~cin.badbit)<span class="comment">//åªå¤ä½failbitï¼Œbadbit</span></span><br></pre></td></tr></table></figure>
<h2 id="è¾“å‡ºæµçš„ç¼“å†²"><a href="#è¾“å‡ºæµçš„ç¼“å†²" class="headerlink" title="è¾“å‡ºæµçš„ç¼“å†²"></a>è¾“å‡ºæµçš„ç¼“å†²</h2><h3 id="åˆ·æ–°ç¼“å†²åŒº"><a href="#åˆ·æ–°ç¼“å†²åŒº" class="headerlink" title="åˆ·æ–°ç¼“å†²åŒº"></a>åˆ·æ–°ç¼“å†²åŒº</h3><p>ä¹‹å‰è®²åˆ°è¿‡è¾“å‡ºendlå¯ä»¥åˆ·æ–°ç¼“å†²åŒºï¼Œè¿˜æœ‰ä»¥ä¸‹æ“ä½œä¹Ÿå¯ä»¥åˆ·æ–°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cout&lt;&lt;endl; <span class="comment">//æ¢è¡Œ</span></span><br><span class="line">cout&lt;&lt;flush; <span class="comment">//ä¸æ·»åŠ ä»»ä½•é¢å¤–å­—ç¬¦</span></span><br><span class="line">cout&lt;&lt;ends; <span class="comment">//æ·»åŠ ä¸€ä¸ªç©ºå­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ·æ–°ç¼“å†²åŒºçš„ä½œç”¨"><a href="#åˆ·æ–°ç¼“å†²åŒºçš„ä½œç”¨" class="headerlink" title="åˆ·æ–°ç¼“å†²åŒºçš„ä½œç”¨"></a>åˆ·æ–°ç¼“å†²åŒºçš„ä½œç”¨</h3><p>æˆ‘å…¶å®ä¹Ÿä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œå§‘ä¸”è°ˆä¸€ä¸‹æˆ‘çš„ç†è§£ï¼Œè¿™æ˜¯ç½‘ä¸Šçš„ä¸€ä¸ªä¾‹ç¨‹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">setvbuf</span>( stdout, <span class="literal">NULL</span>, _IOLBF, <span class="number">1024</span> );  <span class="comment">//è®¾ç½®æ§åˆ¶å°è¾“å‡ºä¸ºè¡Œç¼“å­˜æ¨¡å¼ï¼ŒæŠŠç¼“å†²åŒºä¸æµç›¸å…³ </span></span><br><span class="line">	cout &lt;&lt;<span class="string">&quot;hello world\n&quot;</span>&lt;&lt;endl;                </span><br><span class="line">	<span class="built_in">Sleep</span>(<span class="number">5000</span>);                            </span><br><span class="line">	cout &lt;&lt;<span class="string">&quot;leeboy&quot;</span> &lt;&lt;endl;                 </span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç¬¬å››è¡Œä¸åˆ·æ–°ç¼“å†²åŒºï¼Œåˆ™4è¡Œå†…å®¹ä¼šå’Œ7è¡Œåœ¨5såä¸€èµ·è¾“å‡ºï¼Œæ‰€ä»¥åˆ·æ–°ç¼“å†²åŒºçš„ä½œç”¨åº”è¯¥æ˜¯ç«‹å³è¾“å‡ºå½“å‰å†…å®¹ï¼Ÿè€ŒæŒ‰ç…§ç½‘ä¸Šè¯´æ³•ï¼Œå¦‚æœä¸åˆ·æ–°ç¼“å†²åŒºï¼Œè¾“å‡ºæ˜¯ç”±ç³»ç»Ÿæ¯éš”ä¸€æ®µæ—¶é—´æ£€æµ‹è¾“å‡ºæµæ˜¯å¦æœ‰å†…å®¹ã€‚</p>
<h3 id="unitbufæ“ä½œç¬¦"><a href="#unitbufæ“ä½œç¬¦" class="headerlink" title="unitbufæ“ä½œç¬¦"></a>unitbufæ“ä½œç¬¦</h3><p>å¦‚æœæƒ³è®¾ç½®æ¯ä¸€æ¬¡è¾“å‡ºåè‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒºï¼Œå¯ä»¥ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cout&lt;&lt;std::unitbuf;</span><br><span class="line">cout&lt;&lt;std::nounitbuf;<span class="comment">//æ¢å¤æ­£å¸¸ç¼“å†²æ¨¡å¼</span></span><br></pre></td></tr></table></figure>
<h3 id="å…³è”è¾“å…¥å’Œè¾“å‡ºæµ"><a href="#å…³è”è¾“å…¥å’Œè¾“å‡ºæµ" class="headerlink" title="å…³è”è¾“å…¥å’Œè¾“å‡ºæµ"></a>å…³è”è¾“å…¥å’Œè¾“å‡ºæµ</h3><p>å…³è”åä»»ä½•è¯•å›¾ä»è¾“å…¥æµè¯»å–æ•°æ®çš„æ“ä½œéƒ½ä¼šå…ˆåˆ·æ–°å…³è”çš„è¾“å‡ºæµ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cin&gt;&gt;std::ival;<span class="comment">//é»˜è®¤æƒ…å†µä¸‹cinå’Œcerréƒ½å…³è”åˆ°äº†cout</span></span><br></pre></td></tr></table></figure>
<h1 id="æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º"><a href="#æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º" class="headerlink" title="æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º"></a>æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º</h1><p>å¤´æ–‡ä»¶fstreamä¸­å®šä¹‰äº†ä¸‰ä¸ªç±»æ¥æ”¯æŒå…³äºæ–‡ä»¶çš„IOæ“ä½œï¼š</p>
<ul>
<li>ifstreamï¼šç”¨äºæ–‡ä»¶è¯»æ“ä½œï¼Œä»ç»™å®šæ–‡ä»¶è¯»å–å†…å®¹</li>
<li>ofstreamï¼šç”¨äºæ–‡ä»¶å†™æ“ä½œ</li>
<li>fstreamï¼šè¯»å†™æ“ä½œï¼Œå¯ä»¥é€šè¿‡ä¸åŒé…ç½®å®ç°ä¸Šä¸¤ç±»çš„åŠŸèƒ½</li>
</ul>
<p>è¿™äº›ç±»éƒ½ç»§æ‰¿äº†iostreamçš„ç›¸å…³æ“ä½œï¼ŒåŒæ—¶è¿˜å®šä¹‰äº†ä¸€äº›æ–°çš„æˆå‘˜æ¥ç®¡ç†ä¸æµç›¸å…³çš„æ–‡ä»¶ï¼Œä»¥ä¸‹åˆ—å‡ºäº†éƒ¨åˆ†ç‰¹æœ‰æ“ä½œï¼Œ<strong>è¿™äº›æ“ä½œéƒ½é€‚ç”¨äºä¸Šä¸‰ä¸ªç±»</strong>ï¼Œä½†ä¸èƒ½å¯¹å…¶ä»–IOç±»è°ƒç”¨</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">æ“ä½œ</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">fstream a;</td>
<td style="text-align:center">åˆ›å»ºä¸€ä¸ªæœªç»‘å®šçš„æ–‡ä»¶æµ</td>
</tr>
<tr>
<td style="text-align:center">fstream a(s);</td>
<td style="text-align:center">åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æµï¼Œå¹¶æ‰“å¼€åä¸ºsçš„æ–‡ä»¶ï¼Œsä¸ºstringç±»å‹æˆ–Cé£æ ¼å­—ç¬¦ä¸²æŒ‡é’ˆ</td>
</tr>
<tr>
<td style="text-align:center">a.open()</td>
<td style="text-align:center">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ç»‘å®šè‡³æµa</td>
</tr>
<tr>
<td style="text-align:center">a.close()</td>
<td style="text-align:center">å…³é—­ç»‘å®šçš„æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">a.is_open()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªboolå€¼ï¼ŒæŒ‡å‡ºæ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€</td>
</tr>
</tbody>
</table>
</div>
<h2 id="æ–‡ä»¶çš„æ‰“å¼€"><a href="#æ–‡ä»¶çš„æ‰“å¼€" class="headerlink" title="æ–‡ä»¶çš„æ‰“å¼€"></a>æ–‡ä»¶çš„æ‰“å¼€</h2><p>åˆšåˆšè®²åˆ°äº†æœ‰ä¸¤ç§æ–¹å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">fstream <span class="title">a</span><span class="params">(<span class="string">&quot;dhk.txt&quot;</span>)</span></span>;</span><br><span class="line"><span class="comment">///////////////////////</span></span><br><span class="line">fstream b;</span><br><span class="line">b.<span class="built_in">open</span>(<span class="string">&quot;dhk.txt&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å…ˆè¯¦è§£ä¸€ä¸‹openå‡½æ•°ï¼š</p>
<h3 id="open-å‡½æ•°"><a href="#open-å‡½æ•°" class="headerlink" title="open()å‡½æ•°"></a>open()å‡½æ•°</h3><p>æ ¹æ®è¾“å…¥çš„å‚æ•°æ•°é‡ï¼Œè¯¥å‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªå®šä¹‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> member function</span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">open</span> <span class="params">( <span class="type">const</span> <span class="type">char</span> * filename,</span></span></span><br><span class="line"><span class="params"><span class="function">            ios_base::openmode mode = ios_base::in | ios_base::out )</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">open</span><span class="params">(<span class="type">const</span> <span class="type">wchar_t</span> *_Filename,</span></span></span><br><span class="line"><span class="params"><span class="function">        ios_base::openmode mode= ios_base::in | ios_base::out,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">int</span> prot = ios_base::_Openprot)</span>ï¼›</span></span><br><span class="line"><span class="function"> </span></span><br></pre></td></tr></table></figure>
<p>å‚æ•°ï¼š</p>
<ul>
<li>filenameï¼šæ–‡ä»¶å</li>
<li>open modeï¼šæ‰“å¼€æ–¹å¼</li>
<li>protï¼šæ‰“å¼€æ–‡ä»¶çš„å±æ€§ï¼Œä¸€èˆ¬å¾ˆå°‘ç”¨åˆ°</li>
</ul>
<p>è¿™é‡Œé‡ç‚¹è®²ä¸€ä¸‹æ‰“å¼€æ–¹å¼ï¼Œåˆšåˆšæˆ‘ä»¬è®²è¿‡ï¼šå¤´æ–‡ä»¶fstreamä¸­çš„fstreamç±»å¯ä»¥å®ç°è¯»å’Œå†™çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¯ä»¥é€šè¿‡ä¸åŒçš„é…ç½®å®ç°ifstreamå’Œofstreamçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯é€šè¿‡è¿™é‡Œçš„æ‰“å¼€æ–¹å¼é…ç½®ã€‚</p>
<p>æ‰“å¼€æ–¹å¼åœ¨iosç±»ä¸­å®šä¹‰ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ios::in</th>
<th style="text-align:center">ä¸ºè¾“å…¥(è¯»)è€Œæ‰“å¼€æ–‡ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ios::out</td>
<td style="text-align:center">ä¸ºè¾“å‡º(å†™)è€Œæ‰“å¼€æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">ios::ate</td>
<td style="text-align:center">åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾</td>
</tr>
<tr>
<td style="text-align:center">ios::app</td>
<td style="text-align:center">æ‰€æœ‰è¾“å‡ºé™„åŠ åœ¨æ–‡ä»¶æœ«å°¾</td>
</tr>
<tr>
<td style="text-align:center">ios::trunc</td>
<td style="text-align:center">å¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™å…ˆåˆ é™¤è¯¥æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">ios::binary</td>
<td style="text-align:center">äºŒè¿›åˆ¶æ–¹å¼</td>
</tr>
</tbody>
</table>
</div>
<p><strong>è¿™äº›æ–¹å¼å¯ä»¥é€šè¿‡æˆ–è¿ç®—|ç»„åˆä½¿ç”¨</strong></p>
<ul>
<li>ateå’Œbinaryé€šå¸¸ç”¨äºæ‰“å¼€ä»»ä½•ç±»å‹çš„æ–‡ä»¶æµå¯¹è±¡</li>
</ul>
<h3 id="é»˜è®¤æ‰“å¼€æ–¹å¼"><a href="#é»˜è®¤æ‰“å¼€æ–¹å¼" class="headerlink" title="é»˜è®¤æ‰“å¼€æ–¹å¼"></a>é»˜è®¤æ‰“å¼€æ–¹å¼</h3><p>å¯¹äºç¬¬äºŒç§æ–¹å¼<code>fstream a(&quot;dhk.txt&quot;);</code>å…¶å®æ˜¯éšå¼åœ°è°ƒç”¨äº†open()å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨äº†é»˜è®¤æ‰“å¼€æ–¹å¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">&quot;...&quot;</span>, ios::out)</span></span>;</span><br><span class="line"><span class="function">ifstream <span class="title">in</span><span class="params">(<span class="string">&quot;...&quot;</span>, ios::in)</span></span>;</span><br><span class="line"><span class="function">fstream <span class="title">foi</span><span class="params">(<span class="string">&quot;...&quot;</span>, ios::in|ios::out)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="ä»¥å†™æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä¼šä¸¢å¼ƒå·²æœ‰æ•°æ®"><a href="#ä»¥å†™æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä¼šä¸¢å¼ƒå·²æœ‰æ•°æ®" class="headerlink" title="ä»¥å†™æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä¼šä¸¢å¼ƒå·²æœ‰æ•°æ®"></a>ä»¥å†™æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä¼šä¸¢å¼ƒå·²æœ‰æ•°æ®</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æ‰“å¼€ä¸€ä¸ªofstreamå¯¹è±¡æ—¶ï¼Œè‹¥æ²¡æœ‰æŒ‡å®šæ¨¡å¼ï¼Œé»˜è®¤æ˜¯éšå«çš„ä½¿ç”¨æˆªæ–­(ios::trunc)ï¼Œå³æ¯æ¬¡æ‰“å¼€è¯¥æ–‡ä»¶æ—¶ä¼šæ¸…ç©ºä¹‹å‰çš„å†…å®¹ï¼Œè‹¥è¦é˜»æ­¢æ¸…ç©ºï¼Œ<strong>éœ€æ˜¾å¼åœ°è®¾ç½®ä¸ºios::appæ¨¡å¼</strong>ï¼ŒåŒæ—¶ï¼Œä½¿ç”¨appæ¨¡å¼åˆ™éšå¼åœ°åŒ…å«äº†ios::outã€‚</p>
<h2 id="ä½¿ç”¨fstreamå¯¹è±¡ä»£æ›¿iostream-amp"><a href="#ä½¿ç”¨fstreamå¯¹è±¡ä»£æ›¿iostream-amp" class="headerlink" title="ä½¿ç”¨fstreamå¯¹è±¡ä»£æ›¿iostream&amp;"></a>ä½¿ç”¨fstreamå¯¹è±¡ä»£æ›¿iostream&amp;</h2><p>ç”±äºfstreamç±»ç»§æ‰¿è‡ªiostreamï¼Œå› æ­¤ï¼Œæ¥å—ä¸€ä¸ªiostreamç±»å‹å¼•ç”¨å‚æ•°çš„å‡½æ•°ä¹Ÿå¯ä»¥æ¥æ”¶fstreamç±»å‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line"> &#123;</span><br><span class="line">    string name;</span><br><span class="line">    string addr;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;in, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    in&gt;&gt;item.name&gt;&gt;item.addr;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;out, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;NAME: &quot;</span>&lt;&lt;item.name&lt;&lt;endl;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;ADDR: &quot;</span>&lt;&lt;item.addr&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">    person man;</span><br><span class="line">    <span class="function">ifstream <span class="title">in</span><span class="params">(<span class="string">&quot;D.txt&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">&quot;dhk.txt&quot;</span>)</span></span>;</span><br><span class="line">    <span class="built_in">read</span>(in,man);	<span class="comment">//ä½¿ç”¨ifstreamä»£æ›¿istream</span></span><br><span class="line">    <span class="built_in">print</span>(out,man); 	<span class="comment">//ä½¿ç”¨ofstreamä»£æ›¿ostream</span></span><br><span class="line">    out.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>å¯¹ä¸€ä¸ªå·²ç»æ‰“å¼€çš„æ–‡ä»¶æµå†è°ƒç”¨openå‡½æ•°ä¼šå¯¼è‡´è¯¥æµçš„failbitç½®ä½ï¼Œåç»­æ“ä½œéƒ½ä¼šå¤±è´¥</p>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€çš„å¿«æ·æ–¹å¼ï¼šif(a);</li>
</ul>
<h2 id="æ–‡ä»¶æ‰“å¼€è·¯å¾„çš„é—®é¢˜"><a href="#æ–‡ä»¶æ‰“å¼€è·¯å¾„çš„é—®é¢˜" class="headerlink" title="æ–‡ä»¶æ‰“å¼€è·¯å¾„çš„é—®é¢˜"></a>æ–‡ä»¶æ‰“å¼€è·¯å¾„çš„é—®é¢˜</h2><p>æ–‡ä»¶çš„é»˜è®¤æ‰“å¼€è·¯å¾„æˆ‘ä¹Ÿæ²¡ææ‡‚ï¼Œæœ€å¥½ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ‰“å¼€ç›¸å…³æ–‡ä»¶</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ifstream <span class="title">in</span><span class="params">(<span class="string">&quot;.vscode\\fstream\\D.txt&quot;</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p><u><strong>å¹¶ä¸”è¿™é‡Œè¦ä½¿ç”¨åŒæ–œæ ï¼ï¼ï¼</strong></u></p>
<h1 id="å­—ç¬¦ä¸²æµ"><a href="#å­—ç¬¦ä¸²æµ" class="headerlink" title="å­—ç¬¦ä¸²æµ"></a>å­—ç¬¦ä¸²æµ</h1><p>åœ¨å¤´æ–‡ä»¶sstreamä¸­å®šä¹‰äº†ä¸‰ä¸ªç±»æ¥æ”¯æŒæ“ä½œå­—ç¬¦ä¸²IOï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>istringstream</li>
<li>ostirngstream</li>
<li>stringstream</li>
</ul>
<p>è¿™äº›ç±»åŒæ ·ç»§æ‰¿è‡ªiostreamï¼Œç”¨æ³•åŒæ–‡ä»¶æµï¼Œç±»ç‰¹æœ‰æ“ä½œæœ‰ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">stringstream a;</th>
<th style="text-align:center">åˆ›å»ºä¸€ä¸ªæœªç»‘å®šstringçš„æµ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">stringstream a(s);</td>
<td style="text-align:center">ä¸stringå¯¹è±¡sç»‘å®šçš„ä¸€ä¸ªå­—ç¬¦ä¸²æµ</td>
</tr>
<tr>
<td style="text-align:center">a.str();</td>
<td style="text-align:center">è¿”å›aä¸­æ‰€ä¿å­˜çš„æ‰€æœ‰å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:center">a.str();</td>
<td style="text-align:center">å°†sæ‹·è´è‡³aä¸­ï¼Œè¿”å›void</td>
</tr>
<tr>
<td style="text-align:center">a.clear();</td>
<td style="text-align:center">æ¸…ç©ºæµ</td>
</tr>
</tbody>
</table>
</div>
<h2 id="è¯»å–string"><a href="#è¯»å–string" class="headerlink" title="è¯»å–string"></a>è¯»å–string</h2><p>ä¸æ–‡ä»¶æµç›¸åŒï¼Œstringstreamä¹Ÿå¯ä»¥å®ç°è¯»å–å’Œè¾“å…¥çš„åŠŸèƒ½</p>
<p>ä¸‹é¢ä»¥ä¸€ä¸ªä¾‹ç¨‹è¯´æ˜stringæµçš„ç”¨æ³• </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"> <span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> <span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line"> &#123;</span><br><span class="line">    string name;</span><br><span class="line">    string addr;</span><br><span class="line"> &#125;;</span><br><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;in, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    in&gt;&gt;item.name&gt;&gt;item.addr;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;out, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;NAME: &quot;</span>&lt;&lt;item.name&lt;&lt;endl;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;ADDR: &quot;</span>&lt;&lt;item.addr&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    person man;</span><br><span class="line">    string line;</span><br><span class="line">    <span class="function">ifstream <span class="title">in</span><span class="params">(<span class="string">&quot;sstream\\D.txt&quot;</span>)</span></span>;	<span class="comment">//æ‰“å¼€ä¸€ä¸ªtxtæ–‡ä»¶å¹¶ç»‘å®šä¸€ä¸ªè¾“å…¥æ–‡ä»¶æµin</span></span><br><span class="line">   <span class="comment">/*D.txtçš„å†…å®¹ï¼š</span></span><br><span class="line"><span class="comment">   dhk 12</span></span><br><span class="line"><span class="comment">   aca 34</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">getline</span>(in,line))	<span class="comment">//åˆ†åˆ«å¤„ç†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œçš„æ•°æ®</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">stringstream <span class="title">s</span><span class="params">(line)</span></span>;<span class="comment">//å°†è¯¥è¡Œå†…å®¹ä¸å­—ç¬¦ä¸²æµsç»‘å®šï¼Œsçš„å¯¿å‘½ä¸ºå½“æ¬¡å¾ªç¯ï¼Œå½“æ¬¡å¾ªç¯ç»“æŸsè‡ªåŠ¨é”€æ¯</span></span><br><span class="line">        s&gt;&gt;man.name;<span class="comment">//å°†è¯¥è¡Œç¬¬ä¸€ä¸ªè¯è¾“å…¥è¿›ç±»æˆå‘˜</span></span><br><span class="line">        s&gt;&gt;man.addr;<span class="comment">//è¯¥è¡Œç¬¬äºŒä¸ªè¯è¾“å…¥è¿›ç±»æˆå‘˜</span></span><br><span class="line">        <span class="built_in">print</span>(cout,man);<span class="comment">//é€šè¿‡iostreamè¾“å‡ºç±»æˆå‘˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    in.<span class="built_in">close</span>();<span class="comment">//å…³é—­æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯ä»¥çœ‹å‡ºï¼Œæµæ¯æ¬¡è¾“å‡ºï¼ˆå…¥ï¼‰çš„å†…å®¹ä¸ºä¸€ä¸ªâ€œè¯â€ï¼Œä¹Ÿå°±æ˜¯è¯´ç©ºæ ¼å’Œæ¢è¡Œéƒ½ä¼šç»“æŸè¯¥æ¬¡è¾“å‡ºï¼ˆå…¥ï¼‰çš„å†…å®¹</li>
</ul>
<h2 id="è¾“å‡ºåˆ°å­—ç¬¦ä¸²æµ"><a href="#è¾“å‡ºåˆ°å­—ç¬¦ä¸²æµ" class="headerlink" title="è¾“å‡ºåˆ°å­—ç¬¦ä¸²æµ"></a>è¾“å‡ºåˆ°å­—ç¬¦ä¸²æµ</h2><p>å½“æˆ‘ä»¬æƒ³é€æ­¥æ„é€ æƒ³è¦è¾“å‡ºçš„å†…å®¹ï¼Œæœ€åä¸€å£æ°”æ‰“å°æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„è¾“å‡ºæµï¼Œå°†æ„é€ å¥½çš„å†…å®¹åˆ†å¸ƒå†™å…¥åˆ°ostingstreamï¼ˆæˆ–stringstreamçš„è¾“å‡ºæµï¼‰ä¸­ï¼Œæœ€åé€šè¿‡å‡½æ•°.str()è¾“å‡ºåˆ°coutæˆ–è€…ä½ æƒ³è¦çš„å…¶ä»–æµä¸­</p>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C_æ‚é¡¹</title>
    <url>/2022/10/30/C-%E6%9D%82%E9%A1%B9/</url>
    <content><![CDATA[<h1 id="ä½åŸŸç»“æ„ä½“"><a href="#ä½åŸŸç»“æ„ä½“" class="headerlink" title="ä½åŸŸç»“æ„ä½“"></a>ä½åŸŸç»“æ„ä½“</h1><p>æœ‰æ—¶å€™ï¼Œä¿¡æ¯å­˜å‚¨çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦ä¸€ä¸ªå®Œæ•´çš„å­—èŠ‚ï¼Œè€Œåªéœ€å å‡ ä¸ªæˆ–ä¸€ä¸ªäºŒè¿›åˆ¶ä½å°±èƒ½æ»¡è¶³éœ€æ±‚ã€‚ä¾‹å¦‚å­˜æ”¾ä¸€ä¸ªboolç±»å‹çš„å˜é‡ï¼Œåªéœ€è¦trueæˆ–è€…falseå³å¯ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œåªéœ€è¦0æˆ–è€…1ä¸€ä½äºŒè¿›åˆ¶ä½å³å¯ã€‚ä¸ºäº†èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œå¹¶ä½¿å¤„ç†ç®€ä¾¿ï¼ŒCè¯­è¨€åˆæä¾›äº†ä¸€ç§æ•°æ®ç»“æ„ï¼Œç§°ä¸ºâ€œä½åŸŸâ€æˆ–â€œä½æ®µâ€ã€‚<strong>æ‰€è°“â€œä½åŸŸâ€æ˜¯æŠŠä¸€ä¸ªå­—èŠ‚ä¸­çš„äºŒè¿›ä½åˆ’åˆ†ä¸ºå‡ ä¸ªä¸åŒçš„åŒºåŸŸï¼Œå¹¶è¯´æ˜æ¯ä¸ªåŒºåŸŸçš„ä½æ•°ã€‚</strong>æ¯ä¸ªåŸŸæœ‰ä¸€ä¸ªåŸŸåï¼Œå…è®¸åœ¨ç¨‹åºä¸­æŒ‰åŸŸåè¿›è¡Œæ“ä½œã€‚<strong>è¿™æ ·å°±å¯ä»¥æŠŠå‡ ä¸ªä¸åŒçš„å¯¹è±¡ç”¨ä¸€ä¸ªå­—èŠ‚çš„äºŒè¿›åˆ¶ä½åŸŸæ¥è¡¨ç¤ºã€‚</strong></p>
<p>æ ¼å¼ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">net_pro_cdu</span>  </span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line">    <span class="type">unsigned</span>  <span class="type">char</span> acs:<span class="number">4</span> </span><br><span class="line">    <span class="type">unsigned</span>  <span class="type">char</span> :<span class="number">0</span>  </span><br><span class="line">    <span class="type">unsigned</span>  <span class="type">char</span> ace:<span class="number">4</span>  </span><br><span class="line">    <span class="type">unsigned</span>  <span class="type">char</span> dve:<span class="number">4</span> </span><br><span class="line">&#125; Ncdu;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æ— ä½åŸŸåçš„ä½åŸŸä¸èƒ½ä½¿ç”¨ï¼Œä»…ç”¨æ¥å¡«å……ã€è°ƒæ•´å°¾ç½®ï¼ˆå¦‚ç¬¬å››è¡Œï¼‰</li>
<li>ä½å¤§å°ä¸èƒ½è¶…è¿‡å®šä¹‰ç”¨çš„ç±»å‹ï¼ˆå¦‚ä¸Šè¿°ä¾‹å­ä½æ•°ä¸èƒ½è¶…è¿‡8ï¼‰</li>
</ul>
<h1 id="volatileå…³é”®å­—"><a href="#volatileå…³é”®å­—" class="headerlink" title="volatileå…³é”®å­—"></a>volatileå…³é”®å­—</h1><p>å£°æ˜ä¸€ä¸ªå˜é‡æ˜¯æ˜“å˜çš„ï¼Œå¯ä»¥é˜²æ­¢ç¼–è¯‘å™¨å¯¹ç¨‹åºä¸€äº›å˜é‡è¿ç®—çš„è¿‡åº¦ä¼˜åŒ–ã€‚</p>
<h1 id="forå¾ªç¯æ‰§è¡Œé¡ºåº"><a href="#forå¾ªç¯æ‰§è¡Œé¡ºåº" class="headerlink" title="forå¾ªç¯æ‰§è¡Œé¡ºåº"></a>forå¾ªç¯æ‰§è¡Œé¡ºåº</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>; i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">     <span class="comment">// å¾ªç¯ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œé¡ºåºè§£æŠ›<br>æ‰§è¡Œçš„é¡ºåºå¦‚ä¸‹ï¼š<br>ç¬¬ä¸€æ­¥ ï¼š i=0  åˆå§‹åŒ–å€¼<br>ç¬¬äºŒæ­¥ ï¼š i&lt;5 è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœä¸ºçœŸï¼Œåˆ™ç»§ç»­æ‰§è¡Œ<br>ç¬¬ä¸‰æ­¥ ï¼š æ‰§è¡Œå¾ªç¯ä½“çš„å†…å®¹<br>ç¬¬å››æ­¥ ï¼š i++ å˜é‡iè‡ªå¢<br>ç¬¬äº”æ­¥ ï¼š å›åˆ°ç¬¬äºŒæ­¥ï¼Œæ¡ä»¶åˆ¤æ–­ä¸ºçœŸï¼Œåˆ™æ‰§è¡Œå¾ªç¯ä½“å†…å®¹ï¼Œå†åˆ°i++ä¸€ç›´å¾ªç¯ï¼Œ<br>ç›´åˆ°ç¬¬äºŒæ­¥çš„åˆ¤æ–­æ¡ä»¶ä¸ºå‡ï¼Œåˆ™é€€å‡ºè¯¥å¾ªç¯</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/weixin_44080187/article/details/123429045">https://blog.csdn.net/weixin_44080187/article/details/123429045</a></p>
<h1 id="unionç±»å‹"><a href="#unionç±»å‹" class="headerlink" title="unionç±»å‹"></a>unionç±»å‹</h1><h2 id="é•¿åº¦é—®é¢˜"><a href="#é•¿åº¦é—®é¢˜" class="headerlink" title="é•¿åº¦é—®é¢˜"></a>é•¿åº¦é—®é¢˜</h2><p>å®ä¾‹åŒ–ä¸ºå˜é‡åï¼Œè¿™ä¸ªå˜é‡çš„é•¿åº¦æ˜¯è¿™ä¸ªunionä¸­æœ€é•¿çš„æ•°æ®ç±»å‹çš„é•¿åº¦</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">DEMO</span>&#123;</span> </span><br><span class="line">     <span class="type">char</span> status;</span><br><span class="line">     <span class="type">int</span> a; </span><br><span class="line">     <span class="type">int</span> serial[<span class="number">4</span>]; </span><br><span class="line">&#125;demoï¼›<span class="comment">//å¤§å°ä¸º16å­—èŠ‚</span></span><br></pre></td></tr></table></figure>
<h2 id="æ•°æ®è®¿é—®"><a href="#æ•°æ®è®¿é—®" class="headerlink" title="æ•°æ®è®¿é—®"></a>æ•°æ®è®¿é—®</h2><p>å¯¹äºunionæˆå‘˜ï¼Œåœ°å€ç›¸åŒï¼Œå­˜å‚¨æœ‰ç‚¹åƒå¹¶åˆ—ä¸€æ ·çš„å­˜å‚¨ï¼ˆï¼Ÿæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼‰ï¼Œä¸€ä¸ªæˆå‘˜å˜åŒ–ä¸€å®šä¼šå½±å“å…¶ä»–æˆå‘˜</p>
]]></content>
      <tags>
        <tag>Cè¯­è¨€å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C++_ç±»</title>
    <url>/2022/10/26/C++-6/</url>
    <content><![CDATA[<h1 id="å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹"><a href="#å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹" class="headerlink" title="å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹"></a>å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹</h1><h2 id="å®šä¹‰ä¸€ä¸ªç±»"><a href="#å®šä¹‰ä¸€ä¸ªç±»" class="headerlink" title="å®šä¹‰ä¸€ä¸ªç±»"></a>å®šä¹‰ä¸€ä¸ªç±»</h2><p>C++ä¸­å¯ä»¥ä½¿ç”¨structå’Œclassæ„å»ºä¸€ä¸ªç±»ï¼Œstructä¸ºç»§æ‰¿Cè¯­è¨€ç•™ä¸‹ï¼Œä½†ç”¨æ³•ä¸Cä¸åŒã€‚structå’Œclassä½¿ç”¨æ–¹æ³•å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å¯¹ç±»æˆå‘˜é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒï¼Œè¿™ç‚¹åé¢ä¼šè°ˆåˆ°ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span>/<span class="keyword">class</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">	string name;</span><br><span class="line">	string addr;</span><br><span class="line">   <span class="function"><span class="type">int</span> <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰æˆå‘˜å‡½æ•°"><a href="#åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰æˆå‘˜å‡½æ•°" class="headerlink" title="åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰æˆå‘˜å‡½æ•°"></a>åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰æˆå‘˜å‡½æ•°</h2><p>C++çš„structä¸Cæœ€ä¸åŒçš„ä¸€ç‚¹å°±æ˜¯C++å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰å‡½æ•°ï¼Œä¾‹å¦‚ä¸Šè¿°ç±»ä¸­å£°æ˜äº†ä¸€ä¸ªè¿”å›å€¼ä¸ºintå‹çš„å‡½æ•°ã€‚</p>
<p>è¯¥å‡½æ•°çš„å†…å®¹å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åªåœ¨ç±»ä¸­å£°æ˜ï¼Œå†åœ¨å¤–éƒ¨å®šä¹‰ã€‚åœ¨å¤–éƒ¨å®šä¹‰æ—¶éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>å‡½æ•°ç±»å‹å£°æ˜ã€å‡½æ•°åã€å‚æ•°åˆ—è¡¨å¿…é¡»å’Œå£°æ˜ä¸­ä¸€è‡´</li>
<li>ç”±äºå‡½æ•°æ˜¯åœ¨ç±»ä¸­å£°æ˜ï¼Œåœ¨å®šä¹‰æ—¶éœ€å£°æ˜å…¶å‘½åç©ºé—´ï¼ˆå£°æ˜å‡½æ•°åï¼‰</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">person::test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®šä¹‰ä¸€ä¸ªè¿”å›ç±»çš„å‡½æ•°"><a href="#å®šä¹‰ä¸€ä¸ªè¿”å›ç±»çš„å‡½æ•°" class="headerlink" title="å®šä¹‰ä¸€ä¸ªè¿”å›ç±»çš„å‡½æ•°"></a>å®šä¹‰ä¸€ä¸ªè¿”å›ç±»çš„å‡½æ•°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">	string name;</span><br><span class="line">	string addr;</span><br><span class="line">   <span class="function">person&amp; <span class="title">copy</span><span class="params">(<span class="type">const</span> person &amp;x)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      name=x.name;</span><br><span class="line">      <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>è¯¥å‡½æ•°åŒæ ·å¯ä»¥åœ¨ç±»å¤–å®šä¹‰ï¼Œè§„åˆ™åŒä¸Šä¸€èŠ‚</p>
</li>
<li><p>å‡½æ•°è¿”å›çš„ç±»å‹<strong>å¿…é¡»ä¸ºå¼•ç”¨</strong>ï¼Œå› ä¸ºè¿”å›çš„å€¼åº”è¯¥ä¸ºä¸€ä¸ªå·¦å€¼</p>
</li>
<li><p>è‹¥å‡½æ•°å‚æ•°ä¹Ÿä¸ºä¸€ä¸ªç±»å¯¹è±¡ï¼Œä¹Ÿå¿…é¡»ä¸ºå¼•ç”¨æ ¼å¼</p>
</li>
<li><p>return *thisæ„ä¸ºè¿”å›è¯¥è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">person test1,test2;</span><br><span class="line">test1.name=&quot;dhk&quot;; test2.name=&quot;aca&quot;;</span><br><span class="line">test1.copy(test2);</span><br><span class="line">cout&lt;&lt;test1.name; //è¾“å‡º&quot;aca&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‡½æ•°ä½“ä¸­çš„nameå’Œaddrä¸ºè°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡çš„ç±»æˆå‘˜</p>
</li>
</ul>
<h2 id="å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°"><a href="#å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°" class="headerlink" title="å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°"></a>å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°</h2><h3 id="é€šè¿‡å®šä¹‰æµçš„å¼•ç”¨ç›´æ¥æ“ä½œç±»æˆå‘˜çš„è¾“å…¥è¾“å‡º"><a href="#é€šè¿‡å®šä¹‰æµçš„å¼•ç”¨ç›´æ¥æ“ä½œç±»æˆå‘˜çš„è¾“å…¥è¾“å‡º" class="headerlink" title="é€šè¿‡å®šä¹‰æµçš„å¼•ç”¨ç›´æ¥æ“ä½œç±»æˆå‘˜çš„è¾“å…¥è¾“å‡º"></a>é€šè¿‡å®šä¹‰æµçš„å¼•ç”¨ç›´æ¥æ“ä½œç±»æˆå‘˜çš„è¾“å…¥è¾“å‡º</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;in, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    in&gt;&gt;item.name&gt;&gt;item.addr;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;out, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;NAME: &quot;</span>&lt;&lt;item.name&lt;&lt;endl;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;ADDR: &quot;</span>&lt;&lt;item.addr&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>istreamå’Œostreaméœ€æå‰å£°æ˜å…¶å‘½åç©ºé—´</li>
<li>IOç±»ä¸èƒ½è¢«æ‹·è´ï¼Œå› æ­¤å½“å…¶ä½œä¸ºå‚æ•°æ—¶<strong>å¿…é¡»é€šè¿‡å¼•ç”¨ä¼ é€’å€¼</strong></li>
<li>æ­¤å¤„printå‡½æ•°çš„å‚æ•°itemå¯ä»¥ä¸ä½¿ç”¨å¼•ç”¨</li>
</ul>
<h1 id="ç±»çš„æ„é€ å‡½æ•°"><a href="#ç±»çš„æ„é€ å‡½æ•°" class="headerlink" title="ç±»çš„æ„é€ å‡½æ•°"></a>ç±»çš„æ„é€ å‡½æ•°</h1><p>å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»å¯¹è±¡æ—¶ï¼Œå¹¶æ²¡æœ‰å¯¹æ¯ä¸€ä¸ªç±»æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ—¶ï¼Œç¼–è¯‘å™¨ä¾¿é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°æ¥æ§åˆ¶å½“å‰åˆå§‹åŒ–ï¼Œæ­¤å‡½æ•°å«åšé»˜è®¤æ„é€ å‡½æ•°ï¼Œ<strong>è¯¥å‡½æ•°ä¼šå¯¹æ‰€æœ‰æˆå‘˜è¿›è¡Œé»˜è®¤åˆå§‹åŒ–ã€‚</strong></p>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³åœ¨å®šä¹‰ç±»å¯¹è±¡æ—¶å°±å¯¹ä¸€äº›æˆå‘˜è¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„åˆå§‹åŒ–è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥è‡ªå·±å®šä¹‰æ„é€ å‡½æ•°å¯¹ä¸€äº›ç±»æˆå‘˜è¿›è¡Œæƒ³è¦çš„åˆå§‹åŒ–ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;	</span><br><span class="line">   <span class="built_in">person</span>()=<span class="keyword">default</span>;</span><br><span class="line">   <span class="built_in">person</span>(string s1, string s2) &#123;name=s1;addr=s2;&#125;</span><br><span class="line">   <span class="built_in">person</span>(person &amp;item) &#123;<span class="built_in">copy</span>(item);&#125;</span><br><span class="line">   <span class="built_in">person</span>(istream &amp;in) &#123;<span class="built_in">read</span>(in,*<span class="keyword">this</span>);&#125;</span><br><span class="line"><span class="comment">/**********************ä»¥ä¸Šä¸ºæ„é€ å‡½æ•°*******************/</span>      </span><br><span class="line">	string name;</span><br><span class="line">	string addr;</span><br><span class="line">   <span class="function">person&amp; <span class="title">copy</span><span class="params">(<span class="type">const</span> person &amp;x)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      name=x.name;</span><br><span class="line">      <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;in, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    in&gt;&gt;item.name&gt;&gt;item.addr;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   person a;</span><br><span class="line">   <span class="function">string <span class="title">s1</span><span class="params">(<span class="string">&quot;dhk&quot;</span>)</span>,<span class="title">s2</span><span class="params">(<span class="string">&quot;aca&quot;</span>)</span></span>; <span class="function">person <span class="title">b</span><span class="params">(s1,s2)</span></span>;</span><br><span class="line">   <span class="function">person <span class="title">c</span><span class="params">(b)</span></span>;</span><br><span class="line">   <span class="function">person <span class="title">d</span><span class="params">(cin)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨personç±»ä¸­ä¸€å…±å®šä¹‰äº†å››ä¸ªæ„é€ å‡½æ•°ï¼Œä¸‹é¢å°†åˆ†åˆ«è®²è§£è¿™å››ä¸ªæ„é€ å‡½æ•°çš„å«ä¹‰å’Œç›¸å…³çŸ¥è¯†ï¼š</p>
<ul>
<li><p><code>person()=default;</code>é»˜è®¤æ„é€ å‡½æ•°</p>
<p>å½“ä¸€ä¸ªç±»ä¸­å®šä¹‰äº†å…¶ä»–æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¾¿ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ã€‚å› æ­¤ï¼Œè‹¥æ²¡æœ‰æ­¤å‡½æ•°ï¼Œä¸»å‡½æ•°ä¸­24è¡Œä¾¿ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯æ²¡æœ‰ä¸å½“å‰å®šä¹‰æƒ…å†µåŒ¹é…çš„æ„é€ å‡½æ•°ã€‚</p>
</li>
<li><p><code>person(string s1, string s2)</code></p>
<p>å¦‚ä¸»å‡½æ•°25è¡Œï¼Œå½“åˆå§‹åŒ–å‚æ•°ä¸ºä¸¤ä¸ªstringå¯¹è±¡æ—¶ï¼Œä¼šè¿›å…¥è¯¥æ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°çš„ä½œç”¨æ˜¯å°†ç±»æˆå‘˜èµ‹å€¼ä¸ºä¸¤ä¸ªstringå¯¹è±¡ã€‚éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li><p>å¤§æ‹¬å·å†…ä¸ºæ„é€ å‡½æ•°çš„å‡½æ•°ä½“ï¼Œå¯ä»¥åœ¨æ­¤å®Œæˆä¸€ç³»åˆ—çš„åˆå§‹åŒ–</p>
</li>
<li><p>è¿™é‡Œä¹Ÿæœ‰ä¸€ç§æ„é€ åˆå§‹å€¼åˆ—è¡¨çš„åˆå§‹åŒ–æ–¹å¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">person</span>(string s1, string s2): <span class="built_in">name</span>(s1),<span class="built_in">addr</span>(s2) &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸¤ç§æ–¹å¼ä½œç”¨å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å®ç°çš„åŸç†æœ‰æ‰€å·®å¼‚ï¼Œè¿™ç‚¹åé¢ä¼šè®²åˆ°ã€‚</p>
</li>
</ul>
</li>
<li><p><code>person(person &amp;item)</code></p>
<p>å¦‚ä¸»å‡½æ•°26è¡Œï¼Œç±»åˆå§‹åŒ–çš„å‚æ•°ä¹Ÿå¯ä»¥ä¸ºä¸€ä¸ªç±»å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°ä¼šç›´æ¥å°†è¾“å…¥å‚æ•°ç”¨äºæ‰§è¡Œcopyå‡½æ•°ï¼Œç›¸å½“äºé€šè¿‡copyå‡½æ•°é—´æ¥ç»™ç±»æˆå‘˜èµ‹å€¼ã€‚</p>
</li>
<li><p><code>person(istream &amp;in)</code></p>
<p>å¦‚27è¡Œï¼Œè¾“å…¥å‚æ•°ä¸ºä¸€ä¸ªIOç±»å‹çš„å¼•ç”¨ï¼Œéœ€è¦æ³¨æ„æ­¤æ—¶readå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ä¸º*this</p>
</li>
</ul>
<h2 id="æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨å’Œèµ‹å€¼çš„åŒºåˆ«"><a href="#æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨å’Œèµ‹å€¼çš„åŒºåˆ«" class="headerlink" title="æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨å’Œèµ‹å€¼çš„åŒºåˆ«"></a>æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨å’Œèµ‹å€¼çš„åŒºåˆ«</h2><p>ä¹‹å‰æˆ‘ä»¬è®²åˆ°äº†æ„é€ å‡½æ•°å¯¹ç±»æˆå‘˜çš„æ“ä½œæœ‰ä¸¤ç§ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">person</span>(string s1, string s2) &#123;name=s1;addr=s2;&#125;</span><br><span class="line"><span class="built_in">person</span>(string s1, string s2): <span class="built_in">name</span>(s1),<span class="built_in">addr</span>(s2) &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸¤ä¸ªæ“ä½œåœ¨æ•ˆæœä¸Šä¸€æ ·ï¼Œä½†æ˜¯ç¬¬ä¸€ç§æ“ä½œæ ¹æºä¸Šä¸ºèµ‹å€¼ï¼Œè€Œç¬¬äºŒç§æ“ä½œæ‰æ˜¯åˆå§‹åŒ–ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹äºŒè€…åŒºåˆ«ä¸å¤§ä½†æ˜¯å¦‚æœå½“ç±»æˆå‘˜ä¸ºå¼•ç”¨æˆ–è€…constç±»å‹æ—¶ï¼Œæ­¤æ—¶å°†ä¸èƒ½èµ‹å€¼ï¼Œä½†æ˜¯å¯ä»¥åˆå§‹åŒ–ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">person</span>(<span class="type">int</span> i) &#123;a=i;r=i&#125; <span class="comment">//é”™è¯¯çš„ï¼Œä¸èƒ½ç»™å¼•ç”¨å’Œå¸¸é‡èµ‹å€¼</span></span><br><span class="line">   <span class="built_in">person</span>(<span class="type">int</span> i): <span class="built_in">a</span>(i),<span class="built_in">r</span>(i) &#123;&#125; <span class="comment">//æ­£ç¡®</span></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> a;</span><br><span class="line">	<span class="type">int</span> &amp;r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è®¿é—®æ§åˆ¶å’Œå°è£…"><a href="#è®¿é—®æ§åˆ¶å’Œå°è£…" class="headerlink" title="è®¿é—®æ§åˆ¶å’Œå°è£…"></a>è®¿é—®æ§åˆ¶å’Œå°è£…</h1><p>å‰é¢è®²åˆ°äº†ä½¿ç”¨classå’Œstructå”¯ä¸€åŒºåˆ«æ˜¯å¯¹ç±»æˆå‘˜é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒï¼ŒC++ä¸­å¯ä»¥ä½¿ç”¨è®¿é—®è¯´æ˜ç¬¦æ¥ç®¡ç†ç±»æˆå‘˜çš„è®¿é—®æƒé™ä»¥è¾¾åˆ°æ›´å¥½çš„å°è£…ã€‚å¦‚æœä½¿ç”¨structï¼Œåˆ™åœ¨ç¬¬ä¸€ä¸ªè®¿é—®è¯´æ˜ç¬¦å‰çš„æˆå‘˜é»˜è®¤ä¸ºpublicï¼Œclassåˆ™ç›¸åã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">person</span></span><br><span class="line">&#123;	</span><br><span class="line">   <span class="keyword">public</span>: <span class="comment">//ä»¥ä¸‹æˆå‘˜åœ¨æ•´ä¸ªç¨‹åºä¸­éƒ½å¯ä»¥è¢«è®¿é—®</span></span><br><span class="line">   <span class="built_in">person</span>()=<span class="keyword">default</span>;</span><br><span class="line">   <span class="built_in">person</span>(string s1, string s2) &#123;name=s1;addr=s2;&#125;</span><br><span class="line">   <span class="built_in">person</span>(person &amp;item) &#123;<span class="built_in">copy</span>(item);&#125;</span><br><span class="line">   <span class="built_in">person</span>(istream &amp;in) &#123;<span class="built_in">read</span>(in,*<span class="keyword">this</span>);&#125;  </span><br><span class="line">   <span class="keyword">private</span>: <span class="comment">//ä»¥ä¸‹æˆå‘˜åªå¯ä»¥è¢«ç±»çš„æˆå‘˜å‡½æ•°è®¿é—®</span></span><br><span class="line">	string name;</span><br><span class="line">	string addr;</span><br><span class="line">   <span class="function">person&amp; <span class="title">copy</span><span class="params">(<span class="type">const</span> person &amp;x)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      name=x.name;</span><br><span class="line">      <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ï¼Œprivateè¯´æ˜ç¬¦åçš„æˆå‘˜<strong>åªå¯ä»¥è¢«ç±»çš„æˆå‘˜å‡½æ•°è®¿é—®ï¼Œ</strong>åƒå‰é¢è®²åˆ°çš„readå’Œprintå‡½æ•°ä¸å±äºç±»çš„æˆå‘˜å‡½æ•°ï¼Œå› æ­¤æ— æ³•è®¿é—®privateä¸­çš„æˆå‘˜ã€‚</p>
<h2 id="å‹å…ƒ"><a href="#å‹å…ƒ" class="headerlink" title="å‹å…ƒ"></a>å‹å…ƒ</h2><p>è‹¥æƒ³éç±»æˆå‘˜å‡½æ•°è®¿é—®privateå†…å®¹,å¯ä»¥åœ¨ç±»ä¸­<strong>ä½¿ç”¨friendå…³é”®å­—å¯¹å…¶è¿›è¡Œå‹å…ƒå£°æ˜</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="keyword">friend</span> istream &amp;<span class="title">read</span><span class="params">(istream &amp;in, person &amp;item)</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">friend</span> ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;out, person &amp;item)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;in, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    in&gt;&gt;item.name&gt;&gt;item.addr;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;out, person &amp;item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;NAME: &quot;</span>&lt;&lt;item.name&lt;&lt;endl;</span><br><span class="line">    out&lt;&lt;<span class="string">&quot;ADDR: &quot;</span>&lt;&lt;item.addr&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‹å…ƒå£°æ˜ä¹Ÿé€‚ç”¨äºå£°æ˜å…¶ä»–ç±»åŠå…¶æˆå‘˜å‡½æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">test</span>;</span><br><span class="line">   <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">test::test1</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">test</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;...&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…³äºç±»çš„é™æ€æˆå‘˜"><a href="#å…³äºç±»çš„é™æ€æˆå‘˜" class="headerlink" title="å…³äºç±»çš„é™æ€æˆå‘˜"></a>å…³äºç±»çš„é™æ€æˆå‘˜</h1><p>åœ¨ä»”ç»†é˜…è¯»äº†ä¹¦ç±è¿‡åä¸ªäººè§‰å¾—ç”¨å¤„ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œå¦‚æœä»¥åç”¨åˆ°äº†ç›¸å…³çŸ¥è¯†å†åœ¨è¿™é‡Œè¡¥å……ï¼Œç›®å‰å°±ä¸å†™äº†ã€‚</p>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>51å•ç‰‡æœºæ±‡ç¼–æŒ‡ä»¤æŸ¥è¯¢</title>
    <url>/2022/10/14/51%E5%8D%95%E7%89%87%E6%9C%BA%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/</url>
    <content><![CDATA[<h1 id="1ã€å¯»å€"><a href="#1ã€å¯»å€" class="headerlink" title="1ã€å¯»å€"></a>1ã€å¯»å€</h1><h2 id="å¯»å€æ–¹å¼"><a href="#å¯»å€æ–¹å¼" class="headerlink" title="å¯»å€æ–¹å¼"></a>å¯»å€æ–¹å¼</h2><p>å¯»æ‰¾æ“ä½œæ•°çš„åœ°å€çš„å„ç§æ–¹å¼ã€‚</p>
<h3 id="1-ç«‹å³å¯»å€"><a href="#1-ç«‹å³å¯»å€" class="headerlink" title="1.ç«‹å³å¯»å€"></a>1.ç«‹å³å¯»å€</h3><p>ç›´æ¥ä½¿ç”¨æ“ä½œæ•°å°†æ“ä½œæ•°å­˜å…¥ç›¸å…³åœ°å€ä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MOV R0,#26H</span><br><span class="line">MOV DPTR,#2000H</span><br></pre></td></tr></table></figure>
<ul>
<li>ç«‹å³æ•°å¯ä»¥æ˜¯8ä½æˆ–16ä½</li>
<li>ç«‹å³æ•°å‰å¿…é¡»åŠ <code>#</code></li>
</ul>
<h3 id="2-ç›´æ¥å¯»å€"><a href="#2-ç›´æ¥å¯»å€" class="headerlink" title="2.ç›´æ¥å¯»å€"></a>2.ç›´æ¥å¯»å€</h3><p>å°†æ“ä½œæ•°è§†ä¸ºåœ°å€ï¼Œå¹¶å°†è¯¥åœ°å€å­˜å‚¨çš„æ•°æ®è½¬é€’åˆ°ç›¸å…³åœ°å€ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MOV A,30H //ç›¸å½“äºå¯¹30Hè¿›è¡Œè§£å¼•ç”¨ï¼Œå°†30Hå€¼ä¼ å…¥Aä¸­</span><br></pre></td></tr></table></figure>
<h3 id="3-å¯„å­˜å™¨å¯»å€"><a href="#3-å¯„å­˜å™¨å¯»å€" class="headerlink" title="3.å¯„å­˜å™¨å¯»å€"></a>3.å¯„å­˜å™¨å¯»å€</h3><p>ç›´æ¥ä½¿ç”¨å¯„å­˜å™¨åå­—ä½œä¸ºåœ°å€å¹¶å¯¹è¿›è¡Œè§£å¼•ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MOV A,R1 //*R1</span><br></pre></td></tr></table></figure>
<h3 id="4-å¯„å­˜å™¨é—´æ¥å¯»å€"><a href="#4-å¯„å­˜å™¨é—´æ¥å¯»å€" class="headerlink" title="4.å¯„å­˜å™¨é—´æ¥å¯»å€"></a>4.å¯„å­˜å™¨é—´æ¥å¯»å€</h3><p>æŒ‡å®šå¯„å­˜å™¨çš„å†…å®¹ä¸ºæ“ä½œæ•°çš„åœ°å€ï¼Œè¯¥åœ°å€å­˜å‚¨çš„å†…å®¹æ‰æ˜¯æ“ä½œæ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MOV A,@R0 // @R0ç›¸å½“äº**R0</span><br></pre></td></tr></table></figure>
<ul>
<li>éœ€ä½¿ç”¨é—´å€ç¬¦<code>@</code></li>
<li>å¯¹å¤–éƒ¨RAMè¿›è¡Œè¯»å–æ—¶å¿…é¡»é‡‡ç”¨è¯¥æ–¹å¼</li>
</ul>
<h3 id="5-å˜å€å¯»å€"><a href="#5-å˜å€å¯»å€" class="headerlink" title="5.å˜å€å¯»å€"></a>5.å˜å€å¯»å€</h3><p>é€šè¿‡å¯¹åŸºåœ°å€è¿›è¡Œåç§»è·å¾—å½“å‰æ“ä½œæ•°åœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MOV A,#06H</span><br><span class="line">MOVC A,@A+PC</span><br></pre></td></tr></table></figure>
<p>ç”±äºè¿™é‡Œï¼ˆ@A+PCï¼‰æ•´ä½“åº”ä¸ºä¸€ä¸ªåœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œè¦å¯¹<strong>Aä½¿ç”¨é—´å€ç¬¦å–06Hä½œä¸ºåœ°å€</strong>çš„åç§»é‡ï¼Œå› æ­¤è¯¥ä¸¤è¡ŒæŒ‡ä»¤çš„æ„æ€ä¸ºï¼šå°†ï¼ˆ@A+PCï¼‰åœ°å€ä¸­å­˜å‚¨çš„æ•°æ®ä¼ å…¥Aä¸­</p>
<h3 id="6-ç›¸å¯¹å¯»å€"><a href="#6-ç›¸å¯¹å¯»å€" class="headerlink" title="6.ç›¸å¯¹å¯»å€"></a>6.ç›¸å¯¹å¯»å€</h3><p>ç›´æ¥ä»¥PCä½œä¸ºåŸºåœ°å€ï¼Œåªå†™å‡ºç›¸å¯¹åç§»é‡ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<h4 id="æ— æ¡ä»¶è½¬ç§»ï¼š"><a href="#æ— æ¡ä»¶è½¬ç§»ï¼š" class="headerlink" title="æ— æ¡ä»¶è½¬ç§»ï¼š"></a>æ— æ¡ä»¶è½¬ç§»ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SJMP 08H //ä½¿PCè½¬ç§»è‡³å½“å‰PCå€¼+08Hï¼ˆå½“å‰PCä¸ºä¸‹ä¸€æŒ‡ä»¤åœ°å€ï¼‰</span><br></pre></td></tr></table></figure>
<h4 id="æ¡ä»¶è½¬ç§»ï¼š"><a href="#æ¡ä»¶è½¬ç§»ï¼š" class="headerlink" title="æ¡ä»¶è½¬ç§»ï¼š"></a>æ¡ä»¶è½¬ç§»ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">JZ LOP //ä»…å½“ï¼ˆAï¼‰=0æ—¶æ‰§è¡Œï¼ŒLOPä¸ºæ ‡å·</span><br></pre></td></tr></table></figure>
<h3 id="7-ä½å¯»å€"><a href="#7-ä½å¯»å€" class="headerlink" title="7.ä½å¯»å€"></a>7.ä½å¯»å€</h3><h1 id="2ã€æŒ‡ä»¤ç³»ç»Ÿ"><a href="#2ã€æŒ‡ä»¤ç³»ç»Ÿ" class="headerlink" title="2ã€æŒ‡ä»¤ç³»ç»Ÿ"></a>2ã€æŒ‡ä»¤ç³»ç»Ÿ</h1><h2 id="1-æ•°æ®ä¼ é€æŒ‡ä»¤"><a href="#1-æ•°æ®ä¼ é€æŒ‡ä»¤" class="headerlink" title="1.æ•°æ®ä¼ é€æŒ‡ä»¤"></a>1.æ•°æ®ä¼ é€æŒ‡ä»¤</h2><ul>
<li>ç‰‡å†…æ•°æ®ä¼ é€ï¼šMOV    è®¿é—®å†…éƒ¨RAM</li>
<li>ç‰‡å¤–æ•°æ®ä¼ é€ï¼šMOVX    è®¿é—®å¤–éƒ¨RAM</li>
<li>ç¨‹åºå­˜å‚¨å™¨æ•°æ®ä¼ é€ï¼šMOVC    è®¿é—®å†…å¤–ROM</li>
</ul>
<h2 id="2-æ•°æ®äº¤æ¢æŒ‡ä»¤"><a href="#2-æ•°æ®äº¤æ¢æŒ‡ä»¤" class="headerlink" title="2.æ•°æ®äº¤æ¢æŒ‡ä»¤"></a>2.æ•°æ®äº¤æ¢æŒ‡ä»¤</h2><ul>
<li><p>å­—èŠ‚äº¤æ¢ï¼ˆå…¨éƒ¨ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">XCH A,Rn</span><br><span class="line">XCH A,@Ri //å¯„å­˜å™¨åŒºåªæœ‰R0å’ŒR1å¯ç”¨ä½œé—´æ¥å¯»å€</span><br></pre></td></tr></table></figure>
</li>
<li><p>å­—èŠ‚äº¤æ¢ï¼ˆä½å››ä½ï¼‰ï¼šXCHD</p>
</li>
<li>å­—èŠ‚äº¤æ¢ï¼ˆé«˜ä½äº’æ¢ï¼‰ï¼šSWAP</li>
</ul>
<h2 id="3-å †æ ˆæ“ä½œæŒ‡ä»¤"><a href="#3-å †æ ˆæ“ä½œæŒ‡ä»¤" class="headerlink" title="3.å †æ ˆæ“ä½œæŒ‡ä»¤"></a>3.å †æ ˆæ“ä½œæŒ‡ä»¤</h2><ul>
<li>å…¥æ ˆï¼šPUSH    SPå…ˆå˜åŒ–å†å‹æ ˆ</li>
<li>å‡ºæ ˆï¼šPOP      å…ˆå‡ºæ ˆå†å˜åŒ–SP</li>
</ul>
<h2 id="4-ç®—æœ¯è¿ç®—æŒ‡ä»¤"><a href="#4-ç®—æœ¯è¿ç®—æŒ‡ä»¤" class="headerlink" title="4.ç®—æœ¯è¿ç®—æŒ‡ä»¤"></a>4.ç®—æœ¯è¿ç®—æŒ‡ä»¤</h2><ul>
<li>åŠ æ³•<ul>
<li>ä¸å¸¦è¿›ä½ï¼š ADD</li>
<li>å¸¦è¿›ä½ï¼ˆCyï¼‰ï¼šADDC</li>
<li>åŠ ä¸€ï¼šINC</li>
</ul>
</li>
<li>å‡æ³•<ul>
<li>ä¸å¸¦è¿›ä½ï¼šSUB</li>
<li>å¸¦è¿›ä½ï¼šSUBB</li>
<li>å‡ä¸€ï¼šDEC</li>
</ul>
</li>
<li>ä¹˜æ³•ï¼šMUL</li>
<li>é™¤æ³•ï¼šDIV</li>
</ul>
<h2 id="5-é€»è¾‘è¿ç®—æŒ‡ä»¤"><a href="#5-é€»è¾‘è¿ç®—æŒ‡ä»¤" class="headerlink" title="5.é€»è¾‘è¿ç®—æŒ‡ä»¤"></a>5.é€»è¾‘è¿ç®—æŒ‡ä»¤</h2><ul>
<li>é€»è¾‘ä¸ï¼šANL</li>
<li>é€»è¾‘æˆ–ï¼šORL</li>
<li>é€»è¾‘å¼‚æˆ–ï¼šXRL</li>
<li>å–åï¼šCPL</li>
<li>æ¸…é›¶ï¼šCLR</li>
<li>ç§»ä½<ul>
<li>ä¸å¸¦è¿›ä½ï¼šRL/RR å·¦ç§»/å³ç§»1ä½</li>
<li>å¸¦è¿›ä½ï¼šRLC/RRC ~</li>
</ul>
</li>
</ul>
<h2 id="6-ä½è¿ç®—"><a href="#6-ä½è¿ç®—" class="headerlink" title="6.ä½è¿ç®—"></a>6.ä½è¿ç®—</h2><p>è¯¥è¿ç®—å¯¹è±¡ä»…é’ˆå¯¹Cyå’Œbitå‹å¯¹è±¡</p>
<ul>
<li>ä½ä¼ é€ï¼šMOV</li>
<li>ç½®1ï¼šSETB</li>
<li>æ¸…0ï¼šCLR</li>
<li>å–éï¼šCPL</li>
<li>å–ä¸ï¼šANL</li>
<li>å–æˆ–ï¼šORL</li>
</ul>
<h2 id="7-æ§åˆ¶è½¬ç§»ç±»æŒ‡ä»¤"><a href="#7-æ§åˆ¶è½¬ç§»ç±»æŒ‡ä»¤" class="headerlink" title="7.æ§åˆ¶è½¬ç§»ç±»æŒ‡ä»¤"></a>7.æ§åˆ¶è½¬ç§»ç±»æŒ‡ä»¤</h2><ul>
<li><p>æ— æ¡ä»¶è½¬ç§»ï¼šLJMP  3å­—èŠ‚ï¼Œç›´æ¥è½¬ç§»è‡³è¯¥16ä½åœ°å€</p>
</li>
<li><p>ç›¸å¯¹è½¬ç§»ï¼šSJMP</p>
</li>
<li><p>æ¡ä»¶è½¬ç§»ï¼š<strong>(æ¡ä»¶è½¬ç§»çš†ä¸ºç›¸å¯¹PCçš„è½¬ç§»)</strong></p>
<ul>
<li><p>ç´¯åŠ å™¨<u><strong>åˆ¤0</strong></u>ï¼šJZ/JNZ</p>
</li>
<li><p>è¿›ä½Cyåˆ¤æ–­ï¼šJC/JNC</p>
</li>
<li><p>ä»»æ„ä½åˆ¤æ–­ï¼šJB/JNB/JBC</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">JB bit,rel</span><br><span class="line">// bit: åˆ¤æ–­ä½  relï¼šåç§»é‡</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¯”è¾ƒ<strong>ä¸ç›¸ç­‰</strong>åˆ¤æ–­ï¼ˆä¸ç›¸ç­‰ä¸ºæ»¡è¶³æ¡ä»¶ï¼‰:CJNE</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CJNE A,#data,rel</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å‡1<strong>ä¸ä¸º0</strong>åˆ¤æ–­è½¬ç§»ï¼šDJNZ</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C++çš„è¯­å¥ä¸å‡½æ•°</title>
    <url>/2022/10/11/C++-5/</url>
    <content><![CDATA[<h1 id="tryè¯­å¥ä¸å¼‚å¸¸å¤„ç†"><a href="#tryè¯­å¥ä¸å¼‚å¸¸å¤„ç†" class="headerlink" title="tryè¯­å¥ä¸å¼‚å¸¸å¤„ç†"></a>tryè¯­å¥ä¸å¼‚å¸¸å¤„ç†</h1><p>é€šå¸¸çš„å¼‚å¸¸å¤„ç†åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>throwè¡¨è¾¾å¼ï¼šä½¿ç”¨throwè¡¨è¾¾å¼è¡¨ç¤ºå½“å‰ç¨‹åºé‡åˆ°äº†æŸä¸ªé—®é¢˜ï¼ˆå¼‚å¸¸å£°æ˜ï¼‰</li>
<li>tryè¯­å¥å—ï¼šä¸catché…åˆç”¨äºå¤„ç†å„ç±»å¼‚å¸¸å£°æ˜</li>
<li>ä¸€å¥—å¼‚å¸¸ç±»ï¼šç”¨äºä¼ é€’å…·ä½“çš„å¼‚å¸¸ä¿¡æ¯ï¼ˆå¼‚å¸¸å£°æ˜çš„å«ä¹‰ï¼‰</li>
</ul>
<h2 id="ä¾‹ç¨‹"><a href="#ä¾‹ç¨‹" class="headerlink" title="ä¾‹ç¨‹"></a>ä¾‹ç¨‹</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> std::vector;</span><br><span class="line"><span class="keyword">using</span> std::string;</span><br><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"><span class="keyword">using</span> std::runtime_error;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a,b;</span><br><span class="line">    cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a!=b) <span class="keyword">throw</span> <span class="built_in">runtime_error</span>(<span class="string">&quot;ERROR!!!&quot;</span>);</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;good&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span>(runtime_error err)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;err.<span class="built_in">what</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="throwè¡¨è¾¾å¼"><a href="#throwè¡¨è¾¾å¼" class="headerlink" title="throwè¡¨è¾¾å¼"></a>throwè¡¨è¾¾å¼</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(a!=b) <span class="keyword">throw</span> <span class="built_in">runtime_error</span>(<span class="string">&quot;ERROR!!!&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ ¼å¼ï¼šthrow+å¼‚å¸¸ç±»+åˆå§‹åŒ–å¼‚å¸¸ç±»å¯¹è±¡</p>
<ul>
<li><p>è¯¥åˆå§‹åŒ–çš„å¯¹è±¡åªç”¨äºæä¾›ä¸€äº›å…³äºå¼‚å¸¸çš„è¾…åŠ©ä¿¡æ¯ï¼ˆç”¨æˆ·è‡ªè¡Œå®šä¹‰ï¼‰</p>
</li>
<li><p>å¼‚å¸¸ç±»ä¸ºä¸€ç³»åˆ—åœ¨åº“ä¸­å®šä¹‰çš„ç±»å‹ï¼Œä½¿ç”¨æ—¶éœ€è¦å£°æ˜å…¶å‘½åç©ºé—´ï¼Œä»¥ä¸‹æ˜¯å‡ ç§å¸¸ç”¨çš„å¼‚å¸¸ç±»ï¼Œåœ¨å¤´æ–‡ä»¶stdexceptä¸­</p>
<p>|    exception    |                  ä¸€èˆ¬é”™è¯¯                  |<br>| :â€”â€”â€”â€”â€”â€”-: | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”: |<br>|  runtime_error  |           è¿è¡Œæ—¶æ‰èƒ½æ£€æµ‹å‡ºçš„ä»»åŠ¡           |<br>|   range_error   | è¿è¡Œæ—¶ï¼šç”Ÿæˆç»“æœè¶…å‡ºæœ‰æ„ä¹‰çš„å€¼åŸŸèŒƒå›´çš„é”™è¯¯ |<br>| overflow_error  |            è¿è¡Œæ—¶ï¼šè®¡ç®—ä¸Šæº¢é”™è¯¯            |<br>| underflow_error |            è¿è¡Œæ—¶ï¼šè®¡ç®—ä¸‹æº¢é”™è¯¯            |<br>|   logic_error   |                ç¨‹åºé€»è¾‘é”™è¯¯                |<br>|  domain_error   |       é€»è¾‘é”™è¯¯ï¼šå‚æ•°å¯¹åº”çš„ç»“æœä¸å­˜åœ¨       |<br>|  invalid_error  |             é€»è¾‘é”™è¯¯ï¼šæ— æ•ˆå‚æ•°             |<br>|  length_error   |         é€»è¾‘é”™è¯¯ï¼šè¶…å‡ºå¯¹è±¡ç±»å‹é•¿åº¦         |<br>|  out_of_range   |           é€»è¾‘é”™è¯¯ï¼šè¶…å‡ºæœ‰æ•ˆèŒƒå›´           |</p>
<ul>
<li><p>é™¤exceptionå¤–å…¶ä»–ç±»å‹éƒ½<strong>å¿…é¡»</strong>ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²åˆå§‹åŒ–ï¼Œè€Œexceptionåˆ™ä¸å…è®¸è¿™ç§åˆå§‹åŒ–</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(a!=b) <span class="keyword">throw</span> <span class="built_in">exception</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;good&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(exception)</span><br><span class="line">&#123;</span><br><span class="line">   cout&lt;&lt;<span class="string">&quot;ERROR!!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="tryè¯­å¥å—"><a href="#tryè¯­å¥å—" class="headerlink" title="tryè¯­å¥å—"></a>tryè¯­å¥å—</h2><p>æ ¼å¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123; &#125;<span class="comment">//ç¨‹åºæ­£å¸¸é€»è¾‘ï¼Œå¼‚å¸¸ç±»åœ¨æ­¤throwå‡º </span></span><br><span class="line"><span class="built_in">catch</span>(å¼‚å¸¸å£°æ˜)</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="built_in">catch</span>(å¼‚å¸¸å£°æ˜)</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å½“tryå†…ä¸€æ—¦æå‡ºå¼‚å¸¸ç±»æ—¶ï¼Œå°±ä¸å†æ‰§è¡Œè¯¥throwè¡¨è¾¾å¼åçš„å†…å®¹ï¼›åä¹‹ï¼Œè‹¥æ²¡æœ‰throwä»»ä½•å¼‚å¸¸ï¼Œåˆ™ä¸ä¼šè§¦å‘ä»»ä½•catchè¯­å¥ï¼Œç¨‹åºæ­£å¸¸æ‰§è¡Œå®Œtryè¯­å¥ã€‚</li>
<li>catchæ‹¬å·ä¸­éœ€å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œç±»å‹ä¸ºè§¦å‘çš„å¼‚å¸¸ç±»ï¼Œè¿™äº›å¼‚å¸¸ç±»åªæœ‰ä¸€ä¸ªå­å‡½æ•°whatï¼Œç”¨äºè¾“å‡ºåˆå§‹åŒ–æ—¶çš„å­—ç¬¦ä¸²ï¼ˆä¸èƒ½ç”¨äºexceptionç±»ï¼‰</li>
</ul>
<p>å½“æœ‰å¤šä¸ªtryè¯­å¥å—åµŒå¥—æ—¶ï¼Œå½“æœ€å†…éƒ¨tryæå‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œä¼šç”±å†…åˆ°å¤–æ‰§è¡Œcatchï¼Œè‹¥æœ€ç»ˆéƒ½æ²¡æœ‰å¯¹åº”catchï¼Œåˆ™ç¨‹åºè½¬åˆ°terminateçš„æ ‡å‡†åº“å‡½æ•°ï¼Œè¯¥å‡½æ•°è¡Œä¸ºä¸ç³»ç»Ÿæœ‰å…³ï¼Œé€šå¸¸æ‰§è¡Œè¯¥å‡½æ•°ä¼šå¯¼è‡´ç¨‹åºéæ­£å¸¸é€€å‡ºã€‚</p>
<h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><h2 id="å‚æ•°ä¼ é€’"><a href="#å‚æ•°ä¼ é€’" class="headerlink" title="å‚æ•°ä¼ é€’"></a>å‚æ•°ä¼ é€’</h2><ul>
<li>å½¢å‚å®å‚ä¹‹é—´çš„è½¬é€’ä¸ºå€¼æ‹·è´</li>
<li>C++ä¸­å»ºè®®ç”¨å¼•ç”¨ç±»å‹çš„å½¢å‚ä»£æ›¿æŒ‡é’ˆå½¢å‚ï¼Œå¼•ç”¨ç±»å‹åŒæ ·å¯ä»¥è¾¾åˆ°ä¿®æ”¹å€¼çš„å†…å®¹ï¼Œå¹¶ä¸”å¯ä»¥é¿å…æ‹·è´ï¼Œå› ä¸ºå¼•ç”¨æ˜¯ä¸å®å‚ç»‘å®šçš„ã€‚</li>
</ul>
<h2 id="æ•°ç»„çš„ä¼ é€’"><a href="#æ•°ç»„çš„ä¼ é€’" class="headerlink" title="æ•°ç»„çš„ä¼ é€’"></a>æ•°ç»„çš„ä¼ é€’</h2><p>ä»¥ä¸‹ä¸‰ç§å¯¹å½¢å‚çš„å®šä¹‰æ˜¯ç­‰ä»·çš„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">a</span><span class="params">(<span class="type">const</span> <span class="type">int</span>*)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">b</span><span class="params">(<span class="type">const</span> <span class="type">int</span>[])</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">c</span><span class="params">(<span class="type">const</span> <span class="type">int</span>[<span class="number">10</span>])</span></span>;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶åªä¼šæ£€æŸ¥ä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯å¦ä¸ºconst int*å‹ï¼Œç”šè‡³ä¸ä¼šæ£€æŸ¥ä¼ å…¥æ•°ç»„çš„é•¿åº¦æ˜¯å¦è¶…å‡ºå½¢å‚å¤§å°ã€‚</p>
<h3 id="æ•°ç»„çš„å¼•ç”¨å½¢å‚"><a href="#æ•°ç»„çš„å¼•ç”¨å½¢å‚" class="headerlink" title="æ•°ç»„çš„å¼•ç”¨å½¢å‚"></a>æ•°ç»„çš„å¼•ç”¨å½¢å‚</h3><p>å¯ä»¥ä½¿ç”¨æ•°ç»„çš„å¼•ç”¨ä½œä¸ºå½¢å‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(<span class="type">int</span> (&amp;arr)[<span class="number">10</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">auto</span> elem : arr)</span><br><span class="line">      cout&lt;&lt;elem&lt;&lt;endl;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ•°ç»„çš„å¼•ç”¨ä½œä¸ºå½¢å‚éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>åˆå§‹åŒ–æ—¶å¿…é¡»ä½¿ç”¨æ‹¬å·æ‹¬èµ·&amp;arr</li>
<li>è¾“å…¥çš„å®å‚<strong>å¿…é¡»ä¸ºä¸€ä¸ªint [10]ç±»å‹</strong>çš„å¯¹è±¡</li>
</ul>
<h2 id="å‡½æ•°çš„è¿”å›ç±»å‹"><a href="#å‡½æ•°çš„è¿”å›ç±»å‹" class="headerlink" title="å‡½æ•°çš„è¿”å›ç±»å‹"></a>å‡½æ•°çš„è¿”å›ç±»å‹</h2><h3 id="è¿”å›å¼•ç”¨"><a href="#è¿”å›å¼•ç”¨" class="headerlink" title="è¿”å›å¼•ç”¨"></a>è¿”å›å¼•ç”¨</h3><p>å‡½æ•°è¿”å›å¼•ç”¨å¯ä»¥ç†è§£ä¸ºè¿”å›çš„ä¸ºä¸€ä¸ªåœ°å€</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> <span class="title">test1</span><span class="params">(string s ,string::size_type num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> s[num];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">char</span> &amp;<span class="title">test2</span><span class="params">(string &amp;s ,string::size_type num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> s[num];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="function">srting <span class="title">s</span><span class="params">(<span class="string">&quot;test&quot;</span>)</span></span>;</span><br><span class="line">   cout&lt;&lt;<span class="built_in">test1</span>(s,<span class="number">0</span>)&lt;&lt;endl; <span class="comment">//t</span></span><br><span class="line">   <span class="built_in">test2</span>(s,<span class="number">0</span>)=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">   cout&lt;&lt;s[<span class="number">0</span>]&lt;&lt;endl;       <span class="comment">//a</span></span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºå¼•ç”¨æ—¶ï¼Œè¯¥è¿”å›å€¼ä¸ºå·¦å€¼è€Œéå³å€¼ï¼Œå› æ­¤å¯ä»¥åƒä½¿ç”¨å…¶ä»–å·¦å€¼ä¸€æ ·ä½¿ç”¨è¿™ä¸ªè¿”å›å€¼</p>
<p>ï¼ˆæ³¨ï¼šå·¦å€¼â‰ åœ°å€ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªå€¼ï¼‰</p>
<ul>
<li><p><strong>ä¸å¯è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨</strong>ï¼Œç”±äºå±€éƒ¨å˜é‡åœ¨å‡½æ•°å®Œæˆåä¼šè¢«é‡Šæ”¾ï¼Œå› æ­¤åœ¨å‡½æ•°å®Œæˆåå¼•ç”¨ä¼šæ‰¾ä¸åˆ°å®ƒçš„å¯¹è±¡ã€‚ä¾‹å¦‚ä¸Šä¸€ä¸ªä¾‹ç¨‹ï¼Œå¦‚æœæŠŠtest2()å‡½æ•°æ”¹ä¸ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> &amp;<span class="title">test2</span><span class="params">(string s ,string::size_type num)</span><span class="comment">//æ­¤å¤„å½¢å‚ä¸å†æ˜¯å¼•ç”¨</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> s[num];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="function">srting <span class="title">s</span><span class="params">(<span class="string">&quot;test&quot;</span>)</span></span>;</span><br><span class="line">   <span class="built_in">test2</span>(s,<span class="number">0</span>)=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">   cout&lt;&lt;s[<span class="number">0</span>]&lt;&lt;endl;      <span class="comment">//t</span></span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°çš„è¿”å›å€¼ä¸ºå¯¹sçš„å¼•ç”¨ï¼Œä½†sæœ¬èº«ä¸ºä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œåœ¨å‡½æ•°å®Œæˆæ—¶å·²ç»è¢«é‡Šæ”¾ï¼Œå› æ­¤è¯¥å¼•ç”¨æ˜¯æ— æ•ˆçš„ï¼ˆä½†æ˜¯è¿™æ ·<strong>è¿”å›å½¢å‚çš„å¼•ç”¨</strong>ç¼–è¯‘å™¨å¹¶ä¸ä¼šæŠ¥é”™ï¼Œè€Œè¿”å›<strong>å‡½æ•°å†…å®šä¹‰çš„å±€éƒ¨å˜é‡</strong>çš„å¼•ç”¨ä¼šæŠ¥é”™ï¼‰</p>
<p>ä½†å¦‚æœå½¢å‚å®šä¹‰ä¸ºå¼•ç”¨ï¼Œç”±äºå¼•ç”¨æœ¬èº«æ˜¯ä¸å ç”¨å­˜å‚¨ç©ºé—´çš„ï¼Œæ‰€ä»¥â€™aâ€™å¯ä»¥é€šè¿‡å¼•ç”¨ç›´æ¥å‘s[0]èµ‹å€¼</p>
</li>
</ul>
<h3 id="è¿”å›æ•°ç»„æŒ‡é’ˆ"><a href="#è¿”å›æ•°ç»„æŒ‡é’ˆ" class="headerlink" title="è¿”å›æ•°ç»„æŒ‡é’ˆ"></a>è¿”å›æ•°ç»„æŒ‡é’ˆ</h3><ul>
<li><p>å°¾ç½®è¿”å›ç±»å‹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">func</span><span class="params">(<span class="type">int</span> i)</span> -&gt; <span class="title">int</span><span class="params">(*)</span>[10]</span></span><br></pre></td></tr></table></figure>
<p>å£°æ˜å‡½æ•°çš„è¿”å›å€¼ä¸ºä¸€ä¸ªå«æœ‰åä¸ªæ•´æ•°çš„æ•°ç»„çš„æŒ‡é’ˆ</p>
</li>
<li><p>ä½¿ç”¨decltype</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> test[<span class="number">5</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">decltype</span>(test) *<span class="built_in">func</span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;test;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	cout&lt;&lt;*(*func+<span class="number">1</span>); <span class="comment">//è¾“å‡º2</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>decltype(test)çš„ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› æ­¤å‡½æ•°å‰è¦ç”¨*å£°æ˜è¿”å›å€¼ä¸ºæŒ‡é’ˆ</li>
<li>ä½¿ç”¨æ­¤æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„çš„æ•´ä½“åœ°å€ï¼Œè€Œä¸æ˜¯é¦–åœ°å€ï¼Œç±»å‹ä¸ºint*[5]ï¼Œå› æ­¤ä¸€æ¬¡è§£å¼•ç”¨çš„ç»“æœæ‰æ˜¯é¦–åœ°å€</li>
</ul>
</li>
</ul>
<h2 id="å†…è”å‡½æ•°"><a href="#å†…è”å‡½æ•°" class="headerlink" title="å†…è”å‡½æ•°"></a>å†…è”å‡½æ•°</h2><p>æ­£å¸¸çš„è°ƒç”¨å‡½æ•°ä¸€èˆ¬æ¯”ç­‰ä»·çš„è¡¨è¾¾å¼è¦æ…¢ï¼ˆä¿å­˜å¯„å­˜å™¨ã€æ‹·è´ç­‰æ“ä½œï¼‰ï¼Œå› æ­¤å¯¹äºè§„æ¨¡è¾ƒå°çš„å‡½æ•°å¯ä»¥å®šä¹‰ä¸ºå†…è”å‡½æ•°ç±»å‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">fuc</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="constexprå‡½æ•°"><a href="#constexprå‡½æ•°" class="headerlink" title="constexprå‡½æ•°"></a>constexprå‡½æ•°</h2><p>å°†å‡½æ•°éšå¼åœ°å®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œä½†å‡½æ•°å†…åªèƒ½æœ‰ä¸€æ¡returnè¯­å¥ï¼Œä¸”è¿”å›å€¼å¿…é¡»ä¸ºå­—é¢å€¼</p>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C++_è¡¨è¾¾å¼</title>
    <url>/2022/10/03/C++-4/</url>
    <content><![CDATA[<h1 id="1ã€åŸºç¡€å†…å®¹"><a href="#1ã€åŸºç¡€å†…å®¹" class="headerlink" title="1ã€åŸºç¡€å†…å®¹"></a>1ã€åŸºç¡€å†…å®¹</h1><p>è¡¨è¾¾å¼æ˜¯<strong>ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç®—å¯¹è±¡ç»„æˆ</strong>ï¼Œå¯¹è¡¨è¾¾å¼æ±‚å€¼å¾—åˆ°çš„æ˜¯ä¸€ä¸ª<strong>ç»“æœ</strong>ï¼Œå­—é¢å€¼å’Œå˜é‡æ—¶æœ€ç®€å•çš„è¡¨è¾¾å¼ã€‚</p>
<h2 id="å·¦å€¼å’Œå³å€¼"><a href="#å·¦å€¼å’Œå³å€¼" class="headerlink" title="å·¦å€¼å’Œå³å€¼"></a>å·¦å€¼å’Œå³å€¼</h2><p>å½“ä¸€ä¸ªå¯¹è±¡è¢«ç”¨ä½œå³å€¼æ—¶ï¼Œä½¿ç”¨çš„æ˜¯è¯¥å¯¹è±¡çš„å€¼ï¼›è€Œè¢«ç”¨ä½œå·¦å€¼æ—¶ï¼Œä½¿ç”¨çš„æ—¶å¯¹è±¡çš„å†…å­˜ã€‚</p>
<ul>
<li>èµ‹å€¼è¿ç®—ç¬¦éœ€è¦ä¸€ä¸ªéå¸¸é‡å·¦å€¼ä¸ºå…¶å·¦ä¾§è¿ç®—å¯¹è±¡</li>
<li>å–åœ°å€ç¬¦ä½œç”¨äºä¸€ä¸ªå·¦å€¼è¿ç®—å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥è¿ç®—å¯¹è±¡çš„æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆä¸ºå³å€¼</li>
<li>è§£å¼•ç”¨æ±‚å€¼ç»“æœä¸ºå·¦å€¼</li>
</ul>
<h2 id="æ±‚å€¼é¡ºåº"><a href="#æ±‚å€¼é¡ºåº" class="headerlink" title="æ±‚å€¼é¡ºåº"></a>æ±‚å€¼é¡ºåº</h2><p>éƒ¨åˆ†è¿ç®—ç¬¦æ˜¯æ²¡æœ‰æ˜ç¡®æŒ‡æ˜æ‰§è¡Œé¡ºåºçš„ï¼Œä¾‹å¦‚&lt;&lt;è¿ç®—ç¬¦ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cout&lt;&lt;i&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;++i;</span><br></pre></td></tr></table></figure>
<p>++iå’Œiæ²¡æœ‰æ˜ç¡®çš„å…ˆåå…³ç³»ï¼Œå› æ­¤ç¼–è¯‘å™¨å¯èƒ½åšå‡ºä»»ä½•è¡Œä¸ºã€‚</p>
<p>å½“å¤šä¸ªå‡½æ•°ä¼šå½±å“åŒä¸€å¯¹è±¡æ—¶ï¼Œå½“åŒæ—¶è°ƒç”¨è¿™äº›å‡½æ•°æ—¶ï¼Œè°ƒç”¨å‡½æ•°çš„é¡ºåºä¹Ÿæ²¡æœ‰æ˜ç¡®çš„å…ˆåå…³ç³»ã€‚</p>
<h1 id="2ã€ç®—æœ¯è¿ç®—ç¬¦"><a href="#2ã€ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="2ã€ç®—æœ¯è¿ç®—ç¬¦"></a>2ã€ç®—æœ¯è¿ç®—ç¬¦</h1><h2 id="boolç±»å‹"><a href="#boolç±»å‹" class="headerlink" title="boolç±»å‹"></a>boolç±»å‹</h2><p>boolç±»å‹åŸåˆ™ä¸åº”å‚ä¸è¿ç®—ï¼Œåœ¨è¿ç®—æ—¶ä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºintå‹çš„1ï¼Œåªè¦è®¡ç®—ç»“æœä¸ä¸º0ï¼Œéƒ½å°†è¿”å›ture</p>
<h2 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h2><p>C++å¤§éƒ¨åˆ†åŒä¼˜å…ˆçº§è¿ç®—éƒ½æ»¡è¶³ä»å·¦è‡³å³çš„è§„å¾‹ï¼Œèµ‹å€¼åˆ™ç›¸å</p>
<h2 id="é€’å¢è¿ç®—"><a href="#é€’å¢è¿ç®—" class="headerlink" title="é€’å¢è¿ç®—"></a>é€’å¢è¿ç®—</h2><p>C++ä¸­ï¼Œ<strong>éå¿…è¦ä¸ä½¿ç”¨</strong>åç½®é€’å¢/å‡ç¬¦ï¼ˆi++/iâ€”)ï¼Œå› ä¸ºå‰ç½®è¿ç®—ä¸ºå°†å¯¹è±¡æœ¬èº«ä½œä¸ºå·¦å€¼è¿”å›ï¼Œè€Œåç½®åˆ™è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨åŸå§‹å€¼ï¼Œå¹¶å°†è¿™ä¸ªé¢å¤–å­˜å‚¨çš„åŸå§‹å€¼å‰¯æœ¬ä½œä¸ºå³å€¼è¿”å›ï¼Œå› æ­¤ï¼Œä½¿ç”¨åç½®æ“ä½œä¼šæ¶ˆè€—æ›´å¤šå†…å­˜ï¼Œè¿™åœ¨ç›¸å¯¹å¤æ‚çš„å·¥ä½œä¸­æ˜¯æ¶ˆè€—å·¨å¤§çš„ã€‚</p>
<h2 id="ä½æ“ä½œ"><a href="#ä½æ“ä½œ" class="headerlink" title="ä½æ“ä½œ"></a>ä½æ“ä½œ</h2><p>å…³äºç¬¦å·ä½çš„å¤„ç†æ²¡æœ‰æ˜ç¡®è§„å®šï¼Œå› æ­¤ä½è¿ç®—æœ€å¥½ç”¨æ¥å¤„ç†æ— ç¬¦å·ç±»å‹</p>
<h1 id="3ã€ç±»å‹è½¬æ¢"><a href="#3ã€ç±»å‹è½¬æ¢" class="headerlink" title="3ã€ç±»å‹è½¬æ¢"></a>3ã€ç±»å‹è½¬æ¢</h1><p>C++çš„ç±»å‹è½¬æ¢æ ¼å¼ä¸åŒäºCï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cast-name&lt;ç±»å‹&gt;(è¡¨è¾¾å¼)</span><br></pre></td></tr></table></figure>
<p>æœ€å¸¸ç”¨çš„cast-nameä¸º<code>static_cast</code>å’Œ<code>const_cast</code></p>
<h3 id="static-cast"><a href="#static-cast" class="headerlink" title="static_cast"></a>static_cast</h3><p>ä»»ä½•æœ‰æ˜ç¡®å®šä¹‰çš„ç±»å‹è½¬æ¢ï¼ˆé™¤äº†åº•å±‚constï¼‰éƒ½å¯ä»¥ä½¿ç”¨static_cast</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> *p = &amp;d;<span class="comment">//dä¸èƒ½ä¸ºå¸¸é‡ï¼ˆåº•å±‚constï¼‰</span></span><br><span class="line"><span class="type">double</span> *dp = <span class="built_in">static_cast</span>&lt;<span class="type">double</span>*&gt;(p);</span><br></pre></td></tr></table></figure>
<h3 id="const-cast"><a href="#const-cast" class="headerlink" title="const_cast"></a>const_cast</h3><p><strong>ä¸“ç”¨</strong>äºæ”¹å˜åº•å±‚constï¼Œå…¶ä½œç”¨ä¸ºæ”¹å˜constæ€§è´¨</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span>* pc;</span><br><span class="line"><span class="type">char</span> *p=<span class="built_in">const_cast</span>&lt;<span class="type">char</span>*&gt;(pc);</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ç”¨æ³•ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span>* pc;</span><br><span class="line"><span class="type">char</span> *p=<span class="built_in">const_cast</span>&lt;<span class="type">const</span> <span class="type">char</span>*&gt;(pc);</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>python_2</title>
    <url>/2022/09/16/python-2/</url>
    <content><![CDATA[<h1 id="ä¸€äº›åŸºç¡€è¯­æ³•"><a href="#ä¸€äº›åŸºç¡€è¯­æ³•" class="headerlink" title="ä¸€äº›åŸºç¡€è¯­æ³•"></a>ä¸€äº›åŸºç¡€è¯­æ³•</h1><h2 id="1ã€æ¡ä»¶æ§åˆ¶"><a href="#1ã€æ¡ä»¶æ§åˆ¶" class="headerlink" title="1ã€æ¡ä»¶æ§åˆ¶"></a>1ã€æ¡ä»¶æ§åˆ¶</h2><p>ä¸€èˆ¬å½¢å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> condition_1:</span><br><span class="line">    statement_block_1</span><br><span class="line"><span class="keyword">elif</span> condition_2:</span><br><span class="line">    statement_block_2</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    statement_block_3</span><br></pre></td></tr></table></figure>
<ul>
<li>è®°å¾—åœ¨æ¡ä»¶ååŠ <code>:</code></li>
<li>Python ä¸­ç”¨ <strong>elif</strong> ä»£æ›¿äº† <strong>else if</strong>ï¼Œæ‰€ä»¥ifè¯­å¥çš„å…³é”®å­—ä¸ºï¼š<strong>if â€“ elif â€“ else</strong></li>
<li>pythonä¸­æ²¡æœ‰switchè¯­å¥ï¼Œpython3.10åæ›´æ–°äº†ç±»ä¼¼è¯­æ³•ï¼Œç”±äºæˆ‘æ˜¯3.9ï¼Œå°±ä¸å†™åœ¨è¿™é‡Œäº†</li>
</ul>
<h2 id="2ã€å¾ªç¯è¯­å¥"><a href="#2ã€å¾ªç¯è¯­å¥" class="headerlink" title="2ã€å¾ªç¯è¯­å¥"></a>2ã€å¾ªç¯è¯­å¥</h2><h3 id="whileè¯­å¥"><a href="#whileè¯­å¥" class="headerlink" title="whileè¯­å¥"></a>whileè¯­å¥</h3><p>å¯ä»¥ä¸elseé…åˆä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> &lt;expr&gt;: <span class="comment">#è®°å¾—å†’å·</span></span><br><span class="line">    &lt;statement(s)&gt;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    &lt;additional_statement(s)&gt;</span><br></pre></td></tr></table></figure>
<p>whileä¸­çš„breakå’Œcontinueç”¨æ³•åŒC</p>
<h3 id="forè¯­å¥"><a href="#forè¯­å¥" class="headerlink" title="forè¯­å¥"></a>forè¯­å¥</h3><p>ä¸€èˆ¬æ ¼å¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;dhk&#x27;</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> a: </span><br><span class="line">	<span class="built_in">print</span>(x,end=<span class="string">&#x27;&#x27;</span>) <span class="comment">#dhk</span></span><br><span class="line"><span class="keyword">else</span>:	<span class="comment">#elseç”¨äºåœ¨å¾ªç¯ç»“æŸåæ‰§è¡Œçš„å†…å®¹</span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;error!!&quot;</span>)</span><br><span class="line">  </span><br><span class="line">sites = [<span class="string">&quot;Baidu&quot;</span>, <span class="string">&quot;Google&quot;</span>,<span class="string">&quot;Runoob&quot;</span>,<span class="string">&quot;Taobao&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> site <span class="keyword">in</span> sites:</span><br><span class="line">    <span class="built_in">print</span>(site)</span><br><span class="line">  </span><br><span class="line">questions = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;lancelot&#x27;</span>, <span class="string">&#x27;quest&#x27;</span>:<span class="string">&#x27;the holy grail&#x27;</span>, <span class="string">&#x27;favorite color&#x27;</span>:<span class="string">&#x27;blue&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> q,b <span class="keyword">in</span> questions.items(): <span class="comment">#å­—å…¸ä¼šç¨å¾®å¤æ‚ä¸€ç‚¹</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;q&#125;</span>  <span class="subst">&#123;b&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸åŒäºCï¼Œpythonçš„forè¯­å¥<strong>å¸¸ç”¨æ¥éå†æŸä¸ªå¯è¿­ä»£å¯¹è±¡</strong>ï¼Œå¦‚åˆ—è¡¨ã€å­—ç¬¦ä¸²ï¼Œå¦‚ä¸Šçš„å¾ªç¯ä¸­ï¼Œxæ¯æ¬¡åªå–éå†å¯¹è±¡çš„<strong>æœ€åŸºæœ¬å•ä½å¹¶è‡ªåŠ¨é€’å¢</strong>ã€‚</p>
<h3 id="rangeå‡½æ•°"><a href="#rangeå‡½æ•°" class="headerlink" title="rangeå‡½æ•°"></a>rangeå‡½æ•°</h3><p>ç”Ÿæˆä¸€ä¸ªæ•°å­—åºåˆ—ï¼Œæ ¼å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>):</span><br><span class="line">   <span class="built_in">print</span>(x,end=<span class="string">&#x27;&#x27;</span>)<span class="comment">#13579</span></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;a = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Baidu&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>, <span class="string">&#x27;QQ&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i, a[i])</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span> Google</span><br><span class="line"><span class="number">1</span> Baidu</span><br><span class="line"><span class="number">2</span> Runoob</span><br><span class="line"><span class="number">3</span> Taobao</span><br><span class="line"><span class="number">4</span> QQ</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>rangeå‡½æ•°çš„æŒ‡å®šåŒºé—´åŒæ ·<strong>éµå¾ªå·¦é—­å³å¼€</strong>çš„åŸåˆ™</p>
<h3 id="passè¯­å¥"><a href="#passè¯­å¥" class="headerlink" title="passè¯­å¥"></a>passè¯­å¥</h3><p>ç©ºè¯­å¥ï¼Œè¡¨ç¤ºç©º</p>
<h2 id="3ã€è¿­ä»£å™¨"><a href="#3ã€è¿­ä»£å™¨" class="headerlink" title="3ã€è¿­ä»£å™¨"></a>3ã€è¿­ä»£å™¨</h2><p>è¿­ä»£æ˜¯Pythonæœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œæ˜¯<strong>è®¿é—®é›†åˆå…ƒç´ çš„ä¸€ç§æ–¹å¼</strong>ã€‚</p>
<p>å¤§æ¦‚ä½œç”¨å’ŒCçš„æŒ‡é’ˆæœ‰ç‚¹åƒï¼Ÿ</p>
<p>è¿­ä»£å™¨æ˜¯ä¸€ä¸ª<strong>å¯ä»¥è®°ä½éå†çš„ä½ç½®</strong>çš„å¯¹è±¡ã€‚</p>
<p>è¿­ä»£å™¨å¯¹è±¡ä»é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¿é—®ï¼Œç›´åˆ°æ‰€æœ‰çš„å…ƒç´ è¢«è®¿é—®å®Œç»“æŸã€‚è¿­ä»£å™¨åªèƒ½å¾€å‰ä¸ä¼šåé€€ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">    <span class="built_in">list</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">    it = <span class="built_in">iter</span>(<span class="built_in">list</span>)  <span class="comment"># åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line">    it2 = <span class="built_in">iter</span>(<span class="built_in">list</span>)  <span class="comment"># åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> it:</span><br><span class="line">        <span class="keyword">if</span> x != <span class="number">4</span>:</span><br><span class="line">            <span class="built_in">print</span>(x, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(x)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">next</span>(it2))</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">next</span>(it2))</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">next</span>(it2))</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">next</span>(it2))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1 2 3 4</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">4</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="æŠŠä¸€ä¸ªç±»ä½œä¸ºè¿­ä»£å™¨ä½¿ç”¨ï¼š"><a href="#æŠŠä¸€ä¸ªç±»ä½œä¸ºè¿­ä»£å™¨ä½¿ç”¨ï¼š" class="headerlink" title="æŠŠä¸€ä¸ªç±»ä½œä¸ºè¿­ä»£å™¨ä½¿ç”¨ï¼š"></a>æŠŠä¸€ä¸ªç±»ä½œä¸ºè¿­ä»£å™¨ä½¿ç”¨ï¼š</h3><p>è‹¥æƒ³æŠŠä¸€ä¸ªç±»ä½œä¸ºè¿­ä»£å™¨ä½¿ç”¨ï¼Œéœ€è¦åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><p><code>__iter__()</code>:è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„è¿­ä»£å™¨å¯¹è±¡ï¼Œ è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡å®ç°äº† <strong>next</strong>() æ–¹æ³•å¹¶é€šè¿‡ StopIteration å¼‚å¸¸æ ‡è¯†è¿­ä»£çš„å®Œæˆã€‚</p>
</li>
<li><p><code>__next__()</code>:è¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">   <span class="keyword">class</span> <span class="title class_">MyNumbers</span>:</span><br><span class="line">       <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">           self.a = <span class="number">1</span></span><br><span class="line">           <span class="keyword">return</span> self</span><br><span class="line">  </span><br><span class="line">       <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">           <span class="keyword">if</span> self.a &lt;= <span class="number">20</span>:</span><br><span class="line">               x = self.a</span><br><span class="line">               self.a += <span class="number">1</span></span><br><span class="line">               <span class="keyword">return</span> x</span><br><span class="line">           <span class="keyword">else</span>:</span><br><span class="line">               <span class="keyword">raise</span> StopIteration <span class="comment">#æŒ‚èµ·StopIterationæ ‡å¿—è¿­ä»£å®Œæˆï¼Œä¸èƒ½ç”¨return</span></span><br><span class="line">   a = MyNumbers()</span><br><span class="line">   i = <span class="built_in">iter</span>(a)</span><br><span class="line">   <span class="keyword">for</span> x <span class="keyword">in</span> i:</span><br><span class="line">       <span class="built_in">print</span>(x, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="comment">#1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 </span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4ã€ç”Ÿæˆå™¨"><a href="#4ã€ç”Ÿæˆå™¨" class="headerlink" title="4ã€ç”Ÿæˆå™¨"></a>4ã€ç”Ÿæˆå™¨</h2><p> åœ¨ Python ä¸­ï¼Œä½¿ç”¨äº† yield çš„å‡½æ•°è¢«ç§°ä¸ºç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰ã€‚</p>
<p>åœ¨è°ƒç”¨ç”Ÿæˆå™¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œ<strong>æ¯æ¬¡é‡åˆ° yield æ—¶å‡½æ•°ä¼šæš‚åœå¹¶ä¿å­˜å½“å‰æ‰€æœ‰çš„è¿è¡Œä¿¡æ¯ï¼Œè¿”å› yield çš„å€¼</strong>, å¹¶åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œ next() æ–¹æ³•æ—¶ä»å½“å‰ä½ç½®ç»§ç»­è¿è¡Œã€‚</p>
<ul>
<li>ç”Ÿæˆå™¨å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª<strong>è¿­ä»£å™¨å¯¹è±¡</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fibonacci</span>(<span class="params">n</span>): <span class="comment"># ç”Ÿæˆå™¨å‡½æ•° - æ–æ³¢é‚£å¥‘</span></span><br><span class="line">    a, b, counter = <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> (counter &gt; n): </span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">f = fibonacci(<span class="number">10</span>) <span class="comment"># f æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”±ç”Ÿæˆå™¨è¿”å›ç”Ÿæˆ</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span> (<span class="built_in">next</span>(f), end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        sys.exit()</span><br></pre></td></tr></table></figure>
<h2 id="5ã€å‡½æ•°"><a href="#5ã€å‡½æ•°" class="headerlink" title="5ã€å‡½æ•°"></a>5ã€å‡½æ•°</h2><p>è§„åˆ™ï¼š</p>
<ul>
<li>å‡½æ•°ä»£ç å—ä»¥ <strong>def</strong> å…³é”®è¯å¼€å¤´ï¼Œåæ¥å‡½æ•°æ ‡è¯†ç¬¦åç§°å’Œåœ†æ‹¬å· <strong>()</strong>ã€‚</li>
<li>å‡½æ•°å†…å®¹ä»¥å†’å· <strong>:</strong> èµ·å§‹ï¼Œå¹¶ä¸”ç¼©è¿›ã€‚<strong>ï¼ˆè®°å¾—å†’å·ï¼ï¼ï¼‰</strong></li>
<li>ä¸Cä¸åŒï¼Œpyçš„å‡½æ•°ä¸éœ€è¦ç¡®å®šè¿”å›å€¼ç±»å‹ï¼Œç›´æ¥returnå°±å¯ä»¥</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def å‡½æ•°åï¼ˆå‚æ•°åˆ—è¡¨ï¼‰:</span><br><span class="line">    å‡½æ•°ä½“</span><br></pre></td></tr></table></figure>
<h3 id="å…³é”®å­—å‚æ•°"><a href="#å…³é”®å­—å‚æ•°" class="headerlink" title="å…³é”®å­—å‚æ•°"></a>å…³é”®å­—å‚æ•°</h3><p>åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚å¯ä»¥æ˜¯key=valueçš„å½¢å¼ï¼Œç§°ä¸ºå…³é”®å­—å‚æ•°ã€‚</p>
<p>å‡¡æ˜¯æŒ‰ç…§è¿™ç§å½¢å¼å®šä¹‰çš„å®å‚ï¼Œå¯ä»¥ä¸æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºå®šä¹‰ï¼Œä½†ä»èƒ½ä¸ºæŒ‡å®šçš„å½¢å‚èµ‹å€¼ã€‚</p>
<ul>
<li><p><strong>å…³é”®å­—å‚æ•°åœ¨ä½ç½®å‚æ•°åé¢</strong>ï¼Œå› ä¸ºpythonå‡½æ•°åœ¨è§£æå‚æ•°æ—¶ï¼Œæ˜¯æŒ‰ç…§é¡ºåºæ¥çš„ï¼Œ<strong>ä½ç½®å‚æ•°</strong>æ˜¯å¿…é¡»å…ˆæ»¡è¶³ï¼Œæ‰è€ƒè™‘å…¶ä»–å¯å˜å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">printinfo</span>(<span class="params">age, name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;åå­—: &quot;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¹´é¾„: &quot;</span>, age)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  </span><br><span class="line">printinfo(<span class="number">50</span>, name=<span class="string">&quot;runoob&quot;</span>) <span class="comment">#ageä¸ºä½ç½®å‚æ•°ï¼Œnameä¸ºå…³é”®å­—å‚æ•°</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li><strong>ä½ç½®å‚æ•°çš„è¾“å…¥å¿…é¡»å’Œå®šä¹‰æ—¶çš„ä½ç½®ç›¸åŒ</strong></li>
<li><strong>å…³é”®å­—å‚æ•°çš„è¾“å…¥å¿…é¡»åœ¨ä½ç½®å‚æ•°ä¹‹å</strong></li>
</ul>
</li>
</ul>
<h3 id="å½“å‚æ•°ä¸å®šé•¿æ—¶"><a href="#å½“å‚æ•°ä¸å®šé•¿æ—¶" class="headerlink" title="å½“å‚æ•°ä¸å®šé•¿æ—¶"></a>å½“å‚æ•°ä¸å®šé•¿æ—¶</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">printinfo</span>(<span class="params"> arg1, *vartuple </span>):</span><br></pre></td></tr></table></figure>
<p>åŠ äº†æ˜Ÿå· <strong>*</strong> çš„å‚æ•°ä¼šä»¥å…ƒç»„(tuple)çš„å½¢å¼å¯¼å…¥ï¼Œå­˜æ”¾æ‰€æœ‰æœªå‘½åçš„å˜é‡å‚æ•°</p>
<p>å½“å‚æ•°æ·»åŠ åŒæ˜Ÿå·<strong>**</strong>æ—¶ï¼Œä¼ å…¥çš„å‚æ•°å°†ä»¥å­—å…¸çš„å½¢å¼ä¿å­˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">**dic</span>)</span><br><span class="line">	<span class="built_in">print</span>(dic)</span><br><span class="line">func(**&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>&#125;)</span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">func(a=<span class="number">1</span>,b=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h3><p>Python ä½¿ç”¨ <strong>lambda</strong> æ¥åˆ›å»ºåŒ¿åå‡½æ•°</p>
<ul>
<li>lambda çš„ä¸»ä½“æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä»£ç å—ã€‚ä»…ä»…èƒ½åœ¨ lambda è¡¨è¾¾å¼ä¸­å°è£…æœ‰é™çš„é€»è¾‘è¿›å»ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯å†™å‡½æ•°è¯´æ˜</span></span><br><span class="line"><span class="built_in">sum</span> = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</span><br><span class="line"> </span><br><span class="line"><span class="comment"># è°ƒç”¨sumå‡½æ•°</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;ç›¸åŠ åçš„å€¼ä¸º : &quot;</span>, <span class="built_in">sum</span>( <span class="number">10</span>, <span class="number">20</span> ))</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;ç›¸åŠ åçš„å€¼ä¸º : &quot;</span>, <span class="built_in">sum</span>( <span class="number">20</span>, <span class="number">20</span> ))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">30</span></span><br><span class="line"><span class="string">40</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="å¼ºåˆ¶ä½ç½®å‚æ•°ï¼†å‘½åå…³é”®å­—å‚æ•°"><a href="#å¼ºåˆ¶ä½ç½®å‚æ•°ï¼†å‘½åå…³é”®å­—å‚æ•°" class="headerlink" title="å¼ºåˆ¶ä½ç½®å‚æ•°ï¼†å‘½åå…³é”®å­—å‚æ•°"></a>å¼ºåˆ¶ä½ç½®å‚æ•°ï¼†å‘½åå…³é”®å­—å‚æ•°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># a, b, cæˆä¸ºé™å®šä½ç½®å½¢å‚</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a, b, c, /, d</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¿™æ—¶å‚æ•°kw1, kw2å¿…é¡»ä¼ å…¥å…³é”®å­—å‚æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">å…¶ä»–å½¢å‚, *, kw1, kw2</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h2 id="6ã€ç±»"><a href="#6ã€ç±»" class="headerlink" title="6ã€ç±»"></a>6ã€ç±»</h2><p>Pythonä¸­çš„ç±»æä¾›äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ‰€æœ‰åŸºæœ¬åŠŸèƒ½ï¼šç±»çš„ç»§æ‰¿æœºåˆ¶å…è®¸å¤šä¸ªåŸºç±»ï¼Œæ´¾ç”Ÿç±»å¯ä»¥è¦†ç›–åŸºç±»ä¸­çš„ä»»ä½•æ–¹æ³•ï¼Œæ–¹æ³•ä¸­å¯ä»¥è°ƒç”¨åŸºç±»ä¸­çš„åŒåæ–¹æ³•ã€‚</p>
<p>å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    i = <span class="number">12345</span></span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):<span class="comment">#ç±»ä¸­çš„å‡½æ•°ç§°ä½œç±»çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ç±»çš„åˆå§‹åŒ–ï¼ˆæ„é€ æ–¹æ³•ï¼‰ï¼Œ<strong>è¿™é‡Œæ³¨æ„ç±»çš„æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Complex</span>:</span><br><span class="line">    name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n, a</span>): <span class="comment">#ç±»çš„æ–¹æ³•å¿…é¡»åŒ…å«selfï¼Œä¸”å…¶å¿…é¡»ä¸ºç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">        self.name = n</span><br><span class="line">        self.age = a</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = MyClass()</span><br></pre></td></tr></table></figure>
<p>è®¿é—®ç±»çš„å±æ€§ã€æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MyClass ç±»çš„å±æ€§ i ä¸ºï¼š&quot;</span>, x.i)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MyClass ç±»çš„æ–¹æ³• f è¾“å‡ºä¸ºï¼š&quot;</span>, x.f())</span><br></pre></td></tr></table></figure>
<h4 id="ç±»çš„ç»§æ‰¿ï¼š"><a href="#ç±»çš„ç»§æ‰¿ï¼š" class="headerlink" title="ç±»çš„ç»§æ‰¿ï¼š"></a>ç±»çš„ç»§æ‰¿ï¼š</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç±»å®šä¹‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">people</span>:</span><br><span class="line">    <span class="comment">#å®šä¹‰åŸºæœ¬å±æ€§</span></span><br><span class="line">    name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="comment">#å®šä¹‰ç§æœ‰å±æ€§,ç§æœ‰å±æ€§åœ¨ç±»å¤–éƒ¨æ— æ³•ç›´æ¥è¿›è¡Œè®¿é—®</span></span><br><span class="line">    __weight = <span class="number">0</span>	</span><br><span class="line">    <span class="comment">#å®šä¹‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w</span>):</span><br><span class="line">        self.name = n</span><br><span class="line">        self.age = a</span><br><span class="line">        self.__weight = w</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s è¯´: æˆ‘ %d å²ã€‚&quot;</span> %(self.name,self.age))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#å•ç»§æ‰¿ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">student</span>(<span class="title class_ inherited__">people</span>):</span><br><span class="line">    grade = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w,g</span>):</span><br><span class="line">        <span class="comment">#è°ƒç”¨çˆ¶ç±»çš„æ„å‡½</span></span><br><span class="line">        people.__init__(self,n,a,w)</span><br><span class="line">        self.grade = g</span><br><span class="line">    <span class="comment">#é‡å†™çˆ¶ç±»çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s è¯´: æˆ‘ %d å²äº†ï¼Œæˆ‘åœ¨è¯» %d å¹´çº§&quot;</span>%(self.name,self.age,self.grade))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">s = student(<span class="string">&#x27;ken&#x27;</span>,<span class="number">10</span>,<span class="number">60</span>,<span class="number">3</span>)</span><br><span class="line">s.speak()</span><br></pre></td></tr></table></figure>
<ul>
<li>å­ç±»ä¸­è‹¥å‡ºç°äº†çˆ¶ç±»åŒåçš„æ–¹æ³•ï¼Œåˆ™åœ¨è°ƒç”¨è¯¥å­ç±»æ–¹æ³•æ—¶ä½¿ç”¨çš„å†…å®¹ä¹Ÿæ˜¯å­ç±»ä¸­å®šä¹‰çš„å†…å®¹</li>
</ul>
<p>ç§æœ‰å±æ€§ä¸æ–¹æ³•ï¼š</p>
<p>åœ¨<strong>æ–¹æ³•</strong>æˆ–å±æ€§çš„å¼€å¤´åŠ ä¸¤ä¸ªä¸‹åˆ’çº¿ï¼Œ<strong>å£°æ˜</strong>ï¼ˆä¸åŒ…å«åœ¨å˜é‡åä¸­ï¼‰è¯¥å±æ€§ä¸ºç§æœ‰ï¼Œä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è¢«ä½¿ç”¨æˆ–ç›´æ¥è®¿é—®</p>
<h1 id="æ–‡ä»¶é—´çš„å¼•ç”¨"><a href="#æ–‡ä»¶é—´çš„å¼•ç”¨" class="headerlink" title="æ–‡ä»¶é—´çš„å¼•ç”¨"></a>æ–‡ä»¶é—´çš„å¼•ç”¨</h1><h2 id="1ã€importè¯­å¥"><a href="#1ã€importè¯­å¥" class="headerlink" title="1ã€importè¯­å¥"></a>1ã€importè¯­å¥</h2><p>æƒ³ä½¿ç”¨ä¸€ä¸ª Python æºæ–‡ä»¶ï¼Œåªéœ€åœ¨å¦ä¸€ä¸ªæºæ–‡ä»¶é‡Œæ‰§è¡Œ import è¯­å¥å¯¼å…¥è¯¥æ¨¡å—ï¼ˆå°±æ˜¯åç¼€ä¸º.pyçš„æ–‡ä»¶ï¼‰</p>
<ul>
<li>ä¸€ä¸ªæ¨¡å—åªä¼šè¢«å¯¼å…¥ä¸€æ¬¡ï¼Œä¸ç®¡ä½ æ‰§è¡Œäº†å¤šå°‘æ¬¡ <strong>import</strong>ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å¯¼å…¥æ¨¡å—è¢«ä¸€éåˆä¸€éåœ°æ‰§è¡Œã€‚</li>
</ul>
<h2 id="2ã€from-importè¯­å¥"><a href="#2ã€from-importè¯­å¥" class="headerlink" title="2ã€from..importè¯­å¥"></a>2ã€from..importè¯­å¥</h2><p>ä»æ¨¡å—ä¸­å¯¼å…¥æŒ‡å®šçš„éƒ¨åˆ†ï¼Œä¾‹å¦‚:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> test_file <span class="keyword">import</span> test_fuction1,test_fuction2</span><br><span class="line"><span class="comment">#ä»test_file.pyä¸­å¯¼å…¥ä¸¤ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="comment">#å°†æŸä¸ªæ¨¡å—ä¸­çš„å…¨éƒ¨å‡½æ•°å¯¼å…¥ï¼Œæ ¼å¼ä¸ºfrom somemodule import *</span></span><br></pre></td></tr></table></figure>
<h2 id="3ã€ä½¿ç”¨æ¨¡å—ä¸­çš„å˜é‡ã€å‡½æ•°"><a href="#3ã€ä½¿ç”¨æ¨¡å—ä¸­çš„å˜é‡ã€å‡½æ•°" class="headerlink" title="3ã€ä½¿ç”¨æ¨¡å—ä¸­çš„å˜é‡ã€å‡½æ•°"></a>3ã€ä½¿ç”¨æ¨¡å—ä¸­çš„å˜é‡ã€å‡½æ•°</h2><p>é€šè¿‡modname.itemname è¿™æ ·çš„è¡¨ç¤ºæ³•æ¥è®¿é—®æ¨¡å—å†…çš„å‡½æ•°</p>
<h2 id="4ã€-name-å±æ€§"><a href="#4ã€-name-å±æ€§" class="headerlink" title="4ã€_name__å±æ€§"></a>4ã€_name__å±æ€§</h2><p>ä¸€ä¸ªæ¨¡å—è¢«å¦ä¸€ä¸ªç¨‹åºç¬¬ä¸€æ¬¡å¼•å…¥æ—¶ï¼Œå…¶ä¸»ç¨‹åºå°†è¿è¡Œã€‚æ¯ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ä¸ª<strong>name</strong>å±æ€§ï¼Œå½“å…¶å€¼æ˜¯â€™<strong>main</strong>â€˜æ—¶ï¼Œè¡¨æ˜è¯¥æ¨¡å—è‡ªèº«åœ¨è¿è¡Œï¼Œå¦åˆ™æ˜¯è¢«å¼•å…¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;ç¨‹åºè‡ªèº«åœ¨è¿è¡Œ&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;å…¶ä»–ç¨‹åºåœ¨è¿è¡Œ&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡nameå±æ€§ä½¿æŸä¸ªæ–‡ä»¶<strong>ä»…åœ¨è‡ªèº«è¿è¡Œè€Œéè¢«å¼•ç”¨æ—¶</strong>è¿è¡ŒæŸäº›å‡½æ•°</p>
<h2 id="5ã€åŒ…"><a href="#5ã€åŒ…" class="headerlink" title="5ã€åŒ…"></a>5ã€åŒ…</h2><p>åŒ…æ˜¯ä¸€ç§ç®¡ç† Python æ¨¡å—å‘½åç©ºé—´çš„å½¢å¼ï¼Œé‡‡ç”¨â€ç‚¹æ¨¡å—åç§°â€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sound/                          é¡¶å±‚åŒ…</span><br><span class="line">      __init__.py               åˆå§‹åŒ– sound åŒ…</span><br><span class="line">      formats/                  æ–‡ä»¶æ ¼å¼è½¬æ¢å­åŒ…</span><br><span class="line">              __init__.py</span><br><span class="line">              wavread.py</span><br><span class="line">              wavwrite.py</span><br><span class="line">              aiffread.py</span><br><span class="line">              aiffwrite.py</span><br><span class="line">              auread.py</span><br><span class="line">              auwrite.py</span><br><span class="line">              ...</span><br><span class="line">      effects/                  å£°éŸ³æ•ˆæœå­åŒ…</span><br><span class="line">              __init__.py</span><br><span class="line">              echo.py</span><br><span class="line">              surround.py</span><br><span class="line">              reverse.py</span><br><span class="line">              ...</span><br><span class="line">      filters/                  filters å­åŒ…</span><br><span class="line">              __init__.py</span><br><span class="line">              equalizer.py</span><br><span class="line">              vocoder.py</span><br><span class="line">              karaoke.py</span><br><span class="line">              ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>ç›®å½•åªæœ‰åŒ…å«ä¸€ä¸ªå«åš _ _init__.py çš„æ–‡ä»¶æ‰ä¼šè¢«è®¤ä½œæ˜¯ä¸€ä¸ªåŒ…</strong></p>
<ul>
<li><p>å¯¼å…¥æ–¹æ³•</p>
<p>å¯¼å…¥æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sound.effects <span class="keyword">import</span> echo</span><br></pre></td></tr></table></figure>
<p>å¯¼å…¥å‡½æ•°ã€å˜é‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sound.effects.echo <span class="keyword">import</span> echofilter</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯¼å…¥å¤šä¸ªå­æ¨¡å—</p>
<p>åœ¨sound/ä¸‹çš„initæ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">__all__ = [&quot;echo&quot;, &quot;surround&quot;, &quot;reverse&quot;]</span><br></pre></td></tr></table></figure>
<p>ç”±äºwindowsä¸åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼åœ¨å½“ä½¿ç”¨å¯¼å…¥*æ—¶åŒºåˆ†å¤§å°å†™åœ°å¯¼å…¥å­æ¨¡å—</p>
</li>
</ul>
<h1 id="è¯»ã€å†™æ–‡ä»¶"><a href="#è¯»ã€å†™æ–‡ä»¶" class="headerlink" title="è¯»ã€å†™æ–‡ä»¶"></a>è¯»ã€å†™æ–‡ä»¶</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f=<span class="built_in">open</span>(name,mode)</span><br></pre></td></tr></table></figure>
<p>modeå¯é€‰ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">æ¨¡å¼</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">r</td>
<td style="text-align:left">ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td style="text-align:left">rb</td>
<td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚</td>
</tr>
<tr>
<td style="text-align:left">r+</td>
<td style="text-align:left">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚</td>
</tr>
<tr>
<td style="text-align:left">rb+</td>
<td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚</td>
</tr>
<tr>
<td style="text-align:left">w</td>
<td style="text-align:left">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td style="text-align:left">wb</td>
<td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td style="text-align:left">w+</td>
<td style="text-align:left">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td style="text-align:left">wb+</td>
<td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td style="text-align:left">a</td>
<td style="text-align:left">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚</td>
</tr>
<tr>
<td style="text-align:left">ab</td>
<td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚</td>
</tr>
<tr>
<td style="text-align:left">a+</td>
<td style="text-align:left">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚</td>
</tr>
<tr>
<td style="text-align:left">ab+</td>
<td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚</td>
</tr>
</tbody>
</table>
</div>
<p>opençš„å…¶ä»–æ–¹æ³•è§ï¼š<a href="https://www.runoob.com/python3/python3-file-methods.html">Python3 File æ–¹æ³• | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<p>æ–‡ä»¶å¯¹è±¡çš„å…¶ä»–æ–¹æ³•è§<a href="https://www.runoob.com/python3/python3-inputoutput.html">Python3 è¾“å…¥å’Œè¾“å‡º | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<h1 id="å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡"><a href="#å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡"></a>å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡</h1><p>åœ¨å±€éƒ¨ä½œç”¨åŸŸä¿®æ”¹å…¨å±€å˜é‡ï¼Œæ„Ÿè§‰ã€‚ã€‚è¿˜æ˜¯æˆ‘ä»¬Cæ–¹ä¾¿ã€‚ã€‚ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun1</span>():</span><br><span class="line">    <span class="keyword">global</span> num  <span class="comment"># éœ€è¦ä½¿ç”¨ global å…³é”®å­—å£°æ˜</span></span><br><span class="line">    <span class="built_in">print</span>(num) </span><br><span class="line">    num = <span class="number">123</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line">fun1()</span><br><span class="line"><span class="built_in">print</span>(num)</span><br></pre></td></tr></table></figure>
<h1 id="Numpyåº“"><a href="#Numpyåº“" class="headerlink" title="Numpyåº“"></a>Numpyåº“</h1><h2 id="arrayæ“ä½œ"><a href="#arrayæ“ä½œ" class="headerlink" title="arrayæ“ä½œ"></a>arrayæ“ä½œ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.zeros((<span class="number">1</span>, <span class="number">5</span>))                                       </span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a shape = <span class="subst">&#123;a.shape&#125;</span>, a = <span class="subst">&#123;a&#125;</span>&quot;</span>)                     </span><br><span class="line"></span><br><span class="line">a = np.zeros((<span class="number">2</span>, <span class="number">1</span>))                                                                 </span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a shape = <span class="subst">&#123;a.shape&#125;</span>, a = <span class="subst">&#123;a&#125;</span>&quot;</span>) </span><br><span class="line"></span><br><span class="line">a = np.random.random_sample((<span class="number">1</span>, <span class="number">1</span>))  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a shape = <span class="subst">&#123;a.shape&#125;</span>, a = <span class="subst">&#123;a&#125;</span>&quot;</span>) </span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">a shape = (1, 5), a = [[0. 0. 0. 0. 0.]]</span></span><br><span class="line"><span class="string">a shape = (2, 1), a = [[0.]</span></span><br><span class="line"><span class="string"> [0.]] #æ­¤å¤„ä¸º2ä¸ªè¡Œå‘é‡</span></span><br><span class="line"><span class="string">a shape = (1, 1), a = [[0.78320514]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">5</span>], [<span class="number">4</span>], [<span class="number">3</span>]])  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot; a shape = <span class="subst">&#123;a.shape&#125;</span>, np.array: a = <span class="subst">&#123;a&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"> a shape = (3, 1), np.array: a = [[5]</span></span><br><span class="line"><span class="string"> [4]</span></span><br><span class="line"><span class="string"> [3]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.arange(<span class="number">6</span>).reshape(-<span class="number">1</span>, <span class="number">2</span>)   <span class="comment">#å°†0~5è½¬åŒ–ä¸ºï¼Ÿè¡Œï¼Œ2åˆ—çš„æ ¼å¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a.shape: <span class="subst">&#123;a.shape&#125;</span>, \na= <span class="subst">&#123;a&#125;</span>&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">a.shape: (3, 2), </span></span><br><span class="line"><span class="string">a= [[0 1]</span></span><br><span class="line"><span class="string"> [2 3]</span></span><br><span class="line"><span class="string"> [4 5]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç´¢å¼•æŸä¸ªå…ƒç´ ï¼ˆç´¢å¼•ä»0å¼€å§‹,å› æ­¤ç´¢å¼•çš„ä¸ºç¬¬3æ’ç¬¬1åˆ—ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;\na[2,0].shape: <span class="subst">&#123;a[<span class="number">2</span>, <span class="number">0</span>].shape&#125;</span>, a[2,0] = <span class="subst">&#123;a[<span class="number">2</span>, <span class="number">0</span>]&#125;</span>, type(a[2,0]) = <span class="subst">&#123;<span class="built_in">type</span>(a[<span class="number">2</span>, <span class="number">0</span>])&#125;</span> Accessing an element returns a scalar\n&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">a[2,0].shape: (), a[2,0] = 4, type(a[2,0]) = &lt;class &#x27;numpy.int32&#x27;&gt; Accessing an element returns a scalar</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç´¢å¼•æŸä¸€è¡Œ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a[2].shape:   <span class="subst">&#123;a[<span class="number">2</span>].shape&#125;</span>, a[2]   = <span class="subst">&#123;a[<span class="number">2</span>]&#125;</span>, type(a[2])   = <span class="subst">&#123;<span class="built_in">type</span>(a[<span class="number">2</span>])&#125;</span>&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">a[2].shape:   (2,), a[2]   = [4 5], type(a[2])   = &lt;class &#x27;numpy.ndarray&#x27;&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="np-expand-dims"><a href="#np-expand-dims" class="headerlink" title="np.expand_dims"></a>np.expand_dims</h2><p>æˆ‘ä¹Ÿè¿˜ä¸å¤ªæ¸…æ¥šå…·ä½“ç”¨æ³•ï¼Œå…ˆåšä¸ªè®°å½•ï¼Œå¯ä»¥ä»¿ç…§ç€ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = np.arange(<span class="number">1</span>,<span class="number">11</span>).reshape(<span class="number">1</span>,-<span class="number">1</span>) <span class="comment">#åªæœ‰1è¡Œçš„äºŒç»´</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;A&#125;</span>\n&#x27;</span>)</span><br><span class="line">A = np.expand_dims(A,axis=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;A&#125;</span>\n<span class="subst">&#123;A.shape&#125;</span>&#x27;</span>)</span><br><span class="line">A = A[:,:,<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;A&#125;</span>\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[[ 1  2  3  4  5  6  7  8  9 10]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[[[ 1]</span></span><br><span class="line"><span class="string">  [ 2]</span></span><br><span class="line"><span class="string">  [ 3]</span></span><br><span class="line"><span class="string">  [ 4]</span></span><br><span class="line"><span class="string">  [ 5]</span></span><br><span class="line"><span class="string">  [ 6]</span></span><br><span class="line"><span class="string">  [ 7]</span></span><br><span class="line"><span class="string">  [ 8]</span></span><br><span class="line"><span class="string">  [ 9]</span></span><br><span class="line"><span class="string">  [10]]]</span></span><br><span class="line"><span class="string">(1, 10, 1)</span></span><br><span class="line"><span class="string">[[ 1  2  3  4  5  6  7  8  9 10]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="np-pad"><a href="#np-pad" class="headerlink" title="np.pad"></a>np.pad</h2><p>å¯¹æ•°ç»„åœ¨ä¸åŒç»´åº¦å¡«å……å€¼ï¼Œé»˜è®¤ä¸º0</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">A = np.arange(<span class="number">1</span>,<span class="number">11</span>).reshape(<span class="number">2</span>,-<span class="number">1</span>)</span><br><span class="line">A = np.expand_dims(A,axis=<span class="number">2</span>)	<span class="comment">#å˜ä¸º3ç»´</span></span><br><span class="line">A = np.pad(A,((<span class="number">1</span>,<span class="number">2</span>),(<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">0</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;A&#125;</span>\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[[[ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[ 1]</span></span><br><span class="line"><span class="string">  [ 2]</span></span><br><span class="line"><span class="string">  [ 3]</span></span><br><span class="line"><span class="string">  [ 4]</span></span><br><span class="line"><span class="string">  [ 5]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[ 6]</span></span><br><span class="line"><span class="string">  [ 7]</span></span><br><span class="line"><span class="string">  [ 8]</span></span><br><span class="line"><span class="string">  [ 9]</span></span><br><span class="line"><span class="string">  [10]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = np.pad(A,((<span class="number">0</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">0</span>,<span class="number">0</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;A&#125;</span>\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[[[ 0]</span></span><br><span class="line"><span class="string">  [ 1]</span></span><br><span class="line"><span class="string">  [ 2]</span></span><br><span class="line"><span class="string">  [ 3]</span></span><br><span class="line"><span class="string">  [ 4]</span></span><br><span class="line"><span class="string">  [ 5]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[ 0]</span></span><br><span class="line"><span class="string">  [ 6]</span></span><br><span class="line"><span class="string">  [ 7]</span></span><br><span class="line"><span class="string">  [ 8]</span></span><br><span class="line"><span class="string">  [ 9]</span></span><br><span class="line"><span class="string">  [10]</span></span><br><span class="line"><span class="string">  [ 0]</span></span><br><span class="line"><span class="string">  [ 0]]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = np.pad(A,((<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;A&#125;</span>\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[[[ 0  1  0  0]</span></span><br><span class="line"><span class="string">  [ 0  2  0  0]</span></span><br><span class="line"><span class="string">  [ 0  3  0  0]</span></span><br><span class="line"><span class="string">  [ 0  4  0  0]</span></span><br><span class="line"><span class="string">  [ 0  5  0  0]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[ 0  6  0  0]</span></span><br><span class="line"><span class="string">  [ 0  7  0  0]</span></span><br><span class="line"><span class="string">  [ 0  8  0  0]</span></span><br><span class="line"><span class="string">  [ 0  9  0  0]</span></span><br><span class="line"><span class="string">  [ 0 10  0  0]]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h1 id="matplotlib-pyplotåº“"><a href="#matplotlib-pyplotåº“" class="headerlink" title="matplotlib.pyplotåº“"></a>matplotlib.pyplotåº“</h1><p>ç”¨æ³•æ¥è¿‘matlab</p>
<h2 id="subplots"><a href="#subplots" class="headerlink" title="subplots"></a>subplots</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fig, axarr = plt.subplots(<span class="number">6</span>)</span><br><span class="line">axarr[<span class="number">0</span>].plot(...)</span><br><span class="line">axarr[<span class="number">1</span>].imshow()</span><br><span class="line">...</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h2 id="subplot"><a href="#subplot" class="headerlink" title="subplot"></a>subplot</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plt.subplot(1,2,1)</span><br><span class="line">plt.plot(...)</span><br><span class="line">plt.subplot(1,2,2)</span><br><span class="line">plt.plot(...)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h1 id="OSåº“"><a href="#OSåº“" class="headerlink" title="OSåº“"></a>OSåº“</h1><h2 id="os-listdir"><a href="#os-listdir" class="headerlink" title="os.listdir()"></a>os.listdir()</h2><p>os.listdir() æ–¹æ³•ç”¨äºè¿”å›æŒ‡å®šçš„æ–‡ä»¶å¤¹åŒ…å«çš„<strong>æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</strong>çš„<strong>åå­—</strong>çš„<strong>åˆ—è¡¨</strong></p>
<h2 id="os-path"><a href="#os-path" class="headerlink" title="os.path()"></a>os.path()</h2><p><a href="https://www.runoob.com/python/python-os-path.html">Python os.path æ¨¡å— | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<h3 id="os-path-join-path1-path2-â€¦"><a href="#os-path-join-path1-path2-â€¦" class="headerlink" title="os.path.join(path1[, path2[, â€¦]])"></a>os.path.join(path1[, path2[, â€¦]])</h3><p>æŠŠpath1path2åˆæˆä¸€ä¸ªè·¯å¾„</p>
]]></content>
      <tags>
        <tag>pythonå­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C++å­—ç¬¦ä¸²ã€å‘é‡å’Œæ•°ç»„</title>
    <url>/2022/09/15/C++-3/</url>
    <content><![CDATA[<h1 id="å­—ç¬¦ä¸²ã€å‘é‡å’Œæ•°ç»„"><a href="#å­—ç¬¦ä¸²ã€å‘é‡å’Œæ•°ç»„" class="headerlink" title="å­—ç¬¦ä¸²ã€å‘é‡å’Œæ•°ç»„"></a>å­—ç¬¦ä¸²ã€å‘é‡å’Œæ•°ç»„</h1><h2 id="1ã€usingå£°æ˜"><a href="#1ã€usingå£°æ˜" class="headerlink" title="1ã€usingå£°æ˜"></a>1ã€usingå£°æ˜</h2><p>ä½œç”¨ï¼šä½¿ç”¨usingå£°æ˜å‘½åç©ºé—´çš„ç›¸å…³æˆå‘˜åï¼Œåç»­ä¸éœ€å†å£°æ˜</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line">cin&gt;&gt;i;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ¯ä¸ªåå­—éƒ½éœ€è¦ç‹¬ç«‹çš„usingå£°æ˜</li>
</ul>
<h2 id="2ã€stringç±»å‹"><a href="#2ã€stringç±»å‹" class="headerlink" title="2ã€stringç±»å‹"></a>2ã€stringç±»å‹</h2><ul>
<li>ä½¿ç”¨å‰éœ€åŒ…å«å¤´æ–‡ä»¶<code>&lt;string&gt;</code>(æ²¡æœ‰.h)ï¼Œä¸”éœ€å£°æ˜stringå®šä¹‰äºå‘½åç©ºé—´ä¸­</li>
</ul>
<h3 id="åˆå§‹åŒ–stringç±»å‹çš„æ–¹æ³•"><a href="#åˆå§‹åŒ–stringç±»å‹çš„æ–¹æ³•" class="headerlink" title="åˆå§‹åŒ–stringç±»å‹çš„æ–¹æ³•"></a>åˆå§‹åŒ–stringç±»å‹çš„æ–¹æ³•</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">string s1;</span><br><span class="line">string s2=s1;</span><br><span class="line"><span class="function">string <span class="title">s3</span><span class="params">(<span class="string">&quot;value&quot;</span>)</span></span>;</span><br><span class="line">string s3 =<span class="string">&quot;value&quot;</span>;</span><br><span class="line"><span class="function">string <span class="title">s4</span><span class="params">(n,<span class="string">&#x27;c&#x27;</span>)</span></span>;<span class="comment">//æ­¤å¤„åªèƒ½ä¸ºå­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h3 id="è¯»å†™stringå¯¹è±¡"><a href="#è¯»å†™stringå¯¹è±¡" class="headerlink" title="è¯»å†™stringå¯¹è±¡"></a>è¯»å†™stringå¯¹è±¡</h3><p>å½“è¦å°†æ ‡å‡†è¾“å…¥å†…å®¹è¯»å–åˆ°ä¸€ä¸ªstringå¯¹è±¡æ—¶ï¼Œstringå¯¹è±¡ä¼šè‡ªåŠ¨å¿½ç•¥å¼€å¤´çš„ç©ºç™½ï¼ˆç©ºæ ¼ã€æ¢è¡Œç­‰ï¼‰ï¼Œä»ç¬¬ä¸€ä¸ªçœŸæ­£çš„å­—ç¬¦å¼€å§‹ï¼Œç›´åˆ°é‡åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªç©ºç™½ï¼ˆä½†è¯»å–ç»“æŸçš„æ ‡å‡†æ˜¯æ¢è¡Œï¼‰</p>
<h3 id="ä½¿ç”¨getlineå‡½æ•°è¯»å–ä¸€æ•´è¡Œ"><a href="#ä½¿ç”¨getlineå‡½æ•°è¯»å–ä¸€æ•´è¡Œ" class="headerlink" title="ä½¿ç”¨getlineå‡½æ•°è¯»å–ä¸€æ•´è¡Œ"></a>ä½¿ç”¨getlineå‡½æ•°è¯»å–ä¸€æ•´è¡Œ</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">string s;</span><br><span class="line"><span class="built_in">getline</span>(cin,s);</span><br></pre></td></tr></table></figure>
<p>getlineåªæœ‰å½“è¯»å–åˆ°æ¢è¡Œç¬¦æ—¶æ‰ä¼šç»“æŸï¼Œå¹¶ä¸”è¿™ä¸ªæ¢è¡Œç¬¦ä¼šè¢«ä¸¢å¼ƒã€‚</p>
<h3 id="ç›¸åŠ é—®é¢˜"><a href="#ç›¸åŠ é—®é¢˜" class="headerlink" title="ç›¸åŠ é—®é¢˜"></a>ç›¸åŠ é—®é¢˜</h3><p>stringå¯¹è±¡å¯ä»¥ç›¸åŠ ï¼Œstringå¯¹è±¡ä¹Ÿå¯ä»¥ä¸å­—é¢å€¼ç›¸åŠ ï¼Œ<strong>ä½†å­—é¢å€¼ä¸èƒ½ä¸å­—é¢å€¼ç›¸åŠ ï¼</strong></p>
<h3 id="å•ç‹¬å¤„ç†å­—ç¬¦"><a href="#å•ç‹¬å¤„ç†å­—ç¬¦" class="headerlink" title="å•ç‹¬å¤„ç†å­—ç¬¦"></a>å•ç‹¬å¤„ç†å­—ç¬¦</h3><p>C++11æä¾›äº†ä¸€ç§è¯­å¥ï¼šèŒƒå›´for</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">string <span class="built_in">str</span>(<span class="string">&quot;something&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(auto c:<span class="built_in">str</span>)	cout&lt;&lt;c&lt;&lt;endl;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ¯æ¬¡å¾ªç¯ä¸­ï¼Œéƒ½ä¼šæŠŠåºåˆ—ä¸­çš„<strong>åŸºç¡€å…ƒç´ </strong>å­˜å…¥cä¸­</li>
</ul>
<p>è¿˜å¯ä»¥é€šè¿‡å¼•ç”¨ç­‰æ–¹å¼å•ç‹¬æ”¹å˜å­—ç¬¦</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">string <span class="title">str</span><span class="params">(<span class="string">&quot;something&quot;</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> &amp;c:str)	c=<span class="built_in">toupper</span>(c);<span class="comment">//å¤§å†™è½¬æ¢å‡½æ•°</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‹æ ‡é—®é¢˜"><a href="#ä¸‹æ ‡é—®é¢˜" class="headerlink" title="ä¸‹æ ‡é—®é¢˜"></a>ä¸‹æ ‡é—®é¢˜</h3><p>C++æ”¯æŒå¯¹å­—ç¬¦ä¸²ä½¿ç”¨ä¸‹æ ‡è¿ç®—ç¬¦<code>[]</code>è®¿é—®å­—ç¬¦ä¸²çš„å•ä¸ªå­—ç¬¦ï¼Œè§„åˆ™åŒpythonï¼Œä½†è²Œä¼¼C++ä¸æ”¯æŒæˆªå–ã€‚</p>
<h2 id="3ã€vectorç±»å‹"><a href="#3ã€vectorç±»å‹" class="headerlink" title="3ã€vectorç±»å‹"></a>3ã€vectorç±»å‹</h2><p>è¦æƒ³ä½¿ç”¨vectorï¼Œéœ€åŒ…å«<code>&lt;vector&gt;</code>å¤´æ–‡ä»¶ã€‚<strong>ç±»å‹vectorè¡¨ç¤ºå¯¹è±¡çš„é›†åˆ</strong></p>
<p>å®ä¾‹åŒ–ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; a;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; b;</span><br></pre></td></tr></table></figure>
<h3 id="å®šä¹‰ä¸åˆå§‹åŒ–"><a href="#å®šä¹‰ä¸åˆå§‹åŒ–" class="headerlink" title="å®šä¹‰ä¸åˆå§‹åŒ–"></a>å®šä¹‰ä¸åˆå§‹åŒ–</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; a;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(b)</span></span>; <span class="comment">//aåŒ…å«bä¸­æ‰€æœ‰å…ƒç´ çš„å‰¯æœ¬ aå’Œbçš„ç±»å‹éœ€ç›¸åŒ</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a=b;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n,val)</span></span>; <span class="comment">//aä¸­æœ‰nä¸ªé‡å¤çš„val</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n)</span></span>; <span class="comment">//åŒ…å«nä¸ªå¯¹è±¡</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a&#123;A,B,C&#125;;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a=&#123;A,B,C&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="å‘vectorå¯¹è±¡å°¾éƒ¨æ·»åŠ å…ƒç´ "><a href="#å‘vectorå¯¹è±¡å°¾éƒ¨æ·»åŠ å…ƒç´ " class="headerlink" title="å‘vectorå¯¹è±¡å°¾éƒ¨æ·»åŠ å…ƒç´ "></a>å‘vectorå¯¹è±¡å°¾éƒ¨æ·»åŠ å…ƒç´ </h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; a;</span><br><span class="line">a.<span class="built_in">push_back</span>(<span class="number">1</span>);<span class="comment">//a=&#123;1&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="å…¶ä»–å‡½æ•°"><a href="#å…¶ä»–å‡½æ•°" class="headerlink" title="å…¶ä»–å‡½æ•°"></a>å…¶ä»–å‡½æ•°</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">a.<span class="built_in">empty</span>(); <span class="comment">//å¦‚æœaä¸å«å…ƒç´ åˆ™è¿”å›çœŸ</span></span><br><span class="line">a.<span class="built_in">size</span>(); <span class="comment">//è¿”å›å…ƒç´ ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„ç±»å‡½æ•°å‚è€ƒä¹¦p91</p>
<h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><p>vectorå¯¹è±¡åŒæ ·æ”¯æŒä½¿ç”¨ä¸‹æ ‡è¿ç®—ç¬¦è¿›è¡Œå•ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œä½†ä¸èƒ½é€šè¿‡ä¸‹æ ‡æ·»åŠ å…ƒç´ ã€‚</p>
<h2 id="4ã€è¿­ä»£å™¨"><a href="#4ã€è¿­ä»£å™¨" class="headerlink" title="4ã€è¿­ä»£å™¨"></a>4ã€è¿­ä»£å™¨</h2><p>è¿­ä»£å™¨ï¼ˆiteratorï¼‰æ˜¯ä¸€ç§å¯ä»¥éå†å®¹å™¨å…ƒç´ çš„æ•°æ®ç±»å‹ã€‚è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå˜é‡ï¼Œç›¸å½“äºå®¹å™¨å’Œæ“çºµå®¹å™¨çš„ç®—æ³•ä¹‹é—´çš„ä¸­ä»‹ã€‚<strong>C++æ›´è¶‹å‘äºä½¿ç”¨è¿­ä»£å™¨è€Œä¸æ˜¯æ•°ç»„ä¸‹æ ‡æ“ä½œ</strong>ï¼Œå› ä¸ºæ ‡å‡†åº“ä¸ºæ¯ä¸€ç§æ ‡å‡†å®¹å™¨ï¼ˆå¦‚vectorã€mapå’Œlistç­‰ï¼‰å®šä¹‰äº†ä¸€ç§è¿­ä»£å™¨ç±»å‹ï¼Œè€Œåªæœ‰å°‘æ•°å®¹å™¨ï¼ˆå¦‚vectorï¼‰æ”¯æŒæ•°ç»„ä¸‹æ ‡æ“ä½œè®¿é—®å®¹å™¨å…ƒç´ ã€‚å¯ä»¥é€šè¿‡è¿­ä»£å™¨æŒ‡å‘ä½ æƒ³è®¿é—®å®¹å™¨çš„å…ƒç´ åœ°å€ï¼Œé€šè¿‡*xæ‰“å°å‡ºå…ƒç´ å€¼ã€‚è¿™å’Œæˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„æŒ‡é’ˆæå…¶ç±»ä¼¼ã€‚</p>
<p>Cè¯­è¨€æœ‰æŒ‡é’ˆï¼ŒæŒ‡é’ˆç”¨èµ·æ¥ååˆ†çµæ´»é«˜æ•ˆã€‚<br>C++è¯­è¨€æœ‰è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨ç›¸å¯¹äºæŒ‡é’ˆè€Œè¨€åŠŸèƒ½æ›´ä¸ºä¸°å¯Œã€‚</p>
<h3 id="è¿­ä»£å™¨çš„ä½¿ç”¨"><a href="#è¿­ä»£å™¨çš„ä½¿ç”¨" class="headerlink" title="è¿­ä»£å™¨çš„ä½¿ç”¨"></a>è¿­ä»£å™¨çš„ä½¿ç”¨</h3><p>å¯ä»¥çœ‹å‡ºï¼Œè¿­ä»£å™¨çš„åŸºæœ¬ä½¿ç”¨å’ŒæŒ‡é’ˆæå…¶ç›¸ä¼¼</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;string&gt; v&#123;<span class="string">&quot;aaaa&quot;</span>,<span class="string">&quot;bbbb&quot;</span>&#125;;</span><br><span class="line">	<span class="keyword">auto</span> i=v.<span class="built_in">begin</span>();</span><br><span class="line">	cout&lt;&lt;*(i+<span class="number">1</span>); <span class="comment">//bbbb</span></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿­ä»£å™¨è¿ç®—ç¬¦"><a href="#è¿­ä»£å™¨è¿ç®—ç¬¦" class="headerlink" title="è¿­ä»£å™¨è¿ç®—ç¬¦"></a>è¿­ä»£å™¨è¿ç®—ç¬¦</h3><ul>
<li><p>è·å¾—è¿­ä»£å™¨æ‰€æŒ‡å…ƒç´ </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">*iter  <span class="keyword">or</span>  iter-&gt;mem</span><br></pre></td></tr></table></figure>
</li>
<li><p>è·å–è¿­ä»£å™¨é•¿åº¦</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">i.<span class="built_in">end</span>()-i.<span class="built_in">begin</span>()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="è¿­ä»£å™¨ç±»å‹"><a href="#è¿­ä»£å™¨ç±»å‹" class="headerlink" title="è¿­ä»£å™¨ç±»å‹"></a>è¿­ä»£å™¨ç±»å‹</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;string&gt; v&#123;<span class="string">&quot;aaaa&quot;</span>,<span class="string">&quot;bbbb&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">auto</span> i=v.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">//vector&lt;string&gt;::iterator i; ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">str</span><span class="params">(<span class="string">&quot;12345&quot;</span>)</span></span>;</span><br><span class="line"><span class="keyword">auto</span> i=str.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">//string::iterator i; ç±»å‹</span></span><br><span class="line"></span><br><span class="line">å¯¹åº”çš„åªè¯»ç±»å‹</span><br><span class="line"><span class="comment">//vector&lt;string&gt;::const_iterator v;</span></span><br><span class="line"><span class="comment">//string::const_iterator str;</span></span><br></pre></td></tr></table></figure>
<h3 id="å½“éœ€è¦å¯¹è¿­ä»£å™¨è¿›è¡Œéå†æ—¶ï¼Œéœ€æ³¨æ„forå¾ªç¯çš„æ¡ä»¶3ï¼š"><a href="#å½“éœ€è¦å¯¹è¿­ä»£å™¨è¿›è¡Œéå†æ—¶ï¼Œéœ€æ³¨æ„forå¾ªç¯çš„æ¡ä»¶3ï¼š" class="headerlink" title="å½“éœ€è¦å¯¹è¿­ä»£å™¨è¿›è¡Œéå†æ—¶ï¼Œéœ€æ³¨æ„forå¾ªç¯çš„æ¡ä»¶3ï¼š"></a>å½“éœ€è¦å¯¹è¿­ä»£å™¨è¿›è¡Œéå†æ—¶ï¼Œéœ€æ³¨æ„forå¾ªç¯çš„æ¡ä»¶3ï¼š</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> i=v.<span class="built_in">begin</span>(); i !=v.<span class="built_in">end</span>(); ++i)<span class="comment">//åº”ä½¿ç”¨++iï¼Œè¿™æ˜¯å› ä¸ºendä¸ºå…ƒç´ 10ä¹‹åçš„ä½ç½®	</span></span><br><span class="line">	&#123;</span><br><span class="line">		*i=*i*<span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> a:v) cout&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5ã€æ•°ç»„"><a href="#5ã€æ•°ç»„" class="headerlink" title="5ã€æ•°ç»„"></a>5ã€æ•°ç»„</h2><p>å¤§éƒ¨åˆ†è§„å®šä¸Cç›¸åŒã€‚</p>
<ul>
<li><p>å®šä¹‰æ•°ç»„æ—¶ä¸å…è®¸ç”¨autoå…³é”®å­—ç”±åˆå§‹å€¼æ¨æ–­ç±»å‹ã€‚</p>
</li>
<li><p>å¯ä½¿ç”¨decltype(æ•°ç»„å)å®šä¹‰æ•°ç»„ç±»å‹ã€‚</p>
</li>
<li><p><strong>æ•°ç»„ä¸æ˜¯ç±»ç±»å‹ï¼Œå› æ­¤æ²¡æœ‰æˆå‘˜å‡½æ•°ã€‚</strong></p>
<p>å› æ­¤C++11å¼•å…¥äº†beginã€endå‡½æ•°æ¥æŸ¥è¯¢æ•°ç»„ç›¸å…³å…ƒç´ çš„<strong>åœ°å€</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="type">int</span> *p=<span class="built_in">begin</span>(a);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ³¨æ„ï¼šend()å’Œvectorç±»å‹çš„å­å‡½æ•°.end()ä¸åŒï¼Œend()å‡½æ•°è¿”å›çš„æ˜¯æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œè€Œvectorç±»å‹çš„endå­å‡½æ•°è¿”å›çš„æ˜¯æœ€åä¸€ä¸ªå…ƒç´ çš„åä¸€ä½åœ°å€</p>
<h3 id="å•ä¸ªå…ƒç´ ç±»å‹"><a href="#å•ä¸ªå…ƒç´ ç±»å‹" class="headerlink" title="å•ä¸ªå…ƒç´ ç±»å‹"></a>å•ä¸ªå…ƒç´ ç±»å‹</h3><p>é€šå¸¸å¯¹æ•°ç»„çš„å•ä¸ªç±»å‹å®šä¹‰ä¸ºsize_tå‹ï¼Œè¯¥ç±»å‹ä¸ºä¸€ç§æœºå™¨ç›¸å…³çš„æ— ç¬¦å·ç±»å‹ï¼Œå®ƒè¢«è®¾è®¡å¾—è¶³å¤Ÿå¤§ä»¥ä¾¿èƒ½è¡¨ç¤ºå†…å­˜ä¸­ä»»æ„å¯¹è±¡çš„å¤§å°</p>
<p><strong>è¦ä½¿ç”¨è¯¥ç±»å‹ï¼Œåº”åŒ…å«cstddefå¤´æ–‡ä»¶</strong></p>
<h3 id="Cä¸C-çš„å­—ç¬¦ä¸²é£æ ¼"><a href="#Cä¸C-çš„å­—ç¬¦ä¸²é£æ ¼" class="headerlink" title="Cä¸C++çš„å­—ç¬¦ä¸²é£æ ¼"></a>Cä¸C++çš„å­—ç¬¦ä¸²é£æ ¼</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> a[<span class="number">10</span>]=<span class="string">&quot;dhk&quot;</span>; <span class="comment">//Cé£æ ¼</span></span><br><span class="line"><span class="function">string <span class="title">a</span><span class="params">(<span class="string">&quot;dhk&quot;</span>)</span></span>;	<span class="comment">//C++é£æ ¼</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Cä¸­ï¼Œé€šå¸¸æˆ‘ä»¬è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¸€äº›ä¾‹å¦‚æ¯”è¾ƒã€æ‹·è´ã€è¿æ¥ç­‰çš„æ“ä½œæ—¶ï¼Œé€šå¸¸ä½¿ç”¨çš„æ˜¯æ ‡å‡†åº“ä¸­çš„ç›¸å…³å­—ç¬¦ä¸²é•¿åº¦ï¼Œç›¸è¾ƒäºC++ä¸­stringç±»å‹çš„å˜é‡å¯ä»¥å¯¹å­˜æ”¾å­—ç¬¦ä¸²çš„å˜é‡ç›´æ¥è¿›è¡Œè¿ç®—ç­‰æ“ä½œï¼ŒCçš„å­—ç¬¦ä¸²é£æ ¼æ›´åŠ ç¹çï¼Œä¸”æå®¹æ˜“åœ¨æ•°ç»„çš„å†…å­˜æ–¹é¢å¼•å‘ä¸¥é‡é—®é¢˜</p>
<h4 id="æ··ç”¨è§„åˆ™ï¼š"><a href="#æ··ç”¨è§„åˆ™ï¼š" class="headerlink" title="æ··ç”¨è§„åˆ™ï¼š"></a>æ··ç”¨è§„åˆ™ï¼š</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">string <span class="title">a</span><span class="params">(<span class="string">&quot;dhk&quot;</span>)</span></span>;</span><br><span class="line"><span class="type">char</span> *str=a;<span class="comment">//é”™è¯¯ï¼Œaçš„ç±»å‹ä¸ºstringï¼Œè€Œstrç±»å‹ä¸ºchar*ï¼Œå†²çª</span></span><br><span class="line"><span class="type">char</span> *str=a.<span class="built_in">c_str</span>();<span class="comment">//æ­£ç¡®ã€‚c_str()å‡½æ•°è¿”å›çš„æ˜¯Cé£æ ¼å­—ç¬¦ä¸²ï¼ˆä¸€ä¸ªåœ°å€ï¼‰</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ç”¨æ³•ç›¸å½“äºæ˜¯<strong>åˆ</strong>åœ¨å†…å­˜ä¸­åˆ›å»ºäº†ä¸€ä¸ªâ€dhkâ€å­—ç¬¦ä¸²ï¼Œè€Œç”¨äºæ‰¾åˆ°è¯¥å­—ç¬¦ä¸²çš„æŒ‡é’ˆä¸€æ—¦æ”¹å˜ï¼Œè¯¥å­—ç¬¦ä¸²å°±å°†ä¸èƒ½å†è¢«æ‰¾åˆ°ï¼Œå› æ­¤é€šå¸¸å¯¹å­˜æ”¾è¯¥ç±»å‹çš„æŒ‡é’ˆè¿›è¡Œconstæ“ä½œã€‚å…¶è§„åˆ™ç±»ä¼¼Cä¸­çš„<code>char *str=&quot;dhk&quot;</code>æ‰€éµå¾ªçš„è§„åˆ™ã€‚</p>
<h3 id="ä½¿ç”¨æ•°ç»„åˆå§‹åŒ–vectorç±»å‹"><a href="#ä½¿ç”¨æ•°ç»„åˆå§‹åŒ–vectorç±»å‹" class="headerlink" title="ä½¿ç”¨æ•°ç»„åˆå§‹åŒ–vectorç±»å‹"></a>ä½¿ç”¨æ•°ç»„åˆå§‹åŒ–vectorç±»å‹</h3><p>C++ä¸å…è®¸ç”¨ä¸€ä¸ªæ•°ç»„ä¸ºå¦ä¸€ä¸ªæ•°ç»„èµ‹åˆå€¼ï¼Œä¹Ÿä¸å…è®¸é€šè¿‡vectorç±»å‹å¯¹è±¡ä¸ºä¸€ä¸ªæ•°ç»„åˆå§‹åŒ–ï¼Œä½†æ˜¯å…è®¸é€šè¿‡æ•°ç»„ä¸ºvectorå¯¹è±¡åˆå§‹åŒ–ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(begin(a),end(a))</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="6ã€å¤šç»´æ•°ç»„"><a href="#6ã€å¤šç»´æ•°ç»„" class="headerlink" title="6ã€å¤šç»´æ•°ç»„"></a>6ã€å¤šç»´æ•°ç»„</h2><p>ä¸€äº›åŸºç¡€å†…å®¹åŒCï¼Œè¯¦è§<u>äºŒç»´æ•°ç»„å¤ä¹  | å°è‘£çš„BLOG (gitee.io)</u></p>
<p>å¤šç»´æ•°ç»„å¯ä»¥ç†è§£ä¸ºæ•°ç»„çš„æ•°ç»„ä¾‹å¦‚<code>int a[3][4]</code>å¯ä»¥ç†è§£ä¸ºaæ•°ç»„åŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼Œè€Œè¿™ä¸‰ä¸ªå…ƒç´ éƒ½ä¸ºå¤§å°ä¸º4çš„æ•°ç»„</p>
<h3 id="ä¸‹æ ‡å¼•ç”¨"><a href="#ä¸‹æ ‡å¼•ç”¨" class="headerlink" title="ä¸‹æ ‡å¼•ç”¨"></a>ä¸‹æ ‡å¼•ç”¨</h3><h3 id="ä½¿ç”¨èŒƒå›´forè¯­å¥å’Œä¸‹æ ‡å¼•ç”¨å¤„ç†å¤šç»´æ•°ç»„"><a href="#ä½¿ç”¨èŒƒå›´forè¯­å¥å’Œä¸‹æ ‡å¼•ç”¨å¤„ç†å¤šç»´æ•°ç»„" class="headerlink" title="ä½¿ç”¨èŒƒå›´forè¯­å¥å’Œä¸‹æ ‡å¼•ç”¨å¤„ç†å¤šç»´æ•°ç»„"></a>ä½¿ç”¨èŒƒå›´forè¯­å¥å’Œä¸‹æ ‡å¼•ç”¨å¤„ç†å¤šç»´æ•°ç»„</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">3</span>][<span class="number">4</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">size_t</span> x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> &amp;row : a)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> &amp;col : row)</span><br><span class="line">	&#123;</span><br><span class="line">		col=x;</span><br><span class="line">		x++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>python_åŸºç¡€å®šä¹‰</title>
    <url>/2022/09/14/python-1/</url>
    <content><![CDATA[<h1 id="1ã€åŸºæœ¬æ•°æ®ç±»å‹"><a href="#1ã€åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="1ã€åŸºæœ¬æ•°æ®ç±»å‹"></a>1ã€åŸºæœ¬æ•°æ®ç±»å‹</h1><ul>
<li>å˜é‡ä¸éœ€è¦å£°æ˜ï¼Œä¹Ÿæ²¡æœ‰ç±»å‹ã€‚</li>
<li>pythonå…è®¸åŒæ—¶ç»™å¤šä¸ªå˜é‡èµ‹å€¼</li>
</ul>
<h2 id="æ ‡å‡†æ•°æ®ç±»å‹ï¼š"><a href="#æ ‡å‡†æ•°æ®ç±»å‹ï¼š" class="headerlink" title="æ ‡å‡†æ•°æ®ç±»å‹ï¼š"></a>æ ‡å‡†æ•°æ®ç±»å‹ï¼š</h2><ul>
<li>Number</li>
<li>String</li>
<li>List</li>
<li>Tupleï¼ˆå…ƒç»„ï¼‰</li>
<li>Setï¼ˆé›†åˆï¼‰</li>
<li>Dictionaryï¼ˆå­—å…¸ï¼‰</li>
</ul>
<h3 id="1ã€Numberï¼ˆæ•°å­—ï¼‰"><a href="#1ã€Numberï¼ˆæ•°å­—ï¼‰" class="headerlink" title="1ã€Numberï¼ˆæ•°å­—ï¼‰"></a>1ã€Numberï¼ˆæ•°å­—ï¼‰</h3><p>Python3 æ”¯æŒ intã€floatã€boolã€<strong>complexï¼ˆå¤æ•°ï¼‰</strong>ã€‚</p>
<ul>
<li>å¯ä½¿ç”¨type(<em>å˜é‡</em> )å‡½æ•°æŸ¥è¯¢å˜é‡ç±»å‹</li>
<li><p>å¯ç”¨isinstance(<em>å˜é‡ï¼Œç±»å‹</em> )åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºæƒ³è¦çš„ç±»å‹ï¼Œä¸ºçœŸè¿”å›Ture</p>
</li>
<li><p>del è¯­å¥å¯ç”¨åˆ é™¤å¯¹å¯¹è±¡çš„å¼•ç”¨</p>
</li>
<li><p>åœ¨é™¤æ³•çš„è®¡ç®—ä¸­ï¼Œ<code>/</code>è¿”å›æµ®ç‚¹æ•°ï¼Œ<code>//</code>è¿”å›æ•´æ•°ï¼Œåœ¨æ··åˆè®¡ç®—æ—¶ä¼šæŠŠæ•´æ•°è½¬åŒ–ä¸ºæµ®ç‚¹æ•°</p>
</li>
<li><p><code>//</code>è¿”å›çš„ä¸ä¸€å®šæ˜¯æ•´å‹çš„æ•°ï¼Œè¿™ä¸åˆ†æ¯åˆ†å­çš„ç±»å‹æœ‰å…³</p>
</li>
</ul>
<p>pythonå¯ä»¥ä½¿ç”¨<code>**</code>æ¥è¿›è¡Œå¹‚è¿ç®—ï¼Œå¦‚5çš„å¹³æ–¹ï¼š<code>5**2</code></p>
<ul>
<li><p><strong>numberä¸ºä¸å¯å˜ç±»å‹ï¼Œ</strong>ä¾‹å¦‚å˜é‡èµ‹å€¼ <strong>a=5</strong> åå†èµ‹å€¼ <strong>a=10</strong>ï¼Œè¿™é‡Œå®é™…æ˜¯æ–°ç”Ÿæˆä¸€ä¸ª int å€¼å¯¹è±¡ 10ï¼Œå†è®© a æŒ‡å‘å®ƒï¼Œè€Œ 5 è¢«ä¸¢å¼ƒï¼Œä¸æ˜¯æ”¹å˜ a çš„å€¼ï¼Œç›¸å½“äºæ–°ç”Ÿæˆäº† a</p>
</li>
<li><p>æ•°å­—ç±»å‹è½¬æ¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="number">1.0</span></span><br><span class="line"><span class="built_in">int</span>(a)</span><br><span class="line"><span class="built_in">float</span>(a)</span><br><span class="line"><span class="built_in">complex</span>(a)	<span class="comment">#è½¬æ¢ä¸ºå¤æ•°ï¼Œå®æ•°éƒ¨åˆ†ä¸ºaï¼Œè™šæ•°éƒ¨åˆ†ä¸º0</span></span><br><span class="line">b=<span class="number">2</span></span><br><span class="line"><span class="built_in">complex</span>(a,b)	<span class="comment">#è½¬æ¢ä¸ºå¤æ•°ï¼Œå®æ•°éƒ¨åˆ†ä¸ºaï¼Œè™šæ•°éƒ¨åˆ†ä¸ºb</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å…¶ä»–å¸¸ç”¨æ•°å­—å‡½æ•°</p>
<p><a href="https://www.runoob.com/python3/python3-number.html">Python3 æ•°å­—(Number) | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
</li>
</ul>
<h3 id="2ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"><a href="#2ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰" class="headerlink" title="2ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>2ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h3><p>Python æ²¡æœ‰å•ç‹¬çš„å­—ç¬¦ç±»å‹ï¼Œä¸€ä¸ªå­—ç¬¦å°±æ˜¯é•¿åº¦ä¸º 1 çš„å­—ç¬¦ä¸²</p>
<p>pythonä¸­çš„å­—ç¬¦ä¸²å¯ç”¨å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·æ¥ï¼Œä½¿ç”¨å®Œå…¨ç›¸åŒ</p>
<p>å­—ç¬¦ä¸²çš„æˆªå–ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å˜é‡[å¤´ä¸‹æ ‡:å°¾ä¸‹æ ‡:æˆªå–æ­¥é•¿]</span></span><br><span class="line"><span class="comment">#è‹¥æˆªå–æ­¥é•¿ä¸ºè´Ÿæ•°åˆ™é€†å‘è¯»å–</span></span><br><span class="line"><span class="comment">#ç¬¬ä¸€ä¸ªå­—ç¬¦ç´¢å¼•å€¼ä¸º0ï¼Œæœ«å°¾å­—ç¬¦ä¸º-1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;dhk&quot;</span>*<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;dhk&quot;</span>+<span class="string">&quot;dhk&quot;</span>)</span><br><span class="line"><span class="comment">#dhkdhk</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ç´¢å¼•ï¼šå˜é‡[ç´¢å¼•ä¸‹æ ‡]</li>
<li>å±è”½è½¬ä¹‰å­—ç¬¦ï¼šåœ¨å­—ç¬¦ä¸²å‰ï¼ˆå¼•å·å¤–ï¼‰æ·»åŠ ä¸€ä¸ªr</li>
<li><strong>pythonå­—ç¬¦ä¸²ä¸èƒ½è¢«æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ç»™å•ä¸ªç´¢å¼•ä½ç½®èµ‹å€¼</strong></li>
</ul>
<p>å­—ç¬¦ä¸²çš„æ ¼å¼åŒ–ï¼š<code>print(&quot;%s %d&quot; % (&#39;abc&#39;, 10))</code></p>
<h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">input</span>([prompt]) <span class="comment">#promptä¸ºç”¨æˆ·å†™çš„æç¤ºä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;a = <span class="built_in">input</span>(<span class="string">&quot;input:&quot;</span>)</span><br><span class="line"><span class="built_in">input</span>:<span class="number">123</span>                  <span class="comment"># è¾“å…¥æ•´æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="built_in">type</span> <span class="string">&#x27;int&#x27;</span>&gt;               <span class="comment"># æ•´å‹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="built_in">input</span>(<span class="string">&quot;input:&quot;</span>)    </span><br><span class="line"><span class="built_in">input</span>:<span class="string">&quot;runoob&quot;</span>           <span class="comment"># æ­£ç¡®ï¼Œå­—ç¬¦ä¸²è¡¨è¾¾å¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="built_in">type</span> <span class="string">&#x27;str&#x27;</span>&gt;             <span class="comment"># å­—ç¬¦ä¸²ï¼Œpython3 é‡Œ input() é»˜è®¤æ¥æ”¶åˆ°çš„æ˜¯ str ç±»å‹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="built_in">input</span>(<span class="string">&quot;input:&quot;</span>)</span><br><span class="line"><span class="built_in">input</span>:runoob               <span class="comment"># æŠ¥é”™ï¼Œä¸æ˜¯è¡¨è¾¾å¼</span></span><br></pre></td></tr></table></figure>
<h4 id="f-stringå­—ç¬¦ä¸²æ ¼å¼åŒ–"><a href="#f-stringå­—ç¬¦ä¸²æ ¼å¼åŒ–" class="headerlink" title="f-stringå­—ç¬¦ä¸²æ ¼å¼åŒ–"></a>f-stringå­—ç¬¦ä¸²æ ¼å¼åŒ–</h4><p> æ ¼å¼åŒ–å­—ç¬¦ä¸²ä»¥ <strong>f</strong> å¼€å¤´ï¼Œåé¢è·Ÿç€å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­çš„è¡¨è¾¾å¼ç”¨å¤§æ‹¬å· {} åŒ…èµ·æ¥ï¼Œå®ƒä¼šå°†å˜é‡æˆ–è¡¨è¾¾å¼è®¡ç®—åçš„å€¼æ›¿æ¢è¿›å»ï¼Œæ‹¬å·ä¸­çš„å˜é‡ä¸ä»…é™äºå­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&#x27;dhk&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;hello <span class="subst">&#123;name&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment">#hello dhk</span></span><br></pre></td></tr></table></figure>
<ul>
<li>printä¸­çš„è½¬ä¹‰å­—ç¬¦ç”¨æ³•åŒC</li>
</ul>
<h4 id="print"><a href="#print" class="headerlink" title="print"></a>print</h4><p>pythonçš„è¾“å‡ºä¸åŒäºcï¼Œç›´æ¥æŠŠæƒ³è¾“å‡ºçš„å†…å®¹é€šè¿‡é€—å·è¿æ¥å³å¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="number">11</span></span><br><span class="line">b=<span class="string">&#x27;dhk&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼Cçš„è¯­æ³•ï¼š</p>
<p>ä½†æ˜¯æ„Ÿè§‰è¿™ç§æ–¹æ³•ä¸å¦‚f-stringå’Œä¸Šè¿°ç”¨æ³•æ–¹ä¾¿ç®€å•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> (<span class="string">&quot;æˆ‘å« %s ä»Šå¹´ %d å²!&quot;</span> % (<span class="string">&#x27;å°æ˜&#x27;</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<p>æ ¼å¼åŒ–ç¬¦å·è¯¦è§<a href="https://www.runoob.com/python3/python3-string.html">Python3 å­—ç¬¦ä¸² | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<ul>
<li><p>endå…³é”®å­—ï¼Œç”¨äºå°†ç»“æœè¾“å‡ºåˆ°åŒä¸€è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(b, end=<span class="string">&#x27;,&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="è½¬ä¹‰å­—ç¬¦"><a href="#è½¬ä¹‰å­—ç¬¦" class="headerlink" title="è½¬ä¹‰å­—ç¬¦"></a>è½¬ä¹‰å­—ç¬¦</h4><p><a href="https://www.runoob.com/python3/python3-string.html">Python3 å­—ç¬¦ä¸² | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<p>å…¶ä¸­è¿›åˆ¶çš„è½¬æ¢ä¸ºï¼š</p>
<ul>
<li>bin(a)ï¼šè½¬äºŒè¿›åˆ¶</li>
<li>oct(a)ï¼šè½¬å…«è¿›åˆ¶</li>
<li>hex(a)ï¼šè½¬åå…­è¿›åˆ¶</li>
</ul>
<h4 id="å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°"><a href="#å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°"></a>å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°</h4><p><a href="https://www.runoob.com/python3/python3-string.html">Python3 å­—ç¬¦ä¸² | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<h3 id="3ã€Listï¼ˆåˆ—è¡¨ï¼‰ï¼Œä¸­æ‹¬å·"><a href="#3ã€Listï¼ˆåˆ—è¡¨ï¼‰ï¼Œä¸­æ‹¬å·" class="headerlink" title="3ã€Listï¼ˆåˆ—è¡¨ï¼‰ï¼Œä¸­æ‹¬å·"></a>3ã€Listï¼ˆåˆ—è¡¨ï¼‰ï¼Œä¸­æ‹¬å·</h3><p>å®šä¹‰æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=[<span class="number">1</span>,<span class="number">10.1</span>,<span class="string">&#x27;abcd&#x27;</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>åŸºæœ¬ä½¿ç”¨åŒå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ç´¢å¼•ã€æˆªå–ï¼Œä½¿ç”¨æ­¥é•¿æˆªå–ï¼ˆåŒ…æ‹¬é€†å‘ï¼‰ç­‰ã€‚</li>
<li><strong>åˆ—è¡¨å†…çš„å…ƒç´ å¯æ”¹å˜ï¼</strong>ï¼Œç›´æ¥åƒcçš„æ•°ç»„ä¸€æ ·æ”¹å°±è¡Œ</li>
<li>é€†å‘è¯»å–ä¸ä¼šå°†å…ƒç´ å†…å®¹é€†å‘</li>
</ul>
<h4 id="æ›´æ–°åˆ—è¡¨ï¼š"><a href="#æ›´æ–°åˆ—è¡¨ï¼š" class="headerlink" title="æ›´æ–°åˆ—è¡¨ï¼š"></a>æ›´æ–°åˆ—è¡¨ï¼š</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>]</span><br><span class="line">list1.append(<span class="string">&#x27;Baidu&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;æ›´æ–°åçš„åˆ—è¡¨ : &quot;</span>, list1)	<span class="comment">#æ›´æ–°åçš„åˆ—è¡¨ :  [&#x27;Google&#x27;, &#x27;Runoob&#x27;, &#x27;Taobao&#x27;, &#x27;Baidu&#x27;]</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆ é™¤åˆ—è¡¨å…ƒç´ "><a href="#åˆ é™¤åˆ—è¡¨å…ƒç´ " class="headerlink" title="åˆ é™¤åˆ—è¡¨å…ƒç´ "></a>åˆ é™¤åˆ—è¡¨å…ƒç´ </h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>]</span><br><span class="line"><span class="keyword">del</span> <span class="built_in">list</span>[<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><p>å˜é‡[å¤´ä¸‹æ ‡:å°¾ä¸‹æ ‡] or å˜é‡[å¤´ä¸‹æ ‡:å°¾ä¸‹æ ‡:<strong>æ­¥é•¿</strong>]æ­¥é•¿ä¸º-1æ—¶é€†å‘è¯»å–</p>
<p>å…¶ä¸­-1ä»£è¡¨æœ«å°¾ï¼ˆç”¨äºä¸çŸ¥é“å®é™…é•¿åº¦æ—¶çš„ç´¢å¼•ï¼‰ï¼ŒåŒæ—¶-2ã€-3å¯¹åº”å€’æ•°ç¬¬äºŒã€ç¬¬ä¸‰â€¦</p>
<p>æ­£æ•°å’Œè´Ÿæ•°çš„ä½¿ç”¨<strong>ä¸ç›¸äº’å†²çª</strong></p>
<h4 id="åˆ—è¡¨æ“ä½œå‡½æ•°"><a href="#åˆ—è¡¨æ“ä½œå‡½æ•°" class="headerlink" title="åˆ—è¡¨æ“ä½œå‡½æ•°"></a>åˆ—è¡¨æ“ä½œå‡½æ•°</h4><p><a href="https://www.runoob.com/python3/python3-list.html">Python3 åˆ—è¡¨ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<h4 id="åˆ›å»ºæŒ‡å®šé•¿åº¦ç©ºåˆ—è¡¨"><a href="#åˆ›å»ºæŒ‡å®šé•¿åº¦ç©ºåˆ—è¡¨" class="headerlink" title="åˆ›å»ºæŒ‡å®šé•¿åº¦ç©ºåˆ—è¡¨"></a>åˆ›å»ºæŒ‡å®šé•¿åº¦ç©ºåˆ—è¡¨</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="number">5</span></span><br><span class="line">empty_list = [<span class="literal">None</span>] * n</span><br></pre></td></tr></table></figure>
<h3 id="4ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼Œå°æ‹¬å·"><a href="#4ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼Œå°æ‹¬å·" class="headerlink" title="4ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼Œå°æ‹¬å·"></a>4ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼Œå°æ‹¬å·</h3><p>å®šä¹‰æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=(<span class="number">1</span>,<span class="number">10.1</span>,<span class="string">&#x27;abcd&#x27;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>åŸºæœ¬ä½¿ç”¨åŒå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ç´¢å¼•ã€æˆªå–ï¼Œä½¿ç”¨æ­¥é•¿æˆªå–ï¼ˆåŒ…æ‹¬é€†å‘ï¼‰ç­‰ã€‚</p>
</li>
<li><p>å…ƒç»„åœ¨è¾“å…¥æ—¶å¯èƒ½æ²¡æœ‰æ‹¬å·ï¼Œä¾‹å¦‚<code>t = 12345, 54321, &#39;hello!&#39;</code></p>
</li>
<li><p><strong>å…ƒç»„å†…å…ƒç´ ä¸å¯æ”¹å˜ï¼Œä½†å¯ä»¥åŒ…å«å¯å˜çš„å¯¹è±¡ï¼Œæ¯”å¦‚åˆ—è¡¨</strong>ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¯¹å…ƒç»„ä¹‹é—´è¿›è¡Œè¿æ¥ç»„åˆæˆæ–°å…ƒç»„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tup1 = (<span class="number">12</span>, <span class="number">34.56</span>)</span><br><span class="line">tup2 = (<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ä»¥ä¸‹ä¿®æ”¹å…ƒç»„å…ƒç´ æ“ä½œæ˜¯éæ³•çš„ã€‚</span></span><br><span class="line"><span class="comment"># tup1[0] = 100</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç»„</span></span><br><span class="line">tup3 = tup1 + tup2</span><br><span class="line"><span class="built_in">print</span> (tup3)</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŒ…å«0å’Œ1ä¸ªçš„å…ƒç»„æœ‰é¢å¤–çš„è¯­æ³•è§„åˆ™ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tup1 = ()    <span class="comment"># ç©ºå…ƒç»„</span></span><br><span class="line">tup2 = (<span class="number">20</span>,) <span class="comment"># ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦åœ¨å…ƒç´ åæ·»åŠ é€—å·,å¦åˆ™æ‹¬å·ä¼šè¢«å½“ä½œè¿ç®—ç¬¦ä½¿ç”¨</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><u>å…ƒç»„ä¸­åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦åœ¨å…ƒç´ åé¢æ·»åŠ é€—å·  ï¼Œå¦åˆ™æ‹¬å·ä¼šè¢«å½“ä½œè¿ç®—ç¬¦ä½¿ç”¨</u></strong></p>
</li>
<li><p>å†…ç½®å‡½æ•°</p>
<p><a href="https://www.runoob.com/python3/python3-tuple.html">Python3 å…ƒç»„ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
</li>
</ul>
<h3 id="5ã€Setï¼ˆé›†åˆï¼‰ï¼Œå¤§æ‹¬å·"><a href="#5ã€Setï¼ˆé›†åˆï¼‰ï¼Œå¤§æ‹¬å·" class="headerlink" title="5ã€Setï¼ˆé›†åˆï¼‰ï¼Œå¤§æ‹¬å·"></a>5ã€Setï¼ˆé›†åˆï¼‰ï¼Œå¤§æ‹¬å·</h3><p>å®šä¹‰æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=() <span class="comment">#ç©ºé›†åˆéœ€ç”¨å°æ‹¬å·</span></span><br><span class="line">b=&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">c=<span class="built_in">set</span>(<span class="string">&#x27;abcde&#x27;</span>) <span class="comment">#ä½¿ç”¨setå‡½æ•°=&#123;&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;e&#x27;&#125;</span></span><br><span class="line"><span class="comment">#å¿…é¡»ç”¨ set() è€Œä¸æ˜¯ &#123; &#125;ï¼Œå› ä¸º &#123; &#125; æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ã€‚</span></span><br><span class="line">b.add(<span class="number">4</span>)</span><br><span class="line">b.update(<span class="number">4</span>)	<span class="comment">#æ·»åŠ å…ƒç´ ä¸Šè¿°ä¸¤ç§éƒ½å¯ä»¥</span></span><br><span class="line">b.remove(<span class="number">4</span>)</span><br><span class="line">b.discard(<span class="number">4</span>)	<span class="comment">#removeä¸å­˜åœ¨å…ƒç´ ä¼šæŠ¥é”™ï¼Œdiscardåˆ™ä¸ä¼š</span></span><br></pre></td></tr></table></figure>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li><p><strong>è¾“å‡ºæ—¶ä¼šè‡ªåŠ¨å»æ‰é‡å¤çš„å…ƒç´ ï¼ˆä»ç¬¬äºŒæ¬¡é‡å¤çš„å…ƒç´ å¼€å§‹åˆ é™¤ï¼‰</strong></p>
</li>
<li><p>å¯ä»¥è¿›è¡Œé›†åˆè¿ç®—</p>
</li>
<li><p><strong>ä¸å¯åƒå‰é¢å‡ ä¸ªç±»å‹ä¸€æ ·è¿›è¡Œç´¢å¼•</strong>ï¼Œé›†åˆæ˜¯æ— åºçš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(a-b) <span class="comment">#å°†aä¸­ä¸bç›¸åŒçš„å…ƒç´ å»æ‰åè¾“å‡ºa</span></span><br><span class="line"><span class="built_in">print</span>(a|b) <span class="comment"># å¹¶é›†</span></span><br><span class="line"><span class="built_in">print</span>(a&amp;b) <span class="comment">#äº¤é›†</span></span><br><span class="line"><span class="built_in">print</span>(a^b) <span class="comment">#éäº¤é›†</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å…¶ä½™å†…ç½®å‡½æ•°</p>
<p><a href="https://www.runoob.com/python3/python3-set.html">Python3 é›†åˆ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<h3 id="6ã€Dictionaryï¼ˆå­—å…¸ï¼‰"><a href="#6ã€Dictionaryï¼ˆå­—å…¸ï¼‰" class="headerlink" title="6ã€Dictionaryï¼ˆå­—å…¸ï¼‰"></a>6ã€Dictionaryï¼ˆå­—å…¸ï¼‰</h3><p>å­—å…¸æ˜¯ä¸€ç§æ˜ å°„ç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>æ— åº</strong>çš„ <strong>é”®(key) : å€¼(value)</strong> çš„é›†åˆã€‚</p>
<p>å®šä¹‰æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="string">&#x27;a&#x27;</span> : <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span> :<span class="number">3</span>&#125;  <span class="comment">#&#x27;:&#x27;å‰ä¸ºâ€œé”®â€ï¼Œåä¸ºâ€œå€¼â€</span></span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">a= &#123;&#125;</span><br><span class="line">a[<span class="string">&#x27;a&#x27;</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="string">&#x27;b&#x27;</span>] = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">#&#123;&#x27;a&#x27;: &#x27;abcd&#x27;, &#x27;b&#x27;: &#x27;123&#x27;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(a.keys()) <span class="comment">#dict_keys([&#x27;a&#x27;, &#x27;b&#x27;])</span></span><br><span class="line"><span class="built_in">print</span>(a.values()) <span class="comment">#dict_values([&#x27;abcd&#x27;, &#x27;123&#x27;])</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="string">&#x27;b&#x27;</span>])	<span class="comment">#2    è®¿é—®å­—å…¸é‡Œçš„å€¼</span></span><br></pre></td></tr></table></figure>
<p>é”®çš„ç‰¹æ€§ï¼š</p>
<ul>
<li><p>åŒä¸€ä¸ªé”®å‡ºç°ä¸¤æ¬¡æ—¶åªæœ‰åä¸€ä¸ªå€¼ä¼šè¢«è®°ä½</p>
</li>
<li><p>é”®<strong>å¿…é¡»æ˜¯ä¸å¯å˜</strong>çš„ï¼Œå› æ­¤å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å…ƒç»„ï¼Œè€Œä¸èƒ½æ˜¯åˆ—è¡¨ç­‰å¯ä»¥æ”¹å˜çš„å˜é‡</p>
</li>
<li><p>ä¿®æ”¹å­—å…¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tinydict = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;Class&#x27;</span>: <span class="string">&#x27;First&#x27;</span>&#125;</span><br><span class="line"> </span><br><span class="line">tinydict[<span class="string">&#x27;Age&#x27;</span>] = <span class="number">8</span>               <span class="comment"># æ›´æ–° Age</span></span><br><span class="line">tinydict[<span class="string">&#x27;School&#x27;</span>] = <span class="string">&quot;èœé¸Ÿæ•™ç¨‹&quot;</span>  <span class="comment"># æ·»åŠ ä¿¡æ¯</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;tinydict[&#x27;Age&#x27;]: &quot;</span>, tinydict[<span class="string">&#x27;Age&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;tinydict[&#x27;School&#x27;]: &quot;</span>, tinydict[<span class="string">&#x27;School&#x27;</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŒæ—¶éå†å¤šä¸ªåºåˆ—å’Œç”¨å•ä¸ªå­—å…¸è¡¨ç¤ºï¼š</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">questions = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;lancelot&#x27;</span>, <span class="string">&#x27;quest&#x27;</span>:<span class="string">&#x27;the holy grail&#x27;</span>, <span class="string">&#x27;favorite color&#x27;</span>:<span class="string">&#x27;blue&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> q, a <span class="keyword">in</span> questions.items():<span class="comment">#qå’Œaä¼šåˆ†åˆ«éå†é”®å’Œå€¼</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">f&#x27;What is your <span class="subst">&#123;q&#125;</span>?  It is <span class="subst">&#123;a&#125;</span>.&#x27;</span>)</span><br><span class="line">   </span><br><span class="line"><span class="comment">####################or#####################</span></span><br><span class="line"></span><br><span class="line">questions = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;quest&#x27;</span>, <span class="string">&#x27;favorite color&#x27;</span>]</span><br><span class="line">answers = [<span class="string">&#x27;lancelot&#x27;</span>, <span class="string">&#x27;the holy grail&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> q, a <span class="keyword">in</span> <span class="built_in">zip</span>(questions, answers): <span class="comment">#ç´¢å¼•å¤šä¸ªåºåˆ—</span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">f&#x27;What is your <span class="subst">&#123;q&#125;</span>?  It is <span class="subst">&#123;a&#125;</span>.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">What is your name?  It is lancelot.</span></span><br><span class="line"><span class="string">What is your quest?  It is the holy grail.</span></span><br><span class="line"><span class="string">What is your favorite color?  It is blue.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>å…¶ä½™å†…ç½®å‡½æ•°å’Œæ–¹æ³•</p>
<p><a href="https://www.runoob.com/python3/python3-dictionary.html">Python3 å­—å…¸ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
</li>
</ul>
<h2 id="ç»¼ä¸Š"><a href="#ç»¼ä¸Š" class="headerlink" title="ç»¼ä¸Š"></a>ç»¼ä¸Š</h2><ul>
<li>listå…ƒç´ å¯æ”¹å˜ï¼Œæœ‰åº</li>
<li>tupleå…ƒç´ ä¸å¯æ”¹å˜ï¼Œæœ‰åº</li>
<li>setæ— åºï¼Œä¸å¯ç´¢å¼•</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=[<span class="number">1</span>,<span class="number">10.1</span>,<span class="string">&#x27;abcd&#x27;</span>]  <span class="comment">#åˆ—è¡¨</span></span><br><span class="line">a=(<span class="number">1</span>,<span class="number">10.1</span>,<span class="string">&#x27;abcd&#x27;</span>)	<span class="comment">#å…ƒç»„</span></span><br><span class="line">a=&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;	<span class="comment">#é›†åˆ</span></span><br><span class="line">a = &#123;<span class="string">&#x27;a&#x27;</span> : <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span> :<span class="number">3</span>&#125; <span class="comment">#å­—å…¸</span></span><br></pre></td></tr></table></figure>
<h1 id="2ã€æ¨å¯¼å¼"><a href="#2ã€æ¨å¯¼å¼" class="headerlink" title="2ã€æ¨å¯¼å¼"></a>2ã€æ¨å¯¼å¼</h1><p>Python æ¨å¯¼å¼æ˜¯ä¸€ç§ç‹¬ç‰¹çš„æ•°æ®å¤„ç†æ–¹å¼ï¼Œ<strong>å¯ä»¥ä»ä¸€ä¸ªæ•°æ®åºåˆ—æ„å»ºå¦ä¸€ä¸ªæ–°çš„æ•°æ®åºåˆ—çš„ç»“æ„ä½“</strong>ã€‚</p>
<p>Python æ”¯æŒå„ç§æ•°æ®ç»“æ„çš„æ¨å¯¼å¼ï¼š</p>
<ul>
<li>åˆ—è¡¨(list)æ¨å¯¼å¼</li>
<li>å­—å…¸(dict)æ¨å¯¼å¼</li>
<li>é›†åˆ(set)æ¨å¯¼å¼</li>
<li>å…ƒç»„(tuple)æ¨å¯¼å¼</li>
</ul>
<h2 id="åˆ—è¡¨æ¨å¯¼å¼"><a href="#åˆ—è¡¨æ¨å¯¼å¼" class="headerlink" title="åˆ—è¡¨æ¨å¯¼å¼"></a>åˆ—è¡¨æ¨å¯¼å¼</h2><p>æ ¼å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[è¡¨è¾¾å¼ <span class="keyword">for</span> å˜é‡ <span class="keyword">in</span> åˆ—è¡¨ <span class="keyword">if</span> æ¡ä»¶]</span><br></pre></td></tr></table></figure>
<ul>
<li>è¡¨è¾¾å¼ï¼šéœ€è¦å¯¹è¾“å‡ºå…ƒç´ çš„æ“ä½œï¼Œå¯ä»¥æ˜¯æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œ<strong>å…¶æ ¼å¼å³æ¨å¯¼å¼æœ€ç»ˆè¾“å‡ºçš„æ ¼å¼</strong></li>
<li><p>å˜é‡ï¼†åˆ—è¡¨ï¼šæˆ‘çš„ç†è§£æ˜¯å®šä¹‰ä¸€ä¸ªæ–°å˜é‡ï¼Œé€šè¿‡è¿™ä¸ªæ–°å˜é‡å°†ç°æœ‰åˆ—è¡¨å…ƒç´ ä¼ å…¥<strong>è¡¨è¾¾å¼</strong>ä¸­</p>
</li>
<li><p>æ¡ä»¶ï¼šå¯¹å˜é‡è¿›è¡Œç­›é€‰</p>
</li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">b = [i/<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> a <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="comment">#å®šä¹‰å˜é‡iï¼Œiæ¥è‡ªåˆ—è¡¨aä¸­çš„å¯ä»¥æ•´é™¤2çš„å…ƒç´ ï¼Œæœ€åè¿”å›i/2çš„å€¼ä½œä¸ºæ–°åˆ—è¡¨bçš„å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment">#[1.0, 2.0, 3.0, 4.0, 5.0]</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶å®šä¹‰å¤šä¸ªå˜é‡å­˜æ”¾å€¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vec1 = [2, 4, 6]</span><br><span class="line">vec2 = [4, 3, -9]</span><br><span class="line">[x*y for x in vec1 for y in vec2] </span><br><span class="line">[x+y for x in vec1 for y in vec2]</span><br><span class="line">[vec1[i]*vec2[i] for i in range(len(vec1))]</span><br></pre></td></tr></table></figure>
<p>åœ¨çŸ©é˜µåˆ—è¡¨ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a = [[1, 2, 3], [4, 5, 6]]</span><br><span class="line">b = [row[0] for row in a]</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>
<h2 id="å­—å…¸æ¨å¯¼å¼"><a href="#å­—å…¸æ¨å¯¼å¼" class="headerlink" title="å­—å…¸æ¨å¯¼å¼"></a>å­—å…¸æ¨å¯¼å¼</h2><p>æ ¼å¼ä¸åˆ—è¡¨æ¨å¯¼å¼å‡ ä¹ç›¸åŒï¼Œåªæ˜¯å°†è¡¨è¾¾å¼æ¢æˆäº†<code>key:value</code>çš„æ ¼å¼ï¼Œå…·ä½“è§ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>, <span class="number">100</span>, <span class="number">101</span>] <span class="comment"># ä¼ å…¥æ¨å¯¼å¼çš„ä¸ºä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line">b = &#123;k: <span class="built_in">chr</span>(k) <span class="keyword">for</span> k <span class="keyword">in</span> a&#125;</span><br><span class="line"><span class="built_in">print</span>(b)	<span class="comment">#&#123;97: &#x27;a&#x27;, 98: &#x27;b&#x27;, 99: &#x27;c&#x27;, 100: &#x27;d&#x27;, 101: &#x27;e&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="number">97</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">98</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">99</span>: <span class="string">&#x27;c&#x27;</span>, <span class="number">100</span>: <span class="string">&#x27;d&#x27;</span>, <span class="number">101</span>: <span class="string">&#x27;e&#x27;</span>&#125;<span class="comment"># ä¼ å…¥æ¨å¯¼å¼çš„ä¸ºä¸€ä¸ªå­—å…¸</span></span><br><span class="line">b = &#123;k: <span class="built_in">chr</span>(k) <span class="keyword">for</span> k <span class="keyword">in</span> a.keys()&#125;</span><br><span class="line"><span class="built_in">print</span>(b)	<span class="comment">#&#123;97: &#x27;a&#x27;, 98: &#x27;b&#x27;, 99: &#x27;c&#x27;, 100: &#x27;d&#x27;, 101: &#x27;e&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#or</span></span><br><span class="line"></span><br><span class="line">a = &#123;<span class="number">97</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">98</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">99</span>: <span class="string">&#x27;c&#x27;</span>, <span class="number">100</span>: <span class="string">&#x27;d&#x27;</span>, <span class="number">101</span>: <span class="string">&#x27;e&#x27;</span>&#125;</span><br><span class="line">b = &#123;k: i <span class="keyword">for</span> k,i <span class="keyword">in</span> a.items()&#125;</span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure>
<p>ä½†å¦‚æœå¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="number">97</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">98</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">99</span>: <span class="string">&#x27;c&#x27;</span>, <span class="number">100</span>: <span class="string">&#x27;d&#x27;</span>, <span class="number">101</span>: <span class="string">&#x27;e&#x27;</span>&#125;</span><br><span class="line">b = &#123;k: i <span class="keyword">for</span> i <span class="keyword">in</span> a.values() <span class="keyword">for</span> k <span class="keyword">in</span> a.keys()&#125;</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment">#&#123;97: &#x27;e&#x27;, 98: &#x27;e&#x27;, 99: &#x27;e&#x27;, 100: &#x27;e&#x27;, 101: &#x27;e&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç›®å‰è¿˜ä¸çŸ¥é“åŸå› ã€‚</p>
<h2 id="é›†åˆæ¨å¯¼å¼"><a href="#é›†åˆæ¨å¯¼å¼" class="headerlink" title="é›†åˆæ¨å¯¼å¼"></a>é›†åˆæ¨å¯¼å¼</h2><p>è§„åˆ™æ ¼å¼ä¸åˆ—è¡¨æ¨å¯¼å¼ç›¸åŒ</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&#x27;abracadabra&#x27;</span> <span class="keyword">if</span> x <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">&#x27;abc&#x27;</span>&#125; <span class="comment">#åˆ¤æ–­ä¸æ˜¯abcçš„å­—æ¯</span></span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">#&#123;&#x27;d&#x27;, &#x27;r&#x27;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a)) <span class="comment">#&lt;class &#x27;set&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å…ƒç»„æ¨å¯¼å¼ï¼ˆç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼‰"><a href="#å…ƒç»„æ¨å¯¼å¼ï¼ˆç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼‰" class="headerlink" title="å…ƒç»„æ¨å¯¼å¼ï¼ˆç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼‰"></a>å…ƒç»„æ¨å¯¼å¼ï¼ˆç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼‰</h2><p>å…ƒç»„æ¨å¯¼å¼å’Œåˆ—è¡¨æ¨å¯¼å¼çš„ç”¨æ³•ä¹Ÿå®Œå…¨ç›¸åŒï¼Œä½†å…ƒç»„æ¨å¯¼å¼è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x7faf6ee20a50</span>&gt;  <span class="comment"># è¿”å›çš„æ˜¯ç”Ÿæˆå™¨å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>(a)       <span class="comment"># ä½¿ç”¨ tuple() å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥å°†ç”Ÿæˆå™¨å¯¹è±¡è½¬æ¢æˆå…ƒç»„</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br></pre></td></tr></table></figure>
<h1 id="3ã€è¿ç®—ç¬¦"><a href="#3ã€è¿ç®—ç¬¦" class="headerlink" title="3ã€è¿ç®—ç¬¦"></a>3ã€è¿ç®—ç¬¦</h1><h2 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a>èµ‹å€¼è¿ç®—ç¬¦</h2><ul>
<li><p><code>:=</code>   æµ·è±¡è¿ç®—ç¬¦ï¼Œåœ¨è¡¨è¾¾å¼å†…éƒ¨ä¸ºå˜é‡èµ‹å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (n := <span class="built_in">len</span>(a)) &gt; <span class="number">10</span>  <span class="comment">#å¯ä»¥é¿å…è°ƒç”¨ä¸¤æ¬¡lenå‡½æ•°</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="pythoné€»è¾‘è¿ç®—ç¬¦"><a href="#pythoné€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="pythoné€»è¾‘è¿ç®—ç¬¦"></a>pythoné€»è¾‘è¿ç®—ç¬¦</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">è¡¨è¾¾å¼</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">and</td>
<td style="text-align:center">x and y</td>
<td style="text-align:center">xä¸º<strong>å‡</strong>åˆ™è¿”å›xï¼Œxä¸º<strong>çœŸ</strong>åˆ™è¿”å›y</td>
</tr>
<tr>
<td style="text-align:center">or</td>
<td style="text-align:center">a or y</td>
<td style="text-align:center">xä¸º<strong>çœŸ</strong>åˆ™è¿”å›xï¼Œxä¸º<strong>å‡</strong>åˆ™è¿”å›y</td>
</tr>
<tr>
<td style="text-align:center">not</td>
<td style="text-align:center">not x</td>
<td style="text-align:center">xä¸ºçœŸè¿”å›å‡ï¼Œä¸ºå‡è¿”å›çœŸ</td>
</tr>
</tbody>
</table>
</div>
<h2 id="pythonæˆå‘˜è¿ç®—ç¬¦"><a href="#pythonæˆå‘˜è¿ç®—ç¬¦" class="headerlink" title="pythonæˆå‘˜è¿ç®—ç¬¦"></a>pythonæˆå‘˜è¿ç®—ç¬¦</h2><p>å¯ç”¨äºå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆã€å­—å…¸ï¼ˆè²Œä¼¼æ˜¯åˆ¤æ–­é”®ï¼‰</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">è¡¨è¾¾å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">in</td>
<td style="text-align:center">x in list</td>
</tr>
<tr>
<td style="text-align:center">not in</td>
<td style="text-align:center">x not in list</td>
</tr>
</tbody>
</table>
</div>
<h2 id="pythonèº«ä»½è¿ç®—ç¬¦"><a href="#pythonèº«ä»½è¿ç®—ç¬¦" class="headerlink" title="pythonèº«ä»½è¿ç®—ç¬¦"></a>pythonèº«ä»½è¿ç®—ç¬¦</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">è¡¨è¾¾å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">is</td>
<td style="text-align:center">a is b</td>
</tr>
<tr>
<td style="text-align:center">is not</td>
<td style="text-align:center">a is not b</td>
</tr>
</tbody>
</table>
</div>
<h1 id="4ã€å…¶ä»–"><a href="#4ã€å…¶ä»–" class="headerlink" title="4ã€å…¶ä»–"></a>4ã€å…¶ä»–</h1><ul>
<li><p>endå…³é”®å­—ï¼Œç”¨äºå°†ç»“æœè¾“å‡ºåˆ°åŒä¸€è¡Œï¼ŒåŒæ—¶å°†end=çš„å†…å®¹æ·»åŠ åœ¨æ¯æ¬¡è¾“å‡ºçš„æœ«å°¾</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b=<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> b&lt;<span class="number">10</span>ï¼š</span><br><span class="line">	<span class="built_in">print</span>(b,end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">	b+=<span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤šè¡Œè¯­å¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">total = item_one + \</span><br><span class="line">        item_two + \</span><br><span class="line">        item_three</span><br><span class="line"><span class="comment">#åœ¨ [], &#123;&#125;, æˆ– () ä¸­çš„å¤šè¡Œè¯­å¥ï¼Œä¸éœ€è¦ä½¿ç”¨åæ–œæ </span></span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <tags>
        <tag>pythonå­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>C++å˜é‡å’ŒåŸºæœ¬ç±»å‹</title>
    <url>/2022/09/09/C++-2/</url>
    <content><![CDATA[<h1 id="ç¬¬äºŒç« â€”â€”å˜é‡å’ŒåŸºæœ¬ç±»å‹"><a href="#ç¬¬äºŒç« â€”â€”å˜é‡å’ŒåŸºæœ¬ç±»å‹" class="headerlink" title="ç¬¬äºŒç« â€”â€”å˜é‡å’ŒåŸºæœ¬ç±»å‹"></a>ç¬¬äºŒç« â€”â€”å˜é‡å’ŒåŸºæœ¬ç±»å‹</h1><h2 id="è¯´åœ¨å‰é¢"><a href="#è¯´åœ¨å‰é¢" class="headerlink" title="è¯´åœ¨å‰é¢"></a>è¯´åœ¨å‰é¢</h2><p>C++è¿™ä¸ªæ¿å—æ˜¯æˆ‘åœ¨å­¦ä¹ äº†Cä¹‹åæ‰å­¦çš„ï¼Œå› æ­¤æˆ‘åªä¼šè®°å½•ä¸€äº›é‡è¦çš„æˆ–è€…åœ¨Cä¸­æ²¡æœ‰çš„ä¸œè¥¿</p>
<p><em>C++æ¿å—æ˜¯åŸºäºC++primerçš„æ–¹æ¡ˆå­¦ä¹ çš„</em></p>
<h2 id="1ã€åŸºæœ¬å†…ç½®ç±»å‹"><a href="#1ã€åŸºæœ¬å†…ç½®ç±»å‹" class="headerlink" title="1ã€åŸºæœ¬å†…ç½®ç±»å‹"></a>1ã€åŸºæœ¬å†…ç½®ç±»å‹</h2><ul>
<li><p>boolç±»å‹å–å€¼åªä¸ºçœŸï¼ˆ1ï¼‰å’Œå‡ï¼ˆ0ï¼‰</p>
</li>
<li><p>å½“ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼ä¸­æ—¢æœ‰æ— ç¬¦å·æ•°ï¼ˆunsignedï¼‰åˆæœ‰intå‹æ—¶ï¼Œintå‹çš„å€¼ä¼šè½¬æ¢æˆæ— ç¬¦å·æ•°ã€‚ä¸”å€¼å¤§äº0æ—¶ä¼šæ­£å¸¸æ˜¾ç¤ºï¼Œå°äºé›¶æ—¶ä¼šå¼‚å¸¸æ˜¾ç¤ºï¼ˆå½“intä¸º4å­—èŠ‚æ—¶ï¼Œå€¼ä¸º2^32 + è®¡ç®—ç»“æœï¼ˆè´Ÿæ•°ï¼‰ï¼‰ä¹Ÿå°±æ˜¯4294967295åŠ ä¸Š</p>
<p>(-n)ã€‚</p>
</li>
</ul>
<h3 id="æŒ‡å®šå­—é¢å€¼ç±»å‹ï¼š"><a href="#æŒ‡å®šå­—é¢å€¼ç±»å‹ï¼š" class="headerlink" title="æŒ‡å®šå­—é¢å€¼ç±»å‹ï¼š"></a>æŒ‡å®šå­—é¢å€¼ç±»å‹ï¼š</h3><ul>
<li>å­—ç¬¦å’Œå­—ç¬¦ä¸²å­—é¢å€¼</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‰ç¼€</th>
<th style="text-align:center">å«ä¹‰</th>
<th style="text-align:center">ä»£è¡¨ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">u</td>
<td style="text-align:center">Unicode16å­—ç¬¦</td>
<td style="text-align:center">char16_t</td>
</tr>
<tr>
<td style="text-align:center">U</td>
<td style="text-align:center">Unicode32å­—ç¬¦</td>
<td style="text-align:center">char32_t</td>
</tr>
<tr>
<td style="text-align:center">L</td>
<td style="text-align:center">å®½å­—ç¬¦ï¼ˆ2å­—èŠ‚ï¼‰</td>
<td style="text-align:center">wchar_t</td>
</tr>
<tr>
<td style="text-align:center">u8</td>
<td style="text-align:center">Unicode8å­—ç¬¦</td>
<td style="text-align:center">char</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>æ•´å‹å­—é¢å€¼</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">åç¼€</th>
<th style="text-align:center">æœ€å°åŒ¹é…ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">u or U</td>
<td style="text-align:center">unsigned</td>
</tr>
<tr>
<td style="text-align:center">l or L</td>
<td style="text-align:center">long</td>
</tr>
<tr>
<td style="text-align:center">ll or LL</td>
<td style="text-align:center">long long</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>æµ®ç‚¹å‹</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">åç¼€</th>
<th style="text-align:center">ä»£è¡¨çš„ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">f or F</td>
<td style="text-align:center">float</td>
</tr>
<tr>
<td style="text-align:center">l or L</td>
<td style="text-align:center">long double</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2ã€å˜é‡"><a href="#2ã€å˜é‡" class="headerlink" title="2ã€å˜é‡"></a>2ã€å˜é‡</h2><ul>
<li><p>ä¸€ç§åˆå§‹åŒ–å­—ç¬¦ä¸²çš„æ–¹æ³•</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">std::string <span class="title">a</span><span class="params">(<span class="string">&quot;test&quot;</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦ä¸²å˜é‡åaï¼Œå†…å®¹ä¸ºtest</p>
</li>
</ul>
<h2 id="3ã€å¯¹è±¡"><a href="#3ã€å¯¹è±¡" class="headerlink" title="3ã€å¯¹è±¡"></a>3ã€å¯¹è±¡</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹è±¡æ˜¯æŒ‡<strong>ä¸€å—èƒ½å­˜å‚¨æ•°æ®å¹¶å…·æœ‰æŸç§ç±»å‹çš„å†…å­˜ç©ºé—´</strong></p>
<h3 id="å…³äºåˆå§‹åŒ–çš„é—®é¢˜"><a href="#å…³äºåˆå§‹åŒ–çš„é—®é¢˜" class="headerlink" title="å…³äºåˆå§‹åŒ–çš„é—®é¢˜"></a>å…³äºåˆå§‹åŒ–çš„é—®é¢˜</h3><p>åœ¨å­¦Cçš„æ—¶å€™æˆ‘è‡ªå·±ä¹Ÿæ˜¯ä¸€ç›´æŠŠåˆå§‹åŒ–ç†è§£æˆèµ‹å€¼ï¼Œä½†æ˜¯ä¹Ÿä¸€ç›´æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæŒ‡é’ˆå˜é‡çš„åˆå§‹åŒ–ï¼Œæ„Ÿè§‰æ˜æ˜¾æ˜¯ä¸ç¬¦åˆâ€œèµ‹å€¼â€è¿™ä¸€æ“ä½œçš„ï¼Œä»Šå¤©åœ¨é˜…è¯»ä¹¦ç±æ—¶ä¹¦ä¸­ä¹ŸæŒ‡å‡ºäº†åˆå§‹åŒ–â‰ èµ‹å€¼ï¼Œä½†æ˜¯å…·ä½“çš„åŒºåˆ«ç›®å‰æˆ‘ä¹Ÿä¸èƒ½è®²çš„å¾ˆæ˜ç™½ï¼Œå­¦åˆ°åé¢å¦‚æœææ‡‚äº†å†è¯´å§ã€‚</p>
<ul>
<li>å®šä¹‰åœ¨å‡½æ•°ä½“å†…éƒ¨çš„å˜é‡å°†ä¸è¢«åˆå§‹åŒ–ã€‚</li>
</ul>
<h3 id="åˆ—è¡¨åˆå§‹åŒ–"><a href="#åˆ—è¡¨åˆå§‹åŒ–" class="headerlink" title="åˆ—è¡¨åˆå§‹åŒ–"></a>åˆ—è¡¨åˆå§‹åŒ–</h3><p>ç”¨èŠ±æ‹¬å·æ¥åˆå§‹åŒ–å˜é‡ï¼Œåœ¨C++ä¸­ä»¥ä¸‹å››ç§åˆå§‹åŒ–éƒ½æ˜¯æ­£ç¡®çš„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a =<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> a =&#123;<span class="number">1</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">a</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> a&#123;<span class="number">1</span>&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="4ã€æ ‡è¯†ç¬¦"><a href="#4ã€æ ‡è¯†ç¬¦" class="headerlink" title="4ã€æ ‡è¯†ç¬¦"></a>4ã€æ ‡è¯†ç¬¦</h2><p>è™½ç„¶æ„Ÿè§‰å¾ˆæ€ªå¼‚ï¼Œä½†æ˜¯<code>int _=1;</code>æ˜¯åˆæ³•çš„ã€‚</p>
<h2 id="5ã€å¤åˆç±»å‹å˜é‡"><a href="#5ã€å¤åˆç±»å‹å˜é‡" class="headerlink" title="5ã€å¤åˆç±»å‹å˜é‡"></a>5ã€å¤åˆç±»å‹å˜é‡</h2><h3 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h3><p>ä¸ºå¯¹è±¡èµ·å¦å¤–ä¸€ä¸ªåå­—ï¼Œ<strong>åŒæ—¶å¼•ç”¨å¿…é¡»è¢«åˆå§‹åŒ–ã€‚</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">a</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> &amp;b=a;</span><br><span class="line">b=<span class="number">2</span>;<span class="comment">//ç­‰åŒäº a=2;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¼•ç”¨å¹¶éå¯¹è±¡ï¼Œå¯ä»¥åªæ˜¯ç†è§£ä¸ºä¸€ä¸ªå·²å­˜åœ¨å˜é‡çš„åˆ«åã€‚</li>
<li>ä¸€æ—¦ä½¿ç”¨å¼•ç”¨ï¼Œå¼•ç”¨å¯¹è±¡å°†å’Œå¼•ç”¨çš„åˆå§‹åŒ–å˜é‡ç»‘å®šï¼Œæ— æ³•æ›´æ”¹ï¼Œå› æ­¤å¼•ç”¨å¿…é¡»åˆå§‹åŒ–ã€‚</li>
<li><strong>å¼•ç”¨åªèƒ½ç»‘å®šåœ¨å¯¹è±¡ä¸Šï¼Œè€Œä¸èƒ½ä¸æŸä¸ªå­—é¢å€¼æˆ–æŸä¸ªè®¡ç®—ç»“æœç»‘å®š</strong>ã€‚</li>
</ul>
<p><strong>æŒ‡å‘æŒ‡é’ˆçš„å¼•ç”¨ï¼š</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> i=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> *p;</span><br><span class="line"><span class="type">int</span> *&amp;r=p; <span class="comment">//æ³¨æ„è¿™é‡Œæ˜¯*&amp;r</span></span><br><span class="line">r=&amp;i;</span><br><span class="line">*r=<span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h3><p>è§„åˆ™ä¸CåŸºæœ¬ä¸€æ ·ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<h2 id="6ã€const-é™å®šç¬¦"><a href="#6ã€const-é™å®šç¬¦" class="headerlink" title="6ã€const é™å®šç¬¦"></a>6ã€const é™å®šç¬¦</h2><ul>
<li><p>ä½œç”¨ï¼šå®šä¹‰ä¸€ä¸ªå˜é‡åï¼Œå®ƒçš„å€¼ä¸èƒ½å†è¢«æ”¹å˜</p>
<p>å› æ­¤ï¼Œconstçš„å¯¹è±¡å¿…é¡»åˆå§‹åŒ–ã€‚</p>
</li>
<li><p>å½“å¤šä¸ªæ–‡ä»¶å‡ºç°äº†åŒåçš„constå˜é‡æ—¶ï¼Œè§†ä½œåˆ†åˆ«å®šä¹‰äº†ç‹¬ç«‹çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹constå¯¹è±¡åªåœ¨æœ¬æ–‡ä»¶å†…æœ‰æ•ˆã€‚ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨externå…³é”®å­—ï¼Œå…·ä½“å¯è§<a href="https://dhkkk.gitee.io/2022/08/03/C-å…³é”®å­—/">ä¸€äº›å…³é”®å­— | å°è‘£çš„BLOG (gitee.io)</a>ï¼‰</p>
<p><strong>å¯¹äºä½¿ç”¨externï¼Œå¦‚æœè¦åœ¨å¤šä¸ªæ–‡ä»¶ä¹‹é—´å…±äº«constå¯¹è±¡ï¼Œåˆ™åœ¨å®šä¹‰è¯¥å¯¹è±¡æ—¶ä¹Ÿå¿…é¡»æ·»åŠ extern</strong></p>
</li>
</ul>
<h3 id="å¯¹constå¯¹è±¡çš„å¼•ç”¨"><a href="#å¯¹constå¯¹è±¡çš„å¼•ç”¨" class="headerlink" title="å¯¹constå¯¹è±¡çš„å¼•ç”¨"></a>å¯¹constå¯¹è±¡çš„å¼•ç”¨</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> a=<span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;b1=a;<span class="comment">//å¯¹</span></span><br><span class="line"><span class="type">int</span> &amp;b2=a;<span class="comment">//é”™ï¼Œå¼•ç”¨çš„ç±»å‹å¿…é¡»ä¸å¼•ç”¨å¯¹è±¡ç±»å‹ä¸€è‡´</span></span><br></pre></td></tr></table></figure>
<p>å‡è®¾ç¬¬ä¸‰è¡Œæ“ä½œåˆæ³•ï¼Œåˆ™å¯ä»¥é€šè¿‡b2æ”¹å˜açš„å€¼ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„</p>
<ul>
<li><p>è‹¥åˆå§‹åŒ–å¼•ç”¨çš„å¯¹è±¡ä¸ºè¡¨è¾¾å¼ï¼Œ<strong>åªè¦è¯¥è¡¨è¾¾å¼çš„ç»“æœèƒ½è½¬åŒ–æˆå¼•ç”¨çš„ç±»å‹å³å¯</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a=<span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;b=a;</span><br><span class="line"><span class="comment">//å…è®¸å°†const intå‹å¼•ç”¨ç»‘å®šåˆ°æ™®é€šçš„intå¯¹è±¡ä¸Šï¼ˆå…¶ä»–æ™®é€šå˜é‡ä¹Ÿå¯ä»¥è§†æƒ…å†µè½¬åŒ–ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å› æ­¤ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹æ“ä½œ</span></span><br><span class="line"><span class="type">int</span> a=<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp;b1=a;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;b2=a;</span><br><span class="line"><span class="comment">//å¯ä»¥é€šè¿‡b1æ”¹å˜açš„å€¼ï¼Œä½†ä¸å…è®¸é€šè¿‡b2æ”¹å˜açš„å€¼</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆå’ŒconstæŒ‡é’ˆ"><a href="#æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆå’ŒconstæŒ‡é’ˆ" class="headerlink" title="æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆå’ŒconstæŒ‡é’ˆ"></a>æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆå’ŒconstæŒ‡é’ˆ</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> a=<span class="number">10</span>,b=<span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> *p=&amp;a;</span><br><span class="line">*p=b; <span class="comment">//é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹pæŒ‡å‘çš„å¯¹è±¡çš„å€¼</span></span><br><span class="line">p=&amp;b; <span class="comment">//åˆæ³•ï¼Œå¹¶æ²¡æœ‰æ›´æ”¹açš„å€¼ï¼Œåªæ˜¯æ›´æ”¹äº†ä¸€èˆ¬æŒ‡é’ˆpçš„å€¼</span></span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ä¸€ä¸‹ï¼Œä¸Šè¿°ä¸­çš„<code>int *p=&amp;a;</code>ä¹Ÿå¯ä»¥æ”¹ä¸º<code>const int *p=&amp;a;</code><strong>ä¸”äºŒè€…å®Œå…¨ä¸€è‡´</strong>ï¼ŒåŸå› ä¸åæ–‡ä¸­çš„é¡¶/åº•å±‚constæœ‰å…³</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//constæŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> a=<span class="number">10</span>,b=<span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> *<span class="type">const</span> p=&amp;a;</span><br><span class="line">p=&amp;b; <span class="comment">//é”™è¯¯ï¼ŒconstæŒ‡é’ˆä¸€æ—¦åˆå§‹åŒ–ä¾¿ä¼šä¸€ç›´æŒ‡å‘åˆå§‹åŒ–æ—¶çš„å¯¹è±¡</span></span><br><span class="line">*p=b; <span class="comment">//æ­£ç¡®ï¼Œå› ä¸ºæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸ºæ™®é€šintå‹ï¼Œå¯ä»¥æ”¹å˜</span></span><br></pre></td></tr></table></figure>
<p>å°†æŒ‡é’ˆæœ¬èº«å®šä¹‰ä¸ºconstå‹ï¼ˆä¸å¤ªå¥½ç”¨è¯­è¨€æè¿°æ„Ÿè§‰ï¼‰ï¼Œå³ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œè¯¥æŒ‡é’ˆä¾¿æ— æ³•å†æŒ‡å‘å…¶ä»–å¯¹è±¡ã€‚</p>
<p>ä¸‹é¢è¿˜æ˜¯ä¸€ä¸ªconstæŒ‡é’ˆçš„è¯´æ˜ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//constæŒ‡é’ˆ</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> a=<span class="number">10</span>,b=<span class="number">20</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> *<span class="type">const</span> p=&amp;a;</span><br><span class="line"><span class="comment">//æ­¤æ—¶på’Œ*péƒ½æ˜¯æ— æ³•æ”¹å˜çš„</span></span><br></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨constæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿæ˜¯constç±»å‹æ—¶ï¼ŒconstæŒ‡é’ˆæœ¬èº«å¿…é¡»å†æ¬¡ä½¿ç”¨ä¸€æ¬¡constï¼Œå› ä¸ºè¦ä¿æŒç±»å‹çš„ä¸€è‡´</p>
<h3 id="é¡¶-åº•å±‚const"><a href="#é¡¶-åº•å±‚const" class="headerlink" title="é¡¶/åº•å±‚const"></a>é¡¶/åº•å±‚const</h3><p>å¯¹äºæŒ‡é’ˆï¼ŒæŒ‡é’ˆæœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå®ƒä¹ŸæŒ‡å‘äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼Œ<strong>å› æ­¤ç”¨é¡¶å±‚constè¡¨ç¤ºæŒ‡é’ˆæœ¬èº«æ˜¯ä¸ªconstç±»å‹ï¼Œç”¨åº•å±‚constè¡¨ç¤ºæŒ‡é’ˆæ‰€æŒ‡çš„å¯¹è±¡æ—¶ä¸€ä¸ªconstå‹</strong>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé¡¶å±‚constå¯ä»¥è¡¨ç¤ºä»»æ„å¯¹è±¡ã€‚</p>
<ul>
<li><p>å½“const + ç±»å‹ æ—¶ï¼Œæ„ä¸ºä½¿è¿™ä¸ªç±»å‹çš„å€¼ä¸ºå¸¸é‡ï¼Œå¦‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> *p;</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œè¯¥å˜é‡æ‰€æŒ‡çš„å€¼ä¸ºintå‹ï¼Œå› æ­¤è¯¥å€¼ï¼ˆ*pï¼‰ä¸å¯è¢«ä¿®æ”¹ï¼Œä½†æ˜¯på¯ä»¥è¢«ä¿®æ”¹ã€‚</p>
</li>
<li><p>å½“const + å˜é‡ æ—¶ï¼Œæ„ä¸ºä½¿è¯¥å˜é‡ä¸ºå¸¸é‡ï¼Œå¦‚ï¼š</p>
</li>
<li><p>```c++<br>int* const p;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">  æŒ‡é’ˆå˜é‡pä¸ºå¸¸é‡ï¼Œå› æ­¤å…¶æŒ‡å‘çš„åœ°å€æ— æ³•è¢«æ”¹å˜ï¼Œä½†æ˜¯åœ°å€ä¸­çš„å€¼(*p)å¯ä»¥è¢«æ”¹å˜ã€‚</span><br><span class="line"></span><br><span class="line">## 7ã€constexprç±»å‹</span><br><span class="line"></span><br><span class="line">* å¸¸é‡è¡¨è¾¾å¼ï¼šæŒ‡å€¼ä¸ä¼šæ”¹å˜**å¹¶ä¸”åœ¨ç¼–è¯‘è¿‡ç¨‹å°±èƒ½å¾—åˆ°ç»“æœçš„è¡¨è¾¾å¼**ï¼›å­—é¢å€¼ã€ç”¨å¸¸é‡è¡¨è¾¾å¼åˆå§‹åŒ–çš„constå¯¹è±¡ä¹Ÿæ˜¯å¸¸é‡è¡¨è¾¾å¼ã€‚</span><br><span class="line"></span><br><span class="line">  ```c</span><br><span class="line">  const int i = 10;			//å­—é¢å€¼æ˜¯å¸¸é‡è¡¨è¾¾å¼</span><br><span class="line">  const int j = i+1;			//jæ˜¯å¸¸é‡è¡¨è¾¾å¼</span><br><span class="line">  int k = i;					//kä¸æ˜¯constå¯¹è±¡ï¼Œæ‰€ä»¥kä¸æ˜¯æ˜¯å¸¸é‡è¡¨è¾¾å¼</span><br><span class="line">  const int m = get_val(); 	//mçš„å€¼ç›´åˆ°è¿è¡Œæ—¶æ‰èƒ½è·å¾—ï¼Œæ‰€ä»¥mä¸æ˜¯å¸¸é‡è¡¨è¾¾æ˜¯</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨constè¿›è¡Œå£°æ˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦<strong>äººä¸ºçš„éªŒè¯</strong>èµ‹ç»™constå¯¹è±¡çš„åˆå§‹å€¼æ˜¯ä¸æ˜¯å¸¸é‡è¡¨è¾¾æ˜¯ï¼Œåœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œæœ‰æ—¶å€™å¾ˆéš¾åˆ†è¾¨ï¼Œè€Œä½¿ç”¨constexprè¿›è¡Œå£°æ˜æ—¶ï¼Œå¯ä»¥ç”±<strong>ç¼–è¯‘å™¨æ¥éªŒè¯</strong>å˜é‡æ˜¯ä¸æ˜¯å¸¸é‡è¡¨è¾¾å¼</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> n=<span class="number">10</span>;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> m=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">constexpr</span> <span class="type">int</span> i = <span class="built_in">func1</span>(<span class="number">10</span>);<span class="comment">//æ­£ç¡®ï¼Œiæ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼</span></span><br><span class="line">	<span class="keyword">constexpr</span> <span class="type">int</span> j = <span class="built_in">func1</span>(n);<span class="comment">//é”™è¯¯,nä¸ºå˜é‡ï¼Œä¸æ˜¯å­—é¢å€¼</span></span><br><span class="line">	<span class="keyword">constexpr</span> <span class="type">int</span> k = <span class="built_in">func1</span>(m+<span class="number">1</span>);<span class="comment">//æ­£ç¡®ï¼Œkæ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="constå’Œconstexprçš„åŒºåˆ«"><a href="#constå’Œconstexprçš„åŒºåˆ«" class="headerlink" title="constå’Œconstexprçš„åŒºåˆ«"></a>constå’Œconstexprçš„åŒºåˆ«</h3><ul>
<li>å¯¹äºä¿®é¥°å¯¹è±¡æ¥è¯´ï¼Œconstå¹¶æœªåŒºåˆ†å‡ºç¼–è¯‘æœŸå¸¸é‡å’Œè¿è¡ŒæœŸå¸¸é‡ï¼Œconstexpré™å®šåœ¨äº†ç¼–è¯‘æœŸå¸¸é‡</li>
<li>åœ¨constexprå£°æ˜ä¸­å¦‚æœå®šä¹‰äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œé™å®šç¬¦constexprä»…å¯¹æŒ‡é’ˆæœ‰æ•ˆï¼Œä¸æŒ‡é’ˆæ‰€æŒ‡çš„å¯¹è±¡æ— å…³ã€‚</li>
<li>constexprå°†å®ƒæ‰€å®šä¹‰çš„å¯¹è±¡ç½®ä¸ºé¡¶å±‚const</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span>*p1=<span class="literal">nullptr</span>;  			<span class="comment">//p1æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span>*p2=<span class="literal">nullptr</span>;		<span class="comment">//p2æ˜¯ä¸€ä¸ªæŒ‡å‘æ•´æ•°çš„å¸¸é‡æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">const</span> <span class="type">int</span>*p3=<span class="literal">nullptr</span>; </span><br><span class="line"><span class="comment">//p3æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„å¸¸é‡æŒ‡é’ˆï¼Œç”±äºconstexpråªå¯¹æŒ‡é’ˆæœ‰æ•ˆï¼Œéœ€è¦å†åŠ ä¸€ä¸ªåº•å±‚constæ‰å¯ä»¥é™åˆ¶æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<h2 id="8ã€å¤„ç†ç±»å‹"><a href="#8ã€å¤„ç†ç±»å‹" class="headerlink" title="8ã€å¤„ç†ç±»å‹"></a>8ã€å¤„ç†ç±»å‹</h2><h3 id="ï¼ˆ1ï¼‰ç±»å‹åˆ«å"><a href="#ï¼ˆ1ï¼‰ç±»å‹åˆ«å" class="headerlink" title="ï¼ˆ1ï¼‰ç±»å‹åˆ«å"></a>ï¼ˆ1ï¼‰ç±»å‹åˆ«å</h3><p>ç±»å‹åˆ«åæ˜¯ä¸€ä¸ª<strong>åå­—</strong>ï¼Œ<strong>æ˜¯æŸç§ç±»å‹çš„åŒä¹‰è¯</strong>ã€‚æœ‰ä¸¤ç§åŠæ³•å¯ç”¨äºå®šä¹‰ç±»å‹åˆ«åï¼š</p>
<ul>
<li><p>ä½¿ç”¨å…³é”®å­—typedefï¼Œè¯¦è§<u>ä¸€äº›å…³é”®å­— | å°è‘£çš„BLOG</u> </p>
</li>
<li><p>ä½¿ç”¨åˆ«åå£°æ˜ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> INT =<span class="type">int</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="ç±»å‹åˆ«åä¸æŒ‡é’ˆã€å¸¸é‡"><a href="#ç±»å‹åˆ«åä¸æŒ‡é’ˆã€å¸¸é‡" class="headerlink" title="ç±»å‹åˆ«åä¸æŒ‡é’ˆã€å¸¸é‡"></a>ç±»å‹åˆ«åä¸æŒ‡é’ˆã€å¸¸é‡</h4><p>æœ‰ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> abc=<span class="type">char</span>*;</span><br><span class="line"><span class="type">char</span> a=<span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> abc p=&amp;a;<span class="comment">//æ­¤å¤„ç­‰åŒäºchar *const p=&amp;a;è€Œä¸æ˜¯ const char *p=&amp;a;</span></span><br><span class="line"><span class="comment">//ä¹Ÿå°±æ˜¯è¯´æ­¤å¤„æ˜¯å¸¸é‡æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œå› æ­¤ï¼š</span></span><br><span class="line">*p=<span class="number">20</span>;<span class="comment">//åˆæ³•</span></span><br></pre></td></tr></table></figure>
<p>æ„Ÿè§‰å¯ä»¥ç›´æ¥ç†è§£ä¸ºè¿™é‡Œçš„constä¸ºé¡¶å±‚constå‹</p>
<h3 id="ï¼ˆ2ï¼‰autoç±»å‹è¯´æ˜ç¬¦"><a href="#ï¼ˆ2ï¼‰autoç±»å‹è¯´æ˜ç¬¦" class="headerlink" title="ï¼ˆ2ï¼‰autoç±»å‹è¯´æ˜ç¬¦"></a>ï¼ˆ2ï¼‰autoç±»å‹è¯´æ˜ç¬¦</h3><p>è¿™é‡Œautoå’ŒCä¸­ç”¨æ³•æœ‰æ‰€å‡ºå…¥ï¼Œåœ¨C++11æ–°æ ‡å‡†ä¸­ï¼Œautoç”¨äºè®©ç¼–è¯‘å™¨é€šè¿‡åˆå§‹å€¼æ¥æ¨ç®—å˜é‡çš„ç±»å‹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a=<span class="number">1</span>,b=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">auto</span> c=a+b;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶cçš„ç±»å‹å°±ä¸ºint</p>
<ul>
<li>autoå®šä¹‰çš„å˜é‡å¿…é¡»æœ‰åˆå§‹å€¼</li>
<li>å‚ä¸åˆå§‹åŒ–çš„å„å¯¹è±¡ç±»å‹å¿…é¡»ç›¸åŒï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
</ul>
<h4 id="åœ¨å¤åˆç±»å‹ä¸å¸¸é‡å‚ä¸çš„æƒ…å†µä¸‹ï¼š"><a href="#åœ¨å¤åˆç±»å‹ä¸å¸¸é‡å‚ä¸çš„æƒ…å†µä¸‹ï¼š" class="headerlink" title="åœ¨å¤åˆç±»å‹ä¸å¸¸é‡å‚ä¸çš„æƒ…å†µä¸‹ï¼š"></a>åœ¨å¤åˆç±»å‹ä¸å¸¸é‡å‚ä¸çš„æƒ…å†µä¸‹ï¼š</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> a=<span class="number">1</span>; &amp;a1=a;</span><br><span class="line"><span class="keyword">auto</span> b=a; <span class="comment">//bä¸ºintå‹</span></span><br><span class="line"><span class="keyword">auto</span> c=a1;<span class="comment">//cä¸ºintå‹</span></span><br><span class="line"><span class="keyword">auto</span> d=&amp;a;<span class="comment">//dä¸ºæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> e=a; <span class="comment">//é¡¶å±‚constéœ€ä¸“é—¨å£°æ˜</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>autoä¸€èˆ¬ä¼šå¿½ç•¥é¡¶å±‚const</p>
</li>
<li><p>å¯¹ä¸€ä¸ªå¸¸é‡å¯¹è±¡å–åœ°å€æ˜¯ä¸€ç§åº•å±‚const</p>
</li>
</ul>
<h3 id="ï¼ˆ3ï¼‰decltypeç±»å‹æŒ‡ç¤ºç¬¦"><a href="#ï¼ˆ3ï¼‰decltypeç±»å‹æŒ‡ç¤ºç¬¦" class="headerlink" title="ï¼ˆ3ï¼‰decltypeç±»å‹æŒ‡ç¤ºç¬¦"></a>ï¼ˆ3ï¼‰decltypeç±»å‹æŒ‡ç¤ºç¬¦</h3><p>å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶å¸Œæœ›ç”¨ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›çš„ç±»å‹å®šä¹‰è¯¥å˜é‡ï¼Œä½†æ˜¯åˆä¸æƒ³ç”¨è¯¥è¡¨è¾¾å¼çš„ç»“æœçš„å€¼åˆå§‹åŒ–å˜é‡ï¼Œä¸ºæ»¡è¶³è¿™ä¸€è¦æ±‚ï¼ŒC++11æ–°æ ‡å‡†å¼•å…¥äº†decltypeï¼Œå®ƒçš„ä½œç”¨æ˜¯é€‰æ‹©å¹¶è¿”å›æ“ä½œæ•°çš„æ•°æ®ç±»å‹ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨åˆ†æè¡¨è¾¾å¼çš„ç±»å‹ï¼Œå´ä¸å®é™…è®¡ç®—å®ƒçš„å€¼ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">decltype</span>(a) b=<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>decltype()å†…çš„å‚æ•°å¯ä»¥ä¸ºå˜é‡ã€å‡½æ•°ã€ç”šè‡³å¼•ç”¨</p>
<h4 id="decltypeå’Œå¼•ç”¨ï¼š"><a href="#decltypeå’Œå¼•ç”¨ï¼š" class="headerlink" title="decltypeå’Œå¼•ç”¨ï¼š"></a>decltypeå’Œå¼•ç”¨ï¼š</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a=<span class="number">1</span>,&amp;a1=a,*p=&amp;a;</span><br><span class="line"><span class="type">int</span> b=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">decltype</span>(a1) c=b;<span class="comment">//cä¸ºint&amp;ï¼Œä¹Ÿå°±æ˜¯å¼•ç”¨ç±»å‹</span></span><br><span class="line"><span class="keyword">decltype</span>(a1+<span class="number">0</span>) d=<span class="number">1</span>; <span class="comment">//dä¸ºintå‹ï¼ŒåŸå› æ˜¯a1+0çš„ç»“æœä¸ºintå‹</span></span><br><span class="line"><span class="keyword">decltype</span>(*p) e=b; <span class="comment">//*pçš„å€¼æŒ‰é“ç†æ¥è¯´æ˜¯1ï¼Œä¹¦ä¸Šè®²è¿™é‡Œè®²ä¸ºint&amp;å‹ï¼Œä¹Ÿå°±æ˜¯ä¸cä¸€æ ·</span></span><br></pre></td></tr></table></figure>
<p>å½“decltypeä¼ å…¥çš„å‚æ•°æ·»åŠ ä¸Šä¸€å¯¹ä»¥ä¸Šçš„æ‹¬å·åï¼Œä¾‹å¦‚decltype((a))ï¼Œ<strong>ç»“æœæ°¸è¿œä¸ºå¼•ç”¨</strong></p>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè¯†c++</title>
    <url>/2022/09/07/C++-1/</url>
    <content><![CDATA[<h1 id="è¾“å…¥ä¸è¾“å‡º"><a href="#è¾“å…¥ä¸è¾“å‡º" class="headerlink" title="è¾“å…¥ä¸è¾“å‡º"></a>è¾“å…¥ä¸è¾“å‡º</h1><ul>
<li><p><strong>iostreamåº“</strong></p>
<p>åœ¨C++ä¸­æ²¡æœ‰ä¸“é—¨å®šä¹‰çš„è¾“å…¥è¾“å‡ºï¼ˆIOï¼‰è¯­å¥ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€ä¸ªå…¨é¢çš„<strong>æ ‡å‡†åº“</strong>æ¥æä¾›IOæœºåˆ¶ç­‰åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯iostreamåº“ã€‚è€Œåœ¨iostreamåº“ä¸­åŒ…å«äº†ä¸¤ä¸ªåŸºç¡€<strong>ç±»å‹</strong>ï¼š</p>
<ul>
<li>istream(in stream)ï¼šè¾“å…¥æµ</li>
<li>ostream(out stream)ï¼šè¾“å‡ºæµ</li>
</ul>
</li>
<li><p>æµçš„</p>
</li>
<li><p><strong>IOå¯¹è±¡</strong></p>
<p>åœ¨æ ‡å‡†åº“ä¸­å®šä¹‰äº†4ä¸ªIOå¯¹è±¡ï¼Œåˆ†åˆ«ä¸º1ä¸ªistreamå‹ï¼Œ3ä¸ªostreamå‹ï¼š</p>
<ul>
<li>instreamå‹ï¼š<ul>
<li>cin(å‘éŸ³see in)ï¼šæ ‡å‡†è¾“å…¥å¯¹è±¡</li>
</ul>
</li>
<li>ostreamå‹ï¼š<ul>
<li>coutï¼šæ ‡å‡†è¾“å‡ºå¯¹è±¡</li>
<li>cerrï¼šè¾“å‡ºè­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯</li>
<li>clogï¼šè¾“å‡ºç¨‹åºè¿è¡Œæ—¶çš„ä¸€èˆ¬æ€§æ¶ˆæ¯</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è¾“å…¥è¾“å‡ºä¾‹ç¨‹ï¼š"><a href="#è¾“å…¥è¾“å‡ºä¾‹ç¨‹ï¼š" class="headerlink" title="è¾“å…¥è¾“å‡ºä¾‹ç¨‹ï¼š"></a>è¾“å…¥è¾“å‡ºä¾‹ç¨‹ï¼š</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> a,b;</span><br><span class="line">	std::cin&gt;&gt;a&gt;&gt;b;<span class="comment">//è¾“å…¥</span></span><br><span class="line">	std::cout&lt;&lt;a+b&lt;&lt;std::endl;<span class="comment">//è¾“å‡º</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢é’ˆå¯¹è¿™ä¸ªä¾‹ç¨‹è®²è§£ï¼š</p>
<ul>
<li><p>å‰ç¼€std::</p>
<p>è¿™ä¸ªå‰ç¼€æŒ‡å‡ºcinã€coutã€endléƒ½æ˜¯å®šä¹‰åœ¨åä¸ºstdçš„å‘½åç©ºé—´ä¸­çš„ã€‚ä½¿ç”¨å‘½åç©ºé—´å¯ä»¥é¿å…ä¸ç”¨æˆ·å®šä¹‰çš„åå­—å†²çªã€‚ä¸”æ ‡å‡†åº“çš„æ‰€æœ‰åå­—éƒ½æ˜¯å®šä¹‰åœ¨stdä¸­çš„ã€‚</p>
</li>
<li><h3 id="ä»è¾“å…¥æµè¯»å–æ•°æ®ï¼š"><a href="#ä»è¾“å…¥æµè¯»å–æ•°æ®ï¼š" class="headerlink" title="ä»è¾“å…¥æµè¯»å–æ•°æ®ï¼š"></a>ä»è¾“å…¥æµ<strong>è¯»å–</strong>æ•°æ®ï¼š</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a,b;</span><br><span class="line">std::cin&gt;&gt;a&gt;&gt;b;<span class="comment">//è¾“å…¥</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>è¾“å…¥è¿ç®—ç¬¦ï¼ˆ&gt;&gt;)</strong></p>
<p>è¯¥è¿ç®—ç¬¦æ¥æ”¶ä¸¤ä¸ªè¿ç®—å¯¹è±¡ï¼š</p>
<ul>
<li><p>å·¦ä¾§ï¼šå¿…é¡»ä¸ºä¸€ä¸ªostreamå‹çš„å¯¹è±¡</p>
</li>
<li><p>å³ä¾§ï¼šå­˜æ”¾è¾“å…¥çš„å€¼çš„å˜é‡</p>
</li>
</ul>
<p>è¿”å›å€¼ï¼ˆè®¡ç®—ç»“æœï¼‰ï¼š ostreamå‹çš„å¯¹è±¡ï¼ˆå·¦ä¾§è¿ç®—å¯¹è±¡ï¼‰</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢å‡ ç§å†™æ³•æ˜¯ä¸€ä¸ªæ„æ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">std::cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">/****************************/</span><br><span class="line">(std::cin&gt;&gt;a)&gt;&gt;b;</span><br><span class="line">/****************************/</span><br><span class="line">std:cin&gt;&gt;a;</span><br><span class="line">std:cin&gt;&gt;b;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h3 id="å‘è¾“å‡ºæµå†™å…¥æ•°æ®ï¼š"><a href="#å‘è¾“å‡ºæµå†™å…¥æ•°æ®ï¼š" class="headerlink" title="å‘è¾“å‡ºæµå†™å…¥æ•°æ®ï¼š"></a>å‘è¾“å‡ºæµ<strong>å†™å…¥</strong>æ•°æ®ï¼š</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">std::cout&lt;&lt;a+b&lt;&lt;std::endl;<span class="comment">//è¾“å‡º</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>è¾“å‡ºè¿ç®—ç¬¦ï¼ˆ&lt;&lt;)</strong></p>
<p>è¯¥è¿ç®—ç¬¦æ¥æ”¶ä¸¤ä¸ªè¿ç®—å¯¹è±¡ï¼š</p>
<ul>
<li>å·¦ä¾§ï¼šå¿…é¡»ä¸ºä¸€ä¸ªistreamå‹çš„å¯¹è±¡</li>
<li>å³ä¾§ï¼šè¦æ‰“å°çš„å€¼</li>
</ul>
<p>è¿”å›å€¼ï¼ˆè®¡ç®—ç»“æœï¼‰ï¼š å†™å…¥ç»™å®šå€¼çš„ostreamå‹çš„å¯¹è±¡</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢å‡ ç§å†™æ³•æ˜¯ä¸€ä¸ªæ„æ€ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">std::cout&lt;&lt;a+b&lt;&lt;std::endl;</span><br><span class="line"><span class="comment">/****************************/</span></span><br><span class="line">(std::cout&lt;&lt;a+b)&lt;&lt;std::endl;</span><br><span class="line"><span class="comment">/****************************/</span></span><br><span class="line">std::cout&lt;&lt;a+b;</span><br><span class="line">std::cout&lt;&lt;std::endl;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>endlæ“çºµç¬¦</strong> <em>(å°å†™L,ä¸æ˜¯1)</em></p>
<p>endlä¹Ÿæ˜¯è¢«å®šä¹‰åœ¨stdä¸­çš„ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œå†™å…¥endlçš„æ•ˆæœæ˜¯ç»“æŸå½“å‰è¡Œï¼ˆç±»ä¼¼cä¸­çš„\n)ï¼Œå¹¶å°†ä¸è®¾å¤‡ç›¸å…³è”çš„ç¼“å†²åŒºä¸­çš„å†…å®¹åˆ·åˆ°è®¾å¤‡ä¸­ã€‚</p>
<p>ç¼“å†²åˆ·æ–°æ“ä½œå¯ä»¥ä¿è¯ç›®å‰ä¸ºæ­¢ç¨‹åºä¸­æ‰€äº§ç”Ÿçš„æ‰€æœ‰è¾“å‡ºéƒ½çœŸæ­£çš„å†™å…¥åˆ°äº†è¾“å‡ºæµä¸­ï¼Œè€Œä¸ä»…åœç•™åœ¨å†…å­˜ä¸­ç­‰å¾…å†™å…¥æµã€‚</p>
</li>
<li><p><strong>å…³äºæ•°æ®ç¼“å†²åŒº</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> a,b=<span class="number">1</span>,c;</span><br><span class="line">	<span class="keyword">while</span>(std::cin&gt;&gt;a)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//while (getchar()!= &#x27;\n&#x27;);</span></span><br><span class="line">		std::cout&lt;&lt;<span class="string">&quot;times:&quot;</span>&lt;&lt;b++&lt;&lt;std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨ä¸€ä¸ªistreamå¯¹è±¡ä¸º<strong>æ¡ä»¶</strong>æ—¶ï¼Œå…¶æ•ˆæœå°±æ˜¯æ£€æµ‹è¾“å…¥æµå½“å‰çš„çŠ¶æ€ï¼Œå¦‚æœæµæ˜¯æœ‰æ•ˆçš„ï¼Œæ­¤æ—¶istreamå¯¹è±¡ä½¿æ¡ä»¶ä¸ºçœŸï¼Œå½“é‡åˆ°ä»¥ä¸‹æƒ…å†µæ—¶ä¸ºå‡ï¼š</p>
<ul>
<li>æ— æ•ˆè¾“å…¥ï¼šä¾‹å¦‚ä¸Šæ–¹è¾“å…¥ä¸ä¸ºintå‹ï¼ˆä¸aç±»å‹ä¸ç¬¦åˆï¼‰</li>
<li>å½“è¾“å…¥æµé‡åˆ°æ–‡ä»¶ç»“æŸç¬¦ï¼Œå¯¹äºwindowç³»ç»Ÿï¼Œ<strong>è¾“å…¥æ–‡ä»¶ç»“æŸç¬¦çš„æ–¹æ³•æ˜¯ctrl+z+\n</strong></li>
</ul>
<p>åœ¨ä¸Šæ–¹ç¨‹åºä¸­ï¼ˆå½“æ³¨é‡Šæ‰ç¬¬ä¸ƒè¡Œæ—¶ï¼‰ï¼Œå½“è¾“å…¥4 â€˜\0â€™ 5æ—¶ï¼Œtimeä¹Ÿä¼šå¯¹åº”è¾“å‡º2æ¬¡ï¼Œå³1 â€˜\nâ€™ 2 ã€‚è¿™æ˜¯å› ä¸ºå½“è¾“å…¥ä¸€æ¬¡æ€§è¾“å…¥ä¸¤ä¸ªæ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªæ•°å­˜è¿›aï¼Œç¬¬äºŒä¸ªæ•°ä¼šè¢«å­˜åœ¨æ•°æ®ç¼“å†²åŒºä¸­ç­‰å¾…ä¸‹ä¸€æ¬¡è¯»å–è¾“å…¥æµçš„æ“ä½œï¼›è‹¥æƒ³æ¸…é™¤ç¼“å†²åŒºï¼ˆæˆ–è€…è¯´æ˜¯æ¸…é›¶ï¼‰ï¼Œåªéœ€æ·»åŠ ç¬¬7è¡Œå³å¯ã€‚</p>
</li>
</ul>
</li>
</ul>
]]></content>
      <tags>
        <tag>C++å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>FreeRTOSä»»åŠ¡é—´çš„äº¤äº’æ–¹æ³•</title>
    <url>/2022/08/30/freertos%E4%BB%BB%E5%8A%A1%E9%80%9A%E7%9F%A5%E4%B8%8E%E4%BF%A1%E5%8F%B7%E9%87%8F/</url>
    <content><![CDATA[<h1 id="è¯´åœ¨å‰é¢"><a href="#è¯´åœ¨å‰é¢" class="headerlink" title="è¯´åœ¨å‰é¢"></a>è¯´åœ¨å‰é¢</h1><p>æœ¬æ¥æ˜¯æ‰“ç®—åœ¨<a href="https://www.dhksblog.top/2022/08/25/FreeRTOS-3/">FreeRTOSåœ¨CubeMXä¸­çš„ä½¿ç”¨</a>å°±æŠŠè¿™äº›å†…å®¹ç»™è®²äº†çš„ï¼Œä½†æ˜¯å­¦ä¹ çš„è¿‡ç¨‹ä¸­å‘ç°ç½‘ç»œä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½å­˜åœ¨ç€ä¸€äº›å·®å¼‚ï¼Œæ‰€ä»¥ä¸ºäº†æ›´ç³»ç»Ÿåœ°å­¦ä¹ ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿æ—¥åæŸ¥é˜…ï¼Œå°±å•ç‹¬å¼€ä¸€ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹ç›¸å…³å†…å®¹</p>
<p><strong>æ³¨ï¼šæœ¬æ–‡æ‰€æœ‰ä¾‹ç¨‹å‡ç»è¿‡æµ‹è¯•ä¸”å¯ä»¥æ­£å¸¸è¿è¡Œ</strong></p>
<h1 id="1ã€é˜Ÿåˆ—"><a href="#1ã€é˜Ÿåˆ—" class="headerlink" title="1ã€é˜Ÿåˆ—"></a>1ã€é˜Ÿåˆ—</h1><p>FreeRTOSä¸­çš„é˜Ÿåˆ—<strong>æ˜¯ä¸€ç§ç”¨äºå®ç°ã€ä»»åŠ¡ä¸ä»»åŠ¡ã€‘ï¼Œã€ä»»åŠ¡ä¸ä¸­æ–­ã€‘ä»¥åŠã€ä¸­æ–­ä¸ä»»åŠ¡ã€‘ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ã€‚</strong>æ­¤å¤–ï¼Œä»»åŠ¡ä»é˜Ÿåˆ—è¯»æ•°æ®æˆ–è€…å†™å…¥æ•°æ®åˆ°é˜Ÿåˆ—æ—¶ï¼Œéƒ½å¯èƒ½è¢«é˜»å¡ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—ä»»åŠ¡å¯ä»¥è¢«è®¾è®¡æˆåŸºäºäº‹ä»¶é©±åŠ¨çš„è¿è¡Œæ¨¡å¼ï¼Œå¤§å¤§æé«˜äº†CPUçš„æ‰§è¡Œæ•ˆç‡ã€‚é˜Ÿåˆ—æ˜¯å®ç°FreeRTOSä¸­å…¶ä»–ç‰¹æ€§çš„åŸºç¡€ç»„ä»¶ï¼Œåƒè½¯ä»¶å®šæ—¶å™¨ï¼Œä¿¡å·é‡ï¼Œäº’æ–¥é”éƒ½æ˜¯åŸºäºé˜Ÿåˆ—è€Œå®ç°çš„ã€‚</p>
<p>åœ¨æ“ä½œç³»ç»Ÿé‡Œé¢ï¼Œç›´æ¥ä½¿ç”¨å…¨å±€å˜é‡ä¼ è¾“æ•°æ®ååˆ†å±é™©ï¼Œçœ‹ä¼¼æ­£å¸¸è¿è¡Œï¼Œä½†ä¸çŸ¥é“å•¥æ—¶å€™å°±ä¼šå› ä¸ºå¯„å­˜å™¨æˆ–è€…å†…å­˜ç­‰ç­‰åŸå› å¼•èµ·å´©æºƒï¼Œæ‰€ä»¥å¼•å…¥æ¶ˆæ¯ï¼Œé˜Ÿåˆ—çš„æ¦‚å¿µã€‚</p>
<h2 id="é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§"><a href="#é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§" class="headerlink" title="é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§"></a>é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§</h2><p>é˜Ÿåˆ—æ˜¯ä¸€ç§FIFOæ“ä½œçš„æ•°æ®ç»“æ„ï¼Œå…¥é˜Ÿæ“ä½œå°±æ˜¯æŠŠä¸€ä¸ªæ–°çš„å…ƒç´ æ”¾è¿›é˜Ÿå°¾(tail)ï¼Œå‡ºé˜Ÿæ“ä½œå°±æ˜¯ä»é˜Ÿå¤´(front)å–å‡ºä¸€ä¸ªå…ƒç´ ã€‚FreeRTOSä¸­ä¹Ÿæ”¯æŒæŠŠä¸€ä¸ªå…ƒç´ æ”¾åˆ°é˜Ÿå¤´çš„æ“ä½œï¼Œè¿™ä¸ªæ“ä½œä¼š<strong>è¦†ç›–</strong>ä¹‹å‰é˜Ÿå¤´çš„å…ƒç´ ã€‚</p>
<h2 id="å…¥é˜Ÿç­–ç•¥"><a href="#å…¥é˜Ÿç­–ç•¥" class="headerlink" title="å…¥é˜Ÿç­–ç•¥"></a>å…¥é˜Ÿç­–ç•¥</h2><p>é˜Ÿåˆ—åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œä¸»è¦æœ‰ä¸¤ç§å…ƒç´ å…¥é˜Ÿå­˜å‚¨ç­–ç•¥ï¼šQueue by copy å’Œ Queue by referenceã€‚FreeRTOSçš„é˜Ÿåˆ—ä½¿ç”¨çš„æ˜¯Queue by copyå­˜å‚¨ç­–ç•¥ï¼Œè€ƒè™‘åˆ°è¿™ç§ç­–ç•¥å®ç°èµ·æ¥æ›´åŠ ç®€å•ï¼Œçµæ´»ï¼Œä¸”å®‰å…¨ã€‚</p>
<ul>
<li>Queue by copyï¼šæ•°æ®å…¥é˜Ÿçš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ˜¯æ­¤æ•°æ®çš„ä¸€ä»½æ‹·è´</li>
<li>Queue by referenceï¼šæ•°æ®é˜Ÿåˆ—çš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ˜¯æ•°æ®çš„æŒ‡é’ˆï¼Œè€Œéæ•°æ®æœ¬èº«</li>
</ul>
<h2 id="å…¥é˜Ÿå µå¡"><a href="#å…¥é˜Ÿå µå¡" class="headerlink" title="å…¥é˜Ÿå µå¡"></a>å…¥é˜Ÿå µå¡</h2><p>ä¸€ä¸ªä»»åŠ¡åœ¨å°è¯•å†™å…¥æ•°æ®åˆ°é˜Ÿåˆ—æ—¶ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªé˜»å¡æ—¶é—´ï¼Œå³ä»»åŠ¡åœ¨<strong>ç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºä½™ç©ºé—´ï¼ˆéæ»¡ï¼‰å¯å†™å‰æœ€é•¿ç­‰å¾…é˜»å¡æ—¶é—´</strong>ã€‚å½“é˜Ÿåˆ—ä¸­æœ‰ç©ºé—´å¯å†™å…¥æ—¶ï¼Œä»»åŠ¡ä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ã€‚å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…é˜Ÿåˆ—ä¸€ç›´æ˜¯æ»¡çš„ï¼Œåˆ™ç­‰å¾…æ—¶é—´åˆ°æœŸåï¼Œä»»åŠ¡ä¹Ÿä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ï¼Œä½†æ˜¯å®ƒä¼šè¿”å›ä¸€ä¸ªå†™å…¥å¤±è´¥çš„ç»“æœã€‚</p>
<p>é˜Ÿåˆ—å¯èƒ½æœ‰å¤šä¸ªwriterTaskï¼Œæ‰€ä»¥åœ¨ç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºé—²ç©ºé—´æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªä»»åŠ¡é˜»å¡ã€‚<strong>å½“é˜Ÿåˆ—æœ‰ç©ºé—²ç©ºé—´å¯å†™æ—¶ï¼Œè°ƒåº¦å™¨ä¼šä»æ‰€æœ‰é˜»å¡çš„ä»»åŠ¡ä¸­é€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªä»»åŠ¡è®©å…¶è¿›å…¥åˆ°å°±ç»ªæ€</strong>ã€‚<strong>å¦‚æœæœ€é«˜ä¼˜å…ˆçº§çš„ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™è®©ç­‰å¾…æœ€ä¹…çš„é‚£ä¸ªè¿›å…¥åˆ°å°±ç»ªæ€ã€‚</strong></p>
<h2 id="å‡ºé˜Ÿå µå¡"><a href="#å‡ºé˜Ÿå µå¡" class="headerlink" title="å‡ºé˜Ÿå µå¡"></a><strong>å‡ºé˜Ÿå µå¡</strong></h2><p>ä¸€ä¸ªä»»åŠ¡åœ¨å°è¯•ä»é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®æ—¶ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªé˜»å¡æ—¶é—´ï¼Œå³ä»»åŠ¡åœ¨ç­‰å¾…é˜Ÿåˆ—æœ‰å…ƒç´ å¯è¯»å‰æœ€é•¿ç­‰å¾…é˜»å¡æ—¶é—´ã€‚å½“é˜Ÿåˆ—ä¸­æœ‰å…ƒç´ å¯è¯»æ—¶ï¼Œä»»åŠ¡ä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ã€‚<strong>å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…é˜Ÿåˆ—ä¸€ç›´æ²¡æœ‰æ•°æ®å¯è¯»ï¼Œåˆ™ç­‰å¾…æ—¶é—´åˆ°æœŸåï¼Œä»»åŠ¡ä¹Ÿä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ï¼Œä½†æ˜¯å®ƒä¼šè¿”å›ä¸€ä¸ªè¯»å–å¤±è´¥çš„ç»“æœ</strong>ã€‚</p>
<p>é˜Ÿåˆ—å¯èƒ½æœ‰å¤šä¸ªreader Taskï¼Œæ‰€ä»¥åœ¨ç­‰å¾…é˜Ÿåˆ—æœ‰æ•°æ®å¯è¯»æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªä»»åŠ¡é˜»å¡ã€‚<strong>å½“é˜Ÿåˆ—æœ‰æ•°æ®å¯è¯»æ—¶ï¼Œè°ƒåº¦å™¨ä¼šä»æ‰€æœ‰é˜»å¡çš„ä»»åŠ¡ä¸­é€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªä»»åŠ¡è®©å…¶è¿›å…¥åˆ°å°±ç»ªæ€ã€‚å¦‚æœæœ€é«˜ä¼˜å…ˆçº§çš„ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™è®©ç­‰å¾…æœ€ä¹…çš„é‚£ä¸ªè¿›å…¥åˆ°å°±ç»ªæ€ã€‚</strong></p>
<h2 id="ç›¸å…³APIå‡½æ•°"><a href="#ç›¸å…³APIå‡½æ•°" class="headerlink" title="ç›¸å…³APIå‡½æ•°"></a>ç›¸å…³APIå‡½æ•°</h2><ul>
<li><p>é˜Ÿåˆ—åˆ›å»ºï¼ˆè‹¥ä½¿ç”¨cubemxåˆ™åªç”¨ç‚¹ç‚¹ç‚¹ï¼Œä¸ç”¨å†ç”¨å‡½æ•°åˆ›å»ºï¼Œæ‰€æœ‰åˆ›å»ºç±»å‡½æ•°åŒç†ï¼‰</p>
<p>ä½¿ç”¨xQueueCreate()å†…æ ¸å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„1å­˜å‚¨ç©ºé—´ä»FreeRTOS heapä¸­åˆ†é…ã€‚åœ¨ä½¿ç”¨xQueueCreate()åˆ›å»ºé˜Ÿåˆ—æ—¶ï¼Œå¦‚æœFreeRTOS heapä¸­æ²¡æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´åˆ†é…ç»™å½“å‰é˜Ÿåˆ—ï¼Œåˆ™å‡½æ•°è¿”å›NULLã€‚å¦‚æœåˆ›å»ºæˆåŠŸï¼Œåˆ™è¿”å›é˜Ÿåˆ—çš„å¥æŸ„(QueueHandle_tç±»å‹)</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">QueueHandle_t xQueueCreate( UBaseType_t uxQueueLength, UBaseType_t uxItemSize );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>uxQueueLength</strong>ï¼šæŒ‡å®šé˜Ÿåˆ—çš„é•¿åº¦ï¼Œå³æœ€å¤šå¯ä»¥å­˜æ”¾çš„å…ƒç´ ä¸ªæ•°<br><strong>uxItemSize</strong>ï¼šé˜Ÿåˆ—ä¸­å­˜å‚¨çš„å…ƒç´ çš„å¤§å°ï¼ˆå ç”¨çš„å­—èŠ‚æ•°ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">è¿”å›NULLä»£è¡¨åˆ›å»ºå¤±è´¥ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å †ç©ºé—´æ¥åˆ›å»ºå½“å‰é˜Ÿåˆ—ï¼›åˆ›å»ºæˆåŠŸåˆ™è¿”å›é˜Ÿåˆ—çš„å¥æŸ„</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>å…ƒç´ å…¥é˜Ÿ</p>
<p>ä½¿ç”¨xQueueSendToBack()å‡½æ•°æ¥å‘é˜Ÿå°¾å­˜æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œä½¿ç”¨xQueueSend()å‡½æ•°æ¥å‘é˜Ÿé¦–å­˜æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œä¸¤ä¸ªå‡½æ•°ç”¨æ³•ä¸€æ ·</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">BaseType_t xQueueSendToBack( QueueHandle_t xQueue,<br>                                                                        const void * pvItemToQueue,<br>                                                       TickType_t xTicksToWait );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>xQueue</strong>ï¼šç›®æ ‡é˜Ÿåˆ—çš„å¥æŸ„<br><strong>pvItemToQueue</strong>ï¼šå…¥é˜Ÿå…ƒç´ çš„æŒ‡é’ˆã€‚é˜Ÿåˆ—å°†å­˜å‚¨æ­¤æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®çš„å¤‡ä»½<br><strong>xTicksToWait</strong>ï¼šæŒ‡å®šç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºé—´å¯ä»¥å®¹çº³æ–°å…ƒç´ å…¥é˜Ÿçš„æœ€é•¿ç­‰å¾…ï¼ˆé˜»å¡ï¼‰æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">å½“å…ƒç´ æˆåŠŸå…¥é˜Ÿæ—¶è¿”å›pdPASSï¼Œå› ä¸ºé˜Ÿåˆ—æ»¡è€Œæ— æ³•å…¥é˜Ÿæ—¶è¿”å›errQUEUE_FULLï¼ˆè¶…æ—¶åï¼‰</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>æŸ¥è¯¢é˜Ÿåˆ—å…ƒç´ ä¸ªæ•°</p>
<p>ä½¿ç”¨å†…æ ¸å‡½æ•°uxQueueMessagesWaiting()æ¥è·å–é˜Ÿåˆ—ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ </p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">UBaseType_t uxQueueMessagesWaiting( QueueHandle_t xQueue );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>xQueue</strong>ï¼šé˜Ÿåˆ—çš„å¥æŸ„</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œè¿”å›0ä»£è¡¨é˜Ÿåˆ—ä¸ºç©º</td>
</tr>
</tbody>
</table>
</div>
<p>æŒ‰é”®ä¾‹ç¨‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">task1</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//ä½ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  BaseType_t result; </span><br><span class="line">  <span class="type">uint8_t</span> dat[]=<span class="string">&quot;666\r\n&quot;</span>;</span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">	<span class="keyword">if</span>(HAL_GPIO_ReadPin(key_1_GPIO_Port,key_1_Pin == GPIO_PIN_SET)) <span class="comment">//æ£€æµ‹æŒ‰é”®</span></span><br><span class="line">	&#123;</span><br><span class="line">		result= xQueueSendToBack(myQueue01Handle,dat,portMAX_DELAY); <span class="comment">//å°†å…ƒç´ datæ”¾è‡³é˜Ÿå°¾</span></span><br><span class="line">		<span class="keyword">if</span>(result==pdPASS) <span class="comment">//æ”¾ç½®æˆåŠŸè¿”å›pdPASS</span></span><br><span class="line">		&#123;</span><br><span class="line">			HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_RESET);<span class="comment">//ç‚¹äº®ç»¿ç¯</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">   	osDelay(<span class="number">5</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">task2</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//é«˜ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  BaseType_t result;</span><br><span class="line">  <span class="type">uint8_t</span> datbuf[<span class="number">10</span>]; <span class="comment">//éšä¾¿å®šä¹‰ä¸ªç¼“å†²åŒºå°±å¯ä»¥ï¼Œç”¨äºå­˜æ”¾å–å‡ºçš„å…ƒç´ </span></span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">	result=xQueueReceive(myQueue01Handle,datbuf,portMAX_DELAY);<span class="comment">//å–å‡ºå…ƒç´ æ”¾å…¥datbufä¸­</span></span><br><span class="line">	<span class="keyword">if</span>(result==pdPASS)<span class="comment">//è¯»å–æˆåŠŸè¿”å›pdPASS</span></span><br><span class="line">	&#123;</span><br><span class="line">		HAL_GPIO_WritePin(led_r_GPIO_Port,led_r_Pin,GPIO_PIN_RESET);<span class="comment">//ç‚¹äº®çº¢ç¯</span></span><br><span class="line">	&#125;</span><br><span class="line">	osDelay(<span class="number">10</span>);</span><br><span class="line">  &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2ã€ä»»åŠ¡é€šçŸ¥"><a href="#2ã€ä»»åŠ¡é€šçŸ¥" class="headerlink" title="2ã€ä»»åŠ¡é€šçŸ¥"></a>2ã€ä»»åŠ¡é€šçŸ¥</h1><p><em>åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šåšå®¢å¯¹äºä»»åŠ¡é€šçŸ¥ä»‹ç»çš„å‡½æ•°éƒ½ä¸ä¸€æ ·ï¼Œæˆ‘è‡ªå·±ä¹Ÿå®éªŒäº†å¾ˆå¤šï¼Œå°±æŠŠæˆ‘è¯•éªŒè¿‡çš„å¯è¡Œçš„å‡½æ•°éƒ½æ€»ç»“ä¸€éï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„éœ€è¦é€‰æ‹©ç›¸å…³å‡½æ•°ï¼ˆå…¶å®å‡½æ•°åŠŸèƒ½åŸºæœ¬å·®ä¸å¤šï¼Œä½†æ˜¯åŸç†ä¸ä¸€æ ·ï¼‰</em></p>
<p>æ¯ä¸ªRTOSä»»åŠ¡éƒ½æœ‰ä¸€ä¸ª32ä½çš„é€šçŸ¥å€¼ï¼Œä»»åŠ¡åˆ›å»ºæ—¶ï¼Œè¿™ä¸ªå€¼è¢«åˆå§‹åŒ–ä¸º0ã€‚RTOSä»»åŠ¡é€šçŸ¥ç›¸å½“äºç›´æ¥å‘ä»»åŠ¡å‘é€ä¸€ä¸ªäº‹ä»¶ï¼Œæ¥æ”¶åˆ°é€šçŸ¥çš„ä»»åŠ¡å¯ä»¥è§£é™¤é˜»å¡çŠ¶æ€ï¼Œ<strong>å‰ææ˜¯è¿™ä¸ªé˜»å¡äº‹ä»¶æ˜¯å› ç­‰å¾…é€šçŸ¥è€Œå¼•èµ·çš„</strong>ã€‚å‘é€é€šçŸ¥çš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥å¯é€‰çš„æ”¹å˜æ¥æ”¶ä»»åŠ¡çš„é€šçŸ¥å€¼ã€‚</p>
<p>ç›¸å¯¹äºç”¨å‰å¿…é¡»åˆ†åˆ«åˆ›å»ºé˜Ÿåˆ—ã€äºŒè¿›åˆ¶ä¿¡å·é‡ã€è®¡æ•°ä¿¡å·é‡æˆ–äº‹ä»¶ç»„çš„æƒ…å†µï¼Œä½¿ç”¨ä»»åŠ¡é€šçŸ¥æ˜¾ç„¶æ›´çµæ´»ã€‚æ›´å¥½çš„æ˜¯ï¼Œç›¸æ¯”äºä½¿ç”¨ä¿¡å·é‡è§£é™¤ä»»åŠ¡é˜»å¡ï¼Œä½¿ç”¨ä»»åŠ¡é€šçŸ¥å¯ä»¥å¿«45%ã€ä½¿ç”¨æ›´å°‘çš„RAMã€‚</p>
<p><strong>ä¸‹é¢ä»‹ç»çš„å‡½æ•°å¤§ç±»éƒ½å¯ä»¥å®ç°ä»»åŠ¡é€šçŸ¥çš„åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©</strong></p>
<h2 id="ä¸€ã€xTaskå‡½æ•°"><a href="#ä¸€ã€xTaskå‡½æ•°" class="headerlink" title="ä¸€ã€xTaskå‡½æ•°"></a>ä¸€ã€xTaskå‡½æ•°</h2><h3 id="å‘é€å‡½æ•°ï¼ˆ1ï¼‰"><a href="#å‘é€å‡½æ•°ï¼ˆ1ï¼‰" class="headerlink" title="å‘é€å‡½æ•°ï¼ˆ1ï¼‰"></a>å‘é€å‡½æ•°ï¼ˆ1ï¼‰</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">BaseType_t xTaskNotify( TaskHandle_txTaskToNotify,<br>                          uint32_t ulValue,<br>                           eNotifyAction eAction);</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">xTaskToNotifyï¼šè¢«é€šçŸ¥çš„ä»»åŠ¡å¥æŸ„<br>ulValueï¼š é€šçŸ¥æ›´æ–°å€¼<br> eAction:æšä¸¾ç±»å‹ï¼ŒæŒ‡æ˜æ›´æ–°é€šçŸ¥å€¼çš„æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">æˆåŠŸåˆ™è¿”å›pdPASS</td>
</tr>
</tbody>
</table>
</div>
<p>eActionå…·ä½“è¯´æ˜ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">æšä¸¾æˆå‘˜</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">eNoAction</td>
<td style="text-align:center">å‘é€é€šçŸ¥ä½†ä¸æ›´æ–°é€šçŸ¥å€¼ï¼Œæ„å‘³ç€ulValueæœªä½¿ç”¨</td>
</tr>
<tr>
<td style="text-align:center">eSetBits</td>
<td style="text-align:center">è¢«é€šçŸ¥ä»»åŠ¡å€¼èµ‹å€¼æŒ‰ä½æˆ–èµ‹å€¼ulValue</td>
</tr>
<tr>
<td style="text-align:center">elncrement</td>
<td style="text-align:center">è¢«é€šçŸ¥ä»»åŠ¡çš„é€šçŸ¥å€¼++</td>
</tr>
<tr>
<td style="text-align:center">eSetValueWithOverwrite</td>
<td style="text-align:center">è¢«é€šçŸ¥ä»»åŠ¡å€¼èµ‹å€¼ä¸ºulValue</td>
</tr>
<tr>
<td style="text-align:center">eSetValueWithoutOverwrite</td>
<td style="text-align:center">å¦‚æœè¢«é€šçŸ¥çš„ä»»åŠ¡è¿˜æ²¡å–èµ°ä¸Šä¸€ä¸ªé€šçŸ¥çš„æƒ…å†µä¸‹ï¼Œåˆå‘è¢«é€šçŸ¥ä»»åŠ¡å‘é€ä¸€ä¸ªæ–°çš„é€šçŸ¥ï¼Œåˆ™æ–°é€šçŸ¥å€¼è¢«ä¸¢å¼ƒï¼Œä¸”xTaskNotify()ä¼šè¿”å›pdFALSE</td>
</tr>
</tbody>
</table>
</div>
<img src="/images/loading.png" data-original="/2022/08/30/freertos%E4%BB%BB%E5%8A%A1%E9%80%9A%E7%9F%A5%E4%B8%8E%E4%BF%A1%E5%8F%B7%E9%87%8F/eaction.jpg" class title="This is an image"> 
<h3 id="å‘é€å‡½æ•°ï¼ˆ2ï¼‰"><a href="#å‘é€å‡½æ•°ï¼ˆ2ï¼‰" class="headerlink" title="å‘é€å‡½æ•°ï¼ˆ2ï¼‰"></a>å‘é€å‡½æ•°ï¼ˆ2ï¼‰</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">BaseType_t xTaskNotifyGive(TaskHandle_t xTaskToNotify );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">xTaskToNotifyï¼šè¢«é€šçŸ¥çš„ä»»åŠ¡å¥æŸ„</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">æˆåŠŸåˆ™è¿”å›pdPASS</td>
</tr>
</tbody>
</table>
</div>
<p>å…¶å®è¿™æ˜¯ä¸€ä¸ªå®ï¼Œæœ¬è´¨ä¸Šç›¸å½“äºxTaskNotify( ( xTaskToNotify ), ( 0 ), <strong>eIncrement</strong> )åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨APIå‡½æ•°ulTaskNotifyTake()æ¥ç­‰å¾…é€šçŸ¥ï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨APIå‡½æ•°xTaskNotifyWait()</p>
<p>æ­¤å‡½æ•°ä¸å¯ä»¥åœ¨ä¸­æ–­æœåŠ¡ä¾‹ç¨‹ä¸­è°ƒç”¨ï¼Œä¸­æ–­ä¿æŠ¤ç­‰ä»·å‡½æ•°ä¸ºvTaskNotifyGiveFromISR()</p>
<h3 id="æ¥æ”¶å‡½æ•°ï¼ˆ1ï¼‰"><a href="#æ¥æ”¶å‡½æ•°ï¼ˆ1ï¼‰" class="headerlink" title="æ¥æ”¶å‡½æ•°ï¼ˆ1ï¼‰"></a>æ¥æ”¶å‡½æ•°ï¼ˆ1ï¼‰</h3><p><u><strong>æ³¨æ„ï¼Œæ­¤å¤„è®²åˆ°çš„æ¥æ”¶å‡½æ•°åº”ä¸ä¸Šé¢è®²åˆ°çš„å‘é€å‡½æ•°é…å¯¹ï¼Œä¾‹å¦‚ï¼šä½¿ç”¨å‘é€å‡½æ•°ï¼ˆ1ï¼‰ï¼Œæ¥æ”¶é€šçŸ¥ä¹Ÿè¦ä½¿ç”¨æ¥æ”¶å‡½æ•°ï¼ˆ1ï¼‰</strong></u></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">BaseType_t xTaskNotifyWait( uint32_tulBits  ToClearOnEntry,<br>                                                      uint32_tulBits  ToClearOnExit,<br>                                                          uint32_t*  pulNotificationValue,<br>                                    TickType_t  xTicksToWait );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">è§ä¸‹æ–¹</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">æˆåŠŸåˆ™è¿”å›pdPASS</td>
</tr>
</tbody>
</table>
</div>
<p>å…³äºå‚æ•°ï¼š</p>
<ul>
<li>ulBitsToClearOnEntryï¼šåœ¨ä½¿ç”¨é€šçŸ¥ä¹‹å‰ï¼Œå…ˆå°†ä»»åŠ¡çš„é€šçŸ¥å€¼ä¸å‚æ•°ulBitsToClearOnEntryçš„æŒ‰ä½å–åå€¼æŒ‰ä½ä¸æ“ä½œã€‚è®¾ç½®å‚æ•°ulBitsToClearOnEntryä¸º0xFFFFFFFF(ULONG_MAX)ï¼Œè¡¨ç¤ºæ¸…é›¶ä»»åŠ¡é€šçŸ¥å€¼ã€‚<ul>
<li><strong>ä½†æ˜¯åœ¨å®é™…è°ƒè¯•è¿‡ç¨‹ä¸­æ„Ÿè§‰ç»™0x00å’Œ0xFFFFFFFFåœ¨ä½¿ç”¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œæ‰€ä»¥å°±ç»™0xFFFFFFFFå°±å¯ä»¥</strong></li>
</ul>
</li>
</ul>
<img src="/images/loading.png" data-original="/2022/08/30/freertos%E4%BB%BB%E5%8A%A1%E9%80%9A%E7%9F%A5%E4%B8%8E%E4%BF%A1%E5%8F%B7%E9%87%8F/qufan1.jpg" class title="This is an image"> 
<ul>
<li>*ulBitsToClearOnExitï¼šåœ¨å‡½æ•°xTaskNotifyWait()é€€å‡ºå‰ï¼Œå°†ä»»åŠ¡çš„é€šçŸ¥å€¼ä¸å‚æ•°ulBitsToClearOnExitçš„æŒ‰ä½å–åå€¼æŒ‰ä½ä¸æ“ä½œã€‚è®¾ç½®å‚æ•°ulBitsToClearOnExitä¸º0xFFFFFFFF(ULONG_MAX)ï¼Œè¡¨ç¤ºæ¸…é›¶ä»»åŠ¡é€šçŸ¥å€¼ã€‚<ul>
<li><strong>ä½¿ç”¨åŒä¸Šï¼Œé»˜è®¤0xFFFFFFFFå°±å¯ä»¥</strong></li>
</ul>
</li>
</ul>
<img src="/images/loading.png" data-original="/2022/08/30/freertos%E4%BB%BB%E5%8A%A1%E9%80%9A%E7%9F%A5%E4%B8%8E%E4%BF%A1%E5%8F%B7%E9%87%8F/qufan2.jpg" class title="This is an image"> 
<ul>
<li>pulNotificationValueï¼šç”¨äºå‘å¤–å›ä¼ ä»»åŠ¡çš„é€šçŸ¥å€¼ã€‚è¿™ä¸ªé€šçŸ¥å€¼åœ¨å‚æ•°ulBitsToClearOnExitèµ·ä½œç”¨å‰å°†é€šçŸ¥å€¼æ‹·è´åˆ°<em>pulNotificationValueä¸­ï¼ˆ<em>*éœ€é¢å¤–å®šä¹‰ä¸€ä¸ªç¼“å†²åŒº</em></em>ï¼‰ã€‚å¦‚æœä¸éœ€è¦è¿”å›ä»»åŠ¡çš„é€šçŸ¥å€¼ï¼Œè¿™é‡Œè®¾ç½®æˆNULLã€‚</li>
<li>xTicksToWaitï¼šå› ç­‰å¾…é€šçŸ¥è€Œè¿›å…¥é˜»å¡çŠ¶æ€çš„æœ€å¤§æ—¶é—´ã€‚æ—¶é—´å•ä½ä¸ºç³»ç»ŸèŠ‚æ‹å‘¨æœŸã€‚å®pdMS_TO_TICKSç”¨äºå°†æŒ‡å®šçš„æ¯«ç§’æ—¶é—´è½¬åŒ–ä¸ºç›¸åº”çš„ç³»ç»ŸèŠ‚æ‹æ•°ã€‚</li>
</ul>
<h3 id="æ¥æ”¶å‡½æ•°ï¼ˆ2ï¼‰"><a href="#æ¥æ”¶å‡½æ•°ï¼ˆ2ï¼‰" class="headerlink" title="æ¥æ”¶å‡½æ•°ï¼ˆ2ï¼‰"></a>æ¥æ”¶å‡½æ•°ï¼ˆ2ï¼‰</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">uint32_t ulTaskNotifyTake( BaseType_t  xClearCountOnExit,<br>                                TickType_t   xTicksToWait );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">xClearCountOnExitï¼šå¦‚æœè¯¥å‚æ•°ä¸ºpdFALSEï¼Œåˆ™APIå‡½æ•°xTaskNotifyTake()é€€å‡ºå‰ï¼Œå°†ä»»åŠ¡çš„é€šçŸ¥å€¼å‡1ï¼›å¦‚æœè¯¥å‚æ•°è®¾ç½®ä¸ºpdTRUEï¼Œåˆ™APIå‡½æ•°xTaskNotifyTake()é€€å‡ºå‰ï¼Œå°†ä»»åŠ¡é€šçŸ¥å€¼æ¸…é›¶ã€‚<br>xTicksToWaitï¼šå› ç­‰å¾…é€šçŸ¥è€Œè¿›å…¥é˜»å¡çŠ¶æ€çš„æœ€å¤§æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">æˆåŠŸåˆ™è¿”å›pdPASS</td>
</tr>
</tbody>
</table>
</div>
<h3 id="ä¸Šä¾‹ç¨‹ï¼è€è§„çŸ©æŒ‰é”®-led"><a href="#ä¸Šä¾‹ç¨‹ï¼è€è§„çŸ©æŒ‰é”®-led" class="headerlink" title="ä¸Šä¾‹ç¨‹ï¼è€è§„çŸ©æŒ‰é”®+led"></a>ä¸Šä¾‹ç¨‹ï¼è€è§„çŸ©æŒ‰é”®+led</h3><p>å‘é€å‡½æ•°ï¼ˆ1ï¼‰+æ¥æ”¶å‡½æ•°ï¼ˆ1ï¼‰</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> event1 0x0001&lt;&lt;1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> event2 0x0001&lt;&lt;2</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">task1</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//ä½ä¼˜å…ˆçº§</span></span><br><span class="line">&#123;</span><br><span class="line">	BaseType_t result;</span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">		<span class="keyword">if</span>(HAL_GPIO_ReadPin(key_1_GPIO_Port,key_1_Pin) == GPIO_PIN_SET)<span class="comment">//æŒ‰é”®æ£€æµ‹</span></span><br><span class="line">		&#123;</span><br><span class="line">			result=  xTaskNotify(task2Handle,event1,<span class="number">4</span>);<span class="comment">//ç›´æ¥æ•°å­—ä»£æ›¿æšä¸¾æˆå‘˜</span></span><br><span class="line">			<span class="keyword">if</span>(result==pdPASS)</span><br><span class="line">			&#123;</span><br><span class="line">				HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_RESET);<span class="comment">//ç»¿ç¯</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(HAL_GPIO_ReadPin(key_2_GPIO_Port,key_2_Pin) == GPIO_PIN_SET)<span class="comment">//æŒ‰é”®æ£€æµ‹</span></span><br><span class="line">		&#123;</span><br><span class="line">			result=  xTaskNotify(task2Handle,event2,<span class="number">4</span>);<span class="comment">//ç›´æ¥æ•°å­—ä»£æ›¿æšä¸¾æˆå‘˜</span></span><br><span class="line">			<span class="keyword">if</span>(result==pdPASS)</span><br><span class="line">			&#123;</span><br><span class="line">				HAL_GPIO_WritePin(led_b_GPIO_Port,led_b_Pin,GPIO_PIN_RESET);<span class="comment">//è“ç¯</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		osDelay(<span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">task2</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span><span class="comment">//é«˜ä¼˜å…ˆçº§</span></span><br><span class="line">&#123;</span><br><span class="line">	BaseType_t result;</span><br><span class="line">	<span class="type">uint32_t</span> ulNotifiedValue; <span class="comment">//å­˜æ”¾ä»»åŠ¡é€šçŸ¥å€¼çš„ç¼“å†²åŒº</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">		result=xTaskNotifyWait(<span class="number">0xFFFFFFFF</span>, <span class="number">0xFFFFFFFF</span>,&amp;ulNotifiedValue, portMAX_DELAY);</span><br><span class="line">		<span class="keyword">if</span>(result==pdPASS)</span><br><span class="line">		&#123;</span><br><span class="line">			HAL_GPIO_WritePin(led_r_GPIO_Port,led_r_Pin,GPIO_PIN_RESET);<span class="comment">//çº¢ç¯</span></span><br><span class="line">		&#125;</span><br><span class="line">      	<span class="keyword">if</span>(ulNotifiedValue&amp;event1)</span><br><span class="line">		&#123;</span><br><span class="line">			HAL_GPIO_WritePin(led_r_GPIO_Port,led_r_Pin,GPIO_PIN_SET);</span><br><span class="line">			HAL_GPIO_WritePin(led_b_GPIO_Port,led_b_Pin,GPIO_PIN_SET);</span><br><span class="line">			HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_SET);<span class="comment">//å…¨ç­</span></span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">if</span>(ulNotifiedValue&amp;event2)</span><br><span class="line">		&#123;</span><br><span class="line">			HAL_GPIO_WritePin(led_r_GPIO_Port,led_r_Pin,GPIO_PIN_RESET);</span><br><span class="line">			HAL_GPIO_WritePin(led_b_GPIO_Port,led_b_Pin,GPIO_PIN_RESET);</span><br><span class="line">			HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_RESET);<span class="comment">//å…¨äº®</span></span><br><span class="line">		&#125;</span><br><span class="line"> <span class="comment">/* </span></span><br><span class="line"><span class="comment"> æ•´ä½“é€»è¾‘ï¼š</span></span><br><span class="line"><span class="comment"> æŒ‰é”®1æŒ‰ä¸‹-&gt;ç»¿ç¯äº®-&gt;çº¢ç¯äº®-&gt;å…¨ç­</span></span><br><span class="line"><span class="comment"> æŒ‰é”®2æŒ‰ä¸‹-&gt;è“ç¯äº®-&gt;çº¢ç¯äº®-&gt;å…¨ç­</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> è¿™é‡Œå¯¹äºé€šçŸ¥å€¼çš„åˆ¤æ–­å¯ä»¥è®©ç”¨æˆ·çŸ¥é“æ˜¯å“ªä¸ªä»»åŠ¡é€šçŸ¥å‡½æ•°è§¦å‘äº†è¿™æ¬¡ä»»åŠ¡æ¥æ”¶ï¼Œæ„Ÿè§‰éå¸¸å¥½ç”¨ï¼ï¼ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">		osDelay(<span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼š</p>
<p>å‘é€å‡½æ•°ï¼ˆ2ï¼‰+æ¥æ”¶å‡½æ•°ï¼ˆ2ï¼‰å°±ä¸å•ç‹¬å†™äº†ï¼ŒåŸºæœ¬åŒç†ï¼Œåªæ˜¯æ¥æ”¶å‡½æ•°ï¼ˆ2ï¼‰æ— æ³•å¯¹é€šçŸ¥å€¼è¿›è¡Œåˆ¤æ–­ï¼Œä½†æ˜¯æ•´ä½“æ›´æ–¹ä¾¿å¿«æ·</p>
<h2 id="äºŒã€oså‡½æ•°"><a href="#äºŒã€oså‡½æ•°" class="headerlink" title="äºŒã€oså‡½æ•°"></a>äºŒã€oså‡½æ•°</h2><h3 id="å‘æŒ‡å®šä»»åŠ¡å‘é€ä»»åŠ¡é€šçŸ¥"><a href="#å‘æŒ‡å®šä»»åŠ¡å‘é€ä»»åŠ¡é€šçŸ¥" class="headerlink" title="å‘æŒ‡å®šä»»åŠ¡å‘é€ä»»åŠ¡é€šçŸ¥"></a>å‘æŒ‡å®šä»»åŠ¡å‘é€ä»»åŠ¡é€šçŸ¥</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‡½æ•°</strong></th>
<th style="text-align:center"><strong>int32_t osSignalSet (osThreadId thread_id, int32_t signal)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>thread_idï¼š</strong> æ¥æ”¶é€šçŸ¥çš„ä»»åŠ¡ID<br><strong>signalï¼š</strong>ä»»åŠ¡é€šçŸ¥å€¼ï¼ˆæŒ‰ä½æ“ä½œæ•°å­—ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">é”™è¯¯ç </td>
</tr>
</tbody>
</table>
</div>
<h3 id="ç­‰å¾…ä»»åŠ¡é€šçŸ¥"><a href="#ç­‰å¾…ä»»åŠ¡é€šçŸ¥" class="headerlink" title="ç­‰å¾…ä»»åŠ¡é€šçŸ¥"></a>ç­‰å¾…ä»»åŠ¡é€šçŸ¥</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‡½æ•°</strong></th>
<th style="text-align:center"><strong>osEvent osSignalWait (int32_t signals, uint32_t millisec)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">signalsï¼š æ¥æ”¶å®Œæˆåç­‰å¾…è¢«æ¸…é›¶çš„æ•°æ®ä½(0x0001\</td>
<td>0x0002=0x003)<br><strong>millisecï¼š</strong> ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç³»ç»ŸèŠ‚æ‹å‘¨æœŸ</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">é”™è¯¯ç </td>
</tr>
</tbody>
</table>
</div>
<h3 id="ä¾‹ç¨‹ï¼ŒæŒ‰é”®-led"><a href="#ä¾‹ç¨‹ï¼ŒæŒ‰é”®-led" class="headerlink" title="ä¾‹ç¨‹ï¼ŒæŒ‰é”®+led"></a>ä¾‹ç¨‹ï¼ŒæŒ‰é”®+led</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> event1 0x0001</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">task1</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//ä½ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN led_G */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">		<span class="keyword">if</span>(HAL_GPIO_ReadPin(key_1_GPIO_Port,key_1_Pin == GPIO_PIN_SET))</span><br><span class="line">		&#123;</span><br><span class="line">			osSignalSet(task2Handle,event1);</span><br><span class="line">		&#125;	</span><br><span class="line">		osDelay(<span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* USER CODE END led_G */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">task2</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//é«˜ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN led_B */</span></span><br><span class="line">	osEvent event;	</span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">	event = osSignalWait(event1,osWaitForever);  </span><br><span class="line">	<span class="keyword">if</span>(event.status == osEventSignal)  </span><br><span class="line">	&#123;</span><br><span class="line">		HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_RESET);</span><br><span class="line">	&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œtask2å¯ä»¥ä¸ç”¨é¢å¤–åœ¨å¾ªç¯ä¸­æ·»åŠ å µå¡ï¼Œå› ä¸ºwaitå‡½æ•°æœ¬èº«è‡ªå¸¦å µå¡ï¼Œ<strong>å…¶å µå¡çš„è§£é™¤æ˜¯åœ¨osSignalSetå‡½æ•°çš„ä½œç”¨ä¹‹åçš„ç¬é—´ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ‰§è¡Œå®ŒosSignalSet(task2Handle,event1)åtask2ä¼šç›´æ¥æŠ¢å task1</strong></p>
<p><strong>è€ŒxTaskå‡½æ•°ä¸åŒäºoså‡½æ•°ï¼ŒxTaskå‡½æ•°æ˜¯åœ¨task1æ‰§è¡Œå®Œåæ‰ä¼šè¿›å…¥task2ï¼Œè¿™ç‚¹è¯·åŠ¡å¿…è®°ä½ï¼ŒäºŒè€…é€šçŸ¥åŸç†ä¸åŒï¼Œæ‰€ä»¥æ ¹æ®ä½¿ç”¨æƒ…å†µé€‰æ‹©ä½¿ç”¨xTaskå‡½æ•°è¿˜æ˜¯oså‡½æ•°</strong></p>
<h1 id="3ã€ä¿¡å·é‡"><a href="#3ã€ä¿¡å·é‡" class="headerlink" title="3ã€ä¿¡å·é‡"></a>3ã€ä¿¡å·é‡</h1><p>ä¿¡å·é‡åŒæ ·æ˜¯ä¸€ç§ä»»åŠ¡ä¹‹é—´äº¤äº’çš„å‡½æ•°ï¼Œä½†æ˜¯å°±æˆ‘æŒ‰ç…§ç½‘ä¸Šæ•™ç¨‹ä½¿ç”¨è¿‡åæ„Ÿè§‰ã€‚ã€‚ã€‚ä¸å¦‚é˜Ÿåˆ—å’Œä»»åŠ¡é€šçŸ¥ï¼Œå¯èƒ½æ˜¯æˆ‘ç›®å‰çš„ä¸€äº›å·¥ç¨‹é‡è¿˜æ²¡åˆ°ä½¿ç”¨åˆ°ä¿¡å·é‡çš„ç¨‹åº¦ï¼Ÿè€Œä¸”åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°äº†ä¸€äº›è¿·æƒ‘çš„åœ°æ–¹ï¼Œæ‰€ä»¥ç›®å‰ä¸å‡†å¤‡æ·±ç©¶ï¼Œç­‰åˆ°å®åœ¨è¦ç”¨çš„æ—¶å€™å†è¯´å§ğŸ˜‹ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»<a href="https://freertos.blog.csdn.net/article/details/50835613">(19æ¡æ¶ˆæ¯) FreeRTOSç³»åˆ—ç¬¬19ç¯‡â€”-FreeRTOSä¿¡å·é‡_ç ”ç©¶æ˜¯ä¸ºäº†ç†è§£çš„åšå®¢-CSDNåšå®¢_freertos ä¿¡å·</a>çœ‹çœ‹ï¼Œè®²çš„å¾ˆè¯¦ç»†äº†å¯ä»¥è¯´ï¼Œæˆ‘å¤§éƒ¨åˆ†å†…å®¹ä¹Ÿæ˜¯è·Ÿç€è¿™ä¸ªå­¦çš„ã€‚</p>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Cè¯­è¨€äºŒçº§æŸ¥æ¼è¡¥ç¼ºï¼ˆè‡ªç”¨ï¼‰</title>
    <url>/2022/08/28/C%E8%AF%AD%E8%A8%80%E4%BA%8C%E7%BA%A7%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<ul>
<li>ä¸€ä¸ªï¼£è¯­è¨€çš„æºç¨‹åºï¼ˆæ‰©å±•åä¸ºï¼ï½ƒï¼‰åœ¨ç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘åï¼Œé¦–å…ˆç”Ÿæˆä¸€ä¸ªæ±‡ç¼–è¯­è¨€ç¨‹åºï¼Œç„¶åç”±ç¼–è¯‘ç¨‹åºå†å°†æ±‡ç¼–è¯­è¨€ç¨‹åºç¿»è¯‘æˆæœºå™¨æŒ‡ä»¤ç¨‹åºï¼Œå³ç›®æ ‡ç¨‹åºï¼ˆæ‰©å±•åä¸ºï¼ï½ï½‚ï½Šï¼‰ã€‚ç›®æ ‡ç¨‹åºä¸å¯ä»¥ç›´æ¥è¿è¡Œï¼Œå®ƒè¦å’Œåº“å‡½æ•°æˆ–å…¶ä»–ç›®æ ‡ç¨‹åºè¿æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ‰©å±•åä¸ºï¼ï½…ï½˜ï½…ï¼‰åæ–¹å¯è¿è¡Œ</li>
</ul>
<p>.objæ–‡ä»¶ä¸å¯ç›´æ¥è¿è¡Œ</p>
<ul>
<li><p>ç®—æ³•çš„ï¼•ä¸ªç‰¹æ€§ä¸ºï¼š</p>
<ul>
<li>æœ‰ç©·æ€§</li>
<li>ç¡®å®šæ€§</li>
<li>å¯è¡Œæ€§</li>
<li>æœ‰é›¶ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼ˆå¯ä»¥æ— è¾“å…¥ï¼‰</li>
<li>æœ‰ï¼‘ä¸ªæˆ–å¤šä¸ªè¾“å‡ºï¼ˆå¿…é¡»æœ‰è¾“å‡ºï¼‰</li>
</ul>
</li>
<li><p>é€—å·è¿ç®—ç¬¦</p>
<p>åœ¨Cè¯­è¨€ä¸­é€—å·â€œ,â€ä¹Ÿæ˜¯ä¸€ç§è¿ç®—ç¬¦ï¼Œç§°ä¸ºé€—å·è¿ç®—ç¬¦ã€‚ å…¶åŠŸèƒ½æ˜¯æŠŠä¸¤ä¸ªè¡¨è¾¾å¼è¿æ¥èµ·æ¥ç»„æˆä¸€ä¸ªè¡¨è¾¾å¼ï¼Œ ç§°ä¸ºé€—å·è¡¨è¾¾å¼ã€‚å…¶ä¸€èˆ¬å½¢å¼ä¸ºï¼š<br>  è¡¨è¾¾å¼1, è¡¨è¾¾å¼2<br>å…¶æ±‚å€¼è¿‡ç¨‹æ˜¯åˆ†åˆ«æ±‚ä¸¤ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶ä»¥è¡¨è¾¾å¼<strong>2(å³æœ€å³è¾¹çš„ä¸€ä¸ªè¡¨è¾¾å¼)</strong>çš„å€¼ä½œä¸ºæ•´ä¸ªé€—å·è¡¨è¾¾å¼çš„å€¼ã€‚</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> x=<span class="number">2</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(x++,<span class="number">2</span>*x)); <span class="number">6</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,x); <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>â€‹        <strong>é€—å·ä»…è®¡ç®—ç»“æœï¼Œå¹¶ä¸å…·æœ‰èµ‹å€¼ä½œç”¨</strong>ï¼ˆä½†æ˜¯x++æœ‰èµ‹å€¼ä½œç”¨ï¼‰</p>
<ul>
<li><p>ç®—æœ¯è¿ç®—ç¬¦ä¼˜å…ˆçº§</p>
<p>ä¼˜å…ˆçº§çš„æ¬¡åºå¦‚ä¸‹ï¼ˆç”±é«˜åˆ°ä½ï¼‰ï¼šï¼ˆï¼‰ã€++ã€â€”ã€ï¼Šã€ï¼ã€ï¼…ã€ï¼‹ã€ï¼</p>
<p>ä»¥ä¸Šæ‰€åˆ—çš„è¿ç®—ç¬¦ï¼Œ<strong>åªæœ‰å•ç›®è¿ç®—ç¬¦æ­£â€œï¼‹â€å’Œè´Ÿâ€œï¼â€çš„ç»“åˆæ€§æ˜¯ä»å³åˆ°å·¦ï¼Œå…¶ä½™è¿ç®—ç¬¦çš„ç»“åˆæ€§éƒ½æ˜¯ä»å·¦åˆ°å³</strong></p>
<ul>
<li>%å¯¹è±¡å¿…é¡»ä¸ºæ•´å‹</li>
</ul>
</li>
<li><p>è¿ç®—åº“å‡½æ•°</p>
<ul>
<li>absï¼šç»å¯¹å€¼</li>
<li>fabsï¼šåŒå­—èŠ‚å‹ç»å¯¹å€¼</li>
<li>powï¼šxçš„yæ¬¡æ–¹</li>
<li>expï¼šæ±‚10çš„xæ¬¡æ–¹</li>
<li>sqrtï¼šxçš„å¹³æ–¹æ ¹</li>
</ul>
</li>
</ul>
<p>BCCAA <strong>A</strong>DBB<strong>D</strong> DAC</p>
<ul>
<li>æ•°å­—çš„é»˜è®¤ç±»å‹ä¸ºæ•´å‹</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lf&quot;</span>,<span class="number">1</span>/<span class="number">2</span>); <span class="comment">//0.000000</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>cçš„åŸºæœ¬æ•°æ®ç±»å‹ï¼šå•ç²¾åº¦å‹ã€åŒç²¾åº¦å‹ã€å­—ç¬¦å‹ã€æ•´å‹ã€æšä¸¾å‹</p>
</li>
<li><p>cè´Ÿæ•´æ•°è¡¥ç ï¼šæ‰€å¾—åç è¿˜è¦+1</p>
</li>
</ul>
<h1 id="ä¸‰ã€é¡ºåºç»“æ„"><a href="#ä¸‰ã€é¡ºåºç»“æ„" class="headerlink" title="ä¸‰ã€é¡ºåºç»“æ„"></a>ä¸‰ã€é¡ºåºç»“æ„</h1><ul>
<li><p>æ ¼å¼å­—ç¬¦ï¼š</p>
<ul>
<li>%iåŒ%d</li>
<li>%o å…«è¿›åˆ¶</li>
<li>%g/G ç³»ç»Ÿå†³å®šé‡‡ç”¨ä»€ä¹ˆæ ¼å¼ï¼ˆfæˆ–eï¼‰ä½¿è¾“å‡ºå®½åº¦æœ€å°</li>
<li>%p è¾“å‡ºå˜é‡åœ°å€</li>
</ul>
<p>%m.nsï¼Œè¾“å‡ºå ï½åˆ—ï¼Œä½†åªå–å­—ç¬¦ä¸²ä¸­å·¦è¾¹ï½ä¸ªå­—ç¬¦ã€‚è¿™ï½ä¸ªå­—ç¬¦è¾“å‡ºåœ¨ï½åˆ—çš„å³è¾¹ï¼Œ<strong>å·¦è¾¹è¡¥ç©ºæ ¼</strong></p>
<p>%-m.nsï¼Œï½ä¸ªå­—ç¬¦<strong>è¾“å‡ºåœ¨ï½åˆ—èŒƒå›´çš„å·¦è¾¹ï¼Œå³è¾¹è¡¥ç©ºæ ¼</strong>ã€‚è‹¥ï½ï¼ï½ï¼Œåˆ™ï½è‡ªåŠ¨å–ï½å€¼ï¼Œå³ä¿è¯ï½ä¸ªå­—ç¬¦æ­£å¸¸è¾“å‡ºã€‚</p>
</li>
</ul>
<p>B<strong>BA</strong>BD DACD<strong>D</strong> <strong>C</strong>C<strong>A</strong></p>
<p>BDCBD DACDB DCB    34é¡µ</p>
<ul>
<li><p>å…«è¿›åˆ¶æ ¼å¼è¾“å‡ºå¼€å¤´ä¸å¸¦0</p>
</li>
<li><p>é€—å·ä¼˜å…ˆçº§ä½äºèµ‹å€¼</p>
</li>
</ul>
<h1 id="å››ã€é€‰æ‹©ç»“æ„"><a href="#å››ã€é€‰æ‹©ç»“æ„" class="headerlink" title="å››ã€é€‰æ‹©ç»“æ„"></a>å››ã€é€‰æ‹©ç»“æ„</h1><ul>
<li><p>é€»è¾‘æˆ–è¿ç®—çš„çŸ­è·¯æ€§</p>
<p>å¦‚æœ||å‰çš„è¡¨è¾¾å¼ä¸ºçœŸï¼Œåˆ™ä¸ä¼šè¿›è¡Œ||åçš„è¡¨è¾¾å¼è¿ç®—(&amp;&amp;ä»¥æ­¤ç±»æ¨)</p>
</li>
</ul>
<p>DBADD <strong>A</strong>A<strong>A</strong>A<strong>A</strong> AC</p>
<p>DBADD DACAB AC    54é¡µ</p>
<h1 id="äº”ã€å¾ªç¯ç»“æ„"><a href="#äº”ã€å¾ªç¯ç»“æ„" class="headerlink" title="äº”ã€å¾ªç¯ç»“æ„"></a>äº”ã€å¾ªç¯ç»“æ„</h1><ul>
<li>while((ch=getchar())!=â€™\nâ€™);ç¬¦åˆè¯­æ³•</li>
</ul>
<p>AA<strong>AD</strong>C DBBC<strong>C</strong> B<strong>CA</strong></p>
<p>AACBC DBBCB BBC    75é¡µ</p>
<h1 id="å…­ã€å­—ç¬¦å‹æ•°æ®"><a href="#å…­ã€å­—ç¬¦å‹æ•°æ®" class="headerlink" title="å…­ã€å­—ç¬¦å‹æ•°æ®"></a>å…­ã€å­—ç¬¦å‹æ•°æ®</h1><ul>
<li><p>è½¬ä¹‰å­—ç¬¦</p>
<p>\f:æ¢é¡µ</p>
<p>\ddd: 1~3ä½å…«è¿›åˆ¶æ•°å¯¹åº”å­—ç¬¦ä¾‹å¦‚â€™\123â€™</p>
<p>\xhh: 1~2ä½16è¿›åˆ¶æ•°å¯¹åº”å­—ç¬¦ä¾‹å¦‚â€™\x12â€™</p>
</li>
</ul>
<p>BA<em><u>A</u></em>DD DBCB</p>
<p>BA<u><em>C</em></u>DD D<strong>C</strong>CB    85é¡µ</p>
<p>3å¿½ç•¥</p>
<ul>
<li>defaultåæ— breakä¹Ÿä¼šæ‰§è¡Œï¼ˆï¼Ÿï¼‰</li>
</ul>
<h1 id="ä¸ƒã€å‡½æ•°"><a href="#ä¸ƒã€å‡½æ•°" class="headerlink" title="ä¸ƒã€å‡½æ•°"></a>ä¸ƒã€å‡½æ•°</h1><p><strong>C</strong>DD<strong>CB</strong> D<strong>D</strong>D<strong>A</strong>D C</p>
<p>BDDDC DADCD C    102é¡µ</p>
<ul>
<li>ç®€å•å˜é‡ä½œå®å‚æ—¶ä¸å½¢å‚æ•°æ®çš„ä¼ è¾“æ–¹å¼ä¸ºå•å‘å€¼ä¼ é€’</li>
<li>returnè¯­å¥ä¸­å¸¦æœ‰++æ—¶ï¼Œè¿”å›ä¹‹åå¹¶ä¸”ä½œç”¨ä¹‹åæ‰ä¼š++</li>
</ul>
<h1 id="å…«ã€æŒ‡é’ˆ"><a href="#å…«ã€æŒ‡é’ˆ" class="headerlink" title="å…«ã€æŒ‡é’ˆ"></a>å…«ã€æŒ‡é’ˆ</h1><ul>
<li><p>æœ‰<code>int a,*p1=&amp;a;</code>ç”±äº&amp;å’Œ<em>è¿ç®—ä¼˜å…ˆçº§ç›¸åŒï¼Œ&amp; </em>p1åˆ™ä»å³è‡³å·¦è¿ç®—ï¼Œåˆ™&amp; *p1ç­‰åŒäº&amp;a</p>
<p><em>&amp;aåˆ™æ˜¯ç­‰åŒäº </em>p1ç­‰åŒäºa</p>
</li>
<li><p><strong><code>*</code>çš„ä¼˜å…ˆçº§é«˜äº+ã€-,å› æ­¤<code>*p1</code>=<code>*p1</code>+1æ˜¯å°†a+1çš„å€¼å­˜è¿›på†…å­˜å‚¨çš„åœ°å€æ‰€æŒ‡å‘çš„å†…å®¹ä¸­ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºa=a+1ï¼›ä½†æ˜¯açš„åœ°å€æ˜¯ä¸å˜çš„ã€‚</strong></p>
</li>
</ul>
<p>å…·ä½“å¯¹æŒ‡é’ˆçš„ä¸€äº›ç†è§£å·²æ·»åŠ åœ¨<a href="https://dhkkk.gitee.io/2022/07/31/C-æŒ‡é’ˆ/">æŒ‡é’ˆç›¸å…³å¤ä¹  | å°è‘£çš„BLOG (gitee.io)</a>ä¸­</p>
<p>DADBB A<u><em>D</em></u>BDB BCC</p>
<p>DADDB A<u><strong><em>C</em></strong></u>BDB BCC  116é¡µ</p>
<p>7å¿½ç•¥ï¼ˆç¬¬ä¸€æ¬¡å…¨å¯¹æï¼‰</p>
<h1 id="ä¹ã€æ•°ç»„"><a href="#ä¹ã€æ•°ç»„" class="headerlink" title="ä¹ã€æ•°ç»„"></a>ä¹ã€æ•°ç»„</h1><p>CDDBC CBBCD ACA<strong>B</strong></p>
<p>CDDBC CBBCD ACAC   146é¡µ</p>
<h1 id="åã€å­—ç¬¦ä¸²"><a href="#åã€å­—ç¬¦ä¸²" class="headerlink" title="åã€å­—ç¬¦ä¸²"></a>åã€å­—ç¬¦ä¸²</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">char</span> *x, <span class="type">char</span> *y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(*x==<span class="string">&#x27;*&#x27;</span>) x++;</span><br><span class="line">	<span class="keyword">while</span>(*y=*x) <span class="comment">//å°†xæ‰€æŒ‡å‘çš„å­—ç¬¦èµ‹å€¼ç»™yï¼Œç›´åˆ°é‡åˆ°&#x27;/0&#x27;ä¸ºæ­¢ï¼Œè¿™æ ·å†™æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">	&#123;</span><br><span class="line">		x++;y++;	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> s[<span class="number">30</span>]=<span class="string">&quot;******a*b***&quot;</span>,t[<span class="number">30</span>];</span><br><span class="line">	swap(s,t);</span><br><span class="line">	<span class="built_in">puts</span>(t);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AADCC <strong>DA</strong>BB<strong>D</strong> C<strong>A</strong></p>
<p>AADCC CBBBA CB              173é¡µ  6ã€10ã€12</p>
<p><strong>strcpyä¼šè¦†ç›–åŸæ¥çš„æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œstrncpyåªä¼šè¦†ç›–nä¸ªå­—èŠ‚åŸæ¥çš„å­—ç¬¦ä¸²ï¼Œå‰©ä¸‹çš„ä¿ç•™</strong></p>
<h1 id="åä¸€ã€å¯¹å‡½æ•°çš„è¿›ä¸€æ­¥è®¨è®º"><a href="#åä¸€ã€å¯¹å‡½æ•°çš„è¿›ä¸€æ­¥è®¨è®º" class="headerlink" title="åä¸€ã€å¯¹å‡½æ•°çš„è¿›ä¸€æ­¥è®¨è®º"></a>åä¸€ã€å¯¹å‡½æ•°çš„è¿›ä¸€æ­¥è®¨è®º</h1><ul>
<li><p>ä¼ å…¥mainçš„å‚æ•°</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">main(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªåä¸ºtestçš„cæ–‡ä»¶è¿›è¡Œç¼–è¯‘æ—¶ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š test  ok  goodåï¼š</p>
<ul>
<li>argcå€¼ä¸º3ï¼Œå³å­˜å…¥argvçš„å­—ç¬¦ä¸²ä¸ªæ•°</li>
<li>argv[0]å­˜æ”¾</li>
</ul>
<ul>
<li>å¯¹æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå˜é‡è¿›è¡ŒåŠ å‡æ³•æ— æ„ä¹‰</li>
</ul>
<p>CDCD<strong>D</strong> BBCB</p>
<p>CDCDC BBCB 184é¡µ</p>
<h1 id="åäºŒã€ç”¨æˆ·æ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸå’Œå­˜å‚¨ç±»"><a href="#åäºŒã€ç”¨æˆ·æ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸå’Œå­˜å‚¨ç±»" class="headerlink" title="åäºŒã€ç”¨æˆ·æ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸå’Œå­˜å‚¨ç±»"></a>åäºŒã€ç”¨æˆ·æ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸå’Œå­˜å‚¨ç±»</h1><p>ACDB<strong>A</strong> A<strong>C</strong>CC<strong><u>D</u></strong> <strong>C</strong></p>
<p>ACDBB ADCCA D  195é¡µ</p>
<ul>
<li>è‹¥å…¨å±€å˜é‡å’ŒæŸä¸€å‡½æ•°ä¸­å±€éƒ¨å˜é‡åŒåï¼Œåˆ™åœ¨å‡½æ•°å†…å…¨å±€å˜é‡è¢«å±è”½</li>
</ul>
<h1 id="åä¸‰ã€ç¼–è¯‘é¢„å¤„ç†å’ŒåŠ¨æ€å­˜å‚¨åˆ†é…"><a href="#åä¸‰ã€ç¼–è¯‘é¢„å¤„ç†å’ŒåŠ¨æ€å­˜å‚¨åˆ†é…" class="headerlink" title="åä¸‰ã€ç¼–è¯‘é¢„å¤„ç†å’ŒåŠ¨æ€å­˜å‚¨åˆ†é…"></a>åä¸‰ã€ç¼–è¯‘é¢„å¤„ç†å’ŒåŠ¨æ€å­˜å‚¨åˆ†é…</h1><p>è¯¦è§<a href="https://dhkkk.gitee.io/2022/08/03/C-å…³é”®å­—/">ä¸€äº›å…³é”®å­— | å°è‘£çš„BLOG (gitee.io)</a></p>
<p><strong>AACD</strong>C A<strong>D</strong>AA</p>
<p>DBBBC ACAA</p>
<p>defineåªä½œæ›¿æ¢ï¼ï¼ï¼ï¼</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> D1(a) (2*a)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> D2(a) (2*(a))</span></span><br><span class="line"><span class="comment">//è®¡ç®—ç»“æœæœ€å¥½ä¹Ÿç”¨æ‹¬å·æ‹¬èµ·æ¥,å°å‹è®¡ç®—ä¸æ‹¬é—®é¢˜åº”è¯¥ä¸å¤§</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">main</span> <span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">     <span class="type">int</span> b = D1(<span class="number">3</span>+<span class="number">4</span>);</span><br><span class="line">     <span class="type">int</span> c = D2(<span class="number">3</span>+<span class="number">4</span>);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, b);  <span class="comment">//è¾“å‡ºç­‰ä»·äº2*3+4=10 â€»â€»â€»â€»â€»â€»â€»â€»â€»â€»â€»â€»â€»</span></span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, c);  <span class="comment">//2*(3+4)=14</span></span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1 id="åå››ã€ç»“æ„ä½“ã€å…±ç”¨ä½“å’Œç”¨æˆ·è‡ªå®šä¹‰å‹"><a href="#åå››ã€ç»“æ„ä½“ã€å…±ç”¨ä½“å’Œç”¨æˆ·è‡ªå®šä¹‰å‹" class="headerlink" title="åå››ã€ç»“æ„ä½“ã€å…±ç”¨ä½“å’Œç”¨æˆ·è‡ªå®šä¹‰å‹"></a>åå››ã€ç»“æ„ä½“ã€å…±ç”¨ä½“å’Œç”¨æˆ·è‡ªå®šä¹‰å‹</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> &#123;</span><span class="type">int</span> a;<span class="type">int</span> b;&#125;a;<span class="comment">//åˆæ³•</span></span><br></pre></td></tr></table></figure>
<p>å…³äºåŠ¨æ€é“¾è¡¨è¯¦è§<a href="https://dhkkk.gitee.io/2022/08/01/C-ç»“æ„ä½“/">ç»“æ„ä½“å¤ä¹  | å°è‘£çš„BLOG (gitee.io)</a></p>
<p>AABBÃ—    <strong>C</strong>CBDD    BC</p>
<p>ADBBA    DCBCD    BD    6é¢˜çœ‹é¢˜ä¸ä»”ç»†æ</p>
<h1 id="åäº”ã€ä½è¿ç®—"><a href="#åäº”ã€ä½è¿ç®—" class="headerlink" title="åäº”ã€ä½è¿ç®—"></a>åäº”ã€ä½è¿ç®—</h1><p>é•¿åº¦ä¸åŒçš„æ•°æ®è¿›è¡Œä½è¿ç®—æ—¶å…ˆå°†æœ€ä½ä½å¯¹é½ï¼Œç„¶åå°†çŸ­çš„ä¸€æ–¹æ‰©å……</p>
<p>D<strong>C</strong>DAA    BCD</p>
<p>DADAA    BCD</p>
<p>çœ‹æ¸…æ¥šè¾“å‡ºçš„æ ¼å¼å£°æ˜</p>
<p>240</p>
]]></content>
      <tags>
        <tag>Cè¯­è¨€å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>FreeRTOSåœ¨CubeMXä¸­çš„ä½¿ç”¨</title>
    <url>/2022/08/25/FreeRTOS-3/</url>
    <content><![CDATA[<h1 id="è¯´åœ¨å‰é¢"><a href="#è¯´åœ¨å‰é¢" class="headerlink" title="è¯´åœ¨å‰é¢"></a>è¯´åœ¨å‰é¢</h1><p><strong>æ­¤ç¯‡æ‰€æœ‰æœ‰å…³å‡½æ•°å‡ä¸ºCubeMX æä¾›çš„oså‡½æ•°ï¼ˆç‰¹æ®Šåœ°æ–¹ä¼šä¸“é—¨è¯´æ˜ï¼‰ï¼Œfreertosç›¸å…³ç”¨æˆ·è°ƒç”¨å‡½æ•°ä¹Ÿåˆ†ç±»ä¼¼æ ‡å‡†åº“å’Œhalåº“çš„åŒºåˆ«ï¼ä½†å¤§ä½“ç”¨æ³•ä¹Ÿä¸</strong><a href="https://dhkkk.gitee.io/2022/08/23/FreeRTOS-2/">FreeRTOSçš„ä»»åŠ¡ç›¸å…³ | å°è‘£çš„BLOG (gitee.io)</a><strong>ä¸­ä»‹ç»çš„ç›¸ä¼¼ï¼Œå¯ä»¥å‚è€ƒ</strong></p>
<p><strong>2022.8.26ï¼š é˜…è¯»äº†oså‡½æ•°å†…å®¹å¹¶éªŒè¯åï¼Œå‘ç°oså‡½æ•°ä¸vtaskå‡½æ•°å…¼å®¹ï¼Œï¼ˆå…¶å®oså‡½æ•°ä¹Ÿæ˜¯è°ƒç”¨çš„vtaskå‡½æ•°ï¼‰æ‰€ä»¥ç†è®ºæ¥è¯´ä¸¤è¾¹çš„å‡½æ•°å¯ä»¥æ··ç”¨ï¼Œä½†æ˜¯ä¸ºäº†å¯è¯»æ€§ç­‰æ–¹é¢å°½é‡è¿˜æ˜¯ä¸è¦æ··ç”¨</strong></p>
<p><strong>2022.8.28ï¼šåœ¨è‡ªå·±ç”¨äº†å¾ˆå¤šåŠŸèƒ½åï¼Œè¶Šå‘è§‰å¾—åº“å‡½æ•°æ¯”oså‡½æ•°å¥½ç”¨ï¼Œå¤§å®¶è‡ªå·±å–èˆå§ï¼Œåæ­£äºŒè€…æ˜¯å¯ä»¥æ··ç”¨çš„ï¼Œå…ˆç”¨cubemxé…ç½®ï¼Œå†ç”¨åº“å‡½æ•°ç¼–å†™å…·ä½“å†…å®¹ä¹Ÿæ˜¯å®Œå…¨ğŸ†—çš„ã€‚</strong></p>
<h1 id="1ã€é…ç½®ç•Œé¢"><a href="#1ã€é…ç½®ç•Œé¢" class="headerlink" title="1ã€é…ç½®ç•Œé¢"></a>1ã€é…ç½®ç•Œé¢</h1><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">é…ç½®é¡¹</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>Tasks and Queues</strong></td>
<td style="text-align:center">ä»»åŠ¡ä¸é˜Ÿåˆ—ï¼Œç”¨äºé…ç½®ä»»åŠ¡ä½“ä»¥åŠæ¶ˆæ¯é˜Ÿåˆ—</td>
</tr>
<tr>
<td style="text-align:center"><strong>Timers and Semaphores</strong></td>
<td style="text-align:center">è½¯ä»¶å®šæ—¶å™¨ä¸ä¿¡å·é‡ï¼Œç”¨äºé…ç½®å†…æ ¸å¯¹è±¡ ï¼ˆè½¯ä»¶å®šæ—¶å™¨å’Œä¿¡å·é‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><strong>Mutexes</strong></td>
<td style="text-align:center">äº’æ–¥é‡ï¼Œç”¨äºé…ç½®å†…æ ¸å¯¹è±¡ï¼ˆäº’æ–¥é‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><strong>Events</strong></td>
<td style="text-align:center">äº‹ä»¶ï¼Œé…ç½®å†…æ ¸å¯¹è±¡ï¼ˆäº‹ä»¶ï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><strong>FreeRTOS Heap Usage</strong></td>
<td style="text-align:center">æŸ¥çœ‹ç”¨æˆ·ä»»åŠ¡å’Œç³»ç»Ÿä»»åŠ¡çš„å †å ç”¨</td>
</tr>
<tr>
<td style="text-align:center"><strong>Config Parameters</strong></td>
<td style="text-align:center">ç³»ç»Ÿçš„å‚æ•°é…ç½®</td>
</tr>
<tr>
<td style="text-align:center"><strong>Include Parameters</strong></td>
<td style="text-align:center">ç³»ç»Ÿçš„åŠŸèƒ½è£å‰ª</td>
</tr>
<tr>
<td style="text-align:center"><strong>Advanced Settings</strong></td>
<td style="text-align:center">CubeMX ç”Ÿæˆä»£ç é¢„é…ç½®é¡¹</td>
</tr>
<tr>
<td style="text-align:center"><strong>User Constants</strong></td>
<td style="text-align:center">ç”¨æˆ·å¸¸é‡å®šä¹‰</td>
</tr>
</tbody>
</table>
</div>
<h2 id="ç‰ˆæœ¬é€‰æ‹©"><a href="#ç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="ç‰ˆæœ¬é€‰æ‹©"></a>ç‰ˆæœ¬é€‰æ‹©</h2><img src="/images/loading.png" data-original="/2022/08/25/FreeRTOS-3/%E7%89%88%E6%9C%AC.jpg" class title="This is an image"> 
<p>CMSISæ˜¯ä¸€ç§æ¥å£æ ‡å‡†ï¼Œç›®çš„æ˜¯å±è”½è½¯ç¡¬ä»¶å·®å¼‚ä»¥æé«˜è½¯ä»¶çš„å…¼å®¹æ€§ã€‚RTOS v1ä½¿å¾—è½¯ä»¶èƒ½å¤Ÿåœ¨ä¸åŒçš„å®æ—¶æ“ä½œç³»ç»Ÿä¸‹è¿è¡Œï¼ˆå±è”½ä¸åŒRTOSæä¾›çš„APIçš„å·®åˆ«ï¼‰ï¼Œè€ŒRTOS v2åˆ™æ˜¯æ‹“å±•äº†RTOS v1ï¼Œå…¼å®¹æ›´å¤šçš„CPUæ¶æ„å’Œå®æ—¶æ“ä½œç³»ç»Ÿã€‚å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼Œå¦‚æœå­¦ä¹ è¿‡ç¨‹ä¸­ä½¿ç”¨STM32F1ã€F4ç­‰å•ç‰‡æœºæ—¶æ²¡å¿…è¦é€‰æ‹©RTOS v2ï¼Œæ›´é«˜çš„å…¼å®¹æ€§èƒŒåæ—¶æ›´åŠ å†—ä½™çš„ä»£ç ï¼Œç†è§£èµ·æ¥æ¯”è¾ƒå›°éš¾ã€‚</p>
<h1 id="2ã€å„é…ç½®è¯¦ç»†è®¾ç½®"><a href="#2ã€å„é…ç½®è¯¦ç»†è®¾ç½®" class="headerlink" title="2ã€å„é…ç½®è¯¦ç»†è®¾ç½®"></a>2ã€å„é…ç½®è¯¦ç»†è®¾ç½®</h1><h2 id="ä¸€ã€Config-Parametersâ€”â€”ç³»ç»Ÿçš„å‚æ•°é…ç½®"><a href="#ä¸€ã€Config-Parametersâ€”â€”ç³»ç»Ÿçš„å‚æ•°é…ç½®" class="headerlink" title="ä¸€ã€Config Parametersâ€”â€”ç³»ç»Ÿçš„å‚æ•°é…ç½®"></a><strong>ä¸€ã€Config Parametersâ€”â€”ç³»ç»Ÿçš„å‚æ•°é…ç½®</strong></h2><h3 id="1-Kernel-Settingâ€”â€”FreeRTOS-è°ƒåº¦å†…æ ¸è®¾ç½®"><a href="#1-Kernel-Settingâ€”â€”FreeRTOS-è°ƒåº¦å†…æ ¸è®¾ç½®" class="headerlink" title="1.Kernel Settingâ€”â€”FreeRTOS è°ƒåº¦å†…æ ¸è®¾ç½®"></a>1.Kernel Settingâ€”â€”FreeRTOS è°ƒåº¦å†…æ ¸è®¾ç½®</h3><p>ç”±äºä¸€äº›é‡è¦é…ç½®å·²åœ¨<a href="https://dhkkk.gitee.io/2022/08/18/FreeRTOS-1/">FreeRTOS_åŸºæœ¬æ¡†æ¶ | å°è‘£çš„BLOG (gitee.io)</a>ä¸­è®²åˆ°ï¼Œå› æ­¤æœ¬æ–‡åªä¼šè®°å½•ä¸€äº›å®¹æ˜“ææ··çš„åœ°æ–¹</p>
<ul>
<li><p><strong>USE_PREEMPTION</strong></p>
<p>USE_PREEMPTION æ˜¯ RTOS çš„è°ƒåº¦æ–¹å¼é€‰æ‹©ï¼Œä¸º 1 æ—¶ä½¿ç”¨æŠ¢å å¼è°ƒåº¦å™¨ï¼Œä¸º 0 æ—¶ä½¿ç”¨åç¨‹ã€‚</p>
<p>å½“ä½¿ç”¨åç¨‹çš„è¯ä¼šåœ¨å¦‚ä¸‹åœ°æ–¹è¿›è¡Œä»»åŠ¡åˆ‡æ¢ï¼š</p>
<ol>
<li>ä¸€ä¸ªä»»åŠ¡è°ƒç”¨äº†å‡½æ•° taskYIELD()ã€‚</li>
<li>ä¸€ä¸ªä»»åŠ¡è°ƒç”¨äº†å¯ä»¥ä½¿ä»»åŠ¡è¿›å…¥é˜»å¡æ€çš„ API å‡½æ•°ã€‚</li>
<li>åº”ç”¨ç¨‹åºæ˜ç¡®å®šä¹‰äº†åœ¨ä¸­æ–­ä¸­æ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
</ol>
</li>
</ul>
<ul>
<li><p><strong>USE_MUTEXESã€USE_RECURSIVE_MUTEXESã€USE_COUNTING_SEMAPHORES</strong></p>
<p>ä¸º 1 åˆ™å¼€å¯ç³»ç»Ÿæ„å»ºè¿‡ç¨‹ä¸­çš„äº’æ–¥é‡ã€é€’å½’äº’æ–¥é‡å’Œä¿¡å·é‡,é»˜è®¤å¼€å¯å°±å¯ã€‚</p>
</li>
<li><p><strong>QUEUE_REGISTRY_SIZE</strong></p>
<p>é˜Ÿåˆ—æ³¨å†Œè¡¨çš„å¤§å°ï¼Œå¯ä»¥ç”¨äºç®¡ç†é˜Ÿåˆ—åç§°å’Œé˜Ÿåˆ—å®ä½“ï¼Œæ–¹ä¾¿è¿è¡Œä¸­è¿›è¡ŒæŸ¥çœ‹ä¸ç®¡ç†ï¼Œé»˜è®¤ä¸º8</p>
</li>
<li><p><strong>ENABLE_BACKWARD_COMPATIBILITY</strong></p>
<p>ä¸€ä¸ªå…¼å®¹æ€§ä½¿èƒ½ï¼Œä½¿èƒ½åï¼Œ FreeRTOS 8.0.0 ä¹‹åçš„ç‰ˆæœ¬å¯ä»¥é€šè¿‡å®å®šä¹‰ä½¿ç”¨ 8.0.0 ç‰ˆæœ¬ä¹‹å‰çš„å‡½æ•°æ¥å£ï¼Œé»˜è®¤ä½¿èƒ½</p>
</li>
<li><p><strong>USE_TASK_NOTIFICATIONS</strong></p>
<p>ä»»åŠ¡é€šçŸ¥ä½¿èƒ½ï¼Œæ¯ä¸ªRTOSä»»åŠ¡éƒ½æœ‰ä¸€ä¸ª32ä½çš„é€šçŸ¥å€¼ï¼ŒRTOSä»»åŠ¡é€šçŸ¥æ˜¯ä¸€ä¸ªç›´æ¥å‘é€ç»™ä»»åŠ¡çš„äº‹ä»¶ï¼Œå®ƒå¯ä»¥è§£é™¤æ¥æ”¶ä»»åŠ¡çš„é˜»å¡ï¼Œå¹¶å¯é€‰åœ°æ›´æ–°æ¥æ”¶ä»»åŠ¡çš„é€šçŸ¥å€¼ï¼Œä¸º1å¼€å¯ï¼Œä¸º0å…³é—­ï¼Œå…³é—­å¯ä»¥ä¸ºæ¯ä¸ªä»»åŠ¡èŠ‚çœ8ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´</p>
</li>
<li><p><strong>RECORD_STACK_HIGH_ADDRESS</strong></p>
<p>è®°å½•ä»»åŠ¡çš„å †æ ˆå…¥å£åœ°å€åˆ°TCBï¼Œä¸º1ä½¿èƒ½ï¼Œä¸º0å…³é—­</p>
</li>
</ul>
<h3 id="2-Memory-management-settingâ€”â€”å†…å­˜ç®¡ç†è®¾ç½®"><a href="#2-Memory-management-settingâ€”â€”å†…å­˜ç®¡ç†è®¾ç½®" class="headerlink" title="2.Memory management settingâ€”â€”å†…å­˜ç®¡ç†è®¾ç½®"></a><strong>2.Memory management setting</strong>â€”â€”å†…å­˜ç®¡ç†è®¾ç½®</h3><p>è§†æƒ…å†µè°ƒæ•´å³å¯ï¼Œå†…å­˜åˆ†é…æ–¹å¼é»˜è®¤heap_4ï¼Œæ–¹ä¾¿å®Œå–„ã€‚</p>
<h3 id="3-Hook-function-relateed-difinitionsâ€”â€”é’©å­å‡½æ•°é…ç½®"><a href="#3-Hook-function-relateed-difinitionsâ€”â€”é’©å­å‡½æ•°é…ç½®" class="headerlink" title="3.Hook function relateed difinitionsâ€”â€”é’©å­å‡½æ•°é…ç½®"></a>3.Hook function relateed difinitionsâ€”â€”é’©å­å‡½æ•°é…ç½®</h3><p><strong>é’©å­å‡½æ•°æ˜¯ä¸€ç§å›è°ƒå‡½æ•°ï¼Œç”¨äºåœ¨ä»»åŠ¡æ‰§è¡Œä¸€æ¬¡ä¹‹åæˆ–è€…æŸäº›äº‹ä»¶å‘ç”Ÿåæ‰§è¡Œçš„å‡½æ•°</strong>ï¼Œè¯¥é…ç½®é¡¹é‡Œé¢æœ‰äº”ä¸ªé€‰é¡¹ï¼Œæ§åˆ¶5ç§ä¸åŒåŠŸèƒ½çš„é’©å­å‡½æ•°å¼€å¯ï¼Œå½“ç„¶ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­è‡ªå·±å®šä¹‰</p>
<ul>
<li><p><strong>USE_IDLE_HOOK</strong></p>
<p>æ¯å½“ç©ºé—²ä»»åŠ¡æ‰§è¡Œä¸€æ¬¡ï¼Œé’©å­å‡½æ•°éƒ½ä¼šè¢«æ‰§è¡Œä¸€æ¬¡</p>
</li>
</ul>
<ul>
<li><p><strong>USE_TICK_HOOK</strong></p>
<p>æ¯ä¸ªTICKå‘¨æœŸï¼Œé’©å­å‡½æ•°éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡</p>
</li>
<li><p><strong>USE_MALLOC_FAILED_HOOK</strong></p>
<p>å½“ç”³è¯·åŠ¨æ€å†…å­˜å¤±è´¥æ—¶ï¼Œé’©å­å‡½æ•°ä¼šæ‰§è¡Œä¸€æ¬¡(éœ€è¦é¢å¤–é…ç½®ç”³è¯·åŠ¨æ€å†…å­˜å¤±è´¥çš„ç›¸å…³äº‹é¡¹)</p>
</li>
</ul>
<ul>
<li><p><strong>USE_DAEMON_TASK_STARTUP_HOOK</strong></p>
<p>ä»»åŠ¡åˆšå¯åŠ¨æ—¶ï¼Œé’©å­å‡½æ•°ä¼šæ‰§è¡Œä¸€æ¬¡</p>
</li>
<li><p><strong>CHECK_FOR_STACK_OVERFLOW</strong></p>
<p>ä»»åŠ¡æ ˆæº¢å‡ºæ—¶ï¼Œé’©å­å‡½æ•°ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¼ å…¥ä»»åŠ¡ TCB å’Œä»»åŠ¡åç§°ï¼ˆä¹Ÿéœ€è¦é¢å¤–é…ç½®ï¼‰</p>
</li>
</ul>
<h3 id="4-Run-time-and-task-statsâ€¦-â€”â€”ä»»åŠ¡è¿è¡Œè¿½è¸ªé…ç½®"><a href="#4-Run-time-and-task-statsâ€¦-â€”â€”ä»»åŠ¡è¿è¡Œè¿½è¸ªé…ç½®" class="headerlink" title="4.Run time and task statsâ€¦ â€”â€”ä»»åŠ¡è¿è¡Œè¿½è¸ªé…ç½®"></a>4.Run time and task statsâ€¦ â€”â€”ä»»åŠ¡è¿è¡Œè¿½è¸ªé…ç½®</h3><ul>
<li><p><strong>GENERATE_RUN_TIME_STATS</strong></p>
<p>å¼€å¯æ—¶é—´ç»Ÿè®¡åŠŸèƒ½ï¼Œåœ¨è°ƒç”¨ vTaskGetRunTimeStats() å‡½æ•°æ—¶ï¼Œ<strong>å°†ä»»åŠ¡è¿è¡Œæ—¶é—´ä¿¡æ¯ä¿å­˜åˆ°å¯è¯»åˆ—è¡¨ä¸­</strong></p>
</li>
<li><p><strong>USE_TRACE_FACILITY</strong></p>
<p>ä½¿èƒ½åä¼šåŒ…å«é¢å¤–çš„ç»“æ„æˆå‘˜å’Œå‡½æ•°ä»¥å¸®åŠ©æ‰§è¡Œå¯è§†åŒ–å’Œè·Ÿè¸ªï¼Œ<strong>é»˜è®¤å¼€å¯ï¼Œæ–¹ä¾¿ MDK è½¯ä»¶å·¥å…·è°ƒè¯•ä½¿ç”¨</strong></p>
</li>
<li><p><strong>USE_STATS_FORMATTING_FUNCTIONS</strong></p>
<p>ä½¿èƒ½åä¼š<strong>ç”Ÿæˆ vTaskList() å’Œ vTaskGetRunTimeStats() å‡½æ•°ç”¨äºè·å–ä»»åŠ¡è¿è¡ŒçŠ¶æ€</strong></p>
</li>
</ul>
<h3 id="5-Co-routine-ralated-definitionsâ€”â€”åç¨‹é…ç½®"><a href="#5-Co-routine-ralated-definitionsâ€”â€”åç¨‹é…ç½®" class="headerlink" title="5.Co-routine ralated definitionsâ€”â€”åç¨‹é…ç½®"></a>5.Co-routine ralated definitionsâ€”â€”åç¨‹é…ç½®</h3><p>é»˜è®¤ä¸å¼€å¯ï¼Œåç¨‹ç°åœ¨å‡ ä¹å¾ˆå°‘ä½¿ç”¨ä¸”FreeRTOSä¸å†æ›´æ–°å’Œç»´æŠ¤åç¨‹ã€‚</p>
<h3 id="6-Software-timer-definitionsâ€”â€”è½¯ä»¶å®šæ—¶å™¨é…ç½®"><a href="#6-Software-timer-definitionsâ€”â€”è½¯ä»¶å®šæ—¶å™¨é…ç½®" class="headerlink" title="6.Software timer definitionsâ€”â€”è½¯ä»¶å®šæ—¶å™¨é…ç½®"></a>6.Software timer definitionsâ€”â€”è½¯ä»¶å®šæ—¶å™¨é…ç½®</h3><p>é»˜è®¤å³å¯ã€‚</p>
<h3 id="7-Interrupt-nesting-behavior-configurationâ€”â€”ä¼˜å…ˆçº§é…ç½®"><a href="#7-Interrupt-nesting-behavior-configurationâ€”â€”ä¼˜å…ˆçº§é…ç½®" class="headerlink" title="7.Interrupt nesting behavior configurationâ€”â€”ä¼˜å…ˆçº§é…ç½®"></a>7.Interrupt nesting behavior configurationâ€”â€”ä¼˜å…ˆçº§é…ç½®</h3><p>å…·ä½“å‚æ•°åœ¨<a href="https://dhkkk.gitee.io/2022/08/18/FreeRTOS-1/">FreeRTOS_åŸºæœ¬æ¡†æ¶ | å°è‘£çš„BLOG (gitee.io)</a>å·²æœ‰è¯¦ç»†æè¿°ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<h2 id="äºŒã€Include-Parametersâ€”â€”ç³»ç»Ÿçš„åŠŸèƒ½è£å‰ª"><a href="#äºŒã€Include-Parametersâ€”â€”ç³»ç»Ÿçš„åŠŸèƒ½è£å‰ª" class="headerlink" title="äºŒã€Include Parametersâ€”â€”ç³»ç»Ÿçš„åŠŸèƒ½è£å‰ª"></a><strong>äºŒã€Include Parameters</strong>â€”â€”ç³»ç»Ÿçš„åŠŸèƒ½è£å‰ª</h2><p>Include Parameters ä¸‹çš„é€‰é¡¹åº”ç”¨äºå†…æ ¸è£å‰ªï¼Œè£å‰ªä¸å¿…è¦çš„åŠŸèƒ½ï¼Œç²¾ç®€ç³»ç»ŸåŠŸèƒ½ï¼Œå‡å°‘èµ„æºå ç”¨</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>é€‰é¡¹</strong></th>
<th style="text-align:center"><strong>åŠŸèƒ½</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">vTaskPrioritySet</td>
<td style="text-align:center">æ”¹å˜æŸä¸ªä»»åŠ¡çš„ä»»åŠ¡ä¼˜å…ˆçº§</td>
</tr>
<tr>
<td style="text-align:center">uxTaskPriorityGet</td>
<td style="text-align:center">æŸ¥è¯¢æŸä¸ªä»»åŠ¡çš„ä¼˜å…ˆçº§</td>
</tr>
<tr>
<td style="text-align:center">vTaskDelete</td>
<td style="text-align:center">åˆ é™¤ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">vTaskCleanUpResources</td>
<td style="text-align:center">å›æ”¶ä»»åŠ¡åˆ é™¤åçš„èµ„æºå¦‚RAMç­‰ç­‰</td>
</tr>
<tr>
<td style="text-align:center">vTaskSuspend</td>
<td style="text-align:center">æŒ‚èµ·ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">vTaskDelayUntil</td>
<td style="text-align:center">é˜»å¡å»¶æ—¶ä¸€æ®µç»å¯¹æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">vTaskDelay</td>
<td style="text-align:center">é˜»å¡å»¶æ—¶ä¸€æ®µç›¸å¯¹æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">xTaskGetSchedulerState</td>
<td style="text-align:center">è·å–ä»»åŠ¡è°ƒåº¦å™¨çš„çŠ¶æ€ï¼Œå¼€å¯æˆ–æœªå¼€å¯</td>
</tr>
<tr>
<td style="text-align:center">xTaskResumeFromISR</td>
<td style="text-align:center">åœ¨ä¸­æ–­æœåŠ¡å‡½æ•°ä¸­æ¢å¤ä¸€ä¸ªä»»åŠ¡çš„è¿è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">xQueueGetMutexHolder</td>
<td style="text-align:center">è·å–ä¿¡å·é‡çš„é˜Ÿåˆ—æ‹¥æœ‰è€…ï¼Œè¿”å›æ‹¥æœ‰æ­¤ä¿¡å·é‡çš„é˜Ÿåˆ—</td>
</tr>
<tr>
<td style="text-align:center">xSemaphoreGetMutexHolder</td>
<td style="text-align:center">æŸ¥è¯¢æ‹¥æœ‰äº’æ–¥é”çš„ä»»åŠ¡ï¼Œè¿”å›ä»»åŠ¡æ§åˆ¶å—</td>
</tr>
<tr>
<td style="text-align:center">pcTaskGetTaskName</td>
<td style="text-align:center">è·å–ä»»åŠ¡åç§°</td>
</tr>
<tr>
<td style="text-align:center">uxTaskGetStackHighWaterMark</td>
<td style="text-align:center">è·å–ä»»åŠ¡çš„å †æ ˆçš„å†å²å‰©ä½™æœ€å°å€¼</td>
</tr>
<tr>
<td style="text-align:center">xTaskGetCurrentTaskHandle</td>
<td style="text-align:center">æ­¤å‡½æ•°ç”¨äºè·å–å½“å‰ä»»åŠ¡çš„ä»»åŠ¡å¥æŸ„</td>
</tr>
<tr>
<td style="text-align:center">eTaskGetState</td>
<td style="text-align:center">æ­¤å‡½æ•°ç”¨äºæŸ¥è¯¢æŸä¸ªä»»åŠ¡çš„è¿è¡Œå£®æ€</td>
</tr>
<tr>
<td style="text-align:center">xEventGroupSetBitFromISR</td>
<td style="text-align:center">åœ¨ä¸­æ–­æœåŠ¡å‡½æ•°ä¸­å°†æŒ‡å®šçš„äº‹ä»¶ä½æ¸…é›¶</td>
</tr>
<tr>
<td style="text-align:center">xTimerPendFunctionCall</td>
<td style="text-align:center">å®šæ—¶å™¨å®ˆæŠ¤ä»»åŠ¡çš„å›è°ƒå‡½æ•°ï¼ˆå®šæ—¶å™¨å®ˆæŠ¤ä»»åŠ¡ä½¿ç”¨åˆ°ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—ï¼Œåªè¦å‘é˜Ÿåˆ—å‘é€ä¿¡å·å°±å¯ä»¥æ‰§è¡Œç›¸åº”ä»£ç ï¼Œå¯ä»¥å®ç°â€œä¸­æ–­æ¨è¿Ÿå¤„ç†â€åŠŸèƒ½ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">xTaskAbortDelay</td>
<td style="text-align:center">ä¸­æ­¢å»¶æ—¶å‡½æ•°ï¼Œè¯¥å‡½æ•°èƒ½ç«‹å³è§£é™¤ä»»åŠ¡çš„é˜»å¡çŠ¶æ€ï¼Œå°†ä»»åŠ¡æ’å…¥å°±ç»ªåˆ—è¡¨ä¸­</td>
</tr>
<tr>
<td style="text-align:center">xTaskGetHandle</td>
<td style="text-align:center">æ­¤å‡½æ•°æ ¹æ®ä»»åŠ¡åå­—è·å–çš„ä»»åŠ¡å¥æŸ„</td>
</tr>
</tbody>
</table>
</div>
<h2 id="ä¸‰ã€Tasks-and-Queuesâ€”â€”åˆ›å»ºä»»åŠ¡ä¸é˜Ÿåˆ—"><a href="#ä¸‰ã€Tasks-and-Queuesâ€”â€”åˆ›å»ºä»»åŠ¡ä¸é˜Ÿåˆ—" class="headerlink" title="ä¸‰ã€Tasks and Queuesâ€”â€”åˆ›å»ºä»»åŠ¡ä¸é˜Ÿåˆ—"></a><strong>ä¸‰ã€Tasks and Queues</strong>â€”â€”åˆ›å»ºä»»åŠ¡ä¸é˜Ÿåˆ—</h2><h3 id="1-ä»»åŠ¡åˆ›å»º"><a href="#1-ä»»åŠ¡åˆ›å»º" class="headerlink" title="1.ä»»åŠ¡åˆ›å»º"></a>1.ä»»åŠ¡åˆ›å»º</h3><img src="/images/loading.png" data-original="/2022/08/25/FreeRTOS-3/freertos_taskadd.jpg" class title="This is an image"> 
<p>å…·ä½“å†…å®¹å·²åœ¨<a href="https://dhkkk.gitee.io/2022/08/23/FreeRTOS-2/">FreeRTOSçš„ä»»åŠ¡ç›¸å…³ | å°è‘£çš„BLOG (gitee.io)</a>ä¸­è®²åˆ°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li><p>Task Nameä¸ºä»»åŠ¡<strong>åç§°</strong>ï¼ŒEntry Functionæ‰æ˜¯ä»»åŠ¡å®ä½“ï¼Œå³è¿è¡Œçš„<strong>ä»»åŠ¡å‡½æ•°å…¥å£</strong>ï¼ˆå‡½æ•°åï¼‰</p>
</li>
<li><p>ä»»åŠ¡çš„ä¼˜å…ˆçº§ç»†åˆ†æœ‰å„ç­‰çº§ä¼˜å…ˆçº§ï¼Œè¯¦è§æ–‡ç« æœ€åå¯¹äºä¼˜å…ˆçº§é—®é¢˜çš„ç†è§£</p>
</li>
<li><p>Code Generationä¸ºä»£ç ç”Ÿæˆæ¨¡å¼ï¼Œç»†åˆ†ä¸º</p>
<ul>
<li>As weakï¼š äº§ç”Ÿä¸€ä¸ªç”¨ __weak ä¿®é¥°çš„å¼±å®šä¹‰ä»»åŠ¡å‡½æ•°ï¼Œç”¨æˆ·å¯è‡ªå·±å†è¿›è¡Œå®šä¹‰</li>
<li>As externalï¼š äº§ç”Ÿä¸€ä¸ªå¤–éƒ¨å¼•ç”¨çš„ä»»åŠ¡å‡½æ•°ï¼Œç”¨æˆ·éœ€è¦è‡ªå·±å®šä¹‰è¯¥å‡½æ•°</li>
<li>Defaultï¼š äº§ç”Ÿä¸€ä¸ªé»˜è®¤æ ¼å¼çš„ä»»åŠ¡å‡½æ•°ï¼Œç”¨æˆ·éœ€è¦åœ¨è¯¥å‡½æ•°å†…å®ç°è‡ªå·±çš„åŠŸèƒ½</li>
</ul>
<p>ä¸€èˆ¬ä½¿ç”¨é»˜è®¤æ ¼å¼å³å¯</p>
</li>
<li><p>Allocationä¸ºå®šä¹‰å†…å­˜åˆ†é…æ–¹å¼ï¼Œåˆ†ä¸ºé™æ€ä¸åŠ¨æ€ï¼Œä¸cè¯­è¨€ä¸­staticç”¨æ³•ç±»ä¼¼</p>
</li>
</ul>
<h4 id="CubeMX-æä¾›çš„ä¸€äº›ç”¨æˆ·è°ƒç”¨å‡½æ•°"><a href="#CubeMX-æä¾›çš„ä¸€äº›ç”¨æˆ·è°ƒç”¨å‡½æ•°" class="headerlink" title="CubeMX æä¾›çš„ä¸€äº›ç”¨æˆ·è°ƒç”¨å‡½æ•°"></a>CubeMX æä¾›çš„ä¸€äº›ç”¨æˆ·è°ƒç”¨å‡½æ•°</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‡½æ•°</strong></th>
<th style="text-align:center"><strong>åŠŸèƒ½</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">osThreadNew</td>
<td style="text-align:center">åˆ›å»ºæ–°ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">osThreadGetName</td>
<td style="text-align:center">è·å–ä»»åŠ¡åç§°</td>
</tr>
<tr>
<td style="text-align:center">osThreadGetId</td>
<td style="text-align:center">è·å–å½“å‰ä»»åŠ¡çš„æ§åˆ¶å—ï¼ˆTCBï¼‰</td>
</tr>
<tr>
<td style="text-align:center">osThreadGetState</td>
<td style="text-align:center">è·å–å½“å‰ä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:center">osThreadGetStackSize</td>
<td style="text-align:center">è·å–ä»»åŠ¡çš„å †æ ˆå¤§å°</td>
</tr>
<tr>
<td style="text-align:center">osThreadGetStackSpace</td>
<td style="text-align:center">è·å–ä»»åŠ¡å‰©ä½™çš„å †æ ˆå¤§å°</td>
</tr>
<tr>
<td style="text-align:center">osThreadSetPriority</td>
<td style="text-align:center">è®¾å®šä»»åŠ¡ä¼˜å…ˆçº§</td>
</tr>
<tr>
<td style="text-align:center">osThreadGetPriority</td>
<td style="text-align:center">è·å–ä»»åŠ¡ä¼˜å…ˆçº§</td>
</tr>
<tr>
<td style="text-align:center">osThreadYield</td>
<td style="text-align:center">åˆ‡æ¢æ§åˆ¶æƒç»™ä¸‹ä¸€ä¸ªä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">osThreadSuspend</td>
<td style="text-align:center">æŒ‚èµ·ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">osThreadResume</td>
<td style="text-align:center">æ¢å¤ä»»åŠ¡ï¼ˆæŒ‚èµ·å¤šå°‘æ¬¡æ¢å¤å¤šå°‘æ¬¡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">osThreadDetach</td>
<td style="text-align:center">åˆ†ç¦»ä»»åŠ¡ï¼Œæ–¹ä¾¿ä»»åŠ¡ç»“æŸè¿›è¡Œå›æ”¶</td>
</tr>
<tr>
<td style="text-align:center">osThreadJoin</td>
<td style="text-align:center">ç­‰å¾…æŒ‡å®šçš„ä»»åŠ¡åœæ­¢</td>
</tr>
<tr>
<td style="text-align:center">osThreadExit</td>
<td style="text-align:center">åœæ­¢å½“å‰ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">osThreadTerminate</td>
<td style="text-align:center">åœæ­¢æŒ‡å®šä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">osThreadGetCount</td>
<td style="text-align:center">è·å–æ¿€æ´»çš„ä»»åŠ¡æ•°é‡</td>
</tr>
<tr>
<td style="text-align:center">osThreadEnumerate</td>
<td style="text-align:center">åˆ—ä¸¾æ¿€æ´»çš„ä»»åŠ¡</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-é˜Ÿåˆ—åˆ›å»º"><a href="#2-é˜Ÿåˆ—åˆ›å»º" class="headerlink" title="2.é˜Ÿåˆ—åˆ›å»º"></a>2.é˜Ÿåˆ—åˆ›å»º</h3><p>FreeRTOSä¸­çš„é˜Ÿåˆ—æ˜¯ä¸€ç§ç”¨äºå®ç°ã€ä»»åŠ¡ä¸ä»»åŠ¡ã€‘ï¼Œã€ä»»åŠ¡ä¸ä¸­æ–­ã€‘ä»¥åŠã€ä¸­æ–­ä¸ä»»åŠ¡ã€‘ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ã€‚æ­¤å¤–ï¼Œä»»åŠ¡ä»é˜Ÿåˆ—è¯»æ•°æ®æˆ–è€…å†™å…¥æ•°æ®åˆ°é˜Ÿåˆ—æ—¶ï¼Œéƒ½å¯èƒ½è¢«é˜»å¡ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—ä»»åŠ¡å¯ä»¥è¢«è®¾è®¡æˆåŸºäºäº‹ä»¶é©±åŠ¨çš„è¿è¡Œæ¨¡å¼ï¼Œå¤§å¤§æé«˜äº†CPUçš„æ‰§è¡Œæ•ˆç‡ã€‚é˜Ÿåˆ—æ˜¯å®ç°FreeRTOSä¸­å…¶ä»–ç‰¹æ€§çš„åŸºç¡€ç»„ä»¶ï¼Œåƒè½¯ä»¶å®šæ—¶å™¨ï¼Œä¿¡å·é‡ï¼Œäº’æ–¥é”éƒ½æ˜¯åŸºäºé˜Ÿåˆ—è€Œå®ç°çš„ã€‚</p>
<p>åœ¨æ“ä½œç³»ç»Ÿé‡Œé¢ï¼Œç›´æ¥ä½¿ç”¨å…¨å±€å˜é‡ä¼ è¾“æ•°æ®ååˆ†å±é™©ï¼Œçœ‹ä¼¼æ­£å¸¸è¿è¡Œï¼Œä½†ä¸çŸ¥é“å•¥æ—¶å€™å°±ä¼šå› ä¸ºå¯„å­˜å™¨æˆ–è€…å†…å­˜ç­‰ç­‰åŸå› å¼•èµ·å´©æºƒï¼Œæ‰€ä»¥å¼•å…¥æ¶ˆæ¯ï¼Œé˜Ÿåˆ—çš„æ¦‚å¿µã€‚</p>
<h4 id="é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§"><a href="#é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§" class="headerlink" title="é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§"></a>é˜Ÿåˆ—çš„åŸºæœ¬ç‰¹æ€§</h4><p>é˜Ÿåˆ—æ˜¯ä¸€ç§FIFOæ“ä½œçš„æ•°æ®ç»“æ„ï¼Œå…¥é˜Ÿæ“ä½œå°±æ˜¯æŠŠä¸€ä¸ªæ–°çš„å…ƒç´ æ”¾è¿›é˜Ÿå°¾(tail)ï¼Œå‡ºé˜Ÿæ“ä½œå°±æ˜¯ä»é˜Ÿå¤´(front)å–å‡ºä¸€ä¸ªå…ƒç´ ã€‚FreeRTOSä¸­ä¹Ÿæ”¯æŒæŠŠä¸€ä¸ªå…ƒç´ æ”¾åˆ°é˜Ÿå¤´çš„æ“ä½œï¼Œè¿™ä¸ªæ“ä½œä¼š<strong>è¦†ç›–</strong>ä¹‹å‰é˜Ÿå¤´çš„å…ƒç´ ã€‚</p>
<h4 id="å…¥é˜Ÿç­–ç•¥"><a href="#å…¥é˜Ÿç­–ç•¥" class="headerlink" title="å…¥é˜Ÿç­–ç•¥"></a>å…¥é˜Ÿç­–ç•¥</h4><p>é˜Ÿåˆ—åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œä¸»è¦æœ‰ä¸¤ç§å…ƒç´ å…¥é˜Ÿå­˜å‚¨ç­–ç•¥ï¼šQueue by copy å’Œ Queue by referenceã€‚FreeRTOSçš„é˜Ÿåˆ—ä½¿ç”¨çš„æ˜¯Queue by copyå­˜å‚¨ç­–ç•¥ï¼Œè€ƒè™‘åˆ°è¿™ç§ç­–ç•¥å®ç°èµ·æ¥æ›´åŠ ç®€å•ï¼Œçµæ´»ï¼Œä¸”å®‰å…¨ã€‚</p>
<ul>
<li>Queue by copyï¼šæ•°æ®å…¥é˜Ÿçš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ˜¯æ­¤æ•°æ®çš„ä¸€ä»½æ‹·è´</li>
<li>Queue by referenceï¼šæ•°æ®é˜Ÿåˆ—çš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ˜¯æ•°æ®çš„æŒ‡é’ˆï¼Œè€Œéæ•°æ®æœ¬èº«</li>
</ul>
<h4 id="å…¥é˜Ÿå µå¡"><a href="#å…¥é˜Ÿå µå¡" class="headerlink" title="å…¥é˜Ÿå µå¡"></a>å…¥é˜Ÿå µå¡</h4><p>ä¸€ä¸ªä»»åŠ¡åœ¨å°è¯•å†™å…¥æ•°æ®åˆ°é˜Ÿåˆ—æ—¶ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªé˜»å¡æ—¶é—´ï¼Œå³ä»»åŠ¡åœ¨<strong>ç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºä½™ç©ºé—´ï¼ˆéæ»¡ï¼‰å¯å†™å‰æœ€é•¿ç­‰å¾…é˜»å¡æ—¶é—´</strong>ã€‚å½“é˜Ÿåˆ—ä¸­æœ‰ç©ºé—´å¯å†™å…¥æ—¶ï¼Œä»»åŠ¡ä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ã€‚å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…é˜Ÿåˆ—ä¸€ç›´æ˜¯æ»¡çš„ï¼Œåˆ™ç­‰å¾…æ—¶é—´åˆ°æœŸåï¼Œä»»åŠ¡ä¹Ÿä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ï¼Œä½†æ˜¯å®ƒä¼šè¿”å›ä¸€ä¸ªå†™å…¥å¤±è´¥çš„ç»“æœã€‚</p>
<p>é˜Ÿåˆ—å¯èƒ½æœ‰å¤šä¸ªwriterTaskï¼Œæ‰€ä»¥åœ¨ç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºé—²ç©ºé—´æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªä»»åŠ¡é˜»å¡ã€‚<strong>å½“é˜Ÿåˆ—æœ‰ç©ºé—²ç©ºé—´å¯å†™æ—¶ï¼Œè°ƒåº¦å™¨ä¼šä»æ‰€æœ‰é˜»å¡çš„ä»»åŠ¡ä¸­é€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªä»»åŠ¡è®©å…¶è¿›å…¥åˆ°å°±ç»ªæ€</strong>ã€‚<strong>å¦‚æœæœ€é«˜ä¼˜å…ˆçº§çš„ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™è®©ç­‰å¾…æœ€ä¹…çš„é‚£ä¸ªè¿›å…¥åˆ°å°±ç»ªæ€ã€‚</strong></p>
<h4 id="å‡ºé˜Ÿå µå¡"><a href="#å‡ºé˜Ÿå µå¡" class="headerlink" title="å‡ºé˜Ÿå µå¡"></a><strong>å‡ºé˜Ÿå µå¡</strong></h4><p>ä¸€ä¸ªä»»åŠ¡åœ¨å°è¯•ä»é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®æ—¶ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªé˜»å¡æ—¶é—´ï¼Œå³ä»»åŠ¡åœ¨ç­‰å¾…é˜Ÿåˆ—æœ‰å…ƒç´ å¯è¯»å‰æœ€é•¿ç­‰å¾…é˜»å¡æ—¶é—´ã€‚å½“é˜Ÿåˆ—ä¸­æœ‰å…ƒç´ å¯è¯»æ—¶ï¼Œä»»åŠ¡ä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ã€‚å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…é˜Ÿåˆ—ä¸€ç›´æ²¡æœ‰æ•°æ®å¯è¯»ï¼Œåˆ™ç­‰å¾…æ—¶é—´åˆ°æœŸåï¼Œä»»åŠ¡ä¹Ÿä¼šè‡ªåŠ¨ä»é˜»å¡æ€è½¬æ¢ä¸ºå°±ç»ªæ€ï¼Œä½†æ˜¯å®ƒä¼šè¿”å›ä¸€ä¸ªè¯»å–å¤±è´¥çš„ç»“æœã€‚</p>
<p>é˜Ÿåˆ—å¯èƒ½æœ‰å¤šä¸ªreader Taskï¼Œæ‰€ä»¥åœ¨ç­‰å¾…é˜Ÿåˆ—æœ‰æ•°æ®å¯è¯»æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªä»»åŠ¡é˜»å¡ã€‚<strong>å½“é˜Ÿåˆ—æœ‰æ•°æ®å¯è¯»æ—¶ï¼Œè°ƒåº¦å™¨ä¼šä»æ‰€æœ‰é˜»å¡çš„ä»»åŠ¡ä¸­é€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªä»»åŠ¡è®©å…¶è¿›å…¥åˆ°å°±ç»ªæ€ã€‚å¦‚æœæœ€é«˜ä¼˜å…ˆçº§çš„ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™è®©ç­‰å¾…æœ€ä¹…çš„é‚£ä¸ªè¿›å…¥åˆ°å°±ç»ªæ€ã€‚</strong></p>
<h4 id="ç›¸å…³APIå‡½æ•°ï¼ˆéoså‡½æ•°ï¼ŒåŸåšå®¢ä¸­æä¾›çš„oså‡½æ•°ä¸é€‚ç”¨äºv1ç‰ˆæœ¬ï¼‰ï¼ˆå·²æµ‹è¯•ï¼Œå¯ç”¨ï¼‰"><a href="#ç›¸å…³APIå‡½æ•°ï¼ˆéoså‡½æ•°ï¼ŒåŸåšå®¢ä¸­æä¾›çš„oså‡½æ•°ä¸é€‚ç”¨äºv1ç‰ˆæœ¬ï¼‰ï¼ˆå·²æµ‹è¯•ï¼Œå¯ç”¨ï¼‰" class="headerlink" title="ç›¸å…³APIå‡½æ•°ï¼ˆéoså‡½æ•°ï¼ŒåŸåšå®¢ä¸­æä¾›çš„oså‡½æ•°ä¸é€‚ç”¨äºv1ç‰ˆæœ¬ï¼‰ï¼ˆå·²æµ‹è¯•ï¼Œå¯ç”¨ï¼‰"></a>ç›¸å…³APIå‡½æ•°ï¼ˆéoså‡½æ•°ï¼ŒåŸåšå®¢ä¸­æä¾›çš„oså‡½æ•°ä¸é€‚ç”¨äºv1ç‰ˆæœ¬ï¼‰ï¼ˆå·²æµ‹è¯•ï¼Œå¯ç”¨ï¼‰</h4><ul>
<li><p>é˜Ÿåˆ—åˆ›å»º</p>
<p>ä½¿ç”¨xQueueCreate()å†…æ ¸å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„1å­˜å‚¨ç©ºé—´ä»FreeRTOS heapä¸­åˆ†é…ã€‚åœ¨ä½¿ç”¨xQueueCreate()åˆ›å»ºé˜Ÿåˆ—æ—¶ï¼Œå¦‚æœFreeRTOS heapä¸­æ²¡æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´åˆ†é…ç»™å½“å‰é˜Ÿåˆ—ï¼Œåˆ™å‡½æ•°è¿”å›NULLã€‚å¦‚æœåˆ›å»ºæˆåŠŸï¼Œåˆ™è¿”å›é˜Ÿåˆ—çš„å¥æŸ„(QueueHandle_tç±»å‹)</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">QueueHandle_t xQueueCreate( UBaseType_t uxQueueLength, UBaseType_t uxItemSize );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>uxQueueLength</strong>ï¼šæŒ‡å®šé˜Ÿåˆ—çš„é•¿åº¦ï¼Œå³æœ€å¤šå¯ä»¥å­˜æ”¾çš„å…ƒç´ ä¸ªæ•°<br><strong>uxItemSize</strong>ï¼šé˜Ÿåˆ—ä¸­å­˜å‚¨çš„å…ƒç´ çš„å¤§å°ï¼ˆå ç”¨çš„å­—èŠ‚æ•°ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">è¿”å›NULLä»£è¡¨åˆ›å»ºå¤±è´¥ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å †ç©ºé—´æ¥åˆ›å»ºå½“å‰é˜Ÿåˆ—ï¼›åˆ›å»ºæˆåŠŸåˆ™è¿”å›é˜Ÿåˆ—çš„å¥æŸ„</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>å…ƒç´ å…¥é˜Ÿ</p>
<p>ä½¿ç”¨xQueueSendToBack()å‡½æ•°æ¥å‘é˜Ÿå°¾å­˜æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œä½¿ç”¨xQueueSend()å‡½æ•°æ¥å‘é˜Ÿé¦–å­˜æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œä¸¤ä¸ªå‡½æ•°ç”¨æ³•ä¸€æ ·</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">BaseType_t xQueueSendToBack( QueueHandle_t xQueue,<br>                                                                        const void * pvItemToQueue,<br>                                                       TickType_t xTicksToWait );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>xQueue</strong>ï¼šç›®æ ‡é˜Ÿåˆ—çš„å¥æŸ„<br><strong>pvItemToQueue</strong>ï¼šå…¥é˜Ÿå…ƒç´ çš„æŒ‡é’ˆã€‚é˜Ÿåˆ—å°†å­˜å‚¨æ­¤æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®çš„å¤‡ä»½<br><strong>xTicksToWait</strong>ï¼šæŒ‡å®šç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºé—´å¯ä»¥å®¹çº³æ–°å…ƒç´ å…¥é˜Ÿçš„æœ€é•¿ç­‰å¾…ï¼ˆé˜»å¡ï¼‰æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">å½“å…ƒç´ æˆåŠŸå…¥é˜Ÿæ—¶è¿”å›pdPASSï¼Œå› ä¸ºé˜Ÿåˆ—æ»¡è€Œæ— æ³•å…¥é˜Ÿæ—¶è¿”å›errQUEUE_FULLï¼ˆè¶…æ—¶åï¼‰</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>å…ƒç´ å‡ºé˜Ÿ</p>
<p>ä½¿ç”¨xQueueReceive()å†…æ ¸å‡½æ•°æ¥ä»é˜Ÿåˆ—ä¸­è¯»å–é˜Ÿå¤´å…ƒç´ ï¼Œ<strong>è¯»å–æˆåŠŸåé˜Ÿåˆ—å°†åˆ é™¤è¿™ä¸ªå…ƒç´ </strong>ï¼Œå®ç°å…ƒç´ å‡ºé˜Ÿæ“ä½œã€‚</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">BaseType_t xQueueReceive( QueueHandle_t xQueue,<br>                                                  void * const pvBuffer,<br>                                              TickType_t xTicksToWait );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>xQueue</strong>ï¼šç›®æ ‡é˜Ÿåˆ—çš„å¥æŸ„<br><strong>pvBuffer</strong>ï¼šç”¨äºå­˜æ”¾è¯»å–åˆ°çš„é˜Ÿåˆ—å…ƒç´ çš„ç¼“å†²åŒºï¼Œé˜Ÿåˆ—å°†æŠŠå‡ºé˜Ÿçš„å…ƒç´ æ‹·è´åˆ°æ­¤ç¼“å†²åŒºä¸­<br><strong>xTicksToWait</strong>ï¼šæŒ‡å®šç­‰å¾…é˜Ÿåˆ—æœ‰æ•°æ®å¯è¯»çš„æœ€é•¿ç­‰å¾…ï¼ˆé˜»å¡ï¼‰æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">å½“æˆåŠŸä»é˜Ÿåˆ—è¯»å–åˆ°å…ƒç´ æ—¶è¿”å›pdPASSï¼Œå› ä¸ºé˜Ÿåˆ—ç©ºè€Œæ— æ³•å‡ºé˜Ÿæ—¶è¿”å›errQUEUE_EMPTY</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>æŸ¥è¯¢é˜Ÿåˆ—å…ƒç´ ä¸ªæ•°</p>
<p>ä½¿ç”¨å†…æ ¸å‡½æ•°uxQueueMessagesWaiting()æ¥è·å–é˜Ÿåˆ—ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ </p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">UBaseType_t uxQueueMessagesWaiting( QueueHandle_t xQueue );</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>xQueue</strong>ï¼šé˜Ÿåˆ—çš„å¥æŸ„</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œè¿”å›0ä»£è¡¨é˜Ÿåˆ—ä¸ºç©º</td>
</tr>
</tbody>
</table>
</div>
<p>è€è§„çŸ©ï¼Œæ¥ä¸ªæŒ‰é”®ä¾‹ç¨‹ï¼ˆå¯ä»¥æ­£å¸¸è¿è¡Œï¼‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">task1</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//ä½ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  BaseType_t result; </span><br><span class="line">  <span class="type">uint8_t</span> dat[]=<span class="string">&quot;666\r\n&quot;</span>;</span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">	<span class="keyword">if</span>(HAL_GPIO_ReadPin(key_1_GPIO_Port,key_1_Pin == GPIO_PIN_SET))</span><br><span class="line">	&#123;</span><br><span class="line">		result= xQueueSendToBack(myQueue01Handle,dat,portMAX_DELAY);</span><br><span class="line">		<span class="keyword">if</span>(result==pdPASS)</span><br><span class="line">		&#123;</span><br><span class="line">			HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_RESET);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">   	osDelay(<span class="number">5</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">task2</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//é«˜ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  BaseType_t result;</span><br><span class="line">  <span class="type">uint8_t</span> datbuf[<span class="number">10</span>]; <span class="comment">//éšä¾¿å®šä¹‰ä¸ªç¼“å†²åŒºå°±å¯ä»¥</span></span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">	result=xQueueReceive(myQueue01Handle,datbuf,portMAX_DELAY);</span><br><span class="line">	<span class="keyword">if</span>(result==pdPASS)</span><br><span class="line">	&#123;</span><br><span class="line">		HAL_GPIO_WritePin(led_r_GPIO_Port,led_r_Pin,GPIO_PIN_RESET);</span><br><span class="line">	&#125;</span><br><span class="line">	osDelay(<span class="number">10</span>);</span><br><span class="line">  &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ‡’å¾—å»æ‰¾oså‡½æ•°äº†ï¼Œåº“å‡½æ•°æŒºå¥½ç”¨çš„æ˜¯å§ğŸ˜‹</p>
<h2 id="å››ã€äº‹ä»¶-ç»„"><a href="#å››ã€äº‹ä»¶-ç»„" class="headerlink" title="å››ã€äº‹ä»¶(ç»„)"></a>å››ã€äº‹ä»¶(ç»„)</h2><h3 id="å†™åœ¨å‰é¢2022-8-27"><a href="#å†™åœ¨å‰é¢2022-8-27" class="headerlink" title="å†™åœ¨å‰é¢2022.8.27"></a>å†™åœ¨å‰é¢2022.8.27</h3><p><strong>ç›®å‰ç½‘ä¸Šå¯¹äºoså‡½æ•°çš„ä½¿ç”¨æ•™ç¨‹å¾ˆå°‘ï¼Œè€Œä¸”å¤§éƒ¨åˆ†éƒ½æœ‰é—®é¢˜ï¼Œæœ¬å°èŠ‚è®²åˆ°çš„oså‡½æ•°ä½¿ç”¨æ–¹æ³•æ„Ÿè§‰BUGæ˜¯çœŸçš„å¤šï¼Œæäº†æ•´æ•´ä¸¤å¤©ä¹Ÿæ— æ³•å®Œå…¨å®ç°æƒ³è¦çš„åŠŸèƒ½ï¼Œè€Œä¸”æ€»æ˜¯ä¸€äº›è«åå…¶å¦™çš„é—®é¢˜ï¼Œæ„Ÿè§‰æ˜¯ä¸ä»»åŠ¡è°ƒåº¦æœ‰å…³ï¼Œä½†æ˜¯å§‹ç»ˆæ²¡æ‰¾åˆ°çœŸæ­£åŸå› ï¼Œäººéƒ½éº»äº†QAQã€‚æ‰€ä»¥æœ¬å°èŠ‚ï¼ˆäº‹ä»¶ï¼‰ä»…æä¾›æ€è·¯ï¼Œæ— æ³•ä¿è¯èƒ½æ­£å¸¸è¿è¡Œã€‚ï¼ˆæ–°æ‰‹å»ºè®®ç›´æ¥è·³è¿‡ï¼Œé«˜æ‰‹å¯ä»¥æ‰¾æ‰¾åŸå› ï¼‰</strong></p>
<p><strong>åœ¨å°è¯•ä¸¤å¤©å‘ç°æ•ˆæœæå·®åï¼Œæœæ–­æ¢ä»»åŠ¡é€šçŸ¥çš„æ–¹æ³•ï¼Œä½¿ç”¨èµ·æ¥å¯ä»¥è¯´å¾ˆä¸æ»‘äº†ï¼Œç¬¬ä¸€æ¬¡ç”¨å°±å¯ä»¥æ­£å¸¸å®ç°åŠŸèƒ½ï¼ˆä»æœªå¦‚æ­¤ç¾å¦™çš„å¼€å±€ï¼ï¼ï¼‰ä¹ŸåŸºæœ¬èƒ½ä»£æ›¿äº‹ä»¶é€šçŸ¥çš„åŠŸèƒ½ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ä»»åŠ¡é€šçŸ¥ï¼ˆè§ä¸‹æ–‡ï¼‰</strong></p>
<p><strong>æ²¡æœ‰è¯•è¿‡åº“å‡½æ•°ï¼Œå› ä¸ºå‘ç°ä»»åŠ¡é€šçŸ¥å¤Ÿç”¨äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è¯•ä¸€ä¸‹</strong></p>
<p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>åˆ†å‰²çº¿<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p>
<ul>
<li>å…ˆåˆ—å‡ºcubemxæä¾›çš„äº‹ä»¶ç»„å‡½æ•°ï¼š</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‡½æ•°</strong></th>
<th style="text-align:center"><strong>åŠŸèƒ½</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">osEventFlagsNew</td>
<td style="text-align:center">åˆ›å»ºäº‹ä»¶æ ‡å¿—ç»„</td>
</tr>
<tr>
<td style="text-align:center">*osEventFlagsGetName</td>
<td style="text-align:center">è·å–äº‹ä»¶æ ‡å¿—ç»„åç§°</td>
</tr>
<tr>
<td style="text-align:center">osEventFlagsSet</td>
<td style="text-align:center">è®¾ç½®äº‹ä»¶æ ‡å¿—ç»„</td>
</tr>
<tr>
<td style="text-align:center">osEventFlagsClear</td>
<td style="text-align:center">æ¸…é™¤äº‹ä»¶æ ‡å¿—ç»„</td>
</tr>
<tr>
<td style="text-align:center">osEventFlagsGet</td>
<td style="text-align:center">è·å–å½“å‰äº‹ä»¶ç»„æ ‡å¿—ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">osEventFlagsWait</td>
<td style="text-align:center">ç­‰å¾…äº‹ä»¶æ ‡å¿—ç»„è§¦å‘</td>
</tr>
<tr>
<td style="text-align:center">osEventFlagsDelete</td>
<td style="text-align:center">åˆ é™¤äº‹ä»¶æ ‡å¿—ç»„</td>
</tr>
</tbody>
</table>
</div>
<h3 id="å…·ä½“é…ç½®"><a href="#å…·ä½“é…ç½®" class="headerlink" title="å…·ä½“é…ç½®"></a>å…·ä½“é…ç½®</h3><p><em>å¯¹äºç½‘ç»œä¸Šçš„è§£é‡Šæ„Ÿè§‰æœ‰ç‚¹æ™¦æ¶©éš¾æ‡‚ï¼Œè‡ªå·±æ€»ç»“äº†å®¹æ˜“ç†è§£çš„æ–¹æ³•ï¼Œä»…ä¾›å‚è€ƒ</em></p>
<p>äº‹ä»¶çš„ä½œç”¨ä¸»è¦æ˜¯å®ç°ä»»åŠ¡é—´é€šä¿¡çš„æœºåˆ¶ï¼Œä¸»è¦ç”¨äºå®ç°å¤šä»»åŠ¡é—´çš„åŒæ­¥ï¼Œä½†æ˜¯äº‹ä»¶ç±»å‹é€šä¿¡åªèƒ½æ˜¯<strong>äº‹ä»¶ç±»å‹çš„é€šä¿¡</strong>ï¼Œ<strong>æ²¡æœ‰æ•°æ®ä¼ è¾“</strong></p>
<p>ä½¿ç”¨æµç¨‹ï¼š</p>
<ul>
<li>åœ¨cubemxä¸­é…ç½®ç›¸å…³äº‹ä»¶å¥æŸ„ç­‰</li>
<li>åœ¨ç¨‹åºä¸­å®šä¹‰è§¦å‘äº‹ä»¶ä½</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> event1 1&lt;&lt;1 	<span class="comment">//äº‹ä»¶1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> event2 1&lt;&lt;2 	<span class="comment">//äº‹ä»¶2</span></span></span><br></pre></td></tr></table></figure>
<p>äº‹ä»¶æ ‡å¿—ç»„ä¸­çš„æ‰€æœ‰äº‹ä»¶ä½éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªæ— ç¬¦å·çš„ EventBits_t ç±»å‹çš„å˜é‡ï¼ˆ<strong>äº‹ä»¶ç»„</strong>ï¼‰ä¸­ï¼ˆä¾‹å¦‚ä¸‹æ–‡ä¸­çš„resultï¼‰ï¼Œå½“ configUSE_16_BIT_TICKS ä¸º 1 çš„æ—¶å€™äº‹ä»¶æ ‡å¿—ç»„å¯ä»¥å­˜å‚¨ 8 ä¸ªäº‹ä»¶ä½ï¼Œå½“ configUSE_16_BIT_TICKS ä¸º 0 çš„æ—¶å€™äº‹ä»¶æ ‡å¿—ç»„å­˜å‚¨ 24ä¸ªäº‹ä»¶ä½ï¼Œæ¯ä¸ªäº‹ä»¶ä½å…¶å®å°±æ˜¯ä¸€ä¸ª0æˆ–è€…1æ•°å­—</p>
<ul>
<li>å®šä¹‰äº‹ä»¶ç»„ï¼ˆåœ¨è§¦å‘ä»»åŠ¡å’Œä½¿ç”¨åˆ°ç­‰å¾…äº‹ä»¶å‡½æ•°çš„ä»»åŠ¡ä¸­å‡éœ€å®šä¹‰ï¼Œå®šä¹‰æˆå±€éƒ¨å˜é‡æ„Ÿè§‰æ–¹ä¾¿ç‚¹ï¼‰</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">osStatus_t result;<span class="comment">//ä¹Ÿå¯ä»¥ç”¨ EventBits_t ä¸è¿‡è¿‡ç¨‹ä¼šéº»çƒ¦ä¸€ç‚¹</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯å¯¹osStatus_tçš„å®šä¹‰ï¼Œæ–¹ä¾¿æŸ¥é˜…</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">enum</span> &#123;</span></span><br><span class="line">  osOK                      =  <span class="number">0</span>,         <span class="comment">///&lt; Operation completed successfully.</span></span><br><span class="line">  osError                   = <span class="number">-1</span>,         <span class="comment">///&lt; Unspecified RTOS error: run-time error but no other error message fits.</span></span><br><span class="line">  osErrorTimeout            = <span class="number">-2</span>,         <span class="comment">///&lt; Operation not completed within the timeout period.</span></span><br><span class="line">  osErrorResource           = <span class="number">-3</span>,         <span class="comment">///&lt; Resource not available.</span></span><br><span class="line">  osErrorParameter          = <span class="number">-4</span>,         <span class="comment">///&lt; Parameter error.</span></span><br><span class="line">  osErrorNoMemory           = <span class="number">-5</span>,         <span class="comment">///&lt; System is out of memory: it was impossible to allocate or reserve memory for the operation.</span></span><br><span class="line">  osErrorISR                = <span class="number">-6</span>,         <span class="comment">///&lt; Not allowed in ISR context: the function cannot be called from interrupt service routines.</span></span><br><span class="line">  osStatusReserved          = <span class="number">0x7FFFFFFF</span>  <span class="comment">///&lt; Prevents enum down-size compiler optimization.</span></span><br><span class="line">&#125; osStatus_t;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>è®¾ç½®äº‹ä»¶æ ‡å¿—ï¼ˆè§¦å‘æ¡ä»¶ï¼‰</p>
<p>ä»¥æŒ‰é”®è§¦å‘ä¸ºä¾‹ï¼šï¼ˆå¯ä»¥æ­£å¸¸è¿è¡Œï¼‰</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">event</span><span class="params">(<span class="type">void</span> *argument)</span></span><br><span class="line">&#123;</span><br><span class="line">	osStatus_t result;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(HAL_GPIO_ReadPin(key_1_GPIO_Port,key_1_Pin)!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            result = osEventFlagsSet(key_pHandle,event1);</span><br><span class="line">            <span class="keyword">if</span>(result == osOK)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;äº‹ä»¶1è§¦å‘æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;äº‹ä»¶1è§¦å‘å¤±è´¥&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(HAL_GPIO_ReadPin(key_2_GPIO_Port,key_2_Pin)!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            result = osEventFlagsSet(key_pHandle,event2);</span><br><span class="line">            <span class="keyword">if</span>(result == osOK)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;äº‹ä»¶2è§¦å‘æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;äº‹ä»¶2è§¦å‘å¤±è´¥&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç­‰å¾…äº‹ä»¶æ ‡å¿—</li>
</ul>
<p>ç­‰å¾…å‡½æ•°å‚æ•°ä»‹ç»ï¼š</p>
<p><code>uint32_t osEventFlagsWait (osEventFlagsId_t ef_id, uint32_t flags, uint32_t options, uint32_t timeout);</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‚æ•°</strong></th>
<th style="text-align:center"><strong>åŠŸèƒ½</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ef_id</td>
<td style="text-align:center">äº‹ä»¶æ ‡å¿—ç»„æ§åˆ¶å¥æŸ„</td>
</tr>
<tr>
<td style="text-align:center">flags</td>
<td style="text-align:center">ç­‰å¾…çš„äº‹ä»¶ä½</td>
</tr>
<tr>
<td style="text-align:center">options</td>
<td style="text-align:center">ç­‰å¾…äº‹ä»¶ä½çš„æ“ä½œ<br>osFlagsWaitAny ï¼šç­‰å¾…çš„äº‹ä»¶ä½æœ‰ä»»æ„ä¸€ä¸ªç­‰åˆ°å°±æ¢å¤ä»»åŠ¡<br>osFlagsWaitAllï¼šç­‰å¾…çš„äº‹ä»¶ä½å…¨éƒ¨ç­‰åˆ°æ‰æ¢å¤ä»»åŠ¡<br>osFlagsNoClearï¼šç­‰å¾…æˆåŠŸåä¸æ¸…æ¥šæ‰€ç­‰å¾…çš„æ ‡å¿—ä½ï¼ˆé»˜è®¤æ¸…é™¤ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">timeout</td>
<td style="text-align:center">ç­‰å¾…äº‹ä»¶ç»„çš„ç­‰å¾…æ—¶é—´ï¼ˆç­‰å¾…æœŸé—´ä»»åŠ¡æŒ‚èµ·åœ¨å†…æ ¸å¯¹è±¡çš„æŒ‚èµ·é˜Ÿåˆ—ï¼‰</td>
</tr>
</tbody>
</table>
</div>
<p>ä½¿ç”¨ä¾‹å­ï¼šåŒæ—¶ç­‰å¾…äº‹ä»¶1å’Œäº‹ä»¶2ï¼Œä¸”ç­‰å¾…åˆ°ä¸æ¸…é™¤</p>
<p><strong>ï¼ˆè¯¥ä»»åŠ¡ç”±äºæœªçŸ¥åŸå› ä¸èƒ½æ­£å¸¸è¿è¡Œï¼Œä»…æä¾›æ€è·¯ï¼‰</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">wait_task</span><span class="params">(<span class="type">void</span> *argument)</span></span><br><span class="line">&#123;</span><br><span class="line">	osStatus_t result;</span><br><span class="line">	<span class="keyword">for</span>(;;)</span><br><span class="line">	&#123;</span><br><span class="line">		result = osEventFlagsWait(myEvent01Handle,</span><br><span class="line">								  event1|event2,</span><br><span class="line">								  osFlagsWaitAll,</span><br><span class="line">								  <span class="number">10</span>);</span><br><span class="line">		<span class="keyword">if</span>(result == osOK)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="comment">//å¯ä½¿ç”¨é˜»å¡ã€æŒ‚èµ·ç­‰æ–¹å¼è¿›å…¥å…¶ä»–ä»»åŠ¡æˆ–ç›´æ¥åœ¨æ­¤å¤„è¿›è¡Œå…¶ä»–æ“ä½œ</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">		<span class="comment">//æœªè§¦å‘ç­‰å¾…</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº”ã€ä»»åŠ¡é€šçŸ¥"><a href="#äº”ã€ä»»åŠ¡é€šçŸ¥" class="headerlink" title="äº”ã€ä»»åŠ¡é€šçŸ¥"></a>äº”ã€ä»»åŠ¡é€šçŸ¥</h2><h3 id="å†™åœ¨å‰é¢-2022-8-27"><a href="#å†™åœ¨å‰é¢-2022-8-27" class="headerlink" title="å†™åœ¨å‰é¢ 2022.8.27"></a>å†™åœ¨å‰é¢ 2022.8.27</h3><p><strong>æœ¬æ–‡æœ€å¼€å§‹å‚è€ƒçš„æ˜¯<a href="https://blog.csdn.net/qq_45396672/article/details/120877303?ops_request_misc={&quot;request_id&quot;:&quot;166155998716782395375007&quot;,&quot;scm&quot;:&quot;20140713.130102334..&quot;}&amp;request_id=166155998716782395375007&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-120877303-null-null.142^v42^control,185^v2^tag_show&amp;utm_term=freertos"> CubeMXä½¿ç”¨FreeRTOSç¼–ç¨‹æŒ‡å—_TopåµŒå…¥å¼çš„åšå®¢-CSDNåšå®¢_cubemx freertos</a>ä½†æ˜¯åœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¯ä»¥è¯´æœ‰å¾ˆå¤šæ¼æ´ç”šè‡³é”™è¯¯ï¼Œæœ¬å°èŠ‚åœ¨å‚è€ƒåšå®¢ä¸­æ‰€æä¾›çš„flagå‡½æ•°å¥½åƒæ ¹æœ¬ä¸æ˜¯ä»»åŠ¡é€šçŸ¥çš„å‡½æ•°ï¼ˆï¼Ÿï¼‰å¹¶ä¸”å…¶æ‰€è¯´çš„ä½¿ç”¨æ–¹æ³•ä¸­è¿å‡½æ•°çš„å…¥å£å‚æ•°éƒ½å†™é”™äº†ï¼Œï¼ˆä¸æ™“å¾—ä»–è‡ªå·±è·‘è¿‡è‡ªå·±å†™çš„ç¨‹åºæ²¡æœ‰ğŸ˜…ï¼‰æ‰€ä»¥å…³äºflagç›¸å…³å‡½æ•°åœ¨è¿™é‡Œä»…æä¾›å‡½æ•°å†…å®¹ï¼Œç”¨æ³•å°±ä¸æ¢ç´¢äº†ï¼Œåé¢ä¼šè®²åˆ°æˆ‘å®é™…è·‘è¿‡å¹¶å¯ä»¥ä½¿ç”¨çš„ä»»åŠ¡é€šçŸ¥å‡½æ•°ã€‚</strong></p>
<h3 id="flagç›¸å…³å‡½æ•°ä»‹ç»"><a href="#flagç›¸å…³å‡½æ•°ä»‹ç»" class="headerlink" title="flagç›¸å…³å‡½æ•°ä»‹ç»"></a>flagç›¸å…³å‡½æ•°ä»‹ç»</h3><p>FreeRTOS çš„æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ª 32 ä½çš„é€šçŸ¥å€¼ï¼Œä»»åŠ¡æ§åˆ¶å—ä¸­çš„æˆå‘˜å˜é‡ ulNotifiedValue å°±æ˜¯è¿™ä¸ªé€šçŸ¥å€¼ã€‚ä»»åŠ¡é€šçŸ¥æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œå‡å¦‚æŸä¸ªä»»åŠ¡é€šçŸ¥çš„æ¥æ”¶ä»»åŠ¡å› ä¸ºç­‰å¾…ä»»åŠ¡é€šçŸ¥è€Œé˜»å¡çš„è¯ï¼Œå‘è¿™ä¸ªæ¥æ”¶ä»»åŠ¡å‘é€ä»»åŠ¡é€šçŸ¥ä»¥åå°±ä¼šè§£é™¤è¿™ä¸ªä»»åŠ¡çš„é˜»å¡çŠ¶æ€ï¼ŒCubeMXå†…æ²¡æœ‰æä¾›ç›¸å…³çš„é…ç½®é¡¹ï¼Œä½†åœ¨å…¶ç”Ÿæˆçš„ FreeRTOS æ¥å£é‡Œé¢æœ‰ç›¸å…³å‡½æ•°è¿›è¡Œé…ç½®ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‡½æ•°</strong></th>
<th style="text-align:center"><strong>åŠŸèƒ½</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">osThreadFlagsSet</td>
<td style="text-align:center">è®¾ç½®ä»»åŠ¡çš„é€šçŸ¥æ ‡å¿—</td>
</tr>
<tr>
<td style="text-align:center">osThreadFlagsClear</td>
<td style="text-align:center">æ¸…é™¤ä»»åŠ¡é€šçŸ¥</td>
</tr>
<tr>
<td style="text-align:center">osThreadFlagsGet</td>
<td style="text-align:center">è·å–ä»»åŠ¡æ ‡å¿—</td>
</tr>
<tr>
<td style="text-align:center">osThreadFlagsWait</td>
<td style="text-align:center">ç­‰å¾…ç‰¹å®šçš„ä»»åŠ¡æ ‡å¿—</td>
</tr>
</tbody>
</table>
</div>
<p><strong>å¸¸ç”¨osThreadFlagsSetï¼ŒosThreadFlagsWaitï¼Œä½¿ç”¨æ–¹å¼ä¸äº‹ä»¶è§¦å‘ç›¸åŒ</strong>ï¼Œä¸å†ç»†è¯´ï¼Œä»…ä»‹ç»ä¸€ä¸‹å‡½æ•°å‚æ•°</p>
<p><code>uint32_t osThreadFlagsWait (uint32_t flags, uint32_t options, uint32_t timeout);</code></p>
<p>å…¶ä¸­optionsçš„å‚æ•°ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>å‚æ•°</strong></th>
<th><strong>åŠŸèƒ½</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>osFlagsWaitAny</td>
<td>ç­‰å¾…32ä½é€šçŸ¥å€¼ä»»æ„ä¸€ä½è§¦å‘åæ¢å¤ä»»åŠ¡ï¼ˆé»˜è®¤ï¼‰</td>
</tr>
<tr>
<td>osFlagsWaitAll</td>
<td>ç­‰å¾…æŒ‡å®šçš„ä»»åŠ¡é€šçŸ¥å€¼å…¨éƒ¨è§¦å‘åå†æ¢å¤ä»»åŠ¡</td>
</tr>
<tr>
<td>osFlagsNoClear</td>
<td>æ¢å¤ä»»åŠ¡åä¸æ¸…é™¤ä»»åŠ¡æ ‡å¿—ï¼ˆé»˜è®¤æ¸…é™¤ï¼‰</td>
</tr>
</tbody>
</table>
</div>
<p><strong>ä»»åŠ¡é€šçŸ¥å…¶å®ä¸ªä»»åŠ¡äº‹ä»¶æ ‡å¿—ç»„ä½¿ç”¨ä¸Šæ²¡æœ‰å¤šå¤§çš„åŒºåˆ«ï¼Œä½†ä»–ä»¬ä¸¤ä¸ªçš„å®ç°åŸç†ä¸åŒï¼ŒåŒæ—¶ä»»åŠ¡é€šçŸ¥å¯¹èµ„æºçš„å ç”¨æ›´å°‘</strong></p>
<p><strong>æ ¹æ® FreeRTOS å®˜æ–¹çš„ç»Ÿè®¡ï¼Œä½¿ç”¨ä»»åŠ¡é€šçŸ¥æ›¿ä»£äºŒå€¼ä¿¡å·é‡çš„æ—¶å€™ä»»åŠ¡è§£é™¤é˜» å¡çš„æ—¶é—´è¦å¿« 45%ï¼Œå¹¶ä¸”éœ€è¦çš„ RAM ä¹Ÿæ›´å°‘</strong></p>
<h3 id="å¯ä»¥å®é™…ä½¿ç”¨çš„ä»»åŠ¡é€šçŸ¥"><a href="#å¯ä»¥å®é™…ä½¿ç”¨çš„ä»»åŠ¡é€šçŸ¥" class="headerlink" title="å¯ä»¥å®é™…ä½¿ç”¨çš„ä»»åŠ¡é€šçŸ¥"></a>å¯ä»¥å®é™…ä½¿ç”¨çš„ä»»åŠ¡é€šçŸ¥</h3><p>ä½¿ç”¨å‰è®°å¾—åœ¨cubemxé…ç½®ä¸­å¼€å¯<code>USE_TASK_NOTIFICATIONS</code>å’Œåœ¨include parametersé‡Œå¼€å¯<code>eTaskGetState</code></p>
<p>FreeRTOS æä¾›ä»¥ä¸‹å‡ ç§æ–¹å¼å‘é€é€šçŸ¥ç»™ä»»åŠ¡ ï¼š</p>
<ul>
<li>å‘é€é€šçŸ¥ç»™ä»»åŠ¡ï¼Œ å¦‚æœæœ‰é€šçŸ¥æœªè¯»ï¼Œä¸è¦†ç›–é€šçŸ¥å€¼ã€‚</li>
<li>å‘é€é€šçŸ¥ç»™ä»»åŠ¡ï¼Œç›´æ¥è¦†ç›–é€šçŸ¥å€¼ã€‚</li>
<li>å‘é€é€šçŸ¥ç»™ä»»åŠ¡ï¼Œè®¾ç½®é€šçŸ¥å€¼çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªä½ ï¼Œå¯ä»¥å½“åšäº‹ä»¶ç»„æ¥ä½¿ç”¨ã€‚</li>
<li>å‘é€é€šçŸ¥ç»™ä»»åŠ¡ï¼Œé€’å¢é€šçŸ¥å€¼ï¼Œå¯ä»¥å½“åšè®¡æ•°ä¿¡å·é‡ä½¿ç”¨ã€‚</li>
</ul>
<p>é€šè¿‡å¯¹ä»¥ä¸Šä»»åŠ¡é€šçŸ¥æ–¹å¼çš„åˆç†ä½¿ç”¨ï¼Œå¯ä»¥åœ¨ä¸€å®šåœºåˆä¸‹æ›¿ä»£ FreeRTOS çš„ä¿¡å·é‡ï¼Œé˜Ÿåˆ—ã€äº‹ä»¶ç»„ç­‰ã€‚</p>
<h4 id="ç›¸å…³apiå‡½æ•°ï¼š"><a href="#ç›¸å…³apiå‡½æ•°ï¼š" class="headerlink" title="ç›¸å…³apiå‡½æ•°ï¼š"></a>ç›¸å…³apiå‡½æ•°ï¼š</h4><ul>
<li>å‘æŒ‡å®šä»»åŠ¡å‘é€ä»»åŠ¡é€šçŸ¥</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‡½æ•°</strong></th>
<th style="text-align:center"><strong>int32_t osSignalSet (osThreadId thread_id, int32_t signal)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center"><strong>thread_idï¼š</strong> æ¥æ”¶é€šçŸ¥çš„ä»»åŠ¡ID<br><strong>signalï¼š</strong>ä»»åŠ¡é€šçŸ¥å€¼ï¼ˆæŒ‰ä½æ“ä½œæ•°å­—ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">é”™è¯¯ç </td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>ç­‰å¾…ä»»åŠ¡é€šçŸ¥</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>å‡½æ•°</strong></th>
<th style="text-align:center"><strong>osEvent osSignalWait (int32_t signals, uint32_t millisec)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">signalsï¼š æ¥æ”¶å®Œæˆåç­‰å¾…è¢«æ¸…é›¶çš„æ•°æ®ä½(0x0001\</td>
<td>0x0002=0x003)<br><strong>millisecï¼š</strong> ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç³»ç»ŸèŠ‚æ‹å‘¨æœŸ</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">é”™è¯¯ç </td>
</tr>
</tbody>
</table>
</div>
<h4 id="å®ä¾‹ï¼ˆæŒ‰é”®è§¦å‘ä»»åŠ¡é€šçŸ¥ï¼Œå·²ç»è¿‡éªŒè¯ï¼‰"><a href="#å®ä¾‹ï¼ˆæŒ‰é”®è§¦å‘ä»»åŠ¡é€šçŸ¥ï¼Œå·²ç»è¿‡éªŒè¯ï¼‰" class="headerlink" title="å®ä¾‹ï¼ˆæŒ‰é”®è§¦å‘ä»»åŠ¡é€šçŸ¥ï¼Œå·²ç»è¿‡éªŒè¯ï¼‰"></a>å®ä¾‹ï¼ˆæŒ‰é”®è§¦å‘ä»»åŠ¡é€šçŸ¥ï¼Œå·²ç»è¿‡éªŒè¯ï¼‰</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> event1 0x0001</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">task1</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//ä½ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN led_G */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">		<span class="keyword">if</span>(HAL_GPIO_ReadPin(key_1_GPIO_Port,key_1_Pin == GPIO_PIN_SET))</span><br><span class="line">		&#123;</span><br><span class="line">			osSignalSet(task2Handle,event1);</span><br><span class="line">		&#125;	</span><br><span class="line">		osDelay(<span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* USER CODE END led_G */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">task2</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * argument)</span> <span class="comment">//é«˜ä¼˜å…ˆçº§ä»»åŠ¡</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN led_B */</span></span><br><span class="line">	osEvent event;	</span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">	event = osSignalWait(event1,osWaitForever);  </span><br><span class="line">	<span class="keyword">if</span>(event.status == osEventSignal)  </span><br><span class="line">	&#123;</span><br><span class="line">		HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_RESET);</span><br><span class="line">	&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œtask2å¯ä»¥ä¸ç”¨é¢å¤–åœ¨å¾ªç¯ä¸­æ·»åŠ å µå¡ï¼Œå› ä¸ºwaitå‡½æ•°æœ¬èº«è‡ªå¸¦å µå¡ï¼Œ<strong>å…¶å µå¡çš„è§£é™¤æ˜¯åœ¨osSignalSetå‡½æ•°çš„ä½œç”¨ä¹‹åçš„ç¬é—´ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ‰§è¡Œå®ŒosSignalSet(task2Handle,event1)åtask2ä¼šç›´æ¥æŠ¢å task1</strong></p>
<p><strong>è€ŒxTaskå‡½æ•°åˆ™æ˜¯åœ¨task1æ‰§è¡Œå®Œåæ‰ä¼šè¿›å…¥task2ï¼Œè¿™ç‚¹è¯·åŠ¡å¿…è®°ä½ï¼ŒäºŒè€…é€šçŸ¥åŸç†ä¸åŒï¼Œä½¿ç”¨æ–¹æ³•å› æ­¤ä¹Ÿä¸åŒ</strong></p>
<h2 id="å…¶ä»–çš„å†…å®¹ä»¥åå†æ¥æ¢ç´¢å§ï¼ˆæŒ‡è¿˜æ²¡å­¦åˆ°ï¼‰XD"><a href="#å…¶ä»–çš„å†…å®¹ä»¥åå†æ¥æ¢ç´¢å§ï¼ˆæŒ‡è¿˜æ²¡å­¦åˆ°ï¼‰XD" class="headerlink" title="å…¶ä»–çš„å†…å®¹ä»¥åå†æ¥æ¢ç´¢å§ï¼ˆæŒ‡è¿˜æ²¡å­¦åˆ°ï¼‰XD"></a>å…¶ä»–çš„å†…å®¹ä»¥åå†æ¥æ¢ç´¢å§ï¼ˆæŒ‡è¿˜æ²¡å­¦åˆ°ï¼‰XD</h2><h1 id="é‡è§çš„ä¸€äº›é—®é¢˜"><a href="#é‡è§çš„ä¸€äº›é—®é¢˜" class="headerlink" title="é‡è§çš„ä¸€äº›é—®é¢˜"></a>é‡è§çš„ä¸€äº›é—®é¢˜</h1><h2 id="ä¸€ã€FreeRTOSçš„æ—¶é’Ÿæºé…ç½®"><a href="#ä¸€ã€FreeRTOSçš„æ—¶é’Ÿæºé…ç½®" class="headerlink" title="ä¸€ã€FreeRTOSçš„æ—¶é’Ÿæºé…ç½®"></a>ä¸€ã€FreeRTOSçš„æ—¶é’Ÿæºé…ç½®</h2><p>å½“ä½¿ç”¨äº†FreeRtosçš„æ—¶å€™ï¼Œå»ºè®®HALåº“ä½¿ç”¨é™¤äº†Systickä»¥å¤–çš„æ—¶é’Ÿæºã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä¸ä½¿ç”¨FreeRtosçš„æ—¶å€™ï¼ŒHALä½¿ç”¨çš„æ˜¯systickä½œä¸ºæ—¶é’Ÿæºï¼Œç°åœ¨ä½¿ç”¨äº†rtosï¼Œä¸å»ºè®®halåº“å’Œrtosä¸€èµ·ä½¿ç”¨systickä½œä¸ºæ—¶é’Ÿæº</p>
<h2 id="äºŒã€ä¼˜å…ˆçº§é—®é¢˜"><a href="#äºŒã€ä¼˜å…ˆçº§é—®é¢˜" class="headerlink" title="äºŒã€ä¼˜å…ˆçº§é—®é¢˜"></a>äºŒã€ä¼˜å…ˆçº§é—®é¢˜</h2><img src="/images/loading.png" data-original="/2022/08/25/FreeRTOS-3/2.jpg" class title="This is an image"> 
<p>è¿™é‡Œæˆ‘è‡ªå·±ä¹Ÿæ²¡å¤ªææ‡‚ï¼Œå§‘ä¸”è°ˆè°ˆè‡ªå·±çš„ç†è§£ï¼š</p>
<p>æŒ‰é“ç†æ¥è¯´cortexå†…æ ¸å¯¹äºä¼˜å…ˆçº§æ•°å€¼æ˜¯è¶Šå°å…¶é€»è¾‘ä¸Šçš„ä¼˜å…ˆåº¦å°±è¶Šé«˜ï¼Œå…¶åœ¨cubemxä¸Šçš„å¤§éƒ¨åˆ†é…ç½®ä¹ŸåŒæ ·ç¬¦åˆè¿™ä¸€åŸåˆ™ï¼Œä½†æ˜¯åœ¨å¯¹äºä»»åŠ¡ä¼˜å…ˆçº§çš„åˆ†é…ä¸Šcubemxé‡‡ç”¨äº†ä¸Šå›¾è¿™ç§lowã€normalç­‰çš„åˆ†é…æ–¹å¼ï¼Œå¹¶ä¸”åœ¨ç¨‹åºä¸­çš„å®šä¹‰æ•°å€¼åˆ™æ˜¯ä¼˜å…ˆçº§æ•°å€¼è¶Šå¤§ï¼Œé€»è¾‘ä¼˜å…ˆåº¦è¶Šé«˜ï¼›è¿™å¯èƒ½æ˜¯cubemxä¸ºäº†æ–¹ä¾¿ç†è§£åšå‡ºçš„ä¼˜åŒ–(ï¼Ÿ)</p>
<h2 id="ä¸‰ã€é˜»å¡é—®é¢˜"><a href="#ä¸‰ã€é˜»å¡é—®é¢˜" class="headerlink" title="ä¸‰ã€é˜»å¡é—®é¢˜"></a>ä¸‰ã€é˜»å¡é—®é¢˜</h2><p><strong>åœ¨ç¨‹åºä¸­çš„é˜»å¡å‡½æ•°â‰ æ­£å¸¸çš„å»¶æ—¶å‡½æ•°</strong>ï¼ï¼ï¼</p>
<p>å½“ç¨‹åºæ‰§è¡Œåˆ°vTaskDelayæˆ–osdelayåä¼šå°†å½“å‰ä»»åŠ¡æ·»åŠ åˆ°å»¶æ—¶ä»»åŠ¡åˆ—è¡¨é‡Œï¼Œå¹¶å¼ºè¡Œåˆ‡æ¢ä»»åŠ¡ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™æ®µé˜»å¡æœŸå†…ï¼Œåªè¦æœ‰ä»»åŠ¡å¤„äºå°±ç»ªæ€ï¼Œå°±ä¼šè¿›å…¥è¯¥ä»»åŠ¡ï¼Œè‹¥å¤šä¸ªä»»åŠ¡å°±ç»ªï¼Œåˆ™æŒ‰ç…§ä¼˜å…ˆçº§è¿›è¡ŒæŠ¢å ã€‚å½“å µå¡æ€çš„ä»»åŠ¡å»¶æ—¶åˆ°æœŸè¿‡åä¼šé‡æ–°è¿›å…¥å°±ç»ªæ€ç­‰å¾…ã€‚</strong>å¹¶ä¸”åœ¨é‡æ–°è¿›å…¥å°±ç»ªæ€åä»»åŠ¡ä¼šä»é˜»å¡ä¹‹åçš„ä½ç½®å¼€å§‹ã€‚</p>
<ul>
<li>ä»»åŠ¡å‡½æ•°å†…å¯ä»¥æ­£å¸¸è°ƒç”¨å»¶æ—¶å‡½æ•°</li>
<li>æŒ‚èµ·è§„å¾‹ä¸é˜»å¡è§„å¾‹åŸºæœ¬ä¸€è‡´</li>
</ul>
<h2 id="å››ã€ä»»åŠ¡æŠ¢å é—®é¢˜"><a href="#å››ã€ä»»åŠ¡æŠ¢å é—®é¢˜" class="headerlink" title="å››ã€ä»»åŠ¡æŠ¢å é—®é¢˜"></a>å››ã€ä»»åŠ¡æŠ¢å é—®é¢˜</h2><p>åŸå…ˆä¸€ç›´ä»¥ä¸ºæŠ¢å å¼å·¥ä½œæµç¨‹ä¸ºï¼šå…ˆè¿è¡Œä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡ï¼Œç›´è‡³å…¶è¢«é˜»å¡ã€æŒ‚èµ·ç­‰ï¼›è¿™æœŸé—´è¿è¡Œä¼˜å…ˆçº§ç¬¬äºŒé«˜çš„ä»»åŠ¡ï¼Œç›´åˆ°å…¶è¢«é˜»å¡ã€æŒ‚èµ·ç­‰ï¼›è‹¥æœ€é«˜ä¼˜å…ˆçº§æ­¤æ—¶å·²å¤„äºå°±ç»ªæ€ï¼Œåˆ™ä¼šåœ¨ç¬¬äºŒä¼˜å…ˆçº§ä»»åŠ¡è¿›å…¥é˜»å¡ç­‰éè¿è¡Œæ€æ—¶è¿›å…¥è¿è¡Œæ€ï¼Œ<strong>ä½†å…¶å®è¿™æ˜¯ä¸å¯¹çš„</strong></p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">task1</span><span class="params">(<span class="type">void</span> *argument)</span><span class="comment">//ä½ä¼˜å…ˆçº§</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN led_R */</span></span><br><span class="line">	HAL_GPIO_WritePin(led_r_GPIO_Port,led_r_Pin,GPIO_PIN_SET);</span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">	HAL_GPIO_TogglePin(led_b_GPIO_Port,led_b_Pin);</span><br><span class="line">	HAL_Delay(<span class="number">5000</span>);</span><br><span class="line">    osDelay(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* USER CODE END led_R */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">task2</span><span class="params">(<span class="type">void</span> *argument)</span><span class="comment">//é«˜ä¼˜å…ˆçº§</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN led_B */</span></span><br><span class="line">	osStatus_t result;</span><br><span class="line">	</span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">		result=osEventFlagsSet(key1_pHandle,event1);</span><br><span class="line">		<span class="keyword">if</span>(result == osOK)</span><br><span class="line">		&#123;</span><br><span class="line">			HAL_GPIO_WritePin(led_r_GPIO_Port,led_r_Pin,GPIO_PIN_RESET);</span><br><span class="line">			HAL_GPIO_WritePin(led_b_GPIO_Port,led_b_Pin,GPIO_PIN_SET);</span><br><span class="line">			HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_SET);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			HAL_GPIO_WritePin(led_b_GPIO_Port,led_b_Pin,GPIO_PIN_RESET);</span><br><span class="line">			HAL_GPIO_WritePin(led_g_GPIO_Port,led_g_Pin,GPIO_PIN_RESET);</span><br><span class="line">		&#125;</span><br><span class="line">		osDelay(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§åŸå…ˆçš„æ€è·¯ï¼Œç¨‹åºå¼€å§‹ï¼Œtask2ä¼šä¼˜å…ˆè¿è¡Œï¼Œè‹¥äº‹ä»¶è®¾å®šæ­£å¸¸ï¼Œæ­¤æ—¶çº¢ç¯ä¼šäº®èµ·ï¼›ç„¶åtask2è¿›å…¥é˜»å¡æ€5msï¼Œtask1è¿›å…¥è¿è¡Œæ€ï¼Œæ­¤æ—¶æŒ‰é“ç†çº¢ç¯ä¼šç†„ç­ï¼Œè“ç¯äº®èµ·5ç§’åï¼Œtask1è¿›å…¥é˜»å¡æ€ï¼Œtask2é‡æ–°è¿è¡Œï¼Œæ­¤æ—¶çº¢ç¯å†äº®ï¼Œè“ç¯ç­ã€‚</p>
<p><strong>ä½†æ˜¯ç°å®æ˜¯ï¼šçº¢ç¯äº®èµ·åï¼Œè“ç¯åªä¼šæå¿«åœ°é—ªçƒä¸€ä¸‹åçº¢ç¯ç»§ç»­äº®èµ·ï¼Œå¹¶ä¸”è“ç¯é—ªçƒçš„é¢‘ç‡å¤§æ¦‚ä¸º5så·¦å³ã€‚</strong></p>
<p>æ‰€ä»¥ï¼ŒçœŸæ­£çš„æŠ¢å æµç¨‹åº”è¯¥æ˜¯ï¼šç¨‹åºå¼€å§‹ï¼Œtask2ä¼šä¼˜å…ˆè¿è¡Œï¼Œè‹¥äº‹ä»¶è®¾å®šæ­£å¸¸ï¼Œæ­¤æ—¶çº¢ç¯ä¼šäº®èµ·ï¼›ç„¶åtask2è¿›å…¥é˜»å¡æ€5msï¼Œ<strong>task1è¿›å…¥è¿è¡Œæ€ï¼Œå½“task1è¿è¡Œ5msåï¼Œtask2çš„é˜»å¡ç»“æŸï¼Œè¿›å…¥å°±ç»ªæ€ï¼Œæ­¤æ—¶task1åˆšåˆšå¼€å§‹è¿è¡ŒHAL_Delay(5000)ï¼Œç”±äºtask2ä¼˜å…ˆçº§æ›´é«˜ä¸”å·²ç»å°±ç»ªï¼Œtask2ç›´æ¥æŠ¢å å¹¶è¿è¡Œï¼ˆæ­¤æ—¶è“ç¯å°±ä¼šç†„ç­ï¼Œå› æ­¤è“ç¯ä¸€æ¬¡åªäº®äº†5msï¼‰ï¼Œè€Œä¸æ˜¯ç­‰åˆ°task1è¿è¡ŒosDelay(10)æ‰ä¼šæŠ¢å </strong>ï¼›å½“task2å†ä¸€æ¬¡è¿›å…¥å µå¡æ—¶ï¼Œtask1ä»ä¸Šæ¬¡è¢«æŠ¢å çš„ä½ç½®ç»§ç»­è¿è¡Œ5msç„¶åè¢«task2æŠ¢å ï¼Œè¿™æ ·ä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°HAL_Delay(5000)ç»“æŸï¼Œè“ç¯æ‰ä¼šå†æ¬¡é—ªçƒä¸€æ¬¡ã€‚</p>
<p>æ€»ç»“ï¼šé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡<strong>ä¸€æ—¦å°±ç»ªåä¼šç«‹åˆ»æŠ¢å </strong>ä¼˜å…ˆçº§ä½çš„ä»»åŠ¡,å“ªæ€•å½“å‰ä½ä¼˜å…ˆçº§æ­£åœ¨è¿è¡Œï¼Œè€Œä¸æ˜¯ç­‰åˆ°ä¼˜å…ˆçº§ä½çš„ä»»åŠ¡è¿›å…¥éè¿è¡Œæ€æ—¶æ‰æŠ¢å ã€‚</p>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>FreeRTOSçš„ä»»åŠ¡ç›¸å…³</title>
    <url>/2022/08/23/FreeRTOS-2/</url>
    <content><![CDATA[<h1 id="ä»»åŠ¡ç›¸å…³"><a href="#ä»»åŠ¡ç›¸å…³" class="headerlink" title="ä»»åŠ¡ç›¸å…³"></a>ä»»åŠ¡ç›¸å…³</h1><h2 id="1ã€RTOSè°ƒåº¦å™¨"><a href="#1ã€RTOSè°ƒåº¦å™¨" class="headerlink" title="1ã€RTOSè°ƒåº¦å™¨"></a>1ã€RTOSè°ƒåº¦å™¨</h2><p>åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªä»»åŠ¡å¾—åˆ°è¿è¡Œï¼ŒRTOSè°ƒåº¦å™¨å†³å®šè¿è¡Œå“ªä¸ªä»»åŠ¡ã€‚è°ƒåº¦å™¨ä¼šä¸æ–­çš„å¯åŠ¨ã€åœæ­¢æ¯ä¸€ä¸ªä»»åŠ¡ï¼Œå®è§‚çœ‹ä¸Šå»å°±åƒæ•´ä¸ªåº”ç”¨ç¨‹åºéƒ½åœ¨æ‰§è¡Œã€‚ä½œä¸ºä»»åŠ¡ï¼Œä¸éœ€è¦å¯¹è°ƒåº¦å™¨çš„æ´»åŠ¨æœ‰æ‰€äº†è§£ï¼Œåœ¨ä»»åŠ¡åˆ‡å…¥åˆ‡å‡ºæ—¶ä¿å­˜ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå¯„å­˜å™¨å€¼ã€å †æ ˆå†…å®¹ï¼‰æ˜¯è°ƒåº¦å™¨ä¸»è¦çš„èŒè´£ã€‚ä¸ºäº†å®ç°è¿™ç‚¹ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½éœ€è¦æœ‰è‡ªå·±çš„å †æ ˆã€‚å½“ä»»åŠ¡åˆ‡å‡ºæ—¶ï¼Œå®ƒçš„æ‰§è¡Œç¯å¢ƒä¼šè¢«ä¿å­˜åœ¨è¯¥ä»»åŠ¡çš„å †æ ˆä¸­ï¼Œè¿™æ ·å½“å†æ¬¡è¿è¡Œæ—¶ï¼Œå°±èƒ½ä»å †æ ˆä¸­æ­£ç¡®çš„æ¢å¤ä¸Šæ¬¡çš„è¿è¡Œç¯å¢ƒã€‚</p>
<h2 id="2ã€ä»»åŠ¡çŠ¶æ€"><a href="#2ã€ä»»åŠ¡çŠ¶æ€" class="headerlink" title="2ã€ä»»åŠ¡çŠ¶æ€"></a>2ã€ä»»åŠ¡çŠ¶æ€</h2><img src="/images/loading.png" data-original="/2022/08/23/FreeRTOS-2/%E4%BB%BB%E5%8A%A1.jpg" class title="This is an image"> 
<h2 id="3ã€ä»»åŠ¡ä¾‹å­ï¼ˆç”¨æˆ·ï¼‰"><a href="#3ã€ä»»åŠ¡ä¾‹å­ï¼ˆç”¨æˆ·ï¼‰" class="headerlink" title="3ã€ä»»åŠ¡ä¾‹å­ï¼ˆç”¨æˆ·ï¼‰"></a>3ã€ä»»åŠ¡ä¾‹å­ï¼ˆç”¨æˆ·ï¼‰</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vATaskFunction</span><span class="params">( <span class="type">void</span> *pvParameters )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/*-- åº”ç”¨ç¨‹åºä»£ç æ”¾åœ¨è¿™é‡Œ. --*/</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* ä»»åŠ¡ä¸å¯ä»¥ä»è¿™ä¸ªå‡½æ•°è¿”å›æˆ–é€€å‡ºã€‚åœ¨è¾ƒæ–°çš„FreeRTOSç§»æ¤åŒ…ä¸­ï¼Œå¦‚æœ</span></span><br><span class="line"><span class="comment">    è¯•å›¾ä»ä¸€ä¸ªä»»åŠ¡ä¸­è¿”å›ï¼Œå°†ä¼šè°ƒç”¨configASSERT()ï¼ˆå¦‚æœå®šä¹‰çš„è¯ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">    å¦‚æœä¸€ä¸ªä»»åŠ¡ç¡®å®è¦é€€å‡ºå‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡åº”è°ƒç”¨vTaskDelete(NULL)</span></span><br><span class="line"><span class="comment">    å‡½æ•°ï¼Œä»¥ä¾¿å¤„ç†ä¸€äº›æ¸…ç†å·¥ä½œã€‚*/</span></span><br><span class="line">    vTaskDelete( <span class="literal">NULL</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚æ­¥å…µv2.6ä¸­åº•ç›˜ä»»åŠ¡</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">chassis_task</span><span class="params">(<span class="type">void</span> *pvParameters)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ç©ºé—²ä¸€æ®µæ—¶é—´</span></span><br><span class="line">    vTaskDelay(CHASSIS_TASK_INIT_TIME);</span><br><span class="line">    <span class="comment">//åº•ç›˜åˆå§‹åŒ–</span></span><br><span class="line">    chassis_init(&amp;chassis_move);</span><br><span class="line">	<span class="comment">//åˆ¤æ–­é¥æ§å™¨åœ¨çº¿çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">while</span> (toe_is_error(DBUSTOE))</span><br><span class="line">	&#123;</span><br><span class="line">      vTaskDelay(CHASSIS_CONTROL_TIME_MS);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//åº•ç›˜å¾ªç¯ä»£ç </span></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">	  <span class="comment">//åº•ç›˜æ¨¡å¼è®¾ç½®</span></span><br><span class="line">      chassis_set_mode(&amp;chassis_move);</span><br><span class="line">      <span class="comment">//çŠ¶æ€åˆ‡æ¢æ•°æ®ä¿å­˜ä¸å¤„ç†</span></span><br><span class="line">      chassis_mode_change_control_transit(&amp;chassis_move);</span><br><span class="line">      <span class="comment">//åº•ç›˜ç›¸å…³åé¦ˆæ•°æ®æ›´æ–°</span></span><br><span class="line">      chassis_feedback_update(&amp;chassis_move);</span><br><span class="line">        ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br><span class="line">	  <span class="comment">//ç³»ç»Ÿå»¶æ—¶</span></span><br><span class="line">	  vTaskDelay(CHASSIS_CONTROL_TIME_MS);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ä»»åŠ¡å‡½æ•°å†³ä¸åº”è¯¥è¿”å›ï¼Œå› æ­¤é€šå¸¸ä»»åŠ¡å‡½æ•°éƒ½æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ã€‚</p>
</li>
<li><p>ä»»åŠ¡ç”±xTaskCreate()å‡½æ•°åˆ›å»ºï¼Œç”±vTaskDelete()å‡½æ•°åˆ é™¤ã€‚ï¼ˆåé¢ä¼šè¯¦ç»†è®²åˆ°ï¼‰</p>
</li>
</ul>
<h2 id="4ã€ç©ºé—²ä»»åŠ¡"><a href="#4ã€ç©ºé—²ä»»åŠ¡" class="headerlink" title="4ã€ç©ºé—²ä»»åŠ¡"></a>4ã€ç©ºé—²ä»»åŠ¡</h2><p> ç©ºé—²ä»»åŠ¡æ˜¯å¯åŠ¨RTOSè°ƒåº¦å™¨æ—¶ç”±å†…æ ¸è‡ªåŠ¨åˆ›å»ºçš„ä»»åŠ¡ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨è¿è¡Œã€‚ç©ºé—²ä»»åŠ¡å…·æœ‰æœ€ä½ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œè¿™æ ·å¦‚æœæœ‰å…¶å®ƒæ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡è¿›å…¥å°±ç»ªæ€å°±å¯ä»¥ç«‹åˆ»è®©å‡ºCPUã€‚</p>
<h3 id="ç©ºé—²ä»»åŠ¡é’©å­å‡½æ•°"><a href="#ç©ºé—²ä»»åŠ¡é’©å­å‡½æ•°" class="headerlink" title="ç©ºé—²ä»»åŠ¡é’©å­å‡½æ•°"></a>ç©ºé—²ä»»åŠ¡é’©å­å‡½æ•°</h3><p>ç©ºé—²ä»»åŠ¡é’©å­æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¯ä¸€ä¸ªç©ºé—²ä»»åŠ¡å‘¨æœŸè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p>
<ul>
<li><strong>å› ä¸ºFreeRTOSå¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªä»»åŠ¡å¤„äºå°±ç»ªæˆ–è¿è¡ŒçŠ¶æ€ï¼Œå› æ­¤é’©å­å‡½æ•°ä¸å¯ä»¥è°ƒç”¨å¯èƒ½å¼•èµ·ç©ºé—²ä»»åŠ¡é˜»å¡çš„APIå‡½æ•°ï¼ˆæ¯”å¦‚vTaskDelay()æˆ–è€…å¸¦æœ‰è¶…æ—¶äº‹ä»¶çš„é˜Ÿåˆ—æˆ–ä¿¡å·é‡å‡½æ•°ï¼‰ã€‚</strong></li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªç©ºé—²é’©å­æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>åœ¨FreeRTOSConfig.hå¤´æ–‡ä»¶ä¸­è®¾ç½®configUSE_IDLE_HOOKä¸º1ï¼›</p>
</li>
<li><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œåå­—å’Œå‚æ•°åŸå‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vApplicationIdleHook</span><span class="params">( <span class="type">void</span> )</span>;</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œ<strong>ä½¿ç”¨è¿™ä¸ªç©ºé—²é’©å­å‡½æ•°è®¾ç½®CPUè¿›å…¥ä½åŠŸè€—æ¨¡å¼</strong>ã€‚</p>
</li>
</ul>
<h2 id="5ã€ä»»åŠ¡çš„åˆ›å»º"><a href="#5ã€ä»»åŠ¡çš„åˆ›å»º" class="headerlink" title="5ã€ä»»åŠ¡çš„åˆ›å»º"></a>5ã€ä»»åŠ¡çš„åˆ›å»º</h2><p>ä»»åŠ¡åˆ›å»ºå’Œåˆ é™¤APIå‡½æ•°ä½äºæ–‡ä»¶task.cä¸­ï¼Œéœ€è¦åŒ…å«task.hå¤´æ–‡ä»¶</p>
<p>å…·ä½“å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BaseType_t xTaskCreate(</span><br><span class="line">           TaskFunction_t pvTaskCode,</span><br><span class="line">           const char * const pcName,</span><br><span class="line">           unsigned short usStackDepth,</span><br><span class="line">           void *pvParameters,</span><br><span class="line">           UBaseType_t uxPriority,</span><br><span class="line">           TaskHandle_t * pvCreatedTask</span><br><span class="line">            );</span><br><span class="line">  ä¾‹ï¼š          </span><br><span class="line">    xTaskCreate( (TaskFunction_t)chassis_task,//åº•ç›˜ä»»åŠ¡</span><br><span class="line">                 (const char *)&quot;chassis_task&quot;,</span><br><span class="line">                 (uint16_t)CHASSIS_STK_SIZE,</span><br><span class="line">                 (void *)NULL,</span><br><span class="line">                 (UBaseType_t)CHASSIS_TASK_PRIO,</span><br><span class="line">                 (TaskHandle_t *)&amp;CHASSISTask_Handler</span><br><span class="line">               );</span><br></pre></td></tr></table></figure>
<h3 id="å‚æ•°æè¿°"><a href="#å‚æ•°æè¿°" class="headerlink" title="å‚æ•°æè¿°"></a>å‚æ•°æè¿°</h3><ul>
<li><p>pvTaskCodeï¼šæŒ‡é’ˆï¼ŒæŒ‡å‘ä»»åŠ¡å‡½æ•°çš„å…¥å£ã€‚</p>
<p>è¿½æº¯åˆ°TaskFunction_tçš„å®šä¹‰å¯ä»¥æ‰¾åˆ°</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="title function_">void</span> <span class="params">(*TaskFunction_t)</span><span class="params">( <span class="type">void</span> * )</span>;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤„æ¶‰åŠCè¯­è¨€ä¸­typedefçš„ä¸€ä¸ªä½¿ç”¨æ–¹æ³•</p>
<p>â€‹    void (<em>TaskFunction_t)( void </em> )æ„ä¸ºå®šä¹‰äº†ä¸€ä¸ªåä¸ºTaskFunction_tï¼Œå…¥å£å‚æ•°ç±»å‹ä¸ºvoid*å‹ï¼Œè¿”å›å€¼ä¸ºvoidå‹çš„å‡½æ•°æŒ‡é’ˆå˜é‡ï¼›è€Œåœ¨ä½¿ç”¨typedefåå†è¿›è¡ŒTaskFunction_t  pvTaskCodeçš„æ“ä½œï¼Œåˆ™æ„ä¸ºTaskFunction_tåœ¨è¿™é‡Œä½œä¸ºç±»çš„åˆ«åï¼Œè€Œ pvTaskCodeä½œä¸ºç±»çš„å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½¿ç”¨typedefåï¼Œå¯ä»¥å°†æ­¤å¤„çš„TaskFunction_tç†è§£ä¸ºä¸€ä¸ªç±»ä¼¼äºintï¼Œvoidä¹‹ç±»çš„ç±»å‹</p>
<p>åšä¸ªæ€»ç»“ï¼šæ­¤å¤„</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="title function_">void</span> <span class="params">(*TaskFunction_t)</span><span class="params">( <span class="type">void</span> * )</span>;</span><br><span class="line">TaskFunction_t pvTaskCode;</span><br></pre></td></tr></table></figure>
<p>ç­‰åŒäºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void (*pvTaskCode)( void * );</span><br></pre></td></tr></table></figure>
<p><strong>ä¹Ÿå°±æ˜¯è¯´ï¼ŒpvTaskCodeå…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ</strong></p>
<p>ï¼ˆæ­¤ç”¨æ³•åŒæ­¥æ”¶å½•äºâ€œCè¯­è¨€å­¦ä¹ -ä¸€äº›å…³é”®å­—-typedef-æŒ‡é’ˆâ€ä¸€æ ï¼‰</p>
</li>
<li><p>pcNameï¼šä»»åŠ¡æè¿°ï¼Œåå­—ã€‚å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ç”±å®configMAX_TASK_NAME_LENæŒ‡å®š</p>
</li>
<li><p>usStackDepthï¼šæŒ‡å®šä»»åŠ¡å †æ ˆå¤§å°ï¼Œèƒ½å¤Ÿæ”¯æŒçš„å †æ ˆå˜é‡æ•°é‡ï¼Œè€Œ<strong>ä¸æ˜¯å­—èŠ‚æ•°</strong>ã€‚</p>
</li>
</ul>
<ul>
<li>pvParametersï¼šæŒ‡é’ˆï¼Œå½“ä»»åŠ¡åˆ›å»ºæ—¶ï¼Œä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ä»»åŠ¡ã€‚</li>
</ul>
<ul>
<li><p>uxPriorityï¼šä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚</p>
</li>
<li><p>pvCreatedTaskï¼šç”¨äºå›ä¼ ä¸€ä¸ªå¥æŸ„ï¼ˆIDï¼‰ï¼Œåˆ›å»ºä»»åŠ¡åå¯ä»¥ä½¿ç”¨è¿™ä¸ªå¥æŸ„å¼•ç”¨ä»»åŠ¡</p>
</li>
</ul>
<h3 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p> å¦‚æœä»»åŠ¡æˆåŠŸåˆ›å»ºå¹¶åŠ å…¥å°±ç»ªåˆ—è¡¨å‡½æ•°è¿”å›pdPASSï¼Œå¦åˆ™å‡½æ•°è¿”å›é”™è¯¯ç ï¼Œå…·ä½“å‚è§projdefs.hã€‚</p>
<h3 id="ç”¨æ³•ï¼ˆä¸ªäººï¼‰"><a href="#ç”¨æ³•ï¼ˆä¸ªäººï¼‰" class="headerlink" title="ç”¨æ³•ï¼ˆä¸ªäººï¼‰"></a>ç”¨æ³•ï¼ˆä¸ªäººï¼‰</h3><ul>
<li>åˆ›å»ºä»»åŠ¡å…·ä½“å†…å®¹ï¼Œä¾‹å¦‚ä¸Šé¢çš„chassis_task</li>
<li>åˆ›å»ºé’ˆå¯¹freertosçš„ä»»åŠ¡ï¼ˆxTaskCreateï¼‰</li>
<li>ä½¿ç”¨freertosè°ƒåº¦ä»»åŠ¡</li>
</ul>
<h2 id="6-ä»»åŠ¡çš„åˆ é™¤"><a href="#6-ä»»åŠ¡çš„åˆ é™¤" class="headerlink" title="6.ä»»åŠ¡çš„åˆ é™¤"></a>6.ä»»åŠ¡çš„åˆ é™¤</h2><p>å‡½æ•°å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTaskDelete</span><span class="params">( TaskHandle_t xTask )</span>;</span><br></pre></td></tr></table></figure>
<p>ä»RTOSå†…æ ¸ç®¡ç†å™¨ä¸­åˆ é™¤ä¸€ä¸ªä»»åŠ¡ã€‚ä»»åŠ¡åˆ é™¤åå°†ä¼šä»å°±ç»ªã€é˜»å¡ã€æš‚åœå’Œäº‹ä»¶åˆ—è¡¨ä¸­ç§»é™¤ã€‚åœ¨é…ç½®å¤´æ–‡ä»¶ä¸­ï¼Œå¿…é¡»å®šä¹‰å®INCLUDE_vTaskDelete ä¸º1ï¼Œæœ¬å‡½æ•°æ‰æœ‰æ•ˆã€‚è¢«åˆ é™¤çš„ä»»åŠ¡ï¼Œå…¶åœ¨ä»»åŠ¡åˆ›å»ºæ—¶ç”±å†…æ ¸åˆ†é…çš„å­˜å‚¨ç©ºé—´ï¼Œä¼šç”±ç©ºé—²ä»»åŠ¡é‡Šæ”¾ã€‚å¦‚æœæœ‰åº”ç”¨ç¨‹åºè°ƒç”¨xTaskDelete()ï¼Œå¿…é¡»ä¿è¯ç©ºé—²ä»»åŠ¡è·å–ä¸€å®šçš„å¾®æ§åˆ¶å™¨å¤„ç†æ—¶é—´ã€‚ä»»åŠ¡ä»£ç è‡ªå·±åˆ†é…çš„å†…å­˜æ˜¯ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾çš„ï¼Œå› æ­¤åˆ é™¤ä»»åŠ¡å‰ï¼Œåº”è¯¥å°†è¿™äº›å†…å­˜é‡Šæ”¾ã€‚</p>
<h1 id="ä»»åŠ¡æ§åˆ¶"><a href="#ä»»åŠ¡æ§åˆ¶" class="headerlink" title="ä»»åŠ¡æ§åˆ¶"></a>ä»»åŠ¡æ§åˆ¶</h1><h2 id="å»¶æ—¶ï¼ˆé˜»å¡ï¼‰"><a href="#å»¶æ—¶ï¼ˆé˜»å¡ï¼‰" class="headerlink" title="å»¶æ—¶ï¼ˆé˜»å¡ï¼‰"></a>å»¶æ—¶ï¼ˆé˜»å¡ï¼‰</h2><h3 id="1-ç›¸å¯¹å»¶æ—¶"><a href="#1-ç›¸å¯¹å»¶æ—¶" class="headerlink" title="1.ç›¸å¯¹å»¶æ—¶"></a>1.ç›¸å¯¹å»¶æ—¶</h3><ul>
<li><p>void vTaskDelay( portTickType xTicksToDelay )ï¼›</p>
<p>å‚æ•°æè¿°ï¼šxTicksToDelayï¼šå»¶æ—¶æ—¶é—´æ€»æ•°ï¼Œå•ä½æ˜¯ç³»ç»Ÿæ—¶é’ŸèŠ‚æ‹å‘¨æœŸ</p>
</li>
</ul>
<p>vTaskDelay()æŒ‡å®šçš„å»¶æ—¶æ—¶é—´æ˜¯ä»è°ƒç”¨vTaskDelay()åå¼€å§‹è®¡ç®—çš„ç›¸å¯¹æ—¶é—´ã€‚æ¯”å¦‚vTaskDelay(100)ï¼Œé‚£ä¹ˆä»è°ƒç”¨vTaskDelay()åï¼Œä»»åŠ¡è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç»è¿‡100ä¸ªç³»ç»Ÿæ—¶é’ŸèŠ‚æ‹å‘¨æœŸï¼Œä»»åŠ¡è§£é™¤é˜»å¡ã€‚å› æ­¤ï¼ŒvTaskDelay()å¹¶ä¸é€‚ç”¨ä¸å‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„åœºåˆã€‚å› ä¸ºè°ƒç”¨vTaskDelay()åˆ°ä»»åŠ¡è§£é™¤é˜»å¡çš„æ—¶é—´ä¸æ€»æ˜¯å›ºå®šçš„å¹¶ä¸”è¯¥ä»»åŠ¡ä¸‹ä¸€æ¬¡è°ƒç”¨vTaskDelay()å‡½æ•°çš„æ—¶é—´ä¹Ÿä¸æ€»æ˜¯å›ºå®šçš„ï¼ˆä¸¤æ¬¡æ‰§è¡ŒåŒä¸€ä»»åŠ¡çš„æ—¶é—´é—´éš”æœ¬èº«å°±ä¸å›ºå®šï¼Œä¸­æ–­æˆ–é«˜ä¼˜å…ˆçº§ä»»åŠ¡æŠ¢å ä¹Ÿå¯èƒ½ä¼šæ”¹å˜æ¯ä¸€æ¬¡æ‰§è¡Œæ—¶é—´ï¼‰ã€‚</p>
<p>åœ¨æ–‡ä»¶FreeRTOSConfig.hä¸­ï¼Œå®INCLUDE_vTaskDelay å¿…é¡»è®¾ç½®æˆ1ï¼Œæ­¤å‡½æ•°æ‰èƒ½æœ‰æ•ˆã€‚</p>
<h3 id="2-ç»å¯¹å»¶æ—¶"><a href="#2-ç»å¯¹å»¶æ—¶" class="headerlink" title="2.ç»å¯¹å»¶æ—¶"></a>2.ç»å¯¹å»¶æ—¶</h3><ul>
<li><p>void vTaskDelayUntil( TickType_t *pxPreviousWakeTime, const TickType_tx TimeIncrement );</p>
<p>å‚æ•°æè¿°ï¼š</p>
<ul>
<li>pxPreviousWakeTimeï¼šæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡ä¿å­˜ä»»åŠ¡æœ€åä¸€æ¬¡è§£é™¤é˜»å¡çš„æ—¶é—´ã€‚ç¬¬ä¸€æ¬¡ä½¿ç”¨å‰ï¼Œ<strong>è¯¥å˜é‡å¿…é¡»åˆå§‹åŒ–ä¸ºå½“å‰æ—¶é—´</strong>ã€‚ä¹‹åè¿™ä¸ªå˜é‡ä¼šåœ¨vTaskDelayUntil()å‡½æ•°å†…<strong>è‡ªåŠ¨æ›´æ–°</strong>ã€‚</li>
<li>xTimeIncrementï¼šå‘¨æœŸå¾ªç¯æ—¶é—´ã€‚å½“<strong>å½“å‰æ—¶é—´</strong>ç­‰äºpxPreviousWakeTime+xTimeIncrementæ—¶ä»»åŠ¡ä¼šè§£é™¤é˜»å¡ã€‚</li>
</ul>
</li>
</ul>
<p>åº”å½“æŒ‡å‡ºçš„æ˜¯ï¼Œå¦‚æœæŒ‡å®šçš„å”¤é†’æ—¶é—´å·²ç»è¾¾åˆ°ï¼ŒvTaskDelayUntil()ç«‹åˆ»è¿”å›ï¼ˆä¸ä¼šæœ‰é˜»å¡ï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨vTaskDelayUntil()å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ— è®ºä»»ä½•åŸå› ï¼ˆæ¯”å¦‚ï¼Œä»»åŠ¡ä¸´æ—¶è¿›å…¥æŒ‚èµ·çŠ¶æ€ï¼‰åœæ­¢äº†å‘¨æœŸæ€§æ‰§è¡Œï¼Œä½¿å¾—ä»»åŠ¡å°‘è¿è¡Œäº†ä¸€ä¸ªæˆ–å¤šä¸ªæ‰§è¡Œå‘¨æœŸï¼Œ<strong>é‚£ä¹ˆéœ€è¦é‡æ–°è®¡ç®—æ‰€éœ€è¦çš„å”¤é†’æ—¶é—´</strong>ã€‚ï¼ˆä¾‹å¦‚ä»»åŠ¡æŒ‚èµ·æ€ç»“æŸåï¼Œå½“å‰çš„ç»å¯¹æ—¶é—´å·²ç»è¶…è¿‡æŒ‡å®šçš„å”¤é†’æ—¶é—´ï¼ŒvTaskDelayUntil()ä¼šç«‹åˆ»è¿”å›ï¼Œä¸”æ­¤æ—¶éœ€è¦é‡æ–°è·å¾—å½“å‰æ—¶é—´ï¼‰è¿™å¯ä»¥é€šè¿‡ä¼ é€’ç»™å‡½æ•°çš„æŒ‡é’ˆå‚æ•°pxPreviousWakeæŒ‡å‘çš„å€¼ä¸å½“å‰ç³»ç»Ÿæ—¶é’Ÿè®¡æ•°å€¼æ¯”è¾ƒæ¥æ£€æµ‹ã€‚<br>ä¾‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¯10æ¬¡ç³»ç»ŸèŠ‚æ‹æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"> <span class="type">void</span> <span class="title function_">vTaskFunction</span><span class="params">( <span class="type">void</span> * pvParameters )</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="type">static</span> portTickType xLastWakeTime;</span><br><span class="line">     <span class="type">const</span> portTickType xFrequency = <span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// ä½¿ç”¨å½“å‰æ—¶é—´åˆå§‹åŒ–å˜é‡xLastWakeTime</span></span><br><span class="line">     xLastWakeTime = xTaskGetTickCount();</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">     &#123;</span><br><span class="line">     	<span class="comment">// éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œä»£ç æ”¾åœ¨è¿™é‡Œ</span></span><br><span class="line">     	.........</span><br><span class="line">     	<span class="comment">//ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ</span></span><br><span class="line">         vTaskDelayUntil( &amp;xLastWakeTime,xFrequency ); </span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡ä»¶FreeRTOSConfig.hä¸­ï¼Œå®INCLUDE_vTaskDelayUntil å¿…é¡»è®¾ç½®æˆ1ï¼Œæ­¤å‡½æ•°æ‰æœ‰æ•ˆã€‚</p>
<h2 id="è·å–ä¼˜å…ˆçº§"><a href="#è·å–ä¼˜å…ˆçº§" class="headerlink" title="è·å–ä¼˜å…ˆçº§"></a>è·å–ä¼˜å…ˆçº§</h2><ul>
<li><p>UBaseType_t uxTaskPriorityGet(TaskHandle_t xTask )ï¼›</p>
<p>å‚æ•°æè¿°ï¼š</p>
<ul>
<li>xTaskï¼šä»»åŠ¡å¥æŸ„ã€‚NULLè¡¨ç¤ºè·å–å½“å‰ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚</li>
</ul>
</li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vAFunction</span><span class="params">( <span class="type">void</span> )</span></span><br><span class="line"> &#123;</span><br><span class="line">    xTaskHandle xHandle;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¦ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶ä¿å­˜ä»»åŠ¡å¥æŸ„</span></span><br><span class="line">    xTaskCreate( vTaskCode, <span class="string">&quot;NAME&quot;</span>,STACK_SIZE, <span class="literal">NULL</span>, tskIDLE_PRIORITY, &amp;xHandle );</span><br><span class="line">    <span class="comment">// å½“å‰ä»»åŠ¡ä¼˜å…ˆçº§æ¯”æ–°åˆ›å»ºçš„ä»»åŠ¡ä¼˜å…ˆçº§é«˜ï¼Ÿ</span></span><br><span class="line">    <span class="keyword">if</span>( uxTaskPriorityGet( xHandle ) &lt;uxTaskPriorityGet( <span class="literal">NULL</span> ) )</span><br><span class="line">    &#123;</span><br><span class="line">         <span class="comment">// å½“å‰ä¼˜å…ˆçº§è¾ƒé«˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      ......</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡ä»¶FreeRTOSConfig.hä¸­ï¼Œå®INCLUDE_vTaskPrioritySet å¿…é¡»è®¾ç½®æˆ1ï¼Œæ­¤å‡½æ•°æ‰æœ‰æ•ˆã€‚</p>
<h2 id="ä»»åŠ¡æŒ‚èµ·"><a href="#ä»»åŠ¡æŒ‚èµ·" class="headerlink" title="ä»»åŠ¡æŒ‚èµ·"></a>ä»»åŠ¡æŒ‚èµ·</h2><ul>
<li><p>void vTaskSuspend( TaskHandle_txTaskToSuspend );</p>
<p><strong>è¢«æŒ‚èµ·çš„ä»»åŠ¡ç»ä¸ä¼šå¾—åˆ°å¤„ç†å™¨æ—¶é—´ï¼Œä¸ç®¡è¯¥ä»»åŠ¡å…·æœ‰ä»€ä¹ˆä¼˜å…ˆçº§ã€‚</strong></p>
<p>å‚æ•°æè¿°ï¼š</p>
<ul>
<li>xTaskï¼šä»»åŠ¡å¥æŸ„ã€‚NULLè¡¨ç¤ºè¡¨ç¤ºæŒ‚èµ·å½“å‰ä»»åŠ¡ã€‚</li>
</ul>
</li>
</ul>
<p>åœ¨æ–‡ä»¶FreeRTOSConfig.hä¸­ï¼Œå®INCLUDE_vTaskSuspendå¿…é¡»è®¾ç½®æˆ1ï¼Œæ­¤å‡½æ•°æ‰æœ‰æ•ˆã€‚</p>
<h2 id="è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€"><a href="#è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€" class="headerlink" title="è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€"></a>è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€</h2><ul>
<li>void vTaskResume( TaskHandle_txTaskToResume );</li>
</ul>
<p>å®INCLUDE_vTaskSuspendå¿…é¡»ç½®1ï¼Œæ­¤å‡½æ•°æ‰æœ‰æ•ˆã€‚</p>
<h2 id="è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€ï¼ˆç”¨äºä¸­æ–­æœåŠ¡å‡½æ•°ï¼‰"><a href="#è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€ï¼ˆç”¨äºä¸­æ–­æœåŠ¡å‡½æ•°ï¼‰" class="headerlink" title="è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€ï¼ˆç”¨äºä¸­æ–­æœåŠ¡å‡½æ•°ï¼‰"></a>è§£é™¤ä»»åŠ¡æŒ‚èµ·çŠ¶æ€ï¼ˆç”¨äºä¸­æ–­æœåŠ¡å‡½æ•°ï¼‰</h2><p>è¿˜åœ¨å­¦ä¹ ä¸­ï¼Œæš‚ä¸è®°å½•ã€‚</p>
<h1 id="ä»»åŠ¡è¾…åŠ©è°ƒè¯•ç±»å‡½æ•°"><a href="#ä»»åŠ¡è¾…åŠ©è°ƒè¯•ç±»å‡½æ•°" class="headerlink" title="ä»»åŠ¡è¾…åŠ©è°ƒè¯•ç±»å‡½æ•°"></a>ä»»åŠ¡è¾…åŠ©è°ƒè¯•ç±»å‡½æ•°</h1><p>è¿™ç±»å‡½æ•°ä¸»è¦ç”¨äºè°ƒè¯•ä¿¡æ¯è¾“å‡ºã€è·å–ä»»åŠ¡å¥æŸ„ã€è·å–ä»»åŠ¡çŠ¶æ€ã€æ“ä½œä»»åŠ¡æ ‡ç­¾å€¼ç­‰ç­‰ï¼Œç§ç±»ç¹å¤šï¼Œä¸å†å•ç‹¬æ€»ç»“ï¼Œå…·ä½“å¯è·³è‡³<a href="https://freertos.blog.csdn.net/article/details/50498173">FreeRTOSä»»åŠ¡åº”ç”¨å‡½æ•°_ç ”ç©¶æ˜¯ä¸ºäº†ç†è§£çš„åšå®¢-CSDNåšå®¢</a>ä¸­è®²è§£çš„å¾ˆè¯¦ç»†ã€‚</p>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>FreeRTOS_åŸºæœ¬æ¡†æ¶</title>
    <url>/2022/08/18/FreeRTOS-1/</url>
    <content><![CDATA[<h1 id="1ã€åŸºç¡€å†…å®¹"><a href="#1ã€åŸºç¡€å†…å®¹" class="headerlink" title="1ã€åŸºç¡€å†…å®¹"></a>1ã€åŸºç¡€å†…å®¹</h1><h2 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h2><ul>
<li>è¿è¡Œæ€:ä»»åŠ¡æ­£åœ¨è¿è¡Œçš„çŠ¶æ€ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯æ ¸å¤„ç†å™¨çš„è¯é‚£ä¹ˆä¸ç®¡åœ¨ä»»ä½•æ—¶åˆ»æ°¸è¿œéƒ½åªæœ‰ä¸€ä¸ªä»»åŠ¡å¤„äºè¿è¡Œæ€ã€‚</li>
<li>å°±ç»ªæ€ï¼šå¤„äºå°±ç»ªæ€çš„ä»»åŠ¡æ˜¯é‚£äº›å·²ç»å‡†å¤‡å°±ç»ªï¼ˆè¿™äº›ä»»åŠ¡æ²¡æœ‰è¢«é˜»å¡æˆ–è€…æŒ‚èµ· å¯ä»¥è¿è¡Œçš„ä»»åŠ¡ï¼Œä½†æ˜¯å¤„äºå°±ç»ªæ€çš„ä»»åŠ¡è¿˜æ²¡æœ‰è¿è¡Œï¼Œå› ä¸ºæœ‰ä¸€ä¸ªåŒä¼˜å…ˆçº§æˆ–è€…æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æ­£åœ¨è¿è¡Œï¼‰</li>
<li>é˜»å¡æ€ï¼šå¦‚æœä¸€ä¸ªä»»åŠ¡å½“å‰æ­£åœ¨ç­‰å¾…æŸä¸ªå¤–éƒ¨äº‹ä»¶çš„è¯å°±è¯´å®ƒå¤„äºé˜»å¡æ€,æ¯”å¦‚è¯´å¦‚æœæŸä¸ªä»»åŠ¡è°ƒç”¨äº†å‡½æ•° vTaskDelay()çš„è¯å°±ä¼šè¿›å…¥é˜»å¡æ€ï¼Œ ç›´åˆ°å»¶æ—¶å‘¨æœŸå®Œæˆã€‚ï¼ˆä»»åŠ¡åœ¨ç­‰å¾…é˜Ÿåˆ—ã€ä¿¡å·é‡ã€äº‹ä»¶ç»„ã€é€šçŸ¥æˆ–äº’æ–¥ä¿¡å·é‡çš„æ—¶å€™ä¹Ÿä¼šè¿›å…¥é˜»å¡æ€ ã€‚<strong>ä»»åŠ¡è¿›å…¥é˜»å¡æ€ä¼šæœ‰ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œå½“è¶…è¿‡è¿™ä¸ªè¶…æ—¶æ—¶é—´ä»»åŠ¡å°±ä¼šé€€å‡ºé˜»å¡æ€ï¼Œå³ä½¿æ‰€ç­‰å¾…çš„äº‹ä»¶è¿˜æ²¡æœ‰æ¥ä¸´</strong>ï¼‰</li>
<li>æŒ‚èµ·æ€ï¼šä»»åŠ¡è¿›å…¥æŒ‚èµ·æ€ä»¥åä¹Ÿä¸èƒ½è¢«è°ƒåº¦å™¨è°ƒç”¨è¿›å…¥è¿è¡Œæ€ï¼Œä½†æ˜¯è¿›å…¥æŒ‚èµ·æ€çš„ä»»åŠ¡æ²¡æœ‰è¶…æ—¶æ—¶é—´ã€‚</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä»»åŠ¡ä»é˜»å¡/æŒ‚èµ·æ€é€€å‡ºæ—¶æ˜¯è¿›å…¥çš„å°±ç»ªæ€è€Œéç›´æ¥è¿›å…¥è¿è¡Œæ€ã€‚</p>
<h2 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h2><ul>
<li><p>ä¼˜å…ˆçº§æ•°å­—è¶Š<strong>ä½</strong>è¡¨ç¤ºä»»åŠ¡ä¼˜å…ˆçº§è¶Š<strong>ä½ ï¼ˆé™¤ä½¿ç”¨Cortexå†…æ ¸çš„æƒ…å†µï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼‰</strong></p>
<p>ä¾‹å¦‚å½“ä¸€ä¸ªä»»åŠ¡Aæ­£åœ¨è¿è¡Œï¼Œå¦å¤–ä¸€ä¸ªä»»åŠ¡B(ä¼˜å…ˆçº§é«˜äºA)é˜»å¡æ—¶é—´åˆ°æˆ–è€…äº‹ä»¶è§¦å‘å¤„äºå°±ç»ªæ€ï¼Œé‚£ä¹ˆBä¼šä»Aé‚£æŠ¢å å¤„ç†å™¨ï¼ŒBå¼€å§‹è¿è¡Œï¼ŒAåœæ­¢è¿è¡Œ</p>
<p><strong>â€»â€»â€»â€»â€»å½“ä½¿ç”¨cortexå†…æ ¸æ—¶ç›¸åï¼ˆä¾‹å¦‚STM32)â€»â€»â€»â€»â€»</strong></p>
</li>
<li><p>æ—¶é—´ç‰‡è½®è½¬</p>
<p>å½“å®<code>configUSE_TIME_SLICING</code>å®šä¹‰ä¸º1 çš„æ—¶å€™å¤šä¸ªä»»åŠ¡å¯ä»¥å…±ç”¨ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œæ•°é‡ä¸é™ã€‚æ­¤æ—¶å¤„äºå°±ç»ªæ€çš„ä¼˜å…ˆçº§ç›¸åŒçš„ä»»åŠ¡å°±ä¼šä½¿ç”¨æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦å™¨è·å–è¿è¡Œæ—¶é—´</p>
</li>
</ul>
<h2 id="ä»»åŠ¡å †æ ˆ"><a href="#ä»»åŠ¡å †æ ˆ" class="headerlink" title="ä»»åŠ¡å †æ ˆ"></a>ä»»åŠ¡å †æ ˆ</h2><p>FreeRTOSä¹‹æ‰€ä»¥èƒ½æ­£ç¡®çš„æ¢å¤ä¸€ä¸ªä»»åŠ¡çš„è¿è¡Œå°±æ˜¯å› ä¸ºæœ‰ä»»åŠ¡å †æ ˆåœ¨ä¿é©¾æŠ¤èˆªï¼Œä»»åŠ¡è°ƒåº¦å™¨åœ¨è¿›è¡Œä»»åŠ¡åˆ‡æ¢çš„æ—¶å€™ä¼šå°†å½“å‰ä»»åŠ¡çš„ç°åœº (CPUå¯„å­˜å™¨å€¼ç­‰ )ä¿å­˜åœ¨æ­¤ä»»åŠ¡çš„ä»»åŠ¡å †æ ˆä¸­ï¼Œç­‰åˆ°æ­¤ä»»åŠ¡ä¸‹æ¬¡è¿è¡Œçš„æ—¶å€™å°±ä¼šå…ˆç”¨å †æ ˆä¸­ä¿å­˜çš„å€¼æ¥æ¢å¤ç°åœº ï¼Œæ¢å¤ç°åœºä»¥åä»»åŠ¡å°±ä¼šæ¥ç€ä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹å¼€å§‹è¿è¡Œã€‚</p>
<h1 id="2ã€æœºåˆ¶"><a href="#2ã€æœºåˆ¶" class="headerlink" title="2ã€æœºåˆ¶"></a>2ã€æœºåˆ¶</h1><h2 id="ä»»åŠ¡é€šçŸ¥"><a href="#ä»»åŠ¡é€šçŸ¥" class="headerlink" title="ä»»åŠ¡é€šçŸ¥"></a>ä»»åŠ¡é€šçŸ¥</h2><p>ä»»åŠ¡é€šçŸ¥æ¥ä»£æ›¿ä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶æ ‡å¿—ç»„ç­‰è¿™äº›ä¸œè¥¿ã€‚ä½¿ç”¨ä»»åŠ¡é€šçŸ¥çš„è¯æ•ˆç‡ä¼šæ›´é«˜ã€‚</p>
<h2 id="STM32æ”¯æŒçš„ä½åŠŸè€—æ¨¡å¼"><a href="#STM32æ”¯æŒçš„ä½åŠŸè€—æ¨¡å¼" class="headerlink" title="STM32æ”¯æŒçš„ä½åŠŸè€—æ¨¡å¼"></a>STM32æ”¯æŒçš„ä½åŠŸè€—æ¨¡å¼</h2><ul>
<li><p>sleepç¡çœ æ¨¡å¼</p>
<p>åœ¨ SLEEP æ¨¡å¼ä¸‹ï¼Œåªæœ‰å†…æ ¸åœæ­¢äº†å·¥ä½œï¼Œè€Œå¤–è®¾ä»ç„¶åœ¨è¿è¡Œã€‚<br>åœ¨è¿›å…¥ SLEEP æ¨¡å¼åï¼Œæ‰€æœ‰ä¸­æ–­ï¼ˆâ€˜å¤–éƒ¨ä¸­æ–­ã€ä¸²å£ä¸­æ–­ã€å®šæ—¶å™¨ä¸­æ–­ç­‰â€™ï¼‰å‡å¯å”¤é†’ MCUï¼Œä»è€Œé€€å‡º SLEEP æ¨¡å¼ã€‚</p>
</li>
<li><p>stopåœæ­¢æ¨¡å¼</p>
<p>åœ¨è¿›å…¥ STOP æ¨¡å¼åï¼Œæ­¤æ—¶ SYSTICK ä¹Ÿä¼šè¢«åœæ‰ï¼Œåªæœ‰å¤–éƒ¨ä¸­æ–­ï¼ˆEXTIï¼‰æ‰èƒ½å”¤é†’ MCUç”±äº RTC ä¸­æ–­æŒ‚åœ¨å¤–éƒ¨ä¸­æ–­çº¿ä¸Šï¼Œæ‰€ä»¥ RTC ä¸­æ–­ä¹Ÿèƒ½å”¤é†’ MCUï¼‰</p>
</li>
<li><p>standbyå¾…æœºæ¨¡å¼</p>
<p>åœ¨ STANDBY æ¨¡å¼ä¸‹ï¼Œå†…æ ¸ã€æ‰€æœ‰çš„æ—¶é’Ÿã€ä»¥åŠåå¤‡ 1.2V ç”µæºå…¨éƒ¨åœæ­¢å·¥ä½œã€‚</p>
<p>ä» STANDBY æ¨¡å¼ä¸­å”¤é†’åï¼Œç³»ç»Ÿç›¸å½“äºæ‰§è¡Œäº†ä¸€æ¬¡å¤ä½æ“ä½œï¼Œç¨‹åºä¼šä»å¤´æ¥è¿‡ã€‚</p>
</li>
</ul>
<h2 id="Tickless-æ¨¡å¼"><a href="#Tickless-æ¨¡å¼" class="headerlink" title="Tickless æ¨¡å¼"></a>Tickless æ¨¡å¼</h2><p>FreeRTOSç³»ç»Ÿæä¾›çš„ä½åŠŸè€—æ¨¡å¼ï¼Œå½“å¤„ç†å™¨è¿›å…¥ç©ºé—²ä»»åŠ¡å‘¨æœŸä»¥åå°±å…³é—­ç³»ç»ŸèŠ‚æ‹ä¸­æ–­(æ»´ç­”å®šæ—¶å™¨ä¸­æ–­)ï¼Œåªæœ‰å½“å…¶ä»–ä¸­æ–­å‘ç”Ÿæˆ–è€…å…¶ä»–ä»»åŠ¡éœ€è¦å¤„ç†çš„æ—¶ä¾¯å¤„ç†å™¨æ‰ä¼šä»ä½åŠŸè€—æ¨¡å¼ä¸­å”¤é†’ã€‚</p>
<h1 id="3ã€ä¸€äº›å†…æ ¸é…ç½®"><a href="#3ã€ä¸€äº›å†…æ ¸é…ç½®" class="headerlink" title="3ã€ä¸€äº›å†…æ ¸é…ç½®"></a>3ã€ä¸€äº›å†…æ ¸é…ç½®</h1><ul>
<li><p><strong>configUSE_PREEMPTION</strong></p>
<p>ä¸º1æ—¶RTOSä½¿ç”¨æŠ¢å å¼è°ƒåº¦å™¨ï¼Œä¸º0æ—¶RTOSä½¿ç”¨åä½œå¼è°ƒåº¦å™¨ï¼ˆæ—¶é—´ç‰‡ï¼‰ã€‚ï¼ˆåä½œå¼æ“ä½œç³»ç»Ÿæ˜¯ä»»åŠ¡ä¸»åŠ¨é‡Šæ”¾CPUåï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚ä»»åŠ¡åˆ‡æ¢çš„æ—¶æœºå®Œå…¨å–å†³äºæ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ï¼‰</p>
</li>
<li><p><strong>configUSE_PORT_OPTIMISED_TASK_SELECTION</strong></p>
<p>æŸäº›è¿è¡ŒFreeRTOSçš„ç¡¬ä»¶æœ‰ä¸¤ç§æ–¹æ³•é€‰æ‹©ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„ä»»åŠ¡ï¼šé€šç”¨æ–¹æ³•å’Œç‰¹å®šäºç¡¬ä»¶ï¼ˆç¡¬ä»¶è®¡ç®—å‰å¯¼é›¶æŒ‡ä»¤ï¼‰çš„æ–¹æ³•</p>
<ul>
<li>è®¾ç½®ä¸º0 é€šç”¨åŠæ³•ï¼Œå¯ä»¥ç”¨äºæ‰€æœ‰FreeRTOSæ”¯æŒçš„ç¡¬ä»¶</li>
<li>è®¾ç½®ä¸º1 ç¡¬ä»¶è®¡ç®—å‰å¯¼é›¶æŒ‡ä»¤ï¼Œå¹¶éæ‰€æœ‰ç¡¬ä»¶éƒ½æ”¯æŒ</li>
</ul>
</li>
<li><p><strong>configUSE_IDLE_HOOK</strong></p>
<p>è®¾ç½®ä¸º1ä½¿ç”¨ç©ºé—²é’©å­ï¼ˆIdle Hookç±»ä¼¼äºå›è°ƒå‡½æ•°ï¼‰ï¼Œ0å¿½ç•¥ç©ºé—²é’©å­ã€‚</p>
<p>ç©ºé—²ä»»åŠ¡é’©å­æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç”±ç”¨æˆ·æ¥å®ç°ï¼ŒRTOSè§„å®šäº†å‡½æ•°çš„åå­—å’Œå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨æ¯ä¸ªç©ºé—²ä»»åŠ¡å‘¨æœŸéƒ½ä¼šè¢«è°ƒç”¨ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vApplicationIdleHook</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="comment">//è¿™ä¸ªé’©å­å‡½æ•°ä¸å¯ä»¥è°ƒç”¨ä¼šå¼•èµ·ç©ºé—²ä»»åŠ¡é˜»å¡çš„APIå‡½æ•°ï¼ˆä¾‹å¦‚ï¼švTaskDelay()ã€å¸¦æœ‰é˜»å¡æ—¶é—´çš„é˜Ÿåˆ—å’Œä¿¡å·é‡å‡½æ•°</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ç©ºé—²é’©å­å‡½æ•°è®¾ç½®CPUè¿›å…¥çœç”µæ¨¡å¼æ˜¯å¾ˆå¸¸è§çš„ã€‚</p>
</li>
<li><p>configUSE_MALLOC_FAILED_HOOK</p>
<p>å¦‚æœå®šä¹‰å¹¶æ­£ç¡®é…ç½®malloc()å¤±è´¥é’©å­å‡½æ•°ï¼Œåˆ™è¿™ä¸ªå‡½æ•°ä¼šåœ¨pvPortMalloc()å‡½æ•°è¿”å›NULLæ—¶è¢«è°ƒç”¨ã€‚åªæœ‰FreeRTOSåœ¨å“åº”å†…å­˜åˆ†é…è¯·æ±‚æ—¶å‘ç°å †å†…å­˜ä¸è¶³æ‰ä¼šè¿”å›NULL</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vApplicationMallocFailedHook</span><span class="params">( <span class="type">void</span>)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>configUSE_TICK_HOOK</strong></p>
<p>è®¾ç½®ä¸º1ä½¿ç”¨æ—¶é—´ç‰‡é’©å­ï¼ˆTick Hookï¼‰ï¼Œ0å¿½ç•¥æ—¶é—´ç‰‡é’©å­.</p>
<p>æ—¶é—´ç‰‡ä¸­æ–­å¯ä»¥å‘¨æœŸæ€§çš„è°ƒç”¨ä¸€ä¸ªè¢«ç§°ä¸ºé’©å­å‡½æ•°ï¼ˆå›è°ƒå‡½æ•°ï¼‰çš„åº”ç”¨ç¨‹åºã€‚æ—¶é—´ç‰‡é’©å­å‡½æ•°å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°ä¸€ä¸ªå®šæ—¶å™¨åŠŸèƒ½ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vApplicationTickHook</span><span class="params">( <span class="type">void</span> )</span>;</span><br><span class="line"><span class="comment">//vApplicationTickHook()å‡½æ•°åœ¨ä¸­æ–­æœåŠ¡ç¨‹åºä¸­æ‰§è¡Œï¼Œå› æ­¤è¿™ä¸ªå‡½æ•°å¿…é¡»éå¸¸çŸ­å°ï¼Œä¸èƒ½å¤§é‡ä½¿ç”¨å †æ ˆï¼Œåªèƒ½è°ƒç”¨ä»¥â€FromISR&quot; æˆ– &quot;FROM_ISRâ€ç»“å°¾çš„APIå‡½æ•°ã€‚</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸€äº›é¡¾åæ€ä¹‰çš„é…ç½®</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> configCPU_CLOCK_HZ				( SystemCoreClock ) <span class="comment">//CPUé¢‘ç‡</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> configTICK_RATE_HZ				( ( TickType_t ) 1000 ) <span class="comment">//æ—¶é’ŸèŠ‚æ‹é¢‘ç‡ï¼Œè¿™é‡Œè®¾ç½®ä¸º1000ï¼Œå‘¨æœŸå°±æ˜¯1ms</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> configMAX_PRIORITIES			( 32 )  <span class="comment">//å¯ä½¿ç”¨çš„æœ€å¤§ä¼˜å…ˆçº§</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> configMINIMAL_STACK_SIZE		( ( unsigned short ) 128 )<span class="comment">//ç©ºé—²ä»»åŠ¡ä½¿ç”¨çš„å †æ ˆå¤§å°</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> configTOTAL_HEAP_SIZE			( ( size_t ) ( 64 * 1024 ) )<span class="comment">//ç³»ç»Ÿæ‰€æœ‰æ€»çš„å †å¤§å°</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> configMAX_TASK_NAME_LEN			( 16 )  <span class="comment">//ä»»åŠ¡åå­—å­—ç¬¦ä¸²é•¿åº¦</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> configUSE_16_BIT_TICKS			0   <span class="comment">//ç³»ç»ŸèŠ‚æ‹è®¡æ•°å™¨å˜é‡æ•°æ®ç±»å‹ï¼Œ</span></span></span><br><span class="line">                                            <span class="comment">//1è¡¨ç¤ºä¸º16ä½æ— ç¬¦å·æ•´å½¢ï¼Œ0è¡¨ç¤ºä¸º32ä½æ— ç¬¦å·æ•´å½¢</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>configIDLE_SHOULD_YIELD</strong></p>
<p>è¿™ä¸ªå‚æ•°æ§åˆ¶ä»»åŠ¡åœ¨ç©ºé—²ä¼˜å…ˆçº§ä¸­çš„è¡Œä¸ºã€‚ä»…åœ¨æ»¡è¶³ä¸‹åˆ—æ¡ä»¶åï¼Œæ‰ä¼šèµ·ä½œç”¨ã€‚</p>
<ul>
<li>ä½¿ç”¨æŠ¢å å¼å†…æ ¸è°ƒåº¦ï¼ˆè§ç¬¬ä¸€ç‚¹ï¼‰</li>
<li>ç”¨æˆ·ä»»åŠ¡ä½¿ç”¨ç©ºé—²ä¼˜å…ˆçº§</li>
</ul>
<p>ä½¿ç”¨åŒä¸€ä¼˜å…ˆçº§çš„å¤šä¸ªä»»åŠ¡ï¼Œä¸”è¯¥ä¼˜å…ˆçº§å¤§äºç©ºé—²ä¼˜å…ˆçº§æ—¶ï¼Œè¿™äº›ä»»åŠ¡åæ˜ åœ¨æ—¶é—´ç‰‡ä¸Šä¼šè·å¾—ç›¸åŒçš„å¤„ç†å™¨æ—¶é—´ã€‚å•å½“å¤šä¸ªä»»åŠ¡ï¼ˆä¸æ­¢ç©ºé—²ä»»åŠ¡ï¼Œè¿˜åŒ…æ‹¬ç”¨æˆ·ä»»åŠ¡ï¼‰å…±äº«ç©ºé—²ä¼˜å…ˆçº§æ—¶ï¼Œå¦‚æœconfigIDLE_SHOULD_YIELDä¸º1ï¼Œå½“ç”¨æˆ·ä»»åŠ¡è¿è¡Œæ—¶ï¼Œç©ºé—²ä»»åŠ¡ç«‹åˆ»è®©å‡ºCPUï¼Œä½†æ˜¯ç©ºé—²ä»»åŠ¡ä»ç„¶ä¼šå æ®æ—¶é—´ç‰‡ä¸­çš„ä¸€æ®µæ—¶é—´ï¼Œ<strong>å°±ä¼šå¯¼è‡´ç©ºé—²ä»»åŠ¡ä¸æ¥ä¸‹æ¥çš„ç”¨æˆ·ä»»åŠ¡ä¼šå…±äº«ä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œå³è¯¥ç”¨æˆ·ä»»åŠ¡å æœ‰æ—¶é—´ç‰‡å°‘äºæ­£å¸¸åˆ†é…çš„æ—¶é—´ç‰‡</strong></p>
<p><strong>è®¾ç½®configIDLE_SHOULD_YIELDä¸º0å°†é˜»æ­¢ç©ºé—²ä»»åŠ¡ä¸ºç”¨æˆ·ä»»åŠ¡è®©å‡ºCPUï¼Œç›´åˆ°ç©ºé—²ä»»åŠ¡çš„æ—¶é—´ç‰‡ç»“æŸã€‚è¿™ç¡®ä¿æ‰€æœ‰å¤„åœ¨ç©ºé—²ä¼˜å…ˆçº§çš„ä»»åŠ¡åˆ†é…åˆ°ç›¸åŒå¤šçš„å¤„ç†å™¨æ—¶é—´ï¼Œä½†æ˜¯ï¼Œè¿™æ˜¯ä»¥åˆ†é…ç»™ç©ºé—²ä»»åŠ¡æ›´é«˜æ¯”ä¾‹çš„å¤„ç†å™¨æ—¶é—´ä¸ºä»£ä»·çš„ã€‚</strong></p>
</li>
<li><p><strong>configUSE_TASK_NOTIFICATIONS</strong>ï¼ˆå¾ˆæœ‰ç”¨ï¼‰</p>
<p>ç½®1å°†ä¼šå¼€å¯ä»»åŠ¡é€šçŸ¥åŠŸèƒ½ï¼Œæ¯ä¸ªRTOSä»»åŠ¡å…·æœ‰ä¸€ä¸ª32ä½çš„é€šçŸ¥å€¼ï¼ŒRTOSä»»åŠ¡é€šçŸ¥ç›¸å½“äºç›´æ¥å‘ä»»åŠ¡å‘é€ä¸€ä¸ªäº‹ä»¶ï¼Œæ¥æ”¶åˆ°é€šçŸ¥çš„ä»»åŠ¡å¯ä»¥è§£é™¤ä»»åŠ¡çš„é˜»å¡çŠ¶æ€ï¼ˆå› ç­‰å¾…ä»»åŠ¡é€šçŸ¥è€Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼‰ã€‚ç›¸å¯¹äºä»¥å‰å¿…é¡»åˆ†åˆ«åˆ›å»ºé˜Ÿåˆ—ã€äºŒè¿›åˆ¶ä¿¡å·é‡ã€è®¡æ•°ä¿¡å·é‡æˆ–äº‹ä»¶ç»„çš„æƒ…å†µï¼Œä½¿ç”¨ä»»åŠ¡é€šçŸ¥æ˜¾ç„¶æ›´çµæ´»ã€‚æ›´å¥½çš„æ˜¯ï¼Œç›¸æ¯”äºä½¿ç”¨ä¿¡å·é‡è§£é™¤ä»»åŠ¡é˜»å¡ï¼Œä½¿ç”¨ä»»åŠ¡é€šçŸ¥å¯ä»¥å¿«45%</p>
</li>
<li><p><strong>configGENERATE_RUN_TIME_STATS</strong></p>
<p>è®¾ç½®å®configGENERATE_RUN_TIME_STATSä¸º1ä½¿èƒ½è¿è¡Œæ—¶é—´ç»Ÿè®¡åŠŸèƒ½ã€‚ä¸€æ—¦è®¾ç½®ä¸º1ï¼Œåˆ™ä¸‹é¢ä¸¤ä¸ªå®å¿…é¡»è¢«å®šä¹‰ï¼š</p>
<ul>
<li><p>portCONFIGURE_TIMER_FOR_RUN_TIME_STATS()</p>
<p>ä½¿ç”¨ä¸€ä¸ªæ¯”è¿è¡Œæ—¶é—´æ›´ç²¾å‡†çš„åŸºå‡†å®šæ—¶å™¨ä½¿ç»Ÿè®¡æ›´åŠ ç²¾ç¡®ï¼ŒåŸºå‡†å®šæ—¶å™¨ä¸­æ–­é¢‘ç‡è¦æ¯”ç»ŸèŠ‚æ‹ä¸­æ–­å¿«10~100å€ã€‚åŸºå‡†å®šæ—¶å™¨ä¸­æ–­é¢‘ç‡è¶Šå¿«ï¼Œç»Ÿè®¡è¶Šç²¾å‡†ï¼Œä½†èƒ½ç»Ÿè®¡çš„è¿è¡Œæ—¶é—´ä¹Ÿè¶ŠçŸ­ï¼ˆæ¯”å¦‚ï¼ŒåŸºå‡†å®šæ—¶å™¨10msä¸­æ–­ä¸€æ¬¡ï¼Œ8ä½æ— ç¬¦å·æ•´å½¢å˜é‡å¯ä»¥è®¡åˆ°2.55ç§’ï¼Œä½†å¦‚æœæ˜¯1ç§’ä¸­æ–­ä¸€æ¬¡ï¼Œ8ä½æ— ç¬¦å·æ•´å½¢å˜é‡å¯ä»¥ç»Ÿè®¡åˆ°255ç§’ï¼‰</p>
</li>
<li><p>portGET_RUN_TIME_COUNTER_VALUE()</p>
<p>è¿”å›åŸºå‡†æ—¶é’Ÿçš„å€¼ä»¥ä¾›è®¡æ•°ï¼ˆåœ¨å®šæ—¶å™¨ä¸­ä½¿ä½¿é•¿æ•´å½¢å˜é‡ulHighFrequencyTimerTicksè‡ªå¢ï¼‰</p>
</li>
</ul>
<p>å½“æˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªå®šæ—¶å™¨ä¸­æ–­ä¸”è¦ä½¿ç”¨æ—¶é—´ç»Ÿè®¡æ—¶ï¼Œéœ€è¦åœ¨config.hä¸­æ·»åŠ </p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">long</span> ulHighFrequencyTimerTicks;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> portCONFIGURE_TIMER_FOR_RUN_TIME_STATS() ( ulHighFrequencyTimerTicks = 0UL )</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> portGET_RUN_TIME_COUNTER_VALUE() ulHighFrequencyTimerTicks</span></span><br></pre></td></tr></table></figure>
<h3 id="Cè¯­è¨€ä¸­çš„0ULå’Œ1UL"><a href="#Cè¯­è¨€ä¸­çš„0ULå’Œ1UL" class="headerlink" title="Cè¯­è¨€ä¸­çš„0ULå’Œ1UL"></a>Cè¯­è¨€ä¸­çš„0ULå’Œ1UL</h3><ul>
<li>0UL ï¼šæ— ç¬¦å·é•¿æ•´å‹0</li>
<li>1UL ï¼šæ— ç¬¦å·é•¿æ•´å‹1</li>
</ul>
</li>
<li><p><strong>LIBRARY_LOWEST_INTERRUPT_PRIORITY</strong> &amp; <strong>LIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY</strong>  </p>
<p>ç”±äºåœ¨ä½¿ç”¨cortexå†…æ ¸çš„ç¡¬ä»¶è®¾å¤‡ä¸­ä¼˜å…ˆçº§æ•°å€¼ä¸ºè¶Šå°ï¼Œé€»è¾‘ä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰€ä»¥è¿™é‡Œçš„æœ€å°ä¼˜å…ˆçº§å³ä¸ºç¡¬ä»¶çš„æœ€ä½é€»è¾‘ä¼˜å…ˆçº§ï¼Œè¡¨ç°åœ¨æ•°å€¼ä¸Šå³ä¸ºæœ€å¤§æ•°å€¼ï¼›è€Œæ­¤å¤„çš„configMAX_SYSCALL_INTERRUPT_PRIORITYæ˜¯ç”¨æ¥è®¾ç½®å¯ä»¥åœ¨ä¸­æ–­æœåŠ¡ç¨‹åºä¸­å®‰å…¨è°ƒç”¨FreeRTOS APIå‡½æ•°çš„æœ€é«˜ä¸­æ–­ä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§å°äºç­‰äºè¿™ä¸ªå®æ‰€ä»£è¡¨çš„ä¼˜å…ˆçº§æ—¶ï¼Œç¨‹åºå¯ä»¥åœ¨ä¸­æ–­æœåŠ¡ç¨‹åºä¸­å®‰å…¨çš„è°ƒç”¨FreeRTOS APIå‡½æ•°ï¼›å¦‚æœä¼˜å…ˆçº§å¤§äºè¿™ä¸ªå®æ‰€ä»£è¡¨çš„ä¼˜å…ˆçº§ï¼Œè¡¨ç¤ºFreeRTOSæ— æ³•ç¦æ­¢è¿™ä¸ªä¸­æ–­ï¼Œåœ¨è¿™ä¸ªä¸­æ–­æœåŠ¡ç¨‹åºä¸­ç»ä¸å¯ä»¥è°ƒç”¨ä»»ä½•APIå‡½æ•°ã€‚</p>
<img src="/images/loading.png" data-original="/2022/08/18/FreeRTOS-1/freertos_1.jpg" class title="This is an image"> 
<p>è¿è¡Œåœ¨å¤§äºconfigMAX_SYSCALL_INTERRUPT_PRIORITYçš„ä¼˜å…ˆçº§ä¸­æ–­æ˜¯ä¸ä¼šè¢«RTOSå†…æ ¸æ‰€å±è”½çš„ï¼Œå› æ­¤ä¹Ÿä¸å—RTOSå†…æ ¸åŠŸèƒ½å½±å“ã€‚è¿™ä¸»è¦ç”¨äºéå¸¸é«˜çš„å®æ—¶éœ€æ±‚ä¸­ã€‚æ¯”å¦‚æ‰§è¡Œç”µæœºè½¬å‘ã€‚ä½†æ˜¯ï¼Œè¿™ç±»ä¸­æ–­çš„ä¸­æ–­æœåŠ¡ä¾‹ç¨‹ä¸­ç»ä¸å¯ä»¥è°ƒç”¨FreeRTOSçš„APIå‡½æ•°ã€‚</p>
<h1 id="4-ä¸€äº›æŠ¥é”™"><a href="#4-ä¸€äº›æŠ¥é”™" class="headerlink" title="4.ä¸€äº›æŠ¥é”™"></a>4.ä¸€äº›æŠ¥é”™</h1><p>configASSERT( ( portNVIC_INT_CTRL_REG &amp; portVECTACTIVE_MASK ) == 0 )æŠ¥é”™ã€‚</p>
<p>æ­¤å¤„æŠ¥é”™ï¼Œç¬¬ä¸€ç§æ˜¯å› ä¸ºé«˜äºconfigMAX_SYSCALL_INTERRUPT_PRIORITYä¼˜å…ˆçº§çš„ä¸­æ–­è°ƒç”¨äº†RTOSçš„APIå¯¼è‡´çš„ï¼Œè§£å†³åŠæ³•ï¼Œå°†ä¸­æ–­ä¼˜å…ˆçº§è°ƒä½ï¼Œæ¯”configMAX_SYSCALL_INTERRUPT_PRIORITYè¦ä½ï¼Œå°±å¯ä»¥è°ƒç”¨RTOSçš„APIäº†ã€‚</p>
<p>ç¬¬äºŒç§æ˜¯å› ä¸ºä¸­æ–­å‘é€æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå‘é€ä¿¡å·é‡ç­‰æ“ä½œä½¿ç”¨äº†ä¸å¸¦ISRç»“å°¾çš„APIï¼Œè€Œæ˜¯è°ƒç”¨äº†æ™®é€šä¸å¸¦ISRçš„APIå¯¼è‡´çš„ï¼Œè§£å†³åŠæ³•ï¼Œå°†APIæ›¿æ¢ä¸ºå¸¦ISRç»“å°¾çš„APIä¾¿å¯ä»¥è§£å†³é—®é¢˜ã€‚</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>åµŒå…¥å¼å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€äº›å…³é”®å­—</title>
    <url>/2022/08/03/C-%E5%85%B3%E9%94%AE%E5%AD%97/</url>
    <content><![CDATA[<img src="/images/loading.png" data-original="/2022/08/03/C-%E5%85%B3%E9%94%AE%E5%AD%97/%E5%85%B3%E9%94%AE%E5%AD%97.jpg" class title="This is an image"> 
<h1 id="1-auto-å’Œ-register"><a href="#1-auto-å’Œ-register" class="headerlink" title="1. auto å’Œ register"></a>1. auto å’Œ register</h1><ul>
<li><p>autoå…³é”®å­—</p>
<ul>
<li>åªèƒ½ä¿®é¥°å±€éƒ¨å˜é‡, å±€éƒ¨å˜é‡å¦‚æœæ²¡æœ‰å…¶å®ƒä¿®é¥°ç¬¦, é»˜è®¤å°±æ˜¯autoçš„</li>
<li>ç‰¹ç‚¹: éšç”¨éšå¼€, ç”¨å®Œå³é”€</li>
</ul>
</li>
<li><p>registerå…³é”®å­—</p>
<ul>
<li>åªèƒ½ä¿®é¥°å±€éƒ¨å˜é‡, åŸåˆ™ä¸Šå°†å†…å­˜ä¸­å˜é‡æå‡åˆ°CPUå¯„å­˜å™¨ä¸­å­˜å‚¨, è¿™æ ·è®¿é—®é€Ÿåº¦ä¼šæ›´å¿«</li>
<li>ä½†æ˜¯ç”±äºCPUå¯„å­˜å™¨æ•°é‡ç›¸å½“æœ‰é™, é€šå¸¸ä¸åŒå¹³å°å’Œç¼–è¯‘å™¨åœ¨ä¼˜åŒ–é˜¶æ®µä¼šè‡ªåŠ¨è½¬æ¢ä¸ºauto</li>
</ul>
</li>
</ul>
<h1 id="2-static"><a href="#2-static" class="headerlink" title="2. static"></a>2. static</h1><ul>
<li><p>å¯¹å±€éƒ¨å˜é‡çš„ä½œç”¨</p>
<ul>
<li>å»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ,ä»ç¨‹åºå¯åŠ¨åˆ°ç¨‹åºé€€å‡º,ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰æ”¹å˜å˜é‡çš„ä½œç”¨åŸŸ</li>
</ul>
</li>
<li><p>å®šä¹‰å˜é‡çš„ä»£ç åœ¨æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´ä»…ä»…ä¼šæ‰§è¡Œä¸€æ¬¡</p>
<p>  <strong>åŸå› æ˜¯é™æ€å±€éƒ¨å˜é‡çš„åˆå€¼æ˜¯åœ¨ç¼–è¯‘æ—¶èµ‹äºˆçš„ï¼Œåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸å†èµ‹äºˆåˆå€¼</strong></p>
</li>
<li><p>å¯¹å…¨å±€å˜é‡çš„ä½œç”¨</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹å¤šä¸ªåŒåçš„å…¨å±€å˜é‡å…±äº«ä¸€å—ç©ºé—´, è¿™æ ·ä¼šå¯¼è‡´å…¨å±€å˜é‡æ±¡æŸ“é—®é¢˜</li>
<li><strong>å¦‚æœæƒ³è®©æŸä¸ªå…¨å±€å˜é‡åªåœ¨æŸä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨, å¹¶ä¸”ä¸å’Œå…¶ä»–æ–‡ä»¶ä¸­åŒåå…¨å±€å˜é‡å…±äº«åŒä¸€å—å­˜å‚¨ç©ºé—´, é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨static</strong></li>
</ul>
</li>
</ul>
<h1 id="3-extern"><a href="#3-extern" class="headerlink" title="3. extern"></a>3. extern</h1><ul>
<li><p>å¯¹å±€éƒ¨å˜é‡çš„ä½œç”¨(æ— æ„ä¹‰çš„)</p>
<ul>
<li>externä¸èƒ½ç”¨äºå±€éƒ¨å˜é‡</li>
<li>externä»£è¡¨å£°æ˜ä¸€ä¸ªå˜é‡, è€Œä¸æ˜¯å®šä¹‰ä¸€ä¸ªå˜é‡, å˜é‡åªæœ‰å®šä¹‰æ‰ä¼šå¼€è¾Ÿå­˜å‚¨ç©ºé—´</li>
<li>æ‰€ä»¥å¦‚æœæ˜¯å±€éƒ¨å˜é‡, è™½ç„¶æå‰å£°æ˜æœ‰æŸä¸ªå±€éƒ¨å˜é‡, ä½†æ˜¯å±€éƒ¨å˜é‡åªæœ‰æ‰§è¡Œåˆ°æ‰ä¼šåˆ†é…å­˜å‚¨ç©ºé—´</li>
</ul>
</li>
<li><p>å¯¹å…¨å±€å˜é‡çš„ä½œç”¨</p>
<ul>
<li>å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡, ä»£è¡¨å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘åœ¨å…¶å®ƒåœ°æ–¹å®šä¹‰äº†è¿™ä¸ªå˜é‡, ä½ å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæ–‡ä»¶a.céœ€è¦å¼•ç”¨b.cä¸­å˜é‡int vï¼Œå°±å¯ä»¥åœ¨a.cä¸­å£°æ˜extern int vï¼Œç„¶åå°±å¯ä»¥å¼•ç”¨å˜é‡vã€‚</li>
</ul>
</li>
</ul>
<ul>
<li><p>ä¸åŒ…å«å¤´æ–‡ä»¶å¼•ç”¨å‡½æ•°çš„åŒºåˆ«</p>
<p>å¯¹å˜é‡è€Œè¨€ï¼Œå¦‚æœä½ æƒ³åœ¨æœ¬æºæ–‡ä»¶(ä¾‹å¦‚æ–‡ä»¶åA)ä¸­ä½¿ç”¨å¦ä¸€ä¸ªæºæ–‡ä»¶(ä¾‹å¦‚æ–‡ä»¶åB)çš„å˜é‡ï¼Œ<strong>æ–¹æ³•æœ‰2ç§</strong>ï¼š(1)åœ¨Aæ–‡ä»¶ä¸­å¿…é¡»ç”¨externå£°æ˜åœ¨Bæ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡(å½“ç„¶æ˜¯å…¨å±€å˜é‡)ï¼›(2)åœ¨Aæ–‡ä»¶ä¸­æ·»åŠ Bæ–‡ä»¶å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œå½“ç„¶è¿™ä¸ªå¤´æ–‡ä»¶åŒ…å«Bæ–‡ä»¶ä¸­çš„å˜é‡å£°æ˜ï¼Œä¹Ÿå³åœ¨è¿™ä¸ªå¤´æ–‡ä»¶ä¸­å¿…é¡»ç”¨externå£°æ˜è¯¥å˜é‡ï¼Œå¦åˆ™ï¼Œè¯¥å˜é‡åˆè¢«å®šä¹‰ä¸€æ¬¡ã€‚</p>
<p>å¯¹å‡½æ•°è€Œè¨€ï¼Œå¦‚æœä½ æƒ³åœ¨æœ¬æºæ–‡ä»¶(ä¾‹å¦‚æ–‡ä»¶åA)ä¸­ä½¿ç”¨å¦ä¸€ä¸ªæºæ–‡ä»¶(ä¾‹å¦‚æ–‡ä»¶åB)çš„å‡½æ•°ï¼Œ<strong>æ–¹æ³•æœ‰2ç§</strong>ï¼š(1)åœ¨Aæ–‡ä»¶ä¸­ç”¨externå£°æ˜åœ¨Bæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°(å…¶å®ï¼Œä¹Ÿå¯çœç•¥externï¼Œåªéœ€åœ¨Aæ–‡ä»¶ä¸­å‡ºç°Bæ–‡ä»¶å®šä¹‰å‡½æ•°åŸå‹å³å¯)ï¼›(2)åœ¨Aæ–‡ä»¶ä¸­æ·»åŠ Bæ–‡ä»¶å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œå½“ç„¶è¿™ä¸ªå¤´æ–‡ä»¶åŒ…å«Bæ–‡ä»¶ä¸­çš„å‡½æ•°åŸå‹ï¼Œ<strong>åœ¨å¤´æ–‡ä»¶ä¸­å‡½æ•°å¯ä»¥ä¸ç”¨åŠ externã€‚</strong></p>
</li>
<li><p>æ€»ç»“ï¼š</p>
<p>ä½¿ç”¨externæ—¶ï¼Œä¼šåŠ é€Ÿç¨‹åºçš„ç¼–è¯‘ï¼ˆç¡®åˆ‡çš„è¯´æ˜¯é¢„å¤„ç†ï¼‰çš„è¿‡ç¨‹ï¼ŒèŠ‚çœæ—¶é—´ã€‚ä½†æ˜¯å½“éœ€è¦å¯¹å˜é‡/å‡½æ•°åè¿›è¡Œä¿®æ”¹æ—¶éœ€è¦æŠŠæ‰€æœ‰ä½¿ç”¨externå…³é”®å­—çš„åœ°æ–¹å…¨éƒ¨ä¿®æ”¹ä¸€æ¬¡ï¼Œè€Œä½¿ç”¨å¤´æ–‡ä»¶åŒ…å«åªéœ€æ›´æ”¹ä¸€æ¬¡ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
</li>
</ul>
<h1 id="4-æ¡ä»¶ç¼–è¯‘"><a href="#4-æ¡ä»¶ç¼–è¯‘" class="headerlink" title="4. æ¡ä»¶ç¼–è¯‘"></a>4. æ¡ä»¶ç¼–è¯‘</h1><ul>
<li>æ˜¯å°†ä»£ç ç¼–è¯‘è¿›å¯æ‰§è¡Œç¨‹åº, è€Œä¸æ˜¯æ‰§è¡Œä»£ç </li>
<li>æ¡ä»¶ç¼–è¯‘åé¢çš„æ¡ä»¶è¡¨è¾¾å¼ä¸­<strong>ä¸èƒ½è¯†åˆ«å˜é‡</strong>,å®ƒé‡Œé¢åªèƒ½è¯†åˆ«å¸¸é‡å’Œå®å®šä¹‰</li>
</ul>
<h1 id="5-typedef"><a href="#5-typedef" class="headerlink" title="5. typedef"></a>5. typedef</h1><ul>
<li><p>Cè¯­è¨€ä¸ä»…æä¾›äº†ä¸°å¯Œçš„æ•°æ®ç±»å‹,è€Œä¸”è¿˜å…è®¸ç”±ç”¨æˆ·è‡ªå·±å®šä¹‰ç±»å‹è¯´æ˜ç¬¦,ä¹Ÿå°±æ˜¯è¯´å…è®¸ç”±ç”¨æˆ·ä¸ºæ•°æ®ç±»å‹å–â€œåˆ«åâ€ã€‚</p>
<ul>
<li><p>åŸºæœ¬æ•°æ®ç±»å‹</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> INTEGERï¼›</span><br><span class="line"><span class="keyword">typedef</span> INTEGER MyInteger;</span><br><span class="line">MyInteger a; <span class="comment">// ç­‰ä»·äº int a;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ•°ç»„</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">char</span> NAME[<span class="number">20</span>]; <span class="comment">// è¡¨ç¤ºNAMEæ˜¯å­—ç¬¦æ•°ç»„ç±»å‹,æ•°ç»„é•¿åº¦ä¸º20ã€‚ç„¶åå¯ç”¨NAME è¯´æ˜å˜é‡</span></span><br><span class="line">NAME a; <span class="comment">// ç­‰ä»·äº char a[20];</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»“æ„ä½“</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">char</span> *name;</span><br><span class="line">&#125; PersonType;</span><br><span class="line">PersonType person;</span><br><span class="line"><span class="comment">//æœ‰å¤šç§å†™æ³•ï¼Œæ­¤å†™æ³•å¯è¯»æ€§å¼ºä¸€äº›</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æŒ‡é’ˆ</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªsumå‡½æ•°ï¼Œè®¡ç®—aè·Ÿbçš„å’Œ</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span><br><span class="line">  &#123;</span><br><span class="line">      <span class="type">int</span> c = a + b;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%d + %d = %d&quot;</span>, a, b, c);</span><br><span class="line">      <span class="keyword">return</span> c;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">typedef</span> <span class="title function_">int</span> <span class="params">(*MySum)</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"> MySum p = sum;<span class="comment">// å®šä¹‰ä¸€ä¸ªæŒ‡å‘sumå‡½æ•°çš„æŒ‡é’ˆå˜é‡p</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(*p)(<span class="number">1</span>,<span class="number">2</span>)); <span class="comment">//3</span></span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¦ç»†è§£é‡Šå¯å‚è€ƒ<a href="https://dhkkk.gitee.io/2022/08/23/FreeRTOS-2/">FreeRTOSçš„ä»»åŠ¡ç›¸å…³ | å°è‘£çš„BLOG (gitee.io)</a>ä¸­æœ‰è¯¦ç»†æ¡ˆä¾‹</p>
<p><strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ­£å¸¸çš„å®šä¹‰å‰åŠ ä¸Štypedefï¼Œå³æŠŠè¯¥å®šä¹‰çš„å˜é‡æ”¹ä¸ºä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œè¦å†æ¬¡å®šä¹‰è¯¥ç±»å‹çš„å˜é‡æ—¶ï¼Œç›´æ¥ä½¿ç”¨è¯¥ç±»å‹çš„åå­—å³å¯ã€‚</strong></p>
</li>
</ul>
</li>
</ul>
<h1 id="6-const"><a href="#6-const" class="headerlink" title="6. const"></a>6. const</h1><ul>
<li>å¯¹å˜é‡å£°æ˜åªè¯»ç‰¹æ€§ï¼Œä¿æŠ¤å˜é‡å€¼ä»¥é˜²è¢«ä¿®æ”¹ã€‚</li>
</ul>
<h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ul>
<li><p>ä¿®é¥°å¸¸é‡ã€æ•°ç»„</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> a[<span class="number">5</span>]=&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">a[<span class="number">1</span>] = <span class="number">55</span>; <span class="comment">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®é¥°æŒ‡é’ˆ</p>
<ul>
<li>const int *A; //constä¿®é¥°æŒ‡é’ˆ,Aå¯å˜,AæŒ‡å‘çš„å€¼ä¸èƒ½è¢«ä¿®æ”¹</li>
<li>int const *A; //constä¿®é¥°æŒ‡å‘çš„å¯¹è±¡,Aå¯å˜,AæŒ‡å‘çš„å¯¹è±¡ä¸å¯å˜</li>
<li>int *const A; //constä¿®é¥°æŒ‡é’ˆA, Aä¸å¯å˜,AæŒ‡å‘çš„å¯¹è±¡å¯å˜</li>
<li>const int *const A;//æŒ‡é’ˆAå’ŒAæŒ‡å‘çš„å¯¹è±¡éƒ½ä¸å¯å˜</li>
</ul>
</li>
</ul>
<h1 id="ps-ä»¥ä¸‹å¼€å§‹ä¸æ˜¯å…³é”®å­—"><a href="#ps-ä»¥ä¸‹å¼€å§‹ä¸æ˜¯å…³é”®å­—" class="headerlink" title="ps.ä»¥ä¸‹å¼€å§‹ä¸æ˜¯å…³é”®å­—"></a>ps.ä»¥ä¸‹å¼€å§‹ä¸æ˜¯å…³é”®å­—</h1><h1 id="1ã€å®å®šä¹‰"><a href="#1ã€å®å®šä¹‰" class="headerlink" title="1ã€å®å®šä¹‰"></a>1ã€å®å®šä¹‰</h1><ul>
<li><p>å¯¹ç¨‹åºä¸­ç”¨<strong>åŒå¼•å·æ‰©èµ·æ¥çš„å­—ç¬¦ä¸²å†…çš„å­—ç¬¦</strong>ï¼Œä¸è¿›è¡Œå®çš„æ›¿æ¢æ“ä½œ</p>
</li>
<li><p>å®å®šä¹‰ä¸å˜é‡å®šä¹‰ä¸åŒï¼Œå®å®šä¹‰ä»…æ˜¯ä¸€ç§æœºæ¢°çš„å­—ç¬¦æ›¿æ¢ï¼Œå¹¶ä¸åˆ†é…å†…å­˜ç©ºé—´</p>
</li>
<li><p>å®åçš„æœ‰æ•ˆèŒƒå›´æ˜¯ä»å®šä¹‰ä½ç½®åˆ°æ–‡ä»¶ç»“æŸã€‚å¦‚æœéœ€è¦ç»ˆæ­¢å®å®šä¹‰çš„ä½œç”¨åŸŸï¼Œå¯ä»¥ç”¨#undefå‘½ä»¤</p>
</li>
<li><p>å®šä¹‰ä¸€ä¸ªå®æ—¶å¯ä»¥å¼•ç”¨å·²ç»å®šä¹‰çš„å®å</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> R  3.0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> L  2*PI*R</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> S  PI*R*R</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯ç”¨å®å®šä¹‰è¡¨ç¤ºæ•°æ®ç±»å‹,ä½¿ä¹¦å†™æ–¹ä¾¿</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> String char *</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">     String str = <span class="string">&quot;This is a string!&quot;</span>;</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Cè¯­è¨€å…è®¸å®å¸¦æœ‰å‚æ•°ã€‚åœ¨å®å®šä¹‰ä¸­çš„å‚æ•°ç§°ä¸ºå½¢å¼å‚æ•°,åœ¨å®è°ƒç”¨ä¸­çš„å‚æ•°ç§°ä¸ºå®é™…å‚æ•°ã€‚(ç±»ä¼¼å‡½æ•°çš„ä½¿ç”¨)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> average(a, b) (a+b)/2</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> a = average(<span class="number">10</span>, <span class="number">4</span>);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;å¹³å‡å€¼ï¼š%d&quot;</span>, a); <span class="comment">//7</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¸¦å‚æ•°çš„å®åœ¨å±•å¼€æ—¶ï¼Œåªä½œç®€å•çš„å­—ç¬¦å’Œå‚æ•°çš„æ›¿æ¢ï¼Œä¸è¿›è¡Œä»»ä½•è®¡ç®—æ“ä½œã€‚æ‰€ä»¥åœ¨å®šä¹‰å®æ—¶ï¼Œ<strong>ä¸€èˆ¬ç”¨ä¸€ä¸ªå°æ‹¬å·</strong>æ‹¬ä½å­—ç¬¦ä¸²çš„å‚æ•°ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> D1(a) (2*a)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> D2(a) (2*(a))</span></span><br><span class="line"><span class="comment">//è®¡ç®—ç»“æœæœ€å¥½ä¹Ÿç”¨æ‹¬å·æ‹¬èµ·æ¥,å°å‹è®¡ç®—ä¸æ‹¬é—®é¢˜åº”è¯¥ä¸å¤§</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">main</span> <span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">     <span class="type">int</span> b = D1(<span class="number">3</span>+<span class="number">4</span>);</span><br><span class="line">     <span class="type">int</span> c = D2(<span class="number">3</span>+<span class="number">4</span>);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, b);  <span class="comment">//è¾“å‡ºç­‰ä»·äº2*3+4=10</span></span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, c);  <span class="comment">//2*(3+4)=14</span></span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="2ã€åŠ¨æ€å­˜å‚¨åˆ†é…"><a href="#2ã€åŠ¨æ€å­˜å‚¨åˆ†é…" class="headerlink" title="2ã€åŠ¨æ€å­˜å‚¨åˆ†é…"></a>2ã€åŠ¨æ€å­˜å‚¨åˆ†é…</h1><p>æ­¤å‰ï¼Œç”¨äºå­˜å‚¨æ•°æ®çš„å˜é‡å’Œæ•°ç»„åœ¨å®šä¹‰åï¼ŒCç¼–è¯‘ç¨‹åºé€šè¿‡å®šä¹‰çš„ç±»å‹æ¥äº†è§£å…¶æ‰€éœ€å­˜å‚¨ç©ºé—´çš„å¤§å°å¹¶é¢„å…ˆä¸ºå…¶åˆ†é…é€‚å½“çš„å­˜å‚¨ç©ºé—´ï¼Œè¿™äº›ç©ºé—´ä¸€ç»åˆ†é…ï¼Œåœ¨å˜é‡æˆ–æ•°ç»„çš„ç”Ÿå­˜æœŸå†…æ˜¯å›ºå®šä¸å˜çš„ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼ä¹Ÿç§°ä¸ºâ€œé™æ€å­˜å‚¨åˆ†é…â€</p>
<p>Cä¸­è¿˜æœ‰ä¸€ç§â€œåŠ¨æ€å­˜å‚¨åˆ†é…â€çš„æ–¹æ³•ï¼Œåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´éœ€è¦ç©ºé—´æ¥å­˜å‚¨æ•°æ®æ—¶ï¼Œé€šè¿‡ç”³è¯·åˆ†é…æŒ‡å®šçš„å†…å­˜ç©ºé—´ï¼›å½“æœ‰é—²ç½®ä¸ç”¨çš„ç©ºé—´æ—¶å¯ä»¥éšæ—¶å°†å…¶é‡Šæ”¾ã€‚Cæ ‡å‡†åº“æä¾›äº†ç›¸å…³å‡½æ•°æ¥è¿›è¡Œå¯¹åº”æ“ä½œï¼š</p>
<h2 id="åº“å‡½æ•°"><a href="#åº“å‡½æ•°" class="headerlink" title="åº“å‡½æ•°"></a>åº“å‡½æ•°</h2><h3 id="mallocå‡½æ•°"><a href="#mallocå‡½æ•°" class="headerlink" title="mallocå‡½æ•°"></a>mallocå‡½æ•°</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°å</th>
<th style="text-align:center">malloc(unsigned int size);</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">size:å­—èŠ‚æ•°</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">æˆåŠŸåˆ™è¿”å›ä¸€ä¸ªç±»å‹ä¸ºvoidçš„é¦–åœ°å€ï¼Œå¤±è´¥ä¸ºnull</td>
</tr>
<tr>
<td style="text-align:center">åŠŸèƒ½</td>
<td style="text-align:center">åœ¨å†…å­˜çš„åŠ¨æ€å­˜å‚¨åŒºä¸­åˆ†é…ä¸€å—é•¿åº¦ä¸ºsizeå­—èŠ‚çš„è¿ç»­åŒºåŸŸ</td>
</tr>
</tbody>
</table>
</div>
<p>ä¾‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨æ—¶éœ€è¦åŒ…å«&quot;stdlib.h&quot;æˆ–&quot;malloc.h&quot;</span></span><br><span class="line"><span class="type">int</span> *pi=(<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"><span class="comment">//mallocè¿”å›å€¼ä¸ºvoid*å‹ï¼Œå¯ä»¥å¼ºåˆ¶è½¬åŒ–ä¸ºä»»ä½•ç±»å‹</span></span><br></pre></td></tr></table></figure>
<ul>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmallocåªä¼šè´Ÿè´£åˆ†é…ç©ºé—´ã€‚å¹¶ä¸èƒ½å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥æ­¤æ—¶*piçš„å€¼æ˜¯éšæœºçš„</li>
<li>è¯¥å‡½æ•°å¸¸ç”¨äºåˆå§‹åŒ–ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™æ ·å¯ä»¥é¿å…ä½¿è¯¥æŒ‡é’ˆæˆä¸º<strong>é‡æŒ‡é’ˆ</strong></li>
</ul>
<h3 id="callocå‡½æ•°"><a href="#callocå‡½æ•°" class="headerlink" title="callocå‡½æ•°"></a>callocå‡½æ•°</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°å</th>
<th style="text-align:center">calloc(unsigned int num,unsigned int size)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">num:åˆ†é…æ•°æ®é¡¹çš„ä¸ªæ•°<br>size:æ¯ä¸ªæ•°æ®é¡¹çš„å¤§å°</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">æˆåŠŸåˆ™è¿”å›ä¸€ä¸ªç±»å‹ä¸ºvoidçš„é¦–åœ°å€ï¼Œå¤±è´¥ä¸ºnull</td>
</tr>
<tr>
<td style="text-align:center">åŠŸèƒ½</td>
<td style="text-align:center">åœ¨å†…å­˜çš„åŠ¨æ€å­˜å‚¨åŒºä¸­åˆ†é…nå—é•¿åº¦ä¸ºsizeå­—èŠ‚çš„è¿ç»­åŒºåŸŸ</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>ä¸åŒäºmallocï¼Œcallocä¼šå¯¹åˆ†é…çš„å­˜å‚¨å•å…ƒå€¼è‡ªåŠ¨åˆå§‹åŒ–ä¸º0</li>
</ul>
<p>å› æ­¤ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•å¼€è¾Ÿä¸€ä¸ªä¸€ç»´æ•°ç»„</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> *p;</span><br><span class="line">p=(<span class="type">char</span>*)<span class="built_in">calloc</span>(<span class="number">10</span>,<span class="keyword">sizeof</span>(<span class="type">char</span>));<span class="comment">//å¼€è¾Ÿä¸€ä¸ªå¯ä»¥å­˜æ”¾åä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„</span></span><br></pre></td></tr></table></figure>
<h3 id="freeå‡½æ•°"><a href="#freeå‡½æ•°" class="headerlink" title="freeå‡½æ•°"></a>freeå‡½æ•°</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°å</th>
<th style="text-align:center">free(void *ptr);</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‚æ•°</td>
<td style="text-align:center">ä¸€ä¸ªæŒ‡é’ˆ</td>
</tr>
<tr>
<td style="text-align:center">è¿”å›å€¼</td>
<td style="text-align:center">æ— </td>
</tr>
<tr>
<td style="text-align:center">åŠŸèƒ½</td>
<td style="text-align:center">é‡Šæ”¾ptræ‰€æŒ‡å‘çš„ä¸€å—å†…å­˜ç©ºé—´</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œfreeé‡Šæ”¾çš„åŒºåŸŸåº”ä¸ºmallocæˆ–callocæ‰€åˆ†é…çš„åŒºåŸŸ</li>
<li>freeå‡½æ•°çš„å®é™…åŠŸèƒ½æ˜¯å‘Šè¯‰ç³»ç»Ÿè¾“å…¥å‚æ•°å¯¹åº”çš„å†…å­˜ä¸å†ä½¿ç”¨ï¼Œå³ä¸å†è¢«ä¿æŠ¤ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶ä»–å˜é‡éšæ—¶ä¼šå ç”¨å ç”¨é‚£ä¸ªåœ°å€ã€‚<strong>å› æ­¤ï¼ŒåŸåˆ™ä¸Šä¸å†è®¿é—®å·²ç»è¢«freeçš„çš„å†…å­˜</strong></li>
</ul>
]]></content>
      <tags>
        <tag>Cè¯­è¨€å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ç»“æ„ä½“å¤ä¹ </title>
    <url>/2022/08/01/C-%E7%BB%93%E6%9E%84%E4%BD%93/</url>
    <content><![CDATA[<h1 id="1-åŸºæœ¬å†…å®¹"><a href="#1-åŸºæœ¬å†…å®¹" class="headerlink" title="1.åŸºæœ¬å†…å®¹"></a>1.åŸºæœ¬å†…å®¹</h1><h2 id="å‡ ç§åˆå§‹åŒ–"><a href="#å‡ ç§åˆå§‹åŒ–" class="headerlink" title="å‡ ç§åˆå§‹åŒ–"></a>å‡ ç§åˆå§‹åŒ–</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">     <span class="type">char</span> *name;</span><br><span class="line">     <span class="type">int</span> age;</span><br><span class="line"> &#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">stu</span> =</span> &#123;â€œlnj<span class="string">&quot;, 27&#125;; //å®šä¹‰çš„åŒæ—¶æŒ‰é¡ºåºåˆå§‹åŒ–</span></span><br><span class="line"><span class="string">/**************************************************************************/</span></span><br><span class="line"><span class="string">struct Student stu = &#123;.age = 35, .name = â€œlnj&quot;</span>&#125;;<span class="comment">//å®šä¹‰çš„åŒæ—¶ä¸æŒ‰é¡ºåºåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">/**************************************************************************/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">stu</span>;</span></span><br><span class="line">stu.name = <span class="string">&quot;lnj&quot;</span>;</span><br><span class="line">stu.age = <span class="number">35</span>;  <span class="comment">//å…ˆå®šä¹‰åé€ä¸ªåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">/**************************************************************************/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">stu</span>;</span></span><br><span class="line">stu = (<span class="keyword">struct</span> Student)&#123;<span class="string">&quot;lnj&quot;</span>, <span class="number">35</span>&#125;;    <span class="comment">// å…ˆå®šä¹‰å,å†ä¸€æ¬¡æ€§åˆå§‹åŒ–   </span></span><br></pre></td></tr></table></figure>
<h2 id="ç»“æ„ä½“æ•°ç»„"><a href="#ç»“æ„ä½“æ•°ç»„" class="headerlink" title="ç»“æ„ä½“æ•°ç»„"></a>ç»“æ„ä½“æ•°ç»„</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">struct Student </span><br><span class="line">&#123;</span><br><span class="line">    char *name;</span><br><span class="line">    int age;</span><br><span class="line">&#125;;</span><br><span class="line">struct Student stu[2]; </span><br><span class="line">stu[0] = &#123;&quot;lnj&quot;, 35&#125;;</span><br><span class="line">stu[1] = &#123;&quot;zs&quot;, 18&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="ç»“æ„ä½“æŒ‡é’ˆ"><a href="#ç»“æ„ä½“æŒ‡é’ˆ" class="headerlink" title="ç»“æ„ä½“æŒ‡é’ˆ"></a>ç»“æ„ä½“æŒ‡é’ˆ</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">     <span class="comment">// å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ç±»å‹</span></span><br><span class="line">     <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> </span></span><br><span class="line"><span class="class">     &#123;</span></span><br><span class="line">         <span class="type">char</span> *name;</span><br><span class="line">         <span class="type">int</span> age;</span><br><span class="line">     &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªç»“æ„ä½“å˜é‡</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">stu</span> =</span> &#123;â€œlnj<span class="string">&quot;, 18&#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    // å®šä¹‰ä¸€ä¸ªæŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆå˜é‡</span></span><br><span class="line"><span class="string">    struct Student *p;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   // æŒ‡å‘ç»“æ„ä½“å˜é‡stu</span></span><br><span class="line"><span class="string">   p = &amp;stu;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    /*</span></span><br><span class="line"><span class="string">     è¿™æ—¶å€™å¯ä»¥ç”¨3ç§æ–¹å¼è®¿é—®ç»“æ„ä½“çš„æˆå‘˜</span></span><br><span class="line"><span class="string">     */</span></span><br><span class="line"><span class="string">    // æ–¹å¼1ï¼šç»“æ„ä½“å˜é‡å.æˆå‘˜å</span></span><br><span class="line"><span class="string">    printf(&quot;</span>name=%s, age = %d \n<span class="string">&quot;, stu.name, stu.age);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    // æ–¹å¼2ï¼š(*æŒ‡é’ˆå˜é‡å).æˆå‘˜å</span></span><br><span class="line"><span class="string">    printf(&quot;</span>name=%s, age = %d \n<span class="string">&quot;, (*p).name, (*p).age);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    // æ–¹å¼3ï¼šæŒ‡é’ˆå˜é‡å-&gt;æˆå‘˜å</span></span><br><span class="line"><span class="string">    printf(&quot;</span>name=%s, age = %d \n<span class="string">&quot;, p-&gt;name, p-&gt;age);</span></span><br><span class="line"><span class="string">  //-&gt;è¿ç®—ç¬¦åªç”¨äºæŒ‡é’ˆç»“æ„ä½“</span></span><br><span class="line"><span class="string">    return 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»“æ„ä½“åµŒå¥—"><a href="#ç»“æ„ä½“åµŒå¥—" class="headerlink" title="ç»“æ„ä½“åµŒå¥—"></a>ç»“æ„ä½“åµŒå¥—</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Date</span>&#123;</span></span><br><span class="line">     <span class="type">int</span> month;</span><br><span class="line">     <span class="type">int</span> day;</span><br><span class="line">     <span class="type">int</span> year;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span>  <span class="title">stu</span>&#123;</span></span><br><span class="line">     <span class="type">int</span> num;</span><br><span class="line">    <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">char</span> sex;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Date</span> <span class="title">birthday</span>;</span></span><br><span class="line">    Float score;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æˆå‘˜è®¿é—®</p>
<p>å¦‚æœæŸä¸ªæˆå‘˜ä¹Ÿæ˜¯ç»“æ„ä½“å˜é‡ï¼Œå¯ä»¥è¿ç»­ä½¿ç”¨æˆå‘˜è¿ç®—ç¬¦â€.â€è®¿é—®æœ€ä½ä¸€çº§æˆå‘˜ã€‚</p>
</li>
</ul>
<h1 id="2-å†…å­˜åˆ†æ"><a href="#2-å†…å­˜åˆ†æ" class="headerlink" title="2.å†…å­˜åˆ†æ"></a>2.å†…å­˜åˆ†æ</h1><ul>
<li><p>ç»“æ„ä½“å˜é‡å ç”¨çš„å†…å­˜ç©ºé—´æ°¸è¿œæ˜¯æ‰€æœ‰æˆå‘˜ä¸­å ç”¨å†…å­˜æœ€å¤§æˆå‘˜çš„å€æ•°(å¯¹é½é—®é¢˜)</p>
<p>è¿™ç§å¼ºåˆ¶çš„è¦æ±‚ä¸€æ¥ç®€åŒ–äº†å¤„ç†å™¨ä¸å†…å­˜ä¹‹é—´ä¼ è¾“ç³»ç»Ÿçš„è®¾è®¡,äºŒæ¥å¯ä»¥æå‡è¯»å–æ•°æ®çš„é€Ÿåº¦ã€‚æ¯”å¦‚è¿™ä¹ˆä¸€ç§å¤„ç†å™¨,å®ƒæ¯æ¬¡è¯»å†™å†…å­˜çš„æ—¶å€™éƒ½ä»æŸä¸ª8å€æ•°çš„åœ°å€å¼€å§‹,ä¸€æ¬¡è¯»å‡ºæˆ–å†™å…¥8ä¸ªå­—èŠ‚çš„æ•°æ®,å‡å¦‚è½¯ä»¶èƒ½ ä¿è¯doubleç±»å‹çš„æ•°æ®éƒ½ä»8å€æ•°åœ°å€å¼€å§‹,é‚£ä¹ˆè¯»æˆ–å†™ä¸€ä¸ªdoubleç±»å‹æ•°æ®å°±åªéœ€è¦ä¸€æ¬¡å†…å­˜æ“ä½œã€‚å¦åˆ™,æˆ‘ä»¬å°±å¯èƒ½éœ€è¦ä¸¤æ¬¡å†…å­˜æ“ä½œæ‰èƒ½å®Œæˆè¿™ä¸ªåŠ¨ä½œ,å› ä¸ºæ•°æ®æˆ–è®¸æ°å¥½æ¨ªè·¨åœ¨ä¸¤ä¸ªç¬¦åˆå¯¹é½è¦æ±‚çš„8å­—èŠ‚ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">   <span class="type">int</span> age; <span class="comment">// 4</span></span><br><span class="line">   <span class="type">char</span> ch; <span class="comment">// 1</span></span><br><span class="line">   <span class="type">double</span> score; <span class="comment">// 8</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">p</span>;</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;sizeof = %i\n&quot;</span>, <span class="keyword">sizeof</span>(p)); <span class="comment">// 16</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å ç”¨å†…å­˜æœ€å¤§å±æ€§æ˜¯score, å 8ä¸ªå­—èŠ‚, æ‰€ä»¥ç¬¬ä¸€æ¬¡ä¼šåˆ†é…8ä¸ªå­—èŠ‚</li>
<li>å°†ç¬¬ä¸€æ¬¡åˆ†é…çš„8ä¸ªå­—èŠ‚åˆ†é…ç»™age4ä¸ª,åˆ†é…ç»™ch1ä¸ª, è¿˜å‰©ä¸‹3ä¸ªå­—èŠ‚</li>
<li>å½“éœ€è¦åˆ†é…ç»™scoreæ—¶, å‘ç°åªå‰©ä¸‹3ä¸ªå­—èŠ‚, æ‰€ä»¥ä¼šå†æ¬¡å¼€è¾Ÿ8ä¸ªå­—èŠ‚å­˜å‚¨ç©ºé—´</li>
<li>ä¸€å…±å¼€è¾Ÿäº†ä¸¤æ¬¡8ä¸ªå­—èŠ‚ç©ºé—´, æ‰€ä»¥æœ€ç»ˆpå ç”¨16ä¸ªå­—èŠ‚</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="type">int</span> age; <span class="comment">// 4</span></span><br><span class="line">  <span class="type">double</span> score; <span class="comment">// 8</span></span><br><span class="line">  <span class="type">char</span> ch; <span class="comment">// 1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">p</span>;</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;sizeof = %i\n&quot;</span>, <span class="keyword">sizeof</span>(p)); <span class="comment">// 24</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å ç”¨å†…å­˜æœ€å¤§å±æ€§æ˜¯score, å 8ä¸ªå­—èŠ‚, æ‰€ä»¥ç¬¬ä¸€æ¬¡ä¼šåˆ†é…8ä¸ªå­—èŠ‚</li>
<li>å°†ç¬¬ä¸€æ¬¡åˆ†é…çš„8ä¸ªå­—èŠ‚åˆ†é…ç»™age4ä¸ª,è¿˜å‰©ä¸‹4ä¸ªå­—èŠ‚</li>
<li>å½“éœ€è¦åˆ†é…ç»™scoreæ—¶, å‘ç°åªå‰©ä¸‹4ä¸ªå­—èŠ‚, æ‰€ä»¥ä¼šå†æ¬¡å¼€è¾Ÿ8ä¸ªå­—èŠ‚å­˜å‚¨ç©ºé—´<br>å°†æ–°åˆ†é…çš„8ä¸ªå­—èŠ‚åˆ†é…ç»™score, è¿˜å‰©ä¸‹0ä¸ªå­—èŠ‚</li>
<li>å½“éœ€è¦åˆ†é…ç»™chæ—¶, å‘ç°ä¸Šä¸€æ¬¡åˆ†é…çš„å·²ç»æ²¡æœ‰äº†, æ‰€ä»¥ä¼šå†æ¬¡å¼€è¾Ÿ8ä¸ªå­—èŠ‚å­˜å‚¨ç©ºé—´<br>ä¸€å…±å¼€è¾Ÿäº†3æ¬¡8ä¸ªå­—èŠ‚ç©ºé—´, æ‰€ä»¥æœ€ç»ˆpå ç”¨24ä¸ªå­—èŠ‚</li>
</ul>
</li>
</ul>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹å ç”¨å†…å­˜æœ€å¤§çš„å˜é‡çš„åˆ¤æ–­ä»…é™åŸºæœ¬ç±»å‹ï¼ŒåŒæ—¶ä¸åŒ…æ‹¬æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä¸€ä¸ªç»“æ„ä½“åŒæ—¶åŒ…æ‹¬</strong></p>
<p><strong><code>chara[5];int b;</code>æ—¶ä»ç„¶ç”¨intçš„å¤§å°è®¡ç®—ã€‚</strong></p>
<h1 id="3-ç»“æ„ä½“ä¹‹é—´èµ‹å€¼"><a href="#3-ç»“æ„ä½“ä¹‹é—´èµ‹å€¼" class="headerlink" title="3.ç»“æ„ä½“ä¹‹é—´èµ‹å€¼"></a>3.ç»“æ„ä½“ä¹‹é—´èµ‹å€¼</h1><ul>
<li><p>ç»“æ„ä½“è™½ç„¶æ˜¯æ„é€ ç±»å‹, <strong>ä½†æ˜¯ç»“æ„ä½“ä¹‹é—´èµ‹å€¼æ˜¯å€¼æ‹·è´, è€Œä¸æ˜¯åœ°å€ä¼ é€’</strong>ã€‚æ‰€ä»¥ç»“æ„ä½“å˜é‡ä½œä¸ºå‡½æ•°å½¢å‚æ—¶ä¹Ÿæ˜¯å€¼ä¼ é€’, <strong>åœ¨å‡½æ•°å†…ä¿®æ”¹å½¢å‚, ä¸ä¼šå½±å“å¤–ç•Œå®å‚</strong>ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="keyword">struct</span> Person per)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">p1</span> =</span> &#123;<span class="string">&quot;lnj&quot;</span>, <span class="number">35</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;p1.name = %s\n&quot;</span>, p1.name); <span class="comment">// lnj</span></span><br><span class="line">    test(p1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;p1.name = %s\n&quot;</span>, p1.name); <span class="comment">// lnj</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="keyword">struct</span> Person per)</span></span><br><span class="line">&#123;</span><br><span class="line">    per.name = <span class="string">&quot;zs&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="å…±ç”¨ä½“"><a href="#å…±ç”¨ä½“" class="headerlink" title="å…±ç”¨ä½“"></a>å…±ç”¨ä½“</h1><ul>
<li><p>å’Œç»“æ„ä½“ä¸åŒçš„æ˜¯, ç»“æ„ä½“çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯å ç”¨ä¸€å—ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´, è€Œå…±ç”¨ä½“<strong>æ‰€æœ‰çš„æˆå‘˜éƒ½å ç”¨åŒä¸€å—å­˜å‚¨ç©ºé—´ï¼Œå› æ­¤æ‰€æœ‰æˆå‘˜çš„åœ°å€éƒ½æ˜¯ç›¸åŒçš„</strong></p>
</li>
<li><p>ç‰¹ç‚¹: ç”±äºæ‰€æœ‰å±æ€§å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´, <strong>æ‰€ä»¥åªè¦å…¶ä¸­ä¸€ä¸ªå±æ€§å‘ç”Ÿäº†æ”¹å˜, å…¶å®ƒçš„å±æ€§éƒ½ä¼šå—åˆ°å½±å“</strong>ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">Test</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">Test</span> <span class="title">t</span>;</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;sizeof(p) = %i\n&quot;</span>, <span class="keyword">sizeof</span>(t)); <span class="comment">//4</span></span><br><span class="line">  </span><br><span class="line">t.age = <span class="number">33</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;t.age = %i\n&quot;</span>, t.age); <span class="comment">// 33</span></span><br><span class="line">t.ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;t.ch = %c\n&quot;</span>, t.ch); <span class="comment">// a</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;t.age = %i\n&quot;</span>, t.age); <span class="comment">// 97</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h1><ul>
<li>æšä¸¾ä½¿ç”¨çš„æ³¨æ„<ul>
<li>Cè¯­è¨€ç¼–è¯‘å™¨ä¼šå°†æšä¸¾å…ƒç´ (springã€summerç­‰)ä½œä¸º<strong>æ•´å‹å¸¸é‡</strong>å¤„ç†ï¼Œç§°ä¸ºæšä¸¾å¸¸é‡ã€‚</li>
<li>æšä¸¾å…ƒç´ çš„å€¼å–å†³äºå®šä¹‰æ—¶å„æšä¸¾å…ƒç´ æ’åˆ—çš„å…ˆåé¡ºåºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å…ƒç´ çš„å€¼ä¸º0ï¼Œç¬¬äºŒä¸ªä¸º1ï¼Œä¾æ¬¡é¡ºåºåŠ 1ã€‚</li>
<li>ä¹Ÿå¯ä»¥åœ¨å®šä¹‰æšä¸¾ç±»å‹æ—¶æ”¹å˜æšä¸¾å…ƒç´ çš„å€¼</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Season</span> &#123;</span></span><br><span class="line">    Spring = <span class="number">9</span>,</span><br><span class="line">    Summer,</span><br><span class="line">    Autumn = <span class="number">20</span>,</span><br><span class="line">    Winter</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯è¯´springçš„å€¼ä¸º9ï¼Œsummerçš„å€¼ä¸º10ï¼Œautumnçš„å€¼ä¸º20ï¼Œwinterçš„å€¼ä¸º21</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å…³äºæšä¸¾ç±»å‹çš„å†…å­˜å¤§å°ï¼š<ul>
<li>è‹¥ä¸ºæ²¡æœ‰åœ¨å…¶ä¸­èµ‹å€¼çš„æ“ä½œï¼Œé»˜è®¤4å­—èŠ‚</li>
<li>è‹¥æœ‰èµ‹å€¼ï¼Œå¤§å°å–å†³äºèµ‹å€¼æ•°çš„ç±»å‹</li>
</ul>
</li>
</ul>
<h1 id="åˆ©ç”¨ç»“æ„ä½“å®ç°åŠ¨æ€é“¾è¡¨"><a href="#åˆ©ç”¨ç»“æ„ä½“å®ç°åŠ¨æ€é“¾è¡¨" class="headerlink" title="åˆ©ç”¨ç»“æ„ä½“å®ç°åŠ¨æ€é“¾è¡¨"></a>åˆ©ç”¨ç»“æ„ä½“å®ç°åŠ¨æ€é“¾è¡¨</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;windows.h&quot;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">list</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> num;</span><br><span class="line">	<span class="type">char</span> name[<span class="number">30</span>];</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;test;</span><br><span class="line"></span><br><span class="line">test *<span class="title function_">creat</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	test *linkhead,*linkend,*pt;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		pt=(test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test));<span class="comment">//åˆ†é…åŠ¨æ€å†…å­˜</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %s&quot;</span>,&amp;pt-&gt;num,pt-&gt;name);</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			linkhead=pt;<span class="comment">//ç¬¬ä¸€æ¬¡å…ˆå°†å½“å‰èŠ‚ç‚¹èµ‹ç»™é“¾å¤´é“¾å°¾</span></span><br><span class="line">			linkend=pt;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span><span class="comment">//è‹¥ä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå…ˆå°†å½“å‰èŠ‚ç‚¹å­˜å…¥ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextä¸­ï¼Œå†å°†linkendæ›´æ–°ä¸ºå½“å‰èŠ‚ç‚¹ä»¥ä¾›ä¸‹ä¸€æ¬¡è®¿é—®</span></span><br><span class="line">		&#123;                                                                <span class="comment">//å½“å‰èŠ‚ç‚¹çš„next</span></span><br><span class="line">			linkend-&gt;next=pt;</span><br><span class="line">			linkend=pt;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	linkend-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> linkhead;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">destroy</span><span class="params">(test *linkHead)</span></span><br><span class="line">&#123;</span><br><span class="line">	test *p;</span><br><span class="line">	p=linkHead; </span><br><span class="line">	<span class="keyword">while</span>(p!=<span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		linkHead=linkHead-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(p);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;clear\n&quot;</span>);</span><br><span class="line">		p=linkHead;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	test *LHï¼Œ*Free_item;</span><br><span class="line">	LH=creat();</span><br><span class="line">   Free_item=LH;</span><br><span class="line">	<span class="keyword">while</span>(LH!=<span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;NUM:%d   NAME:%s\n&quot;</span>,LH-&gt;num,LH-&gt;name);</span><br><span class="line">		LH=LH-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	destroy(Free_item);</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä»¥ä¸‹è§£é‡Šå­˜åœ¨ä¸€å®šé—®é¢˜ï¼Œæˆ‘ä¿®æ”¹åçš„å†…å®¹ä»¥åŠå†™åœ¨ä¸‹ä¸€èŠ‚ï¼ï¼ï¼</strong></p>
<ul>
<li><p><em>æ³¨ï¼šå…¶å®è¿™é‡Œæœ€å¼€å§‹æ‰“å°ä¹Ÿåº”è¯¥å•ç‹¬å†™ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ç”±äºæˆ‘æ‡’å¾—å»å†™äº†ï¼Œå› æ­¤ç›´æ¥åœ¨mainä¸­æ“ä½œå‚æ•°ï¼Œå¹¶ä¸”åœ¨æ“ä½œå®Œåæˆ‘æ„è¯†åˆ°å¥½åƒæ— æ³•å†ä»¥LHä¸ºå‚æ•°å»ä½¿ç”¨destroyå‡½æ•°ï¼ŒæŒ‰ç…§ä¸€èˆ¬åœ°å€ä¸æŒ‡é’ˆçš„ç†è§£ï¼Œåœ¨æ‰“å°å®Œæˆè¿‡ååº”è¯¥å·²ç»æ”¹å˜äº†åœ¨creat()å‡½æ•°ä¸­åˆ†é…çš„å†…å­˜æ‰€å¯¹åº”çš„å€¼ï¼Œä½†æ˜¯æˆ‘æŠ±ç€å°è¯•çš„å¿ƒç†ç”¨mainä¸­çš„Free_itemä½œä¸ºå‚æ•°ä½¿ç”¨destroyå‡½æ•°ç«Ÿç„¶æˆåŠŸäº†ï¼Œè¿™ä¸€åº¦è®©æˆ‘ä»¥ä¸ºæˆ‘åœ¨æŒ‡é’ˆçš„å­¦ä¹ ä¸­æ˜¯ä¸æ˜¯ç–å¿½äº†ä»€ä¹ˆé‡è¦å†…å®¹ï¼ä¹‹åè‡ªå·±ä»¥ç®€å•çš„å‡½æ•°é—´çš„æŒ‡é’ˆäº¤äº’å†™äº†ä¸€äº›ç¨‹åºå‘ç°è‡ªå·±çš„ç†è§£å¥½åƒä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæœ€åï¼Œåœ¨ä»¥â€å½¢å‚â€ä¸ºå…³é”®å­—æœç´¢æˆ‘çš„ä¸ªäººåšå®¢åç»ˆäºæ‰¾åˆ°å¦‚ä¸‹ä¸€æ®µè¯ï¼š</em></p>
<p><em>â€œç»“æ„ä½“è™½ç„¶æ˜¯æ„é€ ç±»å‹, ä½†æ˜¯ç»“æ„ä½“ä¹‹é—´èµ‹å€¼æ˜¯å€¼æ‹·è´, è€Œä¸æ˜¯åœ°å€ä¼ é€’ã€‚æ‰€ä»¥ç»“æ„ä½“å˜é‡ä½œä¸ºå‡½æ•°å½¢å‚æ—¶ä¹Ÿæ˜¯å€¼ä¼ é€’, åœ¨å‡½æ•°å†…ä¿®æ”¹å½¢å‚, ä¸ä¼šå½±å“å¤–ç•Œå®å‚ã€‚â€ï¼ˆå®Œå…¨å¿˜è®°äº†æğŸ˜‹ï¼Œæ‰€ä»¥è¦å¤šå¤šå¤ä¹ åŸæ¥çš„å†…å®¹ï¼ï¼ï¼‰</em></p>
<p><em>å› æ­¤LHä¹Ÿåªæ˜¯æ‹·è´äº†creatå‡½æ•°æ‰€åˆ›å»ºçš„linkheadçš„å€¼è€Œå·²ï¼Œå¯¹LHçš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šå½±å“creatå‡½æ•°æ‰€åˆ›å»ºçš„linkheadçš„å€¼ï¼Œè€ŒFree_itemæ‹·è´çš„ä¹Ÿæ˜¯LHæ”¹å˜å‰çš„å€¼ï¼Œå› æ­¤LHçš„æ”¹å˜ä¹Ÿä¸ä¼šå½±å“Free_itemçš„å†…å®¹ã€‚</em></p>
</li>
</ul>
<h2 id="2022-11-17æ”¹"><a href="#2022-11-17æ”¹" class="headerlink" title="2022.11.17æ”¹"></a>2022.11.17æ”¹</h2><p>å› ä¸ºæœ€è¿‘åˆåœ¨å­¦ä¹ FreeRTOSçš„ç›¸å…³å†…å®¹ï¼Œå†æ¬¡å¤ä¹ äº†ä¸€ä¸‹é“¾è¡¨çš„ç›¸å…³åŸç†ï¼Œé¡ºä¾¿åˆè¯»äº†ä¸€ä¸‹ä¸Šé¢å†™çš„å†…å®¹ï¼Œå‘ç°å¯¹äºä¸Šä¸€èŠ‚æœ€åè¿™é‡Œçš„è§£é‡Šå¥½åƒå¹¶ä¸æ­£ç¡®ï¼Œå› ä¸ºå½“æ—¶æ˜¯æŒ‰ç…§ç»“æ„ä½“èµ‹å€¼è§£é‡Šçš„ï¼Œ<strong>ä½†æ˜¯åœ¨è¿™ä¸ªé“¾è¡¨ç¨‹åºä¸­ï¼Œä¼ é€’çš„å†…å®¹æ˜æ˜¾æ˜¯åœ°å€è€Œä¸æ˜¯å€¼ï¼</strong>äºæ˜¯æˆ‘å†æ¬¡æŸ¥é˜…äº†ç»“æ„æŒ‡é’ˆçš„ç›¸å…³æ–‡çŒ®ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š</p>
<p><strong>æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥æ‹ä¸€ä¸‹</strong>ï¼š</p>
<h3 id="â‘ creatå‡½æ•°"><a href="#â‘ creatå‡½æ•°" class="headerlink" title="â‘ creatå‡½æ•°"></a>â‘ creatå‡½æ•°</h3><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥ç¡®å®šï¼Œåœ¨è¿™ä¸ªé“¾è¡¨ç¨‹åºä¸­çš„æ‰€æœ‰testç±»å‹å˜é‡å‡ä¸ºæŒ‡é’ˆå˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨creat()å‡½æ•°ä¸­:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">test *<span class="title function_">creat</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	test *linkhead,*linkend,*pt;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		pt=(test*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test));<span class="comment">//åˆ†é…åŠ¨æ€å†…å­˜</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %s&quot;</span>,&amp;pt-&gt;num,pt-&gt;name);</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			linkhead=pt;<span class="comment">//ç¬¬ä¸€æ¬¡å…ˆå°†å½“å‰èŠ‚ç‚¹èµ‹ç»™é“¾å¤´é“¾å°¾</span></span><br><span class="line">			linkend=pt;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span><span class="comment">//è‹¥ä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå…ˆå°†å½“å‰èŠ‚ç‚¹å­˜å…¥ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextä¸­ï¼Œå†å°†linkendæ›´æ–°ä¸ºå½“å‰èŠ‚ç‚¹ä»¥ä¾›ä¸‹ä¸€æ¬¡è®¿é—®</span></span><br><span class="line">		&#123;                                                                <span class="comment">//å½“å‰èŠ‚ç‚¹çš„next</span></span><br><span class="line">			linkend-&gt;next=pt;</span><br><span class="line">			linkend=pt;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	linkend-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> linkhead;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨<code>scanf(&quot;%d %s&quot;,&amp;pt-&gt;num,pt-&gt;name);</code>ä¸­ï¼Œå…¶å®æ˜¯è®©ptè¿™ä¸ªç»“æ„ä½“æŒ‡é’ˆæŒ‡å‘äº†ä¸€ä¸ªæ•´å‹æ•°å­—å’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§C++çš„è¯´æ³•å°±æ˜¯<strong>ç›´æ¥ä½¿æŒ‡é’ˆæŒ‡å‘äº†ä¸¤ä¸ªå­—ç¬¦å€¼å¸¸é‡ã€‚</strong></li>
<li>åœ¨ä¸‰æ¬¡å¾ªç¯ä¸­ï¼Œåˆ†åˆ«å¼€è¾Ÿäº†ä¸‰ä¸ªåŠ¨æ€å†…å­˜åŒºåŸŸã€‚</li>
<li>creatå‡½æ•°è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆ</li>
</ul>
<h3 id="â‘¡main-å‡½æ•°"><a href="#â‘¡main-å‡½æ•°" class="headerlink" title="â‘¡main()å‡½æ•°"></a>â‘¡main()å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	test *LHï¼Œ*Free_item;</span><br><span class="line">	LH=creat();</span><br><span class="line">   Free_item=LH;</span><br><span class="line">	<span class="keyword">while</span>(LH!=<span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;NUM:%d   NAME:%s\n&quot;</span>,LH-&gt;num,LH-&gt;name);</span><br><span class="line">		LH=LH-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	destroy(Free_item);</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>creatå‡½æ•°è¿”å›çš„æŒ‡é’ˆ<strong>èµ‹å€¼</strong>ç»™ç»“æ„ä½“æŒ‡é’ˆLHï¼Œå¹¶ä¸”åœ¨è¿™é‡Œï¼Œæ‰€æœ‰çš„æŒ‡é’ˆéƒ½ä¸æ˜¯äºŒé‡æŒ‡é’ˆï¼Œå› æ­¤ï¼Œcreatçš„è¿”å›å€¼linkheadçš„æˆå‘˜numå’Œnameéƒ½æ˜¯ç›´æ¥æŒ‡å‘çš„å­—ç¬¦å€¼å¸¸é‡ï¼Œ<strong>å› æ­¤LHä¹Ÿé€šè¿‡linkheadç›´æ¥æŒ‡å‘è¿™ä¸¤ä¸ªæˆå‘˜ï¼Œè€Œä¸æ˜¯LHæŒ‡å‘linkheadè¿™ä¸ªæŒ‡é’ˆå˜é‡çš„åœ°å€</strong>ï¼Œå¯ä»¥ç†è§£ä¸ºlinkheadå’ŒLHæ˜¯å¹¶åˆ—çš„ï¼Œæ²¡æœ‰å…ˆåé¡ºåºçš„ã€‚</li>
<li>ä¸‹ä¸€æ­¥çš„<code>Free_item=LH;</code>ä¹Ÿæ˜¯åŒç†ï¼Œå­—é¢æ„ä¹‰æ˜¯Free_itemæŒ‡å‘äº†LHçš„åœ°å€ï¼Œä½†æ˜¯å®é™…ä¸ŠFree_itemä¹Ÿæ˜¯ç›´æ¥æŒ‡å‘çš„åŠ¨æ€å†…å­˜ä¸­çš„å­—ç¬¦å€¼å¸¸é‡ï¼Œå› ä¸ºFree_itemæ˜¯ä¸€ä¸ªä¸€é‡æŒ‡é’ˆï¼Œ<strong>å®ƒä¸å…·æœ‰ä¿å­˜å¦ä¸€ä¸ªæŒ‡é’ˆå˜é‡åœ°å€çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å®ƒä¼šé€šè¿‡LHç›´æ¥æŒ‡å‘åŠ¨æ€å†…å­˜</strong></li>
<li>ç»¼ä¸Šï¼Œå®é™…ä¸ŠFree_itemå’ŒLHä¹Ÿæ˜¯å¹¶åˆ—å…³ç³»ï¼Œå› æ­¤å¾ªç¯ä¸­LHçš„æŒ‡å‘çš„æ”¹å˜ä¸ä¼šå½±å“åˆ°Free_itemçš„æŒ‡å‘ï¼Œå³ä½¿LHå·²ç»æŒ‡å‘nullï¼ŒFree_itemä¹Ÿè¿˜æ˜¯æŒ‡å‘çš„é“¾å¤´ã€‚</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å…¶å®è¯´åˆ°åº•ï¼Œæ˜¯æˆ‘è‡ªå·±å¯¹æŒ‡é’ˆç†è§£ä¸€ç›´å­˜åœ¨çš„è¯¯åŒºï¼Œä¾‹å¦‚å¦‚ä¸‹ä¾‹ç¨‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> a=<span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span> *p1,*p2;</span><br><span class="line">	p1=&amp;a;</span><br><span class="line">	p2=p1;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>,p1,&amp;p1,p2,&amp;a); <span class="comment">//6422036 6422024 6422036 6422036</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä¹‹å‰ä¸€ç›´è®¤ä¸ºä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆçš„ä¾¿ä¼šæŒ‡å‘å¦ä¸€ä¸ªæŒ‡é’ˆå˜é‡è‡ªå·±çš„åœ°å€ï¼Œ<strong>ä½†å®é™…ä¸Šï¼Œä¸€é‡æŒ‡é’ˆå¹¶ä¸å…·æœ‰ä¿å­˜å¦ä¸€ä¸ªæŒ‡é’ˆå˜é‡åœ°å€çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è¯¥æŒ‡é’ˆä¼šç›´æ¥æŒ‡å‘å¦ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ã€‚</strong></p>
<p>å°±åƒä¸Šè¿°ä¾‹ç¨‹ä¸­,p1æŒ‡å‘æ•´å‹å˜é‡açš„åœ°å€ï¼Œå†å°†p1èµ‹å€¼ç»™p2ï¼Œä½†æ‰“å°ç»“æœä¸­p2æŒ‡å‘çš„åœ°å€æ˜¯açš„åœ°å€(&amp;a)ï¼Œè€Œä¸æ˜¯p1æœ¬èº«çš„åœ°å€ï¼ˆ&amp;p1)ã€‚</p>
<p>è¿™ä¹Ÿä»å¦ä¸€æ–¹é¢è¯´æ˜äº†äºŒé‡æŒ‡é’ˆçš„ä¸€äº›é‡è¦æ€§å§ã€‚</p>
]]></content>
      <tags>
        <tag>Cè¯­è¨€å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æŒ‡é’ˆç›¸å…³å¤ä¹ </title>
    <url>/2022/07/31/C-%E6%8C%87%E9%92%88/</url>
    <content><![CDATA[<h1 id="1-åŸºæœ¬å†…å®¹"><a href="#1-åŸºæœ¬å†…å®¹" class="headerlink" title="1.åŸºæœ¬å†…å®¹"></a>1.åŸºæœ¬å†…å®¹</h1><h2 id="ä»€ä¹ˆæ˜¯æŒ‡é’ˆ"><a href="#ä»€ä¹ˆæ˜¯æŒ‡é’ˆ" class="headerlink" title="ä»€ä¹ˆæ˜¯æŒ‡é’ˆ"></a>ä»€ä¹ˆæ˜¯æŒ‡é’ˆ</h2><ul>
<li>åœ¨è®¡ç®—æœºä¸­æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜å•å…ƒä¸­,è€Œæ¯ä¸ªå†…å­˜å•å…ƒéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„åœ°å€, åªè¦é€šè¿‡è¿™ä¸ªåœ°å€å°±èƒ½æ‰¾åˆ°å¯¹åº”å•å…ƒä¸­å­˜å‚¨çš„æ•°æ®.</li>
<li>ç”±äºé€šè¿‡åœ°å€èƒ½æ‰¾åˆ°æ‰€éœ€çš„å˜é‡å•å…ƒï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´è¯¥åœ°å€æŒ‡å‘äº†è¯¥å˜é‡å•å…ƒã€‚å°†åœ°å€å½¢è±¡åŒ–çš„ç§°ä¸ºâ€œæŒ‡é’ˆâ€</li>
<li>å†…å­˜å•å…ƒçš„æŒ‡é’ˆ(åœ°å€)å’Œå†…å­˜å•å…ƒçš„å†…å®¹æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯æŒ‡é’ˆå˜é‡"><a href="#ä»€ä¹ˆæ˜¯æŒ‡é’ˆå˜é‡" class="headerlink" title="ä»€ä¹ˆæ˜¯æŒ‡é’ˆå˜é‡"></a>ä»€ä¹ˆæ˜¯æŒ‡é’ˆå˜é‡</h2><p>åœ¨Cè¯­è¨€ä¸­,å…è®¸ç”¨ä¸€ä¸ªå˜é‡æ¥å­˜æ”¾å…¶å®ƒå˜é‡çš„åœ°å€, è¿™ç§ä¸“é—¨ç”¨äºå­˜å‚¨å…¶å®ƒå˜é‡åœ°å€çš„å˜é‡, æˆ‘ä»¬ç§°ä¹‹ä¸ºæŒ‡é’ˆå˜é‡ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> *p; <span class="comment">// ä¸€ä¸ªç”¨äºæŒ‡å‘å­—ç¬¦å‹å˜é‡çš„æŒ‡é’ˆ</span></span><br><span class="line">p = &amp;ch; </span><br></pre></td></tr></table></figure>
<p>*è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *p;</span><br><span class="line">p =  <span class="number">250</span>; <span class="comment">// é”™è¯¯å†™æ³•</span></span><br><span class="line"><span class="comment">/****************************/</span></span><br><span class="line"><span class="type">int</span> *p;</span><br><span class="line">*p=&amp;a; <span class="comment">//é”™è¯¯å†™æ³•</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¤šä¸ªæŒ‡é’ˆå˜é‡å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚</li>
</ul>
<h3 id="å¯¹æŒ‡é’ˆå˜é‡çš„ç†è§£"><a href="#å¯¹æŒ‡é’ˆå˜é‡çš„ç†è§£" class="headerlink" title="å¯¹æŒ‡é’ˆå˜é‡çš„ç†è§£"></a>å¯¹æŒ‡é’ˆå˜é‡çš„ç†è§£</h3><p>æŒ‡é’ˆå˜é‡æœ¬èº«çš„ä½œç”¨æ˜¯å‚¨å­˜ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å˜é‡çš„åœ°å€ï¼Œä½†æ˜¯å…¶æœ¬èº«ä½œä¸ºä¸€ä¸ªé¢å¤–çš„å˜é‡ï¼Œä¹Ÿæœ‰è‡ªå·±çš„åœ°å€ï¼Œ<strong>ä¸”è¿™ä¸ªåœ°å€ä¸ç­‰äºå…¶å‚¨å­˜çš„å˜é‡çš„åœ°å€ï¼›</strong></p>
<p>ä¾‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> *c;</span><br><span class="line">    c=&amp;a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æŒ‡é’ˆå˜é‡cè‡ªèº«çš„åœ°å€ä¸ºï¼š%d&quot;</span>,&amp;c);<span class="comment">//6487568 </span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æŒ‡é’ˆå˜é‡cå­˜å‚¨å•å…ƒå†…å­˜å‚¨çš„å†…å®¹(ä¹Ÿå°±æ˜¯açš„åœ°å€)ä¸ºï¼š%d&quot;</span>,c);<span class="comment">//6487576</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å˜é‡açš„åœ°å€ä¸ºï¼š%d&quot;</span>,a);<span class="comment">//6487576</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  cä»£è¡¨cå†…å­˜æ”¾çš„åœ°å€</span></span><br><span class="line"><span class="comment">//  &amp;cä»£è¡¨cè‡ªèº«çš„åœ°å€</span></span><br><span class="line"><span class="comment">//  *cä»£è¡¨cå†…å­˜æ”¾çš„åœ°å€ä¸­æ‰€å­˜å‚¨çš„å€¼</span></span><br><span class="line"><span class="comment">// (c+1)ä»£è¡¨cå†…å­˜æ”¾çš„åœ°å€+1*ç±»å‹é•¿åº¦</span></span><br><span class="line"><span class="comment">// *c+1ä»£è¡¨cå†…å­˜æ”¾çš„åœ°å€ä¸­æ‰€å­˜å‚¨çš„å€¼æœ¬èº«+1</span></span><br><span class="line"><span class="comment">// *(c+1)ä»£è¡¨cå†…å­˜æ”¾çš„åœ°å€+1*ç±»å‹é•¿åº¦åå¾—åˆ°çš„åœ°å€ä¸­å­˜å‚¨çš„å€¼</span></span><br></pre></td></tr></table></figure>
<h2 id="å–åœ°å€è¿ç®—ç¬¦ï¼ˆ-amp-ï¼‰ä¸è§£å¼•ç”¨è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#å–åœ°å€è¿ç®—ç¬¦ï¼ˆ-amp-ï¼‰ä¸è§£å¼•ç”¨è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="å–åœ°å€è¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰ä¸è§£å¼•ç”¨è¿ç®—ç¬¦ï¼ˆ*ï¼‰"></a>å–åœ°å€è¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰ä¸è§£å¼•ç”¨è¿ç®—ç¬¦ï¼ˆ*ï¼‰</h2><ul>
<li><p>å–åœ°å€è¿ç®—ç¬¦ï¼š&amp;xï¼Œå…¶ä½œç”¨ä¸ºè¿”å›æ“ä½œå¯¹è±¡çš„åœ°å€</p>
</li>
<li><p>è§£å¼•ç”¨è¿ç®—ç¬¦ï¼š<code>*x</code>ï¼Œå…¶ä½œç”¨æ˜¯<strong>è¿”å›xä¸­å­˜å‚¨çš„åœ°å€å†…å­˜å‚¨çš„å€¼</strong></p>
<p>ä¾‹ï¼š <code>int a,*p1;p1=&amp;a;</code><strong>åˆ™æ­¤æ—¶*p1ä»£è¡¨çš„å°±æ˜¯å˜é‡açš„å†…å®¹,è€Œä¸æ˜¯açš„åœ°å€</strong></p>
<p>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨<code>printf(&quot;%d&quot;,*p);</code>æ—¶æ˜¯ç”¨<em>pè€Œä¸æ˜¯päº†ï¼Œå› ä¸º </em>pæ‰æ˜¯ä»£è¡¨açš„å€¼ï¼Œpåˆ™å­˜å‚¨çš„å˜é‡açš„åœ°å€</p>
<p><strong>ç»¼ä¸Šï¼šé™¤å¼€å®šä¹‰æ—¶ï¼Œå…¶ä½™æ—¶é—´*pç­‰åŒaï¼Œpç­‰åŒ&amp;a</strong></p>
<p>åœ¨å®šä¹‰æ—¶ï¼Œ<code>int *p1=&amp;a;</code>ä¹Ÿæ˜¯åˆæ³•çš„ä¸”ä½œç”¨ä¸ä¸Šç›¸åŒï¼Œä¸ªäººç†è§£ä¸ºæ˜¯ä¸€ç§æŒ‡é’ˆæ ¼å¼çš„â€œå£°æ˜â€ï¼ˆï¼Ÿï¼‰è¿™ä¹Ÿè§£é‡Šäº†å½“æŸä¸ªå‡½æ•°å‚æ•°å®šä¹‰ä¸ºä¸º<code>int *a</code>æ—¶å®é™…ä½¿ç”¨æ—¶ä¼ å…¥çš„ä¹Ÿæ˜¯&amp;çš„å–åœ°å€å˜é‡äº†ï¼ˆä¸ªäººç†è§£ï¼‰</p>
</li>
</ul>
<h1 id="2-ä¸€äº›ç”¨æ³•"><a href="#2-ä¸€äº›ç”¨æ³•" class="headerlink" title="2.ä¸€äº›ç”¨æ³•"></a>2.ä¸€äº›ç”¨æ³•</h1><h2 id="äºŒçº§æŒ‡é’ˆ"><a href="#äºŒçº§æŒ‡é’ˆ" class="headerlink" title="äºŒçº§æŒ‡é’ˆ"></a>äºŒçº§æŒ‡é’ˆ</h2><ul>
<li><p>å¦‚æœä¸€ä¸ªæŒ‡é’ˆå˜é‡å­˜æ”¾çš„åˆæ˜¯å¦ä¸€ä¸ªæŒ‡é’ˆå˜é‡çš„åœ°å€,åˆ™ç§°è¿™ä¸ªæŒ‡é’ˆå˜é‡ä¸ºæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¿¼å˜é‡ã€‚ä¹Ÿç§°ä¸ºâ€œäºŒçº§æŒ‡é’ˆâ€ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> c = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> *cp;</span><br><span class="line">cp = &amp;c;</span><br><span class="line"><span class="type">char</span> **cp2;</span><br><span class="line">cp2 = &amp;cp;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;c = %c&quot;</span>, **cp2);<span class="comment">//  c=a</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="æŒ‡é’ˆè®¿é—®æ•°ç»„å…ƒç´ "><a href="#æŒ‡é’ˆè®¿é—®æ•°ç»„å…ƒç´ " class="headerlink" title="æŒ‡é’ˆè®¿é—®æ•°ç»„å…ƒç´ "></a>æŒ‡é’ˆè®¿é—®æ•°ç»„å…ƒç´ </h2><ul>
<li><p>åœ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„å…ƒç´ æ—¶,å…è®¸ä»¥ä¸‹è¿ç®—:</p>
<ul>
<li>åŠ ä¸€ä¸ªæ•´æ•°(ç”¨+æˆ–+=),å¦‚p+1</li>
<li>å‡ä¸€ä¸ªæ•´æ•°(ç”¨-æˆ–-=),å¦‚p-1</li>
<li>è‡ªåŠ è¿ç®—,å¦‚p++,++p</li>
<li>è‡ªå‡è¿ç®—,å¦‚pâ€“,â€”p</li>
</ul>
<p>å¦‚æœæŒ‡é’ˆå˜é‡på·²æŒ‡å‘æ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ,åˆ™p+1<code>æŒ‡å‘</code>åŒä¸€æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ,p-1<code>æŒ‡å‘</code>åŒ ä¸€æ•°ç»„ä¸­çš„ä¸Šä¸€ä¸ªå…ƒç´ ã€‚ã€*(p+1)ã€‘</p>
<p>(p+N)åœ¨åœ°å€ä¸Šçš„å˜åŒ–ä¸º<code>på†…å­˜æ”¾çš„åœ°å€+æ•°ç»„å…ƒç´ ç±»å‹é•¿åº¦*N</code></p>
<ul>
<li>å…¶å¯¹pæ‰€æœ‰çš„åŸºæœ¬è¿ç®—å‡ç¬¦åˆä¸Šè¿°è§„å¾‹</li>
</ul>
</li>
</ul>
<h2 id="æŒ‡é’ˆä¸å­—ç¬¦ä¸²"><a href="#æŒ‡é’ˆä¸å­—ç¬¦ä¸²" class="headerlink" title="æŒ‡é’ˆä¸å­—ç¬¦ä¸²"></a>æŒ‡é’ˆä¸å­—ç¬¦ä¸²</h2><p>å®šä¹‰å­—ç¬¦ä¸²é™¤äº†ä½¿ç”¨å­—ç¬¦æ•°ç»„å­˜æ”¾ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²æŒ‡é’ˆçš„æ–¹å¼æŒ‡å‘å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„åä¿å­˜çš„æ˜¯æ•°ç»„ç¬¬0ä¸ªå…ƒç´ çš„åœ°å€, æŒ‡é’ˆä¹Ÿå¯ä»¥ä¿å­˜ç¬¬0ä¸ªå…ƒç´ çš„åœ°å€</span></span><br><span class="line"><span class="type">char</span> *str = <span class="string">&quot;abc&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>ä½¿ç”¨æ³¨æ„äº‹é¡¹</p>
<ul>
<li><p>æ­¤æ–¹æ³•ä¸å¯ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨å­—ç¬¦æ•°ç»„æ¥ä¿å­˜çš„å­—ç¬¦ä¸²æ˜¯ä¿å­˜æ ˆé‡Œçš„,ä¿å­˜æ ˆé‡Œé¢ä¸œè¥¿æ˜¯å¯è¯»å¯å†™,æ‰€æœ‰å¯ä»¥ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨å­—ç¬¦æŒ‡é’ˆæ¥ä¿å­˜å­—ç¬¦ä¸²,å®ƒä¿å­˜çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡åœ°å€,å¸¸é‡åŒºæ˜¯åªè¯»çš„,æ‰€ä»¥æˆ‘ä»¬ä¸å¯ä»¥ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦</span></span><br><span class="line"><span class="type">char</span> *str = <span class="string">&quot;lnj&quot;</span>;</span><br><span class="line">*(str+<span class="number">2</span>) = <span class="string">&#x27;y&#x27;</span>; <span class="comment">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸èƒ½å¤Ÿç›´æ¥æ¥æ”¶é”®ç›˜è¾“å…¥</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯çš„åŸå› æ˜¯:stræ˜¯ä¸€ä¸ªé‡æŒ‡é’ˆ,ä»–å¹¶æ²¡æœ‰æŒ‡å‘æŸä¸€å—å†…å­˜ç©ºé—´</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ä¸å…è®¸è¿™æ ·å†™å¦‚æœç»™stråˆ†é…å†…å­˜ç©ºé—´æ˜¯å¯ä»¥è¿™æ ·ç”¨ çš„</span></span><br><span class="line"><span class="type">char</span> *str;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, str);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ"><a href="#æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ" class="headerlink" title="æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ"></a>æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ</h2><p>å‡½æ•°åœ¨å†…å­˜ä¸­å æ®ç©ºé—´ï¼Œå› æ­¤ä¹Ÿæœ‰èµ·å§‹åœ°å€ã€‚</p>
<p>æ ¼å¼ï¼šè¿”å›å€¼ç±»å‹  (*æŒ‡é’ˆå˜é‡å)(å½¢å‚);</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;     </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> (*p)(<span class="type">int</span> x,<span class="type">int</span> y);</span><br><span class="line">	p=sum;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(*p)(<span class="number">1</span>,<span class="number">2</span>)); <span class="comment">//æ‰“å°3</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å‡½æ•°æŒ‡é’ˆæœ‰ä»¥ä¸‹å‡ ç‚¹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>å½“æŠŠä¸€ä¸ª<strong>å‡½æ•°åï¼ˆæ³¨æ„æ˜¯åå­—ï¼Œä¸å¸¦è¾“å…¥å‚æ•°ï¼‰</strong>ä½œä¸ºä¸€ä¸ªå€¼ä½¿ç”¨æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè‡ªåŠ¨è½¬æ¢æˆæŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å‡½æ•°çš„å†…å­˜åœ°å€ï¼Œå› æ­¤åœ¨å¯¹æŒ‡é’ˆåˆå§‹åŒ–æ—¶å–åœ°å€ç¬¦å¯é€‰:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">p=sum;</span><br><span class="line">p=&amp;sum;<span class="comment">//éƒ½æ­£ç¡®</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å½“ä½¿ç”¨æŒ‡é’ˆè°ƒç”¨å‡½æ•°æ—¶ï¼Œè§£å¼•ç”¨ä¹Ÿæ˜¯å¯é€‰çš„ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(*p)(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,p(<span class="number">1</span>,<span class="number">2</span>));<span class="comment">//éƒ½è¾“å‡º3</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å½“å‡½æ•°æŒ‡é’ˆä½œå½¢å‚æ—¶ï¼š</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;math.h&quot;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">tran</span><span class="params">(<span class="type">double</span> (*a)(<span class="type">double</span> a1),<span class="type">double</span> (*b)(<span class="type">double</span> b1),<span class="type">double</span> x)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">double</span> x=<span class="number">3.141592</span>;</span><br><span class="line">	tran(<span class="built_in">sin</span>,<span class="built_in">cos</span>,x);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">tran</span><span class="params">(<span class="type">double</span>(*a)(<span class="type">double</span> a1),<span class="type">double</span>(*b)(<span class="type">double</span> b1),<span class="type">double</span> x)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%f\n&quot;</span>,(*a)(x/<span class="number">2</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%f&quot;</span>,(*b)(x/<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨å‡½æ•°æ—¶ç›´æ¥ä¼ å…¥å‡½æ•°åå³å¯ã€‚</p>
<p>åŒç†çš„ï¼Œä¹Ÿå¯ä»¥ä¸å£°æ˜å‚æ•°ä¸ºæŒ‡é’ˆï¼ˆå› ä¸ºä¼šè‡ªåŠ¨è½¬å˜ä¸ºæŒ‡é’ˆï¼‰</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">tran</span><span class="params">(<span class="type">double</span> a(<span class="type">double</span> a1),<span class="type">double</span> b(<span class="type">double</span> b1),<span class="type">double</span> x)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%f\n&quot;</span>,(*a)(x/<span class="number">2</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%f&quot;</span>,(*b)(x/<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡å½¢å‚å½±å“å®å‚"><a href="#é€šè¿‡å½¢å‚å½±å“å®å‚" class="headerlink" title="é€šè¿‡å½¢å‚å½±å“å®å‚"></a>é€šè¿‡å½¢å‚å½±å“å®å‚</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå½¢å‚å€¼çš„æ”¹å˜ä¸èƒ½æ”¹å˜å¯¹åº”å®å‚çš„å€¼ï¼ŒæŠŠæ•°æ®ä»è¢«è°ƒç”¨å‡½æ•°è¿”å›åˆ°è°ƒç”¨å‡½æ•°çš„å”¯ä¸€é€”å¾„æ—¶é€šè¿‡returnã€‚<strong>ä½†å¦‚æœé€šè¿‡ä¼ é€åœ°å€ç»™è¢«è°ƒç”¨å‡½æ•°ï¼Œå†åœ¨è¢«è°ƒç”¨å‡½æ•°ä¸­æ”¹å˜åœ°å€ä¸­å­˜å‚¨çš„å€¼ï¼Œä¹Ÿå°±ä½¿é€šè¿‡å½¢å‚æ”¹å˜å¯¹åº”å®å‚çš„å€¼æˆä¸ºäº†å¯èƒ½ã€‚</strong></p>
<p>ä¾‹å¦‚ï¼šäº¤æ¢å€¼</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> *x, <span class="type">int</span> *y)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> c; <span class="comment">// å› ä¸ºcåªæ˜¯ç”¨æ¥å­˜æ”¾åœ°å€å†…ä¿å­˜çš„å€¼ï¼Œæ‰€ä»¥ä¸ºä¸€èˆ¬å˜é‡</span></span><br><span class="line">    c=*x;*x=*y;*y=c;  <span class="comment">//å°†aã€båœ°å€ä¸­ä¿å­˜çš„å€¼äº’æ¢ã€åœ°å€ä¸å˜</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a=<span class="number">1</span>,b=<span class="number">2</span>;</span><br><span class="line">    swap(&amp;a,&amp;b);<span class="comment">//å°†aã€bçš„åœ°å€ä¼ ç»™å½¢å‚xã€yï¼Œæ­¤æ—¶æŒ‡é’ˆå˜é‡xã€yå†…ä¿å­˜çš„å°±æ˜¯aã€bçš„åœ°å€</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d  %d&quot;</span>,a,b);<span class="comment">//æ­¤æ—¶aã€båœ°å€å†…ä¿å­˜çš„å€¼å·²ç»äº’æ¢</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†å¦‚æœswapå‡½æ•°å®šä¹‰æˆå¦‚ä¸‹ï¼Œåˆä¼šæ€ä¹ˆæ ·å‘¢</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> *x, <span class="type">int</span> *y)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> *c; </span><br><span class="line">    c=x;x=y;y=c;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¿™æ ·å®šä¹‰å‡½æ•°ï¼Œåˆ™ç¨‹åºçš„æµç¨‹ä¸ºï¼š<strong>â‘ è°ƒç”¨swapå‡½æ•°æ—¶ï¼Œxå†…ä¿å­˜çš„ä¸ºaçš„åœ°å€ï¼Œyå†…ä¿å­˜çš„ä¸ºbçš„åœ°å€ï¼›â‘¡åœ¨swapå‡½æ•°ä¸­ï¼Œxå†…ä¿å­˜çš„åœ°å€æ”¹å˜ä¸ºbçš„åœ°å€ï¼Œyå†…ä¿å­˜çš„åœ°å€æ”¹å˜ä¸ºä¸ºaçš„åœ°å€ï¼›â‘¢swapå‡½æ•°è°ƒç”¨ç»“æŸï¼Œxï¼Œyçš„å†…å­˜è¢«é‡Šæ”¾ï¼›â‘£æ­¤æ—¶aã€bå˜é‡è‡ªèº«çš„åœ°å€å¹¶æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œæ”¹å˜çš„åªç”¨å½¢å‚xã€yæ‰€ä¿å­˜çš„åœ°å€ï¼Œå› æ­¤æ— æ³•èµ·åˆ°äº¤æ¢ä½œç”¨</strong></p>
<h2 id="äºŒç»´æ•°ç»„åœ°å€è¯¦è§£-æ•°ç»„æŒ‡é’ˆ-é‡è¦ï¼ï¼ï¼ï¼ï¼"><a href="#äºŒç»´æ•°ç»„åœ°å€è¯¦è§£-æ•°ç»„æŒ‡é’ˆ-é‡è¦ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="äºŒç»´æ•°ç»„åœ°å€è¯¦è§£+æ•°ç»„æŒ‡é’ˆ(é‡è¦ï¼ï¼ï¼ï¼ï¼)"></a>äºŒç»´æ•°ç»„åœ°å€è¯¦è§£+æ•°ç»„æŒ‡é’ˆ(é‡è¦ï¼ï¼ï¼ï¼ï¼)</h2><p>è¯¦è§<a href="https://dhkkk.gitee.io/2022/07/28/äºŒç»´æ•°ç»„/">äºŒç»´æ•°ç»„å¤ä¹  | å°è‘£çš„BLOG (gitee.io)</a></p>
<h2 id="ç»“æ„ä½“æŒ‡é’ˆ"><a href="#ç»“æ„ä½“æŒ‡é’ˆ" class="headerlink" title="ç»“æ„ä½“æŒ‡é’ˆ"></a>ç»“æ„ä½“æŒ‡é’ˆ</h2><p>è¯¦è§<a href="https://dhkkk.gitee.io/2022/11/18/æ•°æ®ç»“æ„-çº¿æ€§è¡¨/">æ•°æ®ç»“æ„_é“¾è¡¨ | å°è‘£çš„BLOG (gitee.io)</a>å’Œ<a href="https://dhkkk.gitee.io/2022/08/01/C-ç»“æ„ä½“/">ç»“æ„ä½“å¤ä¹  | å°è‘£çš„BLOG (gitee.io)</a></p>
<p>2022.11.20:æˆ‘æ˜¯æŒ‰ç…§è‡ªå·±çš„ç†è§£å†™çš„ï¼Œæ‰€ä»¥æ€è·¯é‚£äº›å¯èƒ½ä¼šæœ‰ç‚¹å¥‡æ€ªï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±å†™çš„ä¹Ÿä¸æ˜¯å¾ˆç²¾ç»ƒã€‚ã€‚å‡‘åˆçœ‹çœ‹å§</p>
]]></content>
      <tags>
        <tag>Cè¯­è¨€å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²å¤ä¹ </title>
    <url>/2022/07/30/C%E8%AF%AD%E8%A8%802/</url>
    <content><![CDATA[<h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><p>å­—ç¬¦ä¸²æ˜¯ä½äºåŒå¼•å·ä¸­çš„å­—ç¬¦åºåˆ—ï¼Œå› æ­¤åœ¨å†…å­˜ä¸­ä»¥â€œ\0â€ç»“æŸ,æ‰€å å­—èŠ‚æ¯”å®é™…å¤šä¸€ä¸ªã€‚</p>
<p>ï¼ˆâ€˜\0â€™æ˜¯å­—ç¬¦ä¸²ç»“æŸçš„æ ‡å¿—ï¼Œå› æ­¤æ•°ç»„ä¸­æ²¡æœ‰â€˜\0â€™æ—¶åªæ˜¯å­—ç¬¦æ•°ç»„ï¼Œä¸”å…ƒç´ ä¸­é—´ä¸èƒ½å‡ºç°â€™\0â€™ï¼‰</p>
<h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><p>å½“æ•°ç»„å…ƒç´ ä¸ªæ•°å¤§äºå­˜å‚¨å­—ç¬¦å†…å®¹æ—¶, æœªè¢«åˆå§‹åŒ–çš„éƒ¨åˆ†é»˜è®¤å€¼æ˜¯0ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"> <span class="type">char</span> name[] = <span class="string">&quot;c\0ool&quot;</span>;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;name = %s\n&quot;</span>,name);</span><br><span class="line"><span class="comment">//è¾“å‡ºç»“æœ: c</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ç‚¹:<ul>
<li>å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„, å¦‚æœä¸åšåˆå§‹åŒ–èµ‹å€¼, å¿…é¡»æŒ‡å®šæ•°ç»„é•¿åº¦ï¼›</li>
<li>å­—ç¬¦ä¸²æ•°ç»„æœ€åä¸€ä¸ªå­—ç¬¦çš„ä½ç½®è¦ç•™ç»™å­—ç¬¦ä¸²çš„ç»“å°¾æ ‡ç¤ºâ€˜\0â€™ï¼›</li>
<li>å½“ç”¨scanfå‡½æ•°è¾“å…¥å­—ç¬¦ä¸²æ—¶,å­—ç¬¦ä¸²ä¸­ä¸èƒ½å«æœ‰ç©ºæ ¼,å¦åˆ™å°†ä»¥ç©ºæ ¼ä½œä¸ºä¸²çš„ç»“æŸç¬¦ã€‚</li>
</ul>
</li>
</ul>
<h3 id="æ­£ç¡®çš„èµ‹å€¼æ–¹æ³•ï¼š"><a href="#æ­£ç¡®çš„èµ‹å€¼æ–¹æ³•ï¼š" class="headerlink" title="æ­£ç¡®çš„èµ‹å€¼æ–¹æ³•ï¼š"></a>æ­£ç¡®çš„èµ‹å€¼æ–¹æ³•ï¼š</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">10</span>]=<span class="string">&quot;string&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str[]=<span class="string">&quot;string&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,&amp;str);<span class="comment">//æˆ–scanf(&quot;%s&quot;,str);</span></span><br></pre></td></tr></table></figure>
<h3 id="é”™è¯¯çš„èµ‹å€¼æ–¹æ³•"><a href="#é”™è¯¯çš„èµ‹å€¼æ–¹æ³•" class="headerlink" title="é”™è¯¯çš„èµ‹å€¼æ–¹æ³•:"></a>é”™è¯¯çš„èµ‹å€¼æ–¹æ³•:</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">10</span>];</span><br><span class="line">str=<span class="string">&quot;string&quot;</span>; <span class="comment">//è¿™æ˜¯å› ä¸ºæ•°ç»„åæ˜¯ä¸€ä¸ªåœ°å€å¸¸é‡ï¼Œæ˜¯ä¸å¯è¢«èµ‹å€¼çš„</span></span><br></pre></td></tr></table></figure>
<h2 id="â€»å¸¸ç”¨å‡½æ•°â€»"><a href="#â€»å¸¸ç”¨å‡½æ•°â€»" class="headerlink" title="â€»å¸¸ç”¨å‡½æ•°â€»"></a>â€»å¸¸ç”¨å‡½æ•°â€»</h2><p>ä½¿ç”¨å­—ç¬¦ä¸²å‡½æ•°åº”åŒ…å«å¤´æ–‡ä»¶â€string.hâ€</p>
<h3 id="ï¼ˆ1ï¼‰è¾“å‡ºå‡½æ•°"><a href="#ï¼ˆ1ï¼‰è¾“å‡ºå‡½æ•°" class="headerlink" title="ï¼ˆ1ï¼‰è¾“å‡ºå‡½æ•°"></a>ï¼ˆ1ï¼‰è¾“å‡ºå‡½æ•°</h3><ul>
<li>æ ¼å¼: puts(å­—ç¬¦æ•°ç»„å)</li>
<li><p>åŠŸèƒ½:æŠŠå­—ç¬¦æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ã€‚å³åœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¯¥å­—ç¬¦ä¸²ã€‚</p>
</li>
<li><p>ä¼˜ç‚¹:</p>
<ul>
<li>è‡ªåŠ¨æ¢è¡Œï¼›</li>
<li>å¯ä»¥æ˜¯æ•°ç»„çš„ä»»æ„å…ƒç´ åœ°å€ã€‚</li>
</ul>
</li>
<li>ç¼ºç‚¹<ul>
<li>ä¸èƒ½è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> ch[] = <span class="string">&quot;dhk&quot;</span>;</span><br><span class="line"><span class="built_in">puts</span>(ch); <span class="comment">//è¾“å‡ºç»“æœ: dhk</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>å½“ä½¿ç”¨printfä¸”è¾“å‡ºæ ¼å¼ä¸º&amp;sæ—¶ï¼Œè¾“å‡ºé¡¹ç›´æ¥ä¸ºæ•°ç»„åï¼Œè€Œä¸æ˜¯æ•°ç»„å…ƒç´ </p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> s[<span class="number">10</span>]=<span class="string">&quot;dhk&quot;</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,s);<span class="comment">//æ­£ç¡®</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,s[<span class="number">0</span>]);<span class="comment">//é”™è¯¯</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="ï¼ˆ2ï¼‰è¾“å…¥å‡½æ•°"><a href="#ï¼ˆ2ï¼‰è¾“å…¥å‡½æ•°" class="headerlink" title="ï¼ˆ2ï¼‰è¾“å…¥å‡½æ•°"></a>ï¼ˆ2ï¼‰è¾“å…¥å‡½æ•°</h3><ul>
<li>æ ¼å¼: gets (å­—ç¬¦æ•°ç»„å)</li>
<li>åŠŸèƒ½:ä»æ ‡å‡†è¾“å…¥è®¾å¤‡é”®ç›˜ä¸Šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
</ul>
<p>å½“è¾“å…¥çš„å­—ç¬¦ä¸²ä¸­å«æœ‰ç©ºæ ¼æ—¶,è¾“å‡ºä»ä¸ºå…¨éƒ¨å­—ç¬¦ä¸²ã€‚è¯´æ˜getså‡½æ•°å¹¶ä¸ä»¥ç©ºæ ¼ä½œä¸ºå­—ç¬¦ä¸²è¾“å…¥ç»“æŸçš„æ ‡å¿—,<strong><em>è€Œåªä»¥å›è½¦ä½œä¸ºè¾“å…¥ç»“æŸ</em></strong>ã€‚è¿™æ˜¯ä¸scanfå‡½æ•°ä¸åŒçš„ã€‚</p>
<ul>
<li>è‹¥è¦ä½¿ç”¨scanfä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œåˆ™éœ€è¦æ³¨æ„scanfä¼šè‡ªåŠ¨æŠŠç©ºæ ¼å½“ä½œåˆ†éš”ç¬¦</li>
</ul>
<h3 id="ï¼ˆ3ï¼‰è®¡ç®—é•¿åº¦"><a href="#ï¼ˆ3ï¼‰è®¡ç®—é•¿åº¦" class="headerlink" title="ï¼ˆ3ï¼‰è®¡ç®—é•¿åº¦"></a>ï¼ˆ3ï¼‰è®¡ç®—é•¿åº¦</h3><h4 id="1-sizeofï¼ˆï¼‰"><a href="#1-sizeofï¼ˆï¼‰" class="headerlink" title="1.sizeofï¼ˆï¼‰"></a>1.sizeofï¼ˆï¼‰</h4><p>æ•°å€¼åŒ…å«â€™\0â€™ï¼Œä¸”å½“å¯¹è±¡ä¸ºå­—ç¬¦ä¸²æ•°ç»„æ—¶ï¼Œè®¡ç®—çš„æ˜¯æ•´ä¸ªæ•°ç»„åˆ†é…ç©ºé—´çš„é•¿åº¦</p>
<h4 id="2-strlen"><a href="#2-strlen" class="headerlink" title="2.strlen()"></a>2.strlen()</h4><p>æµ‹é‡å­—ç¬¦ä¸²å®é™…é•¿åº¦ï¼Œä¸åŒ…å«;\0â€™ã€‚</p>
<h3 id="ï¼ˆ4ï¼‰è¿æ¥å‡½æ•°"><a href="#ï¼ˆ4ï¼‰è¿æ¥å‡½æ•°" class="headerlink" title="ï¼ˆ4ï¼‰è¿æ¥å‡½æ•°"></a>ï¼ˆ4ï¼‰è¿æ¥å‡½æ•°</h3><ul>
<li>æ ¼å¼: strcat(å­—ç¬¦æ•°ç»„å1,å­—ç¬¦æ•°ç»„å2)  /strncat(~,~,num);</li>
<li>åŠŸèƒ½:æŠŠå­—ç¬¦æ•°ç»„2ä¸­çš„å­—ç¬¦ä¸²è¿æ¥åˆ°å­—ç¬¦æ•°ç»„1 ä¸­å­—ç¬¦ä¸²çš„åé¢,å¹¶åˆ å»å­—ç¬¦ä¸²1åçš„ä¸²æ ‡å¿— â€œ\0â€ã€‚<strong>æœ¬å‡½æ•°è¿”å›å€¼æ˜¯å­—ç¬¦æ•°ç»„1çš„é¦–åœ°å€</strong>ã€‚</li>
</ul>
<h3 id="ï¼ˆ5ï¼‰æ¯”è¾ƒå‡½æ•°"><a href="#ï¼ˆ5ï¼‰æ¯”è¾ƒå‡½æ•°" class="headerlink" title="ï¼ˆ5ï¼‰æ¯”è¾ƒå‡½æ•°"></a>ï¼ˆ5ï¼‰æ¯”è¾ƒå‡½æ•°</h3><ul>
<li><p>æ ¼å¼: strcmp(å­—ç¬¦æ•°ç»„å1,å­—ç¬¦æ•°ç»„å2)  </p>
</li>
<li><p>åŠŸèƒ½:<strong><em>æŒ‰ç…§ASCIIç é¡ºåº</em></strong>æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„ä¸­çš„å­—ç¬¦ä¸²,å¹¶ç”±å‡½æ•°è¿”å›å€¼è¿”å›æ¯”è¾ƒç»“æœã€‚</p>
<ul>
<li>å­—ç¬¦ä¸²1=å­—ç¬¦ä¸²2,è¿”å›å€¼=0;</li>
<li>å­—ç¬¦ä¸²1&gt;å­—ç¬¦ä¸²2,è¿”å›å€¼1;</li>
<li>å­—ç¬¦ä¸²1&lt;å­—ç¬¦ä¸²2,è¿”å›å€¼-1ã€‚</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯”è¾ƒé¡ºåºæ˜¯ä»å·¦è‡³å³ä¾æ¬¡æ¯”è¾ƒæ¯ä¸€ä¸ªå­—ç¬¦çš„ASCIIç å¤§å°ï¼Œåªè¦å‡ºç°ä¸åŒå­—ç¬¦å°±åªæŒ‰ç…§å½“å‰å­—ç¬¦å¤§å°æ¯”è¾ƒï¼Œä¸ä¹‹åå­—ç¬¦å¤§å°å°±æ— å…³äº†ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="type">char</span> str1[<span class="number">10</span>] =<span class="string">&quot;acb&quot;</span>;     </span><br><span class="line">	<span class="type">char</span> str2[<span class="number">10</span>] =<span class="string">&quot;abc&quot;</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strcmp</span>(str1,str2));</span><br><span class="line">    <span class="comment">//è¾“å‡º1ï¼Œç”±äº&#x27;c&#x27;&gt;&#x27;b&#x27;,ä¸ç¬¬ä¸‰ä¸ªåŠä»¥åçš„å­—ç¬¦å¤§å°æ— å…³</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œå°±æ‹¿æ¥æ¯”è¾ƒæ˜¯å¦ç›¸åŒå°±è¡Œã€‚</p>
</li>
</ul>
<h3 id="ï¼ˆ6ï¼‰æ‹·è´å‡½æ•°"><a href="#ï¼ˆ6ï¼‰æ‹·è´å‡½æ•°" class="headerlink" title="ï¼ˆ6ï¼‰æ‹·è´å‡½æ•°"></a>ï¼ˆ6ï¼‰æ‹·è´å‡½æ•°</h3><ul>
<li>æ ¼å¼ï¼š strcpy(char<em> dest,char</em> src);   /   strncpy(char<em> dest,const char</em> src,size_t num);</li>
<li>åŠŸèƒ½ï¼šå°†å‚æ•°srcå­—ç¬¦ä¸²æ‹·è´è‡³å‚æ•°destæ‰€æŒ‡çš„åœ°å€ã€‚</li>
<li>è¿”å›å€¼ï¼šè¿”å›å‚æ•°destçš„å­—ç¬¦ä¸²èµ·å§‹åœ°å€ã€‚</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="type">char</span> str1[<span class="number">10</span>] =<span class="string">&quot;aaaaaa&quot;</span>;     </span><br><span class="line">	<span class="type">char</span> str2[<span class="number">10</span>] = <span class="string">&quot;bbb&quot;</span>;</span><br><span class="line">	<span class="built_in">strncpy</span>(str1,str2,<span class="number">2</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, str1); <span class="comment">//ç»“æœä¸º&quot;bbaaaa&quot; </span></span><br><span class="line">    <span class="comment">//å½“numé•¿åº¦å¤§äºsrt2ä¸­å­—ç¬¦ä¸²é•¿åº¦æ—¶ä»…ä¼šæ‰“å°bbbï¼ˆç»“æœå¯èƒ½ä¸ç¼–è¯‘å™¨ç›¸å…³ï¼‰</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>strcpyä¼šè¦†ç›–åŸæ¥çš„æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œstrncpyåªä¼šè¦†ç›–nä¸ªå­—èŠ‚åŸæ¥çš„å­—ç¬¦ä¸²ï¼Œå‰©ä¸‹çš„ä¿ç•™ï¼ˆå½“nè¶…é•¿æ—¶åº”è¯¥æ˜¯é»˜è®¤ä½¿ç”¨strcpyï¼‰</strong></p>
<h3 id="ï¼ˆ7ï¼‰æ£€ç´¢å‡½æ•°"><a href="#ï¼ˆ7ï¼‰æ£€ç´¢å‡½æ•°" class="headerlink" title="ï¼ˆ7ï¼‰æ£€ç´¢å‡½æ•°"></a>ï¼ˆ7ï¼‰æ£€ç´¢å‡½æ•°</h3><h4 id="1-char-strstr-const-char-str-const-char-substr"><a href="#1-char-strstr-const-char-str-const-char-substr" class="headerlink" title="1. char strstr(const char str,const char* substr)"></a>1. char<em> strstr(const char</em> str,const char* substr)</h4><ul>
<li><p>åŠŸèƒ½ï¼šæ£€ç´¢å­ä¸²åœ¨å­—ç¬¦ä¸²ä¸­<strong>é¦–æ¬¡å‡ºç°çš„ä½ç½®</strong>ã€‚</p>
</li>
<li><p>è¿”å›å€¼ï¼šè¿”å›å­—ç¬¦ä¸²strä¸­ç¬¬ä¸€æ¬¡å‡ºç°å­ä¸²substrçš„åœ°å€ï¼›å¦‚æœæ²¡æœ‰æ£€ç´¢åˆ°å­ä¸²ï¼Œåˆ™è¿”å›NULLã€‚</p>
<h4 id="2-char-strchr-const-char-str-char-c"><a href="#2-char-strchr-const-char-str-char-c" class="headerlink" title="2. char strchr(const char str,char c)"></a>2. char<em> strchr(const char</em> str,char c)</h4></li>
<li><p>åŠŸèƒ½ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°cçš„ä½ç½®ã€‚</p>
</li>
<li><p>è¿”å›å€¼ï¼šè§„å¾‹åŒstrstr()ã€‚</p>
<h4 id="3-char-strrchr-const-char-str-char-c"><a href="#3-char-strrchr-const-char-str-char-c" class="headerlink" title="3. char strrchr(const char str,char c)"></a>3. char<em> strrchr(const char</em> str,char c)</h4></li>
<li><p>åŠŸèƒ½ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°cçš„ä½ç½®ã€‚</p>
</li>
<li><p>è¿”å›å€¼ï¼šåŒä¸Šã€‚</p>
</li>
</ul>
<h3 id="ï¼ˆ8ï¼‰å…¶ä½™å‡½æ•°"><a href="#ï¼ˆ8ï¼‰å…¶ä½™å‡½æ•°" class="headerlink" title="ï¼ˆ8ï¼‰å…¶ä½™å‡½æ•°"></a>ï¼ˆ8ï¼‰å…¶ä½™å‡½æ•°</h3><h4 id="å­—ç¬¦è½¬æ¢"><a href="#å­—ç¬¦è½¬æ¢" class="headerlink" title="å­—ç¬¦è½¬æ¢"></a>å­—ç¬¦è½¬æ¢</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">tolower</span><span class="params">(<span class="type">int</span> c)</span>ï¼šè½¬åŒ–å­—ç¬¦ä¸ºå°å†™å­—æ¯ï¼› </span><br><span class="line"><span class="type">int</span> <span class="title function_">toupper</span><span class="params">(<span class="type">int</span> c)</span>ï¼šè½¬åŒ–å­—ç¬¦ä¸ºå¤§å†™å­—æ¯ï¼›</span><br></pre></td></tr></table></figure>
<h4 id="æ•´å‹è½¬æ¢"><a href="#æ•´å‹è½¬æ¢" class="headerlink" title="æ•´å‹è½¬æ¢"></a>æ•´å‹è½¬æ¢</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">atoi</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span></span><br></pre></td></tr></table></figure>
<p>â€‹    è¿”å›è½¬æ¢åçš„æ•´å‹æ•°ã€‚</p>
<h4 id="å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢"><a href="#å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢"></a>å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">strlwr(<span class="type">const</span> <span class="type">char</span>* str);<span class="comment">//è½¬å°å†™</span></span><br><span class="line">strupr(<span class="type">const</span> <span class="type">char</span>* str);<span class="comment">//è½¬å¤§å†™</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Cè¯­è¨€å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºhexoæœ¬åœ°å›¾ç‰‡æ— æ³•ä¸Šä¼ </title>
    <url>/2022/07/30/hexo-2/</url>
    <content><![CDATA[<h1 id="å…³äºhexoæœ¬åœ°å›¾ç‰‡æ— æ³•ä¸Šä¼ "><a href="#å…³äºhexoæœ¬åœ°å›¾ç‰‡æ— æ³•ä¸Šä¼ " class="headerlink" title="å…³äºhexoæœ¬åœ°å›¾ç‰‡æ— æ³•ä¸Šä¼ "></a>å…³äºhexoæœ¬åœ°å›¾ç‰‡æ— æ³•ä¸Šä¼ </h1><h2 id="1-å®‰è£…æ’ä»¶"><a href="#1-å®‰è£…æ’ä»¶" class="headerlink" title="1.å®‰è£…æ’ä»¶"></a>1.å®‰è£…æ’ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>
<h2 id="2-é…ç½®æ’ä»¶ï¼ˆå¯ä»¥å…ˆè·³è¿‡çœ‹çœ‹ï¼‰"><a href="#2-é…ç½®æ’ä»¶ï¼ˆå¯ä»¥å…ˆè·³è¿‡çœ‹çœ‹ï¼‰" class="headerlink" title="2.é…ç½®æ’ä»¶ï¼ˆå¯ä»¥å…ˆè·³è¿‡çœ‹çœ‹ï¼‰"></a>2.é…ç½®æ’ä»¶ï¼ˆå¯ä»¥å…ˆè·³è¿‡çœ‹çœ‹ï¼‰</h2><p>æ‰“å¼€/node_modules/hexo-asset-image/index.jsï¼Œå°†å†…å®¹æ›´æ¢ä¸ºä¸‹é¢çš„ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="type">var</span> <span class="variable">cheerio</span> <span class="operator">=</span> require(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line">function <span class="title function_">getPosition</span><span class="params">(str, m, i)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">var</span> <span class="variable">version</span> <span class="operator">=</span> String(hexo.version).split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_post_render&#x27;</span>, function(data)&#123;</span><br><span class="line">  <span class="type">var</span> <span class="variable">config</span> <span class="operator">=</span> hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">    	<span class="type">var</span> <span class="variable">link</span> <span class="operator">=</span> data.permalink;</span><br><span class="line">	<span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; Number(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">	   <span class="type">var</span> <span class="variable">beginPos</span> <span class="operator">=</span> getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	   <span class="type">var</span> <span class="variable">beginPos</span> <span class="operator">=</span> getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class="line">	<span class="type">var</span> <span class="variable">endPos</span> <span class="operator">=</span> link.lastIndexOf(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="type">var</span> <span class="variable">toprocess</span> <span class="operator">=</span> [<span class="string">&#x27;excerpt&#x27;</span>, <span class="string">&#x27;more&#x27;</span>, <span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">var</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="type">var</span> <span class="variable">key</span> <span class="operator">=</span> toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="type">var</span> <span class="variable">$</span> <span class="operator">=</span> cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: <span class="literal">false</span>,</span><br><span class="line">        xmlMode: <span class="literal">false</span>,</span><br><span class="line">        lowerCaseTags: <span class="literal">false</span>,</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).each(function()&#123;</span><br><span class="line">		<span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>))&#123;</span><br><span class="line">			<span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">			<span class="type">var</span> <span class="variable">src</span> <span class="operator">=</span> $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>).replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">			<span class="keyword">if</span>(!/http[s]*.*|\/\/.*/.test(src) &amp;&amp;</span><br><span class="line">			   !/^\s*\<span class="comment">//.test(src)) &#123;</span></span><br><span class="line">			  <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">			  <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">			  <span class="type">var</span> <span class="variable">linkArray</span> <span class="operator">=</span> link.split(<span class="string">&#x27;/&#x27;</span>).filter(function(elem)&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="type">var</span> <span class="variable">srcArray</span> <span class="operator">=</span> src.split(<span class="string">&#x27;/&#x27;</span>).filter(function(elem)&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">				srcArray.shift();</span><br><span class="line">			  src = srcArray.join(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">			  $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>, config.root + link + src);</span><br><span class="line">			  console.info&amp;&amp;console.info(<span class="string">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			console.info&amp;&amp;console.info(<span class="string">&quot;no src attr, skipped...&quot;</span>);</span><br><span class="line">			console.info&amp;&amp;console.info($(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-ä¿®æ”¹æ ¹é…ç½®æ–‡ä»¶"><a href="#3-ä¿®æ”¹æ ¹é…ç½®æ–‡ä»¶" class="headerlink" title="3.ä¿®æ”¹æ ¹é…ç½®æ–‡ä»¶"></a>3.ä¿®æ”¹æ ¹é…ç½®æ–‡ä»¶</h2><p>post_asset_folder: true</p>
<h2 id="4-å¼•å…¥å›¾ç‰‡ï¼ˆå¯èƒ½æ— æ³•ä½¿ç”¨markdownè¯­æ³•-â€œï¼â€œï¼‰"><a href="#4-å¼•å…¥å›¾ç‰‡ï¼ˆå¯èƒ½æ— æ³•ä½¿ç”¨markdownè¯­æ³•-â€œï¼â€œï¼‰" class="headerlink" title="4.å¼•å…¥å›¾ç‰‡ï¼ˆå¯èƒ½æ— æ³•ä½¿ç”¨markdownè¯­æ³• â€œï¼â€œï¼‰"></a>4.å¼•å…¥å›¾ç‰‡ï¼ˆå¯èƒ½æ— æ³•ä½¿ç”¨markdownè¯­æ³• â€œï¼<a href></a>â€œï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img 1.jpg This is an image %&#125; </span><br></pre></td></tr></table></figure>
<p>â€œ1.jpgâ€ä¸ºå›¾ç‰‡åå­—</p>
<h1 id="æ³¨ï¼šä¸Šä¼ è‡³githubæ—¶pngæ ¼å¼æ— æ³•ä½¿ç”¨ï¼Œæœ€å¥½ç”¨jpgæ ¼å¼"><a href="#æ³¨ï¼šä¸Šä¼ è‡³githubæ—¶pngæ ¼å¼æ— æ³•ä½¿ç”¨ï¼Œæœ€å¥½ç”¨jpgæ ¼å¼" class="headerlink" title="æ³¨ï¼šä¸Šä¼ è‡³githubæ—¶pngæ ¼å¼æ— æ³•ä½¿ç”¨ï¼Œæœ€å¥½ç”¨jpgæ ¼å¼"></a>æ³¨ï¼šä¸Šä¼ è‡³githubæ—¶pngæ ¼å¼æ— æ³•ä½¿ç”¨ï¼Œæœ€å¥½ç”¨jpgæ ¼å¼</h1>]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>guitar-1</title>
    <url>/2022/07/30/guitar-1/</url>
    <content><![CDATA[<h1 id="1-è‡ªç”±èŠ‚å¥"><a href="#1-è‡ªç”±èŠ‚å¥" class="headerlink" title="1.è‡ªç”±èŠ‚å¥"></a>1.è‡ªç”±èŠ‚å¥</h1><img src="/images/loading.png" data-original="/2022/07/30/guitar-1/1.jpg" class title="This is an image"> 
<p>Rubatoæ ‡å¿—</p>
<h1 id="2-å»¶ç»­"><a href="#2-å»¶ç»­" class="headerlink" title="2.å»¶ç»­"></a>2.å»¶ç»­</h1><img src="/images/loading.png" data-original="/2022/07/30/guitar-1/2.jpg" class title="This is an image"> 
<p>æ­¤æ—¶ä¸è¦å†æ¬¡è§¦ç¢°ç›¸å¯¹å¼¦ï¼ˆä¸‹å¼§çº¿ ï¼‰</p>
<h1 id="ä¸‰è¿éŸ³"><a href="#ä¸‰è¿éŸ³" class="headerlink" title="ä¸‰è¿éŸ³"></a>ä¸‰è¿éŸ³</h1><img src="/images/loading.png" data-original="/2022/07/30/guitar-1/3.jpg" class title="This is an image"> 
<p>å‡»å¼¦+å‹¾å¼¦ä¸‰è¿éŸ³ï¼Œä¸Šå¼§çº¿ä»£è¡¨åªå¼¹ç¬¬ä¸€ä¸ªéŸ³</p>
<h1 id="è£…é¥°éŸ³"><a href="#è£…é¥°éŸ³" class="headerlink" title="è£…é¥°éŸ³"></a>è£…é¥°éŸ³</h1><img src="/images/loading.png" data-original="/2022/07/30/guitar-1/4.jpg" class title="This is an image"> 
<p>æ­¤æ¬¡ä¸»è¦ä¸ºå¬åˆ°åä¸€ä¸ªéŸ³</p>
<p>ï¼ˆè‹¥å•æœ‰ä¸Šæ–œçº¿åˆ™ä¼šä»ä½ä½åˆ°é«˜ä½æ»‘éŸ³ï¼ˆæ— å¤´/æ— å°¾æ»‘éŸ³ï¼‰ï¼‰</p>
<h1 id="å·¦æ‰‹æŠ¹å¼¦"><a href="#å·¦æ‰‹æŠ¹å¼¦" class="headerlink" title="å·¦æ‰‹æŠ¹å¼¦"></a>å·¦æ‰‹æŠ¹å¼¦</h1><img src="/images/loading.png" data-original="/2022/07/30/guitar-1/5.jpg" class title="This is an image"> 
<p>L.H.Stroke +å·¦æ‰‹æ‹å¼¦</p>
<h1 id="ç‚¹å¼¦"><a href="#ç‚¹å¼¦" class="headerlink" title="ç‚¹å¼¦"></a>ç‚¹å¼¦</h1><img src="/images/loading.png" data-original="/2022/07/30/guitar-1/6.jpg" class title="This is an image"> 
<p>æ­£ä¸Šæ–¹è¡¨æœ‰L.H,æ­¤å¤„ï¼ˆï¼‰ä¸ºå¹½çµéŸ³</p>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒç»´æ•°ç»„å¤ä¹ </title>
    <url>/2022/07/28/%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<h1 id="ä¸€ã€ç†è®ºæ–¹é¢"><a href="#ä¸€ã€ç†è®ºæ–¹é¢" class="headerlink" title="ä¸€ã€ç†è®ºæ–¹é¢"></a>ä¸€ã€ç†è®ºæ–¹é¢</h1><h2 id="1-å­˜å‚¨"><a href="#1-å­˜å‚¨" class="headerlink" title="1.å­˜å‚¨"></a>1.å­˜å‚¨</h2><ul>
<li><p>å­˜å‚¨æ–¹å¼:</p>
<ul>
<li><p>å†…å­˜å¯»å€ä»å¤§åˆ°å°, ä»é«˜åœ°å€å¼€è¾Ÿä¸€å—è¿ç»­æ²¡æœ‰è¢«ä½¿ç”¨çš„å†…å­˜ç»™æ•°ç»„ã€‚</p>
</li>
<li><p>ä»åˆ†é…çš„è¿ç»­å­˜å‚¨ç©ºé—´ä¸­, <strong><em>åœ°å€å°çš„ä½ç½®å¼€å§‹ç»™æ¯ä¸ªå…ƒç´ åˆ†é…ç©ºé—´</em></strong>ã€‚</p>
</li>
<li><p>ä»æ¯ä¸ªå…ƒç´ åˆ†é…çš„å­˜å‚¨ç©ºé—´ä¸­, <strong><em>åœ°å€æœ€å¤§çš„ä½ç½®å¼€å§‹å­˜å‚¨æ•°æ®</em></strong>ã€‚</p>
</li>
<li><p>ç”¨æ•°ç»„åæŒ‡å‘æ•´ä¸ªå­˜å‚¨ç©ºé—´æœ€å°çš„åœ°å€ã€‚</p>
<p>ï¼ˆåˆ†é…ä»å°åœ°å€å¼€å§‹ï¼Œèµ‹å€¼ä»å¤§åœ°å€å¼€å§‹ï¼‰</p>
</li>
</ul>
</li>
</ul>
<h3 id="äºŒç»´æ•°ç»„åœ°å€è¯¦è§£-æŒ‡é’ˆæ•°ç»„-æ•°ç»„æŒ‡é’ˆ-é‡è¦ï¼ï¼ï¼"><a href="#äºŒç»´æ•°ç»„åœ°å€è¯¦è§£-æŒ‡é’ˆæ•°ç»„-æ•°ç»„æŒ‡é’ˆ-é‡è¦ï¼ï¼ï¼" class="headerlink" title="äºŒç»´æ•°ç»„åœ°å€è¯¦è§£+æŒ‡é’ˆæ•°ç»„+æ•°ç»„æŒ‡é’ˆ(é‡è¦ï¼ï¼ï¼)"></a>äºŒç»´æ•°ç»„åœ°å€è¯¦è§£+æŒ‡é’ˆæ•°ç»„+æ•°ç»„æŒ‡é’ˆ(é‡è¦ï¼ï¼ï¼)</h3><p><em>å¦‚æœè¿˜æ²¡æœ‰å­¦ä¹ æŒ‡é’ˆç›¸å…³å†…å®¹å¯ä»¥å…ˆè·³è¿‡</em></p>
<h4 id="åœ°å€é—®é¢˜è¯¦è§£"><a href="#åœ°å€é—®é¢˜è¯¦è§£" class="headerlink" title="åœ°å€é—®é¢˜è¯¦è§£"></a>åœ°å€é—®é¢˜è¯¦è§£</h4><p>å…ˆçœ‹ä¸€ä¸‹å„ç§æƒ…å†µçš„è¾“å‡ºç»“æœ</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> *p[<span class="number">3</span>];</span><br><span class="line">    p[<span class="number">0</span>]=&amp;a[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,p); <span class="comment">//6487520</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,&amp;p); <span class="comment">//6487520</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,&amp;p[<span class="number">0</span>]); <span class="comment">//6487520</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,*p); <span class="comment">//6487552</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[<span class="number">0</span>][<span class="number">0</span>]); <span class="comment">//6487552</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,**p); <span class="comment">//1</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,*p[<span class="number">0</span>]); <span class="comment">//1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å½“è¾“å‡ºä¸ºpå’Œ&amp;pæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°è¾“å‡ºçš„éƒ½æ˜¯ä¸€ä¸ªåœ°å€ä¸”äºŒè€…è¾“å‡ºç›¸åŒï¼Œéƒ½ç­‰äºp[0]çš„åœ°å€ã€‚è¿™å°±è¯´æ˜æ•°ç»„æŒ‡é’ˆä¸æ•°ç»„çš„ç›¸å…³è§„åˆ™ç›¸åŒâ€”â€”å…¶æ•°ç»„å<strong>ä»£è¡¨äº†å…¶ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€</strong></li>
<li>å½“è¾“å‡ºä¸º<code>*p</code>å’Œ&amp;a[0] [0]æ—¶ï¼Œè¾“å‡ºçš„å€¼ä¸ºåœ°å€ä¸”äºŒè€…ç›¸åŒï¼Œ&amp;a[0] [0]æˆ‘ä»¬ä¸éš¾ç†è§£ï¼Œä½†å¯¹äº<code>*p</code>ï¼Œä¸Šä¸€ç‚¹å·²ç»è¯´åˆ°ï¼Œpä»£è¡¨äº†pè¿™ä¸ªæ•°ç»„æŒ‡é’ˆç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œå¦‚æœæˆ‘ä»¬å¯¹è¿™ä¸ªåœ°å€è¿›è¡Œè§£å¼•ç”¨ï¼ˆå…³äºè§£å¼•ç”¨<code>*</code>è¿ç®—ç¬¦åœ¨<a href="https://dhkkk.gitee.io/2022/07/31/C-æŒ‡é’ˆ/">æŒ‡é’ˆç›¸å…³å¤ä¹  | å°è‘£çš„BLOG </a>ä¸­æœ‰è¯¦ç»†è®²åˆ°ï¼‰ï¼Œ<strong>è¿”å›å€¼ä¹Ÿå°±æ˜¯è¿™ä¸ªé¦–å…ƒç´ çš„åœ°å€å†…æ‰€å­˜å‚¨çš„å†…å®¹</strong>ï¼Œè€Œæˆ‘ä»¬çŸ¥é“ï¼ŒæŒ‡é’ˆå˜é‡æœ¬èº«å­˜å‚¨çš„å†…å®¹å°±æ˜¯åœ°å€ï¼Œ<strong>æ‰€ä»¥å¯¹pè¿›è¡Œè§£å¼•ç”¨çš„ç»“æœï¼Œå°±æ˜¯pçš„é¦–å…ƒç´ çš„åœ°å€ï¼ˆ6487520ï¼‰æ‰€å­˜å‚¨çš„â€œa[0] [0]çš„åœ°å€ï¼ˆ6487552ï¼‰â€œ</strong></li>
<li>å¦‚æœä½ èƒ½å¾ˆå¥½çš„ç†è§£è§£å¼•ç”¨<em>è¿ç®—ç¬¦çš„ç”¨æ³•ï¼Œç›¸ä¿¡ä½ å·²ç»èƒ½ç†è§£è¾“å‡ºä¸º<code>**p</code>å’Œ` </em>p[0]<code>çš„ç»“æœäº†ï¼›</code><strong>p<code>å³å†å¯¹</code> *p`è¿›è¡Œä¸€æ¬¡è§£å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯å¯¹â€a[0] [0]çš„åœ°å€ï¼ˆ6487552ï¼‰â€œè§£å¼•ç”¨ï¼Œè¿”å›å€¼ä¸ºa[0] [0]çš„</strong>åœ°å€<strong>æ‰€å­˜å‚¨çš„å†…å®¹ï¼Œå³1ã€‚ï¼ˆ`</strong>p<code>å’Œ</code> *p[0]`ç­‰ä»·ï¼‰</li>
</ul>
<p>å¦‚æœä½ å¯¹ä»¥ä¸Šå†…å®¹å·²ç»æ¯”è¾ƒç†è§£ï¼Œé‚£å¯ä»¥æ€è€ƒä¸€ä¸‹ä»¥ä¸‹å†…å®¹ï¼ˆä»¥ä¸‹å†…å®¹æ˜¯æˆ‘ä¸ªäººçš„ç†è§£ï¼Œä¸èƒ½ä¿è¯æ­£ç¡®ï¼ï¼‰</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> *p[<span class="number">3</span>];</span><br><span class="line">    p[<span class="number">0</span>]=a;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®å¯¹ä¸€ç»´æ•°ç»„çš„å­¦ä¹ ï¼Œå¯ä»¥æ¨æ–­å‡ºäºŒç»´æ•°ç»„åaå³ä»£è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼ŒæŠŠè¿™ä¸ªå…ƒç´ åœ°å€æ”¾è¿›på†…ï¼Œå®Œå…¨æ²¡é—®é¢˜ï¼Œå…¨ç„¶å¤§ä¸ˆå¤«ï¼ä½†æ˜¯ç¼–è¯‘å™¨å°±æ˜¯æŠ¥é”™äº†æğŸ˜‹ã€‚åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™ä¹‹åï¼Œå¤§æ¦‚èƒ½æƒ³æ˜ç™½æ˜¯æ€ä¹ˆå›äº‹ï¼Œä½†æ˜¯åˆå¹¶ä¸æ˜¯é‚£ä¹ˆæ˜ç™½ï¼š<strong>äºŒç»´æ•°ç»„åaä»£è¡¨çš„æ˜¯<code>a[2][3]</code>ä¸­a[0]çš„åœ°å€ï¼Œè€Œåœ¨Cè¯­è¨€ä¸­ï¼Œè¿™ä¸ªa[0]åˆè¢«çœ‹ä½œa[3]={1,2,3};</strong>é‚£ä¹ˆè¿™é‡Œçš„aæ˜¯ä¸æ˜¯å°±å¯ä»¥çœ‹ä½œæ˜¯a[0] [0]çš„åœ°å€å‘¢ï¼Œæˆ‘ä»¬æ¥ç€å°è¯•ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a);<span class="comment">//6487552</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,*a);<span class="comment">//6487552</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,**a);<span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[<span class="number">0</span>]);<span class="comment">//6487552</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘è¶…ï¼Œä»€ä¹ˆæ„æ€æï¼Œaå’Œ<code>*a</code>è¾“å‡ºå€¼ä¸€æ ·ï¼Ÿï¼Ÿï¼Ÿä¸ºäº†è§£é‡Šè¿™ä¸ªç°è±¡ï¼Œæˆ‘ä»¬ä¸å¦¨æ¥è¯»ä¸€ä¸‹åˆšåˆšçš„æŠ¥é”™ï¼š</p>
<p><code>[Error] cannot convert &#39;int [2][3]&#39; to &#39;int*&#39; in assignment</code></p>
<p>è¿™é‡Œæˆ‘çš„ç†è§£æ˜¯ï¼šäºŒç»´æ•°ç»„açš„ç±»å‹ä¸º<code>int [2][3]</code>ï¼Œè€Œa[0]çš„ç±»å‹ä¸º<code>int[3]</code>ï¼Œé€šä¿—ä¸€ç‚¹ï¼Œå°±æ˜¯aä»£è¡¨çš„æ˜¯ç¬¬ä¸€è¡Œæ•°ç»„çš„åœ°å€ï¼Œè€Œa[0]ä»£è¡¨çš„æ˜¯a[0] [0]çš„åœ°å€ï¼ŒäºŒè€…è™½ç„¶åœ¨åœ°å€å€¼ä¸Šç›¸åŒï¼Œä½†è¡¨è¾¾çš„æ„æ€æ˜¯ä¸åŒçš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆaæ— æ³•å­˜å…¥pä¸­çš„åŸå› ï¼Œå› ä¸ºç±»å‹æ˜¯å†²çªçš„ã€‚æ‰€ä»¥è¿™é‡Œæ­£å¸¸çš„èµ‹å€¼åº”ä¸ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> *p[<span class="number">3</span>];</span><br><span class="line">    p[<span class="number">0</span>]=*a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,**p); æˆ– <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,*p[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿˜æœ‰ä¸€ä¸ªåŠæ³•æ˜¯ï¼š</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> (*p)[<span class="number">3</span>];</span><br><span class="line">    p=a; <span class="comment">//æ­¤æ—¶på•çº¯çš„å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,**p); æˆ– <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,*p[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯´çœŸçš„æ„Ÿè§‰ä¸å¤ªå¥½ç†è§£ï¼Œæ‰€ä»¥å¯ä»¥è®°ä¸‹ä¸€ä¸ªè§„å¾‹ï¼š</p>
<p><strong>å¯¹ä¸€ä¸ªä»£è¡¨ä¸€è¡Œå…ƒç´ çš„åœ°å€è§£å¼•ç”¨ï¼Œå¾—åˆ°çš„æ˜¯è¯¥è¡Œé¦–å…ƒç´ çš„åœ°å€ï¼Œå†å¯¹è¿™ä¸ªåœ°å€è§£å¼•ç”¨å¾—åˆ°é¦–å…ƒç´ </strong></p>
<p>(æ‰€ä»¥æ­¤å¤„a[0]ç­‰åŒäº*aï¼‰</p>
<h4 id="æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ"><a href="#æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ"></a>æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆ</h4><ul>
<li><p>æŒ‡é’ˆæ•°ç»„</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *p[<span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<p>åœ¨Cè¯­è¨€ä¸­ï¼Œ[]çš„ä¼˜å…ˆçº§é«˜äº<code>*</code>å› æ­¤æ­¤å¼æ­£ç¡®ç†è§£ä¸ºï¼š<code>int *(p[3])</code>ï¼Œè¯´æ˜pä¸ºä¸€ä¸ªæ•°ç»„ï¼Œä¸”è¯¥æ•°ç»„ç”¨äºå­˜æ”¾åœ°å€ï¼Œ<strong>æ­¤æ—¶pæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†å…¶å…ƒç´ å†…å­˜å‚¨çš„ä¸ºæŸä¸ªåœ°å€</strong></p>
</li>
<li><p>æ•°ç»„æŒ‡é’ˆ</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> (*p)[<span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<p>å…ˆè¡¨æ˜äº†pæ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œå†è¯´æ˜äº†pæŒ‡å‘çš„å¯¹è±¡æ˜¯ä¸€ä¸ªint[3]å‹çš„æ•°ç»„ï¼Œä¸”pæœ¬èº«ä¿å­˜çš„æ˜¯æŒ‡å‘æ•°ç»„çš„é¦–åœ°å€ï¼Œ<strong>æ­¤æ—¶pæ˜¯ä¸€ä¸ªæŒ‡é’ˆ</strong></p>
<ul>
<li><p>å¯¹æ•°ç»„æŒ‡é’ˆçš„è°ƒç”¨</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> a[][<span class="number">3</span>]=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">0</span>&#125;&#125;,(*p)[<span class="number">3</span>],i;</span><br><span class="line">	p=a;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,p);<span class="comment">//6487552</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,*p);<span class="comment">//6487552</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,p[<span class="number">0</span>]);<span class="comment">//6487552</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,**p);<span class="comment">//1</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,*p[<span class="number">0</span>]);<span class="comment">//1</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,p[<span class="number">0</span>][<span class="number">0</span>]);<span class="comment">//1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºæ•°ç»„æŒ‡é’ˆçš„ä½¿ç”¨æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š<em>ï¼ˆéƒ½å‡è®¾å­˜æ”¾çš„æ˜¯å¤šç»´æ•°ç»„ï¼‰</em></p>
<ul>
<li>æŒ‡é’ˆåä»£è¡¨<strong>äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œå…ƒç´ çš„åœ°å€</strong></li>
<li>å¯¹æŒ‡é’ˆåè§£å¼•ç”¨ä¸€æ¬¡<strong>ä»£è¡¨äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼ˆç­‰åŒäºp[0]ï¼‰</strong></li>
<li>å½“æ•°ç»„æŒ‡é’ˆä¸‹æ ‡ç²¾å‡†åˆ°æŸä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä¾‹å¦‚<code>p[0][0]</code>,æ­¤æ—¶<code>p[0][0]</code>å°±ä»£è¡¨æ•°ç»„å…ƒç´ çš„å€¼ï¼Œ<strong>è€Œä¸æ˜¯åœ°å€</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-åˆå§‹åŒ–"><a href="#2-åˆå§‹åŒ–" class="headerlink" title="2.åˆå§‹åŒ–"></a>2.åˆå§‹åŒ–</h2><p>â€‹    ä¸€ç»´ï¼šå¯ä»¥ç†è§£ä¸ºè¡Œæ•°ï¼Œå¯çœç•¥ã€‚</p>
<p>â€‹    äºŒç»´ï¼š~~ï¼Œä¸å¯çœç•¥ï¼ˆä¼šæŠ¥é”™ï¼‰ã€‚</p>
<ul>
<li><p>åˆ†è¡Œèµ‹å€¼</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">3</span>][<span class="number">4</span>]=</span><br><span class="line">&#123;</span><br><span class="line">    &#123;<span class="number">1</span>,<span class="number">2</span>,,&#125;</span><br><span class="line">    &#123;,,<span class="number">1</span>,&#125;</span><br><span class="line">    &#123;,,,<span class="number">1</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>æŒ‡å®šå…ƒç´ çš„åˆå§‹åŒ–</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">10</span>&#125;;</span><br><span class="line"><span class="type">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;[<span class="number">1</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="2-äºŒç»´æ•°ç»„ä¸å‡½æ•°"><a href="#2-äºŒç»´æ•°ç»„ä¸å‡½æ•°" class="headerlink" title="2.äºŒç»´æ•°ç»„ä¸å‡½æ•°"></a>2.äºŒç»´æ•°ç»„ä¸å‡½æ•°</h2><p>â€‹    å½¢å‚æ˜¯åŸºæœ¬ç±»å‹åˆ™ä¸ä¼šå½±å“å®å‚ï¼Œå¦‚æœæ˜¯æ•°ç»„ç±»å‹åˆ™ä¼šå½±å“å®å‚ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">change_1</span><span class="params">(<span class="type">char</span> ch)</span></span><br><span class="line">&#123;</span><br><span class="line">    ch = <span class="string">&#x27;n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">change_2</span><span class="params">(<span class="type">char</span> ch[])</span></span><br><span class="line">&#123;</span><br><span class="line">    ch[<span class="number">0</span>] = <span class="string">&#x27;n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">change_3</span><span class="params">(<span class="type">char</span> ch[][<span class="number">3</span>])</span></span><br><span class="line">&#123;</span><br><span class="line">    ch[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">&#x27;n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">char</span> cs[<span class="number">2</span>][<span class="number">3</span>] = </span><br><span class="line">  &#123;</span><br><span class="line">        &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;cs[0][0] = %c\n&quot;</span>, cs[<span class="number">0</span>][<span class="number">0</span>]); <span class="comment">// æ‰“å°a</span></span><br><span class="line">  change(cs);  <span class="built_in">printf</span>(<span class="string">&quot;cs[0][0] = %c\n&quot;</span>, cs[<span class="number">0</span>][<span class="number">0</span>]); <span class="comment">// åŸºæœ¬ç±»å‹å½¢å‚ä¸å½±å“å®å‚</span></span><br><span class="line">  change_2(cs);  <span class="built_in">printf</span>(<span class="string">&quot;cs[0][0] = %c\n&quot;</span>, cs[<span class="number">0</span>][<span class="number">0</span>]); <span class="comment">// æ•°ç»„ç±»å‹å½¢å‚å½±å“å®å‚  </span></span><br><span class="line">  change_3(cs);  <span class="built_in">printf</span>(<span class="string">&quot;cs[0][0] = %c\n&quot;</span>, cs[<span class="number">0</span>][<span class="number">0</span>]); <span class="comment">// æ•°ç»„ç±»å‹å½¢å‚å½±å“å®å‚ </span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="äºŒã€å®æ“"><a href="#äºŒã€å®æ“" class="headerlink" title="äºŒã€å®æ“"></a>äºŒã€å®æ“</h1><p>é€šè¿‡é”®ç›˜å½•å…¥ w,s,a,dæ§åˆ¶å°äººå‘ä¸åŒæ–¹å‘ç§»åŠ¨,å…¶ä¸­wä»£è¡¨å‘ä¸Šç§»åŠ¨,sä»£è¡¨å‘ ä¸‹ç§»åŠ¨,aä»£è¡¨å‘å·¦ç§»åŠ¨,d ä»£è¡¨å‘å³ç§»åŠ¨,å½“å°äººç§»åŠ¨åˆ°å‡ºå£ä½ç½®,ç©å®¶èƒœåˆ©ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> <span class="built_in">map</span>[<span class="number">6</span>][<span class="number">7</span>]=&#123;    <span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,</span><br><span class="line">	                <span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>, 								</span><br><span class="line">					<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,								   </span><br><span class="line">					<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,								   </span><br><span class="line">					<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,								   </span><br><span class="line">					<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;\0&#x27;</span> &#125;;</span><br><span class="line"><span class="type">void</span> <span class="title function_">mapdraw</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">move</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">change</span><span class="params">(<span class="type">char</span> loc[<span class="number">6</span>][<span class="number">7</span>])</span>;</span><br><span class="line"><span class="type">int</span> x=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> y=<span class="number">1</span>;   <span class="comment">//å½“å‰åæ ‡</span></span><br><span class="line"><span class="type">int</span> last_x=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> last_y=<span class="number">1</span>;  <span class="comment">//å‰ä¸€æ¬¡åæ ‡</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	mapdraw();</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">	move();</span><br><span class="line">	change(<span class="built_in">map</span>);</span><br><span class="line">	mapdraw();</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">map</span>[<span class="number">1</span>][<span class="number">6</span>]==<span class="string">&#x27;0&#x27;</span>) <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;YOU WIN!&quot;</span>);	</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">mapdraw</span><span class="params">()</span>  <span class="comment">//æ‰“å°äºŒç»´æ•°ç»„</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,<span class="built_in">map</span>[<span class="number">0</span>][i]);	</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,<span class="built_in">map</span>[<span class="number">1</span>][i]);	</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,<span class="built_in">map</span>[<span class="number">2</span>][i]);	</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,<span class="built_in">map</span>[<span class="number">3</span>][i]);	</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,<span class="built_in">map</span>[<span class="number">4</span>][i]);	</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,<span class="built_in">map</span>[<span class="number">5</span>][i]);	</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,<span class="built_in">map</span>[<span class="number">6</span>][i]);	</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	last_x=x;</span><br><span class="line">	last_y=y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">change</span><span class="params">(<span class="type">char</span> loc[<span class="number">6</span>][<span class="number">7</span>])</span>  </span><br><span class="line">&#123;</span><br><span class="line">	loc[last_x][last_y]=<span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">	loc[x][y]=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">move</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="type">char</span> dir;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;dir);</span><br><span class="line">	<span class="keyword">switch</span>(dir)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:x=x<span class="number">-1</span>;<span class="keyword">if</span>(<span class="built_in">map</span>[x][y]==<span class="string">&#x27;#&#x27;</span>) x=x+<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:x=x+<span class="number">1</span>;<span class="keyword">if</span>(<span class="built_in">map</span>[x][y]==<span class="string">&#x27;#&#x27;</span>) x=x<span class="number">-1</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:y=y<span class="number">-1</span>;<span class="keyword">if</span>(<span class="built_in">map</span>[x][y]==<span class="string">&#x27;#&#x27;</span>) y=y+<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:y=y+<span class="number">1</span>;<span class="keyword">if</span>(<span class="built_in">map</span>[x][y]==<span class="string">&#x27;#&#x27;</span>) y=y<span class="number">-1</span>;<span class="keyword">break</span>;</span><br><span class="line">		defalut :<span class="keyword">break</span>;	</span><br><span class="line">	&#125;</span><br><span class="line">	fflush(<span class="built_in">stdin</span>);  <span class="comment">//æ¸…é™¤ç¼“å†²åŒº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="scanf-åœæ­¢æ¥å—è¾“å…¥åŠscanf-â€œ-câ€-amp-cï¼‰åƒæ‰å›è½¦æˆ–è€…ç©ºæ ¼å­—ç¬¦çš„é—®é¢˜"><a href="#scanf-åœæ­¢æ¥å—è¾“å…¥åŠscanf-â€œ-câ€-amp-cï¼‰åƒæ‰å›è½¦æˆ–è€…ç©ºæ ¼å­—ç¬¦çš„é—®é¢˜" class="headerlink" title="scanf()åœæ­¢æ¥å—è¾“å…¥åŠscanf(â€œ%câ€,&amp;cï¼‰åƒæ‰å›è½¦æˆ–è€…ç©ºæ ¼å­—ç¬¦çš„é—®é¢˜"></a>scanf()åœæ­¢æ¥å—è¾“å…¥åŠscanf(â€œ%câ€,&amp;cï¼‰åƒæ‰å›è½¦æˆ–è€…ç©ºæ ¼å­—ç¬¦çš„é—®é¢˜</h1><p>ä¾‹å¦‚ï¼Œå½“è¾“å…¥â€˜wâ€™+â€˜å›è½¦â€™æ—¶ï¼Œå›è½¦ä¼šä½œä¸ºâ€™\nâ€™è¿›å…¥ç¼“å†²åŒºç­‰å¾…ä¸‹ä¸€æ¬¡ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´mainä¸­çš„å¾ªç¯ä¼šæ‰§è¡Œä¸¤æ¬¡ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<p>å‡½æ•°å: fflush<br>åŠŸ èƒ½: æ¸…é™¤ä¸€ä¸ªæµ<br>ç”¨ æ³•: int fflush(FILE *stream);</p>
<p><strong>fflush(stdin); æ¸…é™¤ç¼“å†²åŒºå†…å®¹ã€‚</strong></p>
<h1 id="ä¸€äº›è®°å½•"><a href="#ä¸€äº›è®°å½•" class="headerlink" title="ä¸€äº›è®°å½•"></a>ä¸€äº›è®°å½•</h1><h2 id="1-æ•´ä¸ªæ•°ç»„æŒ‡é’ˆ"><a href="#1-æ•´ä¸ªæ•°ç»„æŒ‡é’ˆ" class="headerlink" title="1.æ•´ä¸ªæ•°ç»„æŒ‡é’ˆ"></a>1.æ•´ä¸ªæ•°ç»„æŒ‡é’ˆ</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> a[<span class="number">5</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">	<span class="type">int</span>* ptr = (<span class="type">int</span>*)(&amp;a + <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d,%d&quot;</span>, *(a + <span class="number">1</span>), *(ptr - <span class="number">1</span>));  <span class="comment">//2   5</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&amp;aä¸ºæ•´ä¸ªæ•°ç»„çš„åœ°å€ï¼Œç±»å‹ä¸ºint(*)[5],éœ€å°†å…¶å¼ºåˆ¶è½¬åŒ–æ‰å¯ä»¥å­˜è¿›prtæŒ‡é’ˆã€‚å› æ­¤&amp;a+1ä¸ºæ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆ+1ã€‚</p>
]]></content>
      <tags>
        <tag>Cè¯­è¨€å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>hexo d æ— æ³•æ›´æ–°</title>
    <url>/2022/07/27/test/</url>
    <content><![CDATA[<h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><p>åˆ é™¤ <code>hexo/.deploy_git</code> æ–‡ä»¶, ç„¶åé‡æ–°å°è¯• <code>hexo d</code> , å°±å¯ä»¥æˆåŠŸæ›´æ–°äº†.</p>
<p>ï¼ˆæ³¨ï¼šä»£ç†æœ€å¥½å¼€å…¨å±€æ¨¡å¼ï¼Œä¸ç„¶å®¹æ˜“å¡ä½ï¼‰</p>
<p>å…·ä½“æ­¥éª¤ï¼š</p>
<p>1.å…ˆhexo d ä¸€é</p>
<p>2.hexo cl + hexo g </p>
<p>3.åˆ é™¤æ–‡ä»¶</p>
<p>4.hexo d</p>
]]></content>
      <tags>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
</search>
